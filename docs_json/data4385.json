{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.07645"}, {"@name": "filename", "#text": "12365_RODSegi.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "1 \n\nSEGMENTA\u00c7\u00c3O DE  \nIMAGENS AC\u00daSTICAS \n\nJo\u00e3o Rodrigues  \n\u00c1rea Eng. Electrot\u00e9cnica  \nEST/UALG \n \nHans du Buf \nVision Laboratory \nUCEH/UALG \n\n1. INTRODUC\u00c3O \nO processamento de imagem tem entre outras \naplica\u00e7\u00f5es a melhoria a codifica\u00e7\u00e3o e o \nreconhecimento de padr\u00f5es, pode-se citar como \nexemplos de \u00e1reas onde se efectua essa aplica\u00e7\u00e3o: o \ndiagnostico medico (raios X, resson\u00e2ncia magn\u00e9tica, \nultra som) a detec\u00e7\u00e3o remota (avi\u00f5es e sat\u00e9lites) e a \ngeologia (an\u00e1lise dados sonares e s\u00edsmicos).  \nMuitas dessas aplica\u00e7\u00f5es necessitam um pre-\nprocessamento para estabelecer uma representa\u00e7\u00e3o \ninterm\u00e9dia; uma representa\u00e7\u00e3o que permita uma \nan\u00e1lise sint\u00e1ctica/geom\u00e9trica para uma descri\u00e7\u00e3o ou \num reconhecimento, at\u00e9 atingirmos a visualiza\u00e7\u00e3o. A \nsegmenta\u00e7\u00e3o de imagem, ou de dados f\u00edsicos, em duas \nou mais dimens\u00f5es, \u00e9 considerado um passo \nimportante nesse processamento. \nA segmenta\u00e7\u00e3o tem por objectivo a divis\u00e3o da imagem \nem regi\u00f5es homog\u00e9neas, utilizando p.ex. os n\u00edveis de \ncinzento, as cores, ou a textura. Em geral, este \nobjectivo \u00e9 constitu\u00eddo por duas partes dependentes: \nobter um numero reduzido de regi\u00f5es finais e a melhor \nqualidade destas. Dado o facto de estes requisitos \nserem rec\u00edprocos, a segmenta\u00e7\u00e3o \u00e9 um aspecto \nimportante na investiga\u00e7\u00e3o. Um requisito adicional, \nnomeadamente no processamento do dados f\u00edsicos em \ntr\u00eas dimens\u00f5es, \u00e9 o tempo CPU: a melhor qualidade \ndentro de um tempo aceit\u00e1vel (p.ex. para uma \nvisualiza\u00e7\u00e3o interactiva dos dados em realidade \nvirtual). \nO trabalho apresentado neste artigo est\u00e1 inserido no \nprojecto ISACS (Integrated Syste m for the Analysis \nand Characterization of the Seafloor), financiado pela \nComiss\u00e3o Europeia no \u00e2mbito do programa MAST III, \ncujo objectivo \u00e9 a an\u00e1lise e a classifica\u00e7\u00e3o do fundo do \nmar pela explora\u00e7\u00e3o dos dados adquiridos a partir de \ndiferentes tipos de sonares  e a sua correcta integra\u00e7\u00e3o \n[1]. O cooperante Portugu\u00eas, UALG, Vision \nLaboratory, est\u00e1 a desenvolver para o projecto um \nsistema para visualiza\u00e7\u00e3o interactiva dos dados de \nsonar em 3D [1,2], onde  se insere este trabalho.  \nEm concreto este trabalho tem como objectivo testar \num algoritmo de segmenta\u00e7\u00e3o em 2D que seja robusto \ne r\u00e1pido para servir de base para um algoritmo de \nsegmenta\u00e7\u00e3o em 3D, que por sua vez vai ser aplicado \n\naos volumes de dados do projecto ISACS (trabalho a \nser apresentado numa pr\u00f3xima Tecnovis\u00e3o). Os \nresultados em 2D encontram-se apresentados com \nimagens (de ac\u00fastica submarina) do projecto ISACS \n(fig. 1).  \n\nSpann e Wilson [4] mostraram que na segmenta\u00e7\u00e3o em \n2D a aplica\u00e7\u00e3o de uma \u00e1rvore quatern\u00e1ria \u00e9 muito \u00fatil \nporque reduz o ru\u00eddo e melhora a separa\u00e7\u00e3o das \nclasses, permitindo num determinado n\u00edvel um \nagrupamento e uma classifica\u00e7\u00e3o. A resolu\u00e7\u00e3o \u00e9 \nmelhorada n\u00edvel a n\u00edvel pela projec\u00e7\u00e3o para baixo das \nregi\u00f5es e dos pixeis fronteira. Os \u00faltimos s\u00e3o \nreclassificados tendo por base a informa\u00e7\u00e3o dispon\u00edvel \nnos n\u00edveis mais baixos na \u00e1rvore. Mais tarde, Schroeter \ne Big\u00fcn [3] experimentaram com diferentes tipos de \nalgoritmos de agrupamento e melhoraram o processo \nde estima\u00e7\u00e3o da fronteira pela aplica\u00e7\u00e3o de filtros \nadaptativos. Os diferentes algoritmos de agrupamento \nconsiderados deram mais ou menos o mesmo resultado \ne o resultado da segmenta\u00e7\u00e3o final foi excelente.  \nO algoritmo aqui apresentado faz uso de uma pir\u00e2mide \nbaseada numa \u00e1rvore quatern\u00e1ria onde a presen\u00e7a de \nru\u00eddo vai ser reduzida a custa da resolu\u00e7\u00e3o da imagem. \nNum n\u00edvel alto da pir\u00e2mide  \u00e9 aplicado um algoritmo \nde agrupamento onde \u00e9 criada a imagem das etiquetas. \nA resolu\u00e7\u00e3o \u00e9 restaurada pela projec\u00e7\u00e3o para baixo das \netiquetas, para cada n\u00edvel (que se desce), surgindo a \nincerteza na classifica\u00e7\u00e3o dos pixeis fronteira. Esta \u00e9 \nminimizada por uma reclassifica\u00e7\u00e3o dos pixeis \npertencentes \u00e0s fronteiras em fun\u00e7\u00e3o da direc\u00e7\u00e3o \ndominante destas. \n\n2. SEGMENTA\u00c7\u00c3O EM 2D \nO algoritmo 2D pode assim ser dividido em tr\u00eas \npassos: (1) alisamento por \u00e1rvore quatern\u00e1ria, (2) \n\nFig. 1: Imagem \u201cTopas 2D\u201d, imagem ISACS 2D t\u00edpica.  \n\n\n\n 2 \n\nagrupamento e classifica\u00e7\u00e3o e (3) estima\u00e7\u00e3o da \nfronteira. \n\n2.1.  \u00c1RVORE QUATERN\u00c1RIA \nO primeiro passo do algoritmo consiste na constru\u00e7\u00e3o \nde uma pir\u00e2mide chamada \u00e1rvore quatern\u00e1ria (fig. 2). \nO n\u00edvel da \u00e1rvore quatern\u00e1ria acima da base consiste \nno conjunto de m\u00e9dias de blocos 2x2 de pixeis n\u00e3o \nsobrepostos da imagem original, este processo pode ser \nrepetido tantas vezes at\u00e9 que o n\u00edvel mais alto seja \nalcan\u00e7ado e em que o pico da pir\u00e2mide tenha um s\u00f3 \npixel cujo valor \u00e9 o valor m\u00e9dio da imagem inteira. \nMatematicamente, considere-se uma imagem NxN \n(n\u00e3o obrigatoriamente quadrada) definida  por  I(i,j) \n\npara 0 ? i,j&lt;N, onde mN 2= . A \u00e1rvore quatern\u00e1ria \u00e9 \ndefinida por: \n\n? ?\n= =\n\n++=\n1\n\n0\n\n1\n\n0\n\n122\n4\n1\n\na b\n\n)b,L-ja,iI(I(i,j,L)  (1) \n\nonde  0<L?m; 0 ?  i,j &lt;Lm?2  e I (i,j;0)=I(i,j). \n\n2.2. AGRUPAMENTO E CLASSIFICA\u00c7\u00c3O \nO segundo passo \u00e9 a aplica\u00e7\u00e3o de um algoritmo de \nagrupamento num n\u00edvel alto da pir\u00e2mide ( maxL ), \nrecorrendo para tal ao algoritmo que faz uso do \nhistograma dos n\u00edveis de cinzento dos pixeis: \nAgrupamento Centr\u00f3ide Local. Este algoritmo permite \nencontrar os centros das classes existentes na imagem \nno n\u00edvel em que vai ser aplicado. Para a cria\u00e7\u00e3o da \nimagem das etiquetas );,( maxLjiI ? , ser\u00e1 aplicada \numa classifica\u00e7\u00e3o dist\u00e2ncia m\u00ednima. Este m\u00e9todo \u00e9 \nsimples e r\u00e1pido na atribui\u00e7\u00e3o das classes aos pixeis. \nNo entanto, esporadicamente pode classificar \nincorrectamente alguns pixeis, mas estes ser\u00e3o \n\ncorrigidos pela restaura\u00e7\u00e3o da conectividade espacial. \n\n2.2.1. AGRUPAMENTO CENTR\u00d3IDE LOCAL \nEntende-se por um agrupamento a selec\u00e7\u00e3o de um  \nconjunto de valores de I, para os quais a gama de \nvalores que ocorrem relativamente muitas vezes est\u00e3o \nseparados dos que ocorrem poucas vezes. O algoritmo \nagrupamento centr\u00f3ide local [4] funciona  pela  \ncont\u00ednua actualiza\u00e7\u00e3o do histograma, movendo as \nmassas de probabilidade para a posi\u00e7\u00e3o do seu \ncentr\u00f3ide local at\u00e9 \u00e0 inexist\u00eancia de altera\u00e7\u00f5es no \nhistograma, permitindo assim encontrar os centros das \nclasses existentes na imagem no n\u00edvel em que \u00e9 \naplicado.  \nPara a cria\u00e7\u00e3o da imagem das etiquetas \n\n);,,( maxLkjiI ? \u00e9 aplicado uma classifica\u00e7\u00e3o dist\u00e2ncia \nm\u00ednima, que consiste no c\u00e1lculo do valor m\u00e9dio entre \nos centros das classes consecutivas. Ap\u00f3s a \ndetermina\u00e7\u00e3o destes, atribu\u00ed-se a todos os pixeis da \nimagem );,,( maxLkjiI ?  compreendidos entre duas \ndist\u00e2ncias m\u00ednimas consecutivas a etiqueta da classe \nque se encontra no interior dessas dist\u00e2ncias (obtendo-\nse a imagem da fig. 3).  \n\n2.2.2. RESTAURA\u00c7\u00c3O DA CONECTIVIDADE \nESPACIAL \nAp\u00f3s a conclus\u00e3o do processo de agrupamento e \nclassifica\u00e7\u00e3o podem ser observados alguns pixeis e \ngrupos de pixeis (regi\u00f5es insignificantes) que est\u00e3o \nespacialmente mal classificados devido \u00e0 n\u00e3o \nutiliza\u00e7\u00e3o de um crit\u00e9rio de conectividade espacial na \nclassifica\u00e7\u00e3o (fig. 3). Cada pixel isolado ou \npertencente a uma regi\u00e3o insignificante \u00e9 atribu\u00eddo \u00e0 \nclasse pertencente \u00e0 sua vizinhan\u00e7a de 8 do pixel, a \nqual apresenta a dist\u00e2ncia m\u00ednima a esse pixel. A \nimagem das etiquetas no n\u00edvel 2=L , ap\u00f3s ter sido \naplicado o algoritmo de aglomera\u00e7\u00e3o e classifica\u00e7\u00e3o, \nretirados os pixeis isolados e as regi\u00f5es insignificantes, \nest\u00e1 apresentada na fig. 4a. Na fig. 4b est\u00e1 representada \numa amplia\u00e7\u00e3o do canto  superior direito da imagem \ndas etiquetas apresentada na fig. 3. Na fig. 4c a \nimagem anterior depois de terem sido retirados os \npixeis isolados e na fig. 4d depois de serem retiradas as \nregi\u00f5es insignificantes. \n2.3. ESTIMA\u00c7\u00c3O DA FRONTEIRA \nO \u00faltimo passo consiste em transformar a imagem a \npartir do n\u00edvel mais alto da pir\u00e2mide maxL  at\u00e9 ao n\u00edvel \ncom a resolu\u00e7\u00e3o original 0=L .  \nNo n\u00edvel maxL  s\u00e3o determinados os pixeis da fronteira. \nUm pixel \u00e9 considerado como pixel fronteiro se pelo \nmenos uma etiqueta na vizinhan\u00e7a de 8 for diferente \nem ?I (i,j; maxL ). Depois ?I (i,j; maxL -1) \u00e9 obtida pela \nprojec\u00e7\u00e3o para baixo da etiqueta de cada pixel pai n\u00e3o-\nfronteiro para os seus respectivos 4 pixeis filhos. Os \n\nFig. 2: \u00c1rvore quatern\u00e1ria de \u201cTopas 2D\u201d, a partir do \nn\u00edvel L=0 (esquerda). \n\nFig. 3: Imagem ap\u00f3s a aplica\u00e7\u00e3o do algoritmo de \n\nagrupamento e classifica\u00e7\u00e3o com maxL =2 (ampliado).   \n\n\n\n 3 \n\nfilhos da fronteira definem a regi\u00e3o ? (fig. 5) na qual \nvai ser efectuada a estima\u00e7\u00e3o da fronteira. \nForam implementados dois m\u00e9todos de estima\u00e7\u00e3o da \nfronteira que t\u00eam por base o trabalho de Schroeter e \nBig\u00fcn [3]. \n\nO primeiro m\u00e9todo segue por completo o que os \nautores atr\u00e1s referidos  prop\u00f5em para diminuir a \nincerteza no c\u00e1lculo dos pixeis fronteiras. \nPara cada pixel da fronteira \u00e9 determinado o n\u00famero \n\ncomplexo mIz *)( 21 ??= ,  com ?I?  o gradiente da \nimagem das etiquetas ( ) ( )yIixI ??+?? // ??  e *m a \nconvolu\u00e7\u00e3o com um filtro Gaussiano de tamanho 7x7. \nA partir do argumento de 1z  \u00e9 obtida a orienta\u00e7\u00e3o \ndominante ? da fronteira nessa posi\u00e7\u00e3o. \nPara cada orienta\u00e7\u00e3o local dominante \u00e9 aplicado um \nfiltro borboleta (fig. 6a), onde: \nrr=(1-r)/n,     (2)  \n\n?\n?\n\n?\n?\n?\n\n?\n<<\n\n?\n=\n\n8              1\n\n82    2)/6-(\n\n0              0\n\nd\n\ndd\n\nd\n\nr\n    (3) \n\ncom a fun\u00e7\u00e3o de dissemelhan\u00e7a \n2\n2\n\n2\n121 / ??\u00b5\u00b5 +?=d     (4) \n\ne onde \n2,1\u00b5  e \n\n2\n2,1? s\u00e3o a m\u00e9dia e a vari\u00e2ncia de duas \n\nclasses em ambos os lados da fronteira, onde n \u00e9 o \nn\u00famero de pesos da m\u00e1scara diferentes de 0 e r. \n\n\u00c9 ainda necess\u00e1rio rodar o filtro para a direc\u00e7\u00e3o local \n? dominante. Isto \u00e9 feito pela rota\u00e7\u00e3o da m\u00e1scara da \n\nfig. 6a (?=0) e pela redistribui\u00e7\u00e3o dos pesos de forma \na corresponderem \u00e0 nova m\u00e1scara rodada.   \nAp\u00f3s a realiza\u00e7\u00e3o de testes considerando um n\u00famero \nde direc\u00e7\u00f5es dominantes entre 4 e 8, verificou-se que \nn\u00e3o existem altera\u00e7\u00f5es significativas em termos de \nresultados finais para uma m\u00e1scara borboleta 3x3. \nLimitou-se as direc\u00e7\u00f5es dominantes a 4 fig. 6b (a, b, c, \nd). Com esta simplifica\u00e7\u00e3o diminuiu-se o tempo gasto \nno c\u00e1lculo da rota\u00e7\u00e3o da m\u00e1scara da posi\u00e7\u00e3o horizontal \npara a direc\u00e7\u00e3o estimada ? e o c\u00e1lculo dos novos \ncoeficientes da m\u00e1scara em fun\u00e7\u00e3o da direc\u00e7\u00e3o. \nOs dois alvos )1,,,(1 ?Lkjir  e )1,,,(2 ?Lkjir , que \ncorrespondem respectivamente \u00e0 parte direita e \nesquerda da m\u00e1scara da fig. 6a, s\u00e3o calculados para a \ndirec\u00e7\u00e3o dominante. O pixel fronteiro \u00e9 atribu\u00eddo a \n\nclasse que obtiver o m\u00ednimo valor de uv r?\u00b5 , com \n1? u,v ?2. \nDiminuiu-se o valor de L de 1 e repetiu-se o \nprocedimento at\u00e9 atingir o fim da pir\u00e2mide. Pode-se \nobservar os resultados obtidos na fig. 7a e 7b, imagem \ndas etiquetas e imagem original com os contornos \nsobrepostos, respectivamente. \n\nCom o objectivo de diminuir o tempo de estima\u00e7\u00e3o da \nfronteira implementou-se o segundo m\u00e9todo , onde se \ndetermina os coeficientes do filtro r e rr aplicando (2) \ne (3), mas alterou-se o m\u00e9todo de c\u00e1lculo de \n\n2,1\u00b5  e \n\n2,1\n2?  para a dissemelhan\u00e7a (4), bem como o modo de \n\naplica\u00e7\u00e3o do filtro borboleta aos pixeis fronteira.  \nPara determinar \n\n2,1\u00b5  e 2,1\n2? , determina-se as duas \n\nclasses mais representativas na vizinhan\u00e7a de 8 na \nimagem I? (i,j;L). Para determinar essas classes foram \napenas consideradas representativas aquelas que eram \ncompostas por dois ou mais pixeis. Quando existe mais \ndo que duas destas classes com o mesmo grau de \nrepresentatividade, considera-se as \n\nC\u00b5  classes (com C \no n\u00famero de classes com igual representatividade das \n\u201cmais representativas\u201d) para o c\u00e1lculo da \ndissemelhan\u00e7a.  \nAplica-se simultaneamente todas as orienta\u00e7\u00f5es (fig. \n6b) ao mesmo tempo e para cada filtro efectua-se todas \nas combina\u00e7\u00f5es das \n\nC\u00b5  classes  (duas a duas entre \ndiferentes classes). De seguida e em separado, \ndetermina-se para cada filtro os dois alvos, \n\n)1,,,(1 ?Lkjir  e )1,,,(2 ?Lkjir . Finalmente \ncalcula -se a dist\u00e2ncia Euclidiana entre as classes \n\nFig. 4: Da esquerda para a direita a, b, c, d. (a) imagem \ndas etiquetas ap\u00f3s terem sido retiradas as regi\u00f5es \ninsignificantes e os pixeis isolados. (b) pormenor do \ncanto superior direito, (c) sem pixeis isolados e (d) sem \nregi\u00f5es  insignificantes.    \n\nFig. 5: Em cima: zona fronteira no n\u00edvel L, em baixo: \nregi\u00e3o ? no n\u00edvel L-1(imagem I? ). \n\nFig. 6: (a) m\u00e1scara borboleta; (b) orienta\u00e7\u00f5es do filtro. \n\n\n\n 4 \n\ndeterminadas e todos os alvos uC r?\u00b5 , \n1?u? )1( 4 ?CC .   \nAo pixel fronteiro \u00e9 atribu\u00eddo a etiqueta da classe que \ncorresponde \u00e0 dist\u00e2ncia m\u00ednima.  \nPor fim diminui-se o valor de L de 1 e repete-se o \nprocedimento at\u00e9 atingir o fim da pir\u00e2mide. Pode-se \nobservar os resultados deste m\u00e9todo na fig. 7c \n(imagem das etiquetas) e na fig. 7d imagem original \ncom os contornos delimitados. \n\n3. CONCLUS\u00d5ES \nObservou-se que o segundo m\u00e9todo de estima\u00e7\u00e3o da \nfronteira simplificou o processo de reclassifica\u00e7\u00e3o dos \npixeis pertencentes \u00e0s fronteiras, bem como diminuiu o \ntempo de c\u00e1lculo, evitando o c\u00e1lculo da direc\u00e7\u00e3o da \nfronteira e a rota\u00e7\u00e3o da m\u00e1scara. O segundo \nm\u00e9todo \u00e9  1.25 vezes mais r\u00e1pido que o \nprimeiro, isto para a imagem da fig. 1 com \nas dimens\u00f5es 256x256. Observou-se ainda \nque os dois m\u00e9todos apresentam resultados \nmuito aproximados. No entanto, o segundo \nm\u00e9todo para apresenta os contornos das \nregi\u00f5es com mais pormenor. \nO algoritmo de segmenta\u00e7\u00e3o em 2D aqui \nproposto com o segundo m\u00e9todo de \nestima\u00e7\u00e3o da fronteira, apresenta-se \nrobusto e r\u00e1pido para as imagem de \nac\u00fastica submarina em 2D provenientes do \nprojecto ISACS e apresenta boas \nperspectivas para ser extrapolado para 3D. \nEsta conclus\u00e3o \u00e9 devida \u00e0 qualidade dos \nresultados da segmenta\u00e7\u00e3o e tamb\u00e9m \ndevido a utilizar pouco tempo de c\u00e1lculo. \nNote-se que o \u00faltimo factor \u00e9 muito \nimportante tendo em vista a aplica\u00e7\u00e3o aos \nvolumes de dados ISACS, devido \u00e0s suas \ngrandes dimens\u00f5es. \n\n4. REFER\u00caNCIAS \n[1] Loke, R.E. and du Buf, J.M.H. (1998) \nVolumetric processing of Topas \n\nunderwater acoustic data, Proc. OCEANS\u201998 \nIEEE/OES Conf., Nice, pp. 742-746. \n[2] Nikolov, S.G., Loke, R.E. and du Buf, J.M.H., \n(1997) Interactive 3D visualization of sonar data using \nVRML, Proc. Int. Workshop on Synthetic -Natural \nHybrid Coding and Three Dimensional Imaging, \nRhodes, Greece, pp. 36-39. \n[3] Schroeter, P. and Big\u00fcn, J. (1995) Hierarchical \nimage segmentation by multi-dimensional clustering \nand orientation-adaptive boundary refinement, Pattern \nRecognition, Vol 28, N\u00ba 5, pp. 695-709. \n[4] Spann, M. and Wilson, R. (1985) A quad-tree \napproach to image segmentation which combines \nstatistical and spatial information, Pattern Recognition, \nVol 18, N\u00ba 3/4, pp. 257-269. \n\n \n\nFig. 7: Em cima da esquerda para a direita: (a) imagem das etiquetas e (b) \noriginal com os contornos delimitados para o 1\u00ba m\u00e9todo de estima\u00e7\u00e3o da \nfronteira. Em baixo: (c) e (d) para o 2\u00ba m\u00e9todo."}]}}}