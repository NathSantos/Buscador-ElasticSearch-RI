{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.09903"}, {"@name": "filename", "#text": "14917_PFC-20121-RodrigoLeaoCarvalho.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "DAS Departamento de Automa\u00e7\u00e3o e Sistemas\nCTC Centro Tecnol\u00f3gico\nUFSC Universidade Federal de Santa Catarina\nAutoma\u00e7ao de Teste de Ferramenta de Perfura\u00e7ao\nMonografia submetida \u00e0 Universidade Federal de Santa Catarina como requisito para a aprova\u00e7\u00e3o da disciplina:\nDAS 5511: Projeto de Fim de Curso\nRodrigo Le\u00e3o Carvalho\nFlorian\u00f3polis, Junho de 2012\nAutoma\u00e7\u00e3o de Teste de Ferramenta de Perfura\u00e7\u00e3o\nRodrigo Le\u00e3o Carvalho\nEsta monografia foi julgada no contexto da disciplina DAS 5511: Projeto de Fim de Curso e aprovada na sua forma final pelo\nCurso de Engenharia de Controle e Automa\u00e7\u00e3o Industrial\nBanca Examinadora:\nEng. Geraldo Antonio Signorini Filho Orientador na Empresa\nProf. Agustinho Plucenio\nOrientador do Curso\nProf. Ricardo Jose Rabelo Responsavel pela disciplina\nProf. Daniel Juan Pagano, Avaliador\nAcademico Diego Ferreira de Oliveira, Debatedor\nAcademico Guilherme Campos Angeloni, Debatedor\nAgradecimentos\n\u00c9 ir\u00f4nico pensar que, depois ter escrito a monografia inteira, a parte mais dif\u00edcil do trabalho e escrever os agradecimentos. Primeiramente, nao e simples traduzir em palavras a gratidao que tenho pelos meus pais, Andr\u00e9a e Antonio Carlos. Nao e algo que pode ser traduzido por numeros ou teorias que sao ensinadas na escola de engenharia. Essa gratidao pode ser definida pela sensacao de que nao foi em vao todo o esforco e confianca depositados em mim em todos esses anos, que todo amor e carinho que recebi da minha fam\u00edlia me deram forca para superar as mais diversas dificuldades e ter certeza que estava trilhando o caminho certo. Dedico todos os frutos do meu trabalho a eles e espero poder oferecer muito mais do que isso no futuro.\nTambem nao e facil resumir em apenas um par\u00e1grafo o apoio que tive de todos meus amigos de Florian\u00f3polis. Apoio de colegas de sala que dividiram noites sem dormir para honrar os compromissos da faculdade. Tambem houve noites sem dormir, e verdade, para festejar a melhor fase da minha vida na companhia de grandes amigos, e essas foram inesquec\u00edveis! Seria injusto nao agradecer em especial ao Igor, pela sua sincera amizade e companheirismo, ao Guilherme e Bruno, meus socios empreendedores, aos amigos petroleiros de Macae e a todos os amigos do nosso \u2019\u2019seleto grupo de e-mails\u201d.\nDurante o estagio tambem tive fundamental ajuda de algumas pessoas que nao posso deixar de agradecer. Geraldo, pela sua amizade, paciencia, didatica e confianca. Diogo, pelo esp\u00edrito de equipe e pelo constante incentivo. Aos outros es-tagiarios e trainees pelo companheirismo, e a confianca de toda a ger\u00eancia do segmento de Drilling and Measurements.\nDeixo tambem um agradecimento especial a Lara. Sem suas palavras confortantes, sua paciencia e seu carinho durante todo o per\u00edodo de estagio, eu nao teria tido tanta seguranca de que, no final, tudo daria certo.\nResumo\nEste documento apresenta a documenta\u00e7\u00e3o do projeto de est\u00e1gio desenvolvido na empresa Schlumberger Servi\u00e7os de Petroleo como parte fundamental das atividades do ultimo semestre do curso de Engenharia de Controle e Automacao da Universidade Federal de Santa Catarina. As atividades foram realizadas entre os meses de janeiro e junho de 2012, no contexto da disciplina DAS 5511: Projeto de Fim de Curso.\nA Schlumberger se destaca por ser a atual l\u00edder mundial na prestacao de servicos para a industria do petroleo. Com mais de 80 anos de atuacao no setor, a Schlumberger atua no Brasil ha mais de 35, tendo a sua maior base operacional do mundo localizada na cidade de Macae, Rio de Janeiro.\nEntre os diversos segmentos em que a Schlumberger e dividida, o segmento de Drilling and Measurements e o foco desse trabalho. O objetivo geral e aumentar a produtividade do processo de manutencao de um tipo de ferramenta de perfuracao direcional chamada de push-the-bit.\nO escopo do trabalho foi delimitado a um processo de manutencao conhecido na empresa como Flow Loop Test. Esse processo tem a finalidade de testar o comportamento das ferramentas do tipo push-the-bit em um ambiente que simula uma operacao real. O desenvolvimento do trabalho foi dividido em 5 etapas: definicao; medicao; analise; processo de melhoria e controle.\nA primeira etapa de desenvolvimento do projeto partiu de uma analise da situacao inicial do processo, apontando os principais problemas e oportunidades de melhoria. A partir dos problemas encontrados, foi realizada uma investigacao de causas e, em seguida, uma analise de viabilidade de poss\u00edveis solucoes. A quarta etapa do projeto foi realizar o desenvolvimento tecnico, que e o foco principal desse trabalho. Por ultimo, foram levantadas medidas para a manutencao das melhorias implementadas.\nO desenvolvimento tecnico resumiu-se a elaboracao de um sistema automatico de controle de vazao na planta de teste e a elaboracao de um sistema supervisorio. O projeto contou com restricoes de custo, o que motivou o desenvolvimento de um sistema inteiro atraves de tecnologias open-source.\nO sistema de controle de vazao se dividiu no projeto de um controlador PI (Proporcional-Integral) e de um hardware .O hardware foi composto de uma placa\nde aquisi\u00e7\u00e3o de dados desenvolvida a partir do Arduino. Arduino e uma plataforma de prototipagem eletr\u00f4nica de hardware livre, composta de uma placa microcontrolada. Arduino vem sendo bastante utilizada em projetos de automacao e suas principais caracter\u00edsticas sao: flexibilidade, r\u00e1pida curva de aprendizado e custo extremamente baixo para esse tipo de aplicacao.\nO sistema supervisorio tambem foi elaborado com iniciativas de c\u00f3digo aberto, ou do ingles open-source. O software foi desenvolvido atraves da plataforma Java e contou com o uso de bibliotecas e APIs (Application Pogramming Interface) de distribuicao livre.\nPalavras-chave: Automacao, controle digital de processos cont\u00ednuos, Arduino, desenvolvimento de placa de aquisicao de dados, sistema supervisorio, Java.\nAbstract\nThis report presents the internship project developed for Schlumberger Oilfield Services Company. The internship is the main activity of the last semester of the Control and Automation Engineering course at Federal University of Santa Catarina.\nSchlumberger is the world's largest oilfield services company. It is present in the oilfield area for more than 80 years and has been providing services in Brazil for more than 35. Its biggest base in the world is in Macae, Rio de Janeiro.\nSchlumberger is divided in several segments. \"Drilling and Measurements\u2019^ one of these segments and it is the focus of this work. The general goal is to increase the productivity of a directional drilling type of tool called push-the-bit.\nThe project's scope is the maintenance process known in the company as Flow Loop Test. The goal of this process is to test the push-the-bit tool behavior in a simulation enviroment. The project development was divided in 5 steps: defining, measuring, analyzing, improving and controlling.\nThe first development step was to analyze the initial state of the Flow Loop Test and to point the main problems and improvement opportunities. Then it was investigated the root cause of the problems and how it could be solved. The fourth step was related to the technical development, that is the main goal of the internship project. Finally, actions for the improvement maintenance were raised.\nThe technical development was related to the development of a automatic system to control the flow in the test area and a supervisory system. Cost constraints led the development of the entire system to be done through open-source technologies.\nThe flow control system was divided in the PI (Proportional-Integral) controller design and the hardware development. The hardware is composed by an electronic acquisition board developed through an open-source electronics prototyping platform called Arduino. Basically, Arduino is a microcontroller board that has been very used for automation projects and is: flexible; has a fast learning curve and it is cheap.\nThe supervisory system was also designed with open source technologies. It was used Java Platform to program the software and free libraries and APIs (Application Pogramming Interface).\nKeywords: Automation, digital control of continuous processes, Arduino, acquisition board design, supervisory system, Java.\nSum\u00e1rio\nLista de Figuras\tix\nLista de Tabelas\txiii\nSimbologia\txiv\n1\tIntrodu\u00e7\u00e3o\t1\n1.1\tHistoria do Petr\u00f3leo no Brasil.................................... 1\n1.2\tMomento Atual da Ind\u00fastria do\tPetr\u00f3leo............................ 3\n1.3\tSchlumberger Servi\u00e7os de Petroleo ................................ 5\n1.3.1\tSegmento de Drilling and Measurements...................... 6\n1.4\tApresenta\u00e7\u00e3o do Problema.......................................... 9\n1.5\tObjetivos do Projeto............................................. 12\n1.6\tEstrutura do Documento........................................... 13\n2\tProcesso de Manuten\u00e7ao de Ferramentas push-the-bit\t15\n2.1\tFlow loop Test .................................................. 16\n2.1.1\tDefine.................................................... 17\n2.1.2\tMeasure .................................................. 18\nIdentificando\tas Causas dos\tProblemas...................... 21\n2.1.3\tAnalyze .................................................. 22\n2.1.4\tImprove................................................... 24\n2.1.5\tControl................................................... 24\n2.2\tCronograma ...................................................... 25\n3\tHardware\t26\n3.1\tInversor de Frequencia............................................ 26\n3.1.1\t1o Bloco-CPU............................................... 27\n3.1.2\t2o Bloco-IHM............................................... 27\n3.1.3\t3o Bloco\t- Interfaces...................................... 28\n3.1.4\t4o Bloco\t- Etapa\tde potencia............................... 28\n3.2\tTransmissor de vazao.............................................. 29\n3.3\tProjeto da Placa de Aquisicao de Dados............................ 31\n3.3.1\tProjeto de Circuito para Controle do Inversor.............. 32\n3.3.2\tProjeto de Circuito para Leitura da Vazao.................. 36\n3.4\tPrototipagem...................................................... 40\n4\tModelagem e Controle\t43\n4.1\tConceitos Basicos de Controle..................................... 43\n4.2\tObjetivos de Controle ............................................ 44\n4.3\tLevantamento do Modelo............................................ 45\n4.3.1\tSistemas de Primeira Ordem ................................ 46\n4.4\tProjeto do Controlador ........................................... 48\n4.5\tAlgoritmo de Controle............................................. 53\n4.5.1\tDiscretizacao de Controlador Continuo ..................... 54\n4.5.2\tObtencao da Equacao de Diferencas a partir da Transformada Z 56\n4.6\tResultados........................................................ 56\n5\tSoftware Supervisorio\t59\n5.1\tVisao Geral do Sistema............................................ 59\n5.2\tLevantamento\tde Requisitos ..................................... 59\n5.3\tPlataforma de\tDesenvolvimento ................................... 61\n5.4\tComunicacao\tcom o Hardware...................................... 62\n5.4.1\tProtocolo de comunica\u00e7\u00e3o ............................. 63\n5.5\tImplementa\u00e7\u00e3o................................................ 65\n5.6\tTelas do Sistema Supervisorio................................ 71\n6\tResultados\t74\n7\tConclus\u00f5es e Perspectivas\t76\nReferencias\t78\nAp\u00eandice A: Funcionamento B\u00e1sico dos Inversores de Frequ\u00eancia\t83\nAp\u00eandice B: Medidor de Vaz\u00e3o Tipo Magnetico\t86\nAnexo A: Diagrama do Inversor de Frequ\u00eancia Varispeed E7 - Yaskawa 89 Anexo B: Lista de Componentes\t90\nAnexo C: Tabela de Transformadas\t91\nLista de Figuras\n1.1\tMatriz Energ\u00e9tica Mundial - 2009. [7]................................... 3\n1.2\tSegmentos da Schlumberger............................................... 6\n1.3\tSubseguimentos de D&amp;M................................................... 7\n1.4\tFerramenta de MWD [5]................................................... 8\n1.5\tModulacao de sinal pela ferramenta de MWD [5]........................... 9\n1.6\tTipos de perfuracao.................................................... 10\n1.7\tSteerable motor - Ferramenta do tipo point-the-bit..................... 11\n1.8\tPADS - Atuadores mecanicos para ferramentas push-the-bit [5]........... 11\n1.9\tLocalizacao espacial das ferramentas de perfuracao no fundo do poco\n[5].................................................................... 12\n1.10\tFlow Loop Test - Tecnico medindo o torque de ferramenta push-the-bit\t13\n2.1\tFerramenta push-the-bit [5]....................................... 15\n2.2\tFluxograma do processo de manutencao de ferramenta push-the-bit . .\t16\n2.3\tAnalise SIPOC - Suppliers, Inputs, Process, Outputs, Customers\t....\t18\n2.4\tVisao geral do Flow Loop Test..................................... 18\n2.5\tFluxograma detalhado do FlowLoop Test ................................. 18\n2.6\tValvula do tipo esfera............................................ 19\n2.7\tInversor de Frequencia............................................ 19\n2.8\tMotor de 400V utilizado para acionar bomba d'agua e linha de vazao do\nteste. ................................................................ 20\n2.9\tTimeline do processo antes do projeto............................. 22\n2.10\tProcesso feito manualmente pelos tecnicos com alta taxa de erro\thumano\t22\n2.11\tControlador do inversor de frequencia............................ 23\n2.12\tProcessos do Flow Loop Test que devem ser alterados.............. 23\n3.1\tBlocos de um inversor de frequ\u00eancia [21].................................... 27\n3.2\tDisplay de controle do inversor\tmodelo Varispeed\tE7\t-\tYaskawa ....\t28\n3.3\tModulo de controle do inversor\t- Posicao autom\u00e1tico e\tmanual....\t29\n3.4\tMedidor de vazao por placa de\torificio..................................... 29\n3.5\tMedidor de vazao por deslocamento positivo.................................. 30\n3.6\tMedidor eletromagnetico de vazao..................................... 30\n3.7\tMedidor SITRANS F M MAGFLO Mag5000, Siemens.......................... 30\n3.8\tPlaca Arduino Uno.................................................... 31\n3.9\tModulo de entrada anal\u00f3gica do inversor de frequencia - Sinais +V, A1\ne AC............................................................. 33\n3.10\tTransistores bipolares NPN e PNP.................................... 34\n3.11\tUtilizando transistor para amplificar sinal PWM do Arduino ................ 35\n3.12\tPrinc\u00edpio de funcionamento dos optoacopladores...................... 36\n3.13\tCircuito para controle da entrada analogica do inversor de frequencia\t.\t36\n3.14\tModulo de sa\u00edda analogica do transmissor de vazao Mag5000 ................. 37\n3.15\tPrinc\u00edpio de funcionamento do circuito utilizado para ler sinal de corrente\t37\n3.16\tTeste da relacao entrada-salda do optoacoplador 4N35................ 38\n3.17\tResultados do teste da relacao entrada-sa\u00edda do optoacoplador 4N35\t.\t39\n3.18\tFaixa de operacao aproximadamente linear do optoacoplador 4N35 .\t.\t39\n3.19\tCircuito para leitura do sensor de vazao............................ 40\n3.20\tSinal de corrente com ruido......................................... 40\n3.21\tSinal de corrente filtrado.......................................... 40\n3.22\tCircuito final do projeto ................................................. 41\n3.23\tPlaca de circuito impressa com escala em mm ............................... 41\n3.24\tSoldagem de componentes eletr\u00f4nicos ....................................... 42\n3.25\tHardware............................................................ 42\n4.1\tSistema de controle de vazao em malha aberta......................... 43\n4.2\tSistema de controle em malha fechada............................... 44\n4.3\tEnsaios ao degrau.................................................. 46\n4.4\tResposta de sistema de primeira ordem para entrada degrau, (a) sem\nzero, (b) com zero [32] ........................................... 47\n4.5\tDiagrama polo-zero da Equacao 4.8 com realimentacao negativa ....\t50\n4.6\tSISOTOOL - Ferramenta do Matlab que auxilia o projeto de controladores 50\n4.7\tResposta a um degrau de amplitude unitaria......................... 51\n4.8\tDiagrama Simulink para teste de robustez........................... 52\n4.9\tResposta ao degrau para teste de robustez.......................... 52\n4.10\tSistema de controle digital....................................... 53\n4.11\tRelacao entre os sinais de entrada e sa\u00edda de um conversor A/D...\t54\n4.12\tTransformacao de pulsos em degraus atraves de um ZOH.............. 55\n4.13\tMudanca de set-point da refer\u00eancia de vazao para 130 GPM.......... 57\n4.14\tComportamento do controlador para diferentes set-points........... 57\n5.1\tRequisitos funcionais do modo de controle do motor................. 60\n5.2\tRequisitos funcionais sobre o Downlink............................. 60\n5.3\tRequisitos funcionais sobre teste de torque........................ 61\n5.4\tIDE: Eclipse....................................................... 62\n5.5\tIDE: NetBeans...................................................... 62\n5.6\tComunicacao serial do Arduino atraves de conexao USB............... 63\n5.7\tFIRMATA: protocolo de comunicacao entre o Arduino e o software. ...\t64\n5.8\tSecoes principais do software...................................... 65\n5.9\tPainel de monitoramento principal.................................. 65\n5.10\tAba Home.......................................................... 66\n5.11\tAba Downlink.\t  67\n5.12\tAba Testing....................................................... 68\n5.13\tFluxograma do teste de torque..................................... 69\n5.14\tTorqu\u00edmetro digital CEDAR - DIW 15.\t  70\n5.15\tRelat\u00f3rios gerados na forma de planilhas do Microsoft Excel....... 71\n5.16\tControlador de vaz\u00e3o ............................................. 72\n5.17\tDownlink.......................................................... 72\n5.18\tTeste de Torque .................................................. 73\n6.1\tEstado inicial do processo de teste................................ 74\n6.2\tEstado final do processo de teste.................................. 75\n6.3\tAnalise quantitativa das melhorias................................. 75\n7.1\tSinais do inversor de frequencia em um ambiente idustrial.......... 76\nA.1 Estrutura basica de um inversor de frequencia trifasico............. 83\nA.2 Componentes de um motor de inducao [28]............................. 84\nA.3 Modulacao PWM [21].................................................. 84\nA.\t4 Duty Cicle de um sinal PWM [21].................................... 85\nB.\t1 Princ\u00edpio de funcionamento de medidores eletromagneticos\tde vazao .\t87\nB.2 Quadro comparativo entre tipos de medidores de vazao................ 88\nLista de Tabelas\n2.1\tPlanejamento\tdo est\u00e1gio 1\tdo projeto............................. 25\n2.2\tPlanejamento\tdo est\u00e1gio 2\tdo projeto............................. 25\n2.3\tPlanejamento\tdo estagio 3\tdo projeto............................. 25\n3.1\tSinais do modulo de entrada anal\u00f3gico do inversor................. 33\n4.1\tModelos experimentais ............................................ 48\n5.1\tFuncionalidades da tela\tde monitoramento geral do sistema......... 66\n5.2\tFuncionalidades da aba\tHome....................................... 67\n5.3\tFuncionalidades da aba\tDownlink................................... 68\n5.4\tFuncionalidades da aba\tTesting ................................... 69\nB.1 Lista de componentes............................................... 90\nSimbologia\nANP : Agencia Nacional do Petroleo, Gas Natural e Biocombustiveis. SLB : Schlumberger.\nD&amp;M : Drilling and Measurements.\nDD : Directional Drilling.\nMWD : Measure While Drilling.\nLWD : Logging While Drilling.\nBHA : Bottom Hole Assembly.\nPWM : Pulse With Modulation.\nCC : Corrente Continua.\nCA : Corrente Alternada.\nIGBT : Transistor Bipolar de Porta Isolada.\nPCB : Placa de circuito impressa (Printed Circuit Board).\nOSI : Open Systems Interconnection.\nDTE : Data Terminal Equipment.\nDCE : Data Communication Equipment.\nIDE : Integrated Development Environment.\nCap\u00edtulo 1: Introdu\u00e7\u00e3o\n1.1: Historia do Petr\u00f3leo no Brasil\nNo Brasil, a exist\u00eancia do petr\u00f3leo foi relatada pela primeira vez durante os tempos do regime imperial com a extracao de betume nas margens do rio Marau, na Bahia. Contudo, apenas na decada de 1930 foi criado o CNP - Conselho Nacional do Petr\u00f3leo - que determinou varias as diretrizes sobre a propriedade e exploracao das reservas nacionais [1].\nApesar das primeiras descobertas de petr\u00f3leo no Brasil terem sido em pequena escala, o surgimento dessa nova riqueza incentivou, em 1953 com a Lei no 2004, a oficializacao do monopolio estatal sobre a atividade petrol\u00edfera. Assim, nesse ano, foi criada a empresa estatal \u2019\u2019Petr\u00f3leo Brasileiro S.A.\u201d, mais conhecida como Petrobras\n[1].\nNa decada de 1960, novas medidas ampliaram o grau de atuacao da Petrobras na economia brasileira. No ano de 1968, a empresa passou a desenvolver um projeto de extracao iniciando a exploracao de petr\u00f3leo em aguas profundas. Apos as primeiras descobertas, outras prospeccoes ampliaram significativamente a producao petrol\u00edfera brasileira. Em 1974 foi descoberto petr\u00f3leo na Bacia de Campos, a maior reserva de petr\u00f3leo do pa\u00eds [1].\nEm 1997, a Lei no 9.478, tambem conhecida como nova lei do petr\u00f3leo, revogou a lei de 1953, citada anteriormente. Com a nova lei do petr\u00f3leo, alem da Petrobras, outras empresas constitu\u00eddas sob as leis brasileiras e com sede no Brasil passam a poder atuar em todos os elos da cadeia do petr\u00f3leo [2], ou seja, do poco ao posto (em ingles, from well to wheel), em regime de concessao ou mediante autorizacao do poder concedente - a Uniao. Ate o advento desta lei, outras empresas so podiam atuar no downstream isto e, apenas na venda dos derivados do petr\u00f3leo. A Petrobras perdeu, assim, o monopolio da exploracao e do refino de petr\u00f3leo no Brasil.\nTambem atraves da Lei no 9.478, em 1997, foi criada a Agencia Nacional do Petr\u00f3leo, Gas Natural e Biocombust\u00edveis (ANP). A ANP e o orgao regulador das atividades que integram as industrias de petr\u00f3leo e gas natural e de biocombust\u00edveis no Brasil. A ANP tem a finalidade de estabelecer regras, contratar e zelar pelo cumprimento das normas nas atividades de exploracao, desenvolvimento e producao de\npetr\u00f3leo e g\u00e1s natural no pa\u00eds.\nCom o passar do tempo, o Brasil se tornou uma das \u00danicas na\u00e7\u00f5es a dominar a tecnologia de explora\u00e7ao petrol\u00edfera em aguas profundas e ultra profundas. De porte dessa tecnologia avan\u00e7ada, o Brasil conseguiu em 2007 descobrir uma grande reserva de petroleo conhecida como Pr\u00ea-Sal.\nEm termos mundiais, o Pre-Sal descoberto em Tupi foi a maior descoberta da decada para a industria do petroleo. Segundo a Petrobras, sendo conservador, o petroleo do Pre-Sal pode, no m\u00ednimo, dobrar as reservas de hidrocarbonetos do Brasil [6]. Por enquanto a reserva do Pre-Sal situa-se do litoral de Santa Catarina ate o litoral do Esp\u00edrito Santo, com ind\u00edcios de que pode ir ate o Ceara [10].\nEm 2009, o governo aprovou novas regras para exploracao e producao de petroleo e gas natural na area de ocorr\u00eancia da camada Pre-Sal e em areas que venham a ser consideradas estrategicas. Esse novo conjunto de regras e conhecido como o novo marco regulatorio da industria de petroleo no Brasil e define que o regime de exploracao e producao de petroleo e gas natural no Brasil podem ser por concessao, partilha de producao ou cessao onerosa.\nA principal caracter\u00edstica do sistema de concessao e que as atividades sao realizadas por conta e risco do concessionario, sem interfer\u00eancia ou maior controle dos governos nos projetos de exploracao e producao, respeitada a regulacao existente [4]. Com o novo marco regulatorio, a primeira grande mudanca esta na troca do modelo de concessao (que sera mantido para os blocos ja licitados) para o contrato de partilha da producao, adotado em pa\u00edses com grandes reservas, como Arabia Saudita, Venezuela, Ira e Iraque [3].\nNo contrato de partilha, o Estado e as empresas dividem entre si a producao de oleo e gas, permitindo a Uniao capturar a maior parte da riqueza gerada com a renda do petroleo. Nesse novo modelo o governo podera contratar a Petrobras para produzir diretamente no pre-sal e em areas estrategias ou contratar empresas privadas por meio de licitacao, assegurando a estatal uma fatia m\u00ednima de 30% em cada bloco. Nesse regime, a Uniao sera representada por uma nova estatal, a Petro-Sal [3].\nA cessao onerosa de direitos preve que a Uniao podera ceder a Petrobras o direito de exercer atividades de exploracao e producao, em determinadas areas do Pre-Sal, sem licitacao, no limite de ate 5 bilhoes de barris de petroleo e gas natural. A companhia arcara com todos os custos e assumira os riscos de producao. O valor desta cessao onerosa sera avaliado segundo as melhores praticas da industria do\npetr\u00f3leo, e a Petrobras pagar\u00e1 \u00e0 Uni\u00e3o este valor [4].\n1.2: Momento Atual da Ind\u00fastria do Petr\u00f3leo\nFontes de energia n\u00e3o renov\u00e1veis, como o petr\u00f3leo, t\u00eam prazo para acabar, pois demoram milhoes de anos para serem criadas pela natureza e suas reservas vem diminuindo ou ficando inacess\u00edveis a medida que o tempo passa. Muitas iniciativas para a substituicao do petroleo por fontes renovaveis de energia tem sido tomadas, entretanto, o petroleo ainda e, e sera, a principal matriz energ\u00e9tica mundial por varios anos.\nMatriz Energ\u00e9tica Mundial (2009)\nCarv\u00e3o\n27%\nOutras\n11%\nNuclear\n6%\n\u00d3leo&amp; G\u00e1s\n54%\nHidroel\u00e9trica_\n\u00dc\nFigura 1.1: Matriz Energ\u00e9tica Mundial - 2009. [7]\nA Figura 1.1 mostra o comparativo entre as principais matrizes energ\u00e9ticas mundiais. Estudos realizados pela Agencia Internacional de Energia (IEA) mostram que ate 2030 o petroleo continuara sendo a fonte primaria de energia [8].\nAtualmente, a agricultura moderna e 90 % dos meios de transportes estao fortemente associados ao petroleo. A seguranca alimentar de quase sete bilhoes de indiv\u00edduos depende de uma agricultura bastante dependente dos derivados de petroleo por dois grandes motivos. O primeiro e que o petroleo e o combust\u00edvel para grande parte do maquinario utilizado no cultivo dos alimentos. Alem disso, grande parte das areas de producao agr\u00edcola sao distantes dos centros consumidores, o que torna o\nescoamento da produ\u00e7\u00e3o tamb\u00e9m dependente de meios de transportes movidos a petr\u00f3leo.\nEm meio a esse panorama, o Brasil ve sua riqueza proveniente do ouro negro se valorizar mais a cada dia. Com as estimativas do Pre-Sal, o Brasil se encontra entre os seis pa\u00edses que possuem as maiores reservas de petroleo do mundo, ficando atras somente de Arabia Saudita, Ira, Iraque, Kuwait e Emirados \u00c1rabes [9].\nAte 2011 as reservas de petroleo brasileiras totalizaram 15 bilhoes de barris. Com a incorporacao das reservas nao provadas do pre-sal as reservas brasileiras de petroleo e gas serao elevadas para 30 bilhoes de barris, segundo o gerente executivo de Desenvolvimento da Producao da Petrobras, Osmond Coelho Junior [11]. Em valor de mercado, atualmente a Petrobras ja e a segunda maior empresa do continente americano e a quarta maior do mundo, no ano de 2010 [16].\nPara conseguir se adaptar a essa nova realidade, o Conselho de Administracao da Petrobras aprovou um plano de investimentos de R$ 487,2 bilhoes entre 2012 e\n2016.\tO que corresponde a uma media de US$ 47,3 bilhoes por ano em aplicacoes. A maior parte dos recursos sera destinada a atividades de exploracao e producao (E&amp; P) no total de US$ 141,8 bilhoes [13].\nA Petrobras tambem divulgou um plano de investimentos da ordem de US$\n31,2\tbilhoes para ampliacao do parque nacional de refino de petroleo ate 2017. Esse investimento significara um aumento na capacidade de refino do pa\u00eds de 2 milhoes para 2,4 milhoes de barris de petroleo por dia ate 2014 [14]. O investimento no refino do petroleo traz consigo um aumento no valor agregado do petroleo e um grande benef\u00edcio para a economia nacional.\nPara atender a demanda desse aumento de producao, o Brasil precisara de muitos profissionais capacitados. A industria de oleo e gas, inclu\u00edda a cadeia de fornecedores, estima que, apenas no n\u00edvel tecnico, ate 2015 vao surgir mais de 50 mil oportunidades de emprego por ano. Para isso, a Agencia Nacional de Petroleo, Gas Natural e Biocombust\u00edveis (ANP) financia programas de capacitacao de profissionais como o PRH (Programa de Recursos Humanos - ANP), com recursos proprios e tambem por meio da Clausula de P&amp;D dos contratos de concessao (obrigatoriedade de investimentos em P&amp;D de 1 % da receita bruta dos campos de grande producao). Tambem existem programas como o Prominp, o Programa de Formacao de Recursos Humanos da Petrobras (PFRH), o Ciencia Sem Fronteiras para o setor do petroleo e os programas dos centros de formacao de profissionais para Marinha Mercante (Ciaga\ne Ciaba).\nDiante desses novos desafios, o curso de Engenharia de Controle e Automacao da Universidade Federal de Santa Catarina proporciona aos seus alunos uma (\u00f3tima oportunidade de terem contato com projetos de pesquisas na area de petroleo e gas e se prepararem para o mercado de trabalho. Desde os primeiros anos do curso, os alunos podem participar de projetos de P&amp;D da Petrobras ou ate de fazer parte do programa de capacitacao da ANP, o PRH-34.\n1.3: Schlumberger Servi\u00e7os de Petroleo\nNa industria do petroleo, podemos dividir as empresas, de forma generalista, em operadoras e prestadoras de servicos. A Petrobras, por exemplo, e a maior operadora do Brasil. Em 2008, ela contava com 63 sondas de exploracao (terra e mar) e 13174 pocos de producao [16]. Enquanto as empresas operadoras possuem os direitos exploratorios das reservas de petroleo, existem as empresas prestadoras de servicos que oferecem as mais avancadas tecnologias para viabilizar a exploracao e producao dessa riqueza. A Schlumberger Servicos de Petroleo (SLB)e uma dessas empresas.\nA Schlumberger e uma empresa francesa que atua na area de petroleo ha mais de 80 anos, estando presente no Brasil ha mais de 35. Nesse per\u00edodo, ela conseguiu se tornar a maior empresa prestadora de servicos da industria do petroleo no mundo, estando presente em mais de 80 pa\u00edses e empregando mais de 110 mil pessoas. A Schlumberger oferece servicos como:\n\u2022\tAquisicao e processamento s\u00edsmico;\n\u2022\tProspeccao, perfuracao e manutencao de pocos de petroleo;\n\u2022\tFraturacao e estimulacao hidr\u00e1ulica;\n\u2022\tConsultoria e desenvolvimento de sistemas de informacao.\nPara conseguir prestar servicos em quase todos os passos do ciclo de exploracao do petroleo, a Schlumberger se divide em diversos segmentos. A Figura 1.2 mostra essa divisao.\nLocalizar o reservat\u00f3rio:\nWesternGeco\nAcessar o reservat\u00f3rio:\nDrilling &amp; Measurements\nGerenciamento de projetos:\nIntegrated Project Management\nSistemas de Informa\u00e7\u00e3o: Schlumberger Information Systems &amp; DCS\nProduzir o reservat\u00f3rio:\nWell Completions &amp; Productivity\nOtimizar o reservat\u00f3rio:\nWell Services\n'-\u2022\u00abMr\n\nFigura 1.2: Segmentos da Schlumberger.\n1.3.1: Segmento de Drilling and Measurements\nEm meados dos anos 70, a atividade de perfuracao estava extremamente alta e a Schlumberger era a l\u00edder mundial. Entretanto, os clientes comecaram a exigir novas tecnologias para que, durante a operacao de perfuracao, se pudesse avaliar o ambiente, formacao e dados dos pocos em tempo real. Nessa epoca, a SLB tinha um segmento chamado Schlumberger Drilling Servicers (SDS) e que, em 1977, comprou a Analysts - que era uma companhia composta por analistas de perfis de lama ou geologistas, que pegavam amostras de lama da sub-superf\u00edcie e a avaliavam [17].\nA Analysts uniu-se ao SDS e formou-se a ANADRILL, que hoje e chamada de Drilling and Measurements (D&amp;M). A visao de D&amp;M e \"fornecer solucoes de perfuracao em tempo-real atraves de pessoas e tecnologia de ponta\". D&amp;M busca prover a industria do petr\u00f3leo com servicos de perfuracao com alto volume e em tempo real visando encontrar oleo e gas eficientemente, de maneira segura e aceitavel do ponto de vista do meio-ambiente [17].\nFigura 1.3: Subseguimentos de D&amp;M.\nA Figura 1.3 mostra como D&amp;M \u00e9 dividida. Seus principais servi\u00e7os s\u00e3o:\n\u2022\tDirectional Drilling (DD): Processo de guiar um po\u00e7o para seguir o melhor caminho geom\u00e9trico para alcancar seu objetivo ou seguir uma tendencia geol\u00f3gica;\n\u2022\tLogging While Drilling (LWD): \u00c9 um processo utilizado para fazer medidas da formacao geologica enquanto o poco e perfurado. Algumas medidas comuns de ferramentas de MWD sao: taxa de emissao natural de gamma-ray, resistivi-dade da formacao, densidade e porosidade. Com essas medidas o cliente pode inferir que tipo de formacao esta sendo perfurada e se ha ou nao presenca de hidrocarbonetos.\n\u2022\tMeasurements While Drilling (MWD): Possui uma funcao chave para a area de D&amp;M. Atraves das ferramentas de MWD, as medidas tomadas a cada instante pelas ferramentas de LWD podem ser enviadas a superf\u00edcie em tempo real atraves de tecnicas de telemetria. Outro papel fundamental das ferramentas de MWD e fornecer energia para as ferramentas de LWD a partir da energia gerada pela sua turbina (transforma a energia mecanica do fluido de perfuracao em energia eletrica).\nPara uma melhor compreensao do projeto nos cap\u00edtulos posteriores, e necess\u00e1rio entender como se da a comunicacao das ferramentas do BHA (Bottom Hole Assembly - e a parte da coluna de perfuracao que vai da broca ate, geralmente, a ultima ferramenta de D&amp;M) com os equipamentos de superf\u00edcie. Uma vez que nao ha cabos conectando as ferramentas de D&amp;M com a superf\u00edcie, toda a troca de comunicacao entre eles deve utilizar outro meio de propagacao.\nAs ferramentas de MWD podem utilizar 2 formas para enviar os dados de medi\u00e7\u00e3o do fundo do po\u00e7o para a superf\u00edcie. Para os casos em que a perfura\u00e7ao usa fluido de perfura\u00e7ao gasoso, as ferramentas enviam as informa\u00e7\u00f5es atraves de ondas eletro-magneticas. Na maioria dos \u00e7asos, o fluido perfura\u00e7ao usado nao e gasoso e sim l\u00edquido, ou mais \u00e7onhe\u00e7ido \u00e7omo \u201dlama\u201d. Nesses \u00e7asos, as ferramentas de MWD modulam os dados em sequen\u00e7ias binarias e as transmitem para a superf\u00ed\u00e7ie por pulsos de lama. Para modular os dados a ferramenta \u00e7onta \u00e7om modulador \u00e7onstitu\u00eddo de um estator e um rotor, Figura 1.4.\nFigura 1.4: Ferramenta de MWD [5].\nEm uma pro\u00e7esso de perfura\u00e7ao normal, a lama e bombeada da superf\u00ed\u00e7ie ate a ponta da bro\u00e7a por dentro da \u00e7oluna de perfura\u00e7ao. Isso signifi\u00e7a que a lama passa pela ferramenta de MWD em dire\u00e7ao a bro\u00e7a, e, a medida que a lama vai passando, o rotor do modulador vai girando. Como o estator do modulador nao se move, os lobulos do rotor se alinham e desalinham \u00e7om os lobulos do estator o tempo inteiro. Com isso, quando os lobulos estao desalinhados,a lama tem difi\u00e7uldade de passar pela ferramenta de MWD e gera um aumento de pressao dentro da \u00e7oluna. Da mesma forma, quando os lobulos estao alinhados a lama pode passar livremente e ha uma queda de pressao na \u00e7oluna, Figura 1.5.\nPara \u00e7odifi\u00e7ar a informa\u00e7ao ha um motor que \u00e7ontrola a velo\u00e7idade de giro do rotor, podendo mudar a frequen\u00e7ia e defasagem de fase do sinal. Na superf\u00ed\u00e7ie existem sensores de pressao que identifi\u00e7am a varia\u00e7ao de pressao dentro da \u00e7oluna e enviam essa informa\u00e7ao para que os dados sejam demodulados no \u00e7omputador.\nFigura 1.5: Modula\u00e7ao de sinal pela ferramenta de MWD [5].\n1.4: Apresenta\u00e7ao do Problema\nO estagio na Schlumberger foi realizado na area de Drilling and Measurements e o projeto foi relacionado com a area de Directional Drilling. Resumidamente, pocos direcionais sao pocos que nao sao exatamente verticais, que possuem uma trajet\u00f3ria calculada por pessoas especializadas, como por exemplo, por geologos. A Figura 1.6 mostra a diferenca entre cada tipo de perfuracao. Essas trajetorias sao calculadas por diversos motivos, entre eles:\n\u2022\tAcessar regioes inacess\u00edveis por pocos verticais;\n\u2022\tAumentar a produtividade dos pocos;\n\u2022\tPerfuracao em solo salino;\n\u2022\tDesviar de pocos ja existentes na regiao.\nNesse contexto, a Schlumberger possui diversas tecnologias para prover a perfuracao de pocos direcionais, ou horizontais. Basicamente, essas tecnologias sao dividias em\nFigura 1.6: Tipos de perfura\u00e7\u00e3o.\nferramentas de perfura\u00e7\u00e3o point-the-bit e push-the-bit. Ferramentas do tipo point-the-bit fazem \u00e7om que o eixo da broca seja desalinhado em rela\u00e7ao ao eixo do resto da coluna de perfura\u00e7\u00e9\u00edo,formando um \u00ab\u00e2ngulo que, a medida que o po\u00e7o vai sendo perfurado a bro\u00e7a vai seguindo uma determinada dire\u00e7ao em rela\u00e7ao a verti\u00e7al, veja a Figura 1.7. Ferramentas do tipo push-the-bit possuem um me\u00e7anismo diferente. A medida que a \u00e7oluna gira e o po\u00e7o e perfurado, a ferramenta utiliza o fluido de perfura\u00e7ao para a\u00e7ionar alguns dispositivos me\u00e7ani\u00e7os, \u00e7hamados de pads, que \u00e7olidem \u00e7ontra a forma\u00e7ao do po\u00e7o e empurram a ponta da bro\u00e7a para a dire\u00e7ao desejada. A Figura\n1.8\tmostra esses dispositivos me\u00e7ani\u00e7os.\nFerramentas do tipo push-the-bit possuem tr\u00eas pads independentes que, a medida que a \u00e7oluna gira, eles sao a\u00e7ionados de forma a \u00e7ompensar a rota\u00e7ao da \u00e7oluna e \u201dempurrar\u201da bro\u00e7a sempre para uma mesma dire\u00e7ao e in\u00e7lina\u00e7ao. Para poder fazer o \u00e7al\u00e7ulo da velo\u00e7idade de abertura e e qual dos tr\u00eas pads deve ser a\u00e7ionado\nFigura 1.7: Steerable motor - Ferramenta do tipo point-the-bit\nFigura 1.8: PADS - Atuadores mec\u00e2nicos para ferramentas push-the-bit [5].\nem cada momento, as ferramentas push-the-bit possuem circuitos eletr\u00f4nicos de controle e sensores para determinar a sua localizacao espacial. A localizacao especial possui duas referencias, uma em relacao ao sentido do campo gravitacional e a outra em relacao ao norte magnetico terrestre, veja a Figura 1.9. Esses sensores sao constitu\u00eddos por magnetometros e acelerometros.\nPor envolver bastante tecnologia e custos de operacao, qualquer erro desse tipo de ferramenta pode custar muito dinheiro para a empresa. Para minimizar falhas, a Schlumberger prove uma serie de testes de manutencao em suas ferramentas de perfuracao. Um desses testes para as ferramentas do tipo push-the-bit e chamado de Flow Loop Test, e e o foco desse trabalho.\nNo Flow Loop Test, as ferramentas de perfuracao push-the-bit sao testadas em uma planta que simula algumas operacoes de campo. Para isso, sao conectadas mangueiras na ferramenta por onde e bombeado agua a uma pressao de 0 a 2000 GPM (galoes por minuto). Essa e a faixa de operacao da maior parte das ferramentas de perfuracao.\nISOrv\u00e9yJp\u00f3i\u00f1t]\nHorizontal\nSyofwelli\nirojeclion ore\nJSuryey point:\nDire\u00e7\u00e3o em rela\u00e7\u00e3o ao Norte\nMagn\u00e9tico\nInclina\u00e7\u00e3o em rela\u00e7\u00e3o \u00e0 dire\u00e7\u00e3o do Campo Gravitacional\nDirection angle\n*\nFigura 1.9: Localiza\u00e7\u00e3o espacial das ferramentas de perfura\u00e7\u00e3o no fundo do po\u00e7o [5].\nNo teste, a ferramenta fica parada sobre um cavalete e \u00e9 programada para simular a acao de \u201dempurrar\u201da broca para uma determinada direcao. Basicamente, como a ferramenta nao esta girando, se ela for programada para \u201dperfurar\u201dem uma determinada direcao, apenas um dos pads deve ser acionado e permanecer aberto durante todo o tempo, uma vez que em operacoes de campo os outros pads sao acionados apenas para compensar o giro da coluna. Partindo desse princ\u00edpio, o Flow Loop Test analisa o comportamento da ferramenta para diversos comandos e tambem mede o torque que a ferramenta fornece para o acionamento dos pads. A Figura 1.10 mostra um Flow Loop Test em andamento na planta.\n1.5: Objetivos do Projeto\nO objetivo desse trabalho \u00e9 fazer um estudo detalhado sobre como o Flow Loop Test vem sendo feito na Schlumberger, propor e implementar melhorias no processo. A ideia e aumentar a produtividade do processo de manutencao das ferramentas do tipo push-the-bit, fazendo com que o trabalho dos tecnicos seja feito de forma mais pratica e com melhor qualidade. Os requisitos basicos do projeto foram: ter baixo custo e utilizar equipamentos/componentes dispon\u00edveis na regiao de Macae.\nAntes da implementacao do projeto, o teste demorava aproximadamente 1,5 h para ser realizado; era necessario ter 2 tecnicos durante todo o per\u00edodo e a taxa de retrabalho era de ate 20% devido a erros humanos, o que representava um atraso da\nFigura 1.10: Flow Loop Test - T\u00e9cnico medindo o torque de ferramenta push-the-bit\nordem de 30 min no teste.\nNesse contexto, foram definidos dois objetivos:\n\u2022\tTornar o teste fact\u00edvel por apenas um tecnico;\n\u2022\tEliminar erros humanos no teste.\n1.6: Estrutura do Documento\nEsta monografia e composta por 7 cap\u00edtulos, Apendices e Anexos. O primeiro cap\u00edtulo contextualiza o assunto abordado pelo trabalho e aponta os objetivos gerais do projeto.\nO Cap\u00edtulo 2 define a metodologia que o projeto foi desenvolvido e faz uma analise aprofundada do problema. A partir dessa analise, sao definidos os objetivos espec\u00edficos, e justificado o porque do trabalho e definido um cronograma para pesquisas e desenvolvimento tecnico.\nO Cap\u00edtulo 3 aborda a primeira questao relacionada diretamente ao curso de Engenharia de Controle e Automacao, que e o desenvolvimento de uma placa eletr\u00f4nica\nde aquisi\u00e7\u00e3o de dados. Al\u00e9m do embasamento te\u00f3rico necess\u00e1rio para o desenvolvimento da placa, esse cap\u00edtulo mostra como foi poss\u00edvel construir um prototipo para testes.\nNo Cap\u00edtulo 4 e demonstrado a teoria basica de modelagem de sistemas dinamicos e metodos de analise e controle de sistemas realimentados. Tambem sao demonstrados os resultados de testes do sistema de controle projetado aplicados na planta real.\nO Cap\u00edtulo 5 apresenta o produto final do projeto, que e um software super-visorio comunicando com a placa de aquisicao de dados projetada anteriormente. Esse cap\u00edtulo apresenta as especificares do sistema e a implementacao do mesmo.\nOs resultados do projeto sao apresentados no Cap\u00edtulo 6 e as conclus\u00f5es finais e perspectivas futuras estao no Cap\u00edtulo 7.\nOs Apendices A e B apresentam alguns conceitos tecnicos necessarios para o desenvolvimento do hardware. Os Anexos mostram algumas informacoes adicionais que podem ser interessantes para consultas futuras.\nCap\u00edtulo2: Processo de Manuten\u00e7\u00e3o de Ferramentas push-the-bit\nAs ferramentas do tipo push-the-bit s\u00e3o compostas por basicamente 3 m\u00f3dulos: Bias Unit, Control Unit e Control Collar. A Figura 2.1 mostra como e a disposicao de cada modulo na ferramenta.\nFigura 2.1: Ferramenta push-the-bit [5].\n\u2022\tControl Collar: \u00c9 respons\u00e1vel por manter a integridade f\u00edsica da ferramenta. \u00c9 formado por material nao-magnetico de alta tecnologia, resistente a choques, temperatura etc. Mesmo sendo a parte mecanicamente mais simples, e o modulo mais caro da ferramenta.\n\u2022\tBias Unit: \u00c9 um sistema constitu\u00eddo de atuadores mecanicos (pads) protegidos por um colar nao-magnetico. Seu objetivo e converter a pressao hidr\u00e1ulica do fluido de perfuracao, que passa por dentro da ferramenta em direcao a broca, em energia mec<anica para direcionar a perfuracao do poco.\n\u2022\tControl Unit: \u00c9 o \u201dcerebro\u201dda ferramenta. Contem toda a parte eletr\u00f4nica e de sensores utilizadas para direcionar o poco. Fica instalado dentro do Control\nCollar em um local isolado da press\u00e3o ambiente. Possui um conjunto de acoplamentos mec\u00e2nicos que controlam o funcionamento do Bias Unit.\nConforme e mostrado na Figura 2.2, o processo de manutencao das ferramentas push-the-bit se divide em tres grandes areas, uma para cada modulo.\nFigura 2.2: Fluxograma do processo de manuten\u00e7\u00e3o de ferramenta push-the-bit\nO Flow Loop Test e a \u00faltima etapa da manutencao do Control Unit e uma das mais importantes de todo o processo.\n2.1: Flow loop Test\nO desenvolvimento do projeto de melhorias do Flow Loop Test seguiu um conjunto de praticas originalmente desenvolvidas pela Motorola para melhorar sistematicamente os processos ao eliminar seus defeitos. Esse conjunto de praticas e conhecido como Seis Sigma ou Six Sigma [19]. Seis Sigma tambem e definido como uma estrategia gerencial para promover mudancas nas organizacoes, fazendo com que se chegue a melhorias nos processos, produtos e servicos para a satisfacao dos clientes [18].\nProjetos Six Sigma seguem duas metodologias inspiradas pelo Plan-Do-Check-Act Cycle de Walter A. Shewhart (amplamente difundidas por Edwards Deming, no Japao pos-guerra). Estas metodologias, compostas de cinco fases cada, sao chamadas pelos acr\u00f4nimos DMAIC e DMADV.\n\u2022\tDMAIC e usado para projetos focados em melhorar processos de negocios ja existentes;\n\u2022\tDMADV e usado para projetos focados em criar novos desenhos de produtos e processos.\nPara o Flow Loop Test, o metodo DMAIC foi escolhido para guiar a gestao do projeto. DMAIC significa Define, Measure, Analyze, Improve e Control.\n\u2022\tDefine: e usado para definir o problema;\n\u2022\tMeasure: coletar dados importantes e mensura-los;\n\u2022\tAnalyze: analisar as causas do problema e escolher a melhor solucao;\n\u2022\tImprove: melhorar e otimizar o processo baseado na analise dos dados;\n\u2022\tControl: controlar o futuro estado de processo para se assegurar que quaisquer desvios do objetivo sejam corrigidos antes que se tornem em defeitos.\n2.1.1: Define\nA partir do DMAIC, a primeira etapa a ser seguida e definir o problema e delimitar o escopo do projeto. Para isso, foi feita uma analise junto ao time de engenheiros de manutencao de D&amp;M sobre a atual situacao do Flow Loop Test e entao foi utilizada uma ferramenta chamada SIPOC (Suppliers, Inputs, Process, Outputs, Customers) para delimitar o escopo do projeto. Os resultados foram:\n\u2022\tProblema relacionado a custos: durante toda a duracao do teste, um dos dois tecnicos responsaveis fica ocioso por mais da metade do tempo, o que significa uma subutilizacao de recursos humanos;\n\u2022\tProblema relacionado a qualidade: em media, de 10 a 20% dos testes apresentam retrabalho, e atrav\u00e9s de uma analise mais detalhada percebe-se que na maior parte das vezes esse retrabalho e resultado de erro humano.\nO mapeamento da Figura 2.3 possibilita uma melhor visao sobre o escopo do processo bem como quais sao seus fornecedores e clientes, mostrando os inputs necess\u00e1rios para o in\u00edcio do processo e quais sao os outputs esperados depois do processo finalizado [20]. Para o Flow Loop Test e\u00ed interessante notar que o time de Directional Drilling e, ao mesmo tempo, cliente e fornecedor do processo.\nFigura 2.3: An\u00e1lise SIPOC - Suppliers, Inputs, Process, Outputs, Customers\n2.1.2: Measure\nAntes de mensurar os dados do Flow Loop Test, e preciso conhece-lo. Para entender o processo e poder identificar os poss\u00edveis pontos de melhoria, o projeto mapeou todas as etapas do teste. A Figura 2.4 mostra uma visao geral do processo e a Figura 2.5 mostra cada uma das etapas em detalhes.\nFigura 2.4: Vis\u00e3o geral do Flow Loop Test\nmeasuring!\nFill out the spreadsheet\nDumping the tool\nStarting pump\nYes\nSaving the spreadsheet\nMoving Tools\nProgramming Tool\nSetting up\ni Moving the ' Control Collar to Flow Loop\n&lt;area /\nSetting flow for torque test set point\nMeasuring the anti clockwise torque\nFill out the spreadsheet\nMeasuring the clock wise torque\nDOWNLINK LOOP\nConnecting the Control Unit Test cable to the Upper Torquer spindle connector and programming the tool using ToolScope\nTurning the pump on\n4 Z\nSet flow for 130\nGPM\nSetting flow for\nthe Downlink&lt;- Waiting 2 min set point\nInstalling the Control Unit into the appropriate Collar.\nMoving the Control Collar to the Flow Loop's rack\nPrepari ng the setup\nChecking if the Downlink was accepted\nDisassembling the setup\nMeasuring the torque friction\nExecuting\t\tWaiting\nHIGH or LOW\t\tDownlink\nCommand\t\ttime\nFigura 2.5: Fluxograma detalhado do Flow Loop Test\nDe forma resumida, o teste e constitu\u00eddo de 7 etapas. Primeiro e necess\u00e1rio\nmover o Control Collar para o cavalete da planta. O tempo de movimenta\u00e7\u00e3o da ferramenta varia bastante, pois depende da disponibilidade das talhas do chao de fabrica.\nLogo em seguida, deve-se conectar um cabo entre o Control Unit e um computador para programar a ferramenta. Tendo a ferramenta programada, desconecta-se o cabo e inicia-se o procedimento de carregar o Control Unit para dentro do Control Collar e parafusa-lo. Em seguida, conectam-se as mangueiras no Control Collare abrem-se as valvulas da Figura 2.6.\nFigura 2.6: V\u00e1lvula do tipo esfera\nA quarta etapa do teste e ligar o inversor de frequ\u00eancia, Figura 2.7, que controla a bomba d\u2019agua.\nFigura 2.7: Inversor de Frequ\u00eancia\nNa Figura 2.8, o n\u00famero \u201d3\u201daponta o motor, de pot\u00eancia superior a 40kW utilizado para bombear a agua. O n\u00famero \u201d1\u201daponta o reservat\u00f3rio para cerca de nove mil litros de agua e o numero \u201d2\u201dmostra parte da linha que leva a agua ate a ferramenta.\nFigura 2.8: Motor de 400V utilizado para acionar bomba d\u2019\u00e1gua e linha de vaz\u00e3o do teste.\nDepois de ter a ferramenta montada e a bomba ligada, o proximo passo do teste e enviar um downlink para a ferramenta. Downlink e um procedimento que utiliza a mesma base teorica da telemetria do MWD, mas com objetivos diferentes. Algumas ferramentas de perfuracao direcional, como as do tipo push-the-bit da SLB, podem ser reprogramadas para mudar a direcao de perfuracao no meio de uma operacao, sem ter que trazer a ferramenta para superf\u00edcie. Para isso, a pessoa responsavel por realizar a perfuracao (directional driller) pode enviar um downlink para a ferramenta.\nDownlink nada mais e do que enviar um comando para a ferramenta utilizando uma sequencia binaria. Essa informacao e enviada para dentro do poco atrav\u00e9s de pulsos de lama e interpretado pelo circuito eletr\u00f4nico da ferramenta. Para identificar esses pulsos de lama, a ferramenta push-the-bit supervisiona, durante todo o tempo, a taxa de rotacao de sua turbina e consegue inferir mudancas de vazao da lama. Para\nenviar os pulsos de lama, o directional driller varia a taxa de bombeio de lama das bombas na superf\u00edcie.\nNo Flow Loop Test, o downlink e simulado utilizando-se agua no lugar da lama, e um inversor de frequencia para controlar a vazao de fluido bombeado para a ferramenta.\nO sexto e mais complexo passo do teste e o teste de torque. O teste de torque mede se o torque que o Control Unit esta exercendo no Bias Unit e suficiente para o bom funcionamento da ferramenta. Para isso, um dos tecnicos conecta um torqu\u00edmetro no eixo da ferramenta e realiza as medidas de torque. Enquanto isso, o outro tecnico confere no display do sensor de vazao, a vazao naquele exato instante. Apos ter coletado o valor de torque e vazao no mesmo instante, os dados sao inseridos em um software que calcula se a ferramenta esta funcionando bem, ou nao.\nO teste de torque e feito para 7 diferentes set-points de vazao. Para cada setpoint e realizada uma medida de torque no sentido horario e outra no sentido antihorario.\nO ultimo passo do teste e desmontar todo o set-up e analisar os dados do teste que ficaram gravados na memoria do Control Unit. Se todos os dados estiverem certos e os valores de torque estiverem dentro de faixas aceitaveis, a ferramenta esta pronta para continuar seu ciclo de manutencao.\nIdentificando as Causas dos Problemas\nAntes de projetar uma solucao para os problemas de custo e qualidade relacionados com o Flow Loop Test, e preciso identificar as causas de cada um. Para identificar o problema de custo, foi realizado a modelagem do processo no decorrer do tempo, Figura 2.9. Analisando esse diagrama e poss\u00edvel ver que, apos ajudar na movimentacao da ferramenta, o tecnico 2 fica ocioso por mais de 60% do teste. Esse tempo ocioso e a maior causa de desperd\u00edcio no Flow Loop Test e sera o foco das acoes de reducao de custo.\nPara identificar a causa da alta taxa de retrabalho no teste, foi feito um estudo detalhado em cada bloco do fluxograma da Figura 2.5. Como resultado, foi identificado que na grande maioria das vezes em que o processo sofria retrabalho, a causa era erro humano. A Figura 2.10 mostra a fonte desses erros humanos: o downlink. Como downlink e uma forma de transmitir informacao para a ferramenta por uma sequencia\nbin\u00e1ria, os \u201dzeros\u201de \u201duns\u201dda sequ\u00eancia (que s\u00e3o pulsos positivos e negativos na vaz\u00e3o do fluido que passa pela ferramenta) devem ser enviados nos instantes corretos. Esse processo de downlink era feito de forma completamente manual pelos tecnicos.\nFigura 2.9: Timeline do processo antes do projeto.\nFigura 2.10: Processo feito manualmente pelos t\u00e9cnicos com alta taxa de erro humano\nO t\u00e9cnico dispunha de um cron\u00f4metro, uma tabela com os tempos em que cada sinal binario deveria ser enviado para a ferramenta e um botao que envia os sinais \u201dze-ros\u201de \u201duns\u201dpara o inversor de frequencia, Figura 2.11. Cada downlink dura em media 5 min e durante todo esse tempo o tecnico deve enviar diversos \u201dzeros\u201de \u201duns\u201dpara a ferramenta nos instantes exatos. Como essa atividade requer boa precisao e atencao total durante todo o tempo, e compreens\u00edvel que a taxa de erro humano seja tao elevada.\n2.1.3: Analyze\nPara eliminar a necessidade do tecnico 2 participar do teste, e necessario modificar 3 processos do Flow Loop Test, veja Figura 2.12.\n1.\tO processo de preparar o set-up vinha sendo realizado por dois tecnicos, uma vez que uma pessoa sozinha nao conseguia movimentar e instalar o Control Unit no Control Collar. Entretanto, foi testado realizar esse mesmo processo\nFigura 2.11: Controlador do inversor de frequ\u00eancia.\nFigura 2.12: Processos do Flow Loop Test que devem ser alterados.\nra l_ c\tb S\t\t\t\u00a3 E\tc\t3\t\t\t\no o\ti S\t5\t5\to\t\t\t\u201cO\t\u25a1\t\nH\te E ? E\t0\tjs\tCfl L.&lt;o\t\ts fl\tUl\t<T u Q\tS 0 E \u00ed E 2\n<U U.\t2O-\t1S\u2018\t8. 1 O.\t\u00aby\t\t5 C 10'\to O\ts\tV 1\u2014\t1- 14-\t* s i \u00a3 **\"\t15\u2018\n\t\t\t4\t\tS'\tr\t\t\t\n\t\t\tO\t\t\t\t\t\t\nrn\t\t\t'2.\t\t\t\t\t\t\na. C\t<U\t\u2022\t\tCD\t\t\t\t<U\tra\n<J CJ\tk.\t\t\t\t\t\t\t3\t\nO E\t<u\t0\tOi\tOJ\t\t\t\tcr\t0)\n\tQ.\te\t\u201cO\t\u25a1\tL\t\t\to\tQ.\n2 t\t\t&amp;\t\t\t\t\t<\u00fc\t\tW)\n<U\tLU\tt\tts\tLU\t\t\t1-\t\tLU\nLL.\t\u00ed0-\t15*\ti\tio-\t*\t\t\tw\t\t16'\t15*\n\t\t\thr\t\t\t\t\t\t\ncom apenas um t\u00e9cnico atrav\u00e9s de um cart (carrinho projetado para transporte de ferramentas) com regulagem de altura. Os resultados da utilizacao do cart foram muito bons e, com isso, o processo de \"preparar o set-up\u201dpassou a ter sua realizacao fact\u00edvel por apenas um tecnico.\n2.\tO processo de realizar o teste de fric\u00e7\u00e3o pelo tecnico 2 ao mesmo tempo que o tecnico 1 prepara a planilha do Flow Loop Test poupava cerca de 5 min do tempo final do teste. Entretanto, o fato das duas atividades serem realizadas simultaneamente nao era um requisito do processo, podendo enteio, ser realizado apenas por uma pessoa.\n3.\tO teste de torque e o processo mais complexo de ser alterado. Como foi explicado anteriormente, o teste de torque envolve a medida do torque no eixo do Control Unit ao mesmo tempo que a deve-se medir a vazao do fluido que passa pela ferramenta. Para que esse processo seja fact\u00edvel por apenas um tecnico, e\nnecessario que haja um software que receba em tempo real as medidas de torque e vazao e, ao comando do tecnico, armazene os valores medidos naquele instante.\nPara solucionar os problemas de erros humanos foi decidido automatizar o downlink. Para isso e necessario que haja um software em que o usuario possa escolher qual downlink ele deseja realizar. Esse software se comunicaria com uma placa de aquisicao de dados que, por sua vez, controlaria o motor atraves do inversor de frequencia.\nPortanto, a solucao a ser implementada deve ser capaz de ler em tempo real o valor da vazao na ferramenta, do torque no eixo do Control Unit e conseguir controlar o motor atraves de um software. Com isso, o processo de teste de torque e de downlink serao feitos de forma automatica e coordenados por apenas um tecnico.\n2.1.4: Improve\nPara o desenvolvimento da automacao do teste foram impostas algumas restricoes. A primeira e que o projeto deve ser de baixo custo e contar apenas com componentes locais (que podem ser comprados na cidade de Macae ou com rapida entrega pela Internet). A segunda restricao e que o set-up do Flow Loop Test deve ter o m\u00ednimo de modificacoes poss\u00edveis. Por ultimo, apos a implementacao do projeto, devera ainda ser poss\u00edvel realizar todo o procedimento de forma manual, para eventuais falhas no projeto e/ou a realizacao de um teste fora das especificacoes do sistema.\nA parte de desenvolvimento tecnica do projeto esta registrada nos cap\u00edtulos posteriores.\n2.1.5: Control\nApos a finalizacao do projeto de estagio, o time de manutencao de ferramentas direcionais foi treinado para utilizar o sistema desenvolvido. A equipe de engenharia de manutencao de D&amp;M ficou responsavel por futuras melhorias no processo e divulgacao dos resultados obtidos para outras bases da Schlumberger.\nNo cap\u00edtulo de conclusao sera abordado com maiores detalhes os resultados do projeto.\n2.2: Cronograma\nO desenvolvimento do projeto foi dividido em tres estagios. O primeiro estagio contou com o desenvolvimento do hardware, representado pela placa de aquisicao de dados. O segundo estagio contou com o desenvolvimento do software e da interface do sistema com a leitura de torque. Por ultimo, foi feito uma pesquisa com o time de manutencao da ferramenta push-the-bit para realizar melhorias de projeto baseado na experiencia dos usuarios.\nTabela 2.1: Planejamento do est\u00e1gio 1 do projeto\nEstagio 1\t\nTarefa\tDura\u00e7ao (sem.)\nEspecifica\u00e7\u00e3o/Projeto de placa de aquisi\u00e7\u00e3o de dados\t2\nComunica\u00e7\u00e3o entre a placa de aquisi\u00e7ao de dados e o inversor\t2\nLeitura do sensor de vazao atrav\u00e1s da placa\t2\nImplementa\u00e7\u00e3o de controlador PI\t1\nTabela 2.2: Planejamento do est\u00e1gio 2 do projeto\nEstagio 2\t\nTarefa\tDura\u00e7\u00e3o (sem.)\nDesenvolvimento da interface gr\u00e1fica do software\t2\nImplementa\u00e7\u00e3o de protocolo de comunica\u00e7\u00e3o com a placa\t1\nImplementa\u00e7\u00e3o de protocolo de comunica\u00e7ao com torqu\u00e1metro\t1\nPrototipagem do sistema\t2\nTabela 2.3: Planejamento do est\u00e1gio 3 do projeto\nEstagio 3\t\nTarefa\tDura\u00e7\u00e3o (sem.)\nAcompanhamento de uso do prot\u00e1tipo e levantamento de melhorias\t1\nImplementa\u00e7\u00e3o de melhorias no projeto\t1\nCap\u00edtulo3: Hardware\nA parte de hardware necessaria para automatizar o processo e composta, basicamente, de uma placa eletronica capaz de controlar a bomba d'agua, adquirir o sinal de sa\u00edda do transmissor de vazao e trocar informacoes com um sistema supervisorio instalado em um computador.\nPara projetar a placa, primeiro e preciso conhecer o funcionamento do inversor de frequencia que aciona a bomba e, em seguida, do medidor de vazao.\n3.1: Inversor de Frequencia\nInversor de Frequencia e um dispositivo eletrico ou eletromec\u00e9\u00e0nico capaz de converter um sinal eletrico CC (corrente cont\u00ednua) em um sinal eletrico CA (corrente alternada). Para converter um sinal de tensao ou corrente cont\u00ednua em alternada, os inversores usam componentes eletr\u00f4nicos como transistores, IGBTs ou MOSFETs para chavear o sinal de entrada [23]. Existem diversas aplicacoes para os inversores de frequencia, entre elas esta o acionamento de motores eletricos. No Apendice A e explicado de forma mais detalhada como funciona um inversor de frequencia e quais sao as suas vantagens.\nPara controlar a bomba d'agua, a placa eletronica a ser desenvolvida nesse projeto deve conseguir controlar a frequencia do motor de inducao que bombeia agua para a ferramenta. Como o inversor ja\u00ed possui todo interfaceamento de controle do motor, o problema do projeto consiste em controlar o set-point da referencia de frequencia do inversor. Para que seja poss\u00edvel desenvolver um sistema capaz de enviar esse sinal de referencia para o inversor, e necess\u00e1rio conhecer um pouco melhor como ele funciona. A Figura 3.1 mostra os principais blocos que compoes um inversor de frequencia.\nFigura 3.1: Blocos de um inversor de frequ\u00eancia [21].\n3.1.1: 1o Bloco-CPU\nA CPU (Unidade Central de Processamento) de um inversor de frequ\u00eancia pode ser formada por um microprocessador ou por um microcontrolador. Isso depende apenas do fabricante. De qualquer forma, e nesse bloco que todas as informacc\u00edes(par<\u00e2metros e dados do sistema) estao armazenadas, visto que tambem uma memoria esta integrada a esse conjunto. A CPU nao apenas armazena os dados e par\u00e2metros relativos ao equipamento, como tambem executa a funcao mais vital para o funcionamento do inversor: geracao dos pulsos de disparo, por meio de uma logica de controle coerente para os IGBT's [21].\n3.1.2: 2o Bloco-IHM\nO segundo bloco e a IHM (Interface Homem Maquina). \u00c9 atraves desse dispositivo que podemos visualizar o que esta ocorrendo no inversor (display) e configur\u00e2-lo de acordo com as necessidades da aplicacao. A Figura 3.2 mostra o IHM do inversor utilizado nesse projeto.\nFigura 3.2: Display de controle do inversor modelo Varispeed E7 - Yaskawa\n3.1.3: 3o Bloco - Interfaces\nA maioria dos inversores pode ser comandada por dois tipos de sinais: anal\u00f3gicos ou digitais. Normalmente, quando deseja-se controlar a velocidade de rotacao de um motor AC no inversor, utilizamos uma tensao analogica de comando. Essa tensao se situa entre 0 a 10 Vcc. A velocidade de rotacao (RPM) e proporcional ao seu valor, por exemplo: 1 Vcc = 1000 RPM, 2 Vcc = 2000 RPM. Para inverter o sentido de rotacao, basta inverter a polaridade do sinal analogico (de 0 a 10 Vcc sentido horario e -10 a 0 Vcc sentido anti-horario). Alem da interface analogica, o inversor possui entradas digitais. Com um par\u00e1metro de programacao, podemos selecionar a entrada valida (analogica ou digital) [21]. A Figura 2.11 mostra como o usuario pode controlar as entradas analogicas do inversor.\n3.1.4: 4o Bloco - Etapa de potencia\nA etapa de potencia e constitu\u00edda por um circuito retificador, que alimenta (atraves de um circuito intermediario denominado \u201dbarramento DC\u201d) o circuito de sa\u00edda do inversor (modulo IGBT).\nAntes da implementacao do projeto, a referencia de frequencia do inversor era ajustada atraves do modulo manual de controle mostrado na Figura 2.11. Esse controlador manual enviava um sinal analogico de tensao para o inversor, que por sua vez controlava a frequencia do motor. Como especificacao do projeto, visando evitar alteracoes no set-up do teste, a placa eletr\u00f4nica a ser desenvolvida devera usar tambem um sinal analogico de tensao para controlar o inversor. A ideia e desenvolver um projeto em que nao seja necessario modificar nenhuma configuracao do inversor,\nsendo poss\u00edvel que o usu\u00e1rio possa optar em realizar o teste de forma manual ou autom\u00e1tica apenas mudando a posicao de uma chave no modulo de controle. A Figura\n3.3\tmostra esse conceito.\nFigura 3.3: M\u00f3dulo de controle do inversor - Posi\u00e7\u00e3o autom\u00e1tico e manual\n3.2: Transmissor de vaz\u00e3o\nAtualmente, inumeros instrumentos capazes de medir a vazao volumetrica de um fluido sao utilizados na industria. Esses instrumentos podem utilizar diversos princ\u00edpios de funcionamento, como por exemplo, medidores por obstrucao, mostrado na Figura 3.4, medidores por deslocamento positivo, Figura 3.5 e medidores eletro-magneticos, Figura 3.6. Em [26] e demonstrado a teoria por tras da maioria dos instrumentos de medicao de vazao utilizados na industria.\nFigura 3.4: Medidor de vaz\u00e3o por placa de orif\u00edcio\nFigura 3.5: Medidor de vaz\u00e3o por deslocamento positivo\nFigura 3.6: Medidor eletromagnetico de vaz\u00e3o\nEntre os tr\u00eas medidores de vaz\u00e3o mostrados nas Figuras 3.4, 3.5 e 3.6, o medidor eletromagn\u00e9tico se destaca por nao interferir no escoamento do fluido, evitando perdas de cargas. Alem disso, a sua utilizacao independe do conhecimento de propriedades do fluido, quer sejam termo-f\u00edsicas (viscosidade) ou termodinamicas (massa espec\u00edfica, temperatura, pressao) [26]. Contudo, os medidores eletromagneticos exigem que o fluido tenha uma condutividade eletrica m\u00ednima. O Apendice B detalha melhor o funcionamento de medidores eletromagneticos de vazao.\nFigura 3.7: Medidor SITRANS F M MAGFLO Mag5000, Siemens\nO transmissor de vazao utilizado no Flow Loop Test e o modelo SITRANS F M MAGFLO Mag5000 da Siemens, um tipo de medidor eletromagnetico, Figura 3.7. O Mag5000 possui circuitos eletr\u00f4nicos que amplificam o sinal do sensor, o filtram, corrigem nao-linearidades e o convertem para um sinal de sa\u00edda, digital ou analogico. Em aplicacoes industriais, e comum que os transmissores de vazao utilizem sinais de sa\u00edda do tipo analogico, atraves correntes eletricas na faixa de 4 a 20 mA.\n3.3: Projeto da Placa de Aquisi\u00e7\u00e3o de Dados\nA placa eletronica de aquisicao de dados deve ser capaz de receber um sinal de corrente (4 a 20 mA) do sensor de vazao; controlar o inversor de frequencia atraves de um sinal de tensao (0 a 10 V) e, ao mesmo tempo, se comunicar em tempo real com o software supervisorio que estara sendo executado no computador. Para atender aos requisitos de projeto, foi definido o uso de uma placa microcontrolada chamada Arduino, Figura 3.8.\nFigura 3.8: Placa Arduino Uno\nArduino \u00e9 uma plataforma de prototipagem eletr\u00f4nica de hardware livre, ou tamb\u00e9m chamada de open-hardware, que significa que a placa pode ser adquirida em alguma loja ou montada pelo proprio usuario atraves de manuais disponibilizados na internet. A placa e projetada com um microcontrolador Atmel AVR, com suporte\nde entrada/sa\u00edda embutido e uma linguagem de programa\u00e7\u00e3o padr\u00e3o, na qual tem origem em Wiring, e e essen\u00e7ialmente C/C++. Arduino pode ser usado no desenvolvimento de sistemas stand-alone, que funcionam de forma independente, ou em sistemas controlados por softwares em execu\u00e7ao em algum computador [27].\nA plataforma Arduino vem ganhando bastante mercado nos ultimos anos e, atualmente, conta uma grande variedade de placas projetadas com prop\u00f3sitos espec\u00edficos para diferentes tipos de operacao. Nesse projeto, a placa utilizada foi a Arduino Duemilanove, com processador ATmega328. Essa placa conta com 14 pinos de entrada/sa\u00edda digitais, sendo que 6 deles podem ser configurados para fornecer sa\u00edda com PWM. Tambem estao presentes 6 pinos de entrada analogica e um cristal oscilador de 16 MHz.\nA escolha pela placa Arduino se deu por inumeras razoes, entre elas esta a rapida curva de aprendizagem; baixo custo; alta flexibilidade e facil suporte para desenvolvedores, pela Internet. A placa atende as especificares do projeto, uma vez que possui entradas analogicas para leitura da vazao e sa\u00edda PWM para acionamento do inversor. No Apendice A e demonstrado como funciona um sinal PWM.\nCom o uso do Arduino, o projeto de hardware se torna muito mais simples, ja que a placa Duemilanove possui funcionalidades intr\u00ednsecas de placas de aquisicao de dados, sendo extremamente facil programa-la para enviar valores de leitura para um software e receber set-points para as suas sa\u00eddas digitais e PWM. Sendo assim, o problema do projeto de hardware se limita a desenvolver os circuitos de interfacea-mento do Arduino com o inversor e com o transmissor de vazao. Nas proximas secoes sera\u00ed relatado como foi o projeto desses circuitos e quais foram as dificuldades encontradas.\n3.3.1: Projeto de Circuito para Controle do Inversor\nO inversor Varispeed E7 conta com um modulo de entrada analogica para controle da refer\u00eancia de frequencia do motor. Essa entrada analogica pode ser um sinal de tensao de 0 a 10 V ou um sinal de corrente de 4 a 20 mA. Por padrao, o inversor utiliza o sinal de tensao como entrada.\nO inversor possui uma fonte de tensao de 15 V, sinal +V, uma refer\u00eancia de 0 V, sinal AC, e um canal de entrada A1, veja a Figura 3.9. O modulo de controle manual da Figura 3.3 utiliza um potenciometro de 2 kQ para dividir a tensao da fonte e controlar\no valor do sinal A1.\nOto 10V\nI3\n2kfl [V\n1\nM\u00f3dulo de Entrada\nAnal\u00f3gica do Inversor\nAnalog Input 1: Master frequency reference Oto 10V (20kQ)\nAnalog input power supply +15V. 20mA\nE(G) Shield terminal\nFigura 3.9: M\u00e1dulo de entrada anal\u00f3gica do inversor de frequ\u00eancia - Sinais +V, A1 e AC\nTabela 3.1: Sinais do modulo de entrada anal\u00f3gico do inversor\nSinal\tDescri\u00e7\u00e3o\n+ V\tsinal de 15 V vindo da fonte do inversor\nA1\tsinal de controle de 0 a 10 V para o inversor\nAC\tsinal de 0 V vindo da fonte do inversor\nPara controlar o valor de tensao do sinal A1, veja Tabela 3.1, sera utilizado o sinal de sa\u00edda PWM do Arduino. Para isso, e preciso estar atento a alguns detalhes. Primeiro, o sinal PWM do Arduino opera na faixa de 0 a 5 V, enquanto o sinal A1 opera entre 0 e 10 V. Alem disso, como os circuitos sao independentes pode haver problemas de aterramento, ou problemas de acoplamento. Isso significa, de forma grosseira, que a refer\u00eancia de 0 V para o Arduino pode nao significar 0 V para o inversor, o que pode causar diversos problemas no funcionamento da placa.\n\u00c9 poss\u00edvel resolver o problema da faixa de operacao do sinal PWM do Arduino atraves de transistores bipolares. O principio do transistor e poder controlar a corrente que passa entre dois dos seus terminais. Ele e\u00ed montado em uma estrutura de cristais semicondutores, formada por tres camadas. Cada uma dessas camadas recebe\num nome em rela\u00e7\u00e3o \u00e0 sua fun\u00e7\u00e3o na opera\u00e7\u00e3o do trans\u00edstor. As extremidades s\u00e3o chamadas de emissor e colector, e a camada central e chamada de base.\nOs transistores funcionam de forma a liberar a passagem de corrente entre o coletor e emissor quando ha uma determinada corrente na base. A corrente necessaria na base do transistor pode ser de ordem muito inferior a corrente que passa entre os outros terminais. Os transistores bipolares podem ser do tipo PNP ou NPN, Figura\n3.10.\nFigura 3.10: Transistores bipolares NPN e PNP\nExistem centenas de formas diferentes para a utiliza\u00e7\u00e3o dos transistores. Nesse trabalho vamos utiliza-los como amplificadores e como chaves \"liga-desliga\u201d, em ingles switches. Para amplificar a escala do sinal PWM de 0 a 5 V para 0 a 10 V, e necessario que haja um fonte que forneca uma tensao de, pelo menos, 10 V. Como o sinal PWM e uma onda quadrada, quando ele estiver em n\u00edvel alto a sa\u00edda do Arduino ira gerar um sinal de 5 V, quando ele estiver em n\u00edvel baixo a sa\u00edda sera de 0. Assim, se o pino de sa\u00edda do Arduino for conectado em um resistor de valor R, toda vez que o PWM estiver em n\u00edvel alto sera gerada uma corrente i que entrara na base de um transistor bipolar NPN. O transistor, por sua vez, chaveara o sinal da fonte e, com isso, amplificara a sa\u00edda PWM. A Figura 3.11 mostra o esquem\u00e1tico desse circuito.\nO uso do circuito da Figura 3.11 em teoria resolve o problema do controle do inversor, uma vez que e poss\u00edvel utilizar os sinais + V e AC como uma fonte externa. Na pratica, esse circuito nao se mostrou uma boa opcao. Todas as vezes que o circuito era montado e iniciava-se os testes para controlar a refer\u00eancia de frequencia do inversor, a placa do Arduino reinicializava sozinha e cortava a comunicacao com o computador. A razao desse comportamento instavel e que, com esse tipo de acoplamento entre os circuitos, muitos ru\u00eddos e picos de corrente vinham do inversor de frequencia ate o Arduino, o que causava o mal funcionamento do mesmo.\nPara desacoplar eletricamente os circuitos e necessario a utilizacao de optoa-copladores. Optoacopladores, tambem conhecidos como optoisoladores ou fotoisola-\nFigura 3.11: Utilizando transistor para amplificar sinal PWM do Arduino\ndores, sao componentes eletr\u00f4nicos projetados para transferir sinais eletricos atrav\u00e9s de ondas de luz, isolando eletricamente dois circuitos diferentes. A ideia principal do uso de optoacopladores e \u201devitar que altas tensoes, ou variacoes rapidas de tensao, de um lado do circuito cause danos no circuito do outro lado\u201d [29].\nA liga\u00e7\u00e3o otica utilizada pelos optoacopladores se da entre um diodo emissor de luz e um outro componente sens\u00edvel a luz, como por exemplo um foto transistor. No caso do foto transistor, o feixe de luz emitido pelo diodo age como uma corrente na base de um transistor bipolar, chaveando os terminais do coletor e emissor. Os optoacopladores sao projetados para resistir a altas voltagens (500 V a 10 kV) entre sua entrada e sa\u00edda. Esse e o principal par\u00e2metro que indica a sua funcao de isolador eletrico. A Figura 3.12 mostra o esquema do circuito integrado (CI) de um optoacoplador.\nComo o optoacoplador ja\u00ed utiliza um foto transistor, ele pode ser utilizado para\n1\nFigura 3.12: Princ\u00edpio de funcionamento dos optoacopladores\nresolver o problema da amplia\u00e7\u00e3o do sinal PWM discutido anteriormente, sem a necessidade do uso de outro transistor. A Figura 3.13 mostra o circuito final para controle do inversor. O funcionamento basico do circuito e o mesmo da Figura 3.11, com a diferenca de que o terra do Arduino nao esta conectado junto a referencia de 0 V do inversor.\nFigura 3.13: Circuito para controle da entrada anal\u00f3gica do inversor de frequ\u00eancia\n3.3.2: Projeto de Circuito para Leitura da Vaz\u00e3o\nO circuito projetado para ler o sinal de corrente vindo do transmissor de vazao e bastante simples. Atrav\u00e9s da Figura 3.14 e poss\u00edvel notar que o transmissor utiliza dois cabos para transmitir o sinal. Um cabo e conectado no pino 31 (daqui pra\nfrente chamado de S+), de onde parte a corrente, e outro no pino 32 (daqui pra frente chamado de S-), por onde a corrente retorna ao transmissor fechando o loop.\nFigura 3.14: M\u00f3dulo de sa\u00edda anal\u00f3gica do transmissor de vaz\u00e3o Mag5000\nA entrada anal\u00f3gica do Arduino consegue ler um sinal de tens\u00e3o de 0 a 5 V, drenando uma corrente maxima de 40 mA por pino. A leitura de tensao nessa faixa de operacao e feita com uma resolucao de 10 bits, o que significa que um sinal de 5 V e dividido em 1024 (210) partes, sendo, portanto, a placa capaz de identificar um alteracao de aproximadamente 0,5 mV () no sinal.\nComo o sinal analogico que vem do transmissor e um sinal de corrente, e preciso utilizar um valor de resistencia conhecido para que a tensao sobre ele seja medida pela placa e o valor da vazao seja inferido. Partindo da Lei de Ohm, em que U = R.i, onde U e o sinal de tensao, R a resistencia e i a corrente, se temos uma corrente maxima de 20 mA, e para esse valor devemos ter uma tensao maxima de 5 V, a resistencia a ser utilizada no circuito deve ser de, no maximo, 250Q, R = U .A Figura 3.15 esquematiza esse circuito.\nFigura 3.15: Princ\u00edpio de funcionamento do circuito utilizado para ler sinal de corrente\nEntretanto, o circuito mostrado na Figura 3.15 nao funcionou na pratica. Da mesma forma que no circuito utilizado para controlar o inversor nao foi poss\u00edvel aterrar\no Arduino em comum com o sinal de 0V da fonte, nao foi poss\u00edvel fazer o mesmo com o circuito de leitura da vazao. Sendo assim, foi necessario mais uma vez o uso de optoacopladores para isolar eletricamente os circuitos.\nAntes de projetar um circuito utilizando optoacopladores, foi necessario estudar a relacao entrada/sa\u00edda desse componente para diferentes valores de corrente. Para realizar o estudo foi feito um teste com o componente 4N35, conectando uma fonte de corrente na entrada do diodo, alimentando o coletor do transistor com uma fonte de 5V e conectando o emissor em uma das entradas anal\u00f3gicas do Arduino. A Figura 3.16 mostra o circuito montado para o teste.\nFigura 3.16: Teste da rela\u00e7\u00e3o entrada-sa\u00f3da do optoacoplador JN35\nO teste foi realizado variando a corrente na entrada do optoacoplador de 4 a 40mA e medindo a leitura da porta analogica do Arduino (valores de 0 a 1024). A Figura 3.17 mostra os resultados desse teste, em que foi poss\u00edvel notar um forte comportamento nao linear do optoacoplador. Entretanto, o optoacoplador apresentou um comportamento razoavelmente linear para valores de ate 14mA. Veja a Figura 3.18.\nPara contornar o problema da nao-linearidade, foi projetado um divisor de corrente para fazer com que a corrente que entra no optoacoplador esteja dentro da faixa de operacao desejada.\nComo pode haver variacoes no comportamento de cada componente, foi inclu\u00eddo um trimpot no circuito. Trimpot nada mais e do que um resistor variavel, em que o usuario pode alterar seu valor dentro de uma determinada faixa. A Figura 3.19\nFigura 3.17: Resultados do teste da rela\u00e7\u00e3o entrada-sa\u00edda do optoacoplador JN35\nFigura 3.18: Faixa de opera\u00e7\u00e3o aproximadamente linear do optoacoplador JN35\nmostra o circuito completo de leitura do sinal de corrente.\n\u00c9 poss\u00edvel notar no circuito da Figura 3.19 um resistor e um capacitor entre o optoacoplador e a porta de entrada anal\u00f3gica do Arduino. Esses dois componentes formam um filtro passa-baixa que foi projetado para filtrar ru\u00eddos de alta frequencia. A frequencia de corte do filtro (fc) deve ser proxima a 2 Hz, portanto a constante de tempo RC, que e calculada por RC =\t, deve ser aproximadamente 10-1 s. Em [30]\nsao demonstradas maiores informacoes sobre filtros passa-baixa.\nA Figura 3.20 mostra o sinal lido pela placa sem a utilizacao do filtro e a Figura 3.21 mostra o sinal filtrado.\nFigura 3.21: Sinal de corrente filtrado\n3.4: Prototipagem\nO circuito completo do projeto envolveu a juncao dos circuitos das Figuras 3.19 e 3.13. A Figura 3.22 mostra o circuito final. Nesse circuito foi acoplado tambem um\nbuzzer para que o sistema seja capaz de enviar sinais sonoros de sinalizacao para os usuarios. O Anexo B apresenta a lista completa de componentes utilizados no prototipo.\nFigura 3.22: Circuito final do projeto\nApos ter o esquema do circuito pronto e ter feito varios testes em uma protoboard, foi desenvolvido um prot\u00f3tipo. A primeira etapa para a construcao do prot\u00f3tipo foi a fabricacao de uma placa de circuito impressa (PCB) com o esquema da Figura 3.22.\nPara a criacao da PCB foi utilizada uma versao de testes do software EAGLE PCB Software. O software se mostrou bastante intuitivo e pratico. A Figura 3.23 mostra o circuito da PCB.\nFigura 3.23: Placa de circuito impressa com escala em mm\nA Fabricacao da PCB foi feita de forma completamente manual. De forma resumida, o circuito da Figura 3.23 foi impresso em papel fotogr\u00e1fico em uma impressora a laser; em seguida o desenho foi transferido para uma placa de fenolite utilizando um ferro de passar roupas. Aptos ter o desenho do circuito estampado na placa, foi utilizado percloreto de ferro para corroe-la. O procedimento completo pode ser encontrado em [31]. Por fim, a placa foi furada e os componentes eletr\u00f4nicos soldados, como pode ser visto na Figura 3.24.\nFigura 3.24: Soldagem de componentes eletr\u00f4nicos\nA Figura 3.25 mostra como ficou o prototipo do hardware do projeto de automacao do Flow Loop Test.\nFigura 3.25: Hardware\nCap\u00edtulo4: Modelagem e Controle\nEm uma das etapas do Flow Loop Test, conforme foi detalhado no Cap\u00edtulo 2, e necessario realizar sucessivos testes de torque no Control Unit das ferramentas do tipo push-the-bit. O teste de torque da ferramenta se divide em sete etapas. Para cada etapa existe uma referencia de vazao para a linha de teste da ferramenta. Por exemplo, o primeiro teste de torque deve ser feito com uma vazao de 300 GPM enquanto o segundo com uma de 350 GPM, e assim por diante. Sendo assim, faz-se necessario ter um sistema de controle autom\u00e1tico da vazao.\n4.1: Conceitos B\u00e1sicos de Controle\nDefine-se como um sistema monovari\u00e1vel todo sistema com uma unica entrada e uma unica sa\u00edda. O sistema de controle da vazao e um desses sistemas mono-variaveis, uma vez que a entrada do processo e a frequencia do motor e a sa\u00edda e a medida de vazao que passa pela ferramenta, Figura 4.1.\nFigura 4.1: Sistema de controle de vaz\u00e3o em malha aberta.\nAnteriormente ao desenvolvimento desse trabalho, o controle da vazao no Flow Loop Test era realizado em malha aberta. Um sistema de controle em malha aberta, Figura 4.1, e um sistema em que a sa\u00edda nao e medida e nem realimentada para comparacao com a entrada. Assim, para cada entrada de refer\u00eancia ha uma condicao de operacao fixa, ou seja, que nao se altera com a evolucao da sa\u00edda. O controle por malha aberta possui varios pontos negativos, como por exemplo, na presenca de perturbacoes o sistema sai do seu ponto de operacao e pode nao desempenhar a funcao desejada, sendo entao necessario haver monitoramento do sistema durante todo o tempo por um operador.\nEm geral, a operacao de um dado sistema em malha aberta (MA) nao e satisfat\u00f3ria. Por isso, a aplicacao de um dispositivo (ou elemento) de controle em malha fechada (MF)tem por objetivo melhorar o desempenho do sistema tanto em regime\ntransit\u00f3rio como em regime permanente. Este dispositivo de controle e comumente chamado de controlador, ou tambem de compensador. O controle de sistemas em malha fechada consiste, basicamente, em analisar o sinal de erro (diferenca entre \"valor da sa\u00edda\u2019\u2019e a referencia) e aplicar uma correcao no sinal de entrada da planta (ou sistema a ser controlado).\nNa pratica, normalmente deseja-se que o sistema em malha fechada tenha um desempenho satisfatorio tato para a rejei\u00e7ao de perturbares como para o seguimento de refer\u00eancias. A Figura 4.2 mostra o esquema de um controlador em MF.\nFigura 4.2: Sistema de controle em malha fechada.\n4.2: Objetivos de Controle\nOs objetivos de controle, ou especificares de controle, sao um conjunto de caracter\u00edsticas de comportamento que deseja-se impor no sistema a ser controlado. Tipicamente, as especificares de controle se dividem em regime transitorio e especificares de regime permanente [32].\nAs especificares de regime transitorio estabelecem, para um determinado tipo de excitacao, as diferencas maximas aceitaveis entre a sa\u00edda e um determinado padrao de resposta. Em geral os padroes de resposta estao definidos atraves de par\u00e2metros como picos m\u00e1ximos, tempos para atingir um certo percentual do valor de regime permanente, etc. Ja as especificares de regime permanente estabelecem condicoes de seguimento ou rejeicao de determinados sinais que atuam sobre o sistema considerado e que devem ser mantidas quando o sistema encontra-se no ponto de operacao [32].\nAs especificares para o controlador de vazao desse projeto foram bastante conservadoras, uma vez que o tempo de resposta do sistema nao e o ponto cr\u00edtico do Flow Loop Test. Sao elas:\n\u2022\tO sistema deve ter erro nulo em regime permanente;\n\u2022\tO sistema nao deve apresentar sobressinal;\n\u2022\tO tempo de resposta do sistema (5%) deve ser menor que 30 s;\n\u2022\tO sistema deve rejeitar perturba\u00e7\u00f5es do tipo degrau.\nPara que essas especificares temporais possam ser consideradas na analise e projeto de controladores lineares, e necessario recorrer ao uso de modelos matem\u00e1ticos para representacao do modelo da planta. Neste caso, sera considerado que o comportamento dinamico do processo em malha aberta e fechado pode ser modelado por uma funcao de transfer\u00eancia. Assim, a resposta do sistema a determinados sinais de entrada podera ser relacionada as caracter\u00edsticas da funcao de transfer\u00eancia, seja utilizando diagramas polo-zero ou diagramas de resposta em frequencia do sistema.\n4.3: Levantamento do Modelo\nA aproximacao de sistemas reais por modelos matem\u00e1ticos deve ser fiel suficiente para conseguir representar os seus aspectos essenciais de forma adequada para uma utilizacao particular [34]. A forma com que esses modelos matem\u00e1ticos sao determinados pode ser dividida em duas categorias de procedimentos, a analise f\u00edsico-matem\u00e1tica e a analise experimental [35].\nA analise f\u00edsico-matematica, ou fenomenologica, baseia-se na caracterizacao pelas leis da f\u00edsica. O ideal seria identificar todos os sistemas baseados nessas leis ja que as leis da f\u00edsica sao universais, mas na pratica existem processos industriais tao complexos que inviabilizam essa analise. Ja a analise experimental baseia-se em observacoes de dados do sistema e pode aplicar algoritmos computacionais para automatizar o processo de determinacao do modelo. Pela facilidade no uso e falta de necessidade de ter conhecimento previo do sistema, a analise experimental e a mais usada em ambiente industrial [35].\nNesse trabalho o modelo foi levantado a partir de uma analise experimental. Foram aplicados degraus em diversos pontos de operacao e, em seguida, foram analisadas as respostas do sistema. A Figura 4.3 mostra o resultado do ensaio.\nAnalisando a Figura 4.3 e poss\u00edvel notar que o sistema possui um comportamento diferente para cada ponto de operacao, variando por exemplo, o ganho do modelo. Alem disso, tambem e poss\u00edvel afirmar que, para qualquer ponto de operacao, o modelo pode ser bem aproximado por uma funcao de transfer\u00eancia de primeira ordem.\n4.3.1: Sistemas de Primeira Ordem\nSistemas de primeira ordem sao representados pela funcao de transferencia da Equacao 4.1. Entretanto, sistemas de primeira ordem com zero, como mostra a Equacao 4.1, apresentam acoplamento direto entre a entrada e a sa\u00edda. Ou seja, esse tipo de sistema apresenta resposta instantanea e, por esse motivo, nao e comum ser usado para modelar sistemas f\u00edsicos reais.\nG(s) = e-'-*Ke(1 + Ts)\n1 + TS\n(4.1)\nNesse trabalho, iremos estudar o comportamento de sistemas de primeira ordem representados pela Equacao 4.2.\nG(s)\ne t-s\nKe\n1 + TS\n(4.2)\nE poss\u00edvel relacionar os par\u00e2metros ke, T e t com as formas de onda da resposta ao degrau do sistema. O termo e-taS representa um atraso de transporte de ta segundos. Para o caso de sistemas estaveis, que e o caso do sistema em estudo, o valor de ke fornece a relacao estatica entrada-sa\u00edda (ganho estatico) para uma entrada que tende a uma constante [32], Equacao 4.3.\nKe =\nUf \u2014 Ui\n(4.3)\nO par\u00e1metro t \u00e9 definido como constante de tempo do sistema e dele depende\na forma da resposta da Figura 4.4. Al\u00e9m disso, t se relaciona com a resposta atrav\u00e9s da Equacao 4.4.\nFigura 4.4: Resposta de sistema de primeira ordem para entrada degrau, (a) sem zero, (b) com zero [32]\nt5% ~ 3t\n(4.4)\nAtraves do ensaio representado pela Figura 4.3 foi poss\u00edvel confirmar que o modelo do sistema pode ser aproximado por uma funcao de transferencia de primeira ordem do tipo \u201da\u201d, representado pela Figura 4.4. Ou seja, e um sistema sem zero e sem resposta instantanea.\nA partir das equacoes 4.3, 4.4 e da analise do atraso de transporte na Figura\n4.3,\tforam levantados 17 modelos para a equacao 4.2. Veja a Tabela 4.1.\nTabela 4.1: Modelos experimentais\nID\tUi [%]\tUf [%]\tVi [GPM]\tVf [GPM]\tKe\tta [S]\tT [s]\n1\t10\t15\t12\t250\t47,6\t2,01\t1,99\n2\t15\t20\t255\t421\t33,2\t1,52\t1,16\n3\t20\t30\t421\t694\t27,3\t1,62\t0,72\n4\t30\t35\t694\t826\t26,4\t1,56\t0,62\n5\t35\t45\t826\t1084\t25,8\t1,07\t0,89\n6\t45\t50\t1084\t1210\t25,2\t2,36\t0,84\n7\t50\t60\t1210\t1459\t24,9\t1,60\t0,95\n8\t60\t70\t1459\t1702\t24,3\t1,57\t0,84\n9\t70\t75\t1702\t1819\t23,4\t0,39\t0,53\n10\t75\t80\t1819\t1858\t7,8\t1,37\t0,22\n11\t80\t70\t1858\t1693\t16,5\t1,45\t0,24\n12\t70\t60\t1693\t1431\t26,2\t1,34\t0,47\n13\t60\t50\t1431\t1198\t23,3\t1,26\t0,51\n14\t50\t40\t1198\t976\t22,2\t0,98\t0,79\n15\t40\t30\t997\t721\t27,6\t1,02\t1,28\n16\t30\t20\t721\t458\t26,3\t0,78\t1,46\n17\t20\t15\t430\t246\t36,8\t0,73\t1,67\nM\u00eddia\t\t\t\t\t25,8\t1,4\t0,8\n4.4: Projeto do Controlador\nPelos objetivos de controle levantados anteriormente, um simples controlador PI (Proporcional-Integral) consegue atender as especificares. Em [33] e demonstrado as relacoes entradas/sa\u00eddas para degraus na referencia e degraus na perturbacao e e comprovado que, para sistemas de primeira ordem controlados por controladores com acao integral, ha garantia de erro nulo em regime permanente. Como a planta a planta do Flow Loop Test e representada por um modelo de primeira ordem, o projeto do controlador se torna uma tarefa bastante simples.\nO metodo de projeto de controladores pele lugar das ra\u00edzes foi utilizado para alocar os polos e zeros do controlador de forma a atender as especificares de regime transitorio e permanente, mantendo a estabilidade do sistema. Em relacao a robustez, e necessario atentar-se ao valor do ganho do controlador, pois como ha atraso de transporte no modelo, um valor de ganho alto pode instabilizar a planta.\nDentre todos os modelos levantados no ensaio, o modelo utilizado utilizado para o projeto foi definido com o valor medio de cada vari\u00e1vel (t, Ke e ta) e e mostrado na Equacao 4.5. A sa\u00edda do modelo e o valor de vazao em GPM e a entrada e o sinal de\ncontrole para o inversor de 0 a 100% (o que significa o mesmo que 0 a 60Hz).\nG(s) = e-1,4s 25,8\t(4.5)\n1 + 0, 8s\nDependendo da faixa de frequencia em analise, o atraso de transporte presente na equacao 4.5 pode ser aproximado por um polinomio atraves da Equacao 4.6.\ne taS\ne\u00bb= i(i - n i)\n1(1 + t2S )\u00ed( 1)\n(4.6)\nEsta formula de c\u00e1lculo \u00e9 conhecida como de Pad\u00e9e. Uma aproxima\u00e7\u00e3o de Padee de primeira ordem e representada pela Equacao 4.7.\ne-taS\n1 - s\n1 + t2S s\n(4.7)\nPara o projeto do controlador, o atraso de transporte do modelo foi aproximado para 2s, diferentemente do modelo da Equacao 4.5. Essa consideracao foi feita pois na planta real esse seria um valor bem pr\u00f3ximo ao maior atraso de transporte encontrado e que deve ser considerado para projetar um controlador robusto. A Equacao\n4.8\tmostra o modelo utilizado para o projeto do controlador, substituindo o valor de 2s do atraso de transporte pela aproximacao de Padee de primeira ordem, mostrada na Equacao 4.7.\nG(s) =\t25,8(1 - s)\n()\t(1 + 0, 8s)(1 + s)\n(4.8)\nO controlador PI a ser ajustado para esse problema tem sua formula mostrada na Equacao 4.9.\nC (s) = Kc\n(Tis + 1)\ns\n(4.9)\nO problema de projeto do controlador PI se resume ao ajuste de Ti e de Kc, que significa o posicionamento do zero do controlador no diagrama do lugar das ra\u00edzes e o ajuste do ganho. Para que o zero nao seja dominante no sistema, ele deve ficar a esquerda do \u201dp2\u201dno diagrama da Figura 4.5 e o ganho deve ser pequeno o suficiente para que os polos de malha fechada sejam posicionados de forma a atender as especificac\u00f5es de projeto.\nFigura 4.5: Diagrama polo-zero da Equac\u00e3o 4.8 com realimenta\u00e7\u00e3o negativa\nOs polos de malha fechada devem permanecer sobre o eixo real negativo para que o sistema seja estavel e nao tenha sobressinal. A Ferramenta SISOTOOL do Matlab foi utilizada para fazer os ajustes de ganho e da posicao do zero. A Figura 4.6 mostra a tela de ajustes do SISOTOOL.\nO controlador PI projetado tem a funcao de transfer\u00eancia mostrada na Equacao\n4.10\te, para uma mudanca na sua referencia do tipo degrau, apresenta a resposta temporal mostrada na Figura 4.7.\nC (s) = 0.006\n(0.67 * s + 1)\ns\n(4.10)\nFigura 4.6: SISOTOOL - Ferramenta do Matlab que auxilia o projeto de controladores\nPara testar a robustez do controlador em relacao a variacao param\u00e9trica dos\nVaz\u00e3o x Tempo\n400\t\ta.\tI\tI\t\\\t\n\t\t\t\t\n_ 300 s\t\t\t\t\n\t\t\t\t\no\t\t\t\t\n200\t\t\t\t\n:>\t\t\t\t\n100\t\t\t\t\n\t\t\t\tVaz\u00e3o Referencia\n\t\t\t\t\n0\t- s\ti\tI I\t\n0\t5\t10\t15\t20\t25\t30\nTempo [s]\nSinal de Controle x Tempo\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n[\t\t\t\t\t\t\t| \u2014 Sinal de Controle | I\t\n0\t5\t10\t15\t20\t25\t30\nTempo [s]\nFigura 4.7: Resposta a um degrau de amplitude unitaria\nmodelos da planta, foi realizada uma simula\u00e7\u00e3o no Simulink com 8 modelos de planta diferentes e o mesmo controlador da Equa\u00e7ao 4.10. Simulink e uma ferramenta para modelagem, simula\u00e7ao e analise de sistemas dinamicos da empresa The MathWorks. O diagrama montado para o teste e mostrado na Figura 4.8 e a resposta temporal dos modelos para o controlador projetado e mostrado na Figura 4.9.\nVaz\u00e3o x Tempo\n800\n600 -\n200 -\no.\nO \u201c 400 -\nO\n!(\u00fa\nN\n5\n45\t50\nTempo [s]\n45\t50\nTempo [s]\nSinal de Controle x Tempo\nModelo 1\n------ Modelo 2\n20 -\n------ Modelo 3\nModelo 4\n15 -\nModelo 5\n10-\nModelo 6\n------ Modelo 7\nModelo 8\no\nO\nO O\na> \u25a0u\n-------Modelo\t1\n------Modelo 2\n------Modelo 3\n------Modelo 4\n------Modelo 5\nModelo 6\n------Modelo 7\n...... Modelo\t8\nFigura 4.9: Resposta ao degrau para teste de robustez\nA Figura 4.9 mostra que o controlador consegue ter uma resposta est\u00e1vel e dentro das especificares do projeto mesmo com as variacoes param\u00e9tricas encontradas no modelo real. Com isso, o projeto mostrou-se robusto o suficiente para ser implementado e testado na planta.\n4.5: Algoritmo de Controle\nPraticamente todos os sistemas de controle implementados atualmente sao baseados em sistemas controlados por computador. Esse tipo de sistema de controle e conhecido como controle digital e e basicamente composto de um processo real (planta analogica), um sistema digital processado e conversores A/D (analogico-digital) e D/A (digital-analogico) [36]. A Figura 4.10 mostra o diagrama de blocos de um controlador digital. Como o desenvolvimento desse projeto baseia-se em em mi-crocontrolador e um software, o controlador da vazao devera ser do tipo digital, sendo implementado por um algoritmo de controle.\nFigura 4.10: Sistema de controle digital\nO projeto do controlador digital pode ser feito de duas maneiras basicas: utilizando a teoria de controle analogico ou a teoria de controle digital. A primeira maneira consiste em projetar o controlador analogico e, em seguida, discretiza-lo para um controlador digital utilizando algum metodo de integracao numerica de equacoes diferenciais. A segunda maneira de se projetar um controlador digital e utilizando metodos discretos. Como foi visto nas secoes anteriores, esse trabalho utilizou o projeto de um controlador analogico para, em seguida, ser discretizado na forma de um controlador digital.\nAntes de discretizar o controlador analogico, e necessario conhecer algumas caracter\u00edsticas do hardware em que o sistema de controle sera implementado. No contexto desse trabalho, e necessario saber, por exemplo, como sao os conversores A/D e D/A da placa eletronica. Como foi discutido no Cap\u00edtulo 3, o hardware projetado para o projeto utiliza uma placa de aquisi\u00e7\u00e3o de dados baseada no Arduino. Atraves de testes de comunicacao entre o Arduino e o computador, pelo protocolo de\ncomunica\u00e7\u00e3o serial RS-232, foi constatado que o Arduino consegue enviar os dados de suas portas de entrada anal\u00f3gica para o software a cada 100 ms. Portanto, o per\u00edodo de amostragem do sistema de controle deve ser de, no m\u00ednimo, 100 ms. Alem disso, o Arduino utiliza um conversor D/A do tipo sustentador de ordem zero.\n4.5.1: Discretizacao de Controlador Cont\u00ednuo\nConsidere-se um sinal e(t), e sua transformada de Laplace E(s). Se aplicarmos esse sinal a um A/D, obteremos na sa\u00edda, o sinal e(t) amostrado, que e representado por e*(t). A este sinal correspondera a transformada de Laplace E*(s), conforme e mostrado na Figura 4.11 [37].\ne(t)\nE(s)\nFigura 4.11: Relac\u00e3o entre os sinais de entrada e sa\u00edda de um conversor A/D.\nPode-se representar E*(s) como mostra a Equacao 4.11, em que T e o per\u00edodo de amostragem.\nE*(s) = J2 e(kT )e-kTs\t(4.11)\nk=0\nEfetuando a mudanca de variavel z = eTs, pode-se afirmar que:\nE (z) =\te(kT )z-k\t(4.12)\nk=0\nA Equacao 4.12 corresponde a definicao de Transformada Z. O conceito de Transformada Z e necessario na solucao do problema de conectar um sistema discreto com um sistema cont\u00ednuo atraves de um interpolador.\nO interpolador utilizado no projeto foi do tipo ZOH (Zero-Order Holder), ou interpolador de ordem zero, Figura 4.12.\nA funcao de transferencia do ZOH e dada pela Equacao 4.13.\nBo(s) = 1(1 - e-sT)\t(4.13)\ns\nFigura 4.12: Transforma\u00e7\u00e3o de pulsos em degraus atrav\u00e9s de um ZOH.\nPara discretizar o controlador C(s) = 0.006(0'67ss+1), deve-se aplicar a formula da\nEqua\u00e7\u00e3o 4.14, conforme e discutido em [38].\nBoG(z) = (1 - z-1)Z\n(-)\nBoG(z) = (1 - :\t10.006\u00b0'67jj + 1\nBoG(z) = 0.006(1 \u2014 z --------------1\u2014\n(4.14)\nComo nesse caso o tempo de resposta do sistema em malha aberta \u00e9 mais r\u00e1pido que o tempo em malha fechada, o tempo de amostragem foi calculado baseado no tempo de acomodacao do sistema em MA. O valor de T foi calculado por , aproximadamente 200 ms. A partir da tabela de transformada do Anexo C, e poss\u00edvel chegar a equacao 4.15.\nC (z) = 0.006(1 \u2014 z-1)\n0.67\t0.2z-1\n(1 \u2014 z-1) + (1 \u2014 z-1)2\nC(z) = 0.006\n0.67+\n0.2z-1 \u2019\n1 - z-1\nC(z) = 0.006\n0.67 \u2014 0.47z-1\n1- z-1\nC(z) =\n0.00402 \u2014 0.00282z-1\n1 - z-1\n(4.15)\nMultiplicando os termos da Equacao 4.15 por z, e encontrada a equacao do controlador discretizado C(z) 4.16.\n^z ,\t0.00402z - 0.00282\nC (z) =------------;-------\nz \u2014 1\n(4.16)\n4.5.2: Obten\u00e7\u00e3o da Equa\u00e7\u00e3o de Diferen\u00e7as a partir da Transformada Z\nNeste item e apresentado como obter a equacao de diferencas correspondente a funcao de transfer\u00eancia do controlador em tempo discreto, C(z), que sera implementada em computador.\nPara se obter a equacao de diferencas equivalente a uma funcao de transfer\u00eancia em z, primeiro e preciso colocar a funcao C(z), da Equacao 4.16, em funcao de potencias negativas de z. Para isso, divide-se o numerador e denominador por z chegando-se a Equacao 4.17.\n^z . 0.00402 - 0.00282: 1\t. _\nC (z) =------.\t------ (4.17)\nComo a funcao de transfer\u00eancia de C(z) representa a relacao entrada-sa\u00edda entre o sinal de controle U(z) e o sinal do erro E(z), a Equacao 4.17 pode ser reescrita na forma da Equacao 4.18.\nU(z) - z-1U(z) = 0.00402E(z) - 0.00282z-1E(z)\t(4.18)\nCalculando-se a Transformada Z Inversa da equacao 4.18, obtem-se a equacao de diferencas 4.19, que foi utilizada na implementacao da lei de controle no software [38].\nu(k) = 0.00402e(k) - 0.00282e(k - 1) + u(k - 1)\t(4.19)\n4.6: Resultados\nO controlador projetado se portou de forma satisfatoria nos testes realizados na planta. As Figuras 4.13 e 4.14 mostram os gr\u00e1ficos do valor da vazao e do sinal de controle no software supervisorio.\nO projeto de um controlador conservador, com tempos de resposta moderados, fez com que o sistema de controle mantivesse o n\u00edvel de robustez desejado. O algo-\nFigura 4.13: Mudan\u00e7a de set-point da refer\u00eancia de vaz\u00e3o para 130 GPM.\nFigura 4.14: Comportamento do controlador para diferentes set-points.\nritmo conseguiu atingir os objetivos de controle para todas as faixas de operacao de forma satisfatoria.\nPelo desenho da planta, nao havia uma maneira trivial de inserir perturbacao\nno sistema e analisar a a\u00e7\u00e3o de controle. Com isso, como n\u00e3o se tratava de um ponto cr\u00edtico para o sistema, nao foi relatado resultados referentes a rejei\u00e7ao de perturba\u00e7\u00f5es do tipo degrau.\nCap\u00edtulo5: Software Supervisorio\n5.1: Vis\u00e3o Geral do Sistema\nPara que o processo do Flow Loop Test seja automatizado e se torne fact\u00edvel por apenas uma pessoa, e necess\u00e1rio que se tenha um sistema de controle super-visorio. A partir desse sistema, o tecnico podera monitorar e controlar as vari\u00e1veis relacionadas ao processo de teste das ferramentas do tipo push-the-bit.\n5.2: Levantamento de Requisitos\nAntes de desenvolver o software, e preciso ter bem definido quais sao as especificacoes do sistema. Para isso, foram levantados quais sao os requisitos funcionais e nao funcionais do sistema supervisorio. Requisitos funcionais representam as funcoes basicas do sistema, enquanto os requisitos nao funcionais estao vinculados as restricoes dos requisitos funcionais.\nAs Figuras 5.1,5.2 e 5.3 mostram quais sao esses requisitos.\nF1 Controlar vaz\u00e3o\t\t\tOculto (\t)\nDescri\u00e7\u00e3o: O sistema deve ser capaz de receber de controlar a vaz\u00e3o do teste em malha aberta e malha fechada. Para controlar a vaz\u00e3o em malha aberta o usu\u00e1rio deve ser capaz de escolher a porcentagem de uso do motor. Para o controle em malha fechada o usu\u00e1rio deve selecionar a vaz\u00e3o desejada.\t\t\t\nRequisitos N\u00e3o - Funcionais\t\t\t\nNome\tRestri\u00e7\u00e3o\tCategoria\tPermanente\nNF1.1 - Escolha do modo de opera\u00e7\u00e3o\tO sistema deve apresentar ao usu\u00e1rio as op\u00e7\u00f5es de modo de controle da vaz\u00e3o por malha aberta ou fechada.\tUsabilidade\t(X)\nNF1.2-Controle da vaz\u00e3o em malha aberta\tO sistema deve ser capaz de receber qualquer valor entre 0 e 100% e convert\u00ea-lo em um sinal de refer\u00eancia de 0 a 60Hz para o inversor de freq\u00fc\u00e9ncia.\tTempo\t(X)\nNF1.3 - Controle da vaz\u00e3o em malha fechada\tO sistema deve ser capaz de receber qualquer se\u00ed-pcmtde vaz\u00e3o dentro da faixa de opera\u00e7\u00e3o da planta e ajustar automaticamente o valor do sinal de controle para alcan\u00e7ar a vaz\u00e3o desejada.\tTempo\t(X)\nNF1 j4- Monitoramento das vari\u00e1veis\t0sistema deve apresentar de forma visual e em tempo real o valor de leitura da vaz\u00e3o e do sinal de controle.\tInterface\t(X)\nFigura 5.1: Requisitos funcionais do modo de controle do motor.\nF2 Realizar Downlink autom\u00e1tico\t\t\tOculto (\t)\nDescri\u00e7\u00e3o: 0 sistema deve ser capaz de realizar de forma autom\u00e1tica todos os as sequ\u00eancias de Downlink utilizadas nas ferramentas do tipo push-the-bit.\t\t\t\nRequisitos N\u00e3o - Funcionais\t\t\t\nNome\tRestri\u00e7\u00e3o\tCategoria\tPermanente\nNF2.1 - Escolha do Downlink\tOsistema deve apresentar ao usu\u00e1rio todas as op\u00e7\u00f5es de Downlink de forma pr\u00e1tica e intuitiva.\tInterface\t(X)\nNF2.2 - Monitoramento do Downlink\tOsistema deve apresentar de forma visual e em tempo real o andamento do Downlink autom\u00e1tico.\tTempo\t(X)\nFigura 5.2: Requisitos funcionais sobre o Downlink.\nF3 Teste de Torque autom\u00e1tico\t\t\tOculto (\t)\nDescri\u00e7\u00e3o: 0 sistema deve ser automatizar alguns passos do teste detorque de forma que o processo possa ser feito por apenas uma pessoa.\t\t\t\nRequisitos N\u00e3o - Funcionais\t\t\t\nNome\tRestri\u00e7\u00e3o\tCategoria\tPermanente\nNF3.1 - Carregar teste\tOsistema dleve apresentar ao usu\u00e1rio a op\u00e7\u00e3o de escolher o tipo de ferramenta que ser\u00e1 testada e carregar as informa\u00e7\u00f5es de teste da mesma. As informa\u00e7\u00f5es sobre o teste s\u00e3o constadas no manual de manuten\u00e7\u00e3o.\tEspecifica\u00e7\u00e3o\t(X)\nNF3.2 - Ajustar set-pcmtde vaz\u00e3o para teste\tOsistema deve ser capaz de ajustar a vaz\u00e3o correta para cada deste.\tEspecifica\u00e7\u00e3o\t(X)\nNF3.3 - Adquirir dados\tOsistema deve ser capaz de receber dados do leitor de forque e do sensor de vaz\u00e3o em tempo real.\tUsabilidade\t(X)\nNF3Z - Armazenar e processar dados\tOsistema deve ser capaz de armazenar os dados durante o teste de forque e process\u00e1-los de forma a atender o manual de manuten\u00e7\u00e3o da ferramenta.\tEspecifica\u00e7\u00e3o\t(X)\nNF3.5 - Visualizar teste\tOsistema dleve apresentar de forma visual e em tempo real o andamento do teste de forque.\tInterface\t(X)\nNF3.6 - Gerar relat\u00f3rio\tOsistema deve ser capaz de gera relat\u00f3rio com os dados do teste de forque\tEspecifica\u00e7\u00e3o\t(X)\nFigura 5.3: Requisitos funcionais sobre teste de torque.\n5.3: Plataforma de Desenvolvimento\nA linguagem de programacao escolhida para o desenvolvimento do software foi Java. Java e uma linguagem de programacao orientada a objeto desenvolvida na decada de 90 por uma equipe de programadores na empresa Sun Microsystems. Diferentemente das linguagens convencionais, que sao compiladas para codigo nativo, a linguagem Java e compilada para um bytecode que e executado por uma maquina virtual. A linguagem de programacao Java e a linguagem convencional da Plataforma Java, mas nao sua unica linguagem [39].\nA utilizacao de Java nesse projeto deu-se, primeiramente, por quest\u00f5es de custo, uma vez que um sistema desenvolvido em Java pode utilizar apenas tecno-\nlogia open-source, ou seja gratuita. Alem disso, Java apresenta caracter\u00edsticas muito importantes no contexto desse projeto, como portabilidade, suporte e flexibilidade.\nNo contexto do desenvolvimento de softwares, portabilidade significa que programas escritos em Java possuem independencia de plataformas computacionais, ou seja, um programa escrito em Java deve funcionar em qualquer computador, em qualquer sistema operacional. Suporte se refere a outra caracter\u00edstica importante do Java que e a sua grande comunidade de desenvolvedores. E poss\u00edvel encontrar bibliotecas gratuitas na Internet que implementam uma infinidade de funcionalidades e facilitam muito o trabalho do programador e possibilita alto grau de flexibilidade para o desenvolvimento de solucoes customizadas. Nesse trabalho, por exemplo, foram utilizadas bibliotecas que implementam gr\u00e1ficos em tempo real, API para comunicacao serial e para interface grafica, entre outros.\nForam utilizadas duas diferentes IDE (Integrated Development Environment) para o desenvolvimento do software:\n\u2022 Eclipse Indigo: onde foi realizado a maior parte do software.\nellipse\nFigura 5.4: IDE: Eclipse.\n\u2022 Netbeans 7.1.1: onde foi programada toda a interface grafica.\nFigura 5.5: IDE: NetBeans.\n5.4: Comunica\u00e7\u00e3o com o Hardware\nPara que o programa escrito em Java se comunique com a placa eletr\u00f4nica desenvolvida, e necessario que haja um meio e um protocolo de comunicacao. A placa Arduino utilizada nesse projeto possui uma porta serial (tambem conhecida como UART ou USART) que utiliza os pinos digitais 0 (RX) e 1 (TX) para implementar o\nFigura 5.6: Comunica\u00e7\u00e3o serial do Arduino atraves de conex\u00e3o USB\nprotocolo RS-232. O meio de comunica\u00e7ao com o computador da-se atraves de uma conex\u00e3o USB, como mostra a Figura 5.6.\nEm telecomunicacoes e ciencia da computacao, comunicacao serial e o processo de enviar dados um bit de cada vez, sequencialmente, num canal de comunicacao ou barramento. E diferente da comunicacao paralela, em que todos os bits de cada s\u00edmbolo sao enviados juntos. A comunicacao serial e usada em toda comunicacao de longo alcance e na maioria das redes de computadores, onde o custo de cabos e as dificuldades de sincronizacao tornam a comunicacao paralela impratic\u00e1vel. Para curtas distancias, barramentos seriais estao se tornando cada vez mais comuns devido ao ponto em que as desvantagens dos barramentos paralelos (densidade de interco-nexao) superam suas vantagens de simplicidade [40].\nExitem varios protocolos de comunicacao serial, como por exemplo RS-232, RS-423, RS-485 e Ethernet. No protocolo de comunicacao RS-232, caracteres sao enviados um a um como um conjunto de bits entre um DTE (terminal de dados -Data Terminal Equipment) e um DCE (comunicador de dados - Data Communication Equipment). Hoje, o protocolo de comunicacao RS-232 vem sendo, gradualmente, suprimido pelo USB para comunicacao local. O protocolo USB e mais r\u00e1pido, possui conectores mais simples de usar e tem um melhor suporte por software.\n5.4.1: Protocolo de comunica\u00e7ao\nA implementa\u00e7\u00e3o de um pr\u00f4t\u00f4c\u00f4l\u00f4 de comunica\u00e7ao serial entre a placa de aquisi\u00e7ao de dados e o software esta diretamente relacionado com a camada de en\nlace do modelo OSI (Open Systems Interconnection). OSI \u00e9 um modelo de arquitetura para sistemas abertos, visando permitir a comunicacao entre maquinas heterogeneas e definindo diretivas gen\u00e9ricas para a construcao de redes de computadores independente da tecnologia de implementacao.\nA camada de enlace e respons\u00e1vel por detectar e, opcionalmente, corrigir erros que possam acontecer no n\u00edvel f\u00edsico da comunicacao. A camada f\u00edsica diz respeito aos meios de conexao atrav\u00e9s dos quais ir\u00e3o trafegar os dados, tais como interfaces seriais, LPTs, hubs ou cabos coaxiais. A camada de enlace representa, portanto, um protocolo de transmissao e recepcao (delimitacao) de dados e pelo controle de fluxo da comunicacao entre sistemas diretamente conectados.\nExiste uma iniciativa open-source de criacao de um protocolo gen\u00e9rico para comunicacao entre microcontroladores e softwares chamada FIRMATA, Figura 5.7. Esse protocolo estabelece uma comunicacao ente o Arduino e um software atrav\u00e9s de uma comunicacao serial e implementa todas as funcoes da camada de enlace. O objetivo do protocolo e oferecer um controle total sobre o Arduino pelo software que esta\u00ed sendo executado em um computador.\nFigura 5.7: FIRMATA: protocolo de comunica\u00e7\u00e3o entre o Arduino e o software.\nApesar dessa iniciativa estar em fase de testes e n\u00e3o ter todas as funcionalidades do Arduino implementadas no protocolo, ela consegue suprir todos os requisitos desse projeto que sao: ler entrada anal\u00f3gica e escrever nas portas digitais da placa. O uso desse protocolo poupou muito tempo de desenvolvimento, uma vez que nao foi necess\u00e1rio implementar algoritmos de controle de fluxo de dados, controle de erros etc.\n5.5: Implementa\u00e7\u00e3o\nO desenvolvimento do software foi baseado na solu\u00e7\u00e3o dos requisitos de projeto das Figuras 5.1, 5.2 e 5.3. A interface gr\u00e3fi\u00e7a do programa e divida basicamente em duas se\u00e7oes principais, conforme e mostrado na Figura 5.8. A primeira e uma tela de monitoramento geral, que permanece ativa durante qualquer operacao do usu\u00e1rio, apresentando resumidamente o status do sistema. A segunda tela e espec\u00edfica para as operacoes de cada etapa do teste.\nFigura 5.8: Se\u00e7\u00f5es principais do software.\nA Figura 5.9, mostra a se\u00e7\u00e3o 1 em detalhes e tem as suas funcionalidades apresentadas na Tabela 5.1.\nFigura 5.9: Painel de monitoramento principal.\nTabela 5.1: Funcionalidades da tela de monitoramento geral do sistema\nID\tDescri\u00e7\u00e3o\tRela\u00e7\u00e3o com\tos requisitos\n1.1\tpercentual de uso do motor\t\n1.2\tvalores de leitura em tempo real da vazao e torque\t\n1.3\ttempo de durac\u00e3o do teste e um quadro com informa\u00e7\u00f5es sobre o status do downlink\tNF2.2\nA se\u00e7\u00e3o identificada pelo n\u00famero 2 na Figura 5.8 e composta por um conjunto de 3 abas. A primeira e chamada de \u2019\u2019Home\u2019\u2019, a segunda de \u2019\u2019Downlink\u201de a terceira de \u2019\u2019Testing\u201d. Cada uma delas sera detalhada a seguir.\nA aba Home, apresenta as informa\u00e7\u00f5es principais do controle de vaz\u00e3o do teste. Suas funcionalidades visam o atendimento do requisito F1 e seus requisitos nao funcionais. A Figura 5.10 mostra os principais componentes dessa aba.\nFigura 5.10: Aba Home.\nTabela 5.2: Funcionalidades da aba Home\nID\tDescri\u00e7\u00e3o\tRela\u00e7\u00e3o com\tos requisitos\n2.1.1\tseletor de modo de controle, autom\u00e1tico (Set Flow) ou manual (Set Frequency)\tNF1.1\n2.1.2\tinicializa o controlador autom\u00e1tico para o set-point desejado\tNF1.3\n2.1.3\tajusta a entrada do sistema de controle em malha aberta (percentual de uso do motor)\tNF1.2\n2.1.4\tenvia set-point do controlador em malha aberta\tNF1.2\n2.1.5\tinterrompe a a\u00e7\u00e3o do sistema de controle em malha fechada\tNF1.3\n2.1.6\tgr\u00e1fico em tempo real com o valor da vazao em galoes por minuto\tNF1.4\n2.1.7\tgr\u00e1afico em tempo real com o valor da a\u00e7c\u00e3ao de controle (%)\tNF1.4\nA aba Downlink, como o proprio nome diz, apresenta todas as informacoes ne-cessarias para realizar um downlink automatico. Ha uma tabela onde constam todos os downlinks existentes e algumas informacoes sobre eles. E importante destacar que existe um downlink que e utilizado apenas para o Flow Loop Test e que, por essa razao, a sua frequencia de utilizacao e muito maior que as demais em testes de manutencao, havendo uma funcionalidade exclusiva para ele no software. A Figura\n5.11\tmostra essa aba e seus componentes.\nFigura 5.11: Aba Downlink.\nTabela 5.3: Funcionalidades da aba Downlink\nID\tDescri\u00e7\u00e3o\tRela\u00e7\u00e3o com\tos requisitos\n2.2.1\tquadro com a descri\u00e7\u00e3o do programa de downlink selecionado\tN2\n2.2.2\tinterrompe o downlink em andamento\tN2\n2.2.3\tiniciar o downlink do Flow Loop Test\tNF2.1\n2.2.4\tseleciona downlink atrav\u00e9s de uma caixa suspensa de op\u00e7\u00f5es\tNF2.1\n2.2.5\ttabela com todos os downlinks existentes. E poss\u00e9vel selecionar o downlink desejado clicando sobre a linha desejada na tabela\tNF2.1\n2.2.6\tinicia downlink selecionado\tN2\nO requisito NF2.2 e atendido pela funcionalidade 1.3.\nA abra Testing \u00e9 apresentada na Figura 5.12 e e poss\u00edvel perceber que o n\u00famero de funcionalidades relacionadas ao teste de torque sao maiores que as demais. A Tabela 5.4 mostra quais sao essas funcionalidades.\nFigura 5.12: Aba Testing.\nTabela 5.4: Funcionalidades da aba Testing\nID\tDescri\u00e7\u00e3o\tRela\u00e7\u00e3o com\tos requisitos\n2.3.1\tinicializa a comunica\u00e7\u00e3o serial com o leitor de torque\tNF3.3\n2.3.2\tinterrompe a comunicac\u00e3o serial com o leitor de torque\tNF3.3\n2.3.3\tpreenche no software os valores do teste de fric\u00e7\u00e3o da ferramenta\t\n2.3.4\tpreenche o numero serial da ferramenta que esta sendo testada\tNF3.1\n2.3.5\tseleciona o tipo de teste a ser realizado. O tipo de teste escolhido ir\u00e1 afetar os set-points da vaz\u00e3o para o teste de torque.\tNF3.1\n2.3.6\tcarrega set-points de vaz\u00e3o para o teste de torque de acordo com o teste selecionado pela funcionalidade 2.3.5\tNF3.1\n2.3.7\tinicializa controlador de vaz\u00e3o para o set-point atual\tNF3.2\n2.3.8\tinicializa processamento dos dados de leitura de torque e autoriza o preenchimento autom\u00e1tico da tabela\tNF3.4\n2.3.9\tapaga dados anteriores de teste\t\n2.3.10\texporta os dados de testes presentes na tabela para uma planilha do Excel\tNF3.6\n2.3.11\tarmazena os dados atuais do teste\tNF3.4\n2.3.12\tmonitora os valores de torque em funcao do tempo\tNF3.5\nPor ser um procedimento chave no projeto, e interessante detalhar um pouco mais como e realizado o teste de torque atrav\u00e9s do procedimento automatizado. A Figura 5.13 mostra o fluxograma do teste de torque. A partir do momento que o tecnico verifica visualmente que a ferramenta aceitou o downlink, o teste de torque e iniciado. \u00c9 importante lembrar que a medicao de torque acontece em 7 etapas e que cada uma dessas etapas tem um set-point de vazao diferente.\nTeste de Torque\nDownlink Aceito\nFigura 5.13: Fluxograma do teste de torque.\nO primeiro passo na realiza\u00e7\u00e3o do teste de torque, conforme \u00e9 mostrado na Figura 5.13, e a inser\u00e7ao dos dados da ferramenta no software. Esse procedimento e realizado atrav\u00e9s das funcionalidades 2.3.3, 2.3.4 e, 2.3.5. Em seguida, deve-se\ncarregar os dados do teste de acordo com as informacoes inseridas no passo anterior. Essa etapa, por sua vez, relaciona-se com a funcionalidade 2.3.6.\nApos ter carregado as informacoes, o software gerencia automaticamente as 7 etapas do teste de torque. Antes de cada uma dessas etapas e necessario, entretanto, ajustar a vazao correta, o que e mostrado no quarto bloco do fluxograma da Figura\n5.13\te e relacionado com a funcionalidade 2.3.7.\nO quinto e sexto blocos do fluxograma sao relacionados com a funcionalidade\n2.3.8\tdo software, que e a leitura de torque na ferramenta. Para que o software receba os dados de leitura de torque, antes de mais nada e preciso ter um torqu\u00edmetro digital conectado ao computador. Para estabelecer e/ou interromper a comunicacao entre o torqu\u00edmetro e o software, existem as funcionalidades 2.3.1 e 2.3.2.\nNesse trabalho, um torqu\u00edmetro modelo CEDAR - DIW 15, Figura 5.14, foi utilizado para a medicao do torque em tempo real. Esse modelo de torqu\u00edmetro transfere dados no formato ASCII atraves de comunicacao serial com o PC com um baud-rate de 19200 bps utilizando um cabo mini-USB. Para implementar a comunicacao serial RS-232 entre o torqu\u00edmetro e o software, foi utilizada uma API chamada RXTX.\nFigura 5.14: Torqu\u00edmetro digital CEDAR - DIW 15.\nApos ter realizado o loop de leitura de torque (quarto, quinto, sexto e setimos blocos da Figura 5.13) sete vezes, o usuario finalmente pode utilizar a funcionalidade 2.3.10 do software, que e a geracao de relat\u00f3rios. Para a geracao desses relat\u00f3rios, foi utilizada uma API chamada jexcel. Essa API possibilita que programas escritos em Java possam manipular planilhas do Micrososft Excel. Para a automacao do Flow Loop Test, foi programada uma rotina de exportacao dos dados de testes no modelo da Figura 5.15.\nFigura 5.15: Relat\u00f3rios gerados na forma de planilhas do Microsoft Excel.\n5.6: Telas do Sistema Supervisorio\nAs telas das figuras 5.16, 5.17 e 5.18 mostram as telas finais da interface gr\u00e1fica do sistema supervisorio.\n\n\nStarting Procedure\nMOTOR'S FREQUENCY\n\u25a0\n00:02:18\nWAITING FOR DOWNLINK...\n[ Home ] Downlink ] Testing ]\nMotor's frequency set-point\n34 %\n(\u2022) Set Flow\nFlow's set-point:\nGPM\nStop controller j\n96000\n102000\n105000\n72000\n7S000\n90000\n102000\n114000\n120000\n126000\n132000\n13S000\n108000\n114000\n117000\n120000\n123000\n126000\n129000\n132000\n138000\n141000\nFigura 5.16: Controlador de vazao\nFigura 5.17: Downlink\nFigura 5.18: Teste de Torque\nCap\u00edtulo6: Resultados\nO estudo de como o FlowLoop Test vinha sendo feito antes do desenvolvimento desse trabalho apresentou dois grandes problemas. Um relacionado a custo e outro a qualidade. Durante o processo de teste foi constatado que um dos dois tecnicos alocados nessa atividade permanecia ocioso por quase 60% do tempo, o que caracteriza desperd\u00edcio para a empresa. Outro problema encontrado foi a alta taxa de retrabalho no teste causada por erros humanos.\nO objetivo da automacao do FlowLoop Test e a reducao do numero de tecnicos necessarios para a realizacao do teste para apenas uma pessoa e a eliminacao do \u00edndice de retrabalho relacionado a erro humano.\nConforme foi mostrado no Cap\u00edtulo 2, a Figura 6.1 aponta as atividades que cada um dos tecnicos era responsavel no decorrer do teste.\nFigura 6.1: Estado inicial do processo de teste\nCom as mudancas apontadas, tambem, no Cap\u00edtulo 2 foi poss\u00edvel otimizar o processo de forma a economizar um total de 1,21 homen-hora por teste. A Figura 6.2 mostra como ficou o timeline do teste apos a implementacao das melhorias.\nFigura 6.2: Estado final do processo de teste\nAtraves da Figura 6.2 e poss\u00edvel notar que a unica atividade do Flow Loop Test que exige mais de uma pessoa para ser feita e a operacao de mover ferramentas. Esse processo nao pode ser modificado porque ele e protegido por normas de seguranca da empresa, uma vez que e necess\u00e1rio a utiliza\u00e7\u00e3o de talha.\nOutra analise importante dos resultados do projeto e a reducao de atividades que nao agregam valor ao produto. A Figura 6.3 mostra que alem de uma reducao de quase 40% em homens-hora utilizadas no teste, houve a eliminacao de processos que nao agregam valor.\nCap\u00edtulo7: Conclus\u00f5es e Perspectivas\nO programa de est\u00e1gio na empresa Schlumberger foi uma excelente oportunidade para conhecer melhor a industria do petr\u00f3leo. As atividades realizadas durante o estagio possibilitaram, ao mesmo tempo, um estudo aprofundado sobre operacoes de perfuracao de pocos de petroleo, um contato direto com processos produtivos de chao-de-fabrica, como por exemplo Lean Manufacturing, e tambem possibilitou o desenvolvimento do projeto descrito nesse trabalho.\nO projeto envolveu o estudo de varias disciplinas do curso de Engenharia de Controle e Automacao. Foram utilizados conceitos de eletr\u00f4nica, informatica industrial, fen\u00f4menos dos transportes, instrumentacao, controle de sistemas dinamicos, entre outros.\nO uso de novas tecnologias no desenvolvimento tecnico do projeto se provaram promissoras e, ao mesmo tempo, apresentaram algumas restricoes. Por exemplo, o uso do Arduino em ambientes industriais deve ser usado com bastante cautela. A Figura 7.1 mostra os sinais +V(sinalizado pela curva \u201dC\u201d) e A1 (sinalizado pela curva \u201dD\u201d) trocados entre o inversor de frequencia e a placa de aquisicao de dados. Pela figura, fica claro que esses sinais contam com muitos ru\u00eddos que, atraves de investigacao de causa realizadas na planta, sao causadas por interferencia eletromagnetica. Esse tipo de ru\u00eddo deve ser minimizado ao maximo pois o Arduino e uma placa bastante sens\u00edvel a esse tipo de interfer\u00eancia.\nFigura 7.1: Sinais do inversor de frequ\u00eancia em um ambiente idustrial\nPelos resultados alcan\u00e7ados por esse trabalho, outras bases da Schlumberger\nse mostraram interessadas na implementacao do projeto. Sendo assim, como perspectivas futuras, o projeto sera publicado pela equipe de engenheiros de manutencao de D&amp;M em canais internos de comunicacao da empresa e ter a sua documentacao compartilhada entre as mais de 80 bases ao redor do mundo.\nRefer\u00eancias\n[1]\tBrasil Escola - Historia do Petr\u00f3leo no Brasil http://www.brasilescola.com/brasil/historia-do-petroleo-no-brasil.htm Acesso em Junho de 2012.\n[2]\tCPDOC-FGV. A Petrobras e a auto-suficiencia na producao de petroleo, por Adelina Novaes e Cruz, Carlos Eduardo Barbosa Sarmento e Regina da Luz Moreira\n[3]\tO Estado de Sao Paulo - O que muda com o novo marco regulatorio do pre-sal http://www.estadao.com.br/noticias/economia,o-que-muda-com-o-novo-marco-regulatorio-do-pre-sal,427579,0.htm\nAcesso em Julho de 2012.\n[4]\tPetrobras -12 perguntas para voce entender o novo marco regulatorio http://www.petrobras.com.br/minisite/presal/pt/perguntas-respostas/ Acesso em Julho de 2012.\n[5]\tSCHLUMBERGER - OIL CD - Confidencial\n[6]\tPetrobras - Pr\u00e9-Sal - Vivendo uma revolucao http://www.petrobras.com.br/pt/energia-e-tecnologia/alternativo/transcricoes/pre-sal/\nAcesso em Junho de 2012.\n[7]\tIEA- International Energy Agency\nhttp://www.iea.org/stats/\nAcesso em Julho de 2012.\n[8]\tWEBARTIGOS - Petroleo: Futuro Escasso ou Promissor http://www.webartigos.com/artigos/petroleo-futuro-escasso-ou-promissor/60809/ Acesso em Junho de 2012.\n[9]\tVeja.com - Pre-sal\nhttp://veja.abril.com.br/idade/exclusivo/perguntas respostas/pre-sal/index.shtml Acesso em Junho de 2012.\n[10]\tBEZERRA, F Automa\u00e7\u00e3o do Processo de Inspe\u00e7\u00e3o El\u00e9trica de Ferramentas. Monografia para a Gradua\u00e7ao no curso de Engenharia de Controle e Automa\u00e7ao, UFSC, Florian\u00f3polis, 2011.\n[11]\tPortal Brasil - Reservas de petroleo e gas poderao chegar a 30 bilhoes de barris, diz Petrobras http://www.brasil.gov.br/noticias/arquivos/2012/05/16/reservas-de-petroleo-e-gas-poderao-chegar-a-30-bilhoes-de-barris-diz-petrobras\nAcessado em Julho de 2012\n[12]\tPortal Brasil - Campanha da ANP capacita jovens para o setor de oleo e gas http://www.brasil.gov.br/noticias/arquivos/2012/06/25/campanha-da-anp-capacita-jovens-profissionalmente-para-setor-de-oleo-e-gas\nAcessado em Julho de 2012\n[13]\tPortal Brasil - Petrobras deve investir US$ 236,5 bilhoes ate 2016 para aumentar producao de petroleo http://www.brasil.gov.br/noticias/arquivos/2012/06/15/petrobras-deve-investir-us-236-5-bilhoes-ate-2016-para-aumentar-producao-de-petroleo\nAcessado em Julho de 2012\n[14]\tPortal Brasil - Ampliacao de parque de refino brasileiro recebera US$ 31,2 bilhoes da Petrobras aumentar producao de petroleo http://www.brasil.gov.br/noticias/arquivos/2012/06/25/ampliacao-de-parque-de-refino-brasileiro-recebera-us-31-2-bilhoes-da-petrobras\nAcessado em Julho de 2012\n[15]\tBARBOSA,Rodolfo e ALVES, Alu\u00edsio. Petrobras ultrapassa Microsoft em valor de mercado, diz estudo. Sao Paulo: Agencia Reuters, 19/05/2008 - 15h17\n[16]\tWikipedia - Petrobras em numeros\nhttp://pt.wikipedia.org/wiki/Petrobras\nAcessado em Julho de 2012\n[17]\tSFREDO, P B., Construc\u00e9\u00edo da Area de Calibracao da Ferramenta de Inducao e Estudo de Sua Funcionalidade para Analise de Propriedades Petrof\u00edsicas de Formacoes Geologicas. Monografia para a Graduacao no curso de Engenharia de Controle e Automacao, UFSC, Florianopolis, 2006.\n[18]\tBOARIN PINTO, Silvia Helena; MONTEIRO DE CARVALHO, Marly; LEE HO, Linda. Implementa\u00e7\u00e3o de programas de aulidade: um Survey em empresas de grande porte no Brasil. Revista Gestao &amp; Produ\u00e7ao. v.13, n.2, p191-203, mai.-ago. 2006.\n[19]\tWikipedia - Seis Sigma\nhttp://pt.wikipedia.org/wiki/DMAIC\nAcessado em Julho de 2012\n[20]\tMELLO, A. E. N. S., Apli\u00e7a\u00e7ao do mapeamento de processos e da simula\u00e7ao no desenvolvimento de projetos de pro\u00e7essos produtivos. Disserta\u00e7ao submetida ao Programa de Pos-Gradua\u00e7ao em Engenharia de Produ\u00e7ao. Universidade Federal de Itajuba, 2008.\n[21]\tDREHER, J. R., Modulo IV - Comandos Industriais II: Chaves de Partida Suave Soft-Starter e Inversor de Frequen\u00e7ia. Centro Federal de Edu\u00e7a\u00e7ao Te\u00e7nologi\u00e7a de Santa Catarina Unidade de Chape\u00e7o - CEFET/SC, 2008.\n[22]\tHENRIQUE, M., Conversores de Frequen\u00e7ia e Soft-Starters. Curso ministrado pela EJM Engenharia. http://www.ejm.\u00e7om.br/download/Inversores.pdf\n[23]\tWikipedia - Inversor\nhttp://pt.wikipedia.org/wiki/Inversor\nA\u00e7essado em Julho de 2012\n[24]\tSCHNEIDER, P. S., Medi\u00e7\u00c9\u00edo de Velo\u00e7idade e Vazao de Fluidos. Universidade Federal do Rio Grande do Sul - UFRGS. 2000.\n[25]\tMe\u00e7atroni\u00e7a Atual - Medidor de Vazao tipo Magneti\u00e7o http://www.me\u00e7atroni\u00e7aatual.\u00e7om.br/se\u00e7oes/leitura/790 A\u00e7essado em Julho de 2012\n[26]\tSCHNEIDER, P S., Medi\u00e7\u00e9\u00edo de Velo\u00e7idade e Vazao de Fluidos. Universidade Federal do Rio Grande do Sul - UFRGS. 2000.\n[27]\tWikipedia - Arduino\nhttp://pt.wikipedia.org/wiki/Arduino\nA\u00e7essado em Junho de 2012\n[28]\tWEG AUTOMACAO, Guia de Aplicacao de Inversores de Frequencia, 2a Edicao.\n[29]\tLEE, J.S. et al. Building a Safe and Robust Industrial System with Avago Technologies Optocouplers. Avago Technologies. Retrieved November 2, 2010.\n[30]\tWikipedia - Filtro passa-baixo\nhttp://pt.wikipedia.org/wiki/Filtro passa-baixo\nAcessado em Junho de 2012\n[31]\tElectronic's World - Como fazer sua PCI (Placa de Circuito Impresso) http://lucascavalheiro.wordpress.com/2008/10/22/como-fazer-pci/ Acessado em Junho de 2012\n[32]\tNORMEY-RICO, Introducao a Analise e Projeto de Sistemas de Controle Linear, Universidade Federal de Santa Catarina.\n[33]\tNORMEY-RICO, Funcionamento de Sistemas em Regime Permanente, Universidade Federal de Santa Catarina.\n[34]\tCOELHO, A. A. R., Identificacao de Sistemas Dinamicas Lineares, Editora da UFSC, 2004.\n[35]\tCARVALHO, R. L., Desenvolvimento de Modelos e Algoritmos de Controle Avancado para Separadores Trifasicos, Relatorio de Estagio, Universidade Federal de Santa Catarina. 2011.\n[36]\tASTROM, K. J., HAGGLUND, T. Automatic Tuning of PID Controllers. Estados Unidos da America: [s.n.]. 1988. 141 p.\n[37]\tSOARES, P. M. O. R., Discretizacao de Controladores Cont\u00ednuos. Dissertacao submetida para satisfacao parcial do grau de mestre em Engenharia Elec-trotecnica e de Computadores. Universidade do Porto. Portugal, 1996.\n[38]\tNORMEY-RICO, Interconexao de Sistemas Cont\u00ednuos e Discretos, Universidade Federal de Santa Catarina.\n[39]\tWikipedia - Java (linguagem de programacao)\nhttp://pt.wikipedia.org/wiki/Java(linguagemde_programa%C3%A7%C3%A3o)\nAcessado em Junho de 2012\n[40]\tWikipedia - Comunica\u00e7\u00e3o Serial\nhttp://pt.wikipedia.org/wiki/Comunica%C3%A7%C3%A3o serial\nAcessado em Junho de 2012\nAp\u00eandice A: Funcionamento B\u00e1sico dos Inversores de Frequ\u00eancia\nH\u00e1 algum anos, para se ter um controle preciso de velocidade era necess\u00e1rio utilizar motores de corrente continua. Entretanto, isso acarretava em diversos problemas como custo do motor, necessidade de retificacao da tensao e manutencao. Com os avancos da eletr\u00f4nica de potencia e com as necessidades de aumento de producao, uma serie de equipamento na area de automacao foram desenvolvidos e lancados no mercado.O inversor de frequencia e um desses equipamentos. Versatil e dinamico, os inversores de frequencia permitiram o uso de motores de inducao para controle de velocidade em substitui\u00e7ao aos motores de corrente continua [21].\nPara controlar a velocidade de motores de inducao trifasicos, o metodo mais eficiente consiste na variacao da frequencia de sua fonte alimentadora atraves de inversores de frequencia. O inversor de frequencia, tambem chamado por alguns fabricantes de conversor de frequencia, e um equipamento capaz de controlar a velocidade e torque de motores de corrente alternada. Esse equipamento pode ter varias filosofias de controle e varias potencias. Independentemente do fabricante e modelo, a estrutura basica do inversor e a mesma, conforme ilustra a Figura A.1. O que muda significativamente de um tipo para outro ei a filosofia de controle [21].\nFigura A.1: Estrutura b\u00e1sica de um inversor de frequ\u00eancia trif\u00e1sico.\nA estrutura basica do inversor e composta por diodos, capacitores e transistores bipolares de porta isolada (IGBTs). Esse conjunto de componentes eletronicos tem a funcao de retificar a rede AC, filtrar o sinal e chavear a saida trifasica para o motor de inducao, esquematizado na Figura A.2.\n(figura 2.8 - rotor e estator).\nTAMPAS\nTERMINAIS\nCAIXA DE\nLIGA\u00c7\u00c3O\nROLAMENTOS\n(11l\u00ed\nVENTILADOR\nPROTE\u00c7\u00c3O DO VENTILADOR\nN\u00daCLEO DE CHAPAS\nN\u00daCLEO DE CHAPAS\nENTROLAMENTO\nTRIF\u00c1SICO\nEIXO\nBARRAS DE AN\u00c9IS DE CURTO-CIRCUITO\nFigura A.2: Componentes de um motor de indu\u00e7\u00e3o [28].\nO circuito que comanda os IGBTs e respons\u00e1vel pela gera\u00e7\u00e3o de determinados pulsos que fazem com que os transistores chaveiem o circuito da Figura A.1, variando a tensao e frequencia do sinal enviado para o motor. O metodo de geracao desses pulsos e conhecido por modulacao PWM (Pulse With Modulation) e tem a forma mostrada na Figura A.3.\nFigura A.3: Modula\u00e7ao PWM [21].\nA sigla PWM em portugu\u00eas significa \"modula\u00e7\u00e3o por largura de pulso\u201d. Ela e uma t\u00eacnica de controle de pot\u00eancia, tensao ou corrente atrav\u00eas da largura do pulso de excitacao, oriundos dos sistemas de controle. Esse controle e feito atraves do seu ciclo de trabalho (Duty Cycle) da onda. O ciclo de trabalho e uma caracter\u00edstica de uma onda quadrada, representada pela porcentagem do tempo do per\u00edodo de onda em que o sinal esta com amplitude m\u00e1xima.\nEssa t\u00e9cnica pode ser melhor compreendida atrav\u00e9s da Figura A.4. Nela notamos tres sinais cuja forma de onda e quadrada. A amplitude dos tres tambem e a mesma, igual a 5 Vcc. Como os tres tem mesmo per\u00edodo entao a frequencia tem o mesmo valor para todos (f =1/T ) [21]. Por exemplo, para o primeiro sinal da Figura A.4, durante metade do per\u00edodo de onda o sinal esta em n\u00edvel alto (5 Vcc) e na outra metade do tempo ele esta em n\u00edvel baixo (0 Vcc). Nesse caso o seu duty cicle e de 50%.\nPara sistemas com cargas resistivas, como motores de inducao, o valor de tensao \u201dpercebida\u201dpelo sistema e equivalente ao duty cicle. Isto e, no exemplo da Figura A.4, para um duty cicle de 50%, um motor de inducao \u201dperceberia\u201dum sinal de tensao com 50% do valor da amplitude, isto e, um sinal constante de 2,5 Vcc. Em outras palavras, a tecnica de PWM nao varia a tensao real do sinal, mas varia a tensao eficaz. Isso faz com que a tensao da fonte de alimentacao nao precise variar, variando apenas o sinal de controle. O uso de PWM possui grandes vantagens, a principal delas e a eficiencia, devido ao fato de que, teoricamente, um controle PWM nao dissipa potencia.\nAp\u00eandice B: Medidor de Vazao Tipo Magn\u00e9tico\nO medidor de vazao magnetico, tambem conhecido como eletromagnetico ou por tensao induzida, e um medidor que utiliza um princ\u00edpio de medicao antigo (lei de Faraday), que sera explicada melhor a seguir. O medidor de vazao magnetico atende a um gigantesco numero de aplicacoes como, por exemplo: medicao de vazao de iogurte, xaropes de glucose com alta concentracao, cerveja e derivados, polpa de celulose, polpa de minerio, acidos em geral, efluentes industriais, esgoto, lamas, pastas, etc [25].\nPara que ele possa ser indicado em uma aplicacao basta que o l\u00edquido possua uma condutividade eletrica m\u00ednima admitida, dependendo de sua pressao, temperatura e velocidade de escoamento na tubulacao do processo, com certeza a vazao desse l\u00edquido podera ser medida precisamente, conforme a necessidade do usuario\n[25].\nO cientista Michael Faraday demonstrou pela primeira vez o princ\u00edpio que leva o seu nome em 1832. Desde entao, foram desenvolvidos muitos equipamentos baseados na sua lei, o medidor de vazao magnetico e um desses equipamentos. O primeiro medidor de vazao magnetico foi desenvolvido no final da decada de 40, ja no seculo 20. No entanto, medidores de vazao magneticos modernos e realmente eficazes, so surgiram no final dos anos 70. Apesar do medidor de vazao magnetico ser baseado num princ\u00edpio antigo, ele continua sendo aperfeicoado e customizado para algumas aplicacoes por alguns fabricantes [25].\nA lei de Faraday utilizada para medidores de vazao, determina que o movimento do l\u00edquido (o qual devera possuir uma condutividade eletrica m\u00ednima admitida) atraves do campo magnetico induz uma forca eletromotriz que atravessa o l\u00edquido num sentido perpendicular ao campo magnetico, sendo essa f.e.m. diretamente proporcional a sua velocidade de escoamento [25], Figura B.1.\nDevido ao campo magnetico empregado na inducao, o material do tubo medidor nao deve ser material nao magnetico, para nao conduzir e nem modificar a direcao do campo magnetico gerado. Por meio de dois eletrodos inseridos em um plano perpendicular ao campo magnetico, torna-se poss\u00edvel a medicao da forca eletromotriz induzida por meio de um milivolt\u00edmetro. Essa forca eletromotriz induzida (dada em mi-livolts), nao e afetada pela temperatura, viscosidade, pressao, turbulencia, densidades\nFigura B.1: Princ\u00edpio de funcionamento de medidores eletromagn\u00e9ticos de vaz\u00e3o\nespec\u00edfica/relativa e condutividade el\u00e9trica do l\u00edquido medido, desde que a condutivi-dade eietrica esteja acima do valor m\u00ednimo exigido [25].\nAiem do medidor eletromagn\u00e9tico de vazao, diversas outras tecnologias de instrumentacao tambem sao utilizadas. A tabela da Figura B.2 mostra as principais caracter\u00edsticas de cada um.\nTipo\tCiasse\tFaixa\tVaria\u00e7\u00e3o da faixa\tPress\u00e3o m\u00e1xima MPa\tfaixa de temperatura \u201cC\t\tviscosidade m\u00e1xima cst (icrV \u00bfS\tescala\tindica\u00e7\u00e3o\tincerteza padr\u00e3o %\t\tMaterial\tperda de carga kPa\tcomprimento de linha cm\tconsidera\u00e7\u00f5es especiais\talimenta\u00e7\u00e3o\tcusto relativo\nobstru\u00e7\u00e3o\tOrif\u00edcio\tliq.\t5:1\t42\t-270\t->\t4\u00cdMX)\traiz\tremota\t1-2\t\tmetais em\t0.7 ->200\t4-\u00bb 30\ttubo reto:\tnenhu-\t1.0\n\t\t0,012\u2014>220\t\t\t1100\t\t\tquadra-\tpress\u00e3o\tfundo\tde\tgeral\t\t\t10 Diam.\tma\t\n\t\tg\u00e1s\t\t\t\t\t\tda\tdiferencial\tescala\tde\t\t\t\tmontante\t\t\n\t\t23\u2014>43000\t\t\t\t\t\t\t\tpress\u00e3o\t\t\t\t\t3 Diam.\t\t\n\t\t\t\t\t\t\t\t\t\tdderencial\t\t\t\t\tjusante\t\t\n\tBocal\tliq.\t5:1\t10\t-50\u2014>\t800\t4000\traiz\tremota\t1-2\t\tbronze.\t0,7 -> 140\t2-\u00bb 60\ttubo reto:\tnenhu-\t1.4\n\t\t0.031\u2014>950\t\t\t\t\t\tquadra-\tpress\u00e3o\tfundo\tde\ta\u00e7o, a\u00e7o\t\t\t10 Diam.\tma\t\n\t\tg\u00e1s\t\t\t\t\t\tda\tdiferencial\tescala\tde\tinox, ferro\t\t\tmontante\t\t\n\t\t45\u2014>240000\t\t\t\t\t\t\t\tpress\u00e3o\t\t\t\t\t3 Diam.\t\t\n\t\t\t\t\t\t\t\t\t\tdiferencial\t\t\t\t\tjusante\t\t\n\tVenturi\tliq. 0.03->\t5:1\t10\t-50\u2014>\t800\t4000\traiz\tremota\t1-2\t\tbronze.\t0.7 -> 100\t2 \u2014> 60\ttubo reto:\tnenhu-\t1,5\n\t\t950\t\t\t\t\t\tquadra-\tpress\u00e3o\tfundo\tde\ta\u00e7o, a\u00e7o\t\t\t10 Diam.\tma\t\n\t\tg\u00e1s\t\t\t\t\t\tda\tdiferencial\tescala\tde\tinox. ferro.\t\t\tmontante\t\t\n\t\t45\u2014>240000\t\t\t\t\t\t\t\tpress\u00e3o\t\tpl\u00e1stico\t\t\t3 Diam.\t\t\n\t\t\t\t\t\t\t\t\t\tdiferencia]\t\t\t\t\tjusante\t\t\narrasto\trot\u00e2metro\tliq. 0.1x10\"5\t10:1\t2\t-45->\t200\tICX>\tlinear\tlocal\tou\t1-2\t\tmetais em\t0.05\u2014>7\t0.6\u2014> l\u00ed)\tmontagem\tnenhu-\t1,0\n\tde vidro\t-> 16\t\t\t\t\t\t\tremota\tfundo\tde\tgeral.\t\t\tvertical\tma\t\n\t\tg\u00e1s 0.006\t\t\t\t\t\t\t(el\u00e9trica ou\tescala\t\tpl\u00e1sticos e\t\t\t\t\t\n\t\t\u2014>330\t\t\t\t\t\t\tpneum\u00e1tica)\t\t\tcer\u00e2micos\t\t\t\t\t\n\trot\u00e2metro\tliq. 0.03\t10:1\t35\t-180\t->\t100\tlinear\tlocal\tou\t1-2\t\tmetais em\t0,3 ->70\tl,2->30\tmontagem\tnenhu-\t12\n\tde metai\t250\t\t\t870\t\t\t\tremota\tfundo\tde\tgeral.\t\t\tvertical\tma\t\n\t\tg\u00e1s 0,2 \u2014>\t\t\t\t\t\t\t(el\u00e9trica ou\tescala\t\tpl\u00e1sticos e\t\t\t\t\t\n\t\t470\t\t\t\t\t\t\tpneum\u00e1tica)\t\t\tcer\u00e2micos\t\t\t\t\t\n\tturbina ou\tliq. 0.2X10-3\t15:1\t105\t-270\t->\t30\tlinear\tremota\t0,5\tda\talum\u00ednio.\t14\u2014>70\t0.3 -> 90\tqualquer\tel\u00e9trica\t5.0\n\th\u00e9lice\t->3100 g\u00e1s 0,2 \u2014>\t10:1\t\t540\t\t\t\tel\u00e9trica\tleitura\t\ta\u00e7o inox\t\t\t\t\t\n\t\t140000 liq. limpo 0.02\t10:1\t1\t\t\t2000\t\tlocal\tou\t1\tda\tbronze.\t7-> 140\t1,2-> 15\tprefer\u00e8n-\tnenhu-\t1,0\n\t\t\u2014>63\t\t\t-15->\t150\t\t\tremota\tleitura\t\ta\u00e7o. a\u00e7o\t\t\tcia\tna\tma\t\n\t\t\t\t\t\t\t\t\tel\u00e9trica\t\t\tinox. ferro\t\t\thorizontal\t\t\nmagn\u00e9ti-\t\tl\u00edquidos\t20:1\t4\t-130\t->\t1000\tlinear\tremota\t0,5 ->\t1\tpl\u00e1stico.\tmuito\t0,2 -> 200\tqualquer\tel\u00e9trica\t6,0\nCO\t\tcondutivos\t\t\t180\t\t\t\tel\u00e9trica\tfundo\tde\ta\u00e7o inox\tpequena\t\t\t\t\n\t\tapenas 0,1 xlO*3 ->\t\t\t\t\t\t\t\tescala\t\t\t\t\t\t\t\n\t\t3100\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nFigura B.2: Quadro comparativo entre tipos de medidores de vaz\u00e3o\nAnexo A: Diagrama do Inversor de Frequencia Varispeed E7 - Yaskawa\n\u2666 Electrical Connection\n\u25a0Wiring the Inverter\nDC reactor to improve input power factor (optional)\nFig 4 Wiring Diagram\nEN-8\nAnexo B: Lista de Componentes\nA lista de componentes necessarias para a construcao da placa eletr\u00f4nica de aquisto de dados e mostrada na Figura B.1.\nTabela B.1: Lista de componentes\nID\tValor\tPackage\tTipo\tPosi\u00e7ao (nm)\tOrienta\u00e7\u00e3o\nC2\t10pF\tE2-5\trcl\t(57.69 21.15)\tR180\nJP1\t\t1X06\tpinhead\t(38.7 6.05)\tR0\nJP2\t\t1X06\tpinhead\t(56.45 6.05)\tR0\nJP3\t\t1X08\tpinhead\t(32.05 54.15)\tR180\nJP4\t\t1X08\tpinhead\t(53.9 54.15)\tR180\nOK1\t4N35\tDIL06\toptocoupler\t(40.41 23.36)\tR0\nOK2\t4N35\tDIL06\toptocoupler\t(40.41 23.36)\tR0\nR1\t1.2kQ\t0207/10\tresistor\t(21.62 13.76)\tR180\nR2\t10kQ\t0207/10\tresistor\t(21.64 9.54)\tR0\nR3\t10kQ\t0207/10\tresistor\t(37.74 13.94)\tR0\nR4\t1.2kQ\t0207/10\tresistor\t(30.8 49.4)\tR0\nR6\t1kQ\tRS3\tpot\t(28.2 22.9)\tR270\nR7\t10kQ\t0207/10\tresistor\t(56.89 13.27)\tR180\nR8\t220Q\t0207/10\tresistor\t(55.89 40.87)\tR0\nR9\t10kQ\t0207/10\tresistor\t(18.51 28.19)\tR270\nSP1\tF/CM12P\tF/CM12P\tbuzzer\t(11.49 46.36)\tR180\nT1\t2N3904\tTO92\ttransistor\t(56.24 33.05)\tR270\nX4\t\tAK500/2\tcon-ptr500\t(8.65 12.1)\tR270\nX5\t\tAK500/3\tcon-ptr500\t(8.85 28.2)\tR270\nAnexo C: Tabela de Transformadas\nTable of Laplace and Z-transforms\n\t\tx(t)\tx(kT) or x(k)\tX(z)\n1.\t-\t-\tKronecker delta \u00bf0(k) 1\tk = 0 0\tk * 0\t1\n2.\t-\t-\tSJin-k) 1\tn = k 0\tn k\t-k z\n3.\t1 s\t1(t)\t1(k)\t1 1 - z-\n4.\t1 s + a\tei-a\te-atT\t1 1 - e-aIz-'\n5.\t1\tt\tkT\tTz-1 (1 - z)2\n6.\t2 s\tt\t(kT)2\tT3 z(1 + z) (1- z)\n7.\t6\tt\t(kT)3\tT3 z(1+ 4z-1 + z-) (1-z)\n8.\ta s(s + a)\t1 - ea\t1 \u2014 e-'\t(1 - z\u00b0- J2 (1 - z-1 )l e z-1)\n9.\tb - a\t-at\t-bt e \u2014 e\t-akT\t-bkT e \u2014 e\t(-a - e~ib ]z-1\n\t(s + a)s + b)\t\t\t(1 - e\tz)1- e-bTz)\n10.\t1 (s + a)2\t. -at te\tkTe-aiT\tTe~-az _l (1-(\t)\n11.\ts (s + a)2\t(1 - af)e~at\t(1 - ak'Te-'\t1-(1+ aT ) T (1-(\t-)\n12.\t2 (4\t2 -at te\t(kT)2eatT\tT z ' (1 + e a:- ) (-e-Tz- )3\n13.\t2 a\tat - 1 + e\"at\takT - 1 + e'\"\t|(aT -1+ e~ar )+ (1- e~aT - aTe~-r )z 1 |z 1\n\ts2 (s + a)\t\t\t(-z 4 (-e\tz-\u25a0)\n14.\ta s2 + a2\tsin at\tsin akT\tz-1 sin aT 1-2z 1 cosaT + z-2\n15.\ts s2 + a2\tcos at\tcos akT\t1- z_1 cosaT 1-2z 1 cosaT + z-2\n16.\ta (s + a)2 + a2\te-at sin at\te~-a'T sin aT\te~-a z _1 sin aT 1-2e~aa z 1 cosaT + e ~2aa z ~2\n17.\ts+a (s + a)2 + a2\te-at cos at\te-ak cos akT\t1-e~aa z _1 cosaT 1-h^zcosaT + ez~2\n18.\t-\t-\ta\t1 1\t-1 1 - az\n19.\t-\t-\tII\t-1 z 1\t-1 1- az\n20.\t-\t-\tkat-\u2018\tz-1 (1- az-\u25a0 )2\n21.\t-\t-\tj 2 k-1 ka\tz _1 (1 + az _1) (1- az-1)3\n22.\t-\t-\t,3 k-1 ka\tz_l (1+ 4az_l + a2z-2) (1 - az)\n23.\t-\t-\t,4 k-1 ka\tz _l (1 + 11az _l + 11a2 z-2 + a3 z-3) (1- az-\u25a0 )5\n24.\t-\t-\ta cos kn\t1 1+ az -1\nx(t) = 0\tfor t &lt;0\nx(kT) = x(k) = 0 for k &lt;0\nUnless otherwise noted, k = 0, 1, 2, 3, ..."}]}}}