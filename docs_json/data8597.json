{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.11823"}, {"@name": "filename", "#text": "17246_MestradoRa%c3%balAndrade.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "ORIENTA\u00c7\u00c3O\nEduardo Leopoldo Ferm\u00e9\n\nLu\u00eds Armando de Aguiar Oliveira Gomes\n\nRa\u00fal Duarte N\u00f3brega Andrade\nMESTRADO EM ENGENHARIA INFORM\u00c1TICA\n\nCria\u00e7\u00e3o de uma Esta\u00e7\u00e3o de Testes para um\nMicro-Helic\u00f3ptero Aut\u00f3nomo\nDISSERTA\u00c7\u00c3O DE MESTRADO \n\n\n\nii \n \n\n  \n\n\n\niii \n \n\nResumo \n\nOs UAV (Unmaned Air Vehicles) t\u00eam sido cada vez mais utilizados em v\u00e1rios ramos, como \n\na geologia, a seguran\u00e7a p\u00fablica, a rob\u00f3tica e na obten\u00e7\u00e3o de imagens. Visto existir grande \n\ninteresse no uso do equipamento, foi comprado um quadcopter com o objetivo poder torn\u00e1-\n\nlo o mais aut\u00f3nomo poss\u00edvel. Esta tese cont\u00e9m informa\u00e7\u00f5es dos elementos utilizados nesse \n\nArducopter e ainda a informa\u00e7\u00e3o dos sensores que podem ser adaptados ao mesmo. Explica \n\ntamb\u00e9m como est\u00e1 estruturado todo o c\u00f3digo e como o UAV pode ser configurado antes do \n\nvoo. S\u00e3o tamb\u00e9m apresentados todos os resultados obtidos dos primeiros voos e as \n\nevolu\u00e7\u00f5es e altera\u00e7\u00f5es ap\u00f3s cada teste. \n\n\n\niv \n \n\n  \n\n\n\nv \n \n\nAbstract \n\nUAVs (Unmaned Air Vehicles) are being used more frequently in a variety of areas, like \n\ngeology, public security, robotics and image acquisition. As a result of such demand for \n\nthis kind of equipment, a quadcopter was bought with the aim of making it more \n\nautonomous. This thesis presents information about the elements used on the Arducopter \n\nand information about the sensors that can be adapted to it. It explains how the code is \n\nstructured and how the Arducopter must be configured before flight. It also presents all the \n\nresults obtained on each test flight and the upgrades that were then implemented.  \n\n\n\nvi \n \n\n  \n\n\n\nvii \n \n\nAgradecimentos \n\nGostaria de agradecer \u00e0 minha fam\u00edlia e namorada, por todo o apoio e motiva\u00e7\u00e3o que me \n\nderam. \n\nAgrade\u00e7o a todos os meus colegas, que ajudaram na documenta\u00e7\u00e3o dos voos do \n\nArducopter. \n\nAgrade\u00e7o ao Engenheiro Filipe e aos restantes alunos que se encontravam no laborat\u00f3rio, \n\npela ajuda que deram-me no desenvolvimento da minha tese. \n\nAgrade\u00e7o aos meus orientadores, o Professor Eduardo Ferm\u00e9 e o Professor Lu\u00eds Gomes por \n\ntoda a orienta\u00e7\u00e3o que deram-me durante este ano. \n\n\n\nviii \n \n\n  \n\n\n\nix \n \n\n\u00cdndice \nResumo .................................................................................................................................. iii \n\nAbstract ................................................................................................................................... v \n\nAgradecimentos .................................................................................................................... vii \n\n\u00cdndice de Figuras ................................................................................................................. xiv \n\nAcr\u00f3nimos .......................................................................................................................... xvii \n\n1-Introdu\u00e7\u00e3o ........................................................................................................................... 1 \n\n1.1-Motiva\u00e7\u00e3o ..................................................................................................................... 2 \n\n1.2-Objetivos ...................................................................................................................... 2 \n\n1.3-Contribui\u00e7\u00f5es ............................................................................................................... 2 \n\n1.4-Estrutura do documento ............................................................................................... 3 \n\n2-Estado da Arte ..................................................................................................................... 5 \n\n2.1-Funcionalidade dos UAV ............................................................................................. 5 \n\n2.1.1-Seguran\u00e7a P\u00fablica ................................................................................................. 5 \n\n2.1.2-Geologia e Arqueologia ........................................................................................ 7 \n\n2.1.3-Aquisi\u00e7\u00e3o de imagens a\u00e9reas................................................................................. 9 \n\n2.1.4-Rob\u00f3tica ................................................................................................................ 9 \n\n3-Explica\u00e7\u00e3o geral do sistema .............................................................................................. 12 \n\n4- Descri\u00e7\u00e3o do Arducopter .................................................................................................. 14 \n\n4.1-APM (ArduPilot Mega) .............................................................................................. 14 \n\n4.1.1-Alimenta\u00e7\u00e3o da placa .......................................................................................... 15 \n\n4.1.2-Descri\u00e7\u00e3o da placa APM1 ................................................................................... 16 \n\n4.1.3-Descri\u00e7\u00e3o da placa oilpan ................................................................................... 16 \n\n4.1.5-Descri\u00e7\u00e3o da APM2 ............................................................................................ 19 \n\n4.2-Estrutura do quadcopter ............................................................................................. 20 \n\n\n\nx \n \n\n4.2.1-Diferen\u00e7as entre a estrutura em x ou em + .......................................................... 21 \n\n4.2.2-Trem de aterragem (estrutura de aterragem) ....................................................... 21 \n\n4.3-Motores/ESC (eletronic speed controls) /H\u00e9lices ...................................................... 24 \n\n4.4-R\u00e1dio transmissor e recetor ........................................................................................ 24 \n\n4.4.1-R\u00e1dio transmissor ................................................................................................ 24 \n\n4.4.2-R\u00e1dio recetor ....................................................................................................... 25 \n\n4.5-Bateria e carregador ................................................................................................... 26 \n\n4.5.1-Bateria ................................................................................................................. 26 \n\n4.5.2-Carregador ........................................................................................................... 27 \n\n4.6-Sensores ...................................................................................................................... 28 \n\n4.6.1-Magnet\u00f3metro ..................................................................................................... 28 \n\n4.6.2-GPS (Global Positioning System) ....................................................................... 31 \n\n4.6.3-Sonar (sensor ultrass\u00f3nico) ................................................................................. 31 \n\n5- Software e programa\u00e7\u00e3o ................................................................................................... 34 \n\n5.1-Software ...................................................................................................................... 34 \n\n5.2-Programa\u00e7\u00e3o em Arduino .......................................................................................... 34 \n\n5.3-Descri\u00e7\u00e3o do c\u00f3digo ................................................................................................... 36 \n\n5.3.1-Pasta Libraries ..................................................................................................... 36 \n\n5.3.2-Pasta Arducopter ................................................................................................. 36 \n\n6-APM Mission Planner ....................................................................................................... 42 \n\n6.1-O que \u00e9 a Ground Control Station ............................................................................. 43 \n\n6.1.1-Utilizar o Mission Planner ground station .......................................................... 43 \n\n6.2-Defini\u00e7\u00e3o de waypoints atrav\u00e9s de um editor point and click .................................... 44 \n\n6.2.1-Comandos b\u00e1sicos de waypoint .......................................................................... 44 \n\n\n\nxi \n \n\n6.2.2-Carregar um voo aut\u00f3nomo para a placa APM quando n\u00e3o dispomos de um \n\nsistema de telemetria sem fios ...................................................................................... 46 \n\n6.3-Fazer download e an\u00e1lise dos ficheiros log ................................................................ 46 \n\n6.3.1-Fazer download ................................................................................................... 46 \n\n6.3.2-Analisar os ficheiros log ...................................................................................... 46 \n\n6.4-utiliza\u00e7\u00e3o de um gamepad /joystick para controlar o Arducopter manualmente em vez \n\ndo controlo remoto............................................................................................................ 47 \n\n6.5-Scripting em Phyton ................................................................................................... 47 \n\n6.6-Controlo atrav\u00e9s do terminal CLI .............................................................................. 48 \n\n6.6.1-Como configurar o Arducopter atrav\u00e9s do CLI .................................................. 50 \n\n7-Configura\u00e7\u00f5es Pr\u00e9-voo ...................................................................................................... 52 \n\n7.1-Como funciona o sistema do Arducopter ................................................................... 52 \n\n7.2-Voo ............................................................................................................................. 53 \n\n7.3-Seguran\u00e7a ................................................................................................................... 55 \n\n7.4-Armar e desarmar os motores..................................................................................... 56 \n\n7.5-Calibra\u00e7\u00f5es dos aceler\u00f3metros atrav\u00e9s do controlo remoto ....................................... 58 \n\n7.6-Primeiro Voo .............................................................................................................. 58 \n\n7.7-Calibra\u00e7\u00e3o dos controladores ESC ............................................................................. 59 \n\n7.7.1-Calibra\u00e7\u00e3o autom\u00e1tica ......................................................................................... 59 \n\n7.7.2-Calibra\u00e7\u00e3o Manual .............................................................................................. 60 \n\n7.7.3-Testes ................................................................................................................... 60 \n\n7.8-Afina\u00e7\u00f5es dos par\u00e2metros do controlador PID .......................................................... 60 \n\n7.9-Primeira configura\u00e7\u00e3o do Arducopter ........................................................................ 61 \n\n7.10-Failsafe ..................................................................................................................... 62 \n\n8-Voos de teste e resultados ................................................................................................. 64 \n\n9-Conclus\u00f5es e trabalhos futuros .......................................................................................... 69 \n\n\n\nxii \n \n\n9.1-Conclus\u00f5es ................................................................................................................. 69 \n\n9.2-Contribui\u00e7\u00f5es ............................................................................................................. 69 \n\n9.3- Trabalhos futuros....................................................................................................... 69 \n\nRefer\u00eancias Bibliogr\u00e1ficas .................................................................................................... 71 \n\nAnexos .................................................................................................................................. 79 \n\nAnexo A-Manual de montagem do Arducopter ................................................................... 80 \n\nA.1-Montagem da placa Arduino ..................................................................................... 80 \n\nA.2-Soldagem dos conetores dos ESC (Electronics speed controls) (conetor f\u00eamea) e os \n\nconetores dos motores (Conetor macho). ......................................................................... 83 \n\nA.3-Montagem da placa de distribui\u00e7\u00e3o de energia ......................................................... 83 \n\nAnexo B-Montagem da estrutura do Arducopter ................................................................. 87 \n\nB.1 \u2013 Montagem da sec\u00e7\u00e3o central ................................................................................... 87 \n\nB.2-Trem de Aterragem .................................................................................................... 91 \n\nB.3-Montagem dos motores nos bra\u00e7os ........................................................................... 93 \n\nB.4-Conex\u00e3o dos ESC aos motores .................................................................................. 96 \n\nB.5-Liga\u00e7\u00e3o do controlo de r\u00e1dio \u00e0 APM......................................................................... 97 \n\nB.6-Liga\u00e7\u00e3o do controlo remoto ....................................................................................... 98 \n\nB.7-Instala\u00e7\u00e3o do recetor de controlo remoto .................................................................. 99 \n\nAnexo C-Montagem de sensores opcionais........................................................................ 100 \n\nC.1-Sensor de infravermelhos ........................................................................................ 100 \n\nC.2-Sensor \u00f3tico de fluxo (optical flow) ........................................................................ 100 \n\nC.2.1-Como ligar o sensor \u00e0 placa .............................................................................. 100 \n\nC.2.2-Como manter a posi\u00e7\u00e3o do Arducopter em voo ............................................... 101 \n\nC.3-Telemetria sem fios ................................................................................................. 102 \n\nC.3.1-3DR Radio ........................................................................................................ 103 \n\n\n\nxiii \n \n\nC.3.2-Xbee .................................................................................................................. 104 \n\nC.4-Gymbal da c\u00e2mara ................................................................................................... 105 \n\nC.4.1-Instalar o gymbal da c\u00e2mara ............................................................................. 105 \n\nC.4.2-Como ligar os servos do gymbal ...................................................................... 106 \n\nC.5-Placa On-Screen Display (OSD) ............................................................................. 107 \n\nC.6-Monitor de bateria ................................................................................................... 107 \n\nAnexo D-Afina\u00e7\u00f5es dos termos PID .................................................................................. 109 \n\n \n\n  \n\n\n\nxiv \n \n\n\u00cdndice de Figuras \n\nFigura 1- Placa APM V.1 [29] ............................................................................................. 15 \n\nFigura 2 -Imagem ilustrativa de como configurar a alimenta\u00e7\u00e3o da placa [30] ................... 15 \n\nFigura 3 - Arquitetura da placa APM [30] ........................................................................... 16 \n\nFigura 4 - Placa APM Shield [31] ........................................................................................ 17 \n\nFigura 5 - Ilustra\u00e7\u00e3o dos v\u00e1rios leds da oilpan[33] .............................................................. 18 \n\nFigura 6 - Placa APM2 [34] ................................................................................................. 20 \n\nFigura 7- Indica\u00e7\u00e3o da rota\u00e7\u00e3o das h\u00e9lices quando configuradas em + e em x [37] ............ 21 \n\nFigura 8- Exemplo do trem de aterragem da estrutura dos diydrones [38] .......................... 22 \n\nFigura 9 - Exemplo do trem de aterragem da estrutura 3DR [39] ........................................ 22 \n\nFigura 10- Exemplo de um trem de aterragem de uma estrutura nova [40] ......................... 23 \n\nFigura 10 - Pernas impressas na impressora 3D ................................................................... 24 \n\nFigura 12 - Emissor de controlo remoto e movimentos correspondentes ............................ 25 \n\nFigura 13 -Recetor de controlo remoto................................................................................. 26 \n\nFigura 14 -Bateria LiPo do arducopter ................................................................................. 26 \n\nFigura 15 - Carregador de bateria ......................................................................................... 27 \n\nFigura 16 - Imagem ilustrativa de como carregar ................................................................. 28 \n\nFigura 17- Montagem do magnet\u00f3metro atrav\u00e9s do m\u00e9todo 1 [41] ..................................... 29 \n\nFigura 18 - Liga\u00e7\u00e3o do cabo ao magnet\u00f3metro atrav\u00e9s do m\u00e9todo 2 [41] ........................... 30 \n\nFigura 19- Montagem do magnet\u00f3metro atrav\u00e9s do m\u00e9todo 2 ............................................. 30 \n\nFigura 20 - Conex\u00e3o do GPS \u00e0 placa APM [42] .................................................................. 31 \n\nFigura 21- Liga\u00e7\u00e3o do sonar \u00e0 placa APM ........................................................................... 32 \n\nFigura 22 - Ilustra\u00e7\u00e3o sobre a conex\u00e3o dos v\u00e1rios pins do sonar [43].................................. 33 \n\nFigura 23 - Diagrama contendo os v\u00e1rios ficheiros do c\u00f3digo agrupados segundo as suas \n\nfuncionalidades ..................................................................................................................... 40 \n\nFigura 24 - Diagrama com as fun\u00e7\u00f5es de cada subloop do loop principal ........................... 41 \n\nFigura 25 - V\u00e1rios movimento poss\u00edveis para um quadcopter com estrutura em + [8] ....... 53 \n\nFigura 26 \u2013 Liga\u00e7\u00e3o do cabo de sinal dos motores \u00e0 APM [66] .......................................... 57 \n\nFigura 27 - Indica\u00e7\u00e3o dos comandos do controlo remoto em modo 2 [65] .......................... 57 \n\nFigura 28 - Helic\u00f3ptero inclinando-se ao andar numa dire\u00e7\u00e3o ............................................. 65 \n\n\n\nxv \n \n\nFigura 29 - Nova disposi\u00e7\u00e3o das h\u00e9lices .............................................................................. 66 \n\nFigura 30 - Bot\u00e3o utilizado para mudar o modo de voo do Arducopter ............................... 67 \n\nFigura 31 - Arducopter em voo no modo Alt Hold .............................................................. 68 \n\nFigura 32- Kit de montagem da placa APM [42] ................................................................. 80 \n\nFigura 33 - Headers necess\u00e1rios [42] ................................................................................... 81 \n\nFigura 34 - Placa APM com os headers de 90? soldados [42] ............................................. 81 \n\nFigura 35 - Coloca\u00e7\u00e3o dos restantes headers [42] ................................................................ 81 \n\nFigura 36 - Headers soldados na placa [42] ......................................................................... 82 \n\nFigura 37 - Placa APM totalmente montada [42] ................................................................. 82 \n\nFigura 38 - Imagem ilustrativa de como soldar os header pins [73] .................................... 83 \n\nFigura 39 - Imagem ilustrativa de como preencher a placa com solda [73] ......................... 83 \n\nFigura 40 - Imagem ilustrativa de como conectar os cabos de alimenta\u00e7\u00e3o da bateria [73] 84 \n\nFigura 41 - Imagem ilustrativa de como soldar os cabos de sinal \u00e0 placa de distribui\u00e7\u00e3o de \n\nenergia [73] ........................................................................................................................... 84 \n\nFigura 42 - Imagem ilustrativa de como soldar a alimenta\u00e7\u00e3o da placa APM [73] ............. 85 \n\nFigura 43 - Imagem ilustrativa de como soldar os conetores dos ESC \u00e0 placa APM[73] .... 85 \n\nFigura 44 - Resultado final da instala\u00e7\u00e3o da placa de distribui\u00e7\u00e3o de energia ..................... 86 \n\nFigura 45 - Montagem das placas da estrutura base [24] ..................................................... 88 \n\nFigura 46 - Parte final da montagem da estrutura base ........................................................ 88 \n\nFigura 47 - Montagem dos bra\u00e7os \u00e0 estrutura ...................................................................... 89 \n\nFigura 48 - Montagem do suporte de bateria ........................................................................ 89 \n\nFigura 49 - Montagem da placa de distribui\u00e7\u00e3o de energia \u00e0 estrutura ................................ 90 \n\nFigura 50 - Montagem da placa APM \u00e0 estrutura [24] ......................................................... 90 \n\nFigura 51 - Montagem da placa APM \u00e0 estrutura ................................................................ 91 \n\nFigura 52 - Dome protetor dos componentes de hardware [24] .......................................... 92 \n\nFigura 53 - Pe\u00e7a substituta \u00e0s pernas existentes no kit de montagem .................................. 92 \n\nFigura 54 - Novas pernas criadas na impressora 3D ............................................................ 93 \n\nFigura 55 - Montagem dos motores nos bra\u00e7os .................................................................... 93 \n\nFigura 56 - Passagem dos fios do motor pelos bra\u00e7os do Arducopter [33] .......................... 94 \n\nFigura 57 - Passos para montar as h\u00e9lices no motor ............................................................ 94 \n\nFigura 58 - Montagem das h\u00e9lices nos motores ................................................................... 95 \n\n\n\nxvi \n \n\nFigura 59 - Escolha correta das h\u00e9lices segundo o tipo de estrutura em + ou em x [37] ..... 96 \n\nFigura 60 - Configura\u00e7\u00e3o da conex\u00e3o dos ESC aos motores ............................................... 97 \n\nFigura 61 - Instala\u00e7\u00e3o do controlo de r\u00e1dio \u00e0 placa APM [66] ............................................ 97 \n\nFigura 62 - Liga\u00e7\u00e3o dos canais do recetor \u00e0 placa APM ...................................................... 99 \n\nFigura 63- Sensor infravermelho SharpGP2Y [75] ............................................................ 100 \n\nFigura 64- Instala\u00e7\u00e3o do optical flow na placa APM1 [76] ................................................ 101 \n\nFigura 65- Liga\u00e7\u00e3o do 3DRadio \u00e0 placa APM [78]............................................................ 103 \n\nFigura 66 - Liga\u00e7\u00e3o do Xbee \u00e0 placa APM V1 [80] ........................................................... 104 \n\nFigura 67 - Exemplo da montagem do gymbal da c\u00e2mara ................................................. 106 \n\nFigura 68 - Canais de output para roll e pitch da c\u00e2mara [81] ........................................... 106 \n\nFigura 69 - Exemplo de um OSD (on screen display) [82] ................................................ 107 \n\nFigura 70 - Imagem ilustrativa de como conectar o sensor AttoPilot [35]......................... 108 \n\n \n\n  \n\n\n\nxvii \n \n\nAcr\u00f3nimos \n\n3D   3 Dimens\u00f5es \n\n3DR   3D Robotics \n\nAPM   ArduPilot Mega \n\nBEC   Brushless Eletronic Speed Controller \n\nCLI   Command Line Interpreter \n\nCTT                Correios Tel\u00e9grafos e Telefones \n\nDIP   Dual In-line Package \n\nESC   Eletronic Speed Controls \n\nFPGA  Field-Programmable Gate Array \n\nFPV   Fist Person View \n\nFTDI   Future Technology Devices International \n\nGCS  Ground Control Station \n\nGND  Ground \n\nGPS   Global Positioning System \n\nHALE   High Altitude Long Endurance \n\nHIL   Hardware In-the-Loop \n\nHUD  Heads Up Display \n\nI2C   Inter-Integrated Circuit \n\nIDE   Integrated Development Environment \n\nIMU   Inertial Measurement Unit \n\n\n\nxviii \n \n\nLiPo   Litium Polymers \n\nMAV   Micro Air Vehicle \n\nOSD   On Screen Display \n\nPDB   Power Distribution Board \n\nPID   Proportional Integral Derivative \n\nPWM   Pulse Width Modulation \n\nRTL   Return To Launch \n\nUAV   Unmaned Air Vehicles \n\nUSB   Universal Serial Bus \n\nVTOL   Vertical TakeOff and Landing \n\n\n\n1 \n \n\n1-Introdu\u00e7\u00e3o \n\nOs UAV (Unamaned Air Vehicles) s\u00e3o aeronaves n\u00e3o tripuladas. Este conceito foi \n\ndesenvolvido por equipas militares dos Estados Unidos da Am\u00e9rica, pois permitia a \n\nobserva\u00e7\u00e3o do campo dos inimigos sem existirem baixas a n\u00edvel de vidas humanas caso a \n\naeronave fosse atingida [1]. Ap\u00f3s v\u00e1rios anos de investiga\u00e7\u00e3o neste campo, foram criados \n\nos mais variados tipos de aeronaves capazes de voar sem um piloto fisicamente presente na \n\naeronave. \n\nAs v\u00e1rias aeronaves foram categorizadas segundo v\u00e1rias classifica\u00e7\u00f5es, de acordo com as \n\nsuas caracter\u00edsticas em voo. As aeronaves de asa fixa, mais conhecidas como avi\u00f5es, eram \n\nmovidas quer por motores com h\u00e9lices, quer por motores a jato. Devido \u00e0s suas limita\u00e7\u00f5es, \n\nas imagens capturadas por este tipo de aeronaves n\u00e3o eram muito n\u00edtidas pois n\u00e3o eram \n\ncapazes de pairar no mesmo s\u00edtio e tinham que voar a grande altitude para poderem de certa \n\nforma circundar o alvo a ser observado [1,2]. \n\n Foram ent\u00e3o criados os VTOL (Vertical TakeOff and Landing), que permitiam um voo \n\nnuma altitude mais baixa conseguindo uma melhor qualidade de imagem, assim como \n\npodiam descolar e aterrar em qualquer superf\u00edcie sem necessitar de pistas [1,2]. \n\nTamb\u00e9m atrav\u00e9s do desenvolvimento deste equipamento, o tamanho das aeronaves foi \n\nficando cada vez mais pequeno, tornando tamb\u00e9m a sua constru\u00e7\u00e3o mais barata e a sua \n\ndivulga\u00e7\u00e3o maior. Passaram de motores de combust\u00edvel f\u00f3ssil a el\u00e9tricos utilizando \n\nbaterias, devido a serem mais pequenos e leves e passaram a ser tamb\u00e9m utilizados em voos \n\nem espa\u00e7os fechados, em vez de apenas ao ar livre e c\u00e9u aberto [1,2]. \n\nDentro dos VTOL, tentaram desenvolver a estrutura dos mesmos de forma a melhorar a \n\nperformance em voo e conseguirem suportar carga, de forma a transportar sensores para as \n\nmais variadas an\u00e1lises e miss\u00f5es. Assim evolu\u00edram do helic\u00f3ptero tradicional para uma \n\nestrutura mais est\u00e1vel: os multic\u00f3pteros, que possu\u00edam desde 4 a 8 motores equidistantes do \n\ncentro, proporcionando um maior poder de eleva\u00e7\u00e3o e um voo mais est\u00e1vel [1,2]. \n\n\n\n2 \n \n\n1.1-Motiva\u00e7\u00e3o \nEste projeto \u00e9 novo nesta universidade. \u00c9 tamb\u00e9m desafiante, pois \u00e9 necess\u00e1rio ter \n\nconhecimentos de v\u00e1rias \u00e1reas: Na inform\u00e1tica, para se poderem criar novos programas \n\npara melhor configurar o equipamento e ter um c\u00f3digo mais f\u00e1cil de alterar; Na eletr\u00f3nica, \n\npois \u00e9 necess\u00e1rio saber instalar e personalizar os sensores do equipamento; Em intelig\u00eancia \n\nartificial, pois \u00e9 necess\u00e1rio saber tornar o equipamento o mais aut\u00f3nomo poss\u00edvel. Tamb\u00e9m \n\nos ramos do acesso remoto e das comunica\u00e7\u00f5es, s\u00e3o explorados de forma a controlar o \n\nquadcopter num espa\u00e7o mais distante e com a melhor qualidade poss\u00edvel.  \n\n1.2-Objetivos \nOs objetivos para esta tese passaram principalmente por criar uma boa esta\u00e7\u00e3o de testes e \n\numa boa documenta\u00e7\u00e3o, para que em projetos futuros utilizando este equipamento n\u00e3o seja \n\nnecess\u00e1ria uma pesquisa exaustiva para tentar perceber como o equipamento funciona, \n\ncomo deve ser montado, quais as capacidades do mesmo e que sensores podem ser \n\nadicionados. O segundo objetivo foi tentar desenvolver pequenos programas e equipar o \n\nve\u00edculo com mais sensores, de maneira a que este seja mais f\u00e1cil de controlar por parte do \n\noperador e para que exista uma maior seguran\u00e7a em caso de falhas. Serve tamb\u00e9m para \n\nevitar com que ocorram acidentes em voo e por fim para que se criem miss\u00f5es para o \n\nArducopter desempenh\u00e1-las autonomamente. \n\n1.3-Contribui\u00e7\u00f5es  \n\nUma vez que esta tese fornece uma boa esta\u00e7\u00e3o de trabalho, com toda a informa\u00e7\u00e3o \n\nnecess\u00e1ria para o voo do equipamento, v\u00e1rios outros projetos podem ser aplicados ao \n\nhelic\u00f3ptero em v\u00e1rias \u00e1reas, como a eletr\u00f3nica, a inform\u00e1tica e a intelig\u00eancia artificial. \n\nNeste sentido, o trabalho n\u00e3o representa uma contribui\u00e7\u00e3o significativa em nenhuma destas \n\n\u00e1reas, mas uma s\u00f3lida base de trabalho, que suportar\u00e1 futuros projetos nessas \u00e1reas.  \n\n \n \n\n \n\n\n\n3 \n \n\n1.4-Estrutura do documento \nA tese est\u00e1 estruturada da seguinte forma: \n\n\u2022 A sec\u00e7\u00e3o 1 \u201cIntrodu\u00e7\u00e3o\u201d apresenta uma breve apresenta\u00e7\u00e3o do trabalho e estrutura \n\ndesta disserta\u00e7\u00e3o. \n\n\u2022 A sec\u00e7\u00e3o 2 \u201cEstado da arte\u201d apresenta as capacidades dos UAV nas mais variadas \n\n\u00e1reas, como seguran\u00e7a p\u00fablica, geologia, obten\u00e7\u00e3o de imagens e rob\u00f3tica. \n\n\u2022 A sec\u00e7\u00e3o 3 \u201cExplica\u00e7\u00e3o geral do sistema\u201d apresenta um resumo do funcionamento \n\ndo sistema do Arducopter. \n\n\u2022 A sec\u00e7\u00e3o 4 \u201cDescri\u00e7\u00e3o do Arducopter\u201d indica todos os sensores e componentes \n\nexistentes no Arducopter e todos os componentes de hardware que podem ser \n\nadicionados. Tamb\u00e9m explica a instala\u00e7\u00e3o de cada um dos componentes. \n\n\u2022 A sec\u00e7\u00e3o 5 \u201cSoftware e programa\u00e7\u00e3o\u201d descreve como programar em Arduino e \n\nindica como est\u00e1 estruturado o c\u00f3digo e as principais fun\u00e7\u00f5es de cada ficheiro. \n\n\u2022 A sec\u00e7\u00e3o 6 \u201cAPM Mission Planner\u201d, explica como utilizar a ferramenta do Mission \n\nPlanner, para a configura\u00e7\u00e3o dos controlos de voo, para an\u00e1lise de ficheiros log, \n\ncomo criar miss\u00f5es de voo aut\u00f3nomo e como usar as op\u00e7\u00f5es do terminal CLI. \n\n\u2022 A sec\u00e7\u00e3o 7 \u201cConfigura\u00e7\u00f5es Pr\u00e9-voo\u201d indica tudo o que \u00e9 necess\u00e1rio saber configurar \n\nantes de efetuar um voo. \n\n\u2022 A sec\u00e7\u00e3o 8 \u201cVoos de teste e resultados\u201d, apresenta a evolu\u00e7\u00e3o que existiu com o \n\nequipamento, durante os voos de teste e as altera\u00e7\u00f5es feitas ao helic\u00f3ptero para \n\nsolucionar os problemas dos voos de teste anteriores. \n\n\u2022 A sec\u00e7\u00e3o 9 \u201cConclus\u00f5es e trabalhos futuros\u201d descreve as conclus\u00f5es tiradas ap\u00f3s os \n\nvoos, que contribui\u00e7\u00f5es foram feitas e que trabalhos futuros poder\u00e3o ser realizados. \n\n\u2022 O anexo A \u201cManual de montagem do Arducopter\u201d descreve os passos de montagem \n\nda placa APM, a soldagem dos conetores dos controladores ESC e motores, e \n\nmontagem da placa de distribui\u00e7\u00e3o de energia. \n\n\u2022 O anexo B \u201cMontagem da estrutura do Arducopter\u201d descreve todos os passos para \n\nmontagem da estrutura do Arducopter como: sec\u00e7\u00e3o central da estrutura; trem de \n\naterragem; bra\u00e7os; motores e controladores; liga\u00e7\u00e3o dos cabos de entrada e sa\u00edda da \n\nplaca APM aos motores e recetor de r\u00e1dio. \n\n\n\n4 \n \n\n\u2022 O anexo C \u201cMontagem de sensores opcionais\u201d apresenta a informa\u00e7\u00e3o dos sensores \n\nadicionais que podem ser adicionados ao Arducopter, mas que ainda n\u00e3o se \n\nencontram instalados, no helic\u00f3ptero da Universidade. \n\n\u2022 O Anexo D \u201cAfina\u00e7\u00e3o dos termos PID\u201d apresenta as poss\u00edveis afina\u00e7\u00f5es dos \n\npar\u00e2metros do controlador PID (Proportional Integral Derivative) para uma melhor \n\nestabilidade em voo. \n\n  \n\n\n\n5 \n \n\n2-Estado da Arte \n\n2.1-Funcionalidade dos UAV \nOs quadcopters ou UAV em miniatura abrangem v\u00e1rios campos, como na \u00e1rea militar e de \n\nseguran\u00e7a p\u00fablica. T\u00eam como fun\u00e7\u00f5es o desempenho de tarefas tais como a busca e \n\nsalvamento de pessoas, a vigil\u00e2ncia e persegui\u00e7\u00e3o em caso de roubo, a an\u00e1lise de acidentes \n\nde via\u00e7\u00e3o [3] e o aux\u00edlio na dete\u00e7\u00e3o de fogo para preven\u00e7\u00e3o de inc\u00eandios [4]. No campo da \n\ngeologia, usando c\u00e2maras t\u00e9rmicas, c\u00e2maras de infravermelhos, podem ser capazes de \n\nanalisar terrenos agr\u00edcolas [5], taludes (verificando se estes causam perigo \u00e0s zonas mais \n\nbaixas), permitem a an\u00e1lise a estruturas de edif\u00edcios (desde pilares ou vigas que se \n\nencontram a grande altitude) [6]. No campo da aquisi\u00e7\u00e3o de imagens s\u00e3o usados \n\nessencialmente para fazer captura de imagens, de forma a obter-se uma vista geral e mais \n\nabrangente ou para uma filmagem a\u00e9rea [6]. No campo da rob\u00f3tica, servem para melhorar o \n\nequipamento atrav\u00e9s de simula\u00e7\u00f5es [7], de forma a estarem preparados para grande parte \n\ndas situa\u00e7\u00f5es, para que consigam voar em condi\u00e7\u00f5es menos favor\u00e1veis, sejam mais est\u00e1veis \n\n[8], mais aut\u00f3nomos, necessitando cada vez menos da interven\u00e7\u00e3o humana nos seus voos e \n\npara que dependam \u00fanica e exclusivamente dos seus pr\u00f3prios sensores para o desempenho \n\nde miss\u00f5es [9,10]. \n\n2.1.1-Seguran\u00e7a P\u00fablica \n\nNo campo da seguran\u00e7a p\u00fablica foram desenvolvidos equipamentos [11] para a vigil\u00e2ncia \n\nde edif\u00edcios ou de centros comerciais, e tamb\u00e9m para o resgate e salvamentos depois de \n\ncat\u00e1strofes, como terramotos, explos\u00f5es, entre outros. Devido a terem um tamanho \n\nreduzido, estes poderiam chegar \u00e0s v\u00edtimas em espa\u00e7os apertados e al\u00e9m de encontrar as \n\nv\u00edtimas podiam ainda obter um mapa de como chegar com as equipas de salvamento at\u00e9 a \n\nessas pessoas.  \n\nNo artigo [11] foi criado um ambiente de simula\u00e7\u00e3o em que se utilizava um controlador de \n\ndete\u00e7\u00e3o de obst\u00e1culos. Segundo o artigo, no uso de OS4 (um modelo de um quadcopter) \n\natrav\u00e9s desse controlador o helic\u00f3ptero conseguiu alterar a trajet\u00f3ria sem alterar a sua \n\naltitude e o seu \u00e2ngulo de yaw (rota\u00e7\u00e3o do helic\u00f3ptero para a esquerda/direita). \n\n\n\n6 \n \n\nDe maneira semelhante o artigo [12] fala sobre um voo aut\u00f3nomo efetuado num espa\u00e7o \n\ninterior. O sistema utiliza sensores e algoritmos utilizados anteriormente em rob\u00f4s terrestes. \n\nOs criadores lan\u00e7aram o sistema como um software open-source para providenciar uma \n\ncomunidade com novos frameworks para construir aplica\u00e7\u00f5es para rob\u00f4s interior, visto \n\nmuitas das propostas existentes serem exclusivamente para exterior [10].  \n\nO artigo [12] defende que qualquer algoritmo para rob\u00f4s terrestes pode ser convertido para \n\nrob\u00f4s a\u00e9reos, mas que essa convers\u00e3o \u00e9 dif\u00edcil pois s\u00e3o aparelhos diferentes com graus de \n\nliberdade diferentes. Um ve\u00edculo a\u00e9reo tem mais complexidade de movimentos e n\u00e3o pode \n\ntransportar grande peso de sensores como um ve\u00edculo terrestre. A forma que os autores \n\nutilizaram foi tentar manter o helic\u00f3ptero a uma certa altitude voando de forma a tentar \n\ncriar um mapa a 2 dimens\u00f5es, para assim poder criar um mapa por onde pudesse estimar a \n\nsua posi\u00e7\u00e3o e navegar dentro do mapa [12].  \n\nEm [10] utilizam um quadcopter, que disp\u00f5e de um sonar para a altitude e de sensores \n\ninfravermelhos para a dete\u00e7\u00e3o de obst\u00e1culos. S\u00e3o ent\u00e3o feitos 3 testes numa sala de 6x7 \n\nmetros. No primeiro teste o quadcopter levantou voo, pairou no ar e de seguida aterrou. No \n\nsegundo teste o quadcopter levantou voo e seguiu numa dire\u00e7\u00e3o aleat\u00f3ria evitando a colis\u00e3o \n\ncom uma das 4 paredes da sala. No terceiro teste o quadcopter tentou manter-se no meio da \n\nsala sem se desviar do centro da sala. Todos os testes foram feitos de forma aut\u00f3noma e \n\ncom sucesso. \n\nQuanto \u00e0 vigil\u00e2ncia e persegui\u00e7\u00e3o, dentro do campo da seguran\u00e7a p\u00fablica, no artigo [13] \u00e9 \n\ndesenvolvido um m\u00e9todo que faz com que um UAV de asa fixa consiga seguir um ve\u00edculo \n\nterrestre, usando uma c\u00e2mara girat\u00f3ria. O autor afirma que, apesar de este m\u00e9todo ser para \n\numa UAV de asa fixa (avi\u00e3o), se fosse aplicado a um helic\u00f3ptero seria muito mais bem-\n\nsucedido visto que o helic\u00f3ptero tem menos restri\u00e7\u00f5es de voo e \u00e9 capaz de pairar no ar. \n\nEsse m\u00e9todo funciona segundo duas regras essenciais: \n\n\u2022 A primeira \u2013 \u00e9 necess\u00e1rio encontrar o alvo a seguir.  \n\n\u2022 A segunda \u2013 deve tentar manter uma dist\u00e2ncia de proximidade suficiente para o \n\npoder seguir sem o perder de vista. \n\n\n\n7 \n \n\n Uma restri\u00e7\u00e3o a ter em conta neste sistema de persegui\u00e7\u00e3o \u00e9 que a velocidade do ve\u00edculo \n\nterrestre n\u00e3o deve exceder a do avi\u00e3o por longos per\u00edodos de tempo (pois assim este o \n\nperdia de vista). \n\nNo artigo [14] \u00e9 apresentado um algoritmo baseado na vis\u00e3o que permite com que um UAV \n\nseja capaz de aterrar sobre uma pista de helic\u00f3ptero. O algoritmo \u00e9 feito segundo uma \n\nsequ\u00eancia. Primeiro o helic\u00f3ptero tenta procurar a pista, ap\u00f3s encontr\u00e1-la dirige-se at\u00e9 ela e \n\nquando est\u00e1 situado sobre a pista, tenta fazer a aterragem. Se ao dirigir-se at\u00e9 \u00e0 pista o \n\nhelic\u00f3ptero a perder de vista, ele volta ao primeiro passo. A dete\u00e7\u00e3o da pista de aterragem \u00e9 \n\nfeita segundo a dete\u00e7\u00e3o da forma caracter\u00edstica de uma pista de aterragem para helic\u00f3pteros \n\n(um \u201cH\u201d). \n\nDe forma semelhante o artigo [15] fala sobre os quadcopters que disp\u00f5em de uma c\u00e2mara \n\nde um comando Wii, usada para detetar um padr\u00e3o de leds infravermelhos existentes num \n\nbon\u00e9 modificado. O equipamento \u00e9 capaz de pairar sobre a pessoa que utilize esse bon\u00e9. \n\nEm termos de seguran\u00e7a poderia ser utilizado para vigiar uma pessoa de forma a garantir a \n\nsua seguran\u00e7a. Trata-se de um equipamento acess\u00edvel e leve, visto dispor de sensores \n\nsimples e baratos. \n\nNo que diz respeito aos inc\u00eandios, \u00e0 sua dete\u00e7\u00e3o, confirma\u00e7\u00e3o e monitoriza\u00e7\u00e3o, o artigo \n\n[16] descreve como v\u00e1rios tipos de UAV podem ser usados antes, durante e depois dos \n\ninc\u00eandios. Podem ser usados por exemplo na preven\u00e7\u00e3o dos inc\u00eandios, inspecionando a \n\nvegeta\u00e7\u00e3o, verificando zonas onde exista mais suscetibilidade de ocorrer fogos. Durante os \n\nfogos s\u00e3o usados na dete\u00e7\u00e3o [17] e confirma\u00e7\u00e3o do inc\u00eandio, informando o servi\u00e7o de \n\nbombeiros da \u00e1rea atrav\u00e9s da sua georrefer\u00eancia. Ap\u00f3s os fogos s\u00e3o utilizados na \n\nmonotoriza\u00e7\u00e3o de pequenas brasas e na prospe\u00e7\u00e3o fazendo uma previs\u00e3o da \u00e1rea ardida. \n\n2.1.2-Geologia e Arqueologia \n\nNo campo da geologia \u00e9 apresentado no artigo [5] um quadcopter que disp\u00f5e de uma \n\nc\u00e2mara com v\u00e1rios filtros \u00f3ticos, com a finalidade de analisar terrenos agr\u00edcolas. Ap\u00f3s essa \n\nan\u00e1lise \u00e9 poss\u00edvel observar se \u00e9 necess\u00e1rio ou n\u00e3o fertilizar determinada zona, pois com a \n\najuda da c\u00e2mara \u00e9 poss\u00edvel assinalar as zonas que necessitem de fertiliza\u00e7\u00e3o, fazendo com \n\nque n\u00e3o se desperdice recursos onde n\u00e3o seja necess\u00e1rio. Este sistema disp\u00f5e ainda de um \n\n\n\n8 \n \n\ndownlink com o qual s\u00e3o transferidas as imagens capturadas pelos sensores para uma GCS \n\n(Ground Contol Station) para serem analisadas.  \n\nOutro m\u00e9todo \u00e9 descrito na refer\u00eancia [18]. Esse m\u00e9todo \u00e9 baseado num HALE (High \n\nAltitude Long Endurance), um tipo de UAV que \u00e9 usado para explora\u00e7\u00e3o dos terrenos \n\nin\u00f3spitos do \u00c1rtico. \u00c9 proposta uma alternativa de explora\u00e7\u00e3o de terrenos como o \u00c1rtico, \n\nusando um UAV a energia solar, n\u00e3o necessitando de combust\u00edveis fosseis para descolarem \n\nsat\u00e9lites para o mesmo prop\u00f3sito. \n\nNo campo da arqueologia os UAV s\u00e3o muitas vezes utilizados para o registo de imagens \n\na\u00e9reas, de forma a registar o trabalho feito diariamente [19]. O autor enuncia que antes de \n\nexistirem os UAV, o trabalho teria de ser feito por m\u00e3o humana, tentando desenhar os \n\nplanos e se\u00e7\u00f5es feitas no trabalho do dia-a-dia, um processo muito tedioso, assim foi \n\ntestado a utiliza\u00e7\u00e3o de um UAV num local arqueol\u00f3gico em It\u00e1lia, com sistemas a\u00e9reos de \n\nbaixo custo do Polit\u00e9cnico de Torino. Com o uso da fotogrametria [2] foi poss\u00edvel recolher \n\ne armazenar informa\u00e7\u00f5es das imagens necess\u00e1rias durante o per\u00edodo de trabalho na \n\nescava\u00e7\u00e3o, algo que sem o uso de UAV teria que ser feito apenas ap\u00f3s o dia de escava\u00e7\u00f5es \n\n[19]. \n\nNo artigo [20], s\u00e3o utilizados v\u00e1rios modelos de UAV para fotografar 3 diferentes zonas \n\nclim\u00e1ticas, desde zonas h\u00famidas a altas temperaturas, nas Honduras, de zonas com poeiras \n\nno Per\u00fa, zonas de grande altitude e diferentes varia\u00e7\u00f5es de temperatura e ventos fortes no \n\nBut\u00e3o. Segundo a an\u00e1lise do autor, conclui-se que ao utilizar diferentes UAV em v\u00e1rias \n\nzonas, umas vezes de forma aut\u00f3noma e outras pilotadas os UAV conseguem completar a \n\nmiss\u00e3o que lhe \u00e9 destinada (tirar fotos a inst\u00e2ncias arqueol\u00f3gicas). Ainda conclui que pode \n\nser afirmado que todos os sistemas utilizados est\u00e3o aptos para aplica\u00e7\u00f5es de arqueologia.  \n\nDe forma semelhante, o artigo [21] indica que utilizam UAV para capturar imagens \n\npanor\u00e2micas de uma paisagem de valor cultural de forma a conseguirem posteriormente \n\nintegrar imagens 3D de mapas hist\u00f3ricos ou atlas. Com o uso da fotogrametria, usam UAV \n\npara tirar fotos de diferentes perspetivas, a fim de criarem uma imagem com texturas dos \n\nv\u00e1rios elementos. Atrav\u00e9s dessas imagens panor\u00e2micas \u00e9 poss\u00edvel criar mapas e itiner\u00e1rios, \n\n\n\n9 \n \n\nque mais tarde podem ser usados em aparelhos como smartphones ou tablets em aplica\u00e7\u00f5es \n\nde divulga\u00e7\u00e3o tur\u00edstica e de conhecimento cultural. \n\n2.1.3-Aquisi\u00e7\u00e3o de imagens a\u00e9reas \n\nNeste campo n\u00e3o existe grande desenvolvimento sobre o equipamento. O equipamento \u00e9 \n\nutilizado como um meio para filmagem. A \u00fanica parte de desenvolvimento para o \n\nequipamento ser\u00e1 por exemplo no controlo da c\u00e2mara que o equipamento transporta [50]. \n\nGrande parte dos UAV j\u00e1 \u00e9 capaz de fazer um percurso a\u00e9reo previamente definido, n\u00e3o \n\nnecessitando de grande conhecimento sobre os comandos de voo e bastando indicar num \n\nmapa que percurso o aparelho deve fazer [20].  \n\nO sistema por sua vez executa o percurso que lhe foi destinado e muitos deles j\u00e1 disp\u00f5em \n\ndo sistema de aterragem autom\u00e1tica [22]. Ao utilizador cabe a tarefa de indicar o percurso \n\nde voo e guardar as imagens, para mais tarde vend\u00ea-las. Caso n\u00e3o seja prop\u00edcio o voo \n\naut\u00f3nomo, existem modos de voo que permitem um voo est\u00e1vel para qualquer utilizador \n\ninexperiente [23].  \n\nEste ramo tem crescido cada vez mais, pois atrav\u00e9s do uso de um UAV n\u00e3o \u00e9 necess\u00e1rio \n\nalugar um meio a\u00e9reo para fazer uma filmagem que apenas poderia ser feita por meio a\u00e9reo \n\n[2]. A utiliza\u00e7\u00e3o dos UAV vai desde a promo\u00e7\u00e3o de imobili\u00e1rio [6], para o v\u00eddeo \n\npublicit\u00e1rio [6], para document\u00e1rios de vida animal [6] e para a utiliza\u00e7\u00e3o em cobertura de \n\neventos jornal\u00edsticos [24]. \n\n2.1.4-Rob\u00f3tica \n\nEste deve ser o campo onde existe mais informa\u00e7\u00e3o sobre o desenvolvimento de rob\u00f4s \n\na\u00e9reos. Um dos v\u00e1rios desenvolvimentos \u00e9 a coopera\u00e7\u00e3o entre rob\u00f4s: o desenvolvimento de \n\nt\u00e9cnicas multiagente. Em [7] \u00e9 proposto um ambiente de simula\u00e7\u00e3o para teste de controlo \n\nde mini-UAV. Durante essas simula\u00e7\u00f5es o quadcopter \u00e9 testado no caso de perda do \n\ncontrolo de efici\u00eancia num dos motores ao pairar e noutro a fazer uma trajet\u00f3ria el\u00edptica. \n\nEste ambiente de simula\u00e7\u00e3o \u00e9 prop\u00edcio para o desenvolvimento do controlador de voo, visto \n\nque \u00e9 poss\u00edvel testar em ambiente controlado, sendo poss\u00edvel alterar vari\u00e1veis em vez de \n\ncriar testes reais. \n\n\n\n10 \n \n\nO artigo [25] apresenta uma proposta de um controlador implementado com redes neurais, \n\npara controlar o voo de um quadcopter. Em ambiente de simula\u00e7\u00e3o foram obtidos \n\nresultados animadores e conseguido obter a atitude correta reduzindo os desvios em voo. \n\nO artigo [1] demonstra que foi poss\u00edvel desenvolver um sistema de um quadcopter, usando \n\num controlador PID (Proportional Integral Derivative) que permitisse estabilizar 2 dos 6 \n\ngraus de liberdade, usando uma placa FPGA (Field-Programmable GateArray). Atrav\u00e9s da \n\nfiltragem dos sensores, como o IMU (Inertial Measurement Unit), e do uso das imagens de \n\numa c\u00e2mara para estabilizar os restantes 4 graus de liberdade, foi poss\u00edvel corrigir todos os \n\ngraus de liberdade para permitir um voo sem interven\u00e7\u00e3o humana. \n\n Por sua vez, na tese [26] \u00e9 usada uma c\u00e2mara capaz de capturar o movimento em tempo \n\nreal e de o transmitir para uma esta\u00e7\u00e3o terrestre onde ser\u00e1 analisada. O sistema utiliza o \n\nprocessamento da imagem que \u00e9 capturada atrav\u00e9s da c\u00e2mara para detetar obst\u00e1culos e \n\nsaber onde se encontra. Atrav\u00e9s desse sistema o quadcopter \u00e9 capaz de fazer grande parte \n\ndo percurso sem a interven\u00e7\u00e3o humana. \n\nNa refer\u00eancia [22] \u00e9 apresentado um quadcopter com um sistema de garras, que serve tanto \n\npara transportar objetos, como para pousar em superf\u00edcies que n\u00e3o se encontram na \n\nhorizontal. Durante a fase de testes o quadcopter foi capaz de aterrar autonomamente e \n\ncaso exista alguma falha na aterragem, principalmente quando este tenta pousar sobre uma \n\nsuperf\u00edcie vertical, o helic\u00f3ptero \u00e9 capaz de recuperar dessa falha e manter-se novamente a \n\npairar. \n\nO mesmo autor desenvolveu um sistema aut\u00f3nomo, [27] utilizando as garras indicadas no \n\ncap\u00edtulo anterior, de forma a transportar um bloco de madeira com a coopera\u00e7\u00e3o de 2 ou \n\nmais quadcopters. Durante os testes, foi poss\u00edvel transportar blocos de madeira com 4 \n\nformas diferentes (em linha, em T, em L e em cruz) utilizando para a tarefa 4 quadcopters. \n\nOs quadcopters foram capazes de transportar os diferentes blocos de forma est\u00e1vel.  \n\n \n\n \n\n\n\n11 \n \n\nOutra inova\u00e7\u00e3o \u00e9 referida em [9] em que \u00e9 criado um controlador para que o Arducopter \n\npasse atrav\u00e9s de uma janela pela horizontal, pela vertical e que tente tamb\u00e9m pousar numa \n\nplataforma que faz um \u00e2ngulo com a horizontal superior a 90?. Foi desenvolvido um \n\ncontrolador de forma a que o ve\u00edculo completasse a sua miss\u00e3o, isto \u00e9 fazer uma trajet\u00f3ria \n\n3D. \n\n  \n\n\n\n12 \n \n\n3-Explica\u00e7\u00e3o geral do sistema \n\nPara esta tese foi comprado um quadcopter (um helic\u00f3ptero que disp\u00f5e de 4 h\u00e9lices \n\nequidistantes do centro) Arducopter, esse dispositivo \u00e9 programado sobre a plataforma \n\nArduino. Para o controlo do helic\u00f3ptero \u00e9 usado um r\u00e1dio transmissor de controlo remoto. \n\nO controlo remoto disp\u00f5e de um conjunto de canais atrav\u00e9s dos quais podem ser enviados \n\ncomandos para controlar os movimentos do helic\u00f3ptero. Existem 4 canais essenciais no que \n\ncorrespondem a cada movimento do helic\u00f3ptero, esses movimentos s\u00e3o: o movimento de \n\npitch no qual o helic\u00f3ptero movimenta-se para a frente ou para tr\u00e1s, inclinando-se nessa \n\nmesma dire\u00e7\u00e3o; o movimento de roll no qual o helic\u00f3ptero movimenta-se para a direita ou \n\npara a esquerda, inclinando-se nas respetivas dire\u00e7\u00f5es; o movimento de yaw no qual o \n\nhelic\u00f3ptero faz um movimento de rota\u00e7\u00e3o para a direita ou para a esquerda; o movimento \n\nde throttle que faz o helic\u00f3ptero aumentar, manter ou baixar a altitude, segundo a pot\u00eancia \n\ndos motores. Na sec\u00e7\u00e3o 7.1 encontra-se definido o processamento dos movimentos com \n\nmaior detalhe.  \n\nAl\u00e9m desses canais existe um outro que \u00e9 respons\u00e1vel por indicar o modo de voo, na sec\u00e7\u00e3o \n\n7.2 encontram-se descritos os v\u00e1rios modos de voo e o respetivo comportamento em voo. \n\nExistem modos de voo manuais, em que o helic\u00f3ptero \u00e9 controlado exclusivamente pelo \n\ncontrolo remoto. Existes tamb\u00e9m modos de voo assistidos, na medida em que, auxiliam no \n\ncontrolo da altitude, orienta\u00e7\u00e3o e posi\u00e7\u00e3o em voo (ajudando a pairar) do helic\u00f3ptero. \n\nFinalmente existem modos de voo aut\u00f3nomos, em que o helic\u00f3ptero \u00e9 controlado \n\nautomaticamente sem necessitar de controlo remoto.  \n\nAp\u00f3s o controlo remoto enviar os comandos para o helic\u00f3ptero, no helic\u00f3ptero os sinais s\u00e3o \n\nrecebidos pelo recetor de controlo remoto que reencaminha os sinais correspondentes aos \n\nv\u00e1rios canais, para as portas de entrada existentes numa placa que processa-os. Essa placa \n\nexistente no Arducopter, designada por APM (ArduPilot Mega), \u00e9 uma placa que cont\u00e9m \n\num microprocessador com 8 portas de entrada e 8 portas de sa\u00edda PWM e possui outras \n\nportas (nas quais podem ser adicionados novos sensores), possui v\u00e1rios sensores embutidos, \n\ncomo o bar\u00f3metro, girosc\u00f3pios de xy e z e aceler\u00f3metros de 3 eixos. A placa tem como \n\nfun\u00e7\u00e3o processar os sinais recebidos por parte do recetor, juntamente com os dados dos \n\n\n\n13 \n \n\noutros sensores e enviar para a sa\u00edda os sinais que ir\u00e3o fazer mover os motores, de acordo \n\ncom o desejado.  \n\nOs motores est\u00e3o ligados a controladores ESC (Electronic Speed Controllers), que s\u00e3o \n\nrespons\u00e1veis por fazerem trabalhar os motores. Na placa de controlo atrav\u00e9s de Arducopter \n\nexistem 2 pares de h\u00e9lices sim\u00e9tricos, cada par deve girar numa dire\u00e7\u00e3o (no sentido dos \n\nponteiros do rel\u00f3gio ou contr\u00e1rio aos ponteiros do rel\u00f3gio). Os pares de h\u00e9lices devem ser \n\ndispostos da seguinte forma: um par deve ser colocado com uma h\u00e9lice \u00e0 frente e outra \n\natr\u00e1s do helic\u00f3ptero; o outro deve ser colocado, com uma h\u00e9lice \u00e0 esquerda e outra \u00e0 direita \n\ndo helic\u00f3ptero. O helic\u00f3ptero cont\u00e9m de uma bateria de L\u00edtio para fornecer energia a todo o \n\nequipamento. \n\nA placa de controlo cont\u00e9m um firmware que pode ser programado para adi\u00e7\u00e3o de novas \n\nfuncionalidades ou de sensores, atualmente esse firmware \u00e9 o Arducopter 2.6. Existem duas \n\nformas para configurar e testaros sistema, e gerir os ficheiros log dos voos efetuados. Uma \n\ndas formas, \u00e9 atrav\u00e9s de um menu CLI (Command Line Interpreter), um terminal de linha \n\nde comandos que cont\u00e9m: um menu para configura\u00e7\u00f5es referentes ao helic\u00f3ptero; outro \n\nmenu para testar os v\u00e1rios sensores; e outro menu para gerir os ficheiros de log. A outra \u00e9 \n\nutilizando o software Mission Planner, uma plataforma que al\u00e9m de permitir a execu\u00e7\u00e3o \n\ndessas tarefas atrav\u00e9s de uma interface gr\u00e1fica mais percet\u00edvel, pode ainda ser utilizado para \n\ndefinir uma miss\u00e3o aut\u00f3noma para o helic\u00f3ptero, com a ajuda de um sistema de telemetria \n\npermite utilizar uma GCS (Ground Control Station), uma esta\u00e7\u00e3o capaz de controlar um \n\nhelic\u00f3ptero em tempo real atrav\u00e9s de um port\u00e1til, contendo a visualiza\u00e7\u00e3o dos estados dos \n\nsensores, sendo poss\u00edvel a altera\u00e7\u00e3o da miss\u00e3o aut\u00f3noma em tempo real. O software \n\nMission Planner cont\u00e9m um protocolo de comunica\u00e7\u00e3o chamado MAVLink (Minature \n\nAirVihecle Link), cujo protocolo serve para definir as miss\u00f5es aut\u00f3nomas e toda a \n\ncomunica\u00e7\u00e3o entre a placa APM e o programa. \n\n \n\n \n\n\n\n14 \n \n\n4- Descri\u00e7\u00e3o do Arducopter \n\nNeste trabalho foi utilizado um quadopter que resultou da aplica\u00e7\u00e3o da plataforma Ardu\u00edno. \n\nNeste cap\u00edtulo ser\u00e3o descritos os v\u00e1rios elementos do Arducopter, assim como a sua \n\ninstala\u00e7\u00e3o. \n\nO equipamento \u00e9 essencialmente constitu\u00eddo por [28]: \n\n\u2022 APM (ArduPilot Mega) \n\n\u2022 A estrutura do Arducopter \n\n\u2022 Motores/ESC (Eletronic Speed Controlers)/h\u00e9lices \n\n\u2022 R\u00e1dio transmissor/recetor \n\n\u2022 Bateria e carregador \n\n\u2022 Magnet\u00f3metro  \n\n\u2022 GPS  \n\nEm seguida iremos descrever esses componentes. \n\n4.1-APM (ArduPilot Mega) \n\nExistem duas vers\u00f5es desta placa, a vers\u00e3o 1 e a vers\u00e3o 2. A primeira vers\u00e3o \u00e9 a mais antiga \n\ne \u00e9 composta por duas partes, o controlador APM (placa vermelha) e o IMU oilpan (placa \n\nazul). A montagem destes componentes est\u00e1 descrita no anexo A.1. A segunda vers\u00e3o \u00e9 \n\nmais recente, com mais sensores, \u00e9 mais pequena n\u00e3o necessitando de serem soldados \n\nnenhuns componentes, j\u00e1 possui GPS e magnet\u00f3metro embutido [28].  \n\nO conjunto APM1 serve para controlar todos os sensores, motores e o processamento de \n\ntodas as informa\u00e7\u00f5es necess\u00e1rias para o funcionamento do Arducopter. No que diz respeito \n\n\u00e0 placa ArduPilot Mega1 (figura 1) que \u00e9 a placa existente atualmente no Arducopter da \n\nUniversidade da Madeira, esta \u00e9 constitu\u00edda por duas placas [29]:  \n\n1. Uma placa com o processador Atmega 2560 e um co-processador Atmega328, \n\nusado para as comunica\u00e7\u00f5es de r\u00e1dio. Esta placa \u00e9 conhecida por v\u00e1rias designa\u00e7\u00f5es \n\ncomo a placa vermelha, APM ou masterboard. \n\n\n\n15 \n \n\n2. A segunda placa, que se situa no topo da primeira, inclui um largo conjunto de \n\nsensores desde girosc\u00f3pios, aceler\u00f3metros, sensores de press\u00e3o e voltagem. Serve \n\nde IMU (Inertial Measurement Unit, utilizada para gerir a estabilidade do \n\nArducopter) e \u00e9 conhecida por nomes como placa azul, APM Shield e oilpan. \n\n \n\nFigura 1- Placa APM V.1 [29] \n\n4.1.1-Alimenta\u00e7\u00e3o da placa \n\nA APM tamb\u00e9m tem uma entrada alternativa de energia, podendo assim fornecer energia \n\ndiretamente \u00e0 placa atrav\u00e9s de uma bateria separada do sistema de controlo remoto. Isso \u00e9 \n\nfeito atrav\u00e9s da extra\u00e7\u00e3o da soldadura de um jumper SJ1 como se mostra na figura 2 e \n\nligando os conetores da bateria diretamente na placa APM, com as respetivas polaridades \n\nnos pins que se encontram na figura 2. A placa possui um regulador de corrente e um \n\nfus\u00edvel de reset. [30] \n\n \n\nFigura 2 -Imagem ilustrativa de como configurar a alimenta\u00e7\u00e3o da placa [30] \n\n\n\n16 \n \n\n4.1.2-Descri\u00e7\u00e3o da placa APM1 \n\nA figura 3 mostra um pouco da arquitetura da placa APM, exibindo em primeiro plano o \n\nprocessador Atmega2560 da atmel que disp\u00f5e de uma mem\u00f3ria flash de 256kb. Atrav\u00e9s de \n\nalguns truques no c\u00f3digo \u00e9 poss\u00edvel ler e escrever 8 canais de PWM (pulse width \n\nmodulation) usando cerca de 1% do processador. A placa disp\u00f5e tamb\u00e9m de um conversor \n\nanal\u00f3gico para digital, que pode ser usado como pins de entradas digitais, possui 4 portas \n\ns\u00e9rie sendo as portas 0, 1, 2 e 3 usadas para USB, GPS, DataFlash e Xbee/ Telemetria \n\nrespetivamente [30]. \n\n \n\nFigura 3 - Arquitetura da placa APM [30] \n\n4.1.3-Descri\u00e7\u00e3o da placa oilpan \n\nEsta placa engloba grande parte dos sensores que ir\u00e3o determinar uma boa performance em \n\nvoo. Desde aceler\u00f3metros de 3 eixos, girosc\u00f3pios xy e tamb\u00e9m do z, e bar\u00f3metro para \n\ncalcular a altura do equipamento segundo a sua temperatura e press\u00e3o atmosf\u00e9rica. Na porta \n\nI2C \u00e9 ligado o magnet\u00f3metro, de forma a se ter uma orienta\u00e7\u00e3o em voo correta. A placa \n\ntamb\u00e9m disp\u00f5e de uma porta de expans\u00e3o para a liga\u00e7\u00e3o de v\u00e1rios sensores anal\u00f3gicos. A \n\n\n\n17 \n \n\nporta de telemetria serve para ligar componentes adicionais, como um Xbee de forma a se \n\nter um voo com uma GCS. A porta Pitot \u00e9 onde devem ser ligados sensores adicionais, \n\ncomo sensores utrass\u00f3nicos ou de infravermelhos [31]. \n\nOs 4 DIP (Dual In-line Package) switches e o slider switch (que se encontram no canto \n\ninferior esquerdo da figura 4) tornaram-se obsoletos, visto que, com o aparecimento do \n\nfirmware 2.0, para se aceder aos comandos enviados por estes dispositivos, que passavam \n\npela entrada no terminal CLI, pela escolha da configura\u00e7\u00e3o da estrutura e pelo modo de voo \n\n(se o dispositivo controlado era um avi\u00e3o ou um helic\u00f3ptero). Atualmente s\u00e3o todos feitos \n\npor software, n\u00e3o sendo necess\u00e1rio por vezes desmontar o equipamento para alterar a sua \n\nconfigura\u00e7\u00e3o, tornando a placa APM1 mais pr\u00f3xima a n\u00edvel de funcionalidades da vers\u00e3o 2 \n\nAPM2 [32]. \n\n \n\nFigura 4 - Placa APM Shield [31] \n\nNa figura 4 pode-se observar um rel\u00e9 a branco que serve para ser usado em eventos de \n\ngatilho (trigger) como por exemplo, este pode ser usado quando se pretende tirar uma foto \n\n(quando se disp\u00f5e de uma m\u00e1quina fotogr\u00e1fica). Pode-se tamb\u00e9m observar que \u00e9 atrav\u00e9s \n\ndesta placa que se liga a ficha mini USB que se conectar\u00e1 ao pc para permitir aceder aos \n\ndados da placa e program\u00e1-la [31]. \n\n\n\n18 \n \n\nA figura 5 ilustra os v\u00e1rios leds da placa azul [33]: \n\n\u2022 O led A (verde) - se estiver ligado indica que os motores est\u00e3o armados; se estiver \n\nintermitente indica que os motores est\u00e3o desarmados. \n\n\u2022 O led B (amarelo) - se estiver intermitente o sistema encontra-se durante a \n\ncalibra\u00e7\u00e3o; caso contr\u00e1rio n\u00e3o \u00e9 utilizado. \n\n\u2022 O led C (vermelho) - se estiver ligado indica que o GPS est\u00e1 sincronizado; se estiver \n\nintermitente indica que est\u00e1 a tentar sincronizar; se estiver desligado indica que o \n\nGPS n\u00e3o se encontra conectado. \n\n\u2022 Os leds TX e RX - quando est\u00e3o intermitentes indicam que est\u00e1 a decorrer uma \n\ncomunica\u00e7\u00e3o em s\u00e9rie, quer por USB ou por Telemetria.  \n\n\u2022 O led power (azul) - indica que a placa APM1 est\u00e1 ligada. \n\n \n\nFigura 5 - Ilustra\u00e7\u00e3o dos v\u00e1rios leds da oilpan[33] \n\n\n\n19 \n \n\n4.1.5-Descri\u00e7\u00e3o da APM2  \n\nApesar da Universidade da Madeira n\u00e3o dispor da vers\u00e3o 2 da placa APM, ir\u00e1 ser descrito \n\nbrevemente as diferen\u00e7as entre as duas vers\u00f5es. Uma das grandes diferen\u00e7as entre estas \n\nduas placas \u00e9 nos sensores que usam. A placa APM2, que est\u00e1 representada pela figura 6, \n\ndisp\u00f5e de um Invensense MPU-6000 gyro/accelerometer chip, que cont\u00e9m o seu pr\u00f3prio \n\nprocessador. Cont\u00e9m ainda um sensor de press\u00e3o altamente preciso para medi\u00e7\u00f5es de \n\naltitude. Devido \u00e0 evolu\u00e7\u00e3o dos sensores foi poss\u00edvel a incorpora\u00e7\u00e3o de v\u00e1rias fun\u00e7\u00f5es, \n\nutilizando assim menos chips e com sensores digitais, n\u00e3o recorrendo aos conversores \n\nanal\u00f3gico para digital, como ocorria no APM1 [34]. \n\n Ao contr\u00e1rio da APM1, a APM2 j\u00e1 disp\u00f5e de sensores como o GPS e o magnet\u00f3metro \n\nembutidos, para n\u00e3o ser necess\u00e1ria a utiliza\u00e7\u00e3o de soldaduras ou cabos. O bot\u00e3o CLI \n\n(command line interpreter) no APM2 j\u00e1 n\u00e3o existe. O CLI \u00e9 chamado premindo a tecla \n\nenter 3 vezes no terminal de in\u00edcio em vez de utilizar um interruptor na placa APM para \n\nativar essa fun\u00e7\u00e3o. A placa APM2 n\u00e3o cont\u00e9m o rel\u00e9 que servia essencialmente para tirar \n\numa foto numa c\u00e2mara, mas \u00e9 poss\u00edvel a adi\u00e7\u00e3o de um rel\u00e9 externo [34]. \n\nN\u00e3o existem interruptores DIP pois estas funcionalidades s\u00e3o executadas atrav\u00e9s do \n\nMission Planner. Como acontecia com a APM1 esta n\u00e3o disp\u00f5e de um monitor de \n\nvoltagem, pois \u00e9 prefer\u00edvel utilizar um Sparkfun current sensor [35], que pode ser ligado a \n\numa das portas dispon\u00edveis [34]. \n\n\n\n20 \n \n\n \n\nFigura 6 - Placa APM2 [34] \n\n4.2-Estrutura do quadcopter \n\nExistem v\u00e1rios tipos de estruturas, dependendo do n\u00famero de motores e da vers\u00e3o do \n\nmodelo. A vers\u00e3o do Arducopter existente \u00e9 uma vers\u00e3o mais antiga e primordial. O seu \n\ntrem de aterragem n\u00e3o \u00e9 o melhor, pois \u00e9 feito de um material fr\u00e1gil e pouco resistente a \n\nchoques. Existem outros modelos mais recentes que j\u00e1 disp\u00f5em de materiais mais robustos, \n\ncom alum\u00ednio, que fazem com que se tenha mais seguran\u00e7a no caso de uma queda \n\ninvolunt\u00e1ria do equipamento ou no caso de n\u00e3o se ter muita sensibilidade com o controlo ao \n\naterrar [28]. \n\n Estas novas estruturas t\u00eam a vantagem de serem originais do Arducopter tendo assim \n\ncontroladores PID (Proportional Integral Derivative) adequados \u00e0 estrutura e aos motores \n\nde 850kv (pot\u00eancia dos motores), que s\u00e3o os motores padr\u00e3o. A montagem da estrutura \n\nencontra-se descrita no Anexo B. A estrutura do quadcopter existente pode ser configurada \n\n\n\n21 \n \n\nde duas maneiras, quer em cruz (+) ou em x. O tipo de estrutura existente no Arducopter \n\natual \u00e9 a estrutura em cruz (+) [28].   \n\n4.2.1-Diferen\u00e7as entre a estrutura em x ou em + \n\nQualquer uma pode ser escolhida. A estrutura em x \u00e9 utilizada quando \u00e9 usada uma c\u00e2mara, \n\nvisto que, durante o voo ao inclinar-se, no movimento de pitch (para a frente), a c\u00e2mara n\u00e3o \n\napanha o bra\u00e7o que se encontra inclinado, como aconteceria se se utilizasse na estrutura em \n\n+. A estrutura em + \u00e9 a mais utilizada, por ser a mais intuitiva em voo, quando se pretende \n\nverificar onde fica a parte da frente do Arducopter. Normalmente pinta-se o bra\u00e7o que se \n\nencontra \u00e0 frente ou \u00e9 colocada uma bola de ping pong na perna da frente de forma a \n\ndiferenciar dos restantes bra\u00e7os [36]. \n\nA figura abaixo mostra como devem ser dispostas as h\u00e9lices quando configuradas em + \n\n(esquerda) e em x (direita). \n\n \n\nFigura 7- Indica\u00e7\u00e3o da rota\u00e7\u00e3o das h\u00e9lices quando configuradas em + e em x [37] \n\n \n\n4.2.2-Trem de aterragem (estrutura de aterragem) \n\nQuanto ao trem de aterragem existente, pode-se concluir que \u00e9 muito fr\u00e1gil. \u00c9 prefer\u00edvel a \n\nsubstitui\u00e7\u00e3o deste por um mais robusto e mais flex\u00edvel. Recomenda-se uma boa superf\u00edcie, \n\nfeita de um material flex\u00edvel e ao mesmo tempo forte, para que no caso de uma queda o \n\nchoque seja absorvido e os componentes permane\u00e7am intactos. \n\n\n\n22 \n \n\nDos v\u00e1rios exemplos de trens de aterragem existentes, pode-se referir o modelo da \n\ndiydrones, representado na figura 8: \n\n \n\nFigura 8- Exemplo do trem de aterragem da estrutura dos diydrones [38] \n\nEste \u00e9 semelhante a uns esquis, como existem nos helic\u00f3pteros convencionais, e permitem a \n\nutiliza\u00e7\u00e3o de uma c\u00e2mara a bordo. Outro modelo, representado nas figuras 9 e 10, utilizam \n\n4 pernas. \n\n \n\nFigura 9 - Exemplo do trem de aterragem da estrutura 3DR [39] \n\n\n\n23 \n \n\n \n\nFigura 10- Exemplo de um trem de aterragem de uma estrutura nova [40] \n\n \n\nNa figura 10 existe uma estrutura constitu\u00edda por 4 pernas que disp\u00f5em de molas para \n\nreduzir a for\u00e7a do impacto. Um dos factos a ter em conta quando se escolhe um trem de \n\naterragem \u00e9 a funcionalidade do helic\u00f3ptero. Se for necess\u00e1rio incorporar uma c\u00e2mara, \u00e9 \n\nindispens\u00e1vel que o trem de aterragem seja suficientemente alto para que consiga proteger a \n\nc\u00e2mara de um impacto.  \n\nAnalisando os v\u00e1rios modelos existentes, optou-se por criar uma perna para ser colocada \n\nem cada um dos bra\u00e7os, visto a universidade usufruir de uma impressora 3D, para que fosse \n\nmais est\u00e1vel a aterragem. Estas novas pernas, que se apresentam na figura 11, s\u00e3o feitas de \n\num pl\u00e1stico que as torna mais flex\u00edvel, para aterragens de pequena altitude. As pernas \n\nforam colocadas mais perto dos motores, para que na queda as h\u00e9lices n\u00e3o se inclinassem \n\npara o ch\u00e3o e fossem danificadas. Com esta nova disposi\u00e7\u00e3o das pernas, caso a aterragem \n\nfosse de forma inclinada, a estrutura ficaria mais nivelada.  \n\n\n\n24 \n \n\n \n\nFigura 11 - Pernas impressas na impressora 3D \n\n4.3-Motores/ESC (eletronic speed controls) /H\u00e9lices \n\nNo que diz respeito aos motores, os motores usados s\u00e3o de 850 kv sem escovas. Na compra \n\nde motores/ESC (controladores de velocidade electr\u00f3nicos) /h\u00e9lices \u00e9 prefer\u00edvel utilizar os \n\nque j\u00e1 v\u00eam em kits. Para os multi-rotores s\u00e3o recomendados os motores de 800-1100 kv \n\nquando se usa baterias de 3 c\u00e9lulas. Os controladores de velocidade s\u00e3o usados para \n\ncontrolar os motores e s\u00e3o classificados em amperes. Essa amperagem deve coincidir com a \n\nusada pelo motor [28]. \n\nAs h\u00e9lices utilizadas s\u00e3o h\u00e9lices com duas p\u00e1s grandes, sendo as dimens\u00f5es mais populares \n\n10x45 e 12x47. As h\u00e9lices podem ter a particularidade de serem constitu\u00eddas por um tipo de \n\nmaterial mais resistente. As h\u00e9lices que v\u00eam de f\u00e1brica s\u00e3o as de 10x45, mas foi testado o \n\nuso de h\u00e9lices maiores, de 12x47, e o Arducopter ao levantar voo tornou-se mais est\u00e1vel \n\ncom este tipo de h\u00e9lices do que com as anteriores [28]. A descri\u00e7\u00e3o da montagem dos \n\nmotores e h\u00e9lices encontram-se no anexo B.3.  \n\n4.4-R\u00e1dio transmissor e recetor \nNesta sec\u00e7\u00e3o s\u00e3o descritos o r\u00e1dio transmissor e o r\u00e1dio recetor utilizados no atual modelo \n\ndo Arducopter. \n\n4.4.1-R\u00e1dio transmissor \n\nO r\u00e1dio transmissor \u00e9 usado para controlar o Arducopter em modo manual, simples ou no \n\ncaso de existirem coordenadas erradas no modo autom\u00e1tico \u00e9 poss\u00edvel intervir para que o \n\nequipamento n\u00e3o caia. O equipamento necessita no m\u00ednimo de 4 canais para desempenhar \n\ngrande parte das funcionalidades do Arducopter [28]. Na figura 11 pode-se observar o r\u00e1dio \n\n\n\n25 \n \n\ntransmissor, que \u00e9 um r\u00e1dio transmissor de 9 canais que est\u00e1 configurado no modo 2 (modo \n\nutilizado na Europa em que o throttle \u00e9 posicionado no lado esquerdo do comando, algo \n\nque n\u00e3o aconteceria no modo Americano, em que o throttle est\u00e1 posicionado no lado \n\ndireito, fazendo uma troca com o comando pitch) e funciona com 8 pilhas AA. A figura 12 \n\napresenta os v\u00e1rios canais e o correspondente a um movimento do Arducopter. A \n\nexplica\u00e7\u00e3o desses movimentos encontra-se na sec\u00e7\u00e3o 7.1. \n\n \n\nFigura 12 - Emissor de controlo remoto e movimentos correspondentes \n\n4.4.2-R\u00e1dio recetor \n\nO r\u00e1dio recetor representado na figura 13 \u00e9 o equipamento que recebe os comandos \n\nenviados pelo transmissor e os envia para a placa APM. Estes dois equipamentos s\u00e3o \n\ncomprados em conjunto, mas ter v\u00e1rios recetores \u00e9 por vezes bom, no caso de se ter v\u00e1rias \n\naeronaves, pois assim pode-se utilizar apenas um controlador para v\u00e1rias aeronaves [28]. A \n\ninstala\u00e7\u00e3o dos componentes encontra-se explicada no anexo B.5. \n\nEste equipamento apresenta 9 canais de sa\u00edda, mas no modelo existente na Universidade da \n\nMadeira apenas utilizamos o cabo que cont\u00e9m 6 canais, que deve ser ligado \u00e0s primeiras 6 \n\nentradas (apesar de n\u00e3o usarmos o 6\u00ba canal pois este n\u00e3o \u00e9 necess\u00e1rio). \n\n\n\n26 \n \n\n \n\nFigura 13 -Recetor de controlo remoto \n\n4.5-Bateria e carregador \n\nNesta sec\u00e7\u00e3o s\u00e3o descritos a bateria, o carregador e os passos para o seu carregamento. \n\n4.5.1-Bateria \n\nUm componente muito importante \u00e9 a bateria, visto que \u00e9 o dispositivo que fornece toda a \n\nenergia necess\u00e1ria para o funcionamento dos controladores e motores [28]. O Arducopter \n\nexistente possui uma bateria de LiPo (Litium Polymers) de 11,1V e 2200mAh com 3 \n\nc\u00e9lulas. Abaixo encontra-se a figura 14, com a bateria. Este tipo de bateria \u00e9 muito \n\nperigoso, por ser muito inflam\u00e1vel e n\u00e3o ser poss\u00edvel apagar com um extintor normal. Por \n\nisso deve-se ter o cuidado de mant\u00ea-la em lugares frescos e longe de fontes de igni\u00e7\u00e3o ou \n\nde calor. \n\n \n\nFigura 14 -Bateria LiPo do arducopter \n\n\n\n27 \n \n\n4.5.2-Carregador \n\n\u00c9 tamb\u00e9m necess\u00e1rio ter um carregador espec\u00edfico para este tipo de bateria de forma a \n\ncarregar corretamente cada c\u00e9lula da bateria [28]. O carregador IMAX B6 disp\u00f5e de v\u00e1rias \n\nformas de carregamento (carregamento r\u00e1pido, carregamento normal e carregamento \n\nbalanceado) para v\u00e1rios tipos de bateria (de n\u00edquel e de l\u00edtio). Ao carregar a bateria, deve \n\nser escolhido o tipo de bateria correto assim como o carregamento balanceado, visto que \n\neste carrega corretamente cada c\u00e9lula da mesma. Na figura 15 encontra-se uma imagem do \n\ncarregador existente. \n\n \n\nFigura 15 - Carregador de bateria \n\nAo carregar a bateria h\u00e1 que seguir os seguintes passos: \n\n\u2022 Ligar os conetores da bateria ao carregador como mostra a figura 16. \n\n\u2022 Ligar as duas outras pontas dos fios de corrente do carregador a uma fonte de \n\nalimenta\u00e7\u00e3o (ter sempre em aten\u00e7\u00e3o o positivo e negativo) e escolher uma voltagem \n\nde cerca de 15V. \n\n\u2022 Ligar o carregador. \n\n\u2022 Escolher o menu de baterias l\u00edtio LiPo (normalmente j\u00e1 est\u00e1 definido por defeito).  \n\n\u2022 Escolher o menu de carregamento balanceado. De seguida clicar na tecla enter. \n\n\u2022 Em seguida selecionar a amperagem de 2A (este valor conv\u00e9m ser entre 1,5A a 2A), \n\na voltagem de 11,1V e 3S (3 c\u00e9lulas). Para come\u00e7ar a carregar a bateria deve seguir \n\npara o pr\u00f3ximo menu, pressionando enter cerca de 3 segundos. \n\n\n\n28 \n \n\n\u2022 Ir\u00e1 ser apresentado um menu indicando o n\u00famero de c\u00e9lulas detetadas pelo \n\ncarregador (\u00e0 esquerda) e o n\u00famero de c\u00e9lulas escolhido no menu anterior (\u00e0 \n\ndireita). Caso o n\u00famero seja o mesmo deve seguir para o pr\u00f3ximo menu \n\npressionando enter. \n\n\u2022 A bateria ir\u00e1 carregar durante uns 30 minutos, ap\u00f3s esse tempo o carregador ir\u00e1 dar \n\nuns apitos a indicar que a bateria est\u00e1 carregada. O tempo de carregamento \u00e9 \n\ninfluenciado pela amperagem definida, quanto mais amperagem mais r\u00e1pido o seu \n\ncarregamento. Ap\u00f3s estar carregada, carregue no bot\u00e3o stop, desligue a fonte de \n\nalimenta\u00e7\u00e3o e retire os conetores todos. \n\n \n\nFigura 16 - Imagem ilustrativa de como carregar \n\n4.6-Sensores \n\nEsta sec\u00e7\u00e3o apresenta quais os sensores que podem ser adicionados ao Arducopter. Um \n\nsensor \u00e9 um dispositivo eletr\u00f3nico cuja fun\u00e7\u00e3o \u00e9 medir certos valores, por exemplo a \n\ntemperatura, a altura, a dist\u00e2ncia. A placa APM analisa os v\u00e1rios dados obtidos pelos \n\ndiversos sensores para que o Arducopter tenha melhor desempenho nos voos. \n\n4.6.1-Magnet\u00f3metro \n\nEste dispositivo pode ser opcional no caso de n\u00e3o se utilizar o modo de manter a posi\u00e7\u00e3o \n\nem voo (pairar no mesmo local) ou de fazer voos aut\u00f3nomos. O magnet\u00f3metro dispon\u00edvel \u00e9 \n\no Tripple Axis Magnetometer - HMC5883L. Este dispositivo pode ser colocado na placa \n\nAPM de duas maneiras. Atrav\u00e9s de um cabo ligado \u00e0 porta I2C do oilpan (placa azul); ou \n\n\n\n29 \n \n\nsoldando o magnet\u00f3metro \u00e0 placa. Em baixo encontram-se descritas as formas de montar \n\neste equipamento [41]. \n\n4.6.1.1-M\u00e9todo 1 \n\nO m\u00e9todo 1 \u00e9 a maneira mais f\u00e1cil de montar o magnet\u00f3metro instalando-o diretamente na \n\nplaca azul. \u00c9 a maneira mais utilizada e \u00e9 a configura\u00e7\u00e3o padr\u00e3o. \u00c9 de ter em aten\u00e7\u00e3o se a \n\nvoltagem do sensor est\u00e1 configurada para 5V. Para a sua instala\u00e7\u00e3o \u00e9 necess\u00e1rio utilizar 4 \n\nheaders pins. Quebra-se a parte assinalada pela figura 17 e solda-se os 4 pins Finalmente \n\nsolda-se o magnet\u00f3metro virado para baixo como mostra a figura 17. \n\n \n\nFigura 17- Montagem do magnet\u00f3metro atrav\u00e9s do m\u00e9todo 1 [41] \n\n  \n\n\n\n30 \n \n\n4.6.1.2-M\u00e9todo 2 \n\nNo m\u00e9todo 2, o cabo mais comprido do kit deve ser alterado. Retira-se um conetor (pe\u00e7a de \npl\u00e1stico branca) de uma das extremidades do cabo e dois fios como podemos observar na \nfigura 18. De seguida \u00e9 inserido o conetor na placa IMU na porta I2C. O magnet\u00f3metro ao \nser ligado na estrutura deve se encontrar orientado para a frente como no m\u00e9todo 1 (figura \n19) [41]. \n\n \n\nFigura 18 - Liga\u00e7\u00e3o do cabo ao magnet\u00f3metro atrav\u00e9s do m\u00e9todo 2 [41] \n\n \n\nFigura 19- Montagem do magnet\u00f3metro atrav\u00e9s do m\u00e9todo 2 \n\n\n\n31 \n \n\n4.6.2-GPS (Global Positioning System) \n\nO GPS serve para se poderem realizar miss\u00f5es de voo aut\u00f3nomo e deve ser usado em \n\nespa\u00e7os abertos de forma a ser pos\u00edvel capturar a sua localiza\u00e7\u00e3o. O modelo do GPS do \n\nArducopter utilizado \u00e9 o Mediatek MT3329, e a sua instala\u00e7\u00e3o \u00e9 feita (como podemos \n\nobservar na figura 20) ligando um conetor I2C \u00e0 porta do GPS e o outro conetor \u00e0 porta I2C \n\nda placa vermelha.  \n\n \n\nFigura 20 - Conex\u00e3o do GPS \u00e0 placa APM [42] \n\nComo sensores opcionais podem ser ligados [28]: \n\n\u2022 Sonar \n\n\u2022 Sensor Infravermelho. \n\n\u2022 Sensor de optical flow \n\n\u2022 Kit de telemetria sem fios \n\n\u2022 Um gymbal de c\u00e2mara \n\n\u2022 Display no ecr\u00e3(On screen diplay) \n\n\u2022 Monitor de bateria \n\nAlguns dos sensores encontram-se apresentados no anexo C. \n\n4.6.3-Sonar (sensor ultrass\u00f3nico) \n\nO Arducopter pode dispor tamb\u00e9m de um sonar para o Arducopter manter a sua altitude, \n\nquando esta \u00e9 inferior a 10 metros. No caso da altitude ser superior a 10 metros em vez de \n\nser utilizado o sonar, \u00e9 usado o bar\u00f3metro (sensor de press\u00e3o). O sonar \u00e9 tamb\u00e9m utilizado \n\nna dete\u00e7\u00e3o de obst\u00e1culos. Abaixo temos a informa\u00e7\u00e3o de como instal\u00e1-lo. \n\n\n\n32 \n \n\n\u00c9 importante que o sonar seja montado pelo menos cerca de 7,5 cm do centro, para evitar \n\nru\u00eddos el\u00e9tricos provenientes dos ESC e outras interfer\u00eancias. Adicionou-se um sonar no \n\nArducopter utilizado na tese, criou-se um suporte na impressora 3D. Este sensor foi preso \n\ncom apenas um parafuso O sonar \u00e9 o LV-EZ3, apesar do modelo n\u00e3o ser o LV-EZ0, os \n\nalcances na medi\u00e7\u00e3o de dist\u00e2ncias s\u00e3o semelhantes [43]. \n\nO sonar disp\u00f5e de um cabo que \u00e9 facilmente adaptado e retirado, caso n\u00e3o seja necess\u00e1rio a \n\nsua utiliza\u00e7\u00e3o. Ao instalar deve-se ter aten\u00e7\u00e3o \u00e0s marcas que se encontram em cada uma das \n\nextremidades do fio (figura 21). A marca a preto corresponde ao GND (Ground) e coloca-\n\nse na placa de forma correta, para evitar danos na placa e no sensor. [43]  \n\n \n\nFigura 21- Liga\u00e7\u00e3o do sonar \u00e0 placa APM \n\nLigam-se os 3 pins de GND (preto), V+ (vermelho) e \u201cAN\u201d (amarelo) ao pitot tube do IMU \n\nshield (placa azul) nos GND, +V e \u201cAN\u201d respetivamente, como pode-se observar na figura \n\n22. \n\n\n\n33 \n \n\n \n\nFigura 22 - Ilustra\u00e7\u00e3o sobre a conex\u00e3o dos v\u00e1rios pins do sonar [43] \n\n\u00c9 poss\u00edvel ativar o sonar entrando no modo CLI (comand line interpreter), ou usando o \n\nseparador \u201cconfiguration\u201d do Mission Planner. No terminal de CLI, ap\u00f3s escrevermos \n\nsetup, escreve-se \u201csonar on\u201d para ativ\u00e1-lo. Para indicar o modelo do sonar escreve-se \n\n\u201csonar 0\u201d para o XL-EZ0; \u201csonar 1\u201d para o LV-EZ0; ou \u201csonar 2\u201d para o XL-EZL0. \u00c9 \n\nposs\u00edvel ativar e selecionar o modelo, quando estamos conectados pela USB atrav\u00e9s do \n\nprograma APM Mission Planner, selecionando o separador \u201cconfiguration\u201d como se \n\nencontra descrito na sec\u00e7\u00e3o 6.  \n\nOs valores do sonar podem conter ru\u00eddo, para isso usa-se um choke de ferrite no cabo do \n\nsensor ou utiliza-se um cabo blindado. As causas dos ru\u00eddos poder\u00e3o ser [43]: \n\n\u2022 Os ESC, servos (motores) ou BEC (Brushless Eletronic Speed Control), que \n\nencontram-se no mesmo circuito que o sonar \n\n\u2022 As frequ\u00eancias eletromagn\u00e9ticas provenientes dos motores, dos seus cabos, dos \n\nESC ou do Xbee. \n\n\u2022 O barulho ac\u00fastico provocado pela rota\u00e7\u00e3o das h\u00e9lices. \n\n\u2022 As vibra\u00e7\u00f5es dos motores ou das h\u00e9lices. \n\n\n\n34 \n \n\n5- Software e programa\u00e7\u00e3o \n\nNeste cap\u00edtulo ser\u00e3o apresentados os v\u00e1rios firmwares existente para o Arducopter, assim \n\ncomo a explica\u00e7\u00e3o do firmware Arducopter 2.6, que se encontra instalado no hardware do \n\nArducopter da Universidade da Madeira.  \n\n5.1-Software \n\nExistem v\u00e1rios firmwares diferentes para o hardware do Arducopter entre os quais s\u00e3o \n\nrecomendados [44]: \n\n\u2022 ArduPiratesNg code \u2013 Foi utilizada uma vers\u00e3o ArduCopter RC2 onde fizeram \n\nmelhoramentos atrav\u00e9s comunidade Ardupirates, este inclui novos suportes da \n\nestrutura de voo, um melhor processo de configura\u00e7\u00e3o e resolu\u00e7\u00e3o de bugs [45]. \n\nEste c\u00f3digo encontra-se atualmente pouco desenvolvido, pois com o aparecimento \n\nda placa APM2 o grupo do Arducopter evoluiu de tal maneira que todos os modos \n\nde CLI e voo s\u00e3o selecionados por software, existindo melhores funcionalidades \n\ndeixando este c\u00f3digo praticamente obsoleto. \n\n\u2022 ArduCopterMega - \u00c9 a vers\u00e3o oficial mais recente a ser lan\u00e7ada. Tem como nome \n\nArducopter 2.0. O c\u00f3digo que prov\u00e9m do APM de asa fixa (Ardupilot), que cont\u00e9m \n\nmais funcionalidades e \u00e9 mais maduro que o Arducopter. Esta vers\u00e3o traz as \n\nfuncionalidades totais dos UAV, incluindo waypoints program\u00e1veis em 3D, \n\nsoftware ground station, comunica\u00e7\u00e3o de dois sentidos durante o voo e uma \n\nnavega\u00e7\u00e3o guiada atrav\u00e9s de GPS permitindo indicar onde o Arducopter deve seguir \n\nem tempo real. Atualmente encontra-se na vers\u00e3o Arducopter 2.6, mas mensalmente \n\ns\u00e3o realizadas melhorias ao software, de forma a tornar o voo mais est\u00e1vel. \n\n5.2-Programa\u00e7\u00e3o em Arduino  \nNo caso de ser necess\u00e1rio criar novas funcionalidades no c\u00f3digo, ou incorporar outro sensor \n\nque n\u00e3o se encontre na vers\u00e3o atual, \u00e9 poss\u00edvel programar a placa APM com o IDE \n\n(Integrated Development Environment) do Arduino [46]. \n\n\n\n35 \n \n\nAntes de programar \u00e9 necess\u00e1rio instalar a placa APM no computador, para tal \u00e9 necess\u00e1rio \n\n[47]: \n\n\u2022 Instalar o Arduino IDE que se encontra dispon\u00edvel online na refer\u00eancia [48] \n\n\u2022 Ter aten\u00e7\u00e3o para n\u00e3o selecionar o ficheiro Arduino com uma vers\u00e3o igual ou \n\nsuperior \u00e0 1.0, pois esta vers\u00e3o utiliza uma extens\u00e3o de ficheiro diferente \u00e0 utilizado \n\npelo Arducopter. \u00c9 prefer\u00edvel a utiliza\u00e7\u00e3o do ficheiro Arduino 0023. \n\n\u2022 Ap\u00f3s instalar o ficheiro deve ligar-se a ficha mini USB \u00e0 placa APM, caso o sistema \n\nn\u00e3o reconhe\u00e7a a placa, deve-se ir ao gestor de dispositivos do computador e \n\natualizar o controlador (de prefer\u00eancia atrav\u00e9s da atualiza\u00e7\u00e3o online). \n\n\u2022 Abrir o gestor de dispositivos, ir \u00e0s propriedades da porta, escolher \u201cdefini\u00e7\u00f5es \n\navan\u00e7adas\u201d e selecionar a op\u00e7\u00e3o \u201cSet RTS on Close\u201d.  \n\n\u2022 Abrir o programa Arduino, escolher o menu \u201cprefer\u00eancias\u201d e indicar onde se deseja \n\nguardar o sketchbook (\u00e1rea de trabalho do programa Arduino que cont\u00e9m o c\u00f3digo). \n\n\u2022 Ap\u00f3s definir a localiza\u00e7\u00e3o do sketchbook, \u00e9 necess\u00e1rio fechar o programa e reinici\u00e1-\n\nlo para que as op\u00e7\u00f5es sejam atualizadas. \n\nPara carregar o c\u00f3digo atrav\u00e9s do Arduino devem-se seguir os seguintes passos [49]: \n\n\u2022 Fazer o download da vers\u00e3o mais recente do Arducopter neste caso o Arducopter \n\n2.6. [50] e descompactar o ficheiro zip para uma pasta. Ap\u00f3s a descompacta\u00e7\u00e3o \n\ndeve-se copiar as duas pastas (Arducopter, Libraries) para a localiza\u00e7\u00e3o definida do \n\nsketchbook. \n\n\u2022 Abrir o programa Arduino. \n\n\u2022 Ir a \u201cficheiro\u201d, selecionar \u201cabrir\u201d e procurar dentro da pasta Arducopter o ficheiro \n\n\u201cArduCopter.pde\u201d. \n\n\u2022 No menu de ferramentas do Arduino escolhe-se a placa Arduino Mega 2560. \n\n\u2022 Depois de efetuadas as altera\u00e7\u00f5es no c\u00f3digo, para fazer o upload do c\u00f3digo \u00e9 \n\nnecess\u00e1rio carregar no bot\u00e3o com uma seta azul apontando para a direita. Este \n\nprocesso demora um a dois minutos e ap\u00f3s a transfer\u00eancia o Arduino indica que o \n\nupload est\u00e1 completo. \n\n\n\n36 \n \n\n5.3-Descri\u00e7\u00e3o do c\u00f3digo \nO c\u00f3digo \u00e9 criado por uma pequena equipa que ao desenvolv\u00ea-lo, torna-o mais completo, e \n\ncom menos erros. Mensalmente s\u00e3o criadas novas vers\u00f5es do c\u00f3digo, onde s\u00e3o corrigidos \n\nbugs e adicionadas novas funcionalidades. \n\nO c\u00f3digo que ser\u00e1 analisado corresponde \u00e0 vers\u00e3o 2.6. O c\u00f3digo \u00e9 constitu\u00eddo por duas \n\npastas, uma \u201cLibraries\u201d e outra \u201cArducopter\u201d.  \n\n5.3.1-Pasta Libraries \n\nNo que diz respeito \u00e0 pasta \u201cLibraries\u201d, esta cont\u00e9m todas as bibliotecas necess\u00e1rias para \n\numa boa opera\u00e7\u00e3o dos sensores e dos componentes. Dentro desta existem v\u00e1rias pastas que \n\ncorrespondem \u00e0s bibliotecas individuais de cada componente, (desde controladores, \n\nsensores, motores, informa\u00e7\u00f5es relativas \u00e0 placa, entre outras). Em cada pasta podem existir \n\n4 tipos de ficheiros com 4 tipos de extens\u00e3o. A extens\u00e3o \u201c.h\u201d(ficheiro header), a extens\u00e3o \n\n\u201c.cpp\u201d(ficheiro c++), a extens\u00e3o \u201c.pde\u201d (ficheiro Arduino) e um ficheiro adicional de \n\nextens\u00e3o \u201c.txt\u201d(ficheiro de texto) com o nome de \u201ckeywords.txt\u201d.  \n\n\u2022 Os ficheiros header definem as classes, indicando os construtores e os m\u00e9todos que \n\na classe deve ter. \n\n\u2022 Os ficheiros c++ cont\u00eam a mesma informa\u00e7\u00e3o da classe, mas indicam a defini\u00e7\u00e3o \n\ndos m\u00e9todos da classe. \n\n\u2022 Os ficheiros Arduino apresentam pequenos exemplos para testar certos sensores e \n\noutros elementos da biblioteca. \n\n\u2022 O ficheiro \u201ckeywords.txt\u201d cont\u00e9m o nome da classe seguido do n\u00famero 1 e os \n\nnomes dos v\u00e1rios m\u00e9todos seguidos do n\u00famero 2, este ficheiro serve para distinguir \n\no construtor da classe dos m\u00e9todos da classe. \n\n5.3.2-Pasta Arducopter \n\nQuanto \u00e0 pasta \u201cArducopter\u201d, esta \u00e9 constitu\u00edda essencialmente por ficheiros de dois tipos, \n\nArduino e header.  \n\nOs ficheiros header (extens\u00e3o \u201c.h\u201d) servem para criar classes com par\u00e2metros globais, e \n\ndefinir a configura\u00e7\u00e3o dos componentes a serem utilizados no Arducopter assim como as \n\nvari\u00e1veis. \n\n\n\n37 \n \n\nAtrav\u00e9s da figura 23, pode-se observar que de todos os ficheiros Arduino (extens\u00e3o \u201c.pde\u201d) \n\nexiste um ficheiro principal denominado \u201carducopter.pde\u201d e encontra-se ligado a todos os \n\nrestantes. Este ficheiro realiza a inclus\u00e3o de todas as bibliotecas necess\u00e1rias, assim como de \n\ntodas as vari\u00e1veis e inicia o loop principal do programa. \u00c9 a partir deste ficheiro que s\u00e3o \n\nchamadas todas as fun\u00e7\u00f5es que se encontram nos restantes ficheiros Arduino. \n\nNa parte superior da figura 23, podemos observar um pequeno grupo de ficheiros Arduino \n\nque correspondem aos menus do CLI. Esses ficheiros s\u00e3o: \n\n\u2022 Setup.pde \n\n\u2022 Test.pde \n\n\u2022 Log.pde \n\n\u2022 Planner.pde \n\nO ficheiro System.pde, que se encontra ligado a este grupo, \u00e9 respons\u00e1vel por criar o menu \n\nprincipal do terminal, com as op\u00e7\u00f5es (setup, test, log e planner), assim como as fun\u00e7\u00f5es \n\ncr\u00edticas como a designa\u00e7\u00e3o do modo de voo, a ativa\u00e7\u00e3o do modo failsafe e o in\u00edcio do GCS. \n\nOs restantes ficheiros (setup, test, log e planner) cont\u00eam a informa\u00e7\u00e3o de como ser\u00e3o \n\napresentados os v\u00e1rios menus selecionados, como se fosse um terminal. \n\nNo lado direito da figura apresenta-se um grupo de dois ficheiros, respons\u00e1veis por permitir \n\nao utilizador definir o seu pr\u00f3prio c\u00f3digo. Esses ficheiros s\u00e3o o \u201cUserCode.pde\u201d e o \n\n\u201cUserVariables.h\u201d. No \u201cUserCode.pde\u201d, podem ser definidas as inicializa\u00e7\u00f5es e as fun\u00e7\u00f5es \n\nnecess\u00e1rias. As vari\u00e1veis do utilizador podem ser definidas no ficheiro header \n\n\u201cUserVariables.h\u201d. \n\nNa parte de baixo da figura 23 existe um grupo formado por 3 ficheiros nos quais se \n\nencontram as fun\u00e7\u00f5es relacionadas com o r\u00e1dio controlo remoto: \n\n\u2022 Radio.pde \u2013 cont\u00e9m as fun\u00e7\u00f5es de inicializa\u00e7\u00e3o dos comandos de input e output do \n\ncontrolo remoto, o valor m\u00ednimo de output dos motores, as fun\u00e7\u00f5es de failsafe (no \n\ncaso de perda de controlo do r\u00e1dio), e o trim (altera\u00e7\u00e3o da escala dos valores) de \n\nvalores do controlo remoto. \n\n\u2022 Control_modes.pde \u2013 cont\u00e9m as fun\u00e7\u00f5es do interruptor dos modos de voo.  \n\n\n\n38 \n \n\n\u2022 Events.pde \u2013 cont\u00e9m as fun\u00e7\u00f5es de ativa\u00e7\u00e3o e desativa\u00e7\u00e3o do evento de failsafe, a \n\natualiza\u00e7\u00e3o de eventos e o evento de bateria fraca. \n\nTamb\u00e9m no canto inferior esquerdo da figura 23 existe um outro grupo composto por \n\nficheiros header que s\u00e3o respons\u00e1veis pela altera\u00e7\u00e3o, defini\u00e7\u00e3o de vari\u00e1veis, pela \n\nconfigura\u00e7\u00e3o de estrutura e pela configura\u00e7\u00e3o de canais. Esses ficheiros s\u00e3o: \n\n\u2022 Config.h \u2013 Ficheiro de configura\u00e7\u00e3o principal (nunca deve ser alterado). \n\n\u2022 APM_config.h \u2013 Ficheiro de configura\u00e7\u00e3o que \u00e9 sobreposto ao config.h. \n\n\u2022 APM_config.Mavlink.h \u2013 Utilizado para simula\u00e7\u00f5es com o modo HIL (Hardware In \n\nthe Loop). \n\n\u2022 Config_channel.h \u2013 Configura\u00e7\u00e3o dos canais de voo. \n\n\u2022 Defines.h \u2013 Defini\u00e7\u00e3o de vari\u00e1veis do sistema \n\nNo canto inferior direito da figura 23 encontra-se um grupo de ficheiros que dizem respeito \n\n\u00e0s fun\u00e7\u00f5es dos sensores e dos atuadores. Este grupo \u00e9 formado pelos seguintes ficheiros: \n\n\u2022 Sensors.pde \u2013 cont\u00e9m fun\u00e7\u00f5es que dizem respeito a sensores como o bar\u00f3metro, a \n\nb\u00fassola, a leitura de bateria e o sonar. \n\n\u2022 Motors.pde \u2013 cont\u00e9m as fun\u00e7\u00f5es de inicializa\u00e7\u00e3o da arma\u00e7\u00e3o e a inicializa\u00e7\u00e3o da \n\ndesarma\u00e7\u00e3o dos motores, as fun\u00e7\u00f5es de armar e desarmar motores e de enviar os \n\ncomandos aos motores. \n\n\u2022 Camera.pde \u2013 cont\u00e9m as fun\u00e7\u00f5es necess\u00e1rias para a estabiliza\u00e7\u00e3o da c\u00e2mara em voo. \n\n\u2022 Leds.pde \u2013 cont\u00e9m as fun\u00e7\u00f5es que dizem respeito \u00e0 correspond\u00eancia de leds. \n\nNo lado direito, em baixo na figura 23 pode-se observar um grupo de 3 ficheiros que t\u00eam \n\ncomo fun\u00e7\u00e3o gerir a din\u00e2mica em voo, ou seja, manter um voo mais est\u00e1vel ou mais \u00e1gil. \n\nEste grupo \u00e9 formado por: \n\n\u2022 Inertia.pde \u2013 cont\u00e9m todas a fun\u00e7\u00f5es necess\u00e1rias para o bom funcionamento dos \n\naceler\u00f3metros. \n\n\u2022 Attitude.pde  \u2013 cont\u00e9m as fun\u00e7\u00f5es necess\u00e1rias para obter os valores desejados de \n\nroll, pitch, yaw e throttle para um voo est\u00e1vel. \n\n\n\n39 \n \n\n\u2022 Flip.pde  \u2013 \u00e9 um ficheiro recente que cont\u00e9m a defini\u00e7\u00e3o das fun\u00e7\u00f5es necess\u00e1rias \n\npara o Arducopter fazer uma pirueta no ar no sentido do roll. \n\nNovamente no lado direito da figura 23, encontra-se um grupo formado por 3 ficheiros. \n\nEsses s\u00e3o respons\u00e1veis pela cria\u00e7\u00e3o, processamento e gest\u00e3o dos comandos de voo \n\nautom\u00e1tico. O grupo \u00e9 formado pelos seguintes ficheiros: \n\n\u2022 Commands.pde \u2013 \u00e9 respons\u00e1vel pela inicializa\u00e7\u00e3o e cria\u00e7\u00e3o do comando. \n\n\u2022 Commands_process.pde \u2013 \u00e9 respons\u00e1vel pelo processamento dos v\u00e1rios comandos \n\nde voo. \n\n\u2022 Commands_logic.pde \u2013 \u00e9 respons\u00e1vel pela gest\u00e3o dos comandos, designando como \n\ndevem ser tratados os comandos. \n\nNo canto superior direito, existe um ficheiro chamado GCS_mavlink.pde, que cont\u00e9m todas \n\nas fun\u00e7\u00f5es necess\u00e1rias para a comunica\u00e7\u00e3o entre o Arducopter e a esta\u00e7\u00e3o GCS. \n\nNo lado esquerdo, pode-se observar o ficheiro Navigation.pde, que cont\u00e9m todas as fun\u00e7\u00f5es \n\nnecess\u00e1rias para um voo aut\u00f3nomo. Este ficheiro cont\u00e9m o c\u00e1lculo de trajet\u00f3rias, de \n\nvelocidade, de altura e de erros para que o voo atrav\u00e9s de waypoints seja feito sem falhas. \n\nFinalmente no canto superior esquerdo, existe um grupo formado por 4 ficheiros, dois \n\nheaders e dois ficheiros Arduino. Esses ficheiros s\u00e3o: \n\n\u2022 Parameters.h \u2013 Cont\u00e9m uma classe (Parameters) que cont\u00e9m todos os par\u00e2metros \n\nglobais. \n\n\u2022 Parameters.pde \u2013 Cont\u00e9m as fun\u00e7\u00f5es definidas na classe \u201cParameters\u201d. \n\n\u2022 GCS.h \u2013 Cont\u00e9m a defini\u00e7\u00e3o das classes GCS e GCS_mavlink. \n\n\u2022 GCS.pde \u2013 n\u00e3o \u00e9 utilizado, pois todo o seu c\u00f3digo encontra-se comentado. \n\n\n\n40 \n \n\n \n\nFigura 23 - Diagrama contendo os v\u00e1rios ficheiros do c\u00f3digo agrupados segundo as suas funcionalidades \n\nNa figura 24, pode-se observar um diagrama que cont\u00e9m os v\u00e1rios loops do c\u00f3digo \n\nprincipal do \u201carducopter.pde\u201d. A figura apresenta ret\u00e2ngulos e cada ret\u00e2ngulo indica um \n\nloop. Os loops m\u00e9dium_loop e slow_loop cont\u00eam pequenos ret\u00e2ngulos dentro do seu loop, \n\nisto deve-se ao facto de apenas executarem um ret\u00e2ngulo de cada vez que s\u00e3o chamados. Os \n\nret\u00e2ngulos s\u00e3o executados da esquerda para a direita e de cima para baixo. Cada um dos \n\nloops \u00e9 executado segundo um per\u00edodo de tempo determinado. O fast_loop executa-se a \n\n\n\n41 \n \n\numa frequ\u00eancia de 100Hz; o medium_loop a uma frequ\u00eancia de 10Hz; o 50hz_loop como o \n\nnome indica executa-se a uma frequ\u00eancia de 50Hz; o slow_loop executa-se a uma \n\nfrequ\u00eancia de 2Hz; finalmente o super_slow_loop executa-se a uma frequ\u00eancia de 1Hz. \n\nQuanto maior a sua frequ\u00eancia, mais vezes \u00e9 executado o loop, sendo atrav\u00e9s destas \n\nrela\u00e7\u00f5es de frequ\u00eancia que \u00e9 poss\u00edvel designar a prioridade das fun\u00e7\u00f5es. \n\n \n\nFigura 24 - Diagrama com as fun\u00e7\u00f5es de cada subloop do loop principal \n\n\n\n42 \n \n\n6-APM Mission Planner \n\nO Mission Planner \u00e9 um programa auxiliar de configura\u00e7\u00e3o do Arducopter que cont\u00e9m uma \n\nplataforma na qual conseguimos aceder aos valores dos sensores da placa APM, do \n\nterminal CLI, entre outros. O APM Mission Planner \u00e9 utilizado para definir uma rota para o \n\nArducopter seguir,usando clicks no Google Maps. \u00c9 tamb\u00e9m utilizado como uma esta\u00e7\u00e3o \n\nbase para monitorizar o helic\u00f3ptero e mandar comandos de voo atrav\u00e9s de um pc, \n\npermitindo selecionar os comandos de voo atrav\u00e9s de drop-down menus. Verificar os \n\nvalores de output dos sensores e testar a performance de voo em piloto autom\u00e1tico, ou fazer \n\ndownload dos ficheiros log para an\u00e1lise posterior. O software permite tamb\u00e9m configurar a \n\nplaca APM, escolhendo as estruturas de voo dos comandos de r\u00e1dio e as afina\u00e7\u00f5es dos \n\nvalores controladores PID (Propositional Integral Derivate). Permite a visualiza\u00e7\u00e3o do \n\nterminal da APM [51]. \n\nO software pode ser adquirido atrav\u00e9s do link da refer\u00eancia [52], escolhe-se a vers\u00e3o do \n\nMission Planner de acordo com o tipo de arquitetura do computador utilizado (32 bits ou \n\n64bits).  \n\nAp\u00f3s instalar o software, no canto superior direito ao abrir o ficheiro do Mission Planner \n\nencontra-se um drop-down menu que cont\u00e9m as portas necess\u00e1rias para a liga\u00e7\u00e3o. Se for \n\nusada a porta USB \u00e9 necess\u00e1rio escolher a porta COM designada pelo gestor de dispositivos \n\ndo Windows. Quando liga-se ao Mission Planner o baud rate deve ser 115200 bps, para a \n\nconex\u00e3o usb. Se a conex\u00e3o for atrav\u00e9s do Xbee devemos indicar novamente a porta COM \n\ncriada pelo gestor de dispositivos do Windows quando o Xbee foi ligado. Neste caso o \n\nbaud rate deve ser de 57600 bps. A informa\u00e7\u00e3o sobre quais as portas dispon\u00edveis, encontra-\n\nse no gestor de dispositivos do Windows [51]. \n\nCarrega-se no bot\u00e3o \u201cconnect\u201d depois de se escolher a porta COM. A placa ir\u00e1 fazer reset \n\npor uns 20-30 segundos, ir\u00e1 conectar-se atrav\u00e9s do MAVLink e carregar os par\u00e2metros da \n\nAPM para o Mission Planner. A placa APM suporta por v\u00e1rios softwares de GCS entre os \n\nquais: \n\n\n\n43 \n \n\n? Arducopter Mission Planner [51] \n\n? Happykilmore GCS [53] \n\n? Qground Control(mac, Linux e widows) [54] \n\n6.1-O que \u00e9 a Ground Control Station  \nSe se tiver um Xbee para comunica\u00e7\u00f5es wireless (atrav\u00e9s do kit de telemetria) configurado \n\nno Arducopter. \u00c9 poss\u00edvel utilizar a ground control station (GCS) para monitorizar a \n\ntelemetria e carregar comandos de voo. A GCS disp\u00f5e os dados em tempo-real da quando o \n\nhelic\u00f3ptero se encontra em voo e serve de cockpit virtual, mostrando um horizonte virtual \n\nassim com os de um avi\u00e3o real [55]. \n\nA GCS pode ser utilizada para controlar um UAV em voo, podendo carregar novos \n\ncomandos de miss\u00e3o e repor par\u00e2metros. \u00c9 poss\u00edvel tamb\u00e9m visualizar o stream de v\u00eddeo \n\ndas c\u00e2maras quando o UAV se encontra em voo, utilizando o um transmissor de v\u00eddeo \n\nligado a um sistema OSD [55].  \n\n6.1.1-Utilizar o Mission Planner ground station \n\nO mapa apenas apresentar\u00e1 a posi\u00e7\u00e3o atual se o GPS estiver ativado e sincronizado, ou se \n\nestiver a usar um simulador de voo. O horizonte artificial funciona da seguinte forma, \n\nquando o arducopter se inclina para a direita, o horizonte inclina-se para a esquerda, isto \n\npode ser verificado se inclinar a cabe\u00e7a para a direita [56]. \n\nAtrav\u00e9s do Mission Planner \u00e9 poss\u00edvel observar as mudan\u00e7as do modo de voo assim como \n\noutros comandos quando este se encontra em voo. Essas mudan\u00e7as devem ser feitas sobre o \n\nmodo Autopilot para ter efeito. Se fizermos duplo click sobre o HUD (Heads up Display), \n\nabrir\u00e1 uma nova janela com o seu conte\u00fado. Ao fazer-se duplo click sobre o speed gauge \n\npode-se modificar a escala m\u00e1xima da velocidade que se pretende ver. Ao ativar a checkbox \n\nde tuning \u00e9 poss\u00edvel visualizar as vari\u00e1veis de status num gr\u00e1fico em tempo real [56]. \n\n\u00c9 tamb\u00e9m poss\u00edvel selecionar ao fazer duplo click na legenda, e escolher que vari\u00e1veis s\u00e3o \n\napresentadas no gr\u00e1fico. Em voo \u00e9 poss\u00edvel fazer com que o Arducopter v\u00e1 at\u00e9 onde se \n\npretende, pressionando com o bot\u00e3o direito do rato no mapa, escolhendo a op\u00e7\u00e3o \u201cfly to \n\nhere\u201d. Isto far\u00e1 com que o Arducopter paire no local onde foi indicado, este modo de voo \u00e9 \n\n\n\n44 \n \n\nchamado modo guiado e s\u00f3 pode ser utilizado se existir um sistema de telemetria que \n\ncomunique entre o Arducopter e o programa em tempo-real [56]. \n\n O modo guiado \u00e9 separado dos outros modos e uma vez selecionado no Arducopter, ir\u00e1 \n\npermanecer no ponto selecionado at\u00e9 que seja adicionado outro ponto em modo guiado ou \n\nat\u00e9 que seja escolhido outro modo de voo. No caso de outro modo de voo ser o auto, ele \n\nretomar\u00e1 a miss\u00e3o onde foi deixada [56]. \n\n6.2-Defini\u00e7\u00e3o de waypoints atrav\u00e9s de um editor point and click  \nPara efectuar uma miss\u00e3o atrav\u00e9s do Mission Planner, \u00e9 necess\u00e1rio escolher o separador \n\n\u201cflight planner\u201d e em seguida indicar a miss\u00e3o clicando no mapa. Podemos alterar os \n\npar\u00e2metros dos waypoints conforme a miss\u00e3o pretendida. A altitude em voo \u00e9 sempre \n\nrelativa \u00e0 altitude da descolagem. Se o Arducopter for lan\u00e7ado j\u00e1 no ar, essa altura ser\u00e1 a \n\nsua altitude 0. O default Alt \u00e9 a altura com que se inserirem os waypoints. Ao escolher a \n\nop\u00e7\u00e3o Verify height significa que o helic\u00f3ptero usar\u00e1 a altura do relevo do Google Earth \n\ncomo altura de refer\u00eancia. Este modo \u00e9 bom pois faz com que em modos de voo aut\u00f3nomos \n\no Arducopter n\u00e3o v\u00e1 de encontro a obst\u00e1culos, como por exemplo montanhas [57].  \n\n6.2.1-Comandos b\u00e1sicos de waypoint  \n\nPara definir a miss\u00e3o o Mission Planner tem como comandos b\u00e1sicos [57]: \n\n\u2022 Waypoint - Tem como par\u00e2metros o delay, a altitude, a longitude e a latitude. O \n\ndelay \u00e9 feito ap\u00f3s o Arducopter chegar ao waypoint. \n\n\u2022 Loiter UnLim - Este comando faz com que o Arducopter fa\u00e7a loiter na posi\u00e7\u00e3o em \n\nque se encontra quando o comando \u00e9 chamado. \n\n\u2022 Loiter_Time - Tem como par\u00e2metros o tempo, a altura, a latitude e a longitude. Este \n\ncomando far\u00e1 com que o Arducopter fa\u00e7a loiter durante o tempo especificado, na \n\nlatitude, na longitude e altura especificada. \n\n\u2022 Loiter_turns - Tem como par\u00e2metros o n\u00famero de voltas que o Arducopter far\u00e1. \n\nEste comando faz com que o Arducopter fa\u00e7a loiter na posi\u00e7\u00e3o em que se encontra \n\nquando o comando \u00e9 chamado. \n\n\u2022 Return_to_launch - Este comando necessita que o GPS esteja ativo e sincronizado, \n\nfaz com que o Arducopter regresse ao waypoint home com a altura indicada. Caso o \n\n\n\n45 \n \n\npar\u00e2metro esteja a zero, o Arducopter regressar\u00e1 ao waypoint home \u00e0 altura em que \n\nse encontra. \n\n\u2022 Land - Este comando far\u00e1 com que o Arducopter aterre. Se o sonar estiver ativo, ele \n\nmanter\u00e1 a posi\u00e7\u00e3o a uma altura de 3 metros e em seguida descer\u00e1. Neste comando \n\nos motores n\u00e3o param, sendo necess\u00e1rio mudar o modo de voo para Stabilize para \n\npoder deslig\u00e1-los. \n\n\u2022 Takeoff - Este comando tem como par\u00e2metro a altura. O comando far\u00e1 com que o \n\nArducopter levante voo e mantenha a sua posi\u00e7\u00e3o at\u00e9 a altura indicada nos \n\npar\u00e2metros. \n\n\u2022 Condition_delay - Tem como par\u00e2metro o tempo em segundos. Este comando far\u00e1 \n\ncom que o pr\u00f3ximo comando condicional tenha um igual ao indicado nos \n\npar\u00e2metros. \n\n\u2022 Condition_distance - Tem como par\u00e2metro a dist\u00e2ncia em metros. Este comando \n\nfar\u00e1 com que o Arducopter cumpra uma condi\u00e7\u00e3o quando a dist\u00e2ncia para o \n\npr\u00f3ximo waypoint seja a indicada. \n\n\u2022 Condition_Change_alt - Tem como par\u00e2metro a altura em metros. Este comando \n\nfar\u00e1 com que a altura indicada sobreponha a altura no pr\u00f3ximo waypoint. \n\n\u2022 Condition_yaw - Tem como par\u00e2metros a dire\u00e7\u00e3o e rota\u00e7\u00e3o no sentido dos ponteiros \n\ndo rel\u00f3gio (valor 1) ou ent\u00e3o ao contr\u00e1rio (valor 0).   \n\n\u2022 Do_jump - Este comando faz com que o helic\u00f3ptero salte o comando para um \n\nwaypoint com o \u00edndice indicado nos par\u00e2metros. Tem como par\u00e2metros o \u00edndice do \n\ncomando pretendido e o n\u00famero de vezes que deve ser executado o salto. \n\n\u2022 Do_Change speed - Muda a velocidade e mant\u00ea-la-\u00e1 configurada at\u00e9 ser novamente \n\nreiniciado. \n\n\u2022 Do_set_relay - Este comando liga ou desliga o rel\u00e9 existente na placa APM (placa \n\nazul). \n\n\u2022 Do_set_servo - Este comando faz mover o servo e tem como par\u00e2metros o canal e o \n\nvalor de PWM. \n\n\u2022 Do_repeat_servo - Este comando \u00e9 semelhante ao anterior podendo indicar-se \n\nquantas vezes o comando repete, assim como a velocidade. Tem como par\u00e2metros o \n\ncanal, o valor de PWM, o n\u00famero de repeti\u00e7\u00f5es e o tempo do ciclo em segundos. \n\n\n\n46 \n \n\n6.2.2-Carregar um voo aut\u00f3nomo para a placa APM quando n\u00e3o dispomos de um \n\nsistema de telemetria sem fios \n\nAssim que a miss\u00e3o esteja realizada, pressiona-se \u201cWrite WPs\u201d para que a miss\u00e3o seja \n\nguardada na EEPROM da placa APM. \u00c9 poss\u00edvel verificar se tudo est\u00e1 em ordem ao \n\ncarregar-se em \u201cRead WPs\u201d. \n\nTamb\u00e9m \u00e9 poss\u00edvel guardar m\u00faltiplos ficheiros de waypoints no computador utilizando o \n\nbot\u00e3o \u201cSave WP file\u201d. Para se aceder aos ficheiros gravados no disco do PC utiliza-se o \n\nbot\u00e3o \u201cLoad WP file\u201d [57]. \n\n6.3-Fazer download e an\u00e1lise dos ficheiros log  \nNo separador \u201cTelemetry Logs\u201d, se se utilizar o Xbee ou outro sistema de telemetria sem \n\nfios ligado ao Mission Planner, \u00e9 poss\u00edvel gravar os relat\u00f3rios do voo num ficheiro tlog. \n\nEste ficheiro encontra-se no Mission Planner na pasta de log. \u00c9 tamb\u00e9m poss\u00edvel fazer o \n\ndownload de ficheiros logs assim como convert\u00ea-los num ficheiro KML que pode ser \n\nvisualizado no Google Earth. Estes encontram-se tamb\u00e9m na pasta de log [58]. \n\n6.3.1-Fazer download \n\nDeve-se assegurar que se seleciona a porta COM correta ao conectarmos a placa ao Mission \n\nPlanner. Seleciona-se o log download do separador \u201cterminal\u201d do Mission Planner, ent\u00e3o \n\naparecer\u00e1 uma lista com os logs que se encontram em mem\u00f3ria. Esses ficheiros podem ser \n\nselecionados de forma individual, ou todos de uma vez. Pode-se ainda obter os ficheiros log \n\ndiretamente do CLI escrevendo \u201cdump -1\u201d [58]. \n\n 6.3.2-Analisar os ficheiros log  \n\nPara analisar os ficheiros basta clicar no ficheiro pretendido e abrir\u00e1 o Log Browser. Ao \n\nprinc\u00edpio parece um pouco confuso perceber como est\u00e1 estruturado mas a estrutura \u00e9 feita \n\nda seguinte forma [58]: \n\n\u2022 As primeiras 256 linhas s\u00e3o os comandos e ap\u00f3s essas linhas o log alternar\u00e1 entre \n\nattitude (valores dos aceler\u00f3metros) e GPS. Se o GPS for 0 significa que o GPS n\u00e3o \n\nestava sincronizado nessa altura. \n\n\u2022 Cada linha representa um data log que \u00e9 feito v\u00e1rias vezes por segundo. \n\n\n\n47 \n \n\n\u2022 Os dados mais importantes s\u00e3o os de attitude, est\u00e1 dividido em 3, nomeadamente, \n\nroll, pitch e yaw. Clicando na c\u00e9lula aparecer\u00e1 um gr\u00e1fico com a varia\u00e7\u00e3o dos \n\nvalores respetivos. \n\nPara mais informa\u00e7\u00f5es de como analisar os ficheiros log encontra-se na refer\u00eancia [59]  \n\n6.4-utiliza\u00e7\u00e3o de um gamepad /joystick para controlar o Arducopter \n\nmanualmente em vez do controlo remoto  \nO Arducopter permite que se controle o helic\u00f3ptero utilizando um joystick, enviando os \n\ncomandos atrav\u00e9s do Xbee, em vez de utilizar o sistema de controlo remoto. Para isso s\u00e3o \n\nnecess\u00e1rios os seguintes equipamentos [60]: \n\n\u2022 Um sistema de telemetria sem fios como o Xbee. \n\n\u2022 Um joystick ou gamepad com liga\u00e7\u00e3o USB. \n\n\u2022 Um port\u00e1til na \u00e1rea de voo. \n\nO Mission Planner facilita a configura\u00e7\u00e3o dos comandos do joystick ou do gamepad. \u00c9 \n\nrecomendado ter o controlo remoto ligado, pois no caso de alguma perda de sinal o controlo \n\nremoto assumir\u00e1 o comando. Assim que o comando esteja ligado, seleciona-se o bot\u00e3o \n\n\u201cjoystick\u201d (que se encontra no separador \u201cflight data\u201d), ent\u00e3o abrir\u00e1 uma janela que \n\npermitir\u00e1 configurar os bot\u00f5es do comando. Para configur\u00e1-los \u00e9 necess\u00e1rio [60]: \n\n\u2022 Clicar em \u201cAuto Detect\u201d e mexer os sticks ou bot\u00f5es do comando de forma a \n\nconfigur\u00e1-lo. \n\n\u2022 Pode-se inverter os eixos fazendo check na checkbox \u201creverse.\u201d \n\nQuando tudo estiver configurado clica-se em \u201cenable\u201d e o Mission Planner far\u00e1 com \n\nque o comando configurado assuma o lugar do controlador manual. As restantes \n\nfun\u00e7\u00f5es mant\u00eam-se. Se carregar em \u201cSave \u201d o sistema guardar\u00e1 as configura\u00e7\u00f5es, sendo \n\ndesignar modos autopilot atrav\u00e9s dos bot\u00f5es do comando. \n\n6.5-Scripting em Phyton  \nNo Mission Planner \u00e9 poss\u00edvel executar scripts em phyton, de forma a programar o \n\nArducopter facilmente. Para aceder e executar o script, deve-se carregar no bot\u00e3o \u201cScript\u201d \n\n\n\n48 \n \n\n(que se encontra no separador \u201cflight data\u201d), escrever o script. Ao fechar abrir\u00e1 uma janela \n\nindicando se se quer executar o script ou n\u00e3o. \n\nAl\u00e9m dos comandos do phyton existem os comandos que s\u00e3o espec\u00edficos do Mission \n\nPlanner, sendo eles [61]: \n\n\u2022 cs.???? \u2013 estado atual, qualquer vari\u00e1vel no separador \u201cstatus\u201d do Mission Planner \n\npode ser usada onde se encontra os ???? de forma a saber o seu valor. \n\nO Script tem como op\u00e7\u00f5es: \n\n\u2022 Script.Sleep (ms) \u2013 faz uma pausa no processamento durante os milissegundos. \n\n\u2022 Script.ChangeParam (nome,valor) \u2013 muda o valor do par\u00e2metro. \n\n\u2022 Script.GetParam (nome) \u2013 obt\u00e9m o valor do par\u00e2metro. \n\n\u2022 Script.ChangeMode (modo) \u2013 muda o modo de voo. \n\n\u2022 Script.WaitFor (string,tempo) \u2013 imprime a string espera o tempo especificado no \n\ncomando. \n\n\u2022 Script.SendRC(canal,pwm,sendnow) \u2013 envia um sinal pwm para o canal e o \n\nsendnow \u00e9 uma vari\u00e1vel booleana. \n\n6.6-Controlo atrav\u00e9s do terminal CLI \nN\u00e3o \u00e9 necess\u00e1rio usar o Mission Planner para fazer a configura\u00e7\u00e3o do helic\u00f3ptero. O modo \n\nCLI pode ser usado em qualquer terminal s\u00e9rie, dispon\u00edvel em qualquer sistema operativo. \n\nO modo CLI serve tamb\u00e9m para definir fun\u00e7\u00f5es, como escolher os modos de voo \n\ndesejados, que ser\u00e3o utilizados no control switch do r\u00e1dio (bot\u00e3o de 3 posi\u00e7\u00f5es). \u00c9 poss\u00edvel \n\nentrar no modo CLI atrav\u00e9s do terminal do Mission Planner carregando no separador \n\n\u201cterminal\u201d [62]. \n\nDentro do modo CLI pode-se sempre escrever o comando \u201chelp\u201d de forma a obter-se a lista \n\nde todos os comandos dispon\u00edveis. Existem 4 tipos de menu de n\u00edvel topo [62]: \n\n\u2022 Setup \u2013 Um menu para configura\u00e7\u00f5es. \n\n\u2022 Log \u2013 Um menu para a gest\u00e3o dos ficheiros log. \n\n\u2022 Test \u2013 Um menu para testar sensores.  \n\n\u2022 Planner \u2013 Um menu recente que ainda est\u00e1 em desenvolvimento. \n\n\n\n49 \n \n\nCada um destes menus cont\u00e9m sub-menus cujos comandos podem ser novamente \n\nverificados pelo comando \u201chelp\u201d. \n\nDentro do menu Setup temos os seguintes comandos [62]: \n\n\u2022 Erase \u2013 Apaga os dados da EEPROM. \n\n\u2022 Reset \u2013 Faz um reset \u00e0 EEPROM e inicia os valores de f\u00e1brica. \n\n\u2022 Radio \u2013 Guarda os valores limite dos v\u00e1rios canais do controlo remoto. \n\n\u2022 Motors \u2013 Move os motores atrav\u00e9s do controlador do controlo remoto( mover o \n\nstick de pitch para cima far\u00e1 mover o motor da frente, ao mover o stick de pitch para \n\nbaixo far\u00e1 mover o motor para de tr\u00e1s, ao mover o stick de roll para direita far\u00e1 \n\nmover o motor da direita e assim sucessivamente). \n\n\u2022 Level \u2013 Faz uma calibra\u00e7\u00e3o nos valores do aceler\u00f3metros, neste helic\u00f3ptero deve \n\nestar numa superf\u00edcie nivelada. \n\n\u2022 Modes \u2013 Faz a configura\u00e7\u00e3o dos modos de voo. Usa-se o stick de roll para escolher \n\no modo de voo e a tecla enter para gravar as configura\u00e7\u00f5es. \n\n\u2022 Frame \u2013 Configura a estrutura( em x ou +). \n\n\u2022 Current \u2013 Ativa o sensor de corrente AttoPillot. \n\n\u2022 Sonar \u2013 Ativa o sensor ultrass\u00f3nico.  \n\n\u2022 Compass \u2013 Ativa o magnet\u00f3metro. \n\n\u2022 Declination \u2013 Indica a declina\u00e7\u00e3o do magnet\u00f3metro em rela\u00e7\u00e3o aos polos. \n\n\u2022 Show \u2013 Apresenta uma lista com as configura\u00e7\u00f5es efetuadas. \n\nDentro do menu Log temos os seguintes comandos [62]: \n\n\u2022 Dump \u2013 Descarrega o log com o n\u00famero indicado, por exemplo \u201cdump (1)\u201d \n\ndescarrega o log  n\u00famero 1.Caso o n\u00famero seja 0, descarrega e apaga todos o logs. \n\n\u2022 Erase \u2013 Apaga todos os logs. \n\n\u2022 Enable \u2013 Ativa o log com o nome, por exemplo \u201cenable log1\u201d ativa o log1. Se se \n\nescrever \u201call\u201d em vez do nome ativa todos os logs. \n\n\u2022 Disable \u2013 Desativa o log com o nome, por exemplo \u201cdisable log1\u201d desativa o log1. \n\nSe se escrever \u201call\u201d em vez do nome desativa todos os logs. \n\n\n\n50 \n \n\nDentro do menu Test temos os seguintes comandos [62]: \n\n\u2022 Pwm \u2013 Apresenta os valores PWM de todos canais enviados atrav\u00e9s do controlo \n\nremoto. \n\n\u2022 Radio \u2013 Apresenta os valores de todos o canais do controlo remoto em graus. \n\n\u2022 GPS \u2013 Apresenta os valores do GPS. \n\n\u2022 Ins \u2013 Apresenta os valores da attitude( aceler\u00f3metros).  \n\n\u2022 Imu \u2013 Apresenta os valores da attitude( aceler\u00f3metros).  \n\n\u2022 Battery \u2013 Apresenta os valores da voltagem se existir um monitor de voltagem \n\nligado. \n\n\u2022 Tune \u2013 N\u00e3o \u00e9 atualmente usado. \n\n\u2022 Relay \u2013 Liga e desliga o rel\u00e9. \n\n\u2022 Wp \u2013 Apresenta os valores dos waypoints gravados para a miss\u00e3o aut\u00f3noma. \n\n\u2022 Altitude \u2013 Apresenta a altura segundo os valores do bar\u00f3metros que se encontra na \n\nplaca APM oilpan( placa azul). \n\n\u2022 Sonar \u2013 Apresenta os valores do sonar. \n\n\u2022 Compass \u2013 Apresenta o \u00e2ngulo de graus norte( norte=0); \n\n\u2022 Optflow \u2013 Apresenta os valores do sensor de fluxo \u00f3ptico \n\nExiste um novo menu chamado Planner, que foi adicionado recentemente, n\u00e3o existe \n\nnenhuma documenta\u00e7\u00e3o sobre a sua funcionalidade. Este menu apenas disp\u00f5e do comando: \n\n\u2022 Gcs \n\nDevido \u00e0 falta de informa\u00e7\u00e3o sobre este comando, n\u00e3o \u00e9 aconselh\u00e1vel o seu uso. \n\n6.6.1-Como configurar o Arducopter atrav\u00e9s do CLI  \n\nFaz-se o carregamento do firmware atrav\u00e9s do Mission Planner ou atrav\u00e9s do Arduino. \n\nClica-se no separador para iniciar caso n\u00e3o tenha sido dada a entry prompt do CLI. Para \n\naceder-se a cada um dos 3 menus escreve-se o nome do menu (Setup,Log, ou Test) e dentro \n\nde cada menu existem os v\u00e1rios comandos que est\u00e3o indicados acima. Antes do primeiro \n\nvoo deve-se seguir os seguintes comandos do menu Setup [62]: \n\n\u2022 \u201cReset\u201d de forma a limpar os valores anteriores para que n\u00e3o existam conflitos. \n\n\n\n51 \n \n\n\u2022 Ap\u00f3s fazer o reset liga-se o r\u00e1dio e escreve-se o comando radio. Ser\u00e1 pedido para \n\nmover os controlos deste e pressionar a tecla enter para gravar os valores m\u00e1ximos. \n\n\u2022 Executa-se o comando \u201cLevel\u201d com o Arducopter numa superf\u00edcie plana. \n\n\u2022 Executa-se o comando \u201cFrame\u201d que tem como estrutura padr\u00e3o a estrutura em \u201cx\u201d. \n\nNo caso de se querer a orienta\u00e7\u00e3o como sendo em + deve-se indic\u00e1-la escrevendo o \n\ncomando \u201cframe +\u201d. \n\n\u2022 Executa-se o comando \u201cModes\u201d para indicar os modos de voo no canal 5 do \n\nhelic\u00f3ptero, a sele\u00e7\u00e3o do modo \u00e9 feita utilizando o stick de roll. O stick de yaw serve \n\npara indicar se o modo simple \u00e9 ativo ou n\u00e3o. No controlo do canal 5 do r\u00e1dio \n\n(bot\u00e3o de 3 posi\u00e7\u00f5es) indicamos a posi\u00e7\u00e3o para qual o modo \u00e9 definido e quando \n\nestiver conclu\u00eddo clicamos na tecla enter de forma a guardar as configura\u00e7\u00f5es. \n\n\u2022 Escreve-se \u201csonar on\u201d para ativ\u00e1-lo. Para escolher o modelo do sonar devemos \n\nescrever o comando \u201csonar 0,1 ou 2\u201d para os modelos XL-EZ0,  LV-EZ0 e XL-\n\nEZL0, respetivamente. O sonar dispon\u00edvel \u00e9 o LV-EZ3, por isso deve-se escrever o \n\ncomando \u201csonar 1\u201d.  \n\n\u2022 Da mesma forma escreve-se \u201ccompass on\u201d para ativar o magnet\u00f3metro. \n\n\u2022 Escreve-se por exemplo \u201cdeclination 14.25\u201d para gravar a inclina\u00e7\u00e3o para a b\u00fassola. \n\nPara achar a declina\u00e7\u00e3o da b\u00fassola deve-se ir ao link dispon\u00edvel na refer\u00eancia [63] \n\ncolocar a latitude, a longitude e a data. De seguida faz-se o c\u00e1lculo da declina\u00e7\u00e3o e \n\nintroduz-se esse valor. \n\n\u2022 Por fim executa-se o comando \u201cexit\u201d para sair do menu Setup. \n\nEscreve-se \u201cTest\u201d para entramos no menu Test e executa-se o comando \u201cRadio\u201d para se \n\nverificar os valores do r\u00e1dio movendo os sticks de roll e pitch, como se encontra na sec\u00e7\u00e3o \n\n4.4.1, Para baixo e para a direita os valores devem ser aproximadamente de 4500 nos dois \n\n(roll e pitch), O stick de throttle deve ser entre os valores 0-800 e o stick de yaw os valores \n\ndevem ser de -4500 se este estiver para a esquerda, e de 4500 se estiver para a direita. \n\nAp\u00f3s estes passos o Arducopter est\u00e1 pronto para voo. Apesar destes passos poderem ser \n\nfeitos atrav\u00e9s do modo CLI, \u00e9 prefer\u00edvel faz\u00ea-los atrav\u00e9s do APM Mission Planner, visto \n\neste ter uma interface gr\u00e1fica, facilitando os passos de configura\u00e7\u00e3o. As instru\u00e7\u00f5es Para a \n\nconfigura\u00e7\u00e3o est\u00e3o descritas na sec\u00e7\u00e3o 7.8. \n\n\n\n52 \n \n\n7-Configura\u00e7\u00f5es Pr\u00e9-voo \n\nEste cap\u00edtulo apresenta o uma serie de procedimentos a serem compridos antes de se efetuar \n\num voo. \n\n7.1-Como funciona o sistema do Arducopter  \nO Arducopter pode fazer 4 tipos de movimentos, um para cada canal de transmiss\u00e3o. Com a \n\nestrutura em + (que \u00e9 a que se encontra definida no Arducopter usado), o seu \n\ncomportamento em voo \u00e9 o seguinte [8]: \n\nO movimento pitch (em que o Arducopter inclina-se para a frente ou para tr\u00e1s), \u00e9 feito \n\naumentando a pot\u00eancia do motor oposto. Para andar para a frente, o Arducopter aumenta a \n\npot\u00eancia do motor da parte de tr\u00e1s e vice-versa. \n\nO movimento de roll (em que o Arducopter inclina-se para a esquerda ou para a direita), \u00e9 \n\nfeito aumentando a pot\u00eancia do motor do lado oposto. Para andar para esquerda, o \n\nArducopter aumenta a pot\u00eancia do motor da direita e vice-versa. \n\nO movimento de yaw (em que o Arducopter roda para a esquerda ou para a direita), \u00e9 feito \n\naumentando um par de motores. Para rodar para a esquerda \u00e9 ativado o par que roda no \n\nsentido contr\u00e1rio (neste caso \u00e9 o par de motores da esquerda e da direita). Para rodar para a \n\ndireita \u00e9 aumentado o outro par de motores (neste caso s\u00e3o os motores da frente e de tr\u00e1s). \n\nO movimento de throttle (que faz o Arducopter levantar do solo), \u00e9 feito aumentado a \n\npot\u00eancia de todos os motores por igual. Quanto mais pot\u00eancia \u00e9 aplicada nos motores mais \n\nalto o Arducopter sobe. \n\n  \n\n\n\n53 \n \n\nA figura 25 ilustra o texto acima, indicando os v\u00e1rios movimentos feitos pelo Arducopter. \n\n \n\nFigura 25 - V\u00e1rios movimento poss\u00edveis para um quadcopter com estrutura em + [8] \n\n7.2-Voo \n\nO Arducopter permite os seguintes modos de voo [23]: \n\n\u2022 Acro: este modo destina-se a voos acrob\u00e1ticos (s\u00f3 deve ser utilizado quando temos \n\ngrande dom\u00ednio sobre o helic\u00f3ptero), pelo que n\u00e3o \u00e9 recomendado a principiantes. \n\n\u2022 Stabilize: este modo tentar\u00e1 manter o Arducopter equilibrado. \u00c9 um bom modo de \n\nvoo para FPV (first person view), sendo que o valor dos sticks indicar\u00e1 o valor do \n\n\u00e2ngulo que o Arducopter deve manter. O controlo dos \u00e2ngulos \u00e9 feito na ordem de \n\n45? em 45?. O yaw manter-se-\u00e1 na dire\u00e7\u00e3o indicada, um movimento no stick de yaw \n\n\n\n54 \n \n\nfar\u00e1 com que o helic\u00f3ptero mude a sua rota\u00e7\u00e3o consoante o valor do stick. Largar o \n\nstick de yaw far\u00e1 o helic\u00f3ptero manter a nova posi\u00e7\u00e3o. \n\n\u2022 Alt Hold: \u00e9 um modo semelhante ao Stabilize mas com a pot\u00eancia das h\u00e9lices \n\najustada automaticamente de forma a manter a altitude. Essa altitude pode ser \n\ncontrolada levantando o stick de throttle (faz o helic\u00f3ptero aumentar a altitude) ou \n\nbaixando o stick de throttle (faz o helic\u00f3ptero diminuir a sua altitude). Deixar o stick \n\nde throttle na posi\u00e7\u00e3o de repouso, faz com que este mantenha a altitude. \n\nUm dos cuidados a ter neste modo \u00e9 com a sua desativa\u00e7\u00e3o, pois o valor de throttle \n\nser\u00e1 o mesmo que o indicado no comando. Assim, quando este modo for \n\ndesativado, o Arducopter pode subir ou descer rapidamente, causando assim um \n\nacidente. \n\nNeste modo n\u00e3o \u00e9 poss\u00edvel aterrar e parar os motores completamente (uma vez que \n\neste modo controla a altitude do helic\u00f3ptero e n\u00e3o os motores). \u00c9 aconselh\u00e1vel \n\nmudar o modo para o Stabilize e assim aterrar.  \n\n\u2022 Simple: este modo \u00e9 o que \u00e9 muitas vezes chamado de \u201ccare free\u201d em outros \n\nmulticopters. Permite o utilizador voar sem se preocupar com a orienta\u00e7\u00e3o do \n\nhelic\u00f3ptero. Se nos controlos apontar-se o Arducopter para norte ele seguir\u00e1 nessa \n\ndire\u00e7\u00e3o. Este modo \u00e9 muito \u00fatil para voos em que a sua visualiza\u00e7\u00e3o \u00e9 dificultada \n\npela longa dist\u00e2ncia.  \n\nEste modo pode ser sempre selecionado juntamente com qualquer outro modo de \n\nvoo. \n\nQuando se usa este modo deve-se primeiro arm\u00e1-lo na orienta\u00e7\u00e3o correta antes de se \n\nlevantar voo. Assim quando se apontar o controlo para a frente ele deve seguir em \n\nfrente e ao carregar-se para tr\u00e1s ele deve vir na dire\u00e7\u00e3o oposta.  \n\n\u2022 Auto: este modo faz com que o helic\u00f3ptero siga as instru\u00e7\u00f5es internas de scripting \n\nde forma a controlar as suas a\u00e7\u00f5es. As suas miss\u00f5es podem ser simples waypoints \n\nou a\u00e7\u00f5es complexas como levantar voo, rodar v\u00e1rias vezes, tirar fotos, entre outros. \n\nPara aterrar \u00e9 necess\u00e1rio outra vez mudar para o modo Stabilize, visto que no modo \n\nautom\u00e1tico apenas controla-se a altitude e n\u00e3o os motores. \n\n\n\n55 \n \n\n\u2022 RTL: Este modo permite que o helic\u00f3ptero retorne \u00e0 localiza\u00e7\u00e3o de in\u00edcio (ou seja \n\nreturn to home location). Este modo retorna \u00e0 posi\u00e7\u00e3o inicial com a mesma altura a \n\nn\u00e3o ser que seja especificado outro valor atrav\u00e9s do Mission Planner. \n\nDe forma semelhante ao modo Auto, n\u00e3o \u00e9 poss\u00edvel aterrar neste modo, da\u00ed ter-se \n\nque mudar, por exemplo para o modo Stabilize. \n\n\u2022 Guided: Este modo \u00e9 semelhante ao RTL com a particularidade de se indicar a \n\nlocaliza\u00e7\u00e3o no mapa. Este modo apenas funciona se se tiver um kit de telemetria que \n\npermita que durante voo indicar o local pretendido. \n\n\u2022 Loiter: Este modo serve para manter o voo na localiza\u00e7\u00e3o atual. \n\nComo no modo Alt Hold, a altitude \u00e9 controlada atrav\u00e9s do stick de throttle. Ao \n\nmudar-se a posi\u00e7\u00e3o do stick do roll e do pitch, este modo far\u00e1 controlar a posi\u00e7\u00e3o do \n\nhelic\u00f3ptero. \n\n\u2022 Position: \u00c9 semelhante ao modo Loiter mas com throttle manual. \n\n\u2022 Circle: Este modo serve para orbitar numa certa localiza\u00e7\u00e3o. \u00c9 semelhante ao Loiter \n\nmas a parte da frente do helic\u00f3ptero aponta sempre em dire\u00e7\u00e3o ao centro.  \n\nNo modo Circle a localiza\u00e7\u00e3o ser\u00e1 o centro da \u00f3rbita. \n\n\u2022 Follow Me: \u00c9 uma op\u00e7\u00e3o muito \u00fatil pois permite que o Arducopter siga uma \n\nlocaliza\u00e7\u00e3o de waypoint din\u00e2mico. Para este modo \u00e9 necess\u00e1rio ter um kit de \n\ntelemetria, assim como dois dispositivos Bluetooth, um no GCS e outro no \n\nArducopter. O Arducopter seguir\u00e1 o port\u00e1til atrav\u00e9s do seu sinal de bluetooth. \n\nNota: os modos Auto, RTL e Guided apenas devem ser utilizados quando o GPS se \n\nencontra sincronizado.  \n\n7.3-Seguran\u00e7a  \n\nO Arducopter \u00e9 uma m\u00e1quina e, como em todas as m\u00e1quinas podem existir falhas. As \n\nfalhas podem ser, quer por parte do piloto, ou atrav\u00e9s do sistema hardware/software do \n\nequipamento [64]. \n\nAntes de qualquer voo \u00e9 necess\u00e1rio ler os avisos dispon\u00edveis no manual, de como ligar os \n\ncomponentes e por exemplo retirar as h\u00e9lices quando testamos os motores. Deve-se deixar \n\numa dist\u00e2ncia de seguran\u00e7a, ao manobrar este tipo de equipamento, para que em caso de \n\nfalhas n\u00e3o se por a vida de ningu\u00e9m em risco [64]. \n\n\n\n56 \n \n\nEstas s\u00e3o as regras base para um voo em seguran\u00e7a [64]: \n\n\u2022 Apenas ligar a bateria quando for para voo. \n\n\u2022 Ter sempre o modo de voo Simple como uma das 3 op\u00e7\u00f5es do bot\u00e3o de 3 posi\u00e7\u00f5es \n\ndo r\u00e1dio emissor. Por exemplo ventos fortes provocam desvios no movimento do \n\nhelic\u00f3ptero, principalmente a grande altitude. A utiliza\u00e7\u00e3o do modo de voo Simple \n\nevita que isto aconte\u00e7a, pois este modo faz com que a sua orienta\u00e7\u00e3o seja sempre a \n\nmesma. \n\n\u2022 Enquanto n\u00e3o se dominar o voo manual e autom\u00e1tico deve-se evitar os voos a alta \n\nvelocidade e grande altitude. \u00c9 normal perder o controlo do helic\u00f3ptero quando este \n\nse encontra acima do n\u00edvel das \u00e1rvores, devido ao vento ser maior nessas regi\u00f5es. \n\nDeve-se utilizar o helic\u00f3ptero a baixa altitude (entre 2 e 3 metros), voar a baixa \n\nvelocidade, em zonas amplas e estar constantemente a utilizar os modos Simple e \n\nRTL. \n\n\u2022 Ao utilizar o controlo remoto n\u00e3o se deve fazer movimentos bruscos com os \n\ncomandos (especialmente o stick de throttle). Se o dispositivo estiver bem calibrado \n\ndeve-se apenas fazer movimentos pequenos e suaves. O helic\u00f3ptero dever\u00e1 manter-\n\nse mais est\u00e1vel na horizontal se n\u00e3o se utilizar os restantes comandos.  \n\n\u2022 Ao assumir que os motores est\u00e3o armados deve-se dar um toque suave no throttle, \n\npara confirmar se os motores est\u00e3o armados. \n\n\u2022 Verificar sempre se o helic\u00f3ptero est\u00e1 a estabilizar-se corretamente. \n\n\u2022 Evitar voar a grande altitude com pouca bateria. \n\n\u2022 Com FPV (first person view) deve-se utilizar os modos Simple, Stabilize e RTL, \n\nmas devemos testar primeiro o RTL. \n\n\u2022 Se perder a orienta\u00e7\u00e3o do yaw no modo Stabilize, deve tentar voar apenas para a \n\nfrente e utilizar o yaw para virar (como se se tratasse de um carro por controlo \n\nremoto). \n\n7.4-Armar e desarmar os motores  \nPara que os motores n\u00e3o se ativem acidentalmente quando transporta-se o Arducopter, \n\nexiste uma esp\u00e9cie de c\u00f3digo de forma a poder us\u00e1-los (armar) e voltar a bloque\u00e1-los \n\n(desarmar) quando n\u00e3o for necess\u00e1rio o seu uso. Antes de armar os motores, deve-se ter o \n\n\n\n57 \n \n\ncuidado de n\u00e3o ter nem pessoas nem objetos perto das h\u00e9lices. Deve-se armar o Arducopter \n\napenas num espa\u00e7o aberto e livre de todo o tipo de obst\u00e1culos. Liga-se a bateria de LiPo e \n\nespera-se at\u00e9 que a placa APM reinicie, mostrando os leds verde e vermelho a piscar. Caso \n\nse tenha os 4 fios que cont\u00eam o sinal dos motores desconectados dos pins de output da \n\nplaca APM, os motores tentar\u00e3o rodar e estar\u00e3o constantemente a apitar [65]. Para \n\narmarmos os motores deve-se ligar os 4 fios \u00e0 placa como mostra a figura 26 do anexo B.5. \n\n \n\nFigura 26 \u2013 Liga\u00e7\u00e3o do cabo de sinal dos motores \u00e0 APM [66] \n\n \n\nA arma\u00e7\u00e3o \u00e9 feita segundo o modo do r\u00e1dio transmissor. O r\u00e1dio dispon\u00edvel j\u00e1 se encontra \n\nconfigurado no modo 2, como se pode ver na figura 27. Para armar os motores neste modo \n\ndeve-se apenas mexer no stick da esquerda, todo para baixo e todo para a direita durante 2 \n\nsegundos, sendo que se pode verificar que est\u00e1 armado olhando para o led verde da placa \n\nque estar\u00e1 ligado [65]. \n\n \n\nFigura 27 - Indica\u00e7\u00e3o dos comandos do controlo remoto em modo 2 [65] \n\n\n\n58 \n \n\nPara desarmar \u00e9 semelhante, mas em vez do stick estar posicionado todo para a direita, este \n\ndeve estar posicionado todo para a esquerda durante 2 segundos. Pode-se verificar que o \n\nArducopter encontra-se desarmado, verificando se o led verde encontra-se intermitente \n\n[65]. \n\nNota: Apenas se pode armar e desarmar os motores do Arducopter caso este se encontre no \n\nmodo de voo manual (Acro ou Stabilize). Nos restantes modos n\u00e3o \u00e9 poss\u00edvel desarmar ou \n\narmar os motores [65]. \n\n7.5-Calibra\u00e7\u00f5es dos aceler\u00f3metros atrav\u00e9s do controlo remoto  \n\nDe forma semelhante \u00e0 arma\u00e7\u00e3o e desarma\u00e7\u00e3o dos motores, caso a arma\u00e7\u00e3o seja feita \n\ndurante 20 segundos, ativa-se um modo especial usando o modo Stabilize que dura 45 \n\nsegun0dos voando a cerca de 1,20 metros do ch\u00e3o. Este modo far\u00e1 a calibra\u00e7\u00e3o dos \n\naceler\u00f3metros em pleno voo, deve-se mant\u00ea-lo nivelado. Uma vez que este esteja \n\nequilibrado deve-se aterrar o Arducopter e esperar at\u00e9 que os 3 leds deixem de fazer ciclos \n\n(piscando um ap\u00f3s o outro) [65]. \n\nNo caso de se manter o comando da fun\u00e7\u00e3o de desarmar o Arducopter por cerca de 15 \n\nsegundos, ele far\u00e1 a recalibra\u00e7\u00e3o dos aceler\u00f3metros. O Arducopter deve-se encontrar numa \n\nsuperf\u00edcie nivelada para que a calibra\u00e7\u00e3o dos aceler\u00f3metros esteja correta [65]. \n\n7.6-Primeiro Voo  \n\nDeve-se assegurar que o modo de voo do controlo remoto est\u00e1 em Stabilize e lentamente \n\naumentar o throttle at\u00e9 que o helic\u00f3ptero esteja a alguns cent\u00edmetros do ch\u00e3o. Se por acaso \n\nparecer que o helic\u00f3ptero vai virar, ou n\u00e3o est\u00e1 a levantar de forma est\u00e1vel \u00e9 melhor aterr\u00e1-\n\nlo. De seguida, deve-se segur\u00e1-lo com a m\u00e3o, equilibrando-o no ar com as h\u00e9lices afastadas \n\ndo corpo aumenta-se o throttle aos poucos para ter no\u00e7\u00e3o de como o quadcopter se \n\ncomporta [65].  \n\nAo mover nos controlos o helic\u00f3ptero inclina-se nas dire\u00e7\u00f5es pretendidas? Se o helic\u00f3ptero \n\nn\u00e3o corresponder aos comandos, isso pode significar que existe alguma m\u00e1 configura\u00e7\u00e3o \n\ndos motores, ou que os motores n\u00e3o se encontram corretamente ligados, ou que o recetor \n\ndos canais do controlo remoto tenha os canais mal configurados. No caso de o Arducopter \n\n\n\n59 \n \n\nn\u00e3o voar da forma desejada \u00e9 sempre bom rever o equipamento, a fim de verificar se tudo \n\nest\u00e1 corretamente ligado [65].  \n\n7.7-Calibra\u00e7\u00e3o dos controladores ESC  \n\nPara que o helic\u00f3ptero consiga levantar voo de forma est\u00e1vel \u00e9 necess\u00e1rio fazer uma \n\nclibra\u00e7\u00e3o aos controladores ESC de forma a que todos os motores se liguem ao mesmo \n\ntempo. Alguns controladores ESC n\u00e3o se ligar\u00e3o a n\u00e3o ser que recebam um sinal PWM \n\nsuficiente. Devem-se configurar os controlos de r\u00e1dio atrav\u00e9s do setup do modo CLI ou \n\natrav\u00e9s do APM Mission Planner para que os ESC sejam ativados, caso contr\u00e1rio apenas \n\nouvir\u00e1 sons de beeps por parte do helic\u00f3ptero e n\u00e3o calibrar\u00e1 nada [67]. \n\nExistem duas maneiras de calibrar: uma manual, feita sem falhas e que funciona sempre \n\npara todos os ESC; a outra autom\u00e1tica, que funciona com grande parte dos ESC. Deve-se \n\nprimeiro tentar a maneira autom\u00e1tica, e ent\u00e3o se esta n\u00e3o funcionar devemos executar a \n\nmanual. \n\n7.7.1-Calibra\u00e7\u00e3o autom\u00e1tica  \n\nEsta calibra\u00e7\u00e3o \u00e9 feita com todos os controladores ao mesmo tempo. Durante a calibra\u00e7\u00e3o \u00e9 \n\nrecomend\u00e1vel retirar as h\u00e9lices. A calibra\u00e7\u00e3o executa-se segundo os seguintes passos [67]: \n\n\u2022 Deve-se certificar que o cabo com 4 fios que vem da placa de distribui\u00e7\u00e3o de \n\nenergia encontra-se ligado \u00e0 placa APM corretamente (nos primeiros 4 pins de sa\u00edda \n\nda placa). Este cabo \u00e9 o que fornece o sinal proveniente da placa APM aos motores. \n\n\u2022 Desconectar-se o cabo USB. \n\n\u2022 Nos controlos deve-se meter o throttle alto e ligar a bateria para fornecer energia \u00e0 \n\nAPM. \n\n\u2022 Quando a APM ligar, as luzes ir\u00e3o circular continuamente. \n\n\u2022 Desliga-se a bateria e liga-se novamente. Um sinal alto de PWM ser\u00e1 enviado para \n\nos controladores ESC acionando a calibra\u00e7\u00e3o. \n\n\u2022 Desloca-se o stick de throttle para o m\u00ednimo (todo em baixo). Dever\u00e1 ouvir-se um \n\nbeep ou dois de confirma\u00e7\u00e3o. Em seguida deve-se mover o stick de throttle e \n\nconfirmar que todos os controladores est\u00e3o a funcionar de forma sincronizada. \n\n\n\n60 \n \n\n\u2022 Por fim deve-se desligar a bateria. Os controladores ESC j\u00e1 se encontram \n\ncalibrados. \n\n 7.7.2-Calibra\u00e7\u00e3o Manual \n\nAo contr\u00e1rio da calibra\u00e7\u00e3o autom\u00e1tica, esta deve ser feita de forma individual a cada \n\ncontrolador. Novamente recomenda-se retirar as h\u00e9lices antes da calibra\u00e7\u00e3o. Os passos s\u00e3o \n\nos seguintes [67]:  \n\n\u2022 Com a bateria desligada, liga-se os 3 conetores do ESC que se pretende calibrar ao \n\ncanal de throttle do recetor de controlo remoto. \n\n\u2022 Liga-se o transmissor de r\u00e1dio e aumenta-se o stick de throttle para o m\u00e1ximo. \n\n\u2022 Liga-se o ESC \u00e0 bateria. \n\n\u2022 Dever\u00e1 ouvir-se uma nota musical e de seguida dois beeps. Depois dos dois beeps \n\ndeve-se largar o stick de throttle. De seguida ir\u00e1 ouvir-se um n\u00famero de beeps \n\n(equivalente ao n\u00famero de c\u00e9lulas da bateria, que neste caso \u00e9 de 3) e depois um \n\nlongo indicando que o ESC est\u00e1 calibrado. \n\n\u2022 Deve-se ent\u00e3o desligar a bateria e repetir o processo para os restantes controladores \n\nESC. \n\n\u2022 Caso um controlador ESC n\u00e3o calibre, deve-se inverter o canal de throttle pois deve \n\nestar ao contr\u00e1rio. \n\n7.7.3-Testes \n\n\u00c9 necess\u00e1rio efetuar pequenos teste de voo ap\u00f3s a calibra\u00e7\u00e3o, para confirmar que tudo se \n\nencontra em ordem. Ap\u00f3s estar tudo ligado corretamente assim que a placa iniciar, \n\narmamos os motores pondo o stick de yaw no m\u00e1ximo para a direita durante 2 segundos, de \n\nseguida deve-se dar uma pequena quantidade de throttle. Espera-se que todos os motores \n\nrodem \u00e0 mesma velocidade e comecem ao mesmo tempo [67]. \n\n7.8-Afina\u00e7\u00f5es dos par\u00e2metros do controlador PID  \nO controlador PID \u00e9 um mecanismo que serve para controlar v\u00e1rios dispositivos eletr\u00f3nicos \n\n[68]. O controlador tenta ajustar os valores de input de forma a que o valor de output \n\nmedido seja o mais pr\u00f3ximo do desejado, sendo que para tal, utiliza 3 vari\u00e1veis uma \n\nproporcional, uma integral e outra derivada do erro (diferen\u00e7a entre o valor de output e o \n\n\n\n61 \n \n\nvalor desejado). Na proporcional o controlador utiliza a vari\u00e1vel para diminuir o erro \n\nsegundo o erro atual. Na integral o controlador tenta chegar ao valor desejado atrav\u00e9s do \n\nconjunto de erros passados, diminuindo assim o tempo at\u00e9 chegar ao valor desejado. Na \n\nderivada o controlador, segundo o conjunto dos v\u00e1rios erros, tenta prever erros futuros. Por \n\nvezes pode-se dispensar o uso de certos termos, ficando apenas com controladores: PI, PD, \n\nP ou I, sendo o mais comum o PI, pois o termo da derivada \u00e9 suscet\u00edvel a medi\u00e7\u00f5es de \n\nvalores com ru\u00eddo. No separador \u201cconfiguration\u201d do Mission Planner \u00e9 poss\u00edvel afinar os \n\npar\u00e2metros do controlador PID do Arducopter para que, por exemplo, no caso de utilizar-se \n\num modelo que n\u00e3o seja oficial do Arducopter, possam-se alterar os par\u00e2metros PID para \n\nque o helic\u00f3ptero se torne mais est\u00e1vel [69]. No anexo D s\u00e3o apresentadas as poss\u00edveis \n\nafina\u00e7\u00f5es para que o controlo do Arducopter seja feito, sem oscila\u00e7\u00f5es e com um tempo de \n\nresposta menor.  \n\n7.9-Primeira configura\u00e7\u00e3o do Arducopter  \nA APM1 necessita de estar conectada a uma bateria externa. \u00c9 poss\u00edvel usar o USB e a \n\nbateria ligados ao mesmo tempo sem problemas. Antes da configura\u00e7\u00e3o \u00e9 aconselh\u00e1vel \n\nretirar o cabo de sinal dos motores da placa APM. \n\nPara fazer o primeiro setup \u00e9 necess\u00e1rio seguir os seguintes passos [70]: \n\n\u2022 Abre-se o Mission Planner e clicar no separador \u201cFirmware\u201d. \n\n\u2022 Clica-se em \u201cconnect\u201d no canto superior direito. O Mission Planner ir\u00e1 tentar \n\nconectar atrav\u00e9s do MAVlink. \n\n\u2022 Clica-se no bot\u00e3o \u201cAPM Setup (Quad)\u201d, abrir\u00e1 uma janela que passar\u00e1 por um \n\nprocesso de configura\u00e7\u00e3o. \n\nEsse processo de configura\u00e7\u00e3o segue os seguintes passos [70]: \n\n\u2022 Faz-se reset na placa \u2013 clicando no separador terminal, inserir o seguinte comando \u2013\n\nsetup e de seguida escreve-se \u201creset EEPROM\u201d. \n\n\u2022 Calibra-se o transmissor do controlo remoto \u2013 aparecer\u00e1 uma janela com os v\u00e1rios \n\ncomandos de voo com barras verdes e linhas vermelhas de forma a indicar os \n\nlimites de cada comando (Pitch, Roll, Yaw e Trottle). Quanto ao comando de pitch, \n\n\n\n62 \n \n\n\u00e9 prefer\u00edvel selecionar a op\u00e7\u00e3o de reverse para inverter o controlo de stick de forma \n\na ser mais intuitivo ao utilizar o controlo remoto (ao fazer pitch para a frente no \n\nstick do controlo remoto, este far\u00e1 o Arducopter andar para a frente). \n\n\u2022 Configura-se os modos de voo \u2013 \u00c9 poss\u00edvel configurar os v\u00e1rios modos de voo \n\natrav\u00e9s do bot\u00e3o de 3 bot\u00f5es de posi\u00e7\u00f5es do controlo remoto, atrav\u00e9s de comb-\n\nboxes. \u00c9 importante utilizar pelo menos um modo de voo manual como o modo \n\nStabilize para um dos modos de voo. \n\n\u2022  Configura-se o hardware \u2013 Nesta parte \u00e9 poss\u00edvel indicar que sensores est\u00e3o \n\nligados, apenas selecionando os necess\u00e1rios. \n\n\u2022 Configura-se a orienta\u00e7\u00e3o da estrutura se em + ou em x \u2013 \u00e9 poss\u00edvel selecionar a \n\norienta\u00e7\u00e3o desejada e existe ainda um bot\u00e3o \u201clevel\u201d para calibrar os aceler\u00f3metros. \n\nAo carregar no bot\u00e3o devemos garantir que o Arducopter encontra-se numa \n\nsuperf\u00edcie nivelada. \n\n\u2022 Antes de come\u00e7ar o voo \u00e9 necess\u00e1rio calibrar os controladores ESC (sec\u00e7\u00e3o 7.7) e \n\nverificar se as h\u00e9lices e a dire\u00e7\u00e3o da rota\u00e7\u00e3o correspondem \u00e0 estrutura em que se \n\nencontra. De seguida deve-se saber armar e desarmar os motores com o stick de \n\nyaw. Para armar os motores \u00e9 necess\u00e1rio meter o sitck de throttle a 0 e o de yaw \n\ntodo para o lado direito durante cerca de 2 segundos. Para desarmar \u00e9 semelhante \n\nmas o stick de yaw deve estar todo para o lado esquerdo (sec\u00e7\u00e3o 7.4). \n\n7.10-Failsafe  \nO sistema de failsafe \u00e9 um sistema que serve, por exemplo no caso de o controlo remoto \n\nestar fora do alcance, o helic\u00f3ptero conseguir lidar com a situa\u00e7\u00e3o (regressando \u00e0 sua \n\nposi\u00e7\u00e3o home). Para ativar o sistema de failsafe \u00e9 necess\u00e1rio definir o par\u00e2metro \n\nTHR_FAILSAFE a 1 (a 0 para desativ\u00e1-lo). \n\nCaso seja ativado o trigger de failsafe, o Arducopter levantar\u00e1 uns 10 metros, regressar\u00e1 \u00e0 \n\nposi\u00e7\u00e3o de home e aterrar\u00e1 ap\u00f3s 20 segundos. Este modo s\u00f3 funcionar\u00e1 caso o GPS se \n\nencontre sincronizado. Por medidas de seguran\u00e7a o sistema de retornar \u00e0 base s\u00f3 funcionar\u00e1 \n\ncaso o helic\u00f3ptero esteja armado e esteja cerca de 10 metros da sua posi\u00e7\u00e3o de home. Ao \n\nutilizar este modo \u00e9 necess\u00e1rio n\u00e3o desligar o controlo remoto acidentalmente, pois ele ir\u00e1 \n\naumentar a sua altitude em 10 metros e pairar\u00e1 na posi\u00e7\u00e3o em que se encontra. O modo de \n\n\n\n63 \n \n\nfailsafe \u00e9 ativado quando o recetor manda para a placa pouco sinal de throttle, por exemplo \n\nquando o r\u00e1dio emissor \u00e9 acidentalmente desligado [71]. \n\nAo usar o modo auto, existem dois modos de failsafe: No modo 1 quando o par\u00e2metro \n\nTHR_FS_ACTION est\u00e1 definido para 1, indica que ao haver uma falha por parte do recetor \n\no Arducopter deve regressar \u00e0 posi\u00e7\u00e3o home; O modo 2 em que o par\u00e2metro \n\nTHR_FS_ACTION est\u00e1 definido como 2, caso ocorra uma falha por parte do recetor (por \n\nfalta de sinal ou mau funcionamento) e este estiver em modo auto o Arducopter deve \n\ncontinuar a miss\u00e3o [71]. \n\n\n\n64 \n \n\n8-Voos de teste e resultados \n\nNeste cap\u00edtulo ser\u00e1 feito um pequeno resumo, dos v\u00e1rios voos de teste efetuados, assim \n\ncomo as conclus\u00f5es e melhorias sobre o equipamento. \n\nOs voos de teste foram feitos em dois locais: \n\n\u2022 Dentro da Universidade, no piso -2. \n\n\u2022 No parque de estacionamento da Universidade, perto da cantina. \n\nO primeiro objetivo foi testar os passos de configura\u00e7\u00e3o dos primeiros voos que se \n\nencontram indicados na sec\u00e7\u00e3o 7.8. Ap\u00f3s se efetuarem esses passos foi efetuada \u00e0 \n\ncalibra\u00e7\u00e3o dos motores. O primeiro voo foi realizado dentro da Universidade, os motores \n\nforam armados e os comandos testados. O Arducopter parecia estar bem configurado a \n\nn\u00edvel de estrutura e comandos. No primeiro voo foram obtidos os seguintes resultados: \n\n\u2022 O Arducopter voou como era suposto e no que diz respeito a fazer pitch, roll, yaw e \n\nthrottle todos os comandos respondiam corretamente. \n\n\u2022 Era dif\u00edcil, em voo saber onde se encontrava a parte da frente do Arducopter, visto \n\neste ser sim\u00e9trico em todos os bra\u00e7os.  \n\n\u2022 Tamb\u00e9m tornava-se dif\u00edcil controlar o stick de throttle ap\u00f3s o equipamento levantar \n\ndo ch\u00e3o, e este n\u00e3o permitia uma aterragem suave, por vezes levantando o \n\nArducopter ainda mais, em vez de o baixar. \n\n\u2022 Outra observa\u00e7\u00e3o resultante do primeiro voo foi que, devido \u00e0s pernas provenientes \n\nno kit serem muito pr\u00f3ximas do seu centro, estas faziam com que em voos de baixa \n\naltitude, ao se querer deslocar o Arducopter, este inclinava-se e tocava de rasp\u00e3o \n\ncom as suas h\u00e9lices no ch\u00e3o, partindo-as (figura 28). \n\n\n\n65 \n \n\n \n\nFigura 28 - Helic\u00f3ptero inclinando-se ao andar numa dire\u00e7\u00e3o \n\nComo j\u00e1 foi sido referido na sec\u00e7\u00e3o 4.2, o trem de aterragem original era muito pouco \n\nfi\u00e1vel, pois ao m\u00ednimo toque com o solo fazia com que as h\u00e9lices se inclinassem para o \n\nch\u00e3o e al\u00e9m disso mostravam ser um material muito fr\u00e1gil. \n\nPerante os primeiros resultados, foram pensadas novas alternativas relativas \u00e0 estrutura, \n\nnomeadamente o trem de aterragem e as h\u00e9lices. Foram ent\u00e3o alteradas as pernas do \n\nhelic\u00f3ptero, das originais, para umas impressas na impressora 3D do laborat\u00f3rio. Quanto \u00e0s \n\nh\u00e9lices, foram encomendadas 2 h\u00e9lices pretas e duas verdes. Para testar novamente o \n\nhelic\u00f3ptero em voo foram usadas as h\u00e9lices de outro Arducopter (umas h\u00e9lices duas \n\npolegadas maiores que as que existiam anteriormente), a fim de verificar se as novas pernas \n\ncriadas serviam para o prop\u00f3sito.  \n\nAp\u00f3s o segundo voo os resultados obtidos foram os seguintes. \n\n\u2022 Em voos de baixa altitude as novas pernas faziam com que este n\u00e3o se inclinasse \n\ntanto para a frente (visto elas encontrarem-se mais perto dos motores). \n\n\u2022 Com o uso das h\u00e9lices do outro Arducopter, o voo tornava-se mais est\u00e1vel do que \n\ncom as h\u00e9lices menores. \n\n\u2022 Novamente, ao aterrar de uma altura consider\u00e1vel (cerca de 1 metro) tornava-se \n\ndif\u00edcil o controlo para uma aterragem suave. Este mau controlo implicava a quebra \n\nde uma ou duas pernas. \n\n\n\n66 \n \n\nConclui-se por isso que novos meios tinham de ser usados, de forma a evitar a aterragem \n\nbrusca. Foi ent\u00e3o pensada na instala\u00e7\u00e3o de um sonar para que a baixa altitude, o sonar \n\najudasse a manter a altura. Ent\u00e3o foi criada uma estrutura de montagem para o sonar na \n\nimpressora 3D, para ser colocada no Arducopter. O sonar foi disposto de maneira a que \n\nfosse facilmente adaptado, para que quando n\u00e3o fosse necess\u00e1ria a sua utiliza\u00e7\u00e3o, este \n\npudesse ser facilmente retirado. \n\nQuando a encomenda com as novas h\u00e9lices chegou, as anteriores foram substitu\u00eddas. Para \n\ntentar resolver o problema de se conhecer a parte da frente do Arducopter, foi ent\u00e3o posta \n\nna parte da frente uma h\u00e9lice verde ficando as restantes h\u00e9lices a preto (figura 29). Ap\u00f3s a \n\ninstala\u00e7\u00e3o do sonar na placa, foi testado o modo de voo Alt Hold. \n\n \n\nFigura 29 - Nova disposi\u00e7\u00e3o das h\u00e9lices \n\nDurante o voo n\u00e3o foi poss\u00edvel designar o modo de voo Alt Hold, pois o bot\u00e3o de 3 \n\nposi\u00e7\u00f5es n\u00e3o estava a controlar o canal 5. Dentro do menu do emissor de r\u00e1dio controlo era \n\nposs\u00edvel definir certos comandos auxiliares para o canal 5, mas n\u00e3o era poss\u00edvel designar o \n\nbot\u00e3o de 3 posi\u00e7\u00f5es para esse canal. A solu\u00e7\u00e3o para este problema foi designar um outro \n\ncontrolo para o canal 5, a fim de testar se alterava o modo de voo. O comando escolhido foi \n\no pitch trim que \u00e9 indicado na figura 30. \n\n\n\n67 \n \n\n \n\nFigura 30 - Bot\u00e3o utilizado para mudar o modo de voo do Arducopter \n\nAo ser testado novamente, os resultados foram os seguintes: \n\n\u2022 A aterragem e a descolagem eram feitas com muito mais fluidez, n\u00e3o aterrando t\u00e3o \n\nbruscamente.  \n\n\u2022 O Arducopter n\u00e3o mantinha a sua posi\u00e7\u00e3o, fazendo certos desvios. \n\n\u2022 O Arducopter quando se encontrava no modo Alt Hold, ao aterrar as suas h\u00e9lices \n\nn\u00e3o paravam de girar, sendo necess\u00e1rio alterar o modo para Stabilize, para que este \n\nparasse os motores e que pudesse ser desarmado.  \n\n\u2022 Durante o voo no parque de estacionamento, o Arducopter sofreu a influ\u00eancia do \n\nvento (figura 31). Apenas com o comando para levantar voo, este sofria um desvio \n\nenorme desde a posi\u00e7\u00e3o em que se encontrava inicialmente. \n\n\u2022 O bot\u00e3o para o controlo do modo de voo \u00e9 um bot\u00e3o semelhante a um \n\npotenci\u00f3metro, em que se pode designar os valores rodando para a direita ou para a \n\nesquerda, de forma a escolher o modo de voo. Por vezes o valor em que se \n\nencontrava n\u00e3o era preciso, al\u00e9m de que a sua transi\u00e7\u00e3o de um modo para o outro \n\nlevava mais tempo, do que se fosse o caso do bot\u00e3o de 3 posi\u00e7\u00f5es. \n\n\n\n68 \n \n\n \n\nFigura 31 - Arducopter em voo no modo Alt Hold \n\nPara o \u00faltimo voo foi pensado o uso de um m\u00e9todo de voo autom\u00e1tico, em que fosse \n\ndefinida uma miss\u00e3o. Ent\u00e3o foi carregada uma miss\u00e3o (sec\u00e7\u00e3o 6.2) que fizesse o \n\nArducopter levantar voo para uma altura de cerca de 3 metros, mantivesse a sua posi\u00e7\u00e3o e \n\nregressasse ao ponto onde estava quando descolou, caso o Arducopter desviasse por \n\ninflu\u00eancia do vento. Mas, visto que o espa\u00e7o onde era para ser testado era no parque perto \n\nda cantina da Universidade da Madeira, e isto implicava que no caso duma coordenada \n\nerrada de GPS o Arducopter embatesse contra um carro ou o edif\u00edcio, em vez do modo \n\nAuto (onde existia uma miss\u00e3o indicando os waypoints) foi utilizado o modo RTL. Assim, \n\nquando o Arducopter estivesse uns metros fora de rota ele regressaria autonomamente, com \n\na mesma altura ao local onde havia descolado.  \n\nInfelizmente ao levantar o voo no modo Alt Hold, possivelmente devido ao vento que se \n\nfazia sentir no local, o Arducopter perdeu o controlo e embateu no ch\u00e3o violentamente, \n\ndanificando algumas h\u00e9lices e partindo as suas pernas.  \n\nN\u00e3o foi poss\u00edvel efetuar mais voos de teste, visto n\u00e3o existir a possibilidade de substituir as \n\npe\u00e7as em tempo \u00fatil. \n\n  \n\n\n\n69 \n \n\n9-Conclus\u00f5es e trabalhos futuros \n\nNeste cap\u00edtulo ser\u00e1 apresentada as conclus\u00f5es e contribui\u00e7\u00f5es do projeto assim como as \n\nperspetivas futuras. \n\n9.1-Conclus\u00f5es \nNos objetivos, tinha sido enunciado que se pretendia realizar a cria\u00e7\u00e3o de pequenos \n\nprogramas e o seu desenvolvimento em termos de modos de voo aut\u00f3nomos. Devido a um \n\nlapso por parte dos CTT parte da encomenda foi reenviada ao fornecedor. Sendo que esta \n\ncontinha componentes chave para o uso do helic\u00f3ptero (carregador e controlo remoto). \n\nEsses elementos apenas chegaram a 10 de julho de 2012, e devido a este acontecimento, \n\nn\u00e3o foi poss\u00edvel fazer grandes desenvolvimentos no Arducopter. \n\nApesar desse curto tempo para ensaios, foi poss\u00edvel fazer v\u00e1rios voos e reter certas \n\nobserva\u00e7\u00f5es importantes para o bom funcionamento do equipamento. Por outro lado, todo o \n\ntrabalho de pesquisa, instala\u00e7\u00e3o e configura\u00e7\u00e3o foi compilado nesta tese. Assim, quando for \n\nnecess\u00e1rio desenvolver outro projeto, utilizando o Arducopter, j\u00e1 n\u00e3o ser\u00e1 necess\u00e1rio fazer \n\ntoda uma pesquisa exaustiva, a fim de verificar como funciona, como se instala e como se \n\ncontrola o equipamento em voo. \n\n9.2-Contribui\u00e7\u00f5es \nEsta tese tem como principais contribui\u00e7\u00f5es o uso de equipamento de diversas \u00e1reas, como \n\na rob\u00f3tica, a inform\u00e1tica e a eletr\u00f3nica. Dispondo agora da esta\u00e7\u00e3o de testes para o \n\nArducopter, quem necessitar de fazer um projeto nesta \u00e1rea, apenas tem que se preocupar \n\ncom os voos de teste, melhorias de voo e adapta\u00e7\u00e3o de novos sensores. Todas as restantes \n\ninforma\u00e7\u00f5es relativas \u00e0 montagem, descri\u00e7\u00e3o de hardware, descri\u00e7\u00e3o de software e de \n\ncomo controlar o Arducopter em voo, t\u00eam apenas de ser consultadas nesta tese. \n\n9.3- Trabalhos futuros \nRelativamente aos problemas sentidos nos voos de testem, como por exemplo com as \n\npernas que se partiam, talvez fosse de melhorar esse tipo de estrutura, colocando por \n\nexemplo uma esponja na sua base, de forma a absorver mais o impacto, no caso de uma \n\nqueda. \n\n\n\n70 \n \n\nQuanto ao sonar, o facto de este ser facilmente descart\u00e1vel fazia que com as vibra\u00e7\u00f5es este \n\nse desconectasse. Para resolver este problema o melhor seria soldar o equipamento \u00e0 placa \n\nde forma definitiva, evitando que este voltasse a desconectar-se. \n\nNo que diz respeito ao local de testes, talvez fosse mais indicado realizar os voos num local \n\nmais isolado, espa\u00e7oso e de prefer\u00eancia com um relvado, de forma a n\u00e3o danificar tanto o \n\ntrem de aterragem ou o pr\u00f3prio helic\u00f3ptero. \n\nPor outro lado, seria bom arranjar mais equipamentos extra, como h\u00e9lices suplentes e \n\npernas do trem de aterragem, para n\u00e3o se ter a press\u00e3o de s\u00f3 existir aquele material, e no \n\ncaso de uma queda, n\u00e3o ter-se que esperar por uma nova encomenda. \n\nNo futuro seria tamb\u00e9m bom a implementa\u00e7\u00e3o de um sistema de telemetria, de forma a se \n\npoder controlar o voo atrav\u00e9s de um GCS, receber o estado dos seus sensores e alterar a \n\nmiss\u00e3o em tempo-real. Tamb\u00e9m a adapta\u00e7\u00e3o de um sensor de optical flow, permitiria um \n\nmelhor voo no exterior, mesmo existindo vento, pois este sensor ajuda o helic\u00f3ptero a \n\nmanter a sua posi\u00e7\u00e3o em voo. \n\nUma forma de n\u00e3o danificar tantas vezes as h\u00e9lices poderia passar por arranjar uma \n\nestrutura que circundasse as h\u00e9lices, permitindo com que estas n\u00e3o se partissem quando o \n\nArducopter fosse de encontro a uma parede ou obst\u00e1culo. \n\n  \n\n\n\n71 \n \n\nRefer\u00eancias Bibliogr\u00e1ficas \n\n1. Fowers, S. G Fowers (agosto 2008), \u201cStabilization and control of a quad-rotor \n\nmicro-uav using vision sensors\u201d, Tese de Mestrado of Science. \n\n2. Eisenbei, H. (2009). \u201cUAV Photogrammetry\u201d, disserta\u00e7\u00e3o de mestrado No. 18515, \n\nInstitute of Geodesy and Photogrammetry, ETH Zurich, Switzerland, Mitteilungen, \n\nNr.105, p. 235. \n\n3. DragonFly Innovations Inc, \u201cLaw Enforcement\u201d. [Online] http://www.draganfly \n\n.com/uav-helicopter/draganflyer-x6/applications/government.php [acedido a: 20 de \n\nagosto de 2012]. \n\n4. Wegener, S. S., Schoenung, S. M., Totah, J., Sullivan, D., Frank, J., Francis, E., \n\nFrost, C., et al. (2004). \u201cUAV Autonomous Operations for Airborne Science \n\nMissions\u201d, in AIAA 3rd Unmannned Unlimited Technical Conference, Workshop \n\nand Exhibit, Artigo 2004-6416. \n\n5. Knoth, C., Prinz, T., Loef, P. (outubro 2010), \u201cMicrocopter-Based Color Infrared ( \n\nCIR ) Close Range Remote Sensing as a Subsidiary Tool for Precision Farming\u201d, \n\nIn: Proceedings of the ISPRS Workshop on Methods for Change Detection and \n\nProcess Modelling, Universidade Presss Cologne, Alemanha.  \n\n6. DragonFly Innovations Inc, \u201cAerial Photography &amp; Video\u201d. [Online] \n\nhttp://www.draganfly.com/uav-helicopter/draganflyer-x6/applications. [acedido a: \n\n20 de agosto de 2012]. \n\n7. Srikanth, M. B., Dydek, Z. T., Annaswamy, A. M., Lavretsky, E. (2009), \u201cA Robust \n\nEnvironment for Simulation and Testing of Adaptive Control for Mini-UAVs\u201d, in \n\nAmerican Control Conference ACC\u201909, p\u00e1ginas 5398\u20135403. \n\n8. Weng, K. W., Abidin, M. S. B. Z. (2006), \u201cDesign and Control of a Quad-Rotor \n\nFlying Robot For Aerial Surveillance\u201d, in 4th Student Conference on Research and \n\nDevelopment (SCOReD), paginas 173\u2013177. \n\n9. Mellinger, D., Shomin, M., Michael, N., Kumar, V. (2010.), \u201cTrajectory Generation \n\nand Control for Precise Aggressive Maneuvers with Quadrotors\u201d, in International \n\nExperimental Robotics. \n\n\n\n72 \n \n\n10. Roberts, J. F., Stirling, T. S., Zufferey, J.-C., &amp; Floreano, D. (setembro de 2007), \n\n\u201cQuadrotor Using Minimal Sensing For Autonomous Indoor Flight\u201d, in 3rd US-\n\nEuropean Competition and Workshop on Micro Air Vehicle Systems &amp; European \n\nMicro Air Vehicle Conference and Flight Competition. \n\n11. Bouabdallah, S., Becker, M., Sieagwart, R. (setembro 2007), \u201cAutonomous \n\nMiniature Flying Robots: Coming Soon!\u201d, in IEEE Robotics &amp; Automation \n\nMagazine,13(3). \n\n12. Grisetti, G. Grzonka, S., Burgard, W. ( 2009), \u201cTowards a navigation system for \n\nautonomous indoor flying\u201d, in IEEE Int. Conf. Robotics and Automantion,Kobe, \n\nJap\u00e3o. \n\n13. Rafi, F., Khan, S., Shafiq, K., Shah, M. (maio de 2006), \u201cAutonomous Target \n\nFollowing by Unmanned Aerial Vehicles\u201d, in Proceedings of the SPIE.  \n\n14. Saripalli, S., Montgomery, J. F., Sukhatme, G. S. ( maio de 2002), \u201cVision-based \n\nautonomous landing of an unmanned aerial vehicle\u201d, in Proceedings 2002 IEEE \n\nInternational Conference on Robotics and Automation (Cat. No.02CH37292), \n\nvolume 3, p\u00e1ginas 2799\u20132804.  \n\n15. Wenzel, K. E., Masselli, A., Zell, A. (2010), \u201cA Quadrocopter Hovering Above a \n\nPerson Wearing a Modified Cap\u201d, in Proceedings of International Micro Air \n\nVehicle Conference and Flight Competition, Braunschweig, Germany, p\u00e1ginas 1-7. \n\n16. Ollero, a., Mart\u00ednez-de-Dios, J. R., Merino, L. (15 de Novembro de 2006), \n\n\u201cUnmanned aerial vehicles as tools for forest-fire fighting\u201d, in Forest Ecology and \n\nManagement, volume 234, p\u00e1gina S263. \n\n17. Restas, A. (2006), \u201cWildfire Management Supported by UAV Based Air \n\nReconnaissance: Experiments and Results at the Szendro Fire Department\u201d, in \n\nProceedings of Eleventh Forest Service Remote Sensing Application \n\nConference,Utah; American Society for Photogrammetry and Remote Sensing, \n\np\u00e1gina 54. \n\n18. Runge, H., Rack, W., Ruiz-Leon, A., Hepperle, M. (setembro de 2007), \u201cA Solar \n\nPowered HALE-UAV for Artic Reasearch\u201d, in 1st CEAS European Air and Space \n\nConference, University of Canterbury , Gateway Antarctica , Christchurch , New \n\nZealand.  \n\n\n\n73 \n \n\n19. Rinaudo, F., Chiabrando, F., Lingua, A., &amp; Span\u00f3, A. (1 de setembro de 2012), \n\n\u201cArchaeological site monitoring: UAV phtogrammetry can be an answer\u201d, volume \n\n39-B5, p\u00e1ginas 583\u2013588. \n\n20. Sauerbier, M., Eisenbeiss, H. (2010), \u201cUAVS for the Documentation of \n\narchaeological excavations\u201d, in IAPRS&amp;SIS volume 38 (5), Newcastle upon \n\nTyne,UK.  \n\n21. Brumana, R., Oreni, D., Alba, M., Barazzetti, L., Cuca, B., Scaioni, M. (2000), \n\n\u201cPanoramic UAV views for landscape heritage analysis integrated with historical \n\nmaps atlases\u201d, p\u00e1ginas 1\u20138. \n\n22. Mellinger, D., Shomin, M., Kumar, V. (outubro de 2010), \u201cControl of Quadrotors \n\nfor Robust Perching and Landing\u201d, in Proceedings of the International Powered Lift \n\nConference. \n\n23. Arducopter, \u201cFlight Modes\u201d [Online] http://code.google.com/p/arducopter/wiki/ \n\nAC2_ModeSwitch. [acedido a: 16 de janeiro de 2012]. \n\n24. Uavision, \u201cAplica\u00e7\u00f5es das Plataformas n\u00e3o Tripuladas (UAV)\u201d [Online] \n\nhttp://www.uavision.com/index.php?option=com_content&amp;view=article&amp;id=58&amp;It\n\nemid=182&amp;lang=pt#Aero-Apps-Media [acedido a 28 de julho de 2012]. \n\n25. Nicol, C., Macnab, C. J. B. (2008), \u201c Robust neural network control of quadrotor \n\nhelicopter\u201d, in Canadian Conference on Electrical and computer Engineering , \n\np\u00e1ginas 1233\u20131238. \n\n26. Kemp, C. (2006). \u201cVisual Control of a Miniature Quad-Rotor Helicopter\u201d, tese de \n\ndoutoramento, Universidade de Cambridge. \n\n27. Mellinger, D., Shomin, M., Michael, N., Kumar, V. (2010), \u201cCooperative Grasping \n\nand Transport using Multiple Quadrotors\u201d, in Proceeding of Internation \n\nSymposioum on Distributed Autonomous Robotic Systems. \n\n28. Arducopter UK, \u201cWhat do I need for my Arducopter multi-rotor UAV?\u201d [Online] \n\nhttp://www.arducopter.co.uk/what-do-i-need.html [acedido a: 8 de fevereiro de \n\n2012] . \n\n29. Ardupilot-mega, \u201cArduPilot Mega hardware\u201d [Online] http://code.google.com/ \n\np/ardupilot-mega/wiki/HardwareDetails. [acedido a: 20 de maio de 2012]. \n\n\n\n74 \n \n\n30. Ardupilot-mega, \u201cThe ArduPilot Mega Hardware\u201d [Online] http:// \n\ncode.google.com/p/ardupilot-mega/wiki/Hardware. [acedido a: 20 de maio de \n\n2012].  \n\n31. Ardupilot-mega, \u201cThe ArduPilot Mega IMU shield Hardware\u201d [Online] http:// \n\ncode.google.com/p/ardupilot-mega/wiki/IMUHardware. [acedido a: 20 de maio de \n\n2012]. \n\n32. DIY drones, \u201cWhat are these switches?\u201d [Online] http://diydrones.com/forum/ \n\ntopics/what-are-these-switches?page=1&amp;commentId=705844%3AComment \n\n%3A766906&amp;x=1#705844Comment766906. [acedido a: 15 de julho de 2012]. \n\n33. Arducopter, \u201cLEDs and their meaning\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/AC_LED. [acedido a: 18 de agosto de 2012]. \n\n34. Arducopter, \u201cThe APM 2 Board\u201d [Online] http://code.google.com/p/arducopter/ \n\nwiki/APM2board.[acedido a: 14 de mar\u00e7o de 2012]. \n\n35. Arducopter, \u201cMeasuring your battery voltage and current consumption with APM\u201d \n\n[Online] http://code.google.com/p/arducopter/wiki/AC2_Current. [acedido a: 14 de \n\nmar\u00e7o]. \n\n36. Arducopter, \u201cAssembling the ArduCopter airframe\u201d [Online] http:// \n\ncode.google.com/p/arducopter/wiki/AC2Airframe. [acedido a: 15 de novembro de \n\n2011]. \n\n37. Arducopter, \u201cAttaching the props to the motors\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/AC2_Props [acedido a: 16 de janeiro de 2012].  \n\n38. DIY drones, \u201cArduCopter Hexa with Heli landing gears and cameamount\u201d [Online] \n\nhttp://diydrones.com/photo/arducopter-hexa-with-heli?xg_source=activity. [acedido \n\na: 23 de junho de 2012]. \n\n39. DIY drones, \u201cAnnouncing the ArduCopter 3DR Pre-order\u201d [Online] \n\nhttp://diydrones.ning.com/profiles/blog/show?id=705844%3ABlogPost%3A589745\n\n&amp;commentId=705844%3AComment%3A593845&amp;xg_source=activity. [acedido a: \n\n23 de junho de 2012]. \n\n40. Hobby King, \u201cHeavy duty landing gear for quad/mikrokopter! IDEAS?\u201d [Online] \n\nhttp://www.rcgroups.com/forums/showthread.php?t=1318380. [acedido a: 23 de \n\njunho de 2012]. \n\n\n\n75 \n \n\n41. Arducopter, \u201cUsing a magnetometer\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/AC2_Magnetos. [acedido a: 14 de mar\u00e7o de 2012]. \n\n42. Arducopter, \u201cCompleting the ArduPilot Mega hardware\u201d [Online] http:// \n\ncode.google.com/p/arducopter/wiki/AC2Assembly [acedido a: 15 de novembro de \n\n2011].  \n\n43. Arducopter, \u201cSonar\u201d [Online] http://code.google.com/p/arducopter/wiki/AC2_Sonar \n\n[acedido a: 14 de mar\u00e7o de 2012]. \n\n44. Arducopter, \u201cChoosing and loading the code\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/Quad_LoadingPage. [acedido a: 19 de maio de 2012]. \n\n45. Ardupirates, \u201cSoftwares_Building\u201d http://code.google.com/p/ardupirates/wiki/ \n\nSoftwares_Building [Online][acedido a 28 de julho de 2012]. \n\n46. Arducopter, \u201cSetting up to Program ArduCopter\u201d [Online] http://code.google.com/ \n\np/arducopter/wiki/ProgrammingSettingUp. [acedido a: 19 de maio de 2012]. \n\n47. Arducopter, \u201cSetting up your airframe\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/AC2_Frame_Assembly [acedido a: 20 de Julho de 2012]. \n\n48. Arduino, \u201cDownload the Arduino Software\u201d [Online] http://arduino.cc/ \n\nen/Main/Software [acedido a 28 de julho de 2012] \n\n49. Arducopter, \u201cDownloading and using the ArduCopter software with Arduino\u201d \n\n[Online] http://code.google.com/p/arducopter/wiki/Code. [acedido a: 19 de maio de \n\n2012]. \n\n50. Arducopter \u201cDownload: ArduCopter 2.6\" [Online] http://code.google.com/ \n\np/arducopter/downloads/detail?name=ArduCopter-2.6.zip [ acedido a: 14 de mar\u00e7o \n\nde 2012]. \n\n51. Arducopter, \u201cThe Mission Planner utility\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/AC2_Mission. [acedido a: 15 de julho de 2012]. \n\n52. Ardupilot-mega, \u201cDownloads\u201d [Online] http://code.google.com/p/ardupilot-mega/ \n\ndownloads/list [ acedido a: 14 de mar\u00e7o de 2012] \n\n53. Ardupilot-mega, \u201cThe ArduPilot Mega IMU shield Hardware\u201d [Online] http:// \n\ncode.google.com/p/ardupilot-mega/wiki/IMUHardware. [acedido a: 20 de maio de \n\n2012]. \n\n\n\n76 \n \n\n54. Ardupilot-mega, \u201cQGroundControl\u201d [Online] http://code.google.com/p/ardupilot-\n\nmega/wiki/QGC. [acedido a: 20 de maio de 2012]. \n\n55. Arducopter, \u201cUsing the Ground Station software\u201d [Online] http://code.google.com/p \n\n/arducopter/wiki/AC2_GCS. [acedido a: 15 de julho de 2012]. \n\n56. Arducopter, \u201cUsing the Mission Planner Ground Station\u201d [Online] http:// \n\ncode.google.com/p/arducopter/wiki/AC2_MPGCS. [acedido a: 15 de julho de \n\n2012]. \n\n57. Arducopter, \u201cMission Planning\u201d [Online] http://code.google.com/p/arducopter/wiki/ \n\nAC2_Waypoints. [acedido a: 15 de julho de 2012]. \n\n58. Arducopter, \u201cDownloading and analyzing log files\u201d [Online] \n\nhttp://code.google.com/p/arducopter/wiki/AC2_Logs. [acedido a: 15 de julho de \n\n2012]. \n\n59. DIY drones, \u201cUseful tips for log analysis\u201d [Online] http://www.diydrones.com \n\n/profiles/blog/show?id=705844%3ABlogPost%3A801607 [acedido a: 15 de julho \n\nde 2012] \n\n60. Arducopter, \u201cUsing a computer joystick/gamepad instead of RC for manual control\u201d \n\n[Online] http://code.google.com/p/arducopter/wiki/Joystick. [acedido a: 15 de julho \n\nde 2012]. \n\n61. Arducopter, \u201cPython scripting\u201d [Online] http://code.google.com/p/arducopter/ \n\nwiki/Python. [acedido a: 15 de julho de 2012]. \n\n62. Arducopter, \u201cUsing the Command Line Interpreter (CLI) to configure ArduCopter\u201d \n\n[Online] http://code.google.com/p/arducopter/wiki/AC2CLI. [acedido a: 15 de julho \n\nde 2012]. \n\n63. NOAA, \u201cEstimated Value of Magnetic Declination\u201d [Online] http:// \n\nwww.ngdc.noaa.gov/geomagmodels/Declination.jsp [acedido a 28 de julho de \n\n2012] \n\n64. Arducopter, \u201cSafety\u201d [Online] http://code.google.com/p/arducopter/wiki/ \n\nAC2_Safety.[acedido a: 20 de Julho de 2012]. \n\n65. Arducopter, \u201cFlying ArduCopter\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/AC2_Flying.[acedido a: 16 de janeiro de 2012]. \n\n\n\n77 \n \n\n66. Arducopter, \u201cRadio and APM wiring setup\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/AC2_Radio [acedido a: 15 de julho de 2012]. \n\n67. Arducopter, \u201cESC calibration\u201d [Online] http://code.google.com/p/arducopter/wiki/ \n\nAC2_ESC. [acedido a: 16 de janeiro de 2012]. \n\n68. Wikipedia, \u201cPID controller\u201d [Online] http://en.wikipedia.org/wiki/PID_controller \n\n[acedido a: 15 de julho de 2012]. \n\n69. Arducopter, \u201cTweaking ArduCopter parameters\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/AC2_Tweaks [acedido a: 15 de julho de 2012]. \n\n70. Arducopter, \u201cFirst-time Setup\u201d [Online] http://code.google.com/p/arducopter/wiki/ \n\nAC2_First. [acedido a: 16 de janeiro de 2012]. \n\n71. Arducopter, \u201cAC2_Failsafe\u201d [Online] http://code.google.com/p/arducopter/wiki/ \n\nAC2_Failsafe. [acedido a: 27 de julho de 2012]. \n\n72. YouTube, \u201cHow to Solder Bullet Connectors By Innov8tive Designs\u201d [Online] \n\nhttp://www.youtube.com/watch?v=MnldHRtjre8&amp;feature=player_embedded \n\n[acedido a: 15 de novembro de 2011] \n\n73. Arducopter, \u201cSoldering the motor connectors and power distribution board\u201d \n\n[Online] http://code.google.com/p/arducopter/wiki/AC2PowerDistro [acedido a: 16 \n\nde janeiro de 2012]. \n\n74. Arducopter, \u201cIntroduction\u201d [Online] http://code.google.com/p/arducopter/wiki/ \n\nAC2_Motors [acedido a: 16 de janeiro de 2012]. \n\n75. Robot Shop, \u201cSharp GP2Y0A710K0F IR Range Sensor - 100 to 550cm\u201d [Online] \n\nhttp://www.robotshop.com/ca/sharp-gp2y0a710k0f-ir-range-sensor-100-to-\n\n550cm.html [acedido a: 23 de junho de 2012]. \n\n76. Arducopter, \u201cOptical Flow Sensor\u201d [Online] http://code.google.com/p/arducopter/ \n\nwiki/AC2_OptFlow. [acedido a: 14 de mar\u00e7o de 2012]. \n\n77. Arducopter, \u201cUsing wireless data modules for telemetry and in-flight commands\u201d \n\n[Online] http://code.google.com/p/arducopter/wiki/Telem.[acedido a: 15 de julho de \n\n2012]. \n\n78. Arducopter, \u201cUsing the 3DR Radio for telemetry with APM 1\u201d [Online] \n\nhttp://code.google.com/p/arducopter/wiki/APM13DRadio. [acedido a: 15 de julho \n\nde 2012]. \n\n\n\n78 \n \n\n79. FTDIChip, \u201cD2XX Direct Drivers\u201d [Online] http://www.ftdichip.com/Drivers/ \n\nD2XX.htm [acedido a 15 de julho de 2012]. \n\n80. Arducopter, \u201cUsing Xbee radios for telemetry with APM 1\u201d [Online] http:// \n\ncode.google.com/p/arducopter/wiki/APM1Wireless. [acedido a: 15 de julho de \n\n2012].  \n\n81. Arducopter, \u201cAdding a pitch/roll camera mount\u201d [Online] http://code.google.com/p/ \n\narducopter/wiki/AC2_Camera. [acedido a: 14 de mar\u00e7o de 2012]. \n\n82. Arducopter, \u201cAdding an On-Screen Display (OSD) board\u201d [Online] http:// \n\ncode.google.com/p/arducopter/wiki/OSD. [acedido a: 14 de mar\u00e7o de 2012]. \n\n83. Arducam-osd, \u201cMinimOSD - Introduction\u201d [Online] http://code.google.com/p/ \n\narducam-osd/wiki/minimosd [ acedido a 14 de mar\u00e7o de 2012]. \n\n\n\n79 \n \n\nAnexos \n\n  \n\n\n\n80 \n \n\nAnexo A-Manual de montagem do Arducopter \n\nA.1-Montagem da placa Arduino \nMaterial necess\u00e1rio para a montagem do n\u00facleo do Arducopter (figura 32) [42]: \n\n \n\nFigura 32- Kit de montagem da placa APM [42] \n\n\u2022 ArduPilot Mega \no ArduPilotMega IMU Shield (Placa Azul) \no Arduino Compatible UAV Controller w/ ATMega2560 (Placa Vermelha) \no 3x16 Right Angle Pin Headers   \no 2x Conn Header Male 36. Straight  \no Conn Header Female  \n\n? 02 pos .1 \n? 08 pos .1 \n? 11 pos .1 \n? 14  pos .1 \n? 2x03 pos .1 \n? 2x13 pos .1 \n\no 4 Resist\u00eancias com um valor total de 3.9k ohm \n\nSeguiram-se os seguintes passos [42]: \n\nCome\u00e7ou-se por partir os headers macho (Conn Header Male 36. Straight) de forma a \n\nencaixar nas f\u00eameas correspondentes (Conn Header Female), figura 33. \n\n\n\n81 \n \n\n \n\nFigura 33 - Headers necess\u00e1rios [42] \n\nSoldaram-se os headers de 90\u00ba (3x16 Right Angle Pin Headers) na placa vermelha, como \n\napresentado na figura 34.  \n\n \n\nFigura 34 - Placa APM com os headers de 90? soldados [42] \n\nColocaram-se os headers macho como apresentado na figura 35. \n\n \n\nFigura 35 - Coloca\u00e7\u00e3o dos restantes headers [42] \n\n\n\n82 \n \n\nUniram-se os headers f\u00eameas aos machos, rodaram-se a placa 180\u00ba e soldaram-se os pins \n\nCom cuidado de n\u00e3o esquecer nenhum, figura 36.    \n\n \n\nFigura 36 - Headers soldados na placa [42] \n\nVoltou-se novamente a placa 180\u00ba e colocou-se a placa azul sobre a vermelha. Em seguida \n\nsoldaram-se os pins \u00e0 placa azul. Novamente com aten\u00e7\u00e3o para n\u00e3o esquecer nenhum dos \n\npins. Soldaram-se as resist\u00eancias nos locais conforme assinalado a vermelho na figura 37, \n\nde forma a servirem de divisores de tens\u00e3o para sensores anal\u00f3gicos. \n\n \n\n \n\nFigura 37 - Placa APM totalmente montada [42] \n\n\n\n83 \n \n\nA.2-Soldagem dos conetores dos ESC (Electronics speed controls) (conetor \n\nf\u00eamea) e os conetores dos motores (Conetor macho). \nPara realizar esta tarefa foi necess\u00e1rio um ferro de soldar e solda. Para a melhor execu\u00e7\u00e3o \n\nda tarefa deve-se usar uma t\u00e1bua de madeira com um buraco com a espessura dos \n\nconetores. Colocou -se a manga termo retr\u00e1til no fio do conetor, devem-se preencher os \n\nconetores com solda, ligar o fio ao conetor e esperar que a solda solidifique [34]. Depois \n\najustar a manga termo retr\u00e1til ao conetor, aplicar calor e esperar que a manga aperte. Em \n\ncaso de d\u00favidas, recomendasse que se visualize o seguinte v\u00eddeo na refer\u00eancia [72].  \n\nA.3-Montagem da placa de distribui\u00e7\u00e3o de energia \nPara a montagem da placa de distribui\u00e7\u00e3o de energia (power distribution board) \u00e9 \n\nnecess\u00e1rio soldar os Right Angle Pin Headers como mostra a figura 38. \n\n \n\nFigura 38 - Imagem ilustrativa de como soldar os header pins [73] \n\nRecomenda-se que se Preencha a \u00e1rea assinalada a cinzento, da figura 39, com uma grossa \n\ncamada de solda. \n\n \n\nFigura 39 - Imagem ilustrativa de como preencher a placa com solda [73] \n\n\n\n84 \n \n\nEm seguida foram soldados os cabos da alimenta\u00e7\u00e3o da bateria, como apresentado na figura \n\n40. \n\n  \n\nFigura 40 - Imagem ilustrativa de como conectar os cabos de alimenta\u00e7\u00e3o da bateria [73] \n\nDe seguida soldaram-se os cabos que recebem os sinais dos controladores, tendo em \n\naten\u00e7\u00e3o a orienta\u00e7\u00e3o de como lig\u00e1-los, na figura 41 est\u00e1 assinalado correta de como ligar os \n\ncabos atrav\u00e9s as iniciais das dire\u00e7\u00f5es(\u201ct\u201d para tr\u00e1s, \u201cf\u201d para frente, \u201ce\u201d para esquerda e \u201cd\u201d \n\npara direita). \n\n \n\nFigura 41 - Imagem ilustrativa de como soldar os cabos de sinal \u00e0 placa de distribui\u00e7\u00e3o de energia [73] \n\n  \n\n\n\n85 \n \n\nSoldou-se depois os cabos de alimenta\u00e7\u00e3o da placa APM, como pode ser observado pela \n\nfigura 42. \n\n \n\nFigura 42 - Imagem ilustrativa de como soldar a alimenta\u00e7\u00e3o da placa APM [73] \n\nFinalmente, soldam-se os cabos dos controladores ESC \u00e0 placa de distribui\u00e7\u00e3o de energia, \n\ncomo apresentado na figura 43.  \n\n \n\nFigura 43 - Imagem ilustrativa de como soldar os conetores dos ESC \u00e0 placa APM[73] \n\n  \n\n\n\n86 \n \n\nO resultado final desta etapa pode ser observado na figura 44.  \n\n \n\nFigura 44 - Resultado final da instala\u00e7\u00e3o da placa de distribui\u00e7\u00e3o de energia \n\n  \n\n\n\n87 \n \n\nAnexo B-Montagem da estrutura do Arducopter \n\nMaterial necess\u00e1rio para montagem da estrutura [24]: \n\n\u2022 2 Placas da estrutura base \n\u2022 2 Placas da estrutura eletr\u00f3nica \n\u2022 4 Bra\u00e7os (de alum\u00ednio de 21,5cm ou de 28cm) \n\u2022 Placa da bateria \n\u2022 Prote\u00e7\u00e3o de aterragem.  \n\u2022 8 Espa\u00e7adores Macho-F\u00eamea M3 x 25mm \n\u2022 8 Parafusos M3 x 6mm de Nylon \n\u2022 4 Parafusos M3 x 20mm de a\u00e7o  \n\u2022 4 Espa\u00e7adores M3 x 12mm Macho-F\u00eamea \n\u2022 8 Parafusos M3 x 20mm de Nylon  \n\u2022 20 Porcas M3 de Nylon  \n\u2022 4 Porcas M3 de a\u00e7o \n\nB.1 \u2013 Montagem da sec\u00e7\u00e3o central \nExistem dois tipos de configura\u00e7\u00f5es para o quadcopter, em cruz (+) e em x (x). Neste \n\nanexo se\u00e1 apenas descrita a configura\u00e7\u00e3o em cruz. Quanto \u00e0 configura\u00e7\u00e3o em x ser\u00e1 \n\napresentada a diferen\u00e7a na montagem. Na configura\u00e7\u00e3o em + os parafusos devem ficar \n\ncomo s\u00e3o apresentados na figura 45. Ou seja os 4 espa\u00e7adores Macho-F\u00eamea M3 x 25mm \n\ndevem ficar na placa superior da estrutura base, dispostos em cruz nas extremidades e \n\npresos com os parafusos M3 x 6mm de Nylon, tal como mostra a figura 45. Da mesma \n\nforma os 4 espa\u00e7adores M3 x 12mm Macho-F\u00eamea devem ser colocados nos buracos mais \n\nao centro, novamente em cruz e presos com as 4 porcas M3 de Nylon. Os parafusos M3 x \n\n20mm de a\u00e7o devem ser colocados no centro, mas em x em vez de cruz, atravessando as \n\nduas placas, como apresenta a figura 45.  \n\n\n\n88 \n \n\n \n\nFigura 45 - Montagem das placas da estrutura base [24] \n\nPor fim colocam-se os 8 parafusos M3 x 20mm de Nylon, como se apresenta na figura 46, \n\nprendendo com as 8 porcas M3 de Nylon. \n\n \n\nFigura 46 - Parte final da montagem da estrutura base \n\nOs bra\u00e7os devem ser colocados na estrutura como est\u00e1 representado na figura 47 (entre os \n\ndois parafusos de 20mm de Nylon). \n\n\n\n89 \n \n\n \n\nFigura 47 - Montagem dos bra\u00e7os \u00e0 estrutura \n\nO suporte para a montagem da bateria deve ser montado rodando a estrutura 180? (ficando \n\na estrutura invertida). Na parte superior prende-se o suporte de montagem da bateria \n\napertando os parafusos de alum\u00ednio com 4 porcas M3 de a\u00e7o, como se mostra na figura 48.  \n\n \n\nFigura 48 - Montagem do suporte de bateria \n\n  \n\n\n\n90 \n \n\nA placa de distribui\u00e7\u00e3o de energia deve ser colocada no centro da estrutura e afixada com 4 \n\nparafusos M3 x 6mm de Nylon. De seguida a placa APM deve ser colocada na plataforma \n\nsuperior e orientada para a frente do Arducopter como \u00e9 apresentado na figura 49. \n\n \n\nFigura 49 - Montagem da placa de distribui\u00e7\u00e3o de energia \u00e0 estrutura \n\nAp\u00f3s o passo anterior, prende-se a placa ATMega2560 \u00e0 estrutura com 3 parafusos M3 x \n\n6mm de Nylon e 3 porcas M3 de Nylon, tal como se pode ver na figura 50. \n\n \n\nFigura 50 - Montagem da placa APM \u00e0 estrutura [24] \n\nEm seguida monta-se a IMU Shield sobre a placa ATMega2560 como \u00e9 apresentado na \n\nfigura 51. No caso da configura\u00e7\u00e3o ser em x, a placa dever\u00e1 ser rodada a 45? para a direita, \n\nde forma a que se encontre virada para a frente do Arducopter. \n\n\n\n91 \n \n\n \n\nFigura 51 - Montagem da placa APM \u00e0 estrutura \n\nFinalmente deve ser montada a estrutura de aterragem, assim como a estrutura que protege \n\no n\u00facleo do helic\u00f3ptero. A estrutura existente n\u00e3o muito resistente. \n\nNOTA: devido ao tipo de material usado neste quadcopter \u00e9 poss\u00edvel que, ao apertar-se e \n\ndesapertar-se os parafusos de nylon ou de pl\u00e1stico, estes venham a partir-se devido \u00e0 sua \n\nnatureza fr\u00e1gil. \n\nB.2-Trem de Aterragem \nO trem de aterragem est\u00e1 diretamente ligado ao protetor do circuito principal do \n\nArducopter. Primeiro ligam-se as duas pe\u00e7as superiores do dome protetor como mostra a \n\nfigura 62 e prendem-se as duas pe\u00e7as centrais, com parafusos de 20mm de pl\u00e1stico e duas \n\nporcas M3. Os parafusos devem ser postos de forma a que sejam presos com as porcas na \n\nparte superior para terem mais espa\u00e7o. Na parte inferior dos arcos de pl\u00e1stico pode-se ver \n\numa sali\u00eancia, no fundo do arco, onde ir\u00e3o juntar-se os bra\u00e7os de alum\u00ednio. \n\n  \n\n\n\n92 \n \n\nConsoante o tamanho do cabo do GPS deve-se p\u00f4r o GPS em cima (caso o cabo seja \n\nsuficientemente comprido) ou p\u00f4-lo na placa que se encontra sobre a placa APM, \n\nprendendo com uma abra\u00e7adeira de serrilha, como se pode ver na figura 52. \n\n \n\nFigura 52 - Dome protetor dos componentes de hardware [24] \n\nNo que diz respeito \u00e0s pernas do trem de aterragem, basta prender o dome protetor \u00e0 \n\nestrutura (nomeadamente aos bra\u00e7os), prendendo cada pe\u00e7a que foi anteriormente impressa \n\nna impressora 3D, com 3 parafusos de 20mm e 3 porcas M3, tal como se pode ver na figura \n\n53. \n\n \n\nFigura 53 - Pe\u00e7a substituta \u00e0s pernas existentes no kit de montagem \n\n\n\n93 \n \n\nPara instalar as pernas basta prender com um parafuso e uma porca cada perna a cada um \n\ndos bra\u00e7os, como mostra a figura 54. \n\n \n\nFigura 54 - Novas pernas criadas na impressora 3D \n\nB.3-Montagem dos motores nos bra\u00e7os  \nPara se montar os motores nos bra\u00e7os do helic\u00f3ptero utiliza-se as pe\u00e7as de acr\u00edlico \n\napresentadas na figura abaixo, prendendo-as com dois parafusos e duas porcas em pl\u00e1stico, \n\nmas deixando espa\u00e7o suficiente para prend\u00ea-las ao bra\u00e7o. Prende-se os motores as estas \n\npe\u00e7as com os 3 parafusos que se encontram juntamente com as pe\u00e7as do motor [74]. \n\n \n\nFigura 55 - Montagem dos motores nos bra\u00e7os \n\nPara finalizar prende-se o motor ao bra\u00e7o do helic\u00f3ptero apertando as duas pe\u00e7as de acr\u00edlico \n\ncom a ajuda dos parafusos de pl\u00e1stico, finaliza-se prendendo um parafuso de metal e um \n\nbatente em borracha ao buraco dispon\u00edvel no motor como mostra a figura 55. \n\n  \n\n\n\n94 \n \n\nOs fios do motor devem ser postos como demonstra a figura seguinte [74].  \n\n \n\nFigura 56 - Passagem dos fios do motor pelos bra\u00e7os do Arducopter [33] \n\nAos motores \u00e9 necess\u00e1rio prender as h\u00e9lices. Na montagem das h\u00e9lices monta-se primeiro \n\nas pe\u00e7as que se apresentam na figura 57 [74]. \n\n \n\nFigura 57 - Passos para montar as h\u00e9lices no motor \n\n  \n\n\n\n95 \n \n\nDe seguida monta-se a h\u00e9lice utilizando estas pe\u00e7as pela ordem que se apresenta na figura \n\n58 [74]. \n\n \n\nFigura 58 - Montagem das h\u00e9lices nos motores \n\nAo montarem-se as h\u00e9lices \u00e9 de ter em conta a configura\u00e7\u00e3o que se deseja para o \n\nquadcopter (configura\u00e7\u00e3o em x ou em +). Pois de acordo com a configura\u00e7\u00e3o deve-se \n\nescolher a forma correta de colocar cada h\u00e9lice, de acordo com a sua rota\u00e7\u00e3o (no sentido \n\ndos ponteiros do rel\u00f3gio ou no sentido contr\u00e1rio) com mostra a figura 59.  \n\n\n\n96 \n \n\n \n\nFigura 59 - Escolha correta das h\u00e9lices segundo o tipo de estrutura em + ou em x [37] \n\nB.4-Conex\u00e3o dos ESC aos motores \nOs controladores de velocidade ESC devem ser conectados de acordo com o seu sentido de \n\nrota\u00e7\u00e3o, tal como mostra na figura 60. Caso a rota\u00e7\u00e3o seja no sentido dos ponteiros do \n\nrel\u00f3gio deve-se ligar os conetores que derivam do motor da seguinte maneira: \n\nA- O conetor de cor azul \nB- O conetor de cor preta \nC- O conetor de cor vermelha \n\nCaso a rota\u00e7\u00e3o seja no sentido contr\u00e1rio ao dos ponteiros do rel\u00f3gio deve-se ligar os \n\nconetores que derivam do motor da seguinte maneira: \n\nA- O conetor de cor vermelha \nB- O conetor de cor preta \nC- O conetor de cor azul \n\n\n\n97 \n \n\n \n\nFigura 60 - Configura\u00e7\u00e3o da conex\u00e3o dos ESC aos motores \n\nB.5-Liga\u00e7\u00e3o do controlo de r\u00e1dio \u00e0 APM  \nLigam-se dois fios de 5v da PDB (Power Distribution Board) \u00e0 placa APM. Ap\u00f3s este \n\npasso ligam-se os 4 fios que v\u00eam da placa distribuidora de energia, como se mostra na \n\nfigura 61. De seguida ligam-se os 6 fios para ligarem o recetor do controlo remoto \u00e0 APM, \n\ne por fim ligam-se os dois fios de corrente do recetor como mostra a figura 61 [66]. \n\n \n\n \n\nFigura 61 - Instala\u00e7\u00e3o do controlo de r\u00e1dio \u00e0 placa APM [66] \n\n\n\n98 \n \n\nB.6-Liga\u00e7\u00e3o do controlo remoto \nO que \u00e9 necess\u00e1rio [66]: \n\n\u2022 Deve-se ter no m\u00ednimo 5 canais na unidade de controlo remoto, mas 7 ou mais \ncanais s\u00e3o altamente recomendados. \n\nVisto o Arducopter ser um helic\u00f3ptero n\u00e3o deve-se usar o transmissor de controlo remoto \n\nem modo helic\u00f3ptero, mas configurado em modo de avi\u00e3o normal. Em alguns r\u00e1dios este \n\nmodo \u00e9 chamado \u201cAcro\u201d ou \u201cfixed wing\u201d. A eletr\u00f3nica e o software do Arducopter \n\nencarregar-se-\u00e3o de todas as misturas necess\u00e1rias e n\u00e3o o r\u00e1dio. \u00c9 necess\u00e1rio saber como \n\nest\u00e3o configurados os comandos (verificando que interruptor corresponde a que canal). Em \n\nmuitos transmissores isto \u00e9 algo que pode ser configurado. O canal 5 deve corresponder ao \n\nbot\u00e3o de 3 posi\u00e7\u00f5es (toggle switch). Existe uma correspond\u00eancia dos controlos aos canais, \n\nfeita da seguinte forma [66]: \n\n\u2022 Os canais de 1 a 4 \u2013 controlos de voo b\u00e1sicos (roll, pitch, throttle e yaw) \n\u2022 O canal 5 \u2013 sele\u00e7\u00e3o do modo de voo (manual, auto, altitude hold, etc.)  \n\u2022 O canal 6 \u2013 N\u00e3o \u00e9 usado atualmente mas \u00e9 reservado para controlos de c\u00e2mara \n\u2022 O canal 7 \u2013 n\u00e3o \u00e9 atualmente usado, mas \u00e9 reservado para fazer trimming dos \n\nvalores de r\u00e1dio. \n\u2022 O canal 8 \u2013 n\u00e3o \u00e9 usado. Este canal \u00e9 usado para voos de avi\u00f5es e \u00e9 muito perigoso \n\nquando usado em quadcopters visto estes perderem a estabiliza\u00e7\u00e3o quando usado. \n\nOs valores de output correspondem a estes canais do r\u00e1dio s\u00e3o [66]: \n\n\u2022 Canal 1- Roll para a esquerda -> o valor mais baixo de PWM, roll para a direita -> o \nvalor mais alto de PWM. \n\n\u2022 Canal 2- Pitch para a frente -> o valor mais baixo de PWM, pitch para tr\u00e1s -> o \nvalor mais alto de PWM. (\u00c9 prefer\u00edvel inverter o sentido deste controlo) \n\n\u2022 Canal 3- Pouco throttle -> o valor mais baixo de PWM, muito throttle -> o valor \nmais alto de PWM. \n\n\u2022 Canal 4- Yaw para a esquerda -> o valor mais baixo de PWM, yaw para a direita -> \no valor mais alto de PWM. \n\n\u2022 Canal 5- Configur\u00e1vel (geralmente usado para escolha do modo de voo). \n\u2022 Canal 6- Configur\u00e1vel. \n\u2022 Canal 7- Desligado-> o valor mais baixo de PWM, ligado -> o valor mais alto de \n\nPWM. \n\n\n\n99 \n \n\nB.7-Instala\u00e7\u00e3o do recetor de controlo remoto  \nLigam-se os cabos f\u00eamea-f\u00eamea do recetor \u00e0 APM, usando-se um cabo para cada canal que \n\nse pretende controlar atrav\u00e9s da APM tal como se apresenta na figura 62 [66]. \n\n \n\nFigura 62 - Liga\u00e7\u00e3o dos canais do recetor \u00e0 placa APM \n\n  \n\n\n\n100 \n \n\nAnexo C-Montagem de sensores opcionais \n\nC.1-Sensor de infravermelhos \nEste sensor \u00e9 utilizado na dete\u00e7\u00e3o de obst\u00e1culos para voos no interior. [10] O modelo de \n\nsensor de infravermelhos compat\u00edvel com o Arducopter \u00e9 o SharpGP2Y (figura 63). Para \n\nmedir a altura, o sensor deve ser colocado de forma semelhante ao sonar, para tentar manter \n\na altura. O seu alcance \u00e9 muito curto, o uso de infravermelhos pode causar ru\u00eddo quando \u00e9 \n\nutilizado em voos ao ar livre, devido \u00e0 luz solar ter em parte luz infravermelha. Por causa \n\ndessa limita\u00e7\u00e3o \u00e9 normalmente utilizado em voos no interior [10]. \n\n \n\nFigura 63- Sensor infravermelho SharpGP2Y [75] \n\nC.2-Sensor \u00f3tico de fluxo (optical flow) \nEste sensor serve para ter uma melhor performance quando utiliza-se o modo Loiter (modo \n\nem que se mant\u00e9m a posi\u00e7\u00e3o em voo) com o Arducopter e baseia-se no sensor de \u00f3tico de \n\nfluxo ADNS-3080. [76]. \n\nC.2.1-Como ligar o sensor \u00e0 placa \n\nSolda-se diretamente os fios da placa azul (figura 64) e instala-se deixando a lente virada \n\npara baixo e os pins apontando para a frente do Arducopter. \n\n\n\n101 \n \n\n \n\nFigura 64- Instala\u00e7\u00e3o do optical flow na placa APM1 [76] \n\nPode-se testar o sensor seguindo os seguintes passos [76]: \n\n\u2022 Carrega-se o ficheiro AP_OpticalFlow_test.pde na APM. \n\n\u2022 Liga-se a placa APM com o serial monitor ou APM Mission Planner terminal. \n\n\u2022 Escreve-se \u201cc\u201d para garantir que o sensor responde \u00e0 placa APM. \n\n\u2022 Escreve-se \u201cm\u201d para mover o sensor para a frente e para tr\u00e1s e verifica-se se os \n\nvalores de x e y mudam. Caso n\u00e3o mudem deve-se focar a lente para a esquerda ou \n\npara a direita. \n\nC.2.2-Como manter a posi\u00e7\u00e3o do Arducopter em voo \n\nTal como num rato do computador, o sensor devolve o valor da m\u00e9dia do movimento em x \n\ne y da superf\u00edcie visualizada num \u00fanico movimento de um pixel, no sensor de optical flow, \n\no valor \u00e9 referido numa escala, ou seja, os valores x e y do sensor podem ser convertidos \n\nem dist\u00e2ncias reais baseando-se na altitude. Para converter os valores do sensor para \n\ndist\u00e2ncias reais, \u00e9 necess\u00e1rio saber a que altitude o Arducopter se encontra, pois se \n\nexistirem dois quadcopters que se movem \u00e0 mesma dist\u00e2ncia, mas a diferentes altitudes, \n\nquanto maior a altitude menos movimento ser\u00e1 detetado, o que resultar\u00e1 em maiores valores \n\nquando o helic\u00f3ptero encontra-se a uma menor altitude [76].  \n\nExistem dois movimentos poss\u00edveis no Arducopter para que este se desloque no espa\u00e7o. O \n\nmovimento roll (faz com que este se desloque para a esquerda ou para a direita inclinando-\n\n\n\n102 \n \n\nse segundo a dire\u00e7\u00e3o estipulada), e o movimento pitch (faz o Arducopter deslocar-se para a \n\nfrente e para tr\u00e1s inclinando-se nas respetivas dire\u00e7\u00f5es). Ao efetuar o roll ou o pitch, far\u00e1 \n\ncom que os valores de x e y se alterem, pois \u00e9 necess\u00e1rio inclinar o helic\u00f3ptero \n\ninfluenciando os valores. Ao contr\u00e1rio do problema anterior a altitude n\u00e3o tem influ\u00eancia \n\nneste movimento.  \n\nAo trabalharmos com este tipo de sensor deve-se ter em conta os seguintes aspetos [76]: \n\n\u2022 O sensor apenas funciona em ambientes bem iluminados; \n\n\u2022 \u00c9 usada uma lente de foco-fixo, o que faz com que n\u00e3o se consiga focar objetos \n\nmais perto que 30 cm; \n\n\u2022 Fazer yaw (rota\u00e7\u00e3o do Arducopter para a esquerda e para a direita), far\u00e1 com que o \n\nsensor fique confuso, n\u00e3o conseguindo manter a posi\u00e7\u00e3o. \n\nC.3-Telemetria sem fios \nEste tipo de dispositivo serve essencialmente de plataforma de comunica\u00e7\u00e3o entre o pc \n\n(dispondo de um transmissor/recetor) e o Arducopter (dispondo tamb\u00e9m de um \n\ntransmissor/recetor). Essa comunica\u00e7\u00e3o \u00e9 feita utilizando um software GCS (descrito na \n\nsec\u00e7\u00e3o 6), que \u00e9 capaz de mandar dados para o Arducopter em pleno voo, assim como \n\nreceber dados provenientes dos sensores do Arducopter. Este tipo de sistema n\u00e3o se \n\nencontra dispon\u00edvel no Arducopter existente na Universidade da Madeira, mas \u00e9 muito \u00fatil \n\npois facilitar\u00e1 as miss\u00f5es de voos aut\u00f3nomos, quer para alterar o percurso de voo ou para \n\nverificar o estado dos sensores em tempo real (quando este se encontra em voo). Apresenta \n\ntamb\u00e9m outras funcionalidades como a transmiss\u00e3o de v\u00eddeo para o computador em tempo \n\nreal [77].  \n\nPara estabelecer uma liga\u00e7\u00e3o entre o computador e o Arducopter atrav\u00e9s de uma telemetria \n\nsem fios, \u00e9 necess\u00e1rio utilizar o programa APM Mission Planner. A descri\u00e7\u00e3o de como \n\ncriar a liga\u00e7\u00e3o encontra-se na sec\u00e7\u00e3o 6.A tarefa de adicionar uma telemetria sem fios n\u00e3o \u00e9 \n\nmuito dif\u00edcil e estende imenso a capacidade do UAV. Existem dois modelos de telemetria \n\npara o APM1 e para o APM2, esses modelos s\u00e3o o 3DR Radio e o Xbee. \n\n  \n\n\n\n103 \n \n\nC.3.1-3DR Radio   \n\nEsta sec\u00e7\u00e3o apresenta a informa\u00e7\u00e3o relativa ao sensor de telemetria 3DR Radio. \n\nO 3DR Radio tem como vantagens [78]: \n\n\u2022 Ser pequeno; \n\n\u2022 Barato; \n\n\u2022 Com melhor alcance de sinal ao dispositivo Xbee; \n\n\u2022 Ter um firmware open-source com o qual pode ser programado, tornando-o mais \n\npersonalizado. \n\nA sua configura\u00e7\u00e3o \u00e9 feita da seguinte forma [78]: \n\n\u2022 S\u00e3o precisos dois 3DR Radio, um para o Arducopter e outro para a GCS; \n\n\u2022 Um dos dipositivos cont\u00e9m uma porta USB para melhor liga\u00e7\u00e3o. No caso da GCS o \n\ndispositivo utiliza o D2XX FTDI driver, que pode ser obtido nesta liga\u00e7\u00e3o [79]  \n\nO dispositivo usado no Arducopter disp\u00f5e de uma liga\u00e7\u00e3o de 6 pins FTDI (mas apenas \n\nutilizamos os 4 fios como se pode observar atrav\u00e9s da figura 65) que liga-se facilmente \u00e0 \n\nporta de telemetria do Arducopter [78]. O dispositivo vem configurado com o baud rate de \n\n57600. Esse valor pode ser alterado, atrav\u00e9s do Mission Planner [78]. \n\n \n\nFigura 65- Liga\u00e7\u00e3o do 3DRadio \u00e0 placa APM [78] \n\n\n\n104 \n \n\nPara se configurar o sensor atrav\u00e9s do programa Mission Planner, ap\u00f3s o dispositivo estar \n\nconectado pelo Mission Planner, deve-se carregar nas teclas control+a, e aparecer\u00e1 uma \n\njanela onde se deve clicar no bot\u00e3o \u201cload settings\u201d. Isto far\u00e1 com que sejam carregados os \n\ndados de configura\u00e7\u00e3o necess\u00e1rios para o funcionamento do dispositivo de telemetria. O \n\npar\u00e2metro que controla o alcance dos r\u00e1dios \u00e9 o AIR_SPEED, este tem como valor padr\u00e3o \n\nde 64kbps, o que dar\u00e1 um alcance de cerca de um quil\u00f3metro. Quanto mais baixo for o \n\nvalor do AIR_SPEED maior ser\u00e1 o alcance, mas a quantidade de dados pode ser \n\ntransmitida de uma s\u00f3 vez torna-se menor [78]. \n\nO 3DR Radio tem 2 leds de estado, um vermelho e outro verde. O significado desses led \u00e9 o \n\nseguinte [78]: \n\n\u2022 Led Verde intermitente - Procurando o r\u00e1dio. \n\n\u2022 Led Verde ligado - Foi feita a liga\u00e7\u00e3o com o r\u00e1dio. \n\n\u2022 Led vermelho intermitente -Est\u00e1 transmitindo dados. \n\n\u2022 Led Vermelho ligado - Est\u00e1 em modo de update do firmware. \n\nC.3.2-Xbee  \n\nNa Europa n\u00e3o \u00e9 permitido utilizar o Xbee de 900MHz, deve ser ent\u00e3o utilizado o de \n\n2.4GHz [80]. \n\nLiga-se o XtreamBee ao APM1, no XtreamBee existe um pequeno switch no qual podemos \n\ndefinir o modo: master ou slave. O adaptador deve estar em modo master para esta liga\u00e7\u00e3o. \n\nDe seguida liga-se \u00e0 placa, atrav\u00e9s da porta de telemetria como se encontra ilustrado na \n\nfigura 66 [80]. \n\n \n\nFigura 66 - Liga\u00e7\u00e3o do Xbee \u00e0 placa APM V1 [80] \n\n\n\n105 \n \n\nNo caso de se utilizar um XtreamBee com adaptador USB basta apenas lig\u00e1-lo ao \n\ncomputador. Caso se esteja a utilizar um adaptador XtreamBee, deve-se conect\u00e1-lo com um \n\ncabo FTDI e lig\u00e1-lo \u00e0 porta USB do computador [80]. O adaptador deve estar no modo \n\nMASTER, em seguida deve-se conectar ao Mission Planner, como est\u00e1 descrito na sec\u00e7\u00e3o \n\n6. \n\nC.4-Gymbal da c\u00e2mara \nEste sistema faz com que a c\u00e2mara se mantenha est\u00e1vel, independentemente dos \n\nmovimentos efetuados pelo Arducopter. O sistema funciona da seguinte forma: quando \n\nexiste uma varia\u00e7\u00e3o do \u00e2ngulo de voo, \u00e9 feita tamb\u00e9m uma varia\u00e7\u00e3o no \u00e2ngulo da c\u00e2mara, \n\ncom amplitude contr\u00e1ria, para que a c\u00e2mara mantenha-se est\u00e1vel durante o voo [28]. O \n\nArducopter usado, n\u00e3o tem atualmente este sistema, contudo ele \u00e9 facilmente configur\u00e1vel \n\ntal como se explica de seguida. \n\nC.4.1-Instalar o gymbal da c\u00e2mara \n\nNa instala\u00e7\u00e3o do gymbal, \u00e9 prefer\u00edvel a configura\u00e7\u00e3o da estrutura em \u201cx\u201d, pois como foi \n\nreferido na sec\u00e7\u00e3o 4.2.1, deve-se utilizar uma estrutura em \u201cx\u201d quando usamos uma c\u00e2mara. \n\nPara usar uma plataforma de montagem da c\u00e2mara no Arducopter, recomenda-se a \n\ninstala\u00e7\u00e3o de uma estrutura hobbyking com pernas longas. Estas pernas s\u00e3o grandes o \n\nsuficiente para que ao aterrar, o Arducopter proteja a c\u00e2mara de impactos, como podemos \n\nverificar na figura 67 [81]. \n\nPara a montagem do gymbal segue-se os seguintes procedimentos:  \n\n\u2022 Nos bra\u00e7os do Arducopter, devem ser feitos dois furos para ligar as pernas de \n\ncarbono e devem ser cortadas as pernas existentes no kit inicial do Arducopter. \n\n\u2022 De seguida fazem-se 4 furos sobre o suporte de montagem da bateria e no suporte \n\nda c\u00e2mara, prendendo-a onde fica a bateria. \n\n\u2022 Posiciona-se o sonar numa das 4 pernas, no encaixe entre as pernas e os bra\u00e7os, \n\nusando uma bra\u00e7adeira de serrilha aperta-se o sonar para que esteja a apontar \n\ncorretamente para o ch\u00e3o.  \n\n\n\n106 \n \n\n \n\nFigura 67 - Exemplo da montagem do gymbal da c\u00e2mara  \n\nC.4.2-Como ligar os servos do gymbal  \n\nAtrav\u00e9s da figura 68, observamos que no conjunto de pins de output da placa APM, utiliza-\n\nse as sa\u00eddas PWM 5 e 6 para os movimentos do servo da c\u00e2mara. Usa-se o canal 5 para o \n\npitch da c\u00e2mara, e o canal 6 para o roll. Isso faz com que os servos auto estabilizem a \n\nc\u00e2mara, sem ser necess\u00e1rio programar qualquer linha de c\u00f3digo [81]. \n\n \n\nFigura 68 - Canais de output para roll e pitch da c\u00e2mara [81] \n\n\n\n107 \n \n\nC.5-Placa On-Screen Display (OSD)  \nNa placa APM pode-se adicionar uma placa OSD (figura 69), chamada MinimOSD. Esta \n\nplaca l\u00ea todos os dados do MAVLink do stream de telemetria e carrega o stream do v\u00eddeo \n\nproveniente de uma c\u00e2mara no Arducopter, e atrav\u00e9s de um transmissor de v\u00eddeo sem fios \n\ntransmite o stream do v\u00eddeo em tempo real. \u00c9 \u00fatil no caso de fazermos um voo em First \n\nPerson View (FPV), ou se queremos utilizar outro dispositivo sem ser o port\u00e1til para \n\nvisualizar os dados do Mission Planner [82]. \n\n \n\nFigura 69 - Exemplo de um OSD (on screen display) [82] \n\nA montagem e instala\u00e7\u00e3o do equipamento est\u00e3o na refer\u00eancia [83]. Este dispositivo instala-\n\nse montando-o na porta de telemetria da placa APM, deve ser instalado juntamente com um \n\ntransmissor de v\u00eddeo de forma a poder enviar o que est\u00e1 a ser capturado pela c\u00e2mara em \n\ntempo real diretamente para o port\u00e1til. \n\nC.6-Monitor de bateria  \nUm dos sensores opcionais que n\u00e3o se encontra no Arducopter usado na Universidade, \u00e9 o \n\nmonitor de corrente da bateria. Este sensor \u00e9 importante pois pode-se perder a no\u00e7\u00e3o do \n\ntempo de voo do helic\u00f3ptero e este ao ficar com pouca bateria e eventualmente cair. Uma \n\nvez configurado o sensor de monitoriza\u00e7\u00e3o de voltagem e corrente da APM1, este ir\u00e1 \n\nprovidenciar tanto dados de corrente e voltagem, como o consumo em miliamperes por \n\nhora [35].  \n\n\n\n108 \n \n\nConecta-se o sensor AttoPilot para a APM como mostra a figura 70. Devem-se usar os pins \n\nAN0, AN1 e o pin GND.  \n\n \n\nFigura 70 - Imagem ilustrativa de como conectar o sensor AttoPilot [35] \n\nO sensor \u00e9 ativado pelo Mission Planner atrav\u00e9s do separador \u201cconfiguration\u201d. Os dados da \n\nvoltagem aparecer\u00e3o no separador \u201cflight data\u201d do Mission Planner s\u00e3o os de \u201cbatery \n\nvoltage calced\u201d [35]. \n\n  \n\n\n\n109 \n \n\nAnexo D-Afina\u00e7\u00f5es dos termos PID \n\n\u00c9 poss\u00edvel afinar os valores de PID atrav\u00e9s do Mission Planner no separador \n\n\u201cconfiguration\u201d. Estes valores servem para tornar o voo do helic\u00f3ptero de acordo com a \n\nnossa prefer\u00eancia, por exemplo quando queremos um voo que os comandos sejam mais \n\ndin\u00e2micos, ou por exemplo quando queremos que o helic\u00f3ptero tenha um voo mais est\u00e1vel. \n\nAo altera-se os par\u00e2metros pode-se personalizar o seu controlo de voo de acordo com o \n\ndesejado. \n\nO par\u00e2metro Stabilize \u00e9 usado em todos os modos de voo exceto o Acro. Est\u00e1 feito para ser \n\nsim\u00e9trico no eixo de pitch e roll, mas os eixos podem ser afinados separadamente. Por \n\nexemplo, quando existe mais peso sobre um dos eixos, tornando um dos eixos com maior \n\nmomento de in\u00e9rcia do que o outro, ent\u00e3o torna-se desequilibrado tendo que ser afinado \n\nseparadamente. \n\nOs par\u00e2metros que podem ser afinados s\u00e3o [69]:  \n\n\u2022 Stabilize_P -> r\u00e1cio de rota\u00e7\u00e3o, quanto maior o seu valor mais rapidamente ser\u00e1 \n\natingido o valor desejado. \n\n\u2022 Stabilize_I -> usado para compensar as varia\u00e7\u00f5es do centro de gravidade. \n\n\u2022 Stabilize_IMAX -> valor m\u00e1ximo que a aeronave pode compensar as varia\u00e7\u00f5es. \n\n\u2022 Rate_P-> Valor mais importante, este termo controla quanta pot\u00eancia \u00e9 necess\u00e1ria \n\npara fazer uma rota\u00e7\u00e3o. Quanto maior o peso e a for\u00e7a de pot\u00eancia do Arducopter a \n\nser utilizado, menor ser\u00e1 o seu valor. \n\n\u2022 Rate_I -> Usado para ajudar a aeronave a atingir o Roll rate desejado. Deve ser \n\nnormalmente definido como 0 visto o seu ajustamento ser dif\u00edcil. \n\n\u2022 Rate_IMAX -> valor m\u00e1ximo que o par\u00e2metro RATE_I pode ter. \n\nQuanto ao par\u00e2metro YAW \u00e9 utilizado para manter o \u00e2ngulo de yaw espec\u00edfico, para isso, \u00e9 \n\nnecess\u00e1rio configurar os seguintes par\u00e2metros [69]: \n\n\u2022 Stabilize_YAW_P-> Serve para que a aeronave fa\u00e7a uma rota\u00e7\u00e3o sem oscila\u00e7\u00f5es \n\npara o alvo desejado. Se o par\u00e2metro for muito alto causar\u00e1 oscila\u00e7\u00e3o. \n\n\n\n110 \n \n\n\u2022 Stabilize_YAW_I -> Funciona como um corte do excesso de balan\u00e7o do helic\u00f3ptero. \n\nIndica a rapidez que se leva at\u00e9 atingir o valor desejado, quanto mais alto o valor \n\nmais r\u00e1pido. \n\n\u2022 Rate_YAW_P-> Serve para ter mais controlo sobre o r\u00e1cio de rota\u00e7\u00e3o, se for baixo \n\nnunca parar\u00e1 de rodar, se for muito alto far\u00e1 com que oscile. \n\n\u2022 Rate_YAW_I -> n\u00e3o \u00e9 utilizado. \n\nO par\u00e2metro Loiter \u00e9 usado para controlar a inclina\u00e7\u00e3o da aeronave em dire\u00e7\u00e3o ao local de \n\nloiter enquanto esta mant\u00e9m a posi\u00e7\u00e3o [69]. \n\n\u2022 Loiter_P-> \u00e9 o r\u00e1cio com que o Arducopter ir\u00e1 mover-se em dire\u00e7\u00e3o ao ponto de \n\nloiter. Se n\u00e3o for suficientemente alto ele ir\u00e1 desviar-se do local onde deve manter a \n\nposi\u00e7\u00e3o e se for muito alto ir\u00e1 oscilar perto da localiza\u00e7\u00e3o desejada. \n\n\u2022 Loiter_I -> Permitir\u00e1 o Arducopter voar com ventos com o menor erro. Mas deve \n\nser usado com cuidado pois se o valor for alto demais far\u00e1 com que ele oscile. \n\n\u2022 Loiter_IMAX-> Valor m\u00e1ximo de do par\u00e2metro Loiter_I. \n\nO par\u00e2metro Nav_WP \u00e9 usado para controlar o r\u00e1cio de velocidade desde a aeronave ao \n\nwaypoint pretendido [69]. \n\n\u2022 Nav_WP_P->Visto a velocidade m\u00e1xima ser de 4m/s quanto maior for o par\u00e2metro \n\nmaior ser\u00e1 o pitch para atingir tal velocidade. \n\n\u2022 Nav_WP_I ->Permite voar frente a ventos. Quanto maior o valor mais frente faz ao \n\nvento. \n\n\u2022 Nav_WP_IMAX-> quantidade de pitch que podemos adicionar para superar o vento. \n\nO par\u00e2metro Alt Hold \u00e9 usado para manter a sua altitude usando o sensor de press\u00e3o [69]. \n\n\u2022 Altitude hold P-> \u00c9 usado para converter o erro da altitude no ritmo de subida. \n\nQuanto maior o seu valor mais r\u00e1pido ele subir\u00e1. \n\n\u2022 Altitude hold I-> \u00c9 usado quando o Arducopter tem dificuldade em manter a \n\nposi\u00e7\u00e3o quando disp\u00f5e de pouca bateria. \n\n\u2022 Altitude hold IMAX-> \u00c9 a quantidade de throttle que pode ser ajustada. \n\n\n\n111 \n \n\nO par\u00e2metro Throttle Rate \u00e9 usado para ajustar o ritmo de subida [69]. \n\n\u2022 Throttle Rate P -> Quantidade de throttle usado para alterar o ritmo de subida. \n\n\u2022 Throttle Rate _I -> Compensa o erro necess\u00e1rio para atingir o ritmo de subida \n\nnecess\u00e1rio. \n\n\u2022 Throttle Rate _IMAX -> Quantidade de Throttle Rate _I, pode-se adicion\u00e1-la ou \n\nremov\u00ea-la para atingir o ritmo de subida desejado. \n\nExistem v\u00e1rias formas de afina\u00e7\u00e3o, para cada afina\u00e7\u00e3o implica um melhoramento no voo do \n\nhelic\u00f3ptero, mas estas afina\u00e7\u00f5es devem sempre ser feitas com cuidado, pois uma m\u00e1 \n\nafina\u00e7\u00e3o implica o voo descontrolado e a consequente queda do Arducopter [69].  \n\nEm baixo encontram-se descritas v\u00e1rias resolu\u00e7\u00f5es segundo os problemas do Arducopter \n\nem voo [69]. \n\n\u2022 O Arducopter oscila lentamente com longos movimentos quando estabilizado, ent\u00e3o \n\ndeve-se baixar o par\u00e2metro Stabilize Roll P. \n\n\u2022 O Arducopter oscila rapidamente com movimentos curtos quando estabilizado, \n\nent\u00e3o deve-se baixar o par\u00e2metro Rate Roll P. \n\n\u2022 O Arducopter sofre oscila\u00e7\u00f5es quando desce rapidamente, ent\u00e3o aumenta-se o \n\npar\u00e2metro Rate Roll P, este par\u00e2metro pode ser corrigido, mas \u00e9 praticamente \n\nimposs\u00edvel chegar a \u00f3timos valores para tais oscila\u00e7\u00f5es.  \n\n\u2022 O Arducopter \u00e9 muito lento, ent\u00e3o aumenta-se o par\u00e2metro Stabilize Roll P.  \n\n\u2022 Ao descolar o Arducopter faz yaw uns 15? para esquerda ou \u00e0 direita, ent\u00e3o os \n\nmotores n\u00e3o se encontram direitos ou os ESC n\u00e3o est\u00e3o calibrados, um dos dois \n\ndeve ser corrigido. \n\n\u2022 Depois de voos agressivos o Arducopter inclina-se para um lado cerca de 10? a 30?, \n\nent\u00e3o deve-se arranjar maneira de remover as vibra\u00e7\u00f5es e esperar que a APM \n\ncorrija. \n\n\u2022 O Arducopter n\u00e3o fica totalmente quieto no ar, ent\u00e3o tenta-se correr o teste de n\u00edvel \n\ncom o Arducopter numa superf\u00edcie plana, ou voar em modo auto-trim num \n\nambiente sem vento. \n\n\n\n112 \n \n\n\u2022 O Arducopter voa bem, mas quando est\u00e1 a pairar um dos motores come\u00e7a a falhar \n\npor 1 segundo, ent\u00e3o um dos motores pode estar estragado ou os seus conetores \n\nentre eles e os ESC podem estar com falhas. Deve-se tentar arranj\u00e1-lo ou substitu\u00ed-\n\nlo por outro. \n\n\u2022 A aeronave est\u00e1 constantemente a subir ou a descer em Alt Hold, ent\u00e3o o par\u00e2metro \n\nThrottle P est\u00e1 muito alto ou muito baixo. Uma maneira de configurar o seu valor \u00e9 \n\nde pensar quantas vezes mexemos o stick de throttle para que ele pare \n\nperfeitamente. Essa quantidade de tempo \u00e9 proporcional ao valor necess\u00e1rio para o \n\npar\u00e2metro Throttle P. \n\n\u2022 O Sonar n\u00e3o est\u00e1 a funcionar, ent\u00e3o deve ser devido ao ru\u00eddo el\u00e9trico dos ESC, \n\ndeve-se afast\u00e1-lo dos ESC ou utilizar cabos blindados. Pode tamb\u00e9m ser devido \u00e0s \n\ntemperaturas serem muito baixas e o sonar parar de trabalhar. \n\nAo fazer Loiter a aeronave faz um c\u00edrculo no sentido dos ponteiros do rel\u00f3gio ou ao \n\ncontr\u00e1rio, ent\u00e3o deve-se ajustar a declina\u00e7\u00e3o da b\u00fassola at\u00e9 que helic\u00f3ptero pare de circular. \n\n\n\tRaul_AndradeEngInformatica\n\tTese Final\n\tResumo\n\tAbstract\n\tAgradecimentos\n\t\u00cdndice de Figuras\n\tAcr\u00f3nimos\n\t1-Introdu\u00e7\u00e3o\n\t1.1-Motiva\u00e7\u00e3o\n\t1.2-Objetivos\n\t1.4-Estrutura do documento\n\n\t2-Estado da Arte\n\t2.1-Funcionalidade dos UAV\n\t2.1.1-Seguran\u00e7a P\u00fablica\n\t2.1.2-Geologia e Arqueologia\n\t2.1.3-Aquisi\u00e7\u00e3o de imagens a\u00e9reas\n\t2.1.4-Rob\u00f3tica\n\n\n\t3-Explica\u00e7\u00e3o geral do sistema\n\t4- Descri\u00e7\u00e3o do Arducopter\n\t4.1-APM (ArduPilot Mega)\n\t4.1.1-Alimenta\u00e7\u00e3o da placa\n\t4.1.2-Descri\u00e7\u00e3o da placa APM1\n\t4.1.3-Descri\u00e7\u00e3o da placa oilpan\n\t4.1.5-Descri\u00e7\u00e3o da APM2\n\n\t4.2-Estrutura do quadcopter\n\t4.2.1-Diferen\u00e7as entre a estrutura em x ou em +\n\t4.2.2-Trem de aterragem (estrutura de aterragem)\n\n\t4.3-Motores/ESC (eletronic speed controls) /H\u00e9lices\n\t4.4-R\u00e1dio transmissor e recetor\n\t4.4.1-R\u00e1dio transmissor\n\t4.4.2-R\u00e1dio recetor\n\n\t4.5-Bateria e carregador\n\t4.5.1-Bateria\n\t4.5.2-Carregador\n\n\t4.6-Sensores\n\t4.6.1-Magnet\u00f3metro\n\t4.6.1.1-M\u00e9todo 1\n\t4.6.1.2-M\u00e9todo 2\n\n\t4.6.2-GPS (Global Positioning System)\n\t4.6.3-Sonar (sensor ultrass\u00f3nico)\n\n\n\t5- Software e programa\u00e7\u00e3o\n\t5.2-Programa\u00e7\u00e3o em Arduino\n\t5.3-Descri\u00e7\u00e3o do c\u00f3digo\n\t5.3.1-Pasta Libraries\n\t5.3.2-Pasta Arducopter\n\n\n\t6-APM Mission Planner\n\t6.1-O que \u00e9 a Ground Control Station\n\t6.1.1-Utilizar o Mission Planner ground station\n\n\t6.2-Defini\u00e7\u00e3o de waypoints atrav\u00e9s de um editor point and click\n\t6.2.1-Comandos b\u00e1sicos de waypoint\n\t6.2.2-Carregar um voo aut\u00f3nomo para a placa APM quando n\u00e3o dispomos de um sistema de telemetria sem fios\n\n\t6.3-Fazer download e an\u00e1lise dos ficheiros log\n\t6.3.1-Fazer download\n\t6.3.2-Analisar os ficheiros log\n\n\t6.4-utiliza\u00e7\u00e3o de um gamepad /joystick para controlar o Arducopter manualmente em vez do controlo remoto\n\t6.5-Scripting em Phyton\n\t6.6-Controlo atrav\u00e9s do terminal CLI\n\t6.6.1-Como configurar o Arducopter atrav\u00e9s do CLI\n\n\n\t7-Configura\u00e7\u00f5es Pr\u00e9-voo\n\t7.1-Como funciona o sistema do Arducopter\n\t7.2-Voo\n\t7.3-Seguran\u00e7a\n\t7.4-Armar e desarmar os motores\n\t7.5-Calibra\u00e7\u00f5es dos aceler\u00f3metros atrav\u00e9s do controlo remoto\n\t7.6-Primeiro Voo\n\t7.7-Calibra\u00e7\u00e3o dos controladores ESC\n\t7.7.1-Calibra\u00e7\u00e3o autom\u00e1tica\n\t7.7.2-Calibra\u00e7\u00e3o Manual\n\t7.7.3-Testes\n\n\t7.8-Afina\u00e7\u00f5es dos par\u00e2metros do controlador PID\n\t7.9-Primeira configura\u00e7\u00e3o do Arducopter\n\t7.10-Failsafe\n\n\t8-Voos de teste e resultados\n\t9-Conclus\u00f5es e trabalhos futuros\n\t9.1-Conclus\u00f5es\n\t9.2-Contribui\u00e7\u00f5es\n\t9.3- Trabalhos futuros\n\n\tRefer\u00eancias Bibliogr\u00e1ficas\n\tAnexos\n\tAnexo A-Manual de montagem do Arducopter\n\tA.1-Montagem da placa Arduino\n\tA.2-Soldagem dos conetores dos ESC (Electronics speed controls) (conetor f\u00eamea) e os conetores dos motores (Conetor macho).\n\tA.3-Montagem da placa de distribui\u00e7\u00e3o de energia\n\n\tAnexo B-Montagem da estrutura do Arducopter\n\tB.1 \u2013 Montagem da sec\u00e7\u00e3o central\n\tB.2-Trem de Aterragem\n\tB.3-Montagem dos motores nos bra\u00e7os\n\tB.4-Conex\u00e3o dos ESC aos motores\n\tB.5-Liga\u00e7\u00e3o do controlo de r\u00e1dio \u00e0 APM\n\tB.6-Liga\u00e7\u00e3o do controlo remoto\n\tB.7-Instala\u00e7\u00e3o do recetor de controlo remoto\n\n\tAnexo C-Montagem de sensores opcionais\n\tC.1-Sensor de infravermelhos\n\tC.2-Sensor \u00f3tico de fluxo (optical flow)\n\tC.2.1-Como ligar o sensor \u00e0 placa\n\tC.2.2-Como manter a posi\u00e7\u00e3o do Arducopter em voo\n\n\tC.3-Telemetria sem fios\n\tC.3.1-3DR Radio\n\tC.3.2-Xbee\n\n\tC.4-Gymbal da c\u00e2mara\n\tC.4.1-Instalar o gymbal da c\u00e2mara\n\tC.4.2-Como ligar os servos do gymbal\n\n\tC.5-Placa On-Screen Display (OSD)\n\tC.6-Monitor de bateria\n\n\tAnexo D-Afina\u00e7\u00f5es dos termos PID"}]}}}