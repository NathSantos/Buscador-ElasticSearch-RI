{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.19493"}, {"@name": "filename", "#text": "2850_Silva_WellingtonDioliceFelixda_M.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "Universidade Estadual de Campinas\nFaculdade de Engenharia El\u00e9trica e de Computa\u00e7\u00e3o\nDepartamento de Engenharia da Computa\u00e7\u00e3o e Automa\u00e7\u00e3o Industrial\nProcessamento, An\u00e1lise e Visualiza\u00e7\u00e3o de Dados Tomogr\u00e1ficos Multidimensionais de Rocha\nPor\nWellington Diolice Felix da Silva\nOrientador Prof. Dr. Roberto de Alencar Lotufo\nDisserta\u00e7\u00e3o submetida \u00e0 Faculdade de Engenharia El\u00e9trica da Universidade Estadual de Campinas, para o preenchimento dos pr\u00e9-requisitos parciais para obten\u00e7\u00e3o do T\u00edtulo de Mestre em Engenharia El\u00e9trica.\n22 de Agosto 1997\ncu ; aponde a redd\u00e7\u00e3o4inU d\u00e1 I\nUnent\u00e2dor\n\n[s\u00a138p\n\u00dcNI0ADE.\u201eZO;........\nN.\u2019 CHAMADA:\nV.....................\nTCM30 BQZ..^ZpAl\u201e...\nPROC.\t.......\nC \u25a1 .\t0 |yj\npre\u00e7o^c^mlLz......\nDATA....Vrz\u00a3uihi3.\nN\u2019 CPD............\nCM-0O1O4?93-1\nFICHA CATALOGR\u00c1HCA ELABORADA PELA BIBLIOTECA DA \u00c1REA DE ENGENHARIA - BAE - UNICAMP\nSilva, Wellington Diolice Felix da\nSi38p\tProcessamento, an\u00e1lise e visualiza\u00e7\u00e3o de dados tomogr\u00e1ficos\nmultidimensionais de rocha / Wellington Diolice Felix da Silva. -Campinas, SP: [s.n.], 1997.\nOrientador: Roberto de Alencar Lo tufo.\nDisserta\u00e7\u00e3o (mestrado) - Universidade Estadual de Campinas, Faculdade de Engenharia El\u00e9trica e de Computa\u00e7\u00e3o.\nResumo\nEste trabalho aborda o desenvolvimento de ferramentas computacionais que auxiliam o estudo e a visualiza\u00e7\u00e3o do comportamento din\u00e2mico do escoamento de fluidos em um meio poroso. O objetivo principal \u00e9 calcular e visualizar a satura\u00e7\u00e3o de \u00f3leo no interior da amostra de rocha nos diversos instantes de tempo durante os ensaios de escoamento.\nOs dados volum\u00e9tricos s\u00e3o adquiridos por tomografia computadorizada enquanto a amostra de rocha \u00e9 submetida a ensaios de escoamento. Estes dados s\u00e3o processados utilizando o modelo voxel atrav\u00e9s das ferramentas desenvolvidas. Estas ferramentas est\u00e3o divididas em cinco grandes grupos: entrada de dados, pr\u00e9-processamento, processamento, visualiza\u00e7\u00e3o e visualiza\u00e7\u00e3o anal\u00edtica.\nNa fase de leitura da fita, as fatias tomografadas, armazenadas em dispositivos seq\u00fcenciais, s\u00e3o recuperadas atrav\u00e9s da reconstru\u00e7\u00e3o do volume da amostra no modelo voxel. Na fase de pr\u00e9-processamento, o volume \u00e9 tratado de modo a reduzir os dados armazenados, eliminando regi\u00f5es que n\u00e3o contenham dados de interesse. Al\u00e9m disso, s\u00e3o feitas corre\u00e7\u00f5es na imagem de modo a eliminar eventuais problemas de alinhamento e de varia\u00e7\u00f5es de escala ocorridos na varredura da amostra pelo to m\u00f3 grafo. Na fase de processamento, foi escolhido como exemplo de utiliza\u00e7\u00e3o destas ferramentas, o c\u00e1lculo da porosidade e da satura\u00e7\u00e3o de fluidos de um meio poroso. Estes c\u00e1lculos s\u00e3o definidos a partir de opera\u00e7\u00f5es aritm\u00e9ticas de volumes to mo gr\u00e1ficos. Na fase de visualiza\u00e7\u00e3o, s\u00e3o apresentadas tr\u00eas formas de visualiza\u00e7\u00e3o volum\u00e9trica que proporcionam v\u00e1rias perspectivas de an\u00e1lise: a visualiza\u00e7\u00e3o dos volumes atrav\u00e9s da concatena\u00e7\u00e3o lado a lado das fatias, de cortes ortogonais da amostra e da visualiza\u00e7\u00e3o 3D. Atrav\u00e9s da associa\u00e7\u00e3o de uma tabela din\u00e2mica de pseudo cores \u00e9 aumentado o contraste dos dados, enfatizando a visualiza\u00e7\u00e3o dos dados dentro de um intervalo de intensidade de interesse. Na fase da visualiza\u00e7\u00e3o anal\u00edtica, os dados s\u00e3o analisados atrav\u00e9s de c\u00e1lculos estat\u00edsticos aplicados ao volume e \u00e0s fatias da amostra.\nTodas estas opera\u00e7\u00f5es est\u00e3o implementadas dentro do software Khoros e s\u00e3o aplicadas ao problema exemplo do c\u00e1lculo da porosidade (dados est\u00e1ticos) e da satura\u00e7\u00e3o de fluidos no meio poroso (dados din\u00e2micos) atrav\u00e9s de dados obtidos por tomografia.\nAbstract\nThe volumetric data are acquired by computer tomography of the sample rock submitted to flowing off trials. These data are processed using the voxel model and the tools developed are divided in five main groups: data input, pre-processing, processing, visualization and analytical visualization.\nIn the tape reading stage, the slices produced by tomography, stored in sequential devices, are recovered through the volumetric reconstruction of the sample using the voxel model In the pre-processing stage, the volume is treated to reduce the amount of stored data, eliminating regions that contain non-interesting data. Besides that, some corrections are done to the image to eliminate eventual problems of size incompatibility and misalignment. In the processing stage, the calculus of the porosity of a porous media and the calculus of the saturation of fluids in that media were chosen as examples of the application of these tools. These computation processes are defined from arithmetic operations of tomographic volumes. In the visualization stage, three ways of volumetric visualization which provide various perspectives of analysis are presented: the visualization of volume through placing all the slices side by side, the visualization of orthogonal sections of the sample, and the 3D visualization of the volume. A dynamic pseudo color table is used to enhance the data within a specified intensity interval. In the analytical visualization stage, the data are analyzed through statistical calculus applied to the volume and to the slices of the sample.\nAll of these operations are implemented under the Khoros software and are applied to the sample problem of the porosity calculus (statistical data) and the saturation calculus (dynamic data) from the data obtained by tomography.\nAgradecimentos\nE um agradecimento todo especial:\nAos meus pais Diolice e Aparecida, e a minha irm\u00e3 Isla, por me encorajarem a enfrentar este desafio, acreditando e me fazendo acreditar em meu sonho e por estarem ao meu lado em todos meus momentos;\nA minha noiva Andrea, que mesmo separada pela dist\u00e2ncia, sempre esteve ao meu lado com seu carinho, amor e afeto, vivendo comigo as minhas vit\u00f3rias e derrotas durante estes dois anos;\nAo meu orientador Lotufo, pelo apoio, pela confian\u00e7a e pelo cr\u00e9dito que me tem dado desde meu ingresso na Unicamp.\nAo Adilson, por ter sido meu companheiro durante o desenrolar desta disserta\u00e7\u00e3o, ajudando na compreens\u00e3o do problema;\nAo F\u00e1bio e ao Mauro pela companhia de todas as horas em nossa republica;\nAos amigos da FEEC e de toda Unicamp, principalmente ao Guilherme, pelo amigo que se mostrou ser durante estes meses e pelas grandes ajudas nas revis\u00f5es e tradu\u00e7\u00f5es de meus textos;\nAo CNPq pelo apoio financeiro.\nAos meus pais, Diolice Felix da Silva e Aparecida de Oliveira Felix, e a minha noiva Andr\u00e9a Brand\u00e3o Tramonte.\n\u00edndice\nRESUMO\nABSTRACT\nAGRADECIMENTOS......................................................      IV\n\u00cdNDICE......................................................              VI\nLISTA DE FIGURAS\n\n1.\tINTRODU\u00c7\u00c3O\n1\n2.\tCONCEITOS B\u00c1SICOS\n9\n2.1\tPorosidade e Satura\u00e7\u00e3o\n9\n2,7.7\tPorosidade............................................................................\n9\n2.1.2\tSatura\u00e7\u00e3o................................................................................................7 7\n2.2\tTomografia Computadorizada........................................................................................12\n2.3\tModelo de Estrutura de Dados para Processamento, An\u00e1lise e Visualiza\u00e7\u00e3o de\nDados Multidimension ais.................................................................................................16\n2.3.1\tImage Understanding Environment..........................................................................18\n2.3.2\tModelo Polim\u00f3rfico de Dados do Khoros...................................................................\t19\n2.3.2.1\tSegmentos............................................................................................................  19\n2.3.2.1.1\tSegmento Value.  20\n2.3.2.1.2\tSegmento Map........................................................................................................21\n2.3.2.1.3\tSegmento Mask  .22\n2.3.2.1.4\tSegmento Location .................................................................................................22\n2.3.2.1.5\tSegmento Time.23\n2.3.2.2\tNovos Segmentos........................................................................................24\n2.3.2.3\tAmbiente de Desenvolvimento.............................................................24\n2.3.2.3.1\tCantata...........................................................................24\n2.3.2.3.2\tCraftsman.......................................................................  25\n2.3.2.3.3\tCompose...........................................................................26\n2.3.3\tModelo MMachLib........................................................................    28\n2.3.3.1\tEstrutura MMachLib..................................................................    30\n2.4\tVisualiza\u00e7\u00e3o 3D..................................................................................30\n2.4.1\tVSDtools.................................................................................  31\n2.5\tAquisi\u00e7\u00e3o dos Dados.............................................................................  32\n2.5.1\tPrepara\u00e7\u00e3o da Amostra.......................................................................32\n2.5.1.1\tEfeito de Endurecimento de Feixe.....................................................................................33\n2.5.2\tAquisi\u00e7\u00e3o de Imagem.........................................................................35\n3.\tPROCESSAMENTO, AN\u00c1LISE E VISUALIZA\u00c7\u00c3O DE DADOS.......................................................36\n3.1\tRecupera\u00e7\u00e3o das Imagens...........................................................................37\n3.1.1\tManipula\u00e7\u00e3o e Leitura da Fita ..............................................................37\n3.1.2\tConvers\u00e3o de Formatos de Armazenamento de Imagem............................................38\n3.1.3\tRepresenta\u00e7\u00e3o de um Volume Tomogr\u00e1fico.....................................................39\n3.2\tPr\u00e9-Processamento.................................................................................39\n3.2.1\tSele\u00e7\u00e3o da Regi\u00e3o M\u00ednima de Interesse,,.................................................    40\n3.2.2\tCorre\u00e7\u00e3o do Alinhamento...................................................................  41\n3.2.3\tNormaliza\u00e7\u00e3o das Dimens\u00f5es..................................................................42\n3.2.4\tMascarando Regi\u00f5es de N\u00e3o Interesse.........................................................43\n3.2.5\tRepresenta\u00e7\u00e3o Matem\u00e1tica do Pr\u00e9-processamento .................................................. 44\n3.3\tProcessamento...................................................................................  45\n3.4\tVisualiza\u00e7\u00e3o....................................................................................  46\n3.4.1\tMosaico...................................................................................................................46\n3.4.2\tProje\u00e7\u00e3o Ortogonal..................,.............................................................................. 49\n3.4.3\tTabela de Pseudo Cores Din\u00e2mica ............................................................50\n3.4.4\tVisualiza\u00e7\u00e3o 3D.............................................................................53\n3.5\tVisualiza\u00e7\u00e3o Anal\u00edtica............................................................................53\n4.\tIMPLEMENTA\u00c7\u00c3O..............................................................................          55\n4.1\tLeitura da Fita.................................................................................  57\n4.2\tPr\u00e9-Processamento.................................................................................59\n4.3\tProcessamento..................................................................  61\n4.3.1\tC\u00e1lculo da Porosidade e da Satura\u00e7\u00e3o ...........................................................61\n4.4\tVisualiza\u00e7\u00e3o.....................................................................62\n4.4, l Montage.....................................................................  63\n4.4.2\tOperador Orthogonal Projection..............................................................    65\n4.4.3\tTabela de Pseudo Cores Din\u00e2mica.................................................................66\n4.4.4\tVisualiza\u00e7\u00e3o 3D...........................................................  67\n4.4.5\tVisualiza\u00e7\u00e3o Din\u00e2mica dos Dados...............................................................  69\n4.5\tVisualiza\u00e7\u00e3o Anal\u00edtica.............................................................................  70\n5.\tRESULTADOS............................................................................................  73\n6.\tCONCLUS\u00d5ES................................................................          84\n7.\tREFER\u00caNCIAS BIBLIOGR\u00c1FICAS........................................................................      87\nviu\nLista de Figuras\nFigura 1-1 - Imagem Tomogr\u00e1fica Original de um Corte de um Meio Poroso Cil\u00edndrico.3\nFigura 1-2 - Diagrama Geral.......................................................3\nFigura 1-3 - Leitura e Convers\u00e3o das Imagens Tomogr\u00e1ficas.........................4\nFigura 1-4 - Ilustra\u00e7\u00e3o do Problema da Manipula\u00e7\u00e3o de Fatias N\u00e3o Alinhadas e Com\nDimens\u00f5es Diferentes.........................................................5\nFigura 1-5 - Mosaico..............................................................7\nFigura 1-6 - Proje\u00e7\u00e3o Ortogonal...................................................7\nFigura 1-7 - Visualiza\u00e7\u00e3o 3D......................................................7\nFigura 2-1 - Representa\u00e7\u00e3o dos Pixels e Voxels...................................12\nFigura 2-2 - Princ\u00edpio da Radiografia Convencional.............................  13\nFigura 2-3 - Princ\u00edpio da Tomografia Computadorizada...........................  13\nFigura 2-4 - Tom\u00f3grafo de 1a. Gera\u00e7\u00e3o............................................15\nFigura 2-5 - Tom\u00f3grafo de 2a. Gera\u00e7\u00e3o..........................................  15\nFigura 2-6 - Tom\u00f3grafo de 3a. Gera\u00e7\u00e3o............................................15\nFigura 2-7 - Tom\u00f3grafo de 4a. Gera\u00e7\u00e3o............................................15\nFigura 2-8 - Por\u00e7\u00e3o da Hierarquia da Classe Base do Modelo IUE...................18\nFigura 2-9 - Modelo Poum\u00f3rfico (Figura extra\u00edda de Khor9 1)......................20\nFigura 2-10- Segmento de Valor (Figura extra\u00edda de Khor9 1)....................  21\nFigura 2-11- Segmento de Mapa (Figura extra\u00edda de Khor9 1).....................  21\nFigura 2-12- Segmento Mask (Figura extra\u00edda de Khor9 1)...........................22\nFigura 2-13- Segmento Location (Figura extra\u00edda de Khor9 1)....................  23\nFigura 2-14- Segmento de Tempo (Figura extra\u00edda de Khor9 1).......................24\nFigura 2-15- Workspace Desenvolvido no Ambiente Gr\u00e1fico de Programa\u00e7\u00e3o do Cantata. . 25 Figura 2-16- Painel de Controle Principal do Craftsman...........................26\nFigura 2-17 - Painel de Controle Principal do Compose .......................................................... 27 Figura 2-18- Painel de Controle Principal do Guise...............................28\nFigura 2-19 - Modelo de Interface MMachLib...................................................29\nFigura 2-20 - Modelo Esquem\u00e1tico da Estrutura de Dados MMachLib..............................30\nFigura 2-21 - Modelo Esquem\u00e1tico da Visualiza\u00e7\u00e3o 3D..........................................31\nFigura 2-22 - Workspace da Visualiza\u00e7\u00e3o 3D...................................................31\nFigura 2-23 - Prepara\u00e7\u00e3o da Amostra..........................................................33\nFigura 2-24 - Modelo Esquem\u00e1tico do Deslocamento dos Fluidos pela Amostra....................33\nFigura 2-25 - Diagrama Ilustrativo do Efeito de Endurecimento de Feixe.......................34\nFigura 3-1 - Modelo Geral de Processamento de Imagens Tomogr\u00e1ficas...........................36\nFigura 3-2 - Modelo Esquem\u00e1tico de Recupera\u00e7\u00e3o das Imagens Gravadas em Fita..................37\nFigura 3-3 - Representa\u00e7\u00e3o Gen\u00e9rica de um Volume Tomogr\u00e1fico.................................39\nFigura 3-4 - Modelo Esquem\u00e1tico do Pr\u00e9-processamento.........................................40\nFigura 3-5 - Modelo Esquem\u00e1tico da Sele\u00e7\u00e3o da Regi\u00e3o M\u00ednima..................................40\nFigura 3-6 - Ilustra\u00e7\u00e3o Demonstrando o Problema do Alinhamento...............................41\nFigura 3-7 - Modelo Esquem\u00e1tico Demonstrativo da Normaliza\u00e7\u00e3o das Fatias da Amostra43\nFigura 3-8 - Modelo Esquem\u00e1tico de Mascaramento de uma Imagem................................44\nFigura 3-9 - Modelo Esquem\u00e1tico do Mosaico de uma Imagem...................................  47\nFigura 3-10 - Modelo Esquem\u00e1tico do Escalonamento do Mosaico de uma Imagem...................48\nFigura 3-11 - Modelo Esquem\u00e1tico de Identifica\u00e7\u00e3o da Fatias..................................48\nFigura 3-12- ^Modelo Esquem\u00e1tico da Personaliza\u00e7\u00e3o do Display................................49\nFigura 3-13- Modelo Esquem\u00e1tico de Escolha de um Subconjunto.................................49\nFigura 3-14 - Organiza\u00e7\u00e3o dos Planos de Cortes da Proje\u00e7\u00e3o Ortogonal.........................50\nFigura3-15 - Modelo Esquem\u00e1tico da Tabela de Cores Din\u00e1mica..................................51\nFigura 3-16 - Tabela de Cores Senoidal.......................................................51\nFigura 3-17 - Tabela de Cores Gen\u00e9rica.......................................................53\nFigura 4-1 - Operador Multiplica\u00e7\u00e3o..........................................................56\nFigura 4-2 - Pane do Operador Tape-in ....................................................................................... 56\nFigura 4-3 - Workspace do C\u00e1lculo da Porosidade..............................................57\nFigura 4-4 - Modelo Esquem\u00e1tico Tape-in......................................................57\nFigura 4-5 - Ilustra\u00e7\u00e3o do Problema da Manipula\u00e7\u00e3o de Imagens N\u00e3o Alinhadas..................60\nFigura 4-6 - Modelo Esquem\u00e1tico Normalezed Crop..............................................61\nFigura 4-7 - Workspace do C\u00e1lculo da Porosidade..............................................62\nFigura 4-8 - Modelo Esquem\u00e1tico do Operador Montage ........................................................ 63\nFigura 4-9 - Exemplo de Relat\u00f3rio Produzido pelo Montage.....................................64\nFigura 4-10 - Modelo Esquem\u00e1tico OrthogonalProjection.................................................... 65\nFigura 4-11- Satura\u00e7\u00e3o de \u00d3leo com Escala de Cores Gerada pelo Operador Montage 66\nFigura 4-12- Satura\u00e7\u00e3o de \u00d3leo com Escala de Cores Gerada pelo Operador Orthogonal\nProjection ................................................................ 67\nFigura 4-13 - Workspaceda Visualiza\u00e7\u00e3o 3D.......................................68\nFigura 4-14 - Modelo Esquem\u00e1tico Visualiza\u00e7\u00e3o 3D.............................  69\nFigura 4-15- Anima\u00e7\u00e3o Vista Atrav\u00e9s da Sobreposi\u00e7\u00e3o de Imagens..................70\nFigura 4-16- Satura\u00e7\u00e3o M\u00e9dia de \u00d3leo em 8 Diferentes Instantes de Tempo.........71\nFigura 4-17- M\u00e9dia de uma Imagem Com M\u00e1scara (Esquerda) e Sem M\u00e1scara (Direita).72\nFigura 5-1 - Primeira Fatia do Volume Tomogr\u00e1fico de uma Amostra Saturada de \u00d3leo,\nSubmetida \u00c0 Inje\u00e7\u00e3o de \u00e1gua...............................................74\nFigura 5-2 - Volume da Figura 5-1 Visualizado pelo Operador Montage sem Tabela de\nPseudo Cores............................................................  74\nFigura 5-3 - Operador Normauzed Crop Aplicado ao Volume Representado na Figura 5-1.. 75\nFigura 5-4 - Operador Orthogonal Projection Aplicado ao Volume Anterior, X=128, Y=128\nE Z=4; MIN= 1600 E Max=2050.............................................  76\nFigura 5-5 - Porosidade Referente a Primeira Fatia da Amostra...................77\nFigura 5-6 - Satura\u00e7\u00e3o de \u00d3leo Referente a Primeira Fatia da Amostra............77\nFigura 5-7 - Porosidade Visualizada pelo Operador Montage com Redu\u00e7\u00e3o de 50% das\nDimens\u00f5es de c.ada Fatia com Tabela de Pseudo Cores Aplicada ao Intervalo [0,30].. 78\nFigura 5-8 - Proje\u00e7\u00e3o Ortogonal da Porosidade, com Cortes nos Planos X-128, y=128, Z=0 e Tabela de Pseudo Cores Aplicada ao Intervalo [0,30].....................79\nFigura 5-9 - Satura\u00e7\u00e3o Visualizada pelo Operador Montage. com Redu\u00e7\u00e3o de 33% das Dimens\u00f5es de cada Fatia, com 5 Fatias por Linha da Imagem com Tabela de Pseudo Cores Aplicada ao Intervalo [0,100].......................................80\nFigura 5-10 - Proje\u00e7\u00e3o Ortogonal da Satura\u00e7\u00e3o, com Cortes nos Planos X=200, Y=30, Z=8 e Tabela de Pseudo Cores Aplicada ao Intervalo [0,100]....................80\nFigura 5-11- Visualiza\u00e7\u00e3o 3D da Satura\u00e7\u00e3o Evidenciando as Regi\u00f5es Cuja Satura\u00e7\u00e3o \u00e9\nInterior a 50%............................................................81\nFigura 5-12 - Sobreposi\u00e7\u00e3o de Tr\u00eas Diferentes Instantes Visualizados pela T\u00e9cnica\nVisualiza\u00e7\u00e3o 3D com Satura\u00e7\u00e3o Inferior a 50%..............................81\nFigura 5-13 - Porosidade M\u00e9dia da Amostra a Cada Fatia.......................  82\nFigura 5-14 - Satura\u00e7\u00e3o M\u00e9dia de \u00d3leoem 8 Diferentes Instantes de Tempo na Amostra\nAnterior..................................................................83\n1.\tIntrodu\u00e7\u00e3o\nCom o desenvolvimento computacional emergindo rapidamente nos \u00faltimos anos, an\u00e1lises deslumbradas somente em sonhos, est\u00e3o sendo vi\u00e1veis na atualidade. C\u00e1lculos volumosos, imagens e gr\u00e1ficos de qualidade, agora podem ser conseguidos sem grandes investimentos, proporcionando a obten\u00e7\u00e3o de resultados bastante precisos.\nNesta sociedade capitalista e industrializada, o petr\u00f3leo mostra-se como uma das principais fontes energ\u00e9ticas para o ser humano. Sua aplicabilidade como mat\u00e9ria-prima vai desde o combust\u00edvel usado nos autom\u00f3veis, a fabrica\u00e7\u00e3o de pl\u00e1stico, o aquecimento de caldeiras, at\u00e9 o \u00f3leo usado por alguns pa\u00edses na gera\u00e7\u00e3o de energia el\u00e9trica.\nEstudos recentes informam que as reservas mundiais de petr\u00f3leo devem se esgotar at\u00e9 o final do pr\u00f3ximo s\u00e9culo. A procura de fontes energ\u00e9ticas alternativas e de formas mais eficientes de extra\u00e7\u00e3o est\u00e3o sendo pesquisadas de modo a adiar este problema, enquanto um substituto para o petr\u00f3leo n\u00e3o \u00e9 encontrado. O Brasil, como um grande detentor de reservat\u00f3rios de petr\u00f3leo, tamb\u00e9m tem estas preocupa\u00e7\u00f5es. A Petrobr\u00e1s, como empresa centralizadora destas atividades em nosso pa\u00eds, investe parte de seus recursos na melhoria das metodologias de an\u00e1lise das propriedades petrof\u00edsicas usadas no julgamento da viabilidade ou n\u00e3o da extra\u00e7\u00e3o em uma bacia petrol\u00edfera!.\nRecursos como a tomografia computadorizada t\u00eam provocado grandes saltos no estudo e no modelamento do escoamento de fluidos em meios porosos. Atrav\u00e9s dela, \u00e9 poss\u00edvel visualizar internamente o comportamento temporal do deslocamento do fluido injetado, calculando propriedades do meio poroso como um\nBacia Petrol\u00edfera: Extensa regi\u00e3o onde \u00e9 encontrado uma alta concentra\u00e7\u00e3o de petr\u00f3leo em seu subsolo. O maior exemplo brasileiro \u00e9 a bacia petrol\u00edfera de Campos, localizada em alto mar no litoral do Rio de Janeiro.\nEsta disserta\u00e7\u00e3o aborda o desenvolvimento de ferramentas computacionais [SLG97] que auxiliam os engenheiros de petr\u00f3leo a determinar caracter\u00edsticas petrof\u00edsicas de um po\u00e7o [AmBa\u00f3O], bem como a visualiza\u00e7\u00e3o do comportamento din\u00e2mico do escoamento dos fluidos pela amostra, usando para isto, um conjunto de imagens obtidas por tomograf\u00eda computadorizada.\nEstes problemas motivaram esta disserta\u00e7\u00e3o devido as dificuldades encontradas na manipula\u00e7\u00e3o e visualiza\u00e7\u00e3o de grandes volumes de dados [Falc93] [Lupp94], Para ilustra\u00e7\u00e3o da potencialidade destas ferramentas, foram abordados os c\u00e1lculos da porosidade e da satura\u00e7\u00e3o por interm\u00e9dio de imagens tomogr\u00e1ficas [Holl93] [Silv94] [Gome97].\nAs imagens tomogr\u00e1ficas utilizadas neste trabalho (Figura 1-1) fazem parte da tese de doutorado de Gomes [Gome97], respons\u00e1vel pela parte laboratorial, envolvendo desde a prepara\u00e7\u00e3o das amostras, at\u00e9 a aquisi\u00e7\u00e3o tomogr\u00e1fica de suas imagens. A metodologia utilizada nos c\u00e1lculos da porosidade e da satura\u00e7\u00e3o est\u00e3o fundamentadas nos estudos e conclus\u00f5es fornecidos por ele e sua equipe do Departamento de Engenharia de Petr\u00f3leo da Faculdade de Engenharia Mec\u00e2nica da UNICAMP. Nesta disserta\u00e7\u00e3o somente ser\u00e3o apresentadas as informa\u00e7\u00f5es laboratoriais e petrof\u00edsicas necess\u00e1rias \u00e0 caracteriza\u00e7\u00e3o e compreens\u00e3o dos problemas abordados, onde ser\u00e3o usadas imagens tomogr\u00e1ficas de meios porosos2 saturados pelos seguintes fluidos: ar, \u00e1gua, solu\u00e7\u00e3o aquosa de Kl (iodeto de pot\u00e1ssio) e \u00f3leo, necess\u00e1rias aos c\u00e1lculos das propriedades.\n2 Meio Poroso: No contexto da engenharia de petr\u00f3leo, meio poroso trata-se de uma amostra, uma por\u00e7\u00e3o de rocha do terreno a ser estudado.\nFigura 1-1 - Imagem Tomogr\u00e1fica Original de um Corte de um Meio Poroso Cil\u00edndrico\nO c\u00e1lculo dos resultados atrav\u00e9s das fatias obtidas por tomografias da amostra, pode ser dividido em cinco grandes grupos (Figura 1-2) que resumem as fase inerentes ao processo de determina\u00e7\u00e3o das propriedades escolhidas: recupera\u00e7\u00e3o de imagens, pr\u00e9-processamento, processamento, visualiza\u00e7\u00e3o e visualiza\u00e7\u00e3o anal\u00edtica.\nFigura 1-2 - Diagrama Geral\n\u2022 Recupera\u00e7\u00e3o das Imagens\nUm dos principais problemas encontrados durante este trabalho, est\u00e1 relacionado ao volume de dados processados. Como o n\u00famero de imagens geradas em um exame tomogr\u00e1fico \u00e9 tipicamente elevado, estes dados s\u00e3o armazenados em dispositivos com grande capacidade de armazenamento tais como fitas DAT, discos \u00f3pticos, etc.. Nos ensaios feitos neste trabalho, foram utilizadas fitas DAT de 4mm para o armazenamento e transporte dos dados tomogr\u00e1ficos para o computador usado no processamento.\nComo os dados armazenados em fita n\u00e3o podem ser diretamente processados, necessitou-se criar um dispositivo eficiente de manipula\u00e7\u00e3o e leitura das fitas de modo a copiar as imagens da fita para a mem\u00f3ria do computador, permitindo o processamento.\nPor n\u00e3o seguir uma padroniza\u00e7\u00e3o dos formatos das imagens, os formatos dos arquivos de armazenamento das imagens adquiridas por tomograf\u00eda s\u00e3o diferenciados para cada marca e modelo de tom\u00f3grafo. Deste modo, a maioria dos softwares de processamento de imagens n\u00e3o reconhecem a padroniza\u00e7\u00e3o usada, implicando na necessidade da exist\u00eancia de um conversor de tipos de imagens para cada modelo de tom\u00f3grafo.\nSendo assim, para que uma sequ\u00eancia de imagens seja recuperada e esteja pronta para o processamento, isto \u00e9, formando um volume de dados no modelo voxel representado pelo encadeamento das fatias de um exame, ser\u00e3o necess\u00e1rias duas etapas seq\u00fcenciais a serem seguidas: leitura e manipula\u00e7\u00e3o da fita e convers\u00e3o dos formatos das imagens, como mostra a Figura 1-3.\nFigura 1~3 - Leitura e Convers\u00e3o das Imagens Tomogr\u00e1ficas\n\u2022 Pr\u00e9-processamento\nUma fatia t\u00edpica obtida nos ensaios tomogr\u00e1ficos (Figura 1-1) possui grandes regi\u00f5es contendo informa\u00e7\u00f5es que n\u00e3o s\u00e3o relevantes ao problema abordado. As informa\u00e7\u00f5es pertinentes ao problema normalmente est\u00e3o localizadas no centro das\nVisando a redu\u00e7\u00e3o do espa\u00e7o de armazenamento e do processamento das imagens, uma forma de sele\u00e7\u00e3o autom\u00e1tica da regi\u00e3o de interesse baseada nas intensidades dos pixels \u00e9 implementada. Atrav\u00e9s da escolha de um intervalo de valores de interesse, ajustam-se as dimens\u00f5es de cada fatia da imagem, de modo que o resultado seja a sub-imagem definida pelo ret\u00e2ngulo m\u00ednimo englobador de todos os pontos cujas intensidades pertencem ao intervalo selecionado.\nDevido aos problemas com o posicionamento da amostra na mesa do tom\u00f3grafo, decorrentes da manipula\u00e7\u00e3o para a inje\u00e7\u00e3o dos diferentes fluidos, as regi\u00f5es de interesse das imagens normalmente n\u00e3o possuem as mesmas dimens\u00f5es, diferindo uma da outra por alguns poucos pixels: tipicamente de 1 a 4, para uma regi\u00e3o de aproximadamente 270 x 270. Assim, o processo to mo gr\u00e1fico acaba gerando se\u00e7\u00f5es el\u00edpticas, quando o esperado seriam se\u00e7\u00f5es circulares decorrentes da geometria cil\u00edndrica e do posicionamento longitudinal das amostras na mesa do tom\u00f3grafo.\nPara que seja poss\u00edvel a manipula\u00e7\u00e3o alg\u00e9brica dos pontos das imagens, necess\u00e1rio no c\u00e1lculo da porosidade e da satura\u00e7\u00e3o, precisa-se da equival\u00eancia espacial dos pixels de um exame e de outro, ou seja, as fatias das imagens devem estar alinhadas e normalizadas para uma mesma dimens\u00e3o comum. A Figura 1-4 mostra, de forma exagerada, a problem\u00e1tica ao se manipular alg\u00e9bricamente os pixels de duas fatias n\u00e3o alinhadas e com dimens\u00f5es diferente.\nImagem 1\nImagens\nIniciais\nImagem 2\nResultado\nEsperado\nFigura 1-4 - Ilustra\u00e7\u00e3o do Problema da Manipula\u00e7\u00e3o de Fatias N\u00e3o Alinhadas e Com Dimens\u00f5es Diferentes\nEsta problem\u00e1tica pode ser resolvida com a t\u00e9cnica de replica\u00e7\u00e3o de pixels, onde s\u00e3o gerados pontos intermedi\u00e1rios aos encontrados na amostra original.\nEsta abordagem mostra-se eficiente para pequenos \u00e2ngulos, onde o \u00e2ngulo formado entre o eixo de deslocamento da mesa do tom\u00f3grafo e o eixo da amostra, \u00e9 aproximadamente zero.\nOutro ponto a ser destacado \u00e9 que apesar de selecionar o ret\u00e2ngulo m\u00ednimo contendo todos os pontos de interesse, pontos indesejados continuam a existir. Devido a forma circular das regi\u00f5es de interesse e a forma retangular de representa\u00e7\u00e3o adotada pela maioria dos softwares de processamento de imagens, n\u00e3o \u00e9 poss\u00edvel conciliar um ajuste da imagem de modo a eliminar os pontos inconvenientes, sem que ocorra a perda de sub-regi\u00f5es de interesse. Para contornar este problema, usa-se um recurso chamado m\u00e1scara, onde uma imagem bin\u00e1ria com as mesmas dimens\u00f5es da original indica se um ponto \u00e9 representativo ou n\u00e3o. Sendo assim, antes de qualquer processamento de um ponto, verifica-se se ele est\u00e1 ou n\u00e3o mascarado. Estando mascarado, o ponto \u00e9 ignorado. A import\u00e2ncia deste recurso fica clara quando abordado o problema dos c\u00e1lculos estat\u00edsticos efetuados nas imagens.\n\u2022\tProcessamento\nTendo as fatias das imagens alinhadas, suas dimens\u00f5es normalizadas e com as m\u00e1scaras devidamente definidas, pode-se calcular qualquer propriedade representada pela combina\u00e7\u00e3o de opera\u00e7\u00f5es aplicadas \u00e0s imagens. Para efeito ilustrativo ser\u00e3o abordados os c\u00e1lculos da porosidade e da satura\u00e7\u00e3o que se limitam a opera\u00e7\u00f5es alg\u00e9bricas simples, aplicadas pontualmente.\n\u2022\tVisualiza\u00e7\u00e3o\nT\u00e3o importante quanto o c\u00e1lculo das propriedades s\u00e3o a visualiza\u00e7\u00e3o e a avalia\u00e7\u00e3o estat\u00edstica dos dados em qualquer uma das etapas do processamento. Para a visualiza\u00e7\u00e3o s\u00e3o implementadas tr\u00eas formas de visualiza\u00e7\u00e3o de dados volum\u00e9tricos: o mosaico das fatias (Figura 1-5), onde as fatias da amostra s\u00e3o organizadas lado a lado; a proje\u00e7\u00e3o ortogonal (Figura 1-6), onde se visualiza as tr\u00eas se\u00e7\u00f5es ortogonais da amostra; e a visualiza\u00e7\u00e3o 3D (Figura 1-7), que atrav\u00e9s de recursos de shading e de ilumina\u00e7\u00e3o possibilita a visualiza\u00e7\u00e3o da superf\u00edcie de interesse em perspectiva.\nFigura 1-5 - Mosaico\nFigura 1-6 - Proje\u00e7\u00e3o Ortogonal\nFigura 1-7 - Visualiza\u00e7\u00e3o 3D\nPara agilizar o processo de an\u00e1lise visual de um volume de dados, as opera\u00e7\u00f5es de visualiza\u00e7\u00e3o mosaico e proje\u00e7\u00e3o ortogonal permitem a gera\u00e7\u00e3o de uma imagem relat\u00f3rio contendo informa\u00e7\u00f5es gr\u00e1ficas e textuais relacionadas a amostra visualizada.\nO baixo contraste normalmente encontrado nas imagens tomogr\u00e1f\u00edcas de rochas inspirou a cria\u00e7\u00e3o de uma pseudo tabela de cores din\u00e2mica que evidencia um dado intervalo de intensidade, real\u00e7ando as regi\u00f5es de interesse da imagem. A tabela de cores, baseada em fun\u00e7\u00f5es senoidais, \u00e9 concebida sobre o modelo RGB, proporciona uma escala crescente de lumin\u00e2nc\u00eda, saindo do azul, passando pelo verde e chegando ao vermelho.\n\u2022 Visualiza\u00e7\u00e3o Anal\u00edtica\nAl\u00e9m da an\u00e1lise visual dos resultados obtidos, a an\u00e1lise estat\u00edstica \u00e9 uma forte aliada nos estudos realizados. Medidas como a m\u00e9dia, desvio padr\u00e3o, moda, etc. fornecem informa\u00e7\u00f5es preciosas, dif\u00edcilmente visualizadas diretamente na imagem. Os c\u00e1lculos estat\u00edsticos podem ser feitos em cada fatia, refletindo o comportamento local da amostra, ou em todo o volume, refletindo o comportamento global.\nA presen\u00e7a da m\u00e1scara inclu\u00edda no pr\u00e9-processamento das imagens, garante que somente os pontos de interesse ir\u00e3o contribuir para o resultado. Sem ela, todos os pontos, inclusive os indesejados, participariam da avalia\u00e7\u00e3o estat\u00edstica.\nO software freeware de processamento de imagens, Khoros [Khor91] foi utilizado para o desenvolvimento destas novas ferramentas e para o processamento das imagens tomo gr\u00e1ficas. Sua escolha deve-se ao seu grande potencial de prototipa\u00e7\u00e3o de solu\u00e7\u00f5es, ao seu c\u00f3digo fonte encontrar-se dispon\u00edvel e pelo seu reconhecimento como um dos principais softwares usados no processamento de imagens.\nEsta disserta\u00e7\u00e3o est\u00e1 organizada da seguinte forma: Neste cap\u00edtulo, apresenta-se uma introdu\u00e7\u00e3o ao problema estudado, bem como a linha de racioc\u00ednio seguida na solu\u00e7\u00e3o do problema. No segundo cap\u00edtulo trata-se de uma colet\u00e2nea de teorias dos diversos assuntos diretamente ligados ao problema. Nele s\u00e3o encontradas explica\u00e7\u00f5es sobre Porosidade e Satura\u00e7\u00e3o; Tomografia Computadorizada; Modelo de Estrutura de Dados para Processamento, An\u00e1lise e Visualiza\u00e7\u00e3o de Dados Multidimensionais e Aquisi\u00e7\u00e3o dos Dados. No terceiro cap\u00edtulo, resolve-se genericamente o problema do c\u00e1lculo da porosidade e da satura\u00e7\u00e3o usando imagens tomogr\u00e1ficas. Para isto, divide-se o problema em cinco grandes etapas: Recupera\u00e7\u00e3o das Imagens, Pr\u00e9-Processamento, Processamento, Visualiza\u00e7\u00e3o e Visualiza\u00e7\u00e3o Anal\u00edtica. No quarto cap\u00edtulo apresenta-se a forma com que cada etapa do cap\u00edtulo anterior foi implementada, usando a plataforma Khoros em conjunto com a biblioteca de fun\u00e7\u00f5es MMachLib. No quinto cap\u00edtulo mostram-se alguns dos resultados obtidos utilizando este conjunto de ferramentas desenvolvidas. No sexto apontam-se as conclus\u00f5es encontradas, bem como algumas sugest\u00f5es de continuidade do trabalho. Finalmente no s\u00e9timo cap\u00edtulo lista-se a bibliografia utilizada no trabalho.\n2.\tConceitos B\u00e1sicos\nEste cap\u00edtulo introduz os principais conceitos necess\u00e1rios ao bom entendimento do problema abordado. Em suas se\u00e7\u00f5es encontram-se os conceitos de Porosidade e Satura\u00e7\u00e3o; Tomografia Computadorizada; Modelo de Estrutura de Dados para Processamento, An\u00e1lise e Visualiza\u00e7\u00e3o de Dados Multidimensionais; Visualiza\u00e7\u00e3o 3D; e Aquisi\u00e7\u00e3o dos Dados.\n2.1\tPorosidade e Satura\u00e7\u00e3o\nGeralmente as rochas s\u00e3o perme\u00e1veis a fluidos como a \u00e1gua, o \u00f3leo, os gases ou uma combina\u00e7\u00e3o destes. A engenharia de reservat\u00f3rios concentra seus objetivos em quantificar o volume de fluidos existente numa rocha [AmBa\u00f3O], como eles fluem, al\u00e9m de outras propriedades.\nComo as ferramentas desenvolvidas nesta disserta\u00e7\u00e3o atuam sobre os voxel de uma imagem, escolheu-se duas das principais propriedades utilizadas pelos ge\u00f3logos para ilustrar os resultados obtidos: a porosidade e a satura\u00e7\u00e3o, cujos c\u00e1lculos podem ser obtidos em decorr\u00eancia da manipula\u00e7\u00e3o alg\u00e9brica de um conjunto espec\u00edfico de imagens. A porosidade \u00e9 uma propriedade est\u00e1tica a qual n\u00e3o varia com o tipo e quantidade de fluido em seu interior; a satura\u00e7\u00e3o, \u00e9 uma propriedade din\u00e2mica, variante no tempo de acordo com a ocupa\u00e7\u00e3o de seus poros por um determinado fluido.\n2.1.1\tPorosidade\nvolume dos poros\n<D = 100 x---------~----\nvolume poroso\n(I)\nA determina\u00e7\u00e3o da porosidade [Holl93][Silv94] atrav\u00e9s de imagens tomogr\u00e1ficas tem como base o fato de que, para uma fonte mo no-energ\u00e9tica de Raios-X, o componente de atenua\u00e7\u00e3o linear devido a matriz da rocha \u00e9 independente dos fluidos que ocupam o espa\u00e7o poroso da amostra. Portanto, para um determinado elemento do volume (voxel) de uma amostra totalmente saturada por um \u00fanico fluido, o coeficiente de atenua\u00e7\u00e3o linear pode ser calculado pela equa\u00e7\u00e3o:\n(a z) = (1 - O(a A z))Tv (a\t(a Az)o(x, y, z)(II)\nOnde, x,y,z s\u00e3o as coordenadas de um dado voxel, TR\u00cd \u00e9 o coeficiente de atenua\u00e7\u00e3o da rocha completamente saturada com o fluido 1, Tm \u00e9 o coeficiente de atenua\u00e7\u00e3o linear da rocha matriz, \u00e9 o coeficiente de atenua\u00e7\u00e3o linear do fluido 1 e \u00e9 a porosidade da rocha matriz.\nEscrevendo a equa\u00e7\u00e3o para um fluido 2, tem-se:\ntS2 =(i-a>)YM +>p2a>\nCombinando as equa\u00e7\u00f5es, tem-se:\nfi, -t2)\n(III)\n(IV)\nEscrevendo a equa\u00e7\u00e3o anterior em unidades Hounsf\u00edeld3, tem-se:\n(V)\n3 Unidade Hounsf\u00edeld: O grau de atenua\u00e7\u00e3o do feixe de Raios-X \u00e9 quantificado e expresso em termos de unidades de Hounsf\u00edeld (Hus), nome dado em homenagem ao inventor da tomografia computadorizada, Godfrey Newbold Hounsf\u00edeld. Este n\u00famero \u00e9 tamb\u00e9m conhecido como n\u00famero CT. Hounsf\u00edeld escolheu arbitrariamente o valor de CT igual a zero para a \u00e1gua, -1000 para o ar e 1000 para o osso.\nConclui-se que para a determina\u00e7\u00e3o da porosidade de uma amostra de rocha s\u00e3o necess\u00e1rios quatro conjuntos de imagens tomogr\u00e1f\u00edcas, obtidas em instantes diferentes: amostra de rocha totalmente saturada com o fluido 1, amostra de rocha totalmente saturada como o fluido 2, amostra do fluido 1 e amostra do fluido 2.\nseguinte\n(VI)\n(VII)\n2.1.2\tSatura\u00e7\u00e3o\nEntende-se como satura\u00e7\u00e3o de um dado fluido, a quantidade deste existente no interior de um meio poroso. O c\u00e1lculo da satura\u00e7\u00e3o em meios porosos contendo dois fluidos em um determinado instante pode ser feito pela equa\u00e7\u00e3o:\nEm unidades Hounsf\u00edeld:\n/ , __ (CT\u00abi \u00e1.y.z)-\t(*.y.z))\n2\tX'y\u2019Z ~&lt;J>(x,y,zXC7](x,y,z)-CT2(x,y,z))\nAssim, para o c\u00e1lculo da satura\u00e7\u00e3o do fluido 2 em um meio poroso, em um determinado instante, s\u00e3o necess\u00e1rios os n\u00fameros Hounsf\u00edeld da rocha com fluidos 1 e 2, os n\u00fameros Hounsf\u00edeld da rocha completamente saturada com o fluido 1 e 2 e a porosidade da amostra do meio poroso.\nFormas alternativas e laboratoriais para o c\u00e1lculo da satura\u00e7\u00e3o podem ser encontradas em [AmBa\u00f3OJ. No entanto, estas t\u00e9cnicas n\u00e3o ser\u00e3o abordadas aqui por fugir ao escopo desta disserta\u00e7\u00e3o.\n2.2\tTomografia Computadorizada\nA tomografia computadorizada de Raios-X \u00e9 uma t\u00e9cnica n\u00e3o destrutiva de avalia\u00e7\u00e3o da estrutura interna de objetos. Uma imagem tomogr\u00e1fica \u00e9 formada devido a atenua\u00e7\u00e3o dos Raios-X que atravessam um determinado volume de interesse. As diferen\u00e7as de densidades, inerentes a um corpo heterog\u00eaneo, provoca diferentes graus de atenua\u00e7\u00e3o que s\u00e3o traduzidos em diferentes n\u00edveis de cinza na imagem final.\nAs imagens, formadas devido a passagem dos Raios-X, s\u00e3o coletadas em detetores, reconstitu\u00eddas por um computador e exibidas na forma de uma se\u00e7\u00e3o transversal. Cada uma delas \u00e9 representada por uma matriz quadrada cujo tamanho escolhe-se de acordo com o equipamento dispon\u00edvel, objeto a ser analisado e demais par\u00e2metro do exame. Nessa matriz cada elemento quadrado \u00e9 chamado de pixeL Uma se\u00e7\u00e3o transversal representa as m\u00e9dias das medidas em uma fatia cuja espessura \u00e9 tamb\u00e9m definida pelo usu\u00e1rio. Cada unidade de volume de uma fatia recebe o nome de voxel (Figura 2-1).\nFigura 2-1 - Representa\u00e7\u00e3o dos Pixels e Voxels\nA principal diferencia\u00e7\u00e3o entre um radiografia convencional e uma tomografia esta na forma com que as imagens s\u00e3o formadas. Para uma radiografia convencional (Figura 2-2), a imagem resultante \u00e9 a proje\u00e7\u00e3o do volume radiografado em uma placa de chumbo que \u00e9 bombardeada por diferentes intensidades de Raios-X. As regi\u00f5es do corpo radiografado absorvem mais ou menos radia\u00e7\u00e3o de acordo com suas caracter\u00edsticas f\u00edsicas, ou seja, a composi\u00e7\u00e3o f\u00edsica do objeto determina o coeficiente de atenua\u00e7\u00e3o do feixe emitido.\nFigura 2-2 - Princ\u00edpio da Radiografia Convencional\nEm uma tomografia, cada feixe de Raio-X, /0, \u00e9 emitido (Figura 2-3) segundo um \u00e2ngulo G que atravessa o corpo em estudo que o atenua e este \u00e9 coletado pelo receptor posicionado do lado oposto, resultando numa intensidade I. Esta medi\u00e7\u00e3o \u00e9 feita em diferentes dire\u00e7\u00f5es at\u00e9 completar uma rota\u00e7\u00e3o completa de 360\u00b0 na amostra. A intensidade dos feixes de Raios-X atenuados pode ser relacionada aos coeficientes de atenua\u00e7\u00e3o // do objeto ao longo do percurso do feixe pela seguinte equa\u00e7\u00e3o:\nDevido ao grande problema em se inverter esta equa\u00e7\u00e3o de modo a recuperar /z\u00c7r, v), a grande maioria dos tom\u00f3grafos utilizam de m\u00e9todos num\u00e9ricos para a obten\u00e7\u00e3o destes valores. Maiores detalhes podem ser obtidos em [Silv94].\nEmissor de Raios-X\t\t\t-\u25ba\tTom\u00f3grafo C\u00e2mara Tomogr\u00e1fica Regi\u00e3o \u00datil de Varredura\n\t\t1\t->\tDetetores\nRa\u00edo-X\t\u2014 \u2014\t\u00e7...\t\t\tAmostra\n\t\t\t\t\n\t\t\t\t\nFigura 2-3 - Princ\u00edpio da Tomografia Computadorizada\nA quantidade de feixes de Ra\u00edos-X que passa atrav\u00e9s do corpo determina os n\u00edveis de cinza nas imagens. Por conven\u00e7\u00e3o, feixes de Raios-X que atravessam livremente o corpo s\u00e3o representados como uma \u00e1rea negra na imagem final. Ao contr\u00e1rio, quando um feixe de Raios-X \u00e9 totalmente impedido de atravessar o corpo, ou seja, \u00e9 completamente atenuado, ser\u00e1 representado por uma \u00e1rea branca na imagem final. As atenua\u00e7\u00f5es intermedi\u00e1rias s\u00e3o representadas por v\u00e1rios graus de cinza.\nA quantidade de Raios-X que atravessa um material \u00e9 determinada pela densidade da \u00e1rea exposta. A densidade de um material \u00e9 determinada por sua estrutura molecular. Elementos com maiores n\u00fameros at\u00f4micos, possuem mais el\u00e9trons circulando e o n\u00facleo mais pesado. Quanto maior o n\u00famero de part\u00edculas at\u00f4micas de um elemento, mais compacta ser\u00e1 sua estrutura molecular implicando em uma maior densidade.\nAtualmente podemos identificar quatro gera\u00e7\u00f5es distintas de tom\u00f3grafos, sendo que os de terceira gera\u00e7\u00e3o s\u00e3o os mais utilizados na atualidade. A transi\u00e7\u00e3o de uma gera\u00e7\u00e3o para outra pode ser determinada pela cria\u00e7\u00e3o de t\u00e9cnicas que aumentaram pouco a pouco a velocidade de varredura de uma amostra. Na Tabela 1 s\u00e3o apresentados os principais fatores a serem considerados na evolu\u00e7\u00e3o dos tom\u00f3grafos:\n1a. Gera\u00e7\u00e3o (Figura2-4)\t\u00e2*. Ger^\u00e7\u00e3\u00e3 (Figura 2-5) : \u25a0 \\\t3a. Gera\u00e7\u00e3o j \u00f3 f (Figura 2-6)\tA 4a. Gera\u00e7\u00e3o &lt;\u2019\u2019(Figurai-^ -A\n\u2022 Um feixe linear de Raios-X e um detetor.\t\u2022 Um feixe linear de Raios-X em \u201cforma de leque\u201d e um conjunto de\tv\u00e1rios detetores\t\u2022 Um feixe linear de Raios-X em \u201cforma de leque\u201d que cobre toda se\u00e7\u00e3o\tda amostra e uma bateria maior de detetores\t\u2022 Um feixe linear de Raios-X em \u201cforma de leque\u201d e uma bateria de detetores distribu\u00eddos de forma\ta circundar toda a amostra\n\u2022 Rota\u00e7\u00e3o de 180\u00b0 com passos de fO\t\u2022 Rota\u00e7\u00e3o de 180\u00b0 com passos de 10\u00b0\t\u2022 O feixe gira juntamente com os detetores\t\u2022 Somente o feixe gira\nTabela 1 - Caracter\u00edsticas Determinantes de cada uma das Gera\u00e7\u00f5es de Tom\u00f3grafos\nTubo de\nRaios-X\nVetor de\nDetetores\nFigura 2-5 - Tom\u00f3grafo de 2a. Gera\u00e7\u00e3o\nFigura 2-4 - Tom\u00f3grafo de la. Gera\u00e7\u00e3o\nFigura 2-6 - Tom\u00f3grafo de 3a. Gera\u00e7\u00e3o\nFigura 2-7 - Tom\u00f3grafo de 4a. Gera\u00e7\u00e3o\nDentro dos tom\u00f3grafos de terceira gera\u00e7\u00e3o, utilizados nas aquisi\u00e7\u00f5es das imagens apresentadas nesta disserta\u00e7\u00e3o, podemos diferenciar a forma de aquisi\u00e7\u00e3o segundo duas metodologias distintas: a varredura axial e a helicoidal.\nA t\u00e9cnica mais antiga e mais utilizada atualmente \u00e9 a aquisi\u00e7\u00e3o axial, onde o objeto \u00e9 \u201ccortado\u201d axialmente, gerando uma imagem que representa uma fatia. Cada imagem \u00e9 obtida com um giro de 360\u00b0 do tubo e dos detetores, em seguida, a mesa \u00e9 deslocada por uma dist\u00e2ncia escolhida a priori para que seja iniciado o pr\u00f3ximo corte.\nA t\u00e9cnica mais recente, dispon\u00edvel somente em alguns tom\u00f3grafos \u00e9 conhecida tamb\u00e9m como tomograf\u00eda helicoidal, que envolve a aquisi\u00e7\u00e3o cont\u00ednua de dados atrav\u00e9s do deslocamento ininterrupto da mesa do tom\u00f3grafo, enquanto a fonte de Raios-X \u00e9 rotado nada. Intuitivamente, nota-se que este m\u00e9todo de obten\u00e7\u00e3o de imagens \u00e9 muito mais r\u00e1pido que o axial, pois com alguns poucos giros helicoidais, toda amostra \u00e9 varrida.\nNo estudo de an\u00e1lise din\u00e2mica dos deslocamentos de fluidos em amostra porosas \u00e9 essencial que o tempo de aquisi\u00e7\u00e3o seja baixo, pois em poucos segundos, o l\u00edquido injetado em uma das extremidade da amostra, come\u00e7a a ser coletado na outra. Para que fosse poss\u00edvel acompanhar o deslocamento do l\u00edquido injetado ao longo da amostra foi necess\u00e1rio escolher um tom\u00f3grafo helicoidal. Sendo assim, foi utilizado o to m\u00f3 grafo Helicoidal Hi Speed GE do hospital Benefic\u00eancia Portuguesa da cidade de S\u00e3o Paulo, para a aquisi\u00e7\u00e3o dos dados.\n2.3\tModelo de Estrutura de Dados para Processamento,\nAn\u00e1lise e Visualiza\u00e7\u00e3o de Dados Multidimensionais\nA escolha adequada do modelo de representa\u00e7\u00e3o dos dados \u00e9 de vital import\u00e2ncia para o bom andamento do projeto [DoLe91] [Shap79]. A procura de uma estrutura completa e de eficiente manipula\u00e7\u00e3o mostra-se necess\u00e1ria para que as opera\u00e7\u00f5es com dados 3D sejam \u00e1geis e transparentes ao usu\u00e1rio.\nOs modelos de representa\u00e7\u00e3o de imagens podem ser classificados em duas categorias distintas: modelos geom\u00e9tricos e modelos voxels. Nos modelos geom\u00e9tricos existe a preocupa\u00e7\u00e3o de armazenar os dados levando-se em conta suas propriedades geom\u00e9tricas, enquanto no modelo voxel a representa\u00e7\u00e3o dos dados \u00e9 feita atrav\u00e9s de um conjunto de pontos que formam a imagem. Como exemplo ilustrativo, no modelo geom\u00e9trico um c\u00edrculo pode ser representado por um ponto que define seu centro e por seu raio. No modelo voxel, um c\u00edrculo \u00e9 representado por uma imagem discreta de pontos.\nDe forma simplificada, a \u00e1rea de computa\u00e7\u00e3o gr\u00e1fica utiliza mais a representa\u00e7\u00e3o geom\u00e9trica enquanto a \u00e1rea de processamento de imagens est\u00e1 baseada em sua maioria em modelos voxels. A tend\u00eancia atual \u00e9 procurar tratar indistintamente estes dois modelos em ambas as \u00e1reas.\nA abordagem adotada neste trabalho esta fundamentada no modelo voxel que mostrou-se o mais apropriado para o processamento e an\u00e1lise dos dados, pois os dados tomogr\u00e1ficos tratados no problema s\u00e3o originalmente voxel e as propriedades a serem analisadas est\u00e3o fundamentadas em manipula\u00e7\u00f5es pontuais ou regionais das imagens.\nQuanto a visualiza\u00e7\u00e3o volum\u00e9trica dos dados, tanto o modelo geom\u00e9trico como o modelo voxel s\u00e3o comumente utilizados. Por conveni\u00eancia e simplicidade foi adotado o modelo voxel de modo a aproveitar o mesmo modelo de estrutura de dados e a experi\u00eancia dos trabalhos de Falc\u00e3o [Falc93] e de Luppi [Lupp94].\nAlgumas formas de representa\u00e7\u00e3o, voltadas ao processamento de imagens, foram analisadas: o Image Understanding Environment (IUE) [KLHL95], o Modelo Polim\u00f3rfico Khoros [Khor91] e a biblioteca de fim\u00e7\u00f5es MMachLib [BBLH97], de forma a escolher uma que se adequasse \u00e0s necessidades deste problema.\nPor ser um modelo bastante completo, a utiliza\u00e7\u00e3o do software freeware Image Understanding Environment (IUE) desenvolvido pelo grupo Amerinex Artificial Intelligence, INC.. supera as necessidades exigidas neste projeto. O conjunto de facilidades disponibilizadas pelo IUE prev\u00ea situa\u00e7\u00f5es que n\u00e3o fazem parte do dom\u00ednio do problema. Sua utiliza\u00e7\u00e3o acarretaria em um overhead desnecess\u00e1rio que prejudicaria o desempenho na obten\u00e7\u00e3o das solu\u00e7\u00f5es, seu c\u00f3digo fonte n\u00e3o se encontra dispon\u00edvel para estudos, al\u00e9m da falta de experi\u00eancia anterior.\nUm dos modelos de representa\u00e7\u00e3o adotados neste projeto, trata-se do Modelo Polim\u00f3rfico Khoros (se\u00e7\u00e3o 2.3.2), software, desenvolvido pela Khoral Research Inc. e University New M\u00e9xico, conhecido internacionalmente e utilizado no DCA-FEEC-Unicamp desde 1992.\nMesmo sendo um modelo menos abrangente que o IUE, o Modelo Polim\u00f3rfico do Khoros \u00e9 bastante completo e sua estrutura de dados volta-se a problemas de processamento de imagens. Embora mais simples, ainda existe o problema de aumento desnecess\u00e1rio da complexidade, pois os recursos oferecidos normalmente extrapolam a necessidade. No entanto, diferentemente do modelo IUE, este overhead \u00e9 admiss\u00edvel quando considerado a facilidade oferecida na prototipa\u00e7\u00e3o de novas solu\u00e7\u00f5es e dos operadores e toolboxes que permitem a utiliza\u00e7\u00e3o de fun\u00e7\u00f5es pr\u00e9-definidas.\nDevido \u00e0s instabilidades e \u00e0s mudan\u00e7as de vers\u00f5es do Khoros, usamos tamb\u00e9m neste trabalho a estrutura de dados da MMachLib (se\u00e7\u00e3o 2.3.3) que tem como principais caracter\u00edsticas a simplicidade e a portabilidade. Com uma estrutura de dados compacta, o manuseio dos recursos por seus usu\u00e1rios passa a ser uma tarefa mais f\u00e1cil e agrad\u00e1vel. Os campos de sua estrutura s\u00e3o diretamente indexados pelo programador, proporcionando o aumento de desempenho de suas fun\u00e7\u00f5es. Em contrapartida, algumas situa\u00e7\u00f5es espec\u00edficas, como o manipula\u00e7\u00e3o de imagens mascaradas, ainda n\u00e3o implementada, ficam prejudicadas.\nA biblioteca de fun\u00e7\u00f5es MMachLib mostra-se bastante port\u00e1vel por ser feita exclusivamente com c\u00f3digo ANSI C e n\u00e3o possuir c\u00f3digo de entrada e de visualiza\u00e7\u00e3o de dados pr\u00f3prios, tornando-se independente do sistema de janela usado. A MMachLib funciona em qualquer sistema que possua um compilador ANSI C de 32 bits.\nA seguir, \u00e9 feito uma descri\u00e7\u00e3o sucinta de cada modelo de dados analisados, apontando suas principais virtudes e limita\u00e7\u00f5es.\n2.3.1\tImage Understanding Environment\nO Image Understanding Environment (IUE) [KLHL95] \u00e9 um projeto concebido para desenvolver um ambiente orientado a objeto capaz de representar qualquer tipo de imagem, provendo uma estrutura de software contendo uma hierarquia de classes, ferramentas para cria\u00e7\u00e3o de interfaces para usu\u00e1rios e algoritmos de Image Understanding (IU).\nA portabilidade oferecida por seu ambiente, prop\u00f5e facilitar o interc\u00e2mbio de resultados entre os pesquisadores. Nesta representa\u00e7\u00e3o de dados (Figura 2-8), n\u00e3o se espera prover antecipadamente todos os recursos que algu\u00e9m necessitaria, mas prover implementa\u00e7\u00f5es de classes com as quais os usu\u00e1rios possa se especializar para produzir novas representa\u00e7\u00f5es e procedimentos enquanto mant\u00e9m-se a total compatibilidade e interoperabilidade com o restante da estrutura hier\u00e1rquica.\nSet\nRelation\nOrdered-Relat\u00edon\nFunction\tBinary-Relation\nTuple\tArray\tMatrix\tGraph\nSequences\tTree List\nFigura 2-8 ~ Por\u00e7\u00e3o da Hierarquia da Classe Base do Modelo IUE\nO grande m\u00e9rito deste tipo de abordagem estrutural \u00e9 procurar fornecer uma estrutura universal capaz de representar qualquer problema envolvendo imagens, garantindo a sua portabilidade para outros sistemas. No entanto, seu grande dem\u00e9rito\n2.3.2\tModelo Polim\u00f3rfico de Dados do Khoros\nO modelo polim\u00f3rfico de dados [Khor91 ] est\u00e1 baseado no fato de que os conjuntos de dados s\u00e3o usualmente adquiridos ou gerados para modelar fen\u00f4menos do mundo real. O modelo polim\u00f3rfico possui uma base de dados capaz de representar imagens do espa\u00e7o tridimensional e tempo unidimensional , isto \u00e9, uma seq\u00fc\u00eancia de volumes variando no tempo.\nBaseado no conceito de programa\u00e7\u00e3o orientada a objeto, ele n\u00e3o permite que nenhuma fun\u00e7\u00e3o criada pelo usu\u00e1rio tenha acesso direto a sua estrutura de dados. Toda manipula\u00e7\u00e3o deve ser feita atrav\u00e9s de fun\u00e7\u00f5es que proporcionam o manuseio dos itens desejados, garantindo uma maior integridade de seus dados.\nO modelo de representa\u00e7\u00e3o do Khoros pode ser identificado como o ramo composto pelos n\u00f3s array e sequences da hierarquia da classe base do modelo IUE (Figura 2-8). Intuitivamente, conclui-se que o modelo polim\u00f3rfico do Khoros trata-se de urna forma de representa\u00e7\u00e3o bastante simples, quando comparada com o modelo IUE. Entretanto, o problema proposto neste trabalho pode ser modelado totalmente por sua estrutura de dados.\n2.3.2.1 Segmentos\nDentro da estrutura de dados do Khoros, uma seq\u00fc\u00eancia de volumes variando no tempo \u00e9 representada por cinco diferentes segmentos de dados (Figura 2-9): valu\u00e9, location, time, mask e map, onde cada um tem um significado espec\u00edfico de acordo com sua interpreta\u00e7\u00e3o. Os segmentos do modelo polim\u00f3rfico s\u00e3o opcionais; um objeto de dados pode conter qualquer combina\u00e7\u00e3o destes, os quais s\u00e3o usados no desenvolvimento do conjunto de operadores padr\u00f5es fornecidos com o software.\nA id\u00e9ia de dividir a base de dados em segmentos independentes permite ao programador a utiliza\u00e7\u00e3o somente dos recursos desejados. Por exemplo, se n\u00e3o for conveniente mascarar uma imagem, nenhuma informa\u00e7\u00e3o referente a m\u00e1scara ser\u00e1 armazenada, permitindo que a imagem fique mais simples e compacta. Por outro lado, qualquer operador criado deve verificar a exist\u00eancia dos segmentos conhecidos, mesmo que estes n\u00e3o sejam necess\u00e1rios ao processamento. Esta verifica\u00e7\u00e3o deve ser feita para que se possa garantir a consist\u00eancia dos resultados gerados, acarretando um\nesfor\u00e7o computacional adicional, muitas vezes sem trazer benef\u00edcios adicionais \u00e0 aplica\u00e7\u00e3o desenvolvida.\nO segmento valu\u00e9 e o segmento de dados prim\u00e1rio, consiste de vetores de elementos de dados organizado implicitamente dentro de uma s\u00e9rie de volumes no tempo. O segmento valu\u00e9 pode ser expl\u00edcitamente posicionado no espa\u00e7o e tempo com os segmentos de location e time, respectivamente. Os dois segmentos restantes s\u00e3o oferecidos por conveni\u00eancia. O segmento de mask \u00e9 usado para marcar os pontos v\u00e1lidos do segmento de valu\u00e9. O segmento de map \u00e9 oferecido uma extens\u00e3o do segmento value\\ o segmento valu\u00e9 pode ser usado para indexar os dados de um mapa.\nyvJumas ihryuyh ilins\nFigura 2-9 - Modelo Polim\u00f3rfico (Figura extra\u00edda de Khor91)\n2.3.2.1.1 Segmento Value\nO segmento value \u00e9 o segmento prim\u00e1rio de armazenamento dos pixels no modelo de dados polim\u00f3rfico (Figura 2-10). Trata-se do segmento mais importante\n\n\notenf\u00e9rt hss grt tmpkc# -pas\u00fcbn ft-t\u00e2e-uttb\u00e2 data : (w,h,0,t.r . Q\nt/um \u25a0\nFigura 2-10 - Segmento de Valor (Figura extra\u00edda de KhorOl)\n2.3,2.1.2 Segmento Map\nEm casos onde s\u00e3o encontrados vetores redundantes contendo dados que est\u00e3o duplicados em diferentes posi\u00e7\u00f5es do segmento value, o segmento map (Figura\n2-11) pode ser usado. Este recurso \u00e9 explorado de modo a implementar uma pseudo tabela de cores que auxilia na visualiza\u00e7\u00e3o e na identifica\u00e7\u00e3o das regi\u00f5es de interesse dentro da imagem originalmente em n\u00edveis de cinza.\nrafee ckra\nva/ue pofr\u00e0s \u00cdndex m\u00edo th\u00e9\n\u00a1nep height\n\u25a0 Z .\n\u2022 \u2666 \u00ab\nFigura 2-11 - Segmento de Mapa (Figura extra\u00edda de Khor?l)\n2.3.2.1.3 Segmento Mask\nDevido a facilidade de manipula\u00e7\u00e3o de matrizes, a maioria dos sistemas visuais trabalham com imagens retangulares (2D) paralelep\u00edpedos (3D), etc. No entanto, nem toda regi\u00e3o de interesse obedece esta conven\u00e7\u00e3o. Em c\u00e1lculos estat\u00edsticos, englobar a imagem por um hipercubo e ent\u00e3o fazer os c\u00e1lculos n\u00e3o seria uma sa\u00edda apropriada. Pontos que n\u00e3o pertencem efetivamente a imagem e que foram inseridos com a convers\u00e3o para o sistema hiperc\u00fabico de representa\u00e7\u00e3o, passam a contribuir para o resultado, alterando deste modo os valores obtidos.\nO segmento de mask (Figura 2-12) tem a tarefa de resolver este problema. Uma outra matriz bin\u00e1ria com a mesma dimens\u00e3o da imagem contendo zeros e uns indica os pixels v\u00e1lidos e os n\u00e3o v\u00e1lidos. Assim, pontos rotulados com o valor zero deixam de participar da opera\u00e7\u00e3o e somente s\u00e3o considerados os rotulados com o valor um.\nFigura 2-12 - Segmento Mask (Figura extra\u00edda de Khor91)\n2.3.2.1.4 Segmento Location\nA maioria das imagens utilizadas em processamento de imagens fazem parte do mundo real, as quais possuem dimens\u00f5es f\u00edsicas definidas que acabam sendo perdidas ao serem digitalizadas. Desta forma deixa de existir uma correspond\u00eancia das dimens\u00f5es do objeto real com sua imagem digitalizada.\nA maneira com que o Khoros preserva a rela\u00e7\u00e3o ese alar-espacial entre a imagem digital e a real \u00e9 feita atrav\u00e9s do segmento de location (Figura 2-13) que relaciona cada pixel com sua correspondente coordenada do mundo real. Um sistema de coordenadas \u00e9 associado a imagem, permitindo a utiliza\u00e7\u00e3o de coordenadas negativas e reais.\nFnfZre Va/tce-Vector fcpositioned VkLUrrDs\u00f1d by a Location Vector (X,Y^)\nThis position holds for, the vector over sittime\nFigura 2-13 - Segmento Location (Figura extra\u00edda de Khor91)\n2,3.2.1.5 Segmento Time\nComo o pr\u00f3prio nome sugere, o segmento de time (Figura 2-14) \u00e9 o respons\u00e1vel por representar uma sequ\u00eancia de imagens tomadas em v\u00e1rios instantes de tempo. A cada elemento deste segmento, encontramos uma imagem associada a um instante de tempo \u00ed(. Desta forma, torna-se poss\u00edvel um acompanhamento din\u00e2mico da evolu\u00e7\u00e3o da sequ\u00eancia de imagens por um dado intervalo de tempo, fazendo com que caracter\u00edsticas din\u00e2micas possam ser representadas por uma sequ\u00eancia de imagens est\u00e1ticas.\nMesmo com a exist\u00eancia do segmento time, um recurso bastante aplicado \u00e9 a utiliza\u00e7\u00e3o de uma das dimens\u00f5es do segmento valu\u00e9 como coordenada representativa da evolu\u00e7\u00e3o temporal da imagem. Isto \u00e9 poss\u00edvel devido as imagens normalmente processadas n\u00e3o superarem a terceira dimens\u00e3o. Para evitar o aumento da complexidade ao gerenciar um novo segmento, estas coordenadas s\u00e3o usadas como \u00edndice associado ao tempo de cada imagem.\n\u25a0VALU\u00c9 Wh\nFigura 2-14 - Segmento de Tempo (Figura extra\u00edda de Khor91)\n2.3.2.2\tNovos Segmentos\nAdicionalmente aos segmentos padr\u00f5es, existe a possibilidade do programador definir seu pr\u00f3prio segmento e suas caracter\u00edsticas, personalizando a base de dados. A personaliza\u00e7\u00e3o de um novo segmento n\u00e3o \u00e9 uma op\u00e7\u00e3o muito praticada devido a problem\u00e1tica gerada ao se criar um operador dependente de um item n\u00e3o padr\u00e3o. Todo conjunto de fun\u00e7\u00f5es de manipula\u00e7\u00e3o do novo segmento deve ser criado e anexado a base padr\u00e3o, al\u00e9m disso, as fun\u00e7\u00f5es padr\u00f5es n\u00e3o suportam o novo segmento, o que n\u00e3o garante a integridade do mesmo ap\u00f3s a execu\u00e7\u00e3o de um operador padr\u00e3o em uma imagem com o novo segmento.\n2.3.2.3\tAmbiente de Desenvolvimento\nUma das grandes qualidades encontradas no software Khoros \u00e9 possuir uma ambiente gr\u00e1fico para a prototipa\u00e7\u00e3o de solu\u00e7\u00f5es denominado cantata e uma ambiente de desenvolvimento de novos operadores denominado craftsman.\n2.3.2.3.1 Cantata\nCom sua interface gr\u00e1fica que proporciona um alto n\u00edvel de abstra\u00e7\u00e3o, o cantata proporciona um ambiente de programa\u00e7\u00e3o visual simples e eficiente gra\u00e7as a sua linguagem orientada a fluxo de dados. Fluxo de dados \u00e9 uma abordagem a qual o programa \u00e9 descrito como um grafo, onde cada n\u00f3 representa uma opera\u00e7\u00e3o e cada arco representa o caminho a ser percorrido pelo fluxo de dados de uma opera\u00e7\u00e3o para\na outra (Figura 2-15). Os programas desenvolvidos no cantata, atrav\u00e9s do encadeamento de operadores (glyphs), s\u00e3o denominados workspaces.\nUma das vantagens apresentadas pela abordagem de fluxo de dados representados por grafos, \u00e9 a grande potencialidade deste tipo de ambiente para a r\u00e1pida prototipa\u00e7\u00e3o de solu\u00e7\u00f5es. Pequenas altera\u00e7\u00f5es no grafo, sejam nos n\u00f3s, nos arcos ou nas op\u00e7\u00f5es de cada operador geram resultados diferentes.\nfile Edit Workspace Options Control Glyphs\nHelp\n\nFigura 2-15 - Workspace Desenvolvido no Ambiente Gr\u00e1fico de Programa\u00e7\u00e3o do Cantata\n2.3.2.3.2 Craftsman\nO pacote Khoros \u00e9 organizado como um conjunto de subsistemas independentes chamados toolboxes. Cada toolbox armazena um conjunto de operadores que normalmente est\u00e3o associados a uma classe de opera\u00e7\u00e3o comum. A aritm\u00e9tica, por exemplo.\nO ambiente de desenvolvimento oferecido pelo craftsman possibilita a cria\u00e7\u00e3o e a manipula\u00e7\u00e3o destas toolboxes, atuando como um gerente organizacional. Recursos como a gera\u00e7\u00e3o autom\u00e1tica da \u00e1rvore de diret\u00f3rios de uma nova toolbox,\ni\ni\n[\u00f5pticns v|\n\u25a0 :'V\nI bootstrap\ndatasanip dataserv design dip envision geometry i mage kr.i\u00bb_KC-rk kmnach\nToolboxes (21)\n1\nCB\u00edPES&lt;all: 11)\t?\nkcatpix\u00edviff kcrcp\nkF<m_ interpolate\nkn;in_cr thoprcject ion kmn^rctate knorwcrop ktapein\nKviFfSeatpix\nIcenpes ldepfinachlib\nToolbox Operations\nzl\nObject Operations\na\nFigura 2-16 - Painel de Controle Principal do Craftsman\n2.3.2.3.3\tCompose\nO programa compose, (Figura 2-17) tem uma fun\u00e7\u00e3o an\u00e1loga a efetuada pelo craftsman. Enquanto o craftsman controla as atividades de cria\u00e7\u00e3o e edi\u00e7\u00e3o relacionados as toolboxes, o programa compose \u00e9 o respons\u00e1vel pela cria\u00e7\u00e3o e edi\u00e7\u00e3o dos objetos dentro de uma toolbox: operadores, bibliotecas, panes, etc* \u00c9 ele o respons\u00e1vel pelo cadastro dos arquivos de c\u00f3digo fonte e das especifica\u00e7\u00f5es que caracterizam o operador, al\u00e9m da gera\u00e7\u00e3o de c\u00f3digo fonte quando um novo objeto da toolbox \u00e9 criado.\n|.^\u2019Ccmp0$er:;ed\u00cdtlng kmm montage In toolbox ceM\nI\t.\t..........-..-\t\u25a0 \u25a0 ...........-\t- \u25a0\n\n\u2022l\u00ed\u00e9t-.F\u00edls\u00e3\n\t\tU1S \u25a0\t\n\t\t-Stt\u00f3-\t\n\t\t\tkw-UFGitf.agc.h\t|\n\t\til\u00fci.\tr'.PIft_rr.ont\u00e3ge,hlp\ti\n88#\t\tCONFIG\tk\u2122...nontjS5.i\tj\n\t\u25a0Mti\tINFO\t\ni.T\u201e\t\t\tkrasjoitdgs.tad\u00fa\tj\n\t\thlK\tage.change loo\tj\nI\t\tnu\tC?iS\t\u25a0\n\t\t\tTrr.\u00e0kefile\t\u00a1\n\t\t\tIh\t:\n\t\t\tFils Operation?\t\u2019\u00c7\nCENDES; i \u00a1y ws .tncntage 4krout i re}\n\u25a0\t\":'f\nI swT~ 1\nFigura 2-17 - Painel de Controle Principal do Compose\nO programa guise \u00e9 outra ferramenta de aux\u00edlio do pacote Khoros. Com ele pode-se desenvolver ou modificar a interface do painel de configura\u00e7\u00e3o, entrada e sa\u00edda de dados de um operador. Assim, o usu\u00e1rio deixa de ter sua preocupa\u00e7\u00e3o a interface, podendo se concentrar no objetivo real de sua programa\u00e7\u00e3o.\nEntre os recursos oferecidos pelo guise destacam-se as entradas e sa\u00eddas de dados feitas por arquivos, a entrada num\u00e9rica de dados, a sele\u00e7\u00e3o de op\u00e7\u00f5es atrav\u00e9s de uma lista, etc.; recursos previamente implementados e disponibilizados automaticamente ao programador quando feita a gera\u00e7\u00e3o de c\u00f3digo b\u00e1sico de um operador. Desta forma, conhecendo a estrutura de dados usada pela interface gr\u00e1fica dos pain\u00e9is, o programador tem total acesso aos dados de entrada fornecidos pelo usu\u00e1rio, sem ter a preocupa\u00e7\u00e3o da cria\u00e7\u00e3o ou gerenciamento desta interface gr\u00e1fica. A seguir, na Figura 2-18 \u00e9 apresentado o painel de controle principal do programa guise:\nFigura 2-18 - Painel de Controle Principal do Guise\n2.3.3\tModelo MMachLib\nDe 1990 a 1992, a Khoral ofereceu a toda comunidade o software Khoros 1.0 e para o ano de 1992 foi prometida a vers\u00e3o 2.0 que traria v\u00e1rias inova\u00e7\u00f5es, fazendo com que a vers\u00e3o 1.0 fosse abandonada para o desenvolvimento da nova vers\u00e3o. No entanto, a vers\u00e3o 2.0 n\u00e3o ficou pronta na data esperada, deixando usu\u00e1rios da plataforma Khoros desamparados de atualiza\u00e7\u00f5es. A vers\u00e3o 2.0 s\u00f3 foi conclu\u00edda em 1994 e em sua vers\u00e3o inicia], o conjunto de programas mostrou-se muito inst\u00e1vel. Al\u00e9m disso, o c\u00f3digo produzido para a vers\u00e3o 1.0 tornou-se obsoleto devido a mudan\u00e7as no modelo de representa\u00e7\u00e3o dos dados.\nA demora na estabiliza\u00e7\u00e3o dos in\u00fameros problemas gerados pela introdu\u00e7\u00e3o de um produto totalmente novo, incentivou a uni\u00e3o de pesquisadores da USP e Unicamp, que utilizam o Khoros como ferramenta b\u00e1sica para suas pesquisas em processamento de imagens, a criarem uma ferramenta mais simples, que permitisse o desenvolvimento de novos operadores port\u00e1veis, sem toda a complexidade inerente aos segmentos do modelo polim\u00f3rf\u00edco.\nDesta forma, foi criado um grupo de desenvolvimento de uma ferramenta que deveria ser simples, r\u00e1pida, port\u00e1vel e que oferecesse os recursos mais usados do software Khoros. Nasceu ent\u00e3o a MMachLib, uma biblioteca de operadores feita em\nC que permite a manipula\u00e7\u00e3o, processamento e an\u00e1lise de imagens, primordialmente na \u00e1rea de morfologia matem\u00e1tica.\nPara a utiliza\u00e7\u00e3o da MMachLib existe a necessidade de uma interface apropriada (Figura 2-19) para a convers\u00e3o de uma imagem gen\u00e9rica para a estrutura MMachLib e vice-versa, al\u00e9m de um dispositivo para a visualiza\u00e7\u00e3o das imagens resultado. Nesta disserta\u00e7\u00e3o utiliza-se a interface Khoros com fun\u00e7\u00f5es especialmente desenvolvidas que permitem a convers\u00e3o e a visualiza\u00e7\u00e3o dos dados.\nFigura 2-19 - Modelo de Interface MMachLib\nCom a ado\u00e7\u00e3o de uma representa\u00e7\u00e3o dos pixels atrav\u00e9s de um arranjo, al\u00e9m da permiss\u00e3o controlada da manipula\u00e7\u00e3o direta da base de dados, o modelo MMachLib mostra-se bastante simples, deixado a cargo do programador a responsabilidade pela integridade dos dados. Toda a manipula\u00e7\u00e3o \u00e9 feita atrav\u00e9s de ponteiros que endere\u00e7am diretamente a estrutura de dados.\nTendo a liberdade de manipula\u00e7\u00e3o direta dos dados atrav\u00e9s de ponteiros, conseguiu-se uma forma interessante de agiliza\u00e7\u00e3o das opera\u00e7\u00e3o sobre a base de dados. No entanto, a responsabilidade pela integridade resultados \u00e9 deixada a cargo do programador dos novos operadores. Desta forma, \u00e9 assumido o risco de ter um resultado eventualmente corrompido por um operador mal projetado, em virtude da agiliza\u00e7\u00e3o do processamento.\nDeve-se observar que para os usu\u00e1rios dos operadores, n\u00e3o existe a possibilidade de corromper as imagens, a menos da execu\u00e7\u00e3o de opera\u00e7\u00f5es inv\u00e1lidas n\u00e3o previstas pelo operador utilizado.\nToda portabilidade da MMachLib fica garantida pelo fato dela ser uma biblioteca que n\u00e3o possui um dispositivo de display, tornando-se independente do tipo de interface gr\u00e1fica adotada. Cada operador assume que todo os atributos necess\u00e1rios ao processamento s\u00e3o passados como par\u00e2metro e que as imagens que ser\u00e3o processadas encontram-se em mem\u00f3ria no formato da estrutura de dados da biblioteca. De modo an\u00e1logo, o resultado obtido pelo processamento do operador retorna no formato da estrutura MMachLib.\nAtualmente, al\u00e9m da plataforma Khoros\u2122, est\u00e3o sendo desenvolvidas as interfaces necess\u00e1rias para a manipula\u00e7\u00e3o da base de dados MMachLib na plataforma Windows\u00ae.\n2.3.3.1 Estrutura MMachLib\nA estrutura de dados usada no armazenamento dos pixels da imagem (Figura 2-20) \u00e9 um arranjo unidimensional o qual \u00e9 acessado atrav\u00e9s de tr\u00eas coordenadas width (largura), height (altura) e depth (comprimento), respectivamente. Desta forma, atrav\u00e9s de uma fun\u00e7\u00e3o bijetora pode-se acessar os dados vetoriais como uma matriz tridimensional, atrav\u00e9s da seguinte rela\u00e7\u00e3o:\nf(x, y, z) = x 4- y X width + z x width x height\nOnde x, y e z s\u00e3o as coordenadas do ponto procurado e f \u00e9 a fun\u00e7\u00e3o transforma\u00e7\u00e3o do espa\u00e7o tridimensional para o unidimensional.\nWidth\nFigura 2-20 - Modelo Esquem\u00e1tico da Estrutura de Dados MMachLib\n2.4\tVisualiza\u00e7\u00e3o 3D\nAs estruturas de dados citadas anteriormente, apresentam como modelo de representa\u00e7\u00e3o de um objeto tridimensional, a aproxima\u00e7\u00e3o feita atrav\u00e9s de planos de cortes paralelos obedecendo um certo espa\u00e7amento fixo entre as fatias. O objetivo da visualiza\u00e7\u00e3o 3D \u00e9 fornecer ao usu\u00e1rio uma maneira mais real\u00edstica de visualiza\u00e7\u00e3o dos objetos 3D, atrav\u00e9s da proje\u00e7\u00e3o 2D de suas superf\u00edcies por um dado \u00e2ngulo de visualiza\u00e7\u00e3o (Figura 2-21).\nFigura 2~21 - Modelo Esquem\u00e1tico da Visualiza\u00e7\u00e3o 3D\nNesta disserta\u00e7\u00e3o, utiliza-se a toolbox V3Dtools [Falc93] [Lupp94] [V3DT93] como ferramenta para a obten\u00e7\u00e3o destes resultados.\n2.4.1\tV3Dtools\nAl\u00e9m de suas v\u00e1rias aplica\u00e7\u00f5es, a toolbox V3DTooIs oferece um conjunto de operadores, que ao serem combinados de forma adequada (Figura 2-22), s\u00e3o capazes de reconstruir um objeto representado a partir de cortes 2D, de forma a oferecer uma visualiza\u00e7\u00e3o \u201ccont\u00ednua\u201d do objeto.\nFigura 2-22 - Workspace da Visualiza\u00e7\u00e3o 3D\nComo pode ser observado na Figura 2-22, a partir de um volume em n\u00edveis de cinza obtido na sa\u00edda o operador reorient, o encadeamento dos operadores\nray casting, voxel space normais, texture e shading, pertencentes a toolbox VSDTools, geram a proje\u00e7\u00e3o 2D da superf\u00edcie tridimensional do volume bin\u00e1rio voxel.\nA gera\u00e7\u00e3o desta proje\u00e7\u00e3o esta baseada na emiss\u00e3o de raios sobre os pontos dos volume, admitindo-se que a superf\u00edcie a ser visualizada \u00e9 cont\u00ednua. A partir do conjunto de raios \u201crefletidos\u201d, calcula-se as normais a cada ponto da superf\u00edcie. Com os raios emitidos e as normais pontuais calculadas, aplica-se um algoritmo de textura e em seguida, o algoritmo de shading. Desta forma, chega-se a proje\u00e7\u00e3o 2D da superf\u00edcie do volume bin\u00e1rio desejado.\n2.5\tAquisi\u00e7\u00e3o dos Dados\nUma t\u00e9cnica n\u00e3o destrutiva mostrou-se necess\u00e1ria na aquisi\u00e7\u00e3o dos dados, pois como apresentado anteriormente, o c\u00e1lculo da porosidade e da satura\u00e7\u00e3o incluem v\u00e1rias imagens da mesma amostra saturadas por fluidos diferentes. Para amostrar-se imagens em condi\u00e7\u00f5es e tempos diferentes, recorreu-se a tomograf\u00eda que garantiu a integridade da amostra al\u00e9m da boa precis\u00e3o nas imagens amostradas.\nEm seu estado natural, n\u00e3o seria poss\u00edvel injetar um fluido na amostra, de modo a mant\u00ea-la saturada e depois submet\u00ea-la a inje\u00e7\u00e3o direcionada de um fluido, de modo permitir o acompanhamento do deslocamento da frente formada. A baixa press\u00e3o nas regi\u00f5es perif\u00e9ricas invalidariam o experimento, pois preferencialmente o fluido injetado sairia pela periferia ao inv\u00e9s de se propagar pelo meio poroso. Para evitar o problema de baixa press\u00e3o nas regi\u00f5es mais externas, foi adotado o modelo de prepara\u00e7\u00e3o do meio poroso descrito na se\u00e7\u00e3o a seguir.\n2.5.1\tPrepara\u00e7\u00e3o da Amostra\nAp\u00f3s a retirada da amostra cil\u00edndrica do bloco de arenito, esta \u00e9 vedada por uma resina, juntamente com seus difusores (Figura 2-23). Os difusores foram usados nas duas extremidades da amostra para proporcionar um espalhamento uniforme do fluido injetado. Um tubo de PVC serviu de molde para garantir a forma cil\u00edndrica da amostra preparada. Foi escolhido o formato cil\u00edndrico, com a amostra centrada no interior do tubo, para que fosse poss\u00edvel minimizar o efeito de endurecimento de feixe (se\u00e7\u00e3o 2.5.1.1), pois o feixe projetado na amostra sempre percorre a mesma espessura de resina e do tubo PVC, independente da dire\u00e7\u00e3o do feixe, deixando de influenciar o resultado.\n> TubodePVC&lt;\n> Resina&lt;\nFigura 2-23 - Prepara\u00e7\u00e3o da Amostra\nConclu\u00edda a prepara\u00e7\u00e3o f\u00edsica da amostra, satura-se a rocha atrav\u00e9s da inje\u00e7\u00e3o cont\u00ednua de \u00f3leo. Em seguida leva-se a amostra a mesa do tom\u00f3grafo, onde passa-se a injetar a solu\u00e7\u00e3o salina de Kl (Iodeto de Pot\u00e1ssio) (Figura 2-24). Ao iniciar o processo de inje\u00e7\u00e3o de Kl, come\u00e7a-se a tomografar a rocha de modo a obter o comportamento do deslocamento dos fluidos pela rocha. S\u00e3o feitas tomadas em v\u00e1rios instantes de tempo possibilitando caracterizar o comportamento temporal de escoamento da amostra.\nFigura 2-24 - Modelo Esquem\u00e1tico do Deslocamento dos Fluidos pela Amostra\n2.5.1.1 Efeito de Endurecimento de Feixe\nO efeito de endurecimento de feixe ou Hard Beam \u00e9 uma anomalia causada na regi\u00e3o perif\u00e9rica das se\u00e7\u00f5es tomogr\u00e1ficas (Figura 2-25), provocando um aumento dos valores CT da amostra. Este efeito \u00e9 causado pela absor\u00e7\u00e3o do feixe de radia\u00e7\u00e3o pela amostra.\nFigura 2-25 - Diagrama Ilustrativo do Efeito de Endurecimento de Feixe\nApesar das tentativas de gerar feixes puramente monocrom\u00e1ticos, estes feixes cont\u00e9m uma pequena quantidade de luz em outras freq\u00fc\u00eancias. Baixas frequ\u00eancias passam a ser absorvidas pela amostra fazendo com que o tom\u00f3grafo receba uma menor quantidade de radia\u00e7\u00e3o que a esperada, causando altera\u00e7\u00f5es nas intensidades dos pixels. Como a absor\u00e7\u00e3o \u00e9 mais intensa na regi\u00e3o perif\u00e9rica, a anomalia mostra-se mais evidente nesta regi\u00e3o, onde os pixels acabam assumindo valores maiores que os esperados.\nMesmo sendo a principal causa do efeito de endurecimento de feixe, o problema com a luz monocrom\u00e1tica n\u00e3o \u00e9 o \u00fanico causador deste efeito, a calibra\u00e7\u00e3o do tom\u00f3grafo pode agrav\u00e1-lo. Devido a tradi\u00e7\u00e3o da utiliza\u00e7\u00e3o m\u00e9dica dos recursos tomogr\u00e1f\u00edcos em humanos e animais, os tom\u00f3grafos normalmente se encontram calibrados com tecidos que cont\u00e9m grande quantidade de \u00e1gua (63% da composi\u00e7\u00e3o de uma pessoa). Ao se trabalhar com rocha, formada por quartzo na sua maioria, o tom\u00f3grafo deveria estar calibrado com quartzo. Como os custos de manuten\u00e7\u00e3o de um tom\u00f3grafo s\u00e3o bastante altos e a calibra\u00e7\u00e3o exige a presen\u00e7a de um t\u00e9cnico especializado, normalmente s\u00e3o utilizados tom\u00f3grafos calibrados com tecidos humanos, aproveitando recursos de algum hospital ou cl\u00ednica, diminuindo os custos e agravando o efeito de endurecimento de feixe.\nUma metodologia corretiva via software foi implementada em [Silv94], onde foi encontrado uma fun\u00e7\u00e3o de corre\u00e7\u00e3o obtida pela m\u00e9dia dos cortes radiais da amostra. Percebemos que tal corre\u00e7\u00e3o trata a imagem globalmente, causando uma\nsuaviza\u00e7\u00e3o \u00edndesejada das fatias da amostra, pois propriedades locais acabam sendo perdidas devido a globalidade da fun\u00e7\u00e3o de corre\u00e7\u00e3o.\nEstudos mais recentes [Gome97] tem mostrado que a utiliza\u00e7\u00e3o de tom\u00f3grafos mais modernos como o Helicoidal Hi Speed GE diminuem significativamente este efeito. Al\u00e9m disso, a pr\u00f3pria natureza do c\u00e1lculo da porosidade e da satura\u00e7\u00e3o acabam por cancelar boa parte deste, devido a aritm\u00e9tica dos c\u00e1lculos das propriedades. Isto pode ser observado ao se fazer a subtra\u00e7\u00e3o de duas imagens de acordo com as f\u00f3rmulas para o c\u00e1lculo da porosidade e da satura\u00e7\u00e3o.\n2.5.2\tAquisi\u00e7\u00e3o de Imagem\nPara que fosse poss\u00edvel efetuar ensaios din\u00e2micos, verificando o comportamento temporal da propaga\u00e7\u00e3o do fluido injetado, foi necess\u00e1rio escolher um tom\u00f3grafo r\u00e1pido, que varresse uma amostra de 40cm em 4 ou 5 segundos, permitindo que esta fosse varrida algumas vezes durante a mesma se\u00e7\u00e3o de inje\u00e7\u00e3o. O tom\u00f3grafo axial, que efetua um giro de 180\u00b0 a cada fatia tomografada, mostrou-se ineficiente ao problema devido ao tempo gasto na varredura da amostra. O tom\u00f3grafo helicoidal varre toda amostra em poucos giros helicoidais, tornando poss\u00edvel o acompanhamento da frente de propaga\u00e7\u00e3o do fluido injetado e possibilitando a pesquisa de ensaios din\u00e2micos atrav\u00e9s da utiliza\u00e7\u00e3o de imagens tomogr\u00e1ficas.\nNos experimentos apresentados nessa disserta\u00e7\u00e3o foi usado o tom\u00f3grafo de 3a gera\u00e7\u00e3o Helicoidal Hi Speed GE, onde foram geradas imagens com a resolu\u00e7\u00e3o 0.5mm e matriz de 512x512 pixels e 40 cortes reconstru\u00eddos a cada lOmm, onde os valores dos pixels variam tipicamente entre -1000 e 3000 CT. Estes dados foram gravados em fitas DAT de 4mm, sendo que as imagens encontram-se seq\u00fcencialmente armazenadas, no formato propriet\u00e1rio da GE.\n3.\tProcessamento, An\u00e1lise e Visualiza\u00e7\u00e3o de Dados\nNeste cap\u00edtulo \u00e9 definido um conjunto de ferramentas, que atuam sobre imagens no formato voxels, obtidas atrav\u00e9s de tomografia de amostras de meios porosos cil\u00edndricos, bem como algumas t\u00e9cnicas de manipula\u00e7\u00e3o, de an\u00e1lise e de visualiza\u00e7\u00e3o dos dados.\nDe modo geral, o problema de calcular experimentalmente uma propriedade qualquer de um meio poroso utilizando imagens CT pode ser dividido em: Recupera\u00e7\u00e3o das Imagens, Pr\u00e9-Processamento, Processamento, Visualiza\u00e7\u00e3o e Visualiza\u00e7\u00e3o Anal\u00edtica, como mostra a Figura 3-1. Na fase de recupera\u00e7\u00e3o das imagens, resgata-se as imagens armazenadas em algum dispositivo de alta capacidade de armazenamento convertendo-as para o formato do programa de processamento; na fase de pr\u00e9-processamento, \u00e9 feita a escolha da regi\u00e3o de interesse, o alinhamento das fatias, a normaliza\u00e7\u00e3o geom\u00e9trica e o mascaramento das imagens, deixando a imagem preparada para o processamento; no processamento \u00e9 feito o c\u00e1lculo das propriedades desejadas; na fase de visualiza\u00e7\u00e3o os resultados s\u00e3o apresentados atrav\u00e9s de uma sa\u00edda gr\u00e1fica; e em paralelo, na fase de an\u00e1lise dos resultados s\u00e3o feitas medidas estat\u00edsticas sobre os dados calculados.\nFigura 3-1 - Modelo Geral de Processamento de Imagens Tomogr\u00e1fkas\n3.1\tRecupera\u00e7\u00e3o das Imagens\nO objetivo desta fase \u00e9 obter um algoritmo capaz de recuperar as imagens tomogr\u00e1ficas das fitas DAT para a mem\u00f3ria e ent\u00e3o convert\u00ea-las do padr\u00e3o propriet\u00e1rio do tom\u00f3grafo, para o formato reconhecido pelo processador, ou seja, a fase de recupera\u00e7\u00e3o das imagens pode ser subdividida em duas novas etapas (Figura\n3-2): manipula\u00e7\u00e3o e leitura da fita; e convers\u00e3o da imagem tomogr\u00e1fica.\nFigura 3~2 - Modelo Esquem\u00e1tico de Recupera\u00e7\u00e3o das Imagens Gravadas em Fita\n3.1.1\tManipula\u00e7\u00e3o e Leitura da Fita\nExames tomogr\u00e1ficos consistem de uma sequ\u00eancia de imagens, tipicamente variando entre 5 e 50 fatias, exigindo dispositivos com alta capacidade de armazenamento para guard\u00e1-las: fitas DAT, CDROM, discos \u00f3pticos, etc. Nesta disserta\u00e7\u00e3o, aborda-se a situa\u00e7\u00e3o em que o tom\u00f3grafo gera as imagens armazenando-as em dispositivos de acesso sequencial, como por exemplo, uma fita.\nV\u00e1rios exames4 podem ser armazenados em uma mesma fita, tamb\u00e9m na forma seq\u00fcencial. Um sistema de leitura \u00e9 necess\u00e1rio para resgatar as imagens armazenadas em fita.\nUma s\u00e9rie de transforma\u00e7\u00f5es devem ser efetuadas na fase de manipula\u00e7\u00e3o da fita, antes que a leitura seja feita. \u00c9 necess\u00e1rio especificar cada um dos seguintes dados para o controle da fita: a escolha entre a leitura das imagens em uma m\u00e1quina local ou remota, o deslocamento a ser efetuado para o posicionamento da fita na primeira fatia do exame, o n\u00famero de fatias a serem lidas e o momento de rebobinar a fita.\n4 Exame: No contexto de tomograf\u00eda, exame trata-se de uma amostragem efetuada sobre o corpo tomografado, neste caso, um meio poroso. Um exame tomogr \u00e1tico procura capturar as informa\u00e7\u00f5es internas de um corpo, sem que este seja destru\u00eddo ou penetrado por algum instrumento t\u00edsico.\nComo as imagens est\u00e3o gravadas em fita e nem toda a m\u00e1quina de uma rede possui um dispositivo local de leitura de fita, a leitura da pode ser local ou remota, possibilitando que um n\u00famero maior de usu\u00e1rios utilize o sistema, independente de se possuir ou n\u00e3o uma unidade local de leitura de fita.\nTendo a fita posicionada na primeira fatia do exame, seq\u00fcencialmente l\u00eaem~se as fatias para a mem\u00f3ria, empilhando-as em uma \u00fanica imagem 3D. Esta opera\u00e7\u00e3o reconstr\u00f3i o volume da amostra no modelo voxel. Opcionalmente, ap\u00f3s a reconstru\u00e7\u00e3o do volume em mem\u00f3ria, este pode ser armazenado um disco r\u00edgido, evitando futuras repeti\u00e7\u00f5es do processo de manipula\u00e7\u00e3o e de leitura de fita que \u00e9 bastante moroso, permitindo a r\u00e1pida recupera\u00e7\u00e3o do volume em manipula\u00e7\u00f5es futuras.\n3.1.2\tConvers\u00e3o de Formatos de Armazenamento de Imagem\nComo o software de processamento de imagem n\u00e3o reconhece os diversos formatos de arquivo gerados pelos tom\u00f3grafos, as imagens armazenadas na mem\u00f3ria ou no disco r\u00edgido, devem passar por um processo de convers\u00e3o, para serem reconhecidas. Para isto, deve-se fornecer a identifica\u00e7\u00e3o do tom\u00f3grafo utilizado na aquisi\u00e7\u00e3o dos dados, para que seja selecionado o algoritmo correto de convers\u00e3o a ser utilizado.\nNa convers\u00e3o s\u00e3o extra\u00eddas informa\u00e7\u00f5es referentes as condi\u00e7\u00f5es a qual o exame foi feito: n\u00famero e identifica\u00e7\u00e3o do exame, hor\u00e1rio da aquisi\u00e7\u00e3o, n\u00famero de fatias do exame, etc.; al\u00e9m dos valores de cada pixel convertido para o formato de armazenamento de imagem que seja compat\u00edvel com o software de processamento. Estes dados s\u00e3o armazenados de acordo com as capacidades oferecidas pelo formato de imagem oferecido pelo software de processamento.\nEmbora exista uma padroniza\u00e7\u00e3o para o formato de arquivo de imagens to mo gr\u00e1ficas (DICOM), os fabricantes de tom\u00f3grafo co mu mente adotam padr\u00f5es particulares. A cria\u00e7\u00e3o de um padr\u00e3o de escrita dos dados que fosse seguido pelas empresas fabricantes de tom\u00f3grafo faria com que este algoritmo fosse \u00fanico, diminuindo a complexidade e a quantidade de rotinas. Enquanto esta padroniza\u00e7\u00e3o n\u00e3o se concretiza, a cada modelo de tom\u00f3grafo cadastrado, uma rotina de convers\u00e3o deve ser criada e adicionada. Desta forma, somente os tom\u00f3grafos cadastrados s\u00e3o reconhecidos, permitindo a leitura e a convers\u00e3o dos arquivos por ele gerados, para um dos formatos aceitos pelo programa de processamento.\n3.1.3\tRepresenta\u00e7\u00e3o de um Volume Tomogr\u00e1fico\nDefine-se um volume tomogr\u00e1fico discreto (Figura 3-3) como um conjunto de voxels representados por /(x,y,z)que \u00e9 o valor CT do ponto (x,y,z) onde x,y,zeW. O valor CT \u00e9 um n\u00famero inteiro pertencente ao intervalo [\u2014 1000,3095]. O dom\u00ednio de f\u00e9 dado por:\nf => Ej [(0,0,0), (W - 1, H - 1, D - 1)]\nonde W representa a largura, H a altura e D a profundidade da imagem.\nWidth\nFigura 3-3 - Representa\u00e7\u00e3o Gen\u00e9rica de um Volume Tomogr\u00e1fico\n3.2\tPr\u00e9-Processamento\nApesar de serem reconhecidas pelo programa respons\u00e1vel pelo processamento, as imagens que vieram da fase de leitura da fita ainda n\u00e3o se encontram prontas para serem efetivamente utilizadas. Problemas devido ao grande volume de dados desnecessariamente armazenado nas imagens originais e imprecis\u00f5es vindas da fase de aquisi\u00e7\u00e3o dos dados: imagens n\u00e3o alinhadas e com dimens\u00f5es n\u00e3o normalizadas, devem ser corrigidas.\nPara que as fatias da imagem estejam prontas para 0 processamento, alguns passos devem ser seguidos (Figura 3-4): a redu\u00e7\u00e3o do volume de dados atrav\u00e9s\nda sele\u00e7\u00e3o da regi\u00e3o m\u00ednima de interesse; a corre\u00e7\u00e3o do alinhamento das fatias; a normaliza\u00e7\u00e3o das dimens\u00f5es do volume, de modo que estas sejam fixadas; e a inser\u00e7\u00e3o de m\u00e1scara, caso o modelo de representa\u00e7\u00e3o n\u00e3o consiga representar adequadamente a geometria da amostra.\nMascaramento i\ndas Regi\u00f5es\ti imagem \u00a1\nExternas \u00e0\ti Pr\u00e9~Processada |\nAmostra\nFigura 3-4 - Modelo Esquem\u00e1tico do Pr\u00e9-processamento\nImagem !\n\nJ\n3.2.1\tSele\u00e7\u00e3o da Regi\u00e3o M\u00ednima de Interesse\nA facilidade de sele\u00e7\u00e3o autom\u00e1tica da regi\u00e3o de interesse aplica-se \u00e0s imagens tomogr\u00e1f\u00edcas, pois nas periferias de cada fatia da amostra, normalmente encontram-se regi\u00f5es que n\u00e3o fazem parte do dom\u00ednio de interesse (Figura 3-5), ou seja, um conjunto de pontos adjacentes que est\u00e3o fora do intervalo de intensidades CT selecionado. Ao selecionar um intervalo de valores de interesse em CT, pode-se determinar o ret\u00e2ngulo m\u00ednimo que engloba todos os pontos pertencentes a este intervalo, descartando uma parte dos pontos fora deste intervalo.\nDe forma exagerada, a Figura 3-4 mostra situa\u00e7\u00f5es t\u00edpicas onde pode-se reduzir as dimens\u00f5es das fatias sem que ocorra a perda das informa\u00e7\u00f5es de interesse.\nFigura 3-5 - Modelo Esquem\u00e1tico da Sele\u00e7\u00e3o da Regi\u00e3o M\u00ednima\nComo o volume de dados se reduz, o processamento torna-se mais r\u00e1pido, pois o n\u00famero de pontos a ser manipulado \u00e9 menor que na imagem original.\n3.2.2\tCorre\u00e7\u00e3o do Alinhamento\nDevido a imprecis\u00f5es no posicionamento das amostras sobre a mesa do to m\u00f3 grafo, a cada exame feito, corre-se o risco da amostra n\u00e3o estar precisamente na mesma posi\u00e7\u00e3o de um exame anterior. Inclina\u00e7\u00f5es indesejadas acabam resultando em se\u00e7\u00f5es diferentes das esperadas, implicando na perda da correspond\u00eancia dos pixels de uma mesma fatia feita em instantes de tempo distintos. Al\u00e9m disso, n\u00e3o existe a garantia que o conjunto de imagens necess\u00e1rias ao c\u00e1lculo das propriedade, tenha sido adquirido em um mesmo dia. Problemas f\u00edsicos como a dilata\u00e7\u00e3o da amostra devido a mudan\u00e7a de temperatura, tamb\u00e9m influem nos resultados do exame. Na Figura 3-6 \u00e9 mostrada a diferen\u00e7a dos cortes obtidos quando a amostra muda de posi\u00e7\u00e3o em rela\u00e7\u00e3o ao plano de corte.\nAmostra\nSe\u00e7\u00e3o El\u00edptica\nAmostra\nAlinhamento do Tom\u00f3grafo\n> Alinhamento da Amostra\n\tk y\ny\u2018\\\t\nl\u00edc A\tX'\n\t\n\t\\ \u25a0' Av.-r\n\tS r4\u2014\nPlanos de Corte do Tom\u00f3grafo\nFigura 3-6 - Ilustra\u00e7\u00e3o Demonstrando o Problema do Alinhamento\nPara minimizar este problema, uma metodologia de alinhamento deve ser utilizada de modo a explorar as caracter\u00edsticas geom\u00e9tricas das amostras. A geometria cil\u00edndrica e o pequeno \u00e2ngulo Q , formado entre o eixo de alinhamento do to m\u00f3 grafo e o da amostra permitem ignorar tal problema, assumindo que as fatias est\u00e3o alinhadas quando completada a fase de extra\u00e7\u00e3o do ret\u00e2ngulo m\u00ednimo de interesse. Considerando que a amostra estudada possui 5cm de di\u00e2metro, 40cm de comprimento e que cada se\u00e7\u00e3o circular possui em m\u00e9dia 266 pixels, verif\u00edcou-se que o des alinhamento entre a primeira e a \u00faltima fatia \u00e9 em m\u00e9dia de 4 pixels, aproximadamente 0.56mm. Desta forma, tem-se que o \u00e2ngulo 0 m\u00e9dio \u00e9 0.0802 graus, ou seja, o erro provocado pelo n\u00e3o tratamento do alinhamento \u00e9 pequeno, podendo ser ignorado, pois sen(\u00f3 )= sen (0.0802)= 0.0014 ~ 0.035 = 25 x sen(6 )= \u00f4 (Figura 3-6).\n3.2.3\tNormaliza\u00e7\u00e3o das Dimens\u00f5es\nAo se escolherem os ret\u00e2ngulos que selecionam as regi\u00f5es de interesse, estes freq\u00fcentemente n\u00e3o possuem dimens\u00f5es iguais, diferenciando uns dos outros por alguns poucos pixels. Al\u00e9m disso, devido a pequenas rota\u00e7\u00f5es na amostra, cortes que deveriam produzir se\u00e7\u00f5es circulares acabam produzindo se\u00e7\u00f5es el\u00edpticas. Para corrigir estes inconvenientes, a normaliza\u00e7\u00e3o das dimens\u00f5es dos ret\u00e2ngulos (Figura 3-7) se faz necess\u00e1ria.\nVale ressaltar que para outros tipos de geometria n\u00e3o se pode garantir a efici\u00eancia desta metodologia, pois as simplifica\u00e7\u00f5es conseguidas usufruem da simetria encontrada nas fatias circulares, possibilitando ignorar pequenas rota\u00e7\u00f5es. Uma geometria irregular da amostra inviabiliza o m\u00e9todo e uma forma alternativa de normaliza\u00e7\u00e3o se faz necess\u00e1ria, cabendo ao usu\u00e1rio pesquisar e desenvolver novas alternativas de alinhamento para amostras com se\u00e7\u00f5es n\u00e3o circulares.\nAp\u00f3s a escolha pr\u00e9via das dimens\u00f5es das fatias de sa\u00edda, largura e altura, cada ret\u00e2ngulo \u00e9 normalizado para estas dimens\u00f5es. Normalmente para manter a caracter\u00edstica circular dos cortes da amostras, escolhe-se um ret\u00e2ngulo onde a largura e a altura s\u00e3o iguais formando um quadrado.\nNormaliza\u00e7\u00e3o\nFigura 3-7 - Modelo Esquem\u00e1tico Demonstrativo da Normaliza\u00e7\u00e3o das Fatias da Amostra\nAo escolher as dimens\u00f5es finais das fatias de sa\u00edda, pontos n\u00e3o existentes na imagem original acabam sendo inclu\u00eddos quando a imagem resultante possui dimens\u00f5es maiores que a original; ou os pontos em excessos s\u00e3o descartados quando a imagem resultante possui dimens\u00f5es menores que a original. Para que as intensidades destes pontos se aproximem dos valores reais encontrados na amostra, um algoritmo baseado em interpola\u00e7\u00f5es (caso a dimens\u00e3o da imagem de sa\u00edda seja maior que a original) ou sub-amostragem (caso a dimens\u00e3o da imagem de sa\u00edda seja menor que a original) deve ser utilizado.\nPara a manuten\u00e7\u00e3o da qualidade da amostra, procura-se escolher as dimens\u00f5es o mais pr\u00f3ximo poss\u00edvel da original, evitando, dentro do poss\u00edvel, a inclus\u00e3o ou o descarte de pontos na imagem final.\n3.2.4\tMascarando Regi\u00f5es de N\u00e3o Interesse\nPelo fato das imagens utilizadas pela grande maioria dos programas de manipula\u00e7\u00e3o e processamento de imagens serem retangulares, baseadas em representa\u00e7\u00f5es matriciais, imagens com uma geometria diferente devem ser tratadas de forma diferenciada, fazendo com que somente a regi\u00e3o real da imagem seja representativa quando submetida a algum tipo de opera\u00e7\u00e3o, desconsiderando qualquer outra que tenha sido inclu\u00edda de modo a completar o modelo matricial.\nMesmo selecionando o ret\u00e2ngulo m\u00ednimo contendo toda a regi\u00e3o de interesse, devido a geometria circular, pontos que n\u00e3o pertencem a este intervalo\nainda continuam a fazer parte da imagem resultante, isto \u00e9, pontos externos a amostra, mas dentro do ret\u00e2ngulo m\u00ednimo selecionado (Figura 3-8).\nFigura 3-8 ~ Modelo Esquem\u00e1tico de Mascaramento de uma Imagem\nPara que estes pontos extras n\u00e3o contribuam nos resultados calculados, usa-se o artif\u00edcio de mascarar os pixels fora do intervalo de interesse. Mascarar ou n\u00e3o um pixels \u00e9 equivalente a indicar se ele pertence ou n\u00e3o a imagem de interesse. Com isto, mesmo existindo fisicamente na estrutura de dados, pontos mascarados ser\u00e3o desconsiderados no processamento.\nO artif\u00edcio normalmente usado para a cria\u00e7\u00e3o de um m\u00e1scara \u00e9 associar a imagem original, uma outra imagem bin\u00e1ria possuindo as mesmas dimens\u00f5es. A cada um dos ponto da imagem bin\u00e1ria \u00e9 atribu\u00eddo zero ou um indicando que o seu correspondente na imagem original \u00e9 um ponto de n\u00e3o interesse ou de interesse, respectivamente. Antes de qualquer opera\u00e7\u00e3o envolvendo a imagem original, a imagem bin\u00e1ria \u00e9 consultada, verificando se o ponto em quest\u00e3o deve ser operado ou n\u00e3o.\n3.2.5\tRepresenta\u00e7\u00e3o Matem\u00e1tica do Pr\u00e9-processamento\nAs opera\u00e7\u00f5es envolvidas na fase de pr\u00e9-processamento s\u00e3o descritas na Equa\u00e7\u00e3o VIII, onde a cada fatia do volume fk \u00e9 extra\u00eddo o ret\u00e2ngulo m\u00ednimo contendo os pontos com intensidade dentro do intervalo de interesse atrav\u00e9s do operador janela J e finalmente, aplicando a opera\u00e7\u00e3o NORM. as dimens\u00f5es de cada fatia s\u00e3o normalizadas para um tamanho comum previamente definido.\ncfci1 = NORMM1\u00edN(4,)(/,)), fc = 0,l,...,P-l\n(VIII)\nA coloca\u00e7\u00e3o da m\u00e1scara atrav\u00e9s da opera\u00e7\u00e3o p , pode ser efetuada em qualquer uma das fases do pr\u00e9-processamento. No entanto, para diminuir o esfor\u00e7o\ncomputacional envolvido na verifica\u00e7\u00e3o dos pontos mascarados ou n\u00e3o, \u00e9 aconselh\u00e1vel inserir a m\u00e1scara ap\u00f3s os outros passos do pr\u00e9-processamento terem sido completados.\nFazendo com que a imagem de entrada seja trabalhada fatia a fatia, temos:\nfk (x,y) = f(x,y,k), k = 0,1,..., D ~ 1\nDefinimos o operador janela ./. por:\nx0 = min(x')\\fk (x\\ y') g [\u00bfq\u00e8] )o =min(y)\\fk(x\\ y')e[a,b] Xj = max(x')I fk (xy') e [e.\u00e9 J ys = max(y)\\ fk (Z, y') e [a,b]\nXG\t0, Xj - x0\ny G\t-y0\nk e[0,\u00a3>- 1]\t\nOnde a e b definem os limites inferior e superior do intervalo de intensidades de interesse dos pontos, respectivamente.\nDefine-se NORM MxN [/ (.v. y)] como uma fun\u00e7\u00e3o de normaliza\u00e7\u00e3o respons\u00e1vel pelo escalonamento das fatias da imagem, explorando os recursos de interpola\u00e7\u00f5es, replica\u00e7\u00e3o de pixels e sub-amostragens, gerando as imagens resultado com as dimens\u00f5es desejadas. Onde M e N s\u00e3o as novas dimens\u00f5es da fatia redimensionada.\nDefine-se a fun\u00e7\u00e3o m\u00e1scara u , como sendo:\n1,\n0,\n\nse/(x, v,z)g [a,b] caso contr\u00e1rio\nOnde aeb possuem o mesmo significado usado na defini\u00e7\u00e3o do operador janela J, ou seja, os limites inferior e superior do intervalo de intensidades de interesse dos pontos, respectivamente.\n3.3\tProcessamento\nUma vez que os dados est\u00e3o normalizados, \u00e9 poss\u00edvel processar pontualmente, isto \u00e9, voxel a voxeL os volumes adquiridos em tempos diferentes.\nCTR2^\n(CT^CT,)\nSatura\u00e7\u00e3o\nPorosidade\n3.4\tVisualiza\u00e7\u00e3o\nDevido a bidimension alidade dos dispositivos computacionais de apresenta\u00e7\u00e3o: monitor, impressora, etc., a visualiza\u00e7\u00e3o de dados volum\u00e9tricos nunca \u00e9 poss\u00edvel a partir de uma \u00fanica imagem. Em geral, s\u00e3o utilizadas diversas t\u00e9cnicas de transforma\u00e7\u00f5es geom\u00e9tricas para visualizar os dados em diversas formas e perspectivas. Neste trabalho, foram implementadas tr\u00eas destas t\u00e9cnicas: o mosaico das fatias, a proje\u00e7\u00e3o ortogonal e a visualiza\u00e7\u00e3o 3D,\nMesmo tendo sido inspiradas em problemas de engenharia de petr\u00f3leo, estas t\u00e9cnicas de visualiza\u00e7\u00e3o podem ser utilizadas em outros contextos onde se possui uma imagem digital formada por uma seq\u00fc\u00eancia de cortes bi-dimensionais, formando um volume no formato voxeL\n3.4.1\tMosaico\nAtrav\u00e9s do recurso de visualiza\u00e7\u00e3o de imagens 3D proporcionada pela t\u00e9cnica de mosaico, uma seq\u00fc\u00eancia de imagens 2D pode ser visualizada uma ao lado da outra, possibilitando uma vis\u00e3o global de todo volume (Figura 3-9). A vantagem desta t\u00e9cnica \u00e9 que todos os voxels s\u00e3o apresentados, por\u00e9m sua desvantagem \u00e9 a perda da informa\u00e7\u00e3o espacial tridimensional dos dados.\nImagem\n3D\nImagem\nFigura 3-9 - Modelo Esquem\u00e1tico do Mosaico de uma Imagem\nA modelagem matem\u00e1tica da t\u00e9cnica de mosaico pode ser descrita pelas equa\u00e7\u00f5es apresentadas a seguir, onde / representa a imagem 3D de entrada equivalente a descrita na se\u00e7\u00e3o 3.1.3 e # a imagem resultante, definida por:\n\nz x \u00cdl\u00ed = x + (z mod A) x IV [V = y + (z dlV A)xH 0, caso contr\u00e1rio\n(IX)\nOnde A representa o n\u00famero de imagens por linha, P div Q a divis\u00e3o inteira de P por Q e P mod Q \u00e9 definida como o resto da divis\u00e3o inteira de P por Q.\nA dimens\u00e3o da imagem resultante s\u00e3o dadas por (WA - 1, H y ceil(D / A)), onde ceil(D / A) representa o menor inteiro, maior ou igual a divis\u00e3o real de D por A.\nAo se utilizar visualiza\u00e7\u00e3o de imagens 3D pela t\u00e9cnica de mosaico, um problema comum \u00e9 o r\u00e1pido aumento das dimens\u00f5es da imagem resultante. O concatenamento das fatias em seu tamanho original muitas vezes inviabiliza a visualiza\u00e7\u00e3o de todos os dados. O recurso utilizado para minimizar este inconveniente \u00e9 agregar a fun\u00e7\u00e3o geradora do mosaico, a possibilidade de escalonamento da imagem resultante (Figura 3AO), onde \u00e9 poss\u00edvel reduzir as dimens\u00f5es das fatias concatenadas.\nFigura 3-10 - Modelo Esquem\u00e1tico do Escalonamento do Mosaico de uma Imagem\nUma forma de identifica\u00e7\u00e3o visual imediata de cada fatia \u00e9 um recurso de grande valia num sistema de visualiza\u00e7\u00e3o do tipo mosaico. Localizar uma dada fatia dentro de um conjunto numeroso de elementos (Figura 3-11). passa a ser uma tarefa desagrad\u00e1vel quando n\u00e3o se disp\u00f5e de uma forma de localiza\u00e7\u00e3o. Portanto, um sistema de identifica\u00e7\u00e3o pode ser implantado no algoritmo para facilitar uma pesquisa na imagem.\nImagem\nFigura 3-11 - Modelo Esquem\u00e1tico de Identifica\u00e7\u00e3o da Fatias\nOutro artif\u00edcio que pode ser utilizado para aumentar o n\u00famero de fatias visualizadas em uma mesma tela, \u00e9 manipular o n\u00famero de fatias apresentadas por linha da imagem mosaico. As dimens\u00f5es da imagem resultante pode ser variada de acordo com as necessidades de visualiza\u00e7\u00e3o (Figura 3-12), ou seja, o n\u00famero de fatias adjacentes por linha da imagem mosaico, dada por A na equa\u00e7\u00e3o IX, passa ser uma outra vari\u00e1vel. A inclus\u00e3o desta op\u00e7\u00e3o possibilita a personaliza\u00e7\u00e3o das dimens\u00f5es do display final.\nImagem\nFigura 3-12 - Modelo Esquem\u00e1tico da Personaliza\u00e7\u00e3o do Display\nQuando considerada uma imagem com uma numerosa quantidade de fatias, mas com um subconjunto reduzido de fatias de interesse, a possibilidade de se visualizar somente este subconjunto mostra-se uma op\u00e7\u00e3o valiosa (Figura 3-13) que possibilita a valoriza\u00e7\u00e3o somente dos dados de interesse, al\u00e9m disso, o processamento direcionado as fatias de n\u00e3o interesse deixa de ser feito, proporcionando maior rapidez no processamento e na visualiza\u00e7\u00e3o.\nImagem 3D\nImagem\nFigura 3-13 - Modelo Esquem\u00e1tico de Escolha de um Subconjunto\nPara o aproveitamento total destes recursos, estas op\u00e7\u00f5es devem ser apresentadas ao usu\u00e1rio de modo que este possa escolher a combina\u00e7\u00e3o de op\u00e7\u00f5es que possibilite a melhor visualiza\u00e7\u00e3o dos dados de interesse.\n3.4.2\tProje\u00e7\u00e3o Ortogonal\nOutra ferramenta de visualiza\u00e7\u00e3o de imagens 3D desenvolvida \u00e9 a proje\u00e7\u00e3o ortogonal. Como o pr\u00f3prio nome sugere, trata-se da apresenta\u00e7\u00e3o de cortes ortogonais da amostra (Figura 3-14). Selecionando as coordenadas de cada plano de\ncorte, pode-se determinar quais as se\u00e7\u00f5es, planos de corte XY, XZ e YZ, devem ser apresentadas.\n^'1\nFigura 3-14 - Organiza\u00e7\u00e3o dos Planos de Cortes da Proje\u00e7\u00e3o Ortogonal\nA visualiza\u00e7\u00e3o baseada no modelo de proje\u00e7\u00e3o ortogonal pode ser descrita matematicamente atrav\u00e9s do seguinte conjunto de equa\u00e7\u00f5es que modelam o algoritmo:\nx'6[o,I\u00a5- 1],\n/r(i,z)=/(x,\u00da y'e[0,/7-l], /z(Jt\u2019>\u2019)=r(x-y-z)> z'e[o,\u00a3)-l],\nse plano de proje\u00e7\u00e3o for YZ se plano de proje\u00e7\u00e3o for XZ se plano de proje\u00e7\u00e3o for XF\n(X)\nOnde X, Y e Z definem os planos de cortes relativos a cada eixo de orienta\u00e7\u00e3o, representados segundo a Figura 3-14.\nEm virtude do pequeno n\u00famero de pixels obtidos normalmente na dimens\u00e3o profundidade da amostra quando comparado a largura e a altura, um algoritmo de interpola\u00e7\u00e3o pode ser associado ao operador proje\u00e7\u00e3o ortogonal de forma a apresentar as proje\u00e7\u00f5es de forma mais \u201ccont\u00ednua\u201d.\n3.4.3\tTabela de Pseudo Cores Din\u00e2mica\nA visualiza\u00e7\u00e3o das informa\u00e7\u00f5es atrav\u00e9s de imagens n\u00edveis de cinza, normalmente n\u00e3o possuem o contraste desejado entre as regi\u00f5es de interesse e as demais. A tabela de pseudo cores din\u00e2mica, combina a associa\u00e7\u00e3o de uma tabela de pseudo cores \u00e0 imagem, juntamente com o aumento de contraste, evidenciando somente o intervalo de interesse dinamicamente selecionado (Figura 3-15).\nFigura 3-15 - Modelo Esquem\u00e1tico da Tabela de Cores Din\u00e2mica\nA tabela de pseudo cores din\u00e2mica, permite que o usu\u00e1rio defina o intervalo de interesse dos pixels. A gera\u00e7\u00e3o desta pode ser feita atrav\u00e9s de fun\u00e7\u00f5es senoidais definidas para os canais R, G e B conforme a Figura 3-16, permitindo uma melhor visualiza\u00e7\u00e3o do intervalo de interesse. Aos pixels com intensidades externas ao intervalo de interesse \u00e9 atribu\u00eddo uma \u00fanica cor n\u00e3o pertencente a tabela de cores gerada, tornando f\u00e1cil a distin\u00e7\u00e3o entre as duas regi\u00f5es: a de interesse e a de n\u00e3o interesse.\nFigura 3-16 - Tabela de Cores Senoidal\nAs equa\u00e7\u00f5es de gera\u00e7\u00e3o da tabela de cores din\u00e2mica s\u00e3o apresentadas a seguir:\n, V i, i e [min, max ]\nOnde gR ,gG ,gB correspondem aos canais R, G ou B da tabela de cores,\na e b os extremos delimitadores do intervalo de abrang\u00eancia final da tabela de cores; e min e max representam os valores de m\u00e1ximo e m\u00ednimo que delimitam o intervalo de interesse dos pixels da imagem original e i \u00e9 uma determinada intensidade de pixel pertencente ao intervalo de interesse [min, max].\ngG^k gB =lp\n\\ global min &lt;i &lt;min ou max &lt;i &lt;global max\nOnde global min e global max representam os m\u00ednimos e m\u00e1ximos\nglobais da imagem, respectivamente e k representa uma cor constante, em n\u00edveis de cinza, selecionada pelo usu\u00e1rio e que n\u00e3o pertence ao conjunto de cores geradas pelas seno ides, desta forma, pixels com intensidades externas ao intervalo de interesse selecionado n\u00e3o prejudicam a visualiza\u00e7\u00e3o dos pontos escolhidos. Para imagens que representam os valores CT de uma amostra, os voxels tipicamente assumem valores inteiros entre d 000 e 3095.\nA seguir, na Figura 3-17, \u00e9 apresentado o gr\u00e1fico representativo de uma tabela de cores:\n0\nIntensidade\nMin Min Global\nMax Max\nGlobal\nFigura 3-17 - Tabela de Cores Gen\u00e9rica\n3.4.4\tVisualiza\u00e7\u00e3o 3D\nA proposta deste tipo de visualiza\u00e7\u00e3o \u00e9 apresentar a iso~superf\u00edcie de rendering de modo a ser visualizado uma dada regi\u00e3o do volume no formato voxel, segundo um \u00e2ngulo de proje\u00e7\u00e3o selecionado (Figura 2-21). A regi\u00e3o a ser apresentada \u00e9 selecionada por threshold, esta \u00e9 determinada atrav\u00e9s o intervalo de interesse a ser apresentado. Esta t\u00e9cnica \u00e9 descrita em detalhes em [Falc93J.\n3.5\tVisualiza\u00e7\u00e3o Anal\u00edtica\nA an\u00e1lise dos dados est\u00e1 intrinsecamente ligada \u00e0 aplica\u00e7\u00e3o abordada. Recursos num\u00e9ricos operados sobre as imagens pr\u00e9-processadas podem ser aplicados de modo a retornar as informa\u00e7\u00f5es desejadas: m\u00e9dia, desvio padr\u00e3o, m\u00e1ximo, m\u00ednimo, moda, etc. Toda limita\u00e7\u00e3o desta fase resume-se a potencialidade das ferramentas de an\u00e1lise do software utilizado.\nRecursos como a avalia\u00e7\u00e3o estat\u00edstica das imagens feita fatia a fatia ou volum\u00e9tricamente, proporcionam informa\u00e7\u00f5es descritivas das propriedades da amostra analisada. Os resultados obtidos nesta fase s\u00e3o apresentados normalmente na forma de tabela ou gr\u00e1ficos, dependendo dos recursos oferecidos pelo software de an\u00e1lise.\nNestes c\u00e1lculos envolvendo as intensidades dos pixels da amostra, fica evidente a grande import\u00e2ncia da m\u00e1scara criada na fase de pr\u00e9-processamento. Para os sistemas em que n\u00e3o \u00e9 poss\u00edvel a representa\u00e7\u00e3o fiel das diversas formas de imagens: retangular, circular, triangular e outras, acaba sendo necess\u00e1rio a inclus\u00e3o de pontos na imagem original para possibilitar a representa\u00e7\u00e3o retangular, normalmente adotada pelos sistemas de processamento. Estes pontos adicionados artificialmente \u00e0 imagem de modo a completar o ret\u00e2ngulo de representa\u00e7\u00e3o, podem influir nos resultados.\nC\u00e1lculos baseados em informa\u00e7\u00f5es de vizinhan\u00e7a de pixels, produzem resultados diferenciados quando consideradas imagens mascaradas ou n\u00e3o. Somente opera\u00e7\u00f5es exclusivamente pontuais n\u00e3o sofreram com os problemas de limita\u00e7\u00e3o de representa\u00e7\u00e3o das imagens. A an\u00e1lise estat\u00edstica somente \u00e9 feita nas imagens mascaradas, para os pontos cuja m\u00e1scara possui valor um. Os pontos cuja m\u00e1scara \u00e9 zero s\u00e3o ignorados.\n4.\tImplementa\u00e7\u00e3o\nA partir da descri\u00e7\u00e3o do problema e do equacionamento da solu\u00e7\u00e3o gen\u00e9rica, a primeira quest\u00e3o foi escolher a melhor maneira de implement\u00e1-lo. Pensou-se na op\u00e7\u00e3o de cria\u00e7\u00e3o de um pacote dedicado a sua resolu\u00e7\u00e3o, op\u00e7\u00e3o abortada devido ao esfor\u00e7o a ser direcionado para a cria\u00e7\u00e3o de todo o conjunto de opera\u00e7\u00f5es preexistentes em alguns softwares: geradores de imagens, visualizado res, opera\u00e7\u00f5es aritm\u00e9ticas, an\u00e1lise estat\u00edstica, etc.; esfor\u00e7o este que extrapolava os objetivos tra\u00e7ados para esta disserta\u00e7\u00e3o. Assim surgiu a id\u00e9ia de aproveitar os recursos de algum programa preexistente e desenvolver somente os m\u00f3dulos que n\u00e3o se encontravam dispon\u00edvel no produto e que pudessem agilizar alguma etapa do processo.\nCom a utiliza\u00e7\u00e3o das ferramentas do Khoros em conjunto a biblioteca de fun\u00e7\u00f5es MMachLib, criou-se uma toolbox contendo um conjunto de operadores capazes de resolver o problema do c\u00e1lculo de porosidade e satura\u00e7\u00e3o de fluidos em meios porosos a partir de dados tomogr\u00e1ficos. Toolbox \u00e9 o recurso criado pelo Khoros para agrupar operadores que possuem funcionalidades semelhantes. Por exemplo: os operadores add, subtraction, multiply, etc. fazem parte da Toolbox Data Manipuladora todos eles est\u00e3o relacionados com opera\u00e7\u00f5es aritm\u00e9ticas.\nNesta disserta\u00e7\u00e3o os programas foram executados em uma Sparc Station 20 da Sun, com o sistema operacional Solaris, juntamente com a vers\u00e3o 2.1 do pacote Khoros e o compilador gcc 2.7.2 da GNU.\nUm conjunto de fun\u00e7\u00f5es agregadas \u00e9 denominado operador (Figura 4-1), no contexto do Khoros. Para cada operador desenvolvido existe um painel de controle associado, denominado pane (Figura 4-2), onde s\u00e3o encontradas as op\u00e7\u00f5es que determinam a forma do operador agir, isto \u00e9, trata-se da interface respons\u00e1vel por coletar os dados de entrada e especificar onde ser\u00e3o colocados os dados de sa\u00edda. Workspace (Figura 4-3) \u00e9 o recurso, em forma de grafo, adotado pelo Khoros para o encadeamento dos seus operadores, indicando a seq\u00fc\u00eancia das opera\u00e7\u00f5es para o c\u00e1lculo dos resultados.\nFigura 4-1 - Operador Multiplica\u00e7\u00e3o\nRead tomographic images form Tape\n!\ni\nTomografa\nPetrobras\n\n\tNome do Drive\tV\tAiev/rmt1.1\n\tLer Remotamente\t\t\n\t[ Maquina Remota\t\t\n\tDeslocamento ao arquivo inicial : 0\t\t\n\tNumero de arquivos a serem lidos :\t\t\n\t\t\t\n\tReholjinar\t\tNao\n|~j| Arquivo\n| ~| [ - Aupriwo ife En1 nd ia \u25a0\nI f\nArquive de Saida\n\u25a0'\"\"J /tmp/iol 05D.24\nFigura 4-2 - Pane do Operador Tape-in\nFigura 4-3 - Workspace do C\u00e1lculo da Porosidade\n4.1\tLeitura da Fita\nO operador tape-in \u00e9 o respons\u00e1vel pela manipula\u00e7\u00e3o e leitura da fita; e pelas convers\u00f5es necess\u00e1rias a manipula\u00e7\u00e3o dos dados pelos operadores do Khoros. A aquisi\u00e7\u00e3o de dados, feita pelo operador tape-in, converte os dados vindos do tomo grafo para o formato KDF (Khoros Data Format). Atualmente o operador tape-in reconhece o formato do tom\u00f3grafo GE helicoidal. A Figura 4-4 apresenta o modelo esquem\u00e1tico de funcionamento do operador tape-in:\n- Operador Tape-in \u2014\t\t\t<- Imagem KDF\u2014->\t\t\t\t\n\t-\tDeslocamento Inicial -\tN\u00famero de Fatias -\tTipo de Tom\u00f3grafo -\tNome da M\u00e1quina (Leitura Remota) -\tDrive do Tape -\tQuando Rebobinar\t\t\t\t\t1 - i \t\t\u2014>\n>\t\t\t\tI\t0\t\u00ed -\t\nCabe\u00e7alhos Agrupados\nReconstru\u00e7\u00e3o\n3D (Voxel)\nFigura 4-4 - Modelo Esquem\u00e1tico Tape-in\nO conjunto de opera\u00e7\u00f5es descritas na se\u00e7\u00e3o 3.1 \u00e9 implementado no operador tape-in. Em seu pane (Figura 4-2) encontram-se implementadas cada uma\ndas op\u00e7\u00f5es descritas anteriormente para a manipula\u00e7\u00e3o da fita: a escolha entre a leitura local ou remota da fita, o deslocamento para o posicionamento da fita no primeiro arquivo do exame, o n\u00famero de imagens a serem lidas pelo operador e o momento de rebobinar a fita.\nOs pixels das imagens convertidas pelo operador tape-in s\u00e3o armazenados em formato short ( inteiro de 16 bits), que varia entre -32.768 a 32.767, que \u00e9 o tipo de dados mais adequado para representar os valores CT de cada pixel. No problema abordado, os valores CT variaram aproximadamente de -1000 \u00e0 2500. Uma imagem t\u00edpica de 40 fatias de dimens\u00f5es 512x512, ocupa cerca de 20MB antes de sofrer qualquer processamento por outros operadores.\nA sele\u00e7\u00e3o do tom\u00f3grafo usado na gera\u00e7\u00e3o das imagens \u00e9 feita pelo usu\u00e1rio dentre uma lista de tom\u00f3 grafo s cadastrados. Sua identifica\u00e7\u00e3o \u00e9 a chave para a determina\u00e7\u00e3o do algoritmo correto de convers\u00e3o dos arquivos contendo as fatias tomografadas.\nO par\u00e2metro de deslocamento para o posicionamento da fita na primeira fatia da amostra pode ser positivo ou negativo. Um valor positivo indica o avan\u00e7o da fita, enquanto um valor negativo representa o retrocesso. A especifica\u00e7\u00e3o deste par\u00e2metro mostra-se necess\u00e1ria pelo fato da fita ser um dispositivo de acesso sequencial, onde o posicionamento de ve ser feito antes de qualquer opera\u00e7\u00e3o de leitura.\nAp\u00f3s especifica\u00e7\u00e3o dos dados, o operador tape-in efetua a leitura fatia a fatia, convertendo e extraindo as informa\u00e7\u00f5es pertinentes e as armazena em um \u00fanico arquivo no formato KDF, contendo todas as fatias amostradas. A partir daqui, qualquer operador do pacote Khoros est\u00e1 apto a reconhecer e processar este arquivo, que comp\u00f5e o volume de dados tomogr\u00e1ficos, onde cada elemento deste \u00e9 denominado voxel e endere\u00e7ado pelas coordenadas: width, height e depth\\ indicando respectivamente sua posi\u00e7\u00e3o na largura, altura e profundidade dentro do volume.\nOs comandos mt e dd, usados pelos sistemas operacionais Unix na manipula\u00e7\u00e3o de dispositivos de acesso seq\u00fcencial, s\u00e3o acessados atrav\u00e9s de chamadas system da linguagem C permitindo que o trabalho de posicionamento e leitura dos dados seja feito por estes comandos.\nO arquivo KDF gerado possui em seu cabe\u00e7alho, informa\u00e7\u00f5es sobre o tamanho da matriz tridimensional: {WIDTH, HEIGHT, DEPTH) largura, altura e profundidade. No cabe\u00e7alho s\u00e3o armazenadas informa\u00e7\u00f5es que identificam cada fatia adquirida: n\u00famero e identifica\u00e7\u00e3o do exame, hor\u00e1rio da aquisi\u00e7\u00e3o, n\u00famero da fatia no exame, etc. A convers\u00e3o do arquivo para o formato KDF, o encadeamento das fatias e a extra\u00e7\u00e3o de informa\u00e7\u00f5es relativas a cada fatia da amostra s\u00e3o feitos atrav\u00e9s do\nprocessamento dos arquivos tempor\u00e1rios gerados a cada fatia recuperada atrav\u00e9s de chamadas do comando dd.\n4.2\tPr\u00e9-Processamento\nConclu\u00edda a fase de leitura dos dados, a aten\u00e7\u00e3o passa a ser voltada a fase de pr\u00e9-processamento que est\u00e1 condensada no operador Normalized Crop. Este operador implementa v\u00e1rias fun\u00e7\u00f5es descritas na se\u00e7\u00e3o 3.2: redu\u00e7\u00e3o do volume; o alinhamento das fatias; a normaliza\u00e7\u00e3o das dimens\u00f5es dos volumes e a inser\u00e7\u00e3o da m\u00e1scara.\nComo os materiais usados nos experimentos: ar, \u00f3leo, solu\u00e7\u00e3o salina de Kl e rocha, possuem CT m\u00e9dios bastante diferenciados (Tabela 2), com um simples limiar \u00e9 poss\u00edvel selecionar o ret\u00e2ngulo m\u00ednimo que conter\u00e1 os pontos que est\u00e3o dentro do intervalo de interesse. Regi\u00f5es externas ao ret\u00e2ngulo s\u00e3o eliminadas reduzindo o volume de dados armazenados e o tempo de processamento associado \u00e0 imagem.\nSubst\u00e2ncia\tCT m\u00e9dio\nAr\t-1000\n\u00d3leo\t-200\nRocha\t1200\nSolu\u00e7\u00e3o Salina de Kl\t1300\nTabela 2 - N\u00famero de Hounsf\u00edeld M\u00e9dio para cada Material\nAo se calcular propriedades que envolvem a mesma amostra saturada com fluidos diferentes, cada varrida na amostra \u00e9 feita em um instante diferente. A cada ensaio tomogr\u00e1fico a amostra \u00e9 submetida a um processo de limpeza ou de troca de fluido, al\u00e9m disso, outras medidas tais como press\u00e3o, vaz\u00e3o, etc. s\u00e3o colhidas durante a se\u00e7\u00e3o tomogr\u00e1fica. A abertura e o fechamento de v\u00e1lvulas s\u00e3o atividades freq\u00fcentes, antes e ap\u00f3s uma se\u00e7\u00e3o, fazendo com que a amostra esteja sujeita a pequenos deslocamento em rela\u00e7\u00e3o a uma varrida anterior, fato que acaba provocando o desalinhamento das fatias (Figura 3-6).\nO correto alinhamento se faz necess\u00e1rio para o processamento da amostra, pois este exige opera\u00e7\u00f5es aritm\u00e9ticas envolvendo duas imagens em situa\u00e7\u00f5es distintas (saturada com \u00f3leo e outra com ar, por exemplo). Se estas n\u00e3o estiverem alinhadas, todo processamento \u00e9 comprometido pois n\u00e3o existir\u00e1 uma correspond\u00eancia espacial dos pixels (Figura 4-5).\nImagem 1\nImagens Iniciais\nImagem 2\nResultado\nEsperado\nFigura 4-5 - Ilustra\u00e7\u00e3o do Problema da Manipula\u00e7\u00e3o de Imagens N\u00e3o Alinhadas\nProcurando explorar a geometria circular das fatias, conforme sugerido na se\u00e7\u00e3o 3.2.2, o operador Normalized Crop contorna a problem\u00e1tica relativa ao alinhamento, assumindo que o \u00e2ngulo de inclina\u00e7\u00e3o formado pelo eixo da amostra e o eixo de deslocamento da mesa tomogr\u00e1fica \u00e9 pr\u00f3ximo a zero, podendo desta forma ser ignorado,\nA normaliza\u00e7\u00e3o das dimens\u00f5es das fatias \u00e9 tratada segundo a se\u00e7\u00e3o 3.2.3. O operador normalized crop assume que as fatias originaram-se de uma amostra cil\u00edndrica, onde os cortes produzidos formam uma se\u00e7\u00e3o. O processo utilizado para o redimensionamento das fatias na normaliza\u00e7\u00e3o foi a replica\u00e7\u00e3o de pixels oferecida pelo operador normalize da toolbox datamanip do Khoros. Algoritmos como o de interpola\u00e7\u00e3o linear, spline e outros poderiam ser utilizados no problema. A escolha do algoritmo de replica\u00e7\u00e3o deve-se ao fato j\u00e1 t\u00ea-lo implementado no software Khoros.\nDentro do Khoros, o recurso de mascarar uma imagem est\u00e1 dispon\u00edvel no segmento mask (se\u00e7\u00e3o 2.3.2.1.3). A obten\u00e7\u00e3o da m\u00e1scara (se\u00e7\u00e3o 3.2.4) \u00e9 feita atrav\u00e9s da escolha de dois limiares, um inferior e outro superior, logo ap\u00f3s, \u00e9 criada uma imagem bin\u00e1ria que armazena a m\u00e1scara e esta \u00e9 associada \u00e0 imagem original. A cada ponto cuja intensidade pertence ao intervalo definido pelos limites inferior e superior, \u00e9 associado o valor um na imagem m\u00e1scara, e o valor zero para os pontos fora do intervalo especificado.\nA Figura 4~6 mostra o modelo esquem\u00e1tico do funcionamento do operador normalized crop.\n- Normalized Crop\n-\tIntervalo de\ninteresse\n-\tColocar m\u00e1scara?\n(Sim/N\u00e3o) *\n-\tValor do pixel fora\ndo intervalo de interesse.\n-\tDimens\u00f5es da\nimagem de sa\u00edda\nNovas\nDimens\u00f5es\nM\u00e1scara\nRegi\u00e3o de Interesse\nFigura 4-6 - Modelo Esquem\u00e1tico Normalized Crop\nAp\u00f3s o processamento do operador Normalize d Crop em uma imagem t\u00edpica de 40 x512 x 512 x \\6bits (20Mb) esta se reduz para uma imagem de 40x256x256 com aproximadamente 5Mb sem a m\u00e1scara. Com a m\u00e1scara, esta passa a ocupar cerca de 10MB.\n4.3\tProcessamento\nA etapa de processamento depende diretamente do tipo de problema a ser resolvido. Nesta disserta\u00e7\u00e3o, escolheu-se o c\u00e1lculo de porosidade e satura\u00e7\u00e3o, propriedades tipicamente analisadas em amostras de rocha para analisar o comportamento din\u00e2mico de fluidos em meios porosos, de modo a solucionar o problema proposto. Deve-se ressaltar que outras propriedades que possam ser definidas atrav\u00e9s dos operadores dispon\u00edveis no Khoros podem ser calculadas nesta etapa.\n4.3.1\tC\u00e1lculo da Porosidade e da Satura\u00e7\u00e3o\nReproduzindo as f\u00f3rmulas apresentadas anteriormente na se\u00e7\u00e3o 2, construiu-se workspaces utilizando os operadores desenvolvidos e os padr\u00f5es do ambiente Khoros, que possibilitaram calcular os resultados desejados. Alguns dos operadores usados para c\u00e1lculo da porosidade (Figura 4-7), por exemplo, s\u00e3o os seguintes: subtract (subtra\u00e7\u00e3o), divide (divis\u00e3o), multiply (multiplica\u00e7\u00e3o) e outros que auxiliaram na convers\u00e3o de tipos, visualiza\u00e7\u00e3o, etc.\n\u00c9 importante lembrar que o processamento destas propriedades normalmente requer um grande volume de dados, o que implica em uma grande demanda computacional. A t\u00edtulo ilustrativo o c\u00e1lculo da porosidade de uma amostra de 40 fatias, que ocupa 10 Mb, usando o workspace da Figura 4-7, exige a cria\u00e7\u00e3o de arquivos tempor\u00e1rios intermedi\u00e1rios que totalizam aproximadamente 150 Mb. Em uma Sparc 20 da Sun, com 106 de mem\u00f3ria com o sistema operacional Solaris, s\u00e3o necess\u00e1rios na m\u00e9dia, cerca de 5 minutos para totalizar o c\u00e1lculo da porosidade e 6 minutos para o c\u00e1lculo da satura\u00e7\u00e3o. Em ambos os casos, n\u00e3o s\u00e3o considerados os tempos de leitura e de pr\u00e9-processamento.\nFigura 4-7 - Workspace do C\u00e1lculo da Porosidade\n4.4\tVisualiza\u00e7\u00e3o\nApesar do Khoros fornecer ferramentas para a visualiza\u00e7\u00e3o de dados volum\u00e9tricos, como o operador animate, n\u00e3o era poss\u00edvel obter perspectivas convencionais de an\u00e1lise de uma amostra usadas por engenheiros de petr\u00f3leo: proje\u00e7\u00e3o ortogonal, o mosaico das fatias, etc. Procurando aumentar o n\u00famero de ferramentas de visualiza\u00e7\u00e3o oferecidas pelo Khoros, foram criados os operadores montage e orthogonal projection capazes de visualizar dados 3D.\n4.4.1 Montage\nAo implementar as caracter\u00edsticas descritas na se\u00e7\u00e3o 3.4.1, o operador montage \u00e9 capaz de gerar a imagem mosaico. Al\u00e9m disso, ele tamb\u00e9m pode gerar um relat\u00f3rio colorido usufruindo dos recursos disponibilizados pelo m\u00e9todo de gera\u00e7\u00e3o de uma tabela de pseudo cores din\u00e2mica (se\u00e7\u00e3o 3.4.3), proporcionando maior contraste dos pixels da amostra (Figura 4-8).\nPor ser um operador gen\u00e9rico, funcionando com qualquer tipo de imagem no formato voxel, ele pode ser usado para visualizar uma anima\u00e7\u00e3o e tornar poss\u00edvel a an\u00e1lise de todas as fatias em uma \u00fanica imagem.\nImagem\n3D\n- Montage \u2014.......\n-\tFator de\nredu\u00e7\u00e3o\n-\tOs outros\npar\u00e2metros s\u00e3o opcionais\nRelat\u00f3rio X I\nMosaico\n\t\n\t\nv-9\tu\n*\nFigura 4-8 - Modelo Esquem\u00e1tico do Operador Montage\nO fator de escalonamento implementado neste operador permite a redu\u00e7\u00e3o da imagem de sa\u00edda por valores inteiros. O valor padr\u00e3o 1, indica que as imagens s\u00e3o agrupadas sem sofrer um fator de escala, a menos que este par\u00e2metro seja alterado pelo usu\u00e1rio.\nA implementa\u00e7\u00e3o da identifica\u00e7\u00e3o das fatias \u00e9 feita a partir da numera\u00e7\u00e3o sequencial a come\u00e7ar da primeira fatia, a qual \u00e9 associado a identifica\u00e7\u00e3o de fatia 0. Esta identifica\u00e7\u00e3o \u00e9 inserida imediatamente abaixo de cada fatia, fazendo com que as identifica\u00e7\u00f5es passem a fazer parte da imagem gerada.\nAs legendas inseridas pelo operador inset, na imagem relat\u00f3rio s\u00e3o produzidas pelo operador mm_text, gerado especialmente para auxiliar no processo de converter uma string em uma imagem texto. Esta string \u00e9 inserida na imagem em regi\u00f5es previamente reservadas para a identifica\u00e7\u00e3o de cada fatia.\nOutra op\u00e7\u00e3o fornecida pelo operador montage \u00e9 a que possibilita a escolha de um subconjunto do n\u00famero total de fatias para ser apresentadas. A determina\u00e7\u00e3o deste subconjunto e feita atrav\u00e9s da determina\u00e7\u00e3o da primeira e do n\u00famero de total de fatias a serem apresentadas. A omiss\u00e3o do primeiro par\u00e2metro indica que a fatia n\u00famero 0 ser\u00e1 a primeira, e a omiss\u00e3o do segundo par\u00e2metro indica que o n\u00famero de fatias a ser apresentado \u00e9 definido pela diferen\u00e7a entre a posi\u00e7\u00e3o da \u00faltima fatia da imagem 3D e a da primeira fatia a ser apresentada.\nO operador montage, oferece a op\u00e7\u00e3o de gera\u00e7\u00e3o de uma imagem contendo o mosaico das fatias com a intensidade dos pixels representando os valores CT, o que propicia a continuidade do processamento ainda em n\u00edveis de cinza; e oferece tamb\u00e9m a op\u00e7\u00e3o da cria\u00e7\u00e3o de uma imagem relat\u00f3rio (Figura 4-9) contendo: o mosaico das fatias; uma tabela de pseudo cores evidenciando uma dada faixa de intervalo de interesse dos pixels, marcadores e legendas agregadas diretamente a imagem relat\u00f3rio de modo a facilitar as an\u00e1lises visuais das fatias. Na imagem relat\u00f3rio, apropriadas para impress\u00e3o, deixa de existir a correspond\u00eancia dos valores CT com as intensidades dos pixels. A imagem passa do modelo n\u00edveis de cinza para o RGB.\nFigura 4-9 - Exemplo de Relat\u00f3rio Produzido pelo Montage\nAtrav\u00e9s do operador supported formats o relat\u00f3rio pode ser exportado em um dos formatos suportados pelo Khoros, convertido para um outro formato, se necess\u00e1rio, atrav\u00e9s de um software alternativo, XV por exemplo, e ent\u00e3o adicionado em qualquer documento atrav\u00e9s de um editor de texto, Word\u00ae, por exemplo.\n4.4.2\tOperador Orthogonal Projection\nA abordagem adotada pelo operador orthogonal projection tem como objetivo, proporcionar a an\u00e1lise da amostra atrav\u00e9s de cortes perpendiculares, estrategicamente escolhidos pelo usu\u00e1rio (Figura 4-10), permitindo o acompanhamento longitudinal das propriedades estudadas.\nDevido ao n\u00famero de pontos do eixo Z ser proporcionalmente inferior aos eixos X e \u00a5 na maioria dos casos, para a obten\u00e7\u00e3o de imagens mais \u201ccont\u00ednuas\u201d, lan\u00e7a-se m\u00e3o de interpola\u00e7\u00f5es para a gera\u00e7\u00e3o das fatias intermedi\u00e1rias as reais. Para a gera\u00e7\u00e3o dos valores intermedi\u00e1rios das fatias reais foi utilizada interpola\u00e7\u00e3o linear.\nA interpola\u00e7\u00e3o usada na gera\u00e7\u00e3o dos dados entre as fatias reais, n\u00e3o \u00e9 um processo de alto custo, pois ela n\u00e3o \u00e9 feita para toda amostra, mas somente para a regi\u00e3o pertencente ao plano de proje\u00e7\u00e3o selecionado.\nFigura 4-10 - Modelo Esquem\u00e1tico Orthogonal Projection\nO operador orthogonal projection pode gerar um relat\u00f3rio, contendo uma tabela de pseudo cores equivalente ao operador montage, onde todas as proje\u00e7\u00f5es s\u00e3o agrupadas em uma \u00fanica imagem contendo uma legenda com informa\u00e7\u00f5es das\nposi\u00e7\u00f5es de corte. Al\u00e9m da escala de cores definida pela identifica\u00e7\u00e3o dos pontos inicial e final delimitadores do intervalo de interesse escolhido e da identifica\u00e7\u00e3o de cada um dos cortes.\n4.4.3\tTabela de Pseudo Cores Din\u00e2mica\nNesta disserta\u00e7\u00e3o, a tabela de cores e anota\u00e7\u00f5es usadas nas imagens n\u00edveis de cinza \u00e9 criada da seguinte forma. S\u00e3o usadas 256 cores no total para que o pixel armazenado seja do tipo unsigned byte. Das 256 cores, 7 s\u00e3o reservadas para anota\u00e7\u00f5es: valores de 249 \u00e0 255. As cores de 0 \u00e0 248 s\u00e3o usada para indica\u00e7\u00e3o dos valores dos pixels da imagem. Esta aloca\u00e7\u00e3o \u00e9 feita segundo as equa\u00e7\u00f5es apresentadas na se\u00e7\u00e3o 3.4.3, com o intervalo [a,b] fixado em [o, 24S]. Aos identificadores s\u00e3o atribu\u00eddas cores diferenciadas das geradas na tabela de pseudo cores aplicada a imagem, evitando a confus\u00e3o de cores e destacando as anota\u00e7\u00f5es.\nA cada um dos operadores implementados com a op\u00e7\u00e3o de gera\u00e7\u00e3o de relat\u00f3rio: montage e orthogonal projection, \u00e9 oferecida a op\u00e7\u00e3o do usu\u00e1rio visualizar uma escala de cores representativa da distribui\u00e7\u00e3o das cores segundo o intervalo de interesse selecionado. Quando esta \u00e9 apresentada juntamente com a imagem relat\u00f3rio, por conven\u00e7\u00e3o, encontra-se posicionada no canto superior direito como apresentado na Figura 4-11 pelo operador montage e na Figura 4-12 pelo operador orthogonal projection.\nFigura 4-11 - Satura\u00e7\u00e3o de \u00d3leo com Escala de Cores Gerada pelo Operador Montage\nHouve uma dificuldade no uso do segmento map, pois o intervalo de dados CT normalmente continha valores negativos que n\u00e3o podem ser representados devido a representa\u00e7\u00e3o atrav\u00e9s de vetores da linguagem C, onde os \u00edndices de cada posi\u00e7\u00e3o serviam como indexadores. Como em C n\u00e3o existe um vetor com \u00edndices negativos, este problema teve que ser contornado. Esta dificuldade \u00e9 superada atrav\u00e9s da normaliza\u00e7\u00e3o dos dados para o intervalo de 0 a 255. Esta solu\u00e7\u00e3o tem a desvantagem de perder a correspond\u00eancia da intensidades dos pixel com os valores CT dos dados quando a imagem relat\u00f3rio \u00e9 mostrada.\n4.4.4\tVisualiza\u00e7\u00e3o 3D\nAl\u00e9m destes operadores, desenvolveu-se workspaces (Figura 4-13) para a visualiza\u00e7\u00e3o 3D dos resultados atrav\u00e9s da visualiza\u00e7\u00e3o de uma iso-superf\u00edcie do objeto em perspectiva.\nPara a visualiza\u00e7\u00e3o 3D de um volume, deve-se previamente determinar qual a faixa de valores\ta\tser\tvisualizada. Como por exemplo, os\tpontos cujas\nintensidades variam de 0\ta 50.\tA escolha deste intervalo serve como\tlimiar para a\nbinariza\u00e7\u00e3o do volume, onde estar no intervalo significa que o ponto deve ser considerado pelo processo\tde\tvisualiza\u00e7\u00e3o, enquanto que estar fora\tdo intervalo\nespecificado significa que\to\tponto deve ser descartado do processo de\tvisualiza\u00e7\u00e3o.\nDesta forma, a escolha deste limiar \u00e9 um fator decisivo no para o sucesso da imagem final apresentar as informa\u00e7\u00f5es desejadas.\nFigura 4-13 - Workspace da Visualiza\u00e7\u00e3o 3D\nGerou-se imagens renderizadas 3D (Figura 4-14), produzidas com a ajuda da toolbox V3Dtools, o qual permitiu a visualiza\u00e7\u00e3o tridimensional da amostra a partir do conjunto de fatias interpoladas do volume original.\nA opera\u00e7\u00e3o de gera\u00e7\u00e3o das fatias intermedi\u00e1rias interpoladas \u00e9 feita atrav\u00e9s da utiliza\u00e7\u00e3o do operador Interp\u00f3late, que atrav\u00e9s de interpola\u00e7\u00f5es lineares gera um novo conjunto de fatias. A gera\u00e7\u00e3o destas fatias intermedi\u00e1rias (cerca de 10 fatias interpoladas a cada duas fatias reais adjacentes) faz com que haja uma passagem \u201csuave\u201d de uma fatia para a outra, fazendo com que a impress\u00e3o de continuidade da amostra fique mais evidente.\nFigura 4-14 - Modelo Esquem\u00e1tico Visualiza\u00e7\u00e3o 3D\n4.4.5\tVisualiza\u00e7\u00e3o Din\u00e2mica dos Dados\nUtilizando os recursos disponibilizados pelo operador an\u00edmate consegue-se visualizar o comportamento din\u00e2mico da amostra. V\u00e1rias situa\u00e7\u00f5es podem ser analisadas em rela\u00e7\u00e3o as anima\u00e7\u00f5es geradas. A frente se propagando pela amostra vista atrav\u00e9s do encadeamento das proje\u00e7\u00f5es ortogonais, a frente das reconstru\u00e7\u00f5es 3D e das pr\u00f3prias fatias da amostra, em diferentes tempos. Na Figura 4-15, observa-se a sobreposi\u00e7\u00e3o de tr\u00eas instantes de amostragem, proporcionando uma id\u00e9ia do processo de anima\u00e7\u00e3o. Este tipo de visualiza\u00e7\u00e3o permite o acompanhamento da frente de \u00e1gua se propagando pela amostra em diferentes instantes.\nO operador an\u00edmate pertence ao conjunto de toolboxes padr\u00f5es do Khoros e possui a fun\u00e7\u00e3o de apresentar um volume no formato voxel como um filme, onde as imagens formam a seq\u00fc\u00eancia de movimento e durante a apresenta\u00e7\u00e3o estas s\u00e3o comutadas de forma sequencial. Ou seja, a primeira fatia \u00e9 apresentada e ap\u00f3s um dado intervalo de tempo esta \u00e9 substitu\u00edda pela pr\u00f3xima, e assim continua o processo, at\u00e9 que a \u00faltima fatia seja apresentada e o processo se reinicie.\nFigura 4-15 - Anima\u00e7\u00e3o Vista Atrav\u00e9s da Sobreposi\u00e7\u00e3o de Imagens\n4.5\tVisualiza\u00e7\u00e3o Anal\u00edtica\nA grande potencialidade das ferramentas desenvolvidas est\u00e1 na flexibilidade na obten\u00e7\u00e3o das imagens e das estat\u00edsticas dos resultados, permitindo ao t\u00e9cnico uma an\u00e1lise bastante detalhada do processo. Como ilustra\u00e7\u00e3o \u00e9 apresentado na Figura 4-16 os perfis m\u00e9dios de satura\u00e7\u00e3o de \u00e1gua em 8 tempos diferentes de uma amostra de rocha saturada com \u00f3leo submetida a um teste inje\u00e7\u00e3o de \u00e1gua. Nesta an\u00e1lise foi usado basicamente o operador Statistics, selecionado para calcular a satura\u00e7\u00e3o m\u00e9dia em cada fatia. Os resultados obtidos podem ser visualizados atrav\u00e9s do operador Plot2D do Khoros ou exportado para o ambiente Microsoft Windows e visualizado pelo software Excel \u00ae. A exporta\u00e7\u00e3o dos resultados para o Microsoft Windows \u00e9 feita em formato AS CU, pelo operador supported formats e importado pelo Excel \u00ae. Desvio padr\u00e3o, moda, m\u00e1ximo, m\u00ednimo, etc. s\u00e3o algumas das outras medidas oferecidas pelo operador Statistics.\n90\nComprimento (cm)\nEstado inicial\nCorrida 2\nCorrida 4\n\u2014 Corrida 6\nCorrida 1\nCorrida 3\nCorrida 5\nEstado Finai\nFigura 4-16 - Satura\u00e7\u00e3o M\u00e9dia de \u00f3leo em 8 Diferentes Instantes de Tempo\nAo aplicar uma opera\u00e7\u00e3o estat\u00edstica a uma imagem, evidencia-se a grande import\u00e2ncia da m\u00e1scara gerada pelo operador Normalized Crop. Com a m\u00e1scara, pontos fora da regi\u00e3o de interesse foram descartados e n\u00e3o influ\u00edram nos resultados estat\u00edsticos calculados. A aus\u00eancia da m\u00e1scara faria com que todos os pontos da imagem, inclusive os que n\u00e3o pertenciam a regi\u00e3o de interesse, colaborassem com o resultado. A seguir apresentamos a mesma imagem (Figura 4-17) submetida ao c\u00e1lculo da m\u00e9dia estat\u00edstica. A esquerda, encontra-se a imagem com m\u00e1scara e na direita a imagem sem m\u00e1scara.\nFigura 4-17 - M\u00e9dia de uma Imagem Com M\u00e1scara (Esquerda) e Sem M\u00e1scara (Direita)\n5.\tResultados\nConclu\u00edda as fases de apresenta\u00e7\u00e3o das metodologias, da defini\u00e7\u00e3o e da implementa\u00e7\u00e3o da solu\u00e7\u00e3o, s\u00e3o apresentados alguns resultados obtidos com o aux\u00edlio destas ferramentas desenvolvidas.\nPara melhor compreens\u00e3o do leitor, parte-se da fase em que a imagem do exame est\u00e1 no formato KDF do Khoros, mas ainda n\u00e3o sofreu nenhum tipo de pr\u00e9-processamento. Isto \u00e9, admite-se que o operador tape-in tenha sido aplicado as fatias gravadas em fita e que o volume tenha sido reconstru\u00eddo e convertido para o formato KDF.\n\u2022 Leitura da Fita\nOs volumes possuem inicialmente as seguintes caracter\u00edsticas:\nAtributo\tValor\nwidth\t512 pixels\nheight\t512 pixels\ndepth\t14 fatias\ntamanho\t7MB\nm\u00e1scara\tn\u00e3o\nintensidade dos pixels\tValores CT 16 bits\nComo ilustra\u00e7\u00e3o, apresenta-se a Figura 5-1 que representa a primeira fatia de um volume de uma amostra saturada de \u00f3leo submetida a inje\u00e7\u00e3o de \u00e1gua, recuperada a partir de uma fita DAT de 4mm gerada pelo tom\u00f3grafo Helicoidal High Speed da GE. A Figura 5-2 apresenta o volume com o aux\u00edlio do operador montage escalonando as fatias para metade do seu tamanho real, ou seja, cada fatia \u00e9 reduzida a dimens\u00e3o de 128 x 128. Nesta imagem n\u00e3o foi associada nenhuma tabela de pseudo cores. Os outros volumes necess\u00e1rios nos c\u00e1lculos das propriedade desejadas, sofrem o mesmo processo de aquisi\u00e7\u00e3o\nFigura 5-2 - Volume da Figura 5-1 Visualizado pelo Operador Montage sem Tabela de Pseudo Cores\n\u2022 Pr\u00e9-processamento\nA cada um dos volumes envolvidos nos c\u00e1lculos deve-se aplicar o operador Normalized Crop de modo a fazer o pr\u00e9-processamento. A seguir a Figura 5-3 apresenta a primeira fatia do resultado da aplica\u00e7\u00e3o do operador Nonnalized Crop ao volume saturado de \u00f3leo submetido a inje\u00e7\u00e3o de \u00f3leo mostrado na Figura 5-1. A Figura 5-4, apresenta a mesma amostra visualizada pelo operador orthogonal projection com a tabela de cores definida para atuar no intervalo de min = 1600 \u00e0 max = 2050 e como os cortes com X = 128, F= 128e Z = 4. Neste exemplo, usa-se como limiares para a determina\u00e7\u00e3o do ret\u00e2ngulo de interesse os limiares m\u00ednimo igual a 300 e m\u00e1ximo igual a 3000, ou seja, a = 300 e b - 3000. As dimens\u00f5es finais de cada fatia de sa\u00edda s\u00e3o de 256x256, ou seja, M-N-256. E a imagem resultante cont\u00e9m uma m\u00e1scara para os pontos com intensidades externas ao intervalo [a,h], preservando os pixels deste intervalo com seus valores em CT.\nFigura 5-3 - Operador Normalized Crop Aplicado ao Volume Representado na Figura 5-1\n2283\n2050\n1600\nFigura 5-4 - Operador Orthogonal Projection Aplicado ao Volume Anterior, X-128. Y=128 e Z~4; min=1600 e max=20i\nNa imagem relat\u00f3rio tamb\u00e9m pode ser observado os limites inferior e superior globais da imagem, apresentados nos dois extremos da escala de cores.\nAp\u00f3s efetuada a opera\u00e7\u00e3o normalized crop, os volumes passam a ter as seguintes caracter\u00edsticas:\nAtributo\tValor\nwidth\t256 pixels\nheight\t256 pixels\ndepth\t14 fatias\ntamanho\t3.5MB\nm\u00e1scara\tsim\nintensidade dos pixels\tvalores CT 16 bits\n\u2022 Processamento\nAtrav\u00e9s de workspaces gerados por uma combina\u00e7\u00e3o de operadores aritm\u00e9ticos do Khoros s\u00e3o aplicadas as f\u00f3rmulas apresentadas na se\u00e7\u00e3o 2.1 aos volumes resultantes da opera\u00e7\u00e3o Normalized Crop, obtendo-se as imagens representativas aos c\u00e1lculos da porosidade (Figura 5-5) e da satura\u00e7\u00e3o de \u00f3leo (Figura 5-6) da amostra. Nestas imagens, as intensidades de pixel deixam de ser valores CT e\npassam a representar a porcentagem de porosidade ou de satura\u00e7\u00e3o associada ao respectivo ponto.\nFigura 5-5 - Porosidade Referente a Primeira Fatia da Amostra\nFigura 5-6 - Satura\u00e7\u00e3o de \u00d3leo Referente a Primeira Fatia da Amostra\nDesta forma os volumes relativos a porosidade e a satura\u00e7\u00e3o possuem as seguintes caracter\u00edsticas:\nAtributo\tValor\nwidth\t256 pixels\nheight\t256 pixels\ndepth\t14 fatias\ntamanho\t3.5MB\nm\u00e1scara\tsim\nintensidade dos pixels\tValores em porcentagem 16 bits\n\u2022 Visualiza\u00e7\u00e3o\nConclu\u00edda a fase de processamento, inicia-se a fase de visualiza\u00e7\u00e3o e de an\u00e1lise dos resultados. Abordando a etapa de visualiza\u00e7\u00e3o, observa-se que os operadores de visualiza\u00e7\u00e3o montage e orthogonal projection apresentam de forma eficiente qualquer imagem no formato voxel independentemente da etapa do processo, como visto nas Figura 5-2 e Figura 5-4.\nA seguir na Figura 5-7 s\u00e3o apresentados os perfis de porosidade da amostra, segundo o operador montage em sua configura\u00e7\u00e3o padr\u00e3o e com um fator de redu\u00e7\u00e3o de 50% do tamanho das fatias apresentadas. Na Figura 5-8 s\u00e3o apresentados os perfis de porosidade segundo o operador orthogonal projection com os cortes posicionados em: X=128, \u00a5=128 e Z=0. Ambos operadores ajustados para apresenta\u00e7\u00e3o dos resultados segundo os valores gerados pela tabela de pseudo cores ajustada ao intervalo de intensidades onde min = 0 e max - 30.\nFigura 5-7 - Porosidade Visualizada pelo Operador Montage com Redu\u00e7\u00e3o de 50% das Dimens\u00f5es de cada Fatia com\nTabela de Pseudo Cores Aplicada ao Intervalo [0,30]\nFigura 5-8 - Proje\u00e7\u00e3o Ortogonal da Porosidade, com Cortes nos Planos X=128, \u00a5=128, Z=0 e Tabela de Pseudo Cores Aplicada ao Intervalo [0,30]\nDe modo an\u00e1logo, na Figura 5-9 s\u00e3o apresentados os perfis de satura\u00e7\u00e3o da amostra, segundo o operador montage em sua configura\u00e7\u00e3o padr\u00e3o, com um fator de redu\u00e7\u00e3o para 1/3 do tamanho das fatias e com a apresenta\u00e7\u00e3o configurada para 5 fatias por linha. Na Figura 5-10 s\u00e3o apresentados os perfis de satura\u00e7\u00e3o segundo o operador orthogonal projection com os cortes posicionados em: X=200, \u00a5=30 e Z=8. Ambos operadores ajustados para apresenta\u00e7\u00e3o dos resultados segundo os valores gerados pela tabela de pseudo cores ajustada ao intervalo de intensidades de min = 0 a max~lQ0. Em complemento apresenta-se na Figura 5-11 o resultado obtido pelo workspace respons\u00e1vel pela visualiza\u00e7\u00e3o 3D onde pode ser observada a iso-superf\u00edcie a qual a satura\u00e7\u00e3o de \u00f3leo \u00e9 inferior a 50%, com 10 fatias interpoladas entre cada duas fatias reais.\nFigura 5-9 - Satura\u00e7\u00e3o Visualizada pelo Operador Montage, com Redu\u00e7\u00e3o de 33% das Dimens\u00f5es de cada Fatia, com\nFatias por Linha da Imagem com Tabela de Pseudo Cores Aplicada ao Intervalo [0,100]\nFigura 5-10 - Proje\u00e7\u00e3o Ortogonal da Satura\u00e7\u00e3o, com Cortes nos Planos X=200, Y=30, Z=8 e Tabela de Pseudo Cores Aplicada ao Intervalo [0,100]\n\nFigura 5-11 - Visualiza\u00e7\u00e3o 3D da Satura\u00e7\u00e3o Evidenciando as Regi\u00f5es Cuja Satura\u00e7\u00e3o \u00e9 Interior a 50%\nComutando o conjunto temporalmente ordenado de visualiza\u00e7\u00f5es 3D gerados para os diferentes instantes de aquisi\u00e7\u00e3o, \u00e9 poss\u00edvel gerar uma anima\u00e7\u00e3o tornando poss\u00edvel o acompanhamento da frente no decorrer do tempo. Para a visualiza\u00e7\u00e3o desta anima\u00e7\u00e3o nesta disserta\u00e7\u00e3o \u00e9 utilizado na Figura 5-12 a t\u00e9cnica de sobreposi\u00e7\u00e3o de imagens onde \u00e9 visualizada a propaga\u00e7\u00e3o da frente de \u00e1gua no decorrer do tempo. As corridas observadas s\u00e3o as de n\u00famero 1, 2 e 3.\nFigura 5-12 - Sobreposi\u00e7\u00e3o de Tr\u00eas Diferentes Instantes Visualizados pela T\u00e9cnica Visualiza\u00e7\u00e3o 3D com Satura\u00e7\u00e3o Inferior a 50%\n\u2022 Visualiza\u00e7\u00e3o Anal\u00edtica\nA seguir, na Figura 5-13, \u00e9 apresentado o gr\u00e1fico representativo da porosidade m\u00e9dia calculada para cada fatia da amostra, que possui 40cm. Como os cortes tomogr\u00e1ficos s\u00e3o efetuados a cada cent\u00edmetro, chega-se a um total de 40 valores m\u00e9dios para a porosidade.\nFigura 5-13 - Porosidade M\u00e9dia da Amostra a Cada Fatia\nA seguir, na Figura 5-14 \u00e9 mostrado a satura\u00e7\u00e3o m\u00e9dia de \u00e1gua em 6 diferentes instantes de tempo, al\u00e9m dos instantes inicia] e final. O instante tomado como exemplo para as imagens anteriores deste cap\u00edtulo s\u00e3o referentes \u00e0 corrida 2 do gr\u00e1fico. As discrep\u00e2ncias observadas ao final do gr\u00e1fico, na \u00faltima fatia, est\u00e3o relacionadas aos efeitos produzidos pelo difusor incorporado a amostra para o melhor espalhamento dos fluidos pela amostra.\n100\n90 -\n80 -\n10 -\nComprimento (cm)\n\n20 \u201d\u201d\nEstado Iniciai\nCorrida 2\nCorrida 4\nCorrida 6\nCorrida 1\nCorrida 3\nCorrida 5\nEstado Final\nFigura 5-14 - Satura\u00e7\u00e3o M\u00e9dia de \u00d3leo em 8 Diferentes Instantes de Tempo na Amostra Anterior\n6.\tConclus\u00f5es\nCom a cria\u00e7\u00e3o de uma nova toolbox, contendo novos operadores otimizados para a manipula\u00e7\u00e3o de imagens tomogr\u00e1f\u00edcas, resolveu-se o problema do c\u00e1lculo e da visualiza\u00e7\u00e3o da porosidade e da satura\u00e7\u00e3o de meios porosos amostrados por tomografia, usando o ambiente Khoros. Al\u00e9m disso, tornou-se poss\u00edvel o estudo do comportamento est\u00e1tico (porosidade) e din\u00e2mico (satura\u00e7\u00e3o) no interior das amostras, sem que estas fossem destru\u00eddas durante o processo.\nAtrav\u00e9s das facilidades da plataforma de desenvolvimento do software Khoros e da biblioteca de fun\u00e7\u00f5es MMachLib, foram desenvolvidas rotinas eficientes, que manipulam grandes amostras de dados 3D, expandindo o n\u00famero de operadores para dados tridimensionais disponibilizados pelos dois softwares.\nA leitura de fita em conjunto com a convers\u00e3o autom\u00e1tica de um arquivo vindo de um tom\u00f3grafo para o formato Khoros, facilita e agiliza as opera\u00e7\u00f5es de recupera\u00e7\u00e3o das imagens em seu estado bruto, tornando-as dispon\u00edveis para o processamento. A reconstru\u00e7\u00e3o do volume permite que os dados sejam processados e visualizados volum\u00e9tricamente, diminuindo o tempo de processamento e aumentando os recursos visuais do usu\u00e1rio, que pode analisar os dados como informa\u00e7\u00f5es 3D (volum\u00e9tricas) ou 2D (fatia a fatia).\nOs recursos de pr\u00e9-processamento, tais como a extra\u00e7\u00e3o autom\u00e1tica da regi\u00e3o de interesse, que cont\u00e9m os pontos dentro de um intervalo espec\u00edfico de valores; o alinhamento das fatias e a normaliza\u00e7\u00e3o espacial do volume; se encontram dispon\u00edveis no operador normalized crop. Este \u00e9 respons\u00e1vel por preparar a imagem \u201cbruta\u201d vinda do tom\u00f3grafo, de modo que ela possa ser operada conjuntamente a outras, sem que ocorram problemas como os de dimensionamento ou alinhamento incompat\u00edveis. Al\u00e9m disso, geometrias irregulares (n\u00e3o retangulares) s\u00e3o tratadas com o recurso de m\u00e1scara, de modo que pontos inclu\u00eddos a imagem para que esta se transforme em uma imagem retangular, n\u00e3o participem das opera\u00e7\u00f5es as quais ela for submetida.\nConclus\u00f5es\nAl\u00e9m disso, foram adicionadas duas novas formas de visualiza\u00e7\u00e3o de dados tridimensionais atrav\u00e9s dos operadores: montage que proporciona a visualiza\u00e7\u00e3o global de todas as fatias da amostra em uma \u00fanica imagem e orthogonal projection que visualiza o volume atrav\u00e9s de cortes perpendiculares, possibilitando a visualiza\u00e7\u00e3o longitudinal de um dado plano de corte selecionado. A ambas fun\u00e7\u00f5es de visualiza\u00e7\u00e3o, est\u00e1 agregado o recurso de gera\u00e7\u00e3o de relat\u00f3rios voltados a impress\u00e3o, o qual apresentam de forma destacada as regi\u00f5es selecionadas. Este destaque \u00e9 conseguido atrav\u00e9s da associa\u00e7\u00e3o de uma tabela de pseudo cores din\u00e2mica que valoriza o intervalo de intensidade selecionado, aumentando o contraste dos pontos de interesse e \u201cocultando\u201d os de n\u00e3o interesse.\nOutras ferramentas implementadas foram usadas para gerar um relat\u00f3rio de an\u00e1lise di\u00e1rio para ser usado pelos geologistas. Isto requereu a capacidade de desenhar texto e linhas para serem usadas como anota\u00e7\u00f5es na imagem. Estas ferramentas adicionais tamb\u00e9m est\u00e3o dispon\u00edveis aos usu\u00e1rios, podendo ser usadas em outros projetos. Al\u00e9m disso, a interpola\u00e7\u00e3o linear das fatias, efetuada pelo operador interp\u00f3late^ faz com que os cortes apresentados pelo operador orthogonal projection e a iso-superf\u00edcie apresentada como resultado do workspace de visualiza\u00e7\u00e3o 3D, tenham uma apar\u00eancia de continuidade.\nEsta aplica\u00e7\u00e3o de calcular as propriedade porosidade e satura\u00e7\u00e3o, requereu o uso das v\u00e1rias facilidades oferecidas pelo modelo polim\u00f3rfico do Khoros. O segmento valu\u00e9 usado para representar dados 4D (volume e tempo); o segmento mask foi usado para adequar o modelo retangular de representa\u00e7\u00e3o das imagens, \u00e0 amostra cujos cortes analisados foram circulares, evitando resultados err\u00f4neos quando efetuadas opera\u00e7\u00f5es estat\u00edsticas. O segmento location foi usado para facilitar o entendimento do geologistas da real dimens\u00e3o do dados sob an\u00e1lise, mapeando as coordenadas discretas da imagens com as coordenadas do mundo real. Finalmente, o segmento map foi amplamente usado para armazenar as informa\u00e7\u00f5es referentes a tabelas de cores falsas, associadas aos relat\u00f3rios produzidos pelos operadores montage e orthogonal projection.\nV\u00e1rios workspaces desenvolvidos dentro do ambiente de programa\u00e7\u00e3o gr\u00e1fica do cantata possibilitam a determina\u00e7\u00e3o das propriedades est\u00e1ticas e din\u00e2micas relatadas nos estudos de din\u00e2mica de fluidos em meios porosos. O c\u00e1lculo e a visualiza\u00e7\u00e3o da din\u00e2mica do comportamento da frente de \u00e1gua dentro da amostra de rocha foram intensivamente utilizados para o melhor entendimento do fen\u00f4meno de fluxo sob analise.\nEntre as sugest\u00f5es para continuidade deste projeto est\u00e3o o reconhecimento de outros modelos de tom\u00f3grafo permitindo a leitura de imagens de outros modelos e marcas de tom\u00f3grafo; a inclus\u00e3o da rotina de alinhamento das fatias da amostra de forma que por menor que seja o erro provocado pelo falta de alinhamento seja corrigido antes de qualquer processamento; o desenvolvimento de\nConclus\u00f5es\nnovas t\u00e9cnicas de visualiza\u00e7\u00e3o 3D; a cria\u00e7\u00e3o de novas tabelas de pseudo cores din\u00e2micas que proporcionem a visualiza\u00e7\u00e3o privilegiada de regi\u00f5es de interesse; e a implementa\u00e7\u00e3o de outros algoritmos de interpola\u00e7\u00e3o das fatias tais como os algoritmos de interpola\u00e7\u00e3o por splines.\n7.\tRefer\u00eancias Bibliogr\u00e1ficas\n[AmBa60]\tAMYX, James W. - BASS Jr., Daniel M. - WHITING, Robert L. \u201cPetroleum reservoir engineering - physical properties\u201d Me Graw-Hill Book Company - 1960\n[BBLH97]\tBARRERA, Junior - BANON, Gerald J. F. - LOTUFO, Roberto A. ~ HIRATA, Roberto Jr. \u201cMMach: A Mathematical Morphology Toolbox for the KHOROS System\u201d -submitted, 1997\n[DoLe91]\tDOB IE, M.R. - LEWIS, P. H. \u201cData structures for image processing in C\u201d, Pattern Recognition Letters 12 - pp.457-466- 1991\n[Falc93]\tFALC\u00c3O, Alexandre Xavier - \u201cVisualiza\u00e7\u00e3o de volume aplicada \u00e0 \u00e1rea m\u00e9dica\u201d Tese de Mestrado em Engenharia El\u00e9trica; Faculdade de Engenharia El\u00e9trica - DCA - Unicamp, 1993\n[Gome97]\tGOMES, Jos\u00e9 Adilson Ten\u00f3rio.: \u201cCaracteriza\u00e7\u00e3o da permeabilidade relativa e geometria de fluxo em deslocamentos imisc\u00edveis inst\u00e1veis\u201d - Tese de doutorado (em andamento) em Engenharia de Petr\u00f3leo: Faculdade de Engenharia Mec\u00e2nica - Cepetro - Unicamp, 1997\n[Holl93]\tHOLLEBEN, C.R.: \u201cDetermina\u00e7\u00e3o de porosidade e satura\u00e7\u00e3o de fluidos atrav\u00e9s da tomografia computadorizada de Raio-X\u201d - Tese de mestrado em Engenharia de Petr\u00f3leo; Faculdade de Engenharia Mec\u00e2nica - Cepetro - Unicamp, 1993\n[Khor91]\tKHOROS GROUP, \u201cKhoros Manual\u201d - USA, Department of Electrical and Computer Engineering, University of New Mexico, 1991\n[KLHL95]\n[Lupp94]\n[Shap79]\n[Silv94]\n[SLG97]\n[V3DT93]\nKOHL, Charles A. - LERNER, Richard A. - HOUGH, Alfred A. -LOUISELLE, Cynthia L. - DOLAN, John - FRIEDMAN, Michael B. - ROUBENTCHIK, Mark \u201cA stellar application of the IUE: solar feature extraction\u201d Amerinex Artificial Intelligence, Inc. - 409 Main Street -Amherst, MA 01002- 1995\nLuppi, Renato M. S. ~ \u201cConjunto de operadores b\u00e1sicos para a visualiza\u00e7\u00e3o, manipula\u00e7\u00e3o e an\u00e1lise de dados 3D\u201d - Tese de Mestrado em Engenharia El\u00e9trica; Faculdade de Engenharia El\u00e9trica - DCA - Unicamp, 1994\nSHAPIRO, Linda G. \u201cData structures for picture processing: a survey\u201d - Computer Graphics and Image Processing 11, pp. 162-184, 1979\nSILVA, Arlindo da Costa e: \u201cAn\u00e1lise de reprodutibilidade de digita\u00e7\u00f5es viscosas em meios porosos naturais consolidados\u201d - Tese de mestrado em Engenharia de Petr\u00f3leo; Faculdade de Engenharia Mec\u00e2nica - Cepetro -Unicamp, 1994\nSILVA, Wellington D. E; LOTUFO, Roberto A. &amp; GOMES, Jos\u00e9 A. T. - \u201cAnalysis of oil-water flow in porous media from CT data\u201d - Khoros Symposium \u201997 Proceedings, Khoral Research, Inc. ~ pp. 26-40, 1997\nV3DTOOLS TOOLBOX, \u201cHelp on Line\u201d, Departamento de Engenharia. Computa\u00e7\u00e3o e Automa\u00e7\u00e3o Industrial, Universidade de Campinas, UNICAMP - 1993, Brasil"}]}}}