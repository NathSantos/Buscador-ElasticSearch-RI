{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.08145"}, {"@name": "filename", "#text": "12934_255200.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "DAYSON ROBERTO WALDSCHMIDT\nDesenvolvimento de um Medidor de Fra\u00e7\u00e3o de Agua Utilizando Tecnologia de Microondas\nFlorian\u00f3polis, fevereiro de 2008.\nUNIVERSIDADE FEDERAL DE SANTA CATARINA\nCURSO DE pOS-GRADUACAO\nEM ENGENHARIA ELEtRICA\nDesenvolvimento de um Medidor de Fra\u00e7\u00e3o de Agua Utilizando Tecnologia de Microondas\nDisserta\u00e7\u00e3o submetida \u00e0\nUniversidade Federal de Santa Catarina como parte dos requisitos para a obten\u00e7\u00e3o do grau de Mestre em Engenharia El\u00e9trica.\nDayson Roberto Waldschmidt\nFlorian\u00e9polis, fevereiro de 2008.\nDesenvolvimento de um Medidor de\nz\nFra\u00e7\u00e3o de Agua Utilizando Tecnologia de Microondas\nDayson Roberto Waldschmidt\n\u2018Esta Disserta\u00e7\u00e3o foi julgada adequada para a obten\u00e7\u00e3o do t\u00edtulo de Mestre em Engenharia El\u00e9trica, Area de Concentra\u00e7ao em Automa\u00e7\u00e3o e Sistemas, e aprovada em sua forma final pelo Programa de P\u00e9s-Gradua\u00e7\u00e3o em Engenharia El\u00e9trica da Universidade Federal de Santa Catarina.\u2019 Florian\u00f3polis, 29 de fevereiro de 2008.\nProf. Daniel Juan Pagano, Dr.\nOrientador\nProfa. K\u00e1tia Campos de Almeida\nCoordenador do Programa de P\u00e1s-Gradua\u00e7\u00e3o em Engenharia Eletrica\nBanca Examinadora:\nProf. Daniel Juan Pagano, Dr. Presidente\nProf. Walter Pereira Carpes Junior, Dr.Eng.\nProf. Nestor Roqueiro, D.Sc.\nEng. Jose Maria Mascheroni, Msc.\nAo meu pai\nA GRADECIMENTOS\nPrimeiramente gostaria de agradecer \u00e0 minha fam\u00edlia - Dona Cirlay, seu Manfred (in memoriam), Darlene e Delany (in memoriam) - que me ensinou o valor da educa\u00e7\u00e3o na formac\u00e3o do indiv\u00edduo, a recompensa oriunda do comprometimento e da dedicac\u00e3o e, acima de tudo, a estima e admira\u00e7\u00e3o pelo esmero.\nAgrade\u00e7o tamb\u00e9m a minha companheira, namorada e amiga Mel, pelo apoio incondicional e inspira\u00e7ao em todos os momentos, alegres e dif\u00edceis. Sem o seu apoio nada disso seria poss\u00edvel.\nMeu agradecimento n\u00e3ao menos especial ao meu orientador, Daniel Pagano, pela confianca em mim depositada e pela oportunidade de realizar o presente trabalho. Agrade\u00e7o tamb\u00e9m aos professores Nestor Roquero e Julio E. N. Rico pelo apoio durante a realizac\u00e7a\u00e3o do trabalho.\nAgrade\u00e7o aos colegas Augustinho Pluc\u00eanio, Ramiro Saraiva, Guilherme Mafra e Francisco Rafael pelo apoio t\u00edecnico, amizade e suporte durante a realizac\u00e7\u00e3ao do trabalho.\nPor ultimo, agrade\u00e7o a ANP (Ag\u00eancia Nacional de Petr\u00f3leo e G\u00e9s Natural) pelo suporte financeiro, sem o qual este trabalho n\u00e3o teria sido poss\u00edvel, e ao PGEEL pela paci\u00eancia e compreens\u00e3ao.\nResumo da Disserta\u00e7\u00e3o apresentada \u00e0 UFSC como parte dos requisitos necess\u00e1rios para obten\u00e7ao do grau de Mestre em Engenharia Eletrica.\nDesenvolvimento de um Medidor de ______\tz\nFra\u00e7\u00e3o de Agua Utilizando Tecnologia de Microondas\nDayson Roberto Waldschmidt\nFevereiro/2008.\nOrientador Area de Concentra\u00e7\u00e3o Palavras-chave\tProf. Daniel Juan Pagano, Dr. Automa\u00e7\u00e3o e Sistemas Medidores de Fracao de Agua, Medidores Multifasicos Processamento de Microondas, Sistemas Embarcados, Propriedades Dieletricas dos Materiais, Instrumentac\u00e3o, Medi\u00e7\u00e3o N\u00e3o-Intrusiva, Petr\u00f3leo.\nNumero de Paginas\t131\nEste trabalho explora o tema da utiliza\u00e7\u00e3o da tecnologia de microondas na medi\u00e7\u00e3o da fra\u00e7\u00e3o de agua em escoamentos multifasicos, para aplica\u00e7\u00f5es na industria de petr\u00f3leo e gas natural.\nFoi proposto e implementado um sistema de instrumentac\u00e3o nao-intrusivo baseado na tecnologia de microondas, utilizando sensores de transmiss\u00e3ao.\nForam realizados testes estaticos para a avalia\u00e7c\u00e3ao da viabilidade de diversas tecnicas de medi\u00e7ca\u00e3o, baseadas em sensores de transmiss\u00e3ao, e do sistema de instrumentac\u00e7\u00e3ao desenvolvido para a medi\u00e7ca\u00e3o da fra\u00e7c\u00e3ao de agua numa mistura bifasica de agua e oleo.\nAbstract of Dissertation presented to UFSC as a partial fulfillment of the requirements for the degree of Master in Electrical Engineering.\nDevelopment of a Microwave Water-Cut Meter\nDayson Roberto Waldschmidt\nFebruary/2008.\nAdvisor\nArea of Concentration\nKey words\nNumber of Pages\nProf. Daniel Juan Pagano, Dr.\nAutomation and Systems\nWater Cut Meters, Multiphase Metering,\nMicrowaves Electronics, Embedded Systems,\nDielectric Properties of Materials,\nInstrumentation, Non Intrusive Measurements, Petroleum. 131\nThe aim of this work is to explore the use of microwave technology for measuring the water cut content in a multiphase flow for application in oil industry.\nA non-intrusive instrumentation system, based on microwave technology and using transmission sensors, was proposed and implemented.\nStatic tests were carried out in order to verify the viability of several measuring techniques based on microwave transmission sensors, and also the viability of the developed instrumentation system for measuring the water cut in a biphasic oil-water mixture.\nSum\u00e1rio\n1\tIntrodu\u00e7\u00e3o\t1\n1.1\tContextualiza\u00e7\u00e3o do Problema....................................... 1\n1.2\tT\u00e9cnicas e M\u00e9todos de Medi\u00e7\u00e3o...................................... 4\n1.2.1\tPar\u00e2metros de Escoamento..................................... 6\n1.2.2\tFra\u00e7\u00e3es Volum\u00e9tricas......................................... 7\n1.2.3\tTipo do Escoamento........................................... 8\n1.2.4\tPropriedades da mistura .................................... 12\n1.3\tMedi\u00e7c\u00e3ao utilizando microondas .................................. 13\n1.4\tAplica\u00e7\u00e3es de Sensores de Microondas na IndUstria de Petr\u00f3leo e G\u00f3s .\t14\n1.5\tObjetivos ........................................................ 15\n1.6\tOrganiza\u00e7ca\u00e3o da Disserta\u00e7c\u00e3ao\t................................ 16\n2\tFundamentos Te\u00f3ricos\t18\n2.1\tOndas Eletromagn\u00e9ticas............................................ 18\n2.2\tPropaga\u00e7\u00e3o das Ondas Eletromagn\u00e9ticas............................. 20\n2.3\tIntera\u00e7\u00e3o das Microondas com os Materiais......................... 21\n2.4\tPropriedades Diel\u00e9tricas dos\tMateriais ........................... 22\n2.4.1\tPropriedades Diel\u00e9etricas da A\u00e9 gua ........................ 23\n2.5\tGerac\u00e3o, Transmissao e Processamento de Sinais de Microondas ....\t26\n2.5.1\tPara\u00e2metros de Sistemas de Microondas ...................... 27\n2.5.2\tComponentes de um Sistema de Microondas..................... 29\n2.6\tTipos de Medidores de Microondas.................................. 36\n2.6.1\tSensores de Transmiss\u00e3o..................................... 36\n2.6.2\tSensores de Resson\u00e2ncia..................................... 39\n2.6.3\tSensores de Reflex\u00e3o........................................ 41\n2.6.4\tSensores Radiom\u00e9tricos...................................... 45\n2.6.5\tSensores Tomogr\u00e9ficos....................................... 46\n2.7\tConclus\u00f5es......................................................... 47\n3\tSistema Experimental Desenvolvido\t48\n3.1\tSistema\tde Gerac\u00f5o e Processamento\tde\tMicroondas.................. 49\n3.2\tSistema\tDigital de Controle e Aquisi\u00e7\u00f5o\tde Dados.................. 53\n3.2.1\tCaracter\u00edsticas\tdo\tHardware................................. 54\n3.2.2\tCaracter\u00edsticas\tdo\tFirmware................................. 56\n3.3\tSistema\tEmbarcado de Comunicac\u00f5o.................................. 60\n3.3.1\tProtocolo de Comunica\u00e7\u00f5o.................................... 60\n3.3.2\tCaracter\u00edsticas\tdo\tHardware................................. 62\n3.3.3\tCaracter\u00edsticas\tdo\tFirmware................................. 64\n3.4\tSistema Computacional do Concentrador de Dados..................... 69\n3.5\tSistema de Interface com Usu\u00e9rio................................... 72\n3.6\tSistema de Alimenta\u00e7\u00f5o DC.......................................... 78\n3.7\tSistema de Suporte aos Ensaios..................................... 80\n3.8\tSistema de Medic\u00f5es Auxiliares..................................... 83\n3.9\tConclus\u00f5es......................................................... 83\n4\tResultados\tExperimentais\t85\n4.1\tDescri\u00e7\u00f5o de um Ensaio ............................................ 85\n4.2\tEnsaios Realizados................................................. 86\n4.3\tCurvas Obtidas..................................................... 88\n4.3.1\tConfigura\u00e7\u00f5o 1 ............................................. 88\n4.3.2\tConfigura\u00e7\u00f5o 2 ............................................. 92\n5\tConclus\u00f5es\t96\n5.1\tPend\u00eancias de Implementa\u00e7\u00e3o..................................... 99\n5.2\tLimita\u00e7\u00f5es Operacionais......................................... 99\n5.3\tDificuldades Encontradas........................................100\n5.4\tSugest\u00e3es para Trabalhos\tFuturos................................100\n5.5\tConsiderac\u00e3es Finais............................................101\nA Especifica\u00e7\u00f5es T\u00e9cnicas dos Componentes de Microondas Utilizados 102\nA.1\tAntenas.........................................................102\nA.2\tVCO.............................................................103\nA.2.1\tInterruptor ............................................ 103\nA.2.2\tDivisor de Pot\u00eancia......................................104\nA.2.3\tAmplificador de Pot\u00eaencia .............................. 104\nA.2.4\tAtenuador Controlado por Tens\u00e3ao ....................... 104\nA.2.5\tMisturador ..............................................105\nA.2.6\tDetector.................................................105\nB Diagramas Esquem\u00e9ticos\t107\nC Mapeamento dos Registrados Modbus da Unidade de Processamento113\nD Especificac\u00f5o dos Protocolos de Comunica\u00e7ao Criados\t119\nD.1 Protocolo de Recrutamento .......................................119\nD.\t2 Protocolo de Logging............................................120\nE Descric\u00f5o dos Webservices do Sistema do Concentrador de Dados 123\nE.\t1 Fun\u00e7\u00e3es dos Webservices.........................................123\nE.2 Estruturas de Dados do Webservices ..............................127\nLista de Figuras\n1.1\tProdu\u00e7\u00e3o t\u00edpica de um po\u00e7o em milhares de barris por dia................. 2\n1.2\tM\u00e9todo de avalia\u00e7\u00e3o da produ\u00e7ao utilizando separador de fases............ 3\n1.3\tM\u00e9todo de avalia\u00e7\u00e3o da produ\u00e7\u00e3o utilizando medidores multifasicos\t. .\t3\n1.4\tTriangulo multifasico [13]............................................... 5\n1.5\tExemplos de\tescoamento disperso [14]................................... 9\n1.6\tExemplos de\tescoamento separado [14] ................................. 10\n1.7\tExemplos de\tescoamento intermitente [14]\t  10\n1.8\tMapa de\tescoamento\tmultif\u00e9sico\tpara um\tescoamento\tvertical\t[14]\t...\t11\n1.9\tMapa de\tescoamento\tmultif\u00e9sico\tpara um\tescoamento\thorizontal\t[14]\t.\t.\t11\n2.1\tEspectro\teletromagn\u00e9tico........................................... 19\n2.2\tMol\u00e9cula\tde \u00e1gua................................................... 23\n2.3\tVaria\u00e7\u00e3o da permissividade el\u00e9trica da \u00e9gua pura com o aumento da\ntemperatura para diferentes frequ\u00eancias [7]............................. 24\n2.4\tVariac\u00e3o da permissividade el\u00e9trica da \u00e9gua salgada (10 ppt) com o\naumento da temperatura para diferentes frequ\u00eancias [7].................. 25\n2.5\tVaria\u00e7\u00e3o da permissividade el\u00e9trica da agua salgada com o aumento da\ntemperatura para diferentes concentrac\u00e7\u00e3oes de sais [7]\t............ 25\n2.6\tVaria\u00e7\u00e3o da permissividade el\u00e9trica da \u00e9gua com a frequ\u00eancia, temperatura e concentra\u00e7c\u00e3ao de sais [7] .................................... 26\n2.7\tTipos de antenas - compara\u00e7\u00e3o dos diagramas de radia\u00e7\u00e3o [6]............. 30\n2.8\tIsoladores (a)Funcionamento e (b)exemplo de Aplicac\u00e3o [6]............... 31\n2.9\tAplicac\u00e3o t\u00e9pica de um circulador [6]................................... 32\n2.10\tAplicac\u00e3es de detectores para (a)medir a intensidade de uma microonda,\n(b)demodular um sinal pulsado e (c)demodular um sinal anal\u00e9gico [6] .\t32\n2.11\tAplica\u00e7\u00f5es de Misturadores [6]...................................... 33\n2.12\tMisturador como um multiplicador de sinais [6]\t.................... 33\n2.13\tExemplo de aplica\u00e7ao de um interruptor [6]\t........................ 34\n2.14\tUtiliza\u00e7ao de um interruptor na constru\u00e7\u00f5o de um deslocador de fase [6]\t35\n2.15\tSensor de Transmissao [9]\t......................................... 37\n2.16\tM\u00e9todo de FMCW [6] ................................................. 38\n2.17\tSistema para medi\u00e7\u00f5o da atenua\u00e7\u00f5o e da fase [9]..................... 39\n2.18\tGr\u00e9fico da fase e magnitude num medidor de coeficiente de reflexao com\nfr = 1.5GHz [20].................................................... 41\n2.19\tGr\u00e9fico da fase e magnitude num medidor de coeficiente de transmiss\u00f5o\ncom fr = 1.5GHz [20]\t............................................. 42\n2.20\tSensor de resson\u00e2ncia utilizado na medic\u00f5o de n\u00e9vel de um tanque de\n\u00e9leo de um navio [9]\t............................................. 42\n2.21\tPrinc\u00edpio de funcionamento de um medidor de par\u00e2metros de escoamento\nutilizando um sensor de reflexa\u00f5o [9] .............................. 43\n2.22\tPrinc\u00edpio de funcionamento de um radar de pulso [6] ............... 44\n2.23\tPrinc\u00edpio de funcionamento de um radar de FMCW [9].................. 45\n2.24\tPrinc\u00edpio de funcionamento de um radi\u00e2metro, onde Tp \u00e9 a temperatura\ndo objeto, Tb \u00e9 a temperatura de brilho e n \u00e9 a emissividade [9].... 46\n2.25\tPrinc\u00e9pio de funcionamento de tom\u00f3grafo de microondas [9]........... 47\n3.1\tArquitetura do sistema de ensaios com microondas ................... 50\n3.2\tDiagrama de blocos do sistema de de gera\u00e7\u00f5o e processamento de microondas ........................................................... 53\n3.3\tFoto do sistema de gerac\u00f5o e processamento de microondas montado\nsobre uma placa de acr\u00edlico......................................... 53\n3.4\tDiagrama de Bode do filtro anti-recobrimento........................ 55\n3.5\tDiagrama de blocos do sistema controle e aquisi\u00e7\u00f5o de dados......... 56\n3.6\tDesenho da PCI da unidade de processamento do sistema............... 57\n3.7\tUnidade de processamento do sistema................................. 57\n3.8\tFluxograma de dados no firmware do sistema de controle e aquisic\u00f5o .\t59\n3.9\tDiagrama de blocos do sistema embarcado de comunica\u00e7\u00f5o.............. 64\n3.10\tMapeamento das camadas do padr\u00e3o Ethernet em tarefas na biblioteca\nTCP/IP Stack da Microchip [24]\t..................................... 65\n3.11\tEstrutura da mensagem Modbus TCP/IP [19]................................ 67\n3.12\tPoss\u00edvel configuracao para o sistema digital............................ 70\n3.13\tArquitetura computacional do sistema do concentrador de dados ....\t73\n3.14\tTela da interface com usu\u00e1rio onde e apresentada a lista de equipamentos\ndetectados na rede ...................................................... 76\n3.15\tTela da interface com usuario onde \u00e1 apresentado o menu de configura\u00e7ao\nde logging do sistema.................................................... 77\n3.16\tDesenho da PCI da fonte de alimenta\u00e7ao.................................. 80\n3.17\tFoto da fonte de alimenta\u00e7\u00e3o com a tampa aberta......................... 80\n3.18\tFoto da fonte de alimentac\u00e3o com a tampa fechada........................ 81\n3.19\tFoto da bancada de ensaios durante um ensaio............................ 82\n3.20\tFoto da bancada de ensaios durante um ensaio (detalhe do interior da\ncaixa de Faraday)........................................................ 83\n4.1\tPar\u00e2metros de configura\u00e7ao de um ensaio bancada de testes ............... 87\n4.2\tTanque de ensaio com a manta met\u00e1lica ................................... 89\n4.3\tGr\u00e1fico da intensidade em fun\u00e7\u00e3o da fra\u00e7ao de \u00e1leo, utilizando-se o\ntanque de sec\u00e3o retangular e com a utiliza\u00e7ao da manta de alum\u00e1nio . .\t90\n4.4\tGrafico do atraso de fase em fun\u00e7ao da frac\u00e3o de \u00e1leo, utilizando-se o\ntanque de se\u00e7c\u00e3ao retangular e com a utilizac\u00e7a\u00e3o da manta de alum\u00e1nio . .\t90\n4.5\tGr\u00e1fico do intensidade em fun\u00e7\u00e3o da fra\u00e7\u00e3o de \u00e1leo, utilizando-se o\ntanque de se\u00e7c\u00e3ao retangular e com a utiliza\u00e7ca\u00e3o da manta de alum\u00e1nio . .\t91\n4.6\tGr\u00e1fico do atraso de fase em fun\u00e7ao da frac\u00e3o de \u00e1leo, utilizando-se o\ntanque de se\u00e7ca\u00e3o retangular e com a utiliza\u00e7ca\u00e3o da manta de alum\u00e1nio . .\t91\n4.7\tTanque de ensaio sem a manta met\u00e1lica.................................... 92\n4.8\tGr\u00e1fico da intensidade em fun\u00e7ao da frequ\u00eancia (faixa inteira),\nutilizando-se o tanque de se\u00e7c\u00e3ao retangular para diversas frac\u00e7\u00e3oes de \u00e1agua 93\n4.9\tGr\u00e1afico da intensidade em fun\u00e7c\u00e3ao da fra\u00e7c\u00e3ao de \u00e1agua (tipo A), utilizando-\nse o tanque de sec\u00e7\u00e3ao retangular 2 frequ\u00eaencias escolhidas ............. 94\n4.10\tGr\u00e1fico do intensidade em fun\u00e7\u00e3o da frequ\u00eancia (tipo B), utilizando-se\no tanque de se\u00e7c\u00e3ao retangular para diversas fra\u00e7co\u00e3es de \u00e1agua ......... 94\nB.1 Diagrama esquem\u00e9tico da fonte de alimenta\u00e7\u00e3o DC....................108\nB.2 Diagrama esquem\u00e9tico do m\u00e9dulo principal do sistema de controle e aquisi\u00e7\u00e3o.........................................................109\nB.3 Diagrama esquem\u00e9tico do m\u00e9dulo de condicionamento das entradas anal\u00e9ogicas do sistema de controle e aquisi\u00e7c\u00e3ao ................ 110\nB.4 Diagrama esquem\u00e9tico do m\u00e9dulo de condicionamento das sa\u00eddas anal\u00e9ogicas do sistema de controle e aquisic\u00e7\u00e3ao ................ 111\nB.5 Diagrama esquem\u00e9tico do sistema de comunica\u00e7\u00e3o embarcada...........112\nLista de Abrevia\u00e7\u00f5es e S\u00edmbolos\nANP DAS DSP FMCW MC MM MUT PTH RF RMN SMD SMT VCO VSWR WC\tAg\u00eancia Nacional de Petr\u00f3leo Departamento de Automa\u00e7\u00e3o e Sistemas Processador Digital de Sinais (Digital Signal Processor Frequency-Modulated Continuous Wave Medidor Convencional Medidor Multifa\u00f3sico Material Under Test Placement Through Hole Radiofrequ\u00eancia Ressona\u00eancia Magn\u00f3etica Nuclear Surface Mount Device Surface Mount Technology Voltage Controlled Oscillator Voltage Standing Wave Ratio Water-Cut\nc Eq f h IL P 1 tn Pr Prad Pt RL\tVelocidade de propaga\u00e7ca\u00e3o de onda no espac\u00e7o livre Energia do quantum FreqU\u00eancia Constante de Planck Insertion Loss Pot\u00eaencia incidente Pot\u00eaencia refletida Pot\u00eaencia irradiada Pot\u00eaencia transmitida Return Loss\nv 6r ^0 / ^rs A\tVelocidade de propaga\u00e7ca\u00e3o da onda Permissividade el\u00f3etrica relativa Permissividade el\u00f3etrica no va\u00f3cuo Permissividade \u00f3optica Permissividade est\u00f3atica Comprimento de onda\npr Lo a rL\tPermeabilidade eletromagn\u00f3etica relativa Permeabilidade eletromagn\u00f3etica no va\u00f3cuo Condutividade do meio Coeficiente de reflexa\u00e3o\nCap\u00edtulo 1\nIntroduc\u00e3o\n1.1\tContextualiza\u00e7ao do Problema\nCom o decl\u00ednio das reservas de petr\u00f3leo no mundo, a ind\u00fastria petrol\u00edfera se v\u00ea obrigada a produzir em lugares e em reservas ate ent\u00e3o considerados economicamente inviaveis. As condi\u00e7\u00e3es operacionais de um po\u00e7o e sua produc\u00e3o s\u00e3o avaliadas atraves do conhecimento das frac\u00e3es de oleo, agua, gases dissolvidos e demais res\u00edduos extra\u00eddos do po\u00e7o. Al\u00e9m das frac\u00e3es de cada componente, tamb\u00e9m \u00e9 necessario o conhecimento das velocidades de escoamento de cada uma das fases e, no caso de fra\u00e7c\u00e3oes significativas de g\u00e9as, a densidade, ou massa especifica, das fases. Os par\u00eaametros acima citados caracterizam o problema da medi\u00e7ao multif\u00e9sica na industria de petr\u00f3leo e gas natural e s\u00e3o important\u00edssimos para o monitoramento da produc\u00e3o dos pocos e gerenciamento da explota\u00e7c\u00e3ao do reservat\u00e9orio de onde estes po\u00e7cos produzem. Al\u00e9em disso, o conhecimento detalhado de todas as fra\u00e7c\u00e3oes produzidas por cada po\u00e7co serve para o levantamento da viabilidade econo\u00eamica do projeto. A import\u00eaancia de tal informa\u00e7c\u00e3ao a respeito do escoamento fica ainda mais evidente nos projetos de recupera\u00e7\u00e3o de pocos. Na figura\n1.1\t\u00e9 mostrado o ciclo de vida t\u00e9pico de um po\u00e7o. Juntamente com o aumento da fra\u00e7\u00e3o de \u00e9gua1, \u00e9 comum um aumento da fracao de g\u00e9s com o passar dos anos. Apesar de serem comumente utilizadas t\u00e9ecnicas de inje\u00e7c\u00e3ao de a\u00e9gua ou g\u00e9as na explota\u00e7ca\u00e3o de um reservato\u00e9rio, a maior parte da \u00e9agua e gases explotados s\u00e3ao normalmente provenientes do pr\u00e9oprio reservato\u00e9rio. As duas principais aplica\u00e7c\u00e3oes da medi\u00e7ca\u00e3o multif\u00e9asica na indu\u00e9stria de petr\u00f3leo e g\u00e9s s\u00e3o [14]:\n\u2022 Teste de Po\u00e7os - engenheiros de reservat\u00f3rio necessitam avaliar constantemente o desempenho de cada po\u00e7co de um campo para poderem otimizar a produ\u00e7c\u00e3ao do\n1em ingl\u00eas Water-Cut\ncampo, especialmente nos campos em processo de recupera\u00e7\u00e3o por inje\u00e7\u00e3o de g\u00e1s ou \u00e1gua;\n\u2022 Medi\u00e7\u00e3o da Produ\u00e7\u00e3o - necess\u00e1ria quando uma Unica planta \u00e1 utilizada para o processamento da produ\u00e7\u00e3o de diferentes areas de licenciamento, ou ent\u00e3o quando a produ\u00e7\u00e3o de diferentes \u00e1reas precisa ser transportada atrav\u00e9s de um duto comum.\nFigura 1.1: Produ\u00e7\u00e3o t\u00edpica de um po\u00e7o em milhares de barris por dia\nO m\u00e9todo comumente empregado para a medi\u00e7\u00e3o das frac\u00e3es baseia-se na utiliza\u00e7\u00e3o de separadores de fase. Para tal \u00e9 necessario que o escoamento seja desviado para uma planta de testes, onde entao as fases sao separadas e as medic\u00e3es s\u00e3o realizadas utilizando-se Medidores Convencionais (MC), conforme ilustrado na figura 1.2. As desvantagens desse metodo s\u00e3o [8]:\n\u2022\te necessario um longo tempo para a estabiliza\u00e7ao, ou separa\u00e7\u00e3o, das fases;\n\u2022\tnecessita de uma infra-estrutura espec\u00edfica de testes que, por sua vez, ocupa um espac\u00e7o significativo;\n\u2022\tas medic\u00e7\u00e3oes n\u00e3ao s\u00e3ao realizadas continuamente, mas sim sobre amostras do escoamento, que n\u00e3ao sa\u00e3o necessariamente representativas da produ\u00e7ca\u00e3o.\nPor outro lado, medidores de vazao multifasica 2 permitem que a produc\u00e3o seja avaliada de forma cont\u00ednua. Um medidor de vaz\u00e3o multif\u00e9sica \u00e9 um instrumento capaz\n2\u00e0s vezes referidos como in-line multiphase meters\nFigura 1.2: M\u00e9todo de avalia\u00e7\u00e3o da produ\u00e7\u00e3o utilizando separador de fases\nde medir, sem separa\u00e7ao das fases, as vaz\u00e3es de \u00e9leo, \u00e9gua e g\u00e9s, escoando em uma tubula\u00e7ao. Na figura 1.3 \u00e9 ilustrado uma poss\u00edvel configura\u00e7\u00e3o quando se utiliza esse tipo de medidor. Algumas das vantagens da utiliza\u00e7ao de um Medidor Multif\u00e9sico (MM) s\u00e3o [8]:\nFigura 1.3: M\u00e9todo de avalia\u00e7ao da produ\u00e7\u00e3o utilizando medidores multif\u00e9sicos\n\u2022\tredu\u00e7ao do tempo de medic\u00e3o;\n\u2022\telimina\u00e7ao de linhas e separadores de testes;\n\u2022\tmelhor gerenciamento do reservat\u00e9rio de produ\u00e7\u00e3o;\n\u2022\texplora\u00e7\u00e3o de novos campos at\u00e9 ent\u00e3o invi\u00e1veis economicamente;\n\u2022\tmelhor controle da vaz\u00e3o de gas das valvulas de gas lift;\n\u2022\totimizac\u00e3o da producao de petroleo;\n\u2022\tdetecc\u00e3o de parada de produ\u00e7\u00e3o de um po\u00e7o de petroleo.\nEm contrapartida entre as desvantagens na utiliza\u00e7\u00e3o de medidores multifasicos podemos citar [14]:\n\u2022\ta amostragem dos fluidos nao esta dispon\u00edvel e, se necessaria, pode requerer a instalac\u00e7\u00e3ao de um separador de testes;\n\u2022\tn\u00e3ao existe nenhum padra\u00e3o metrologico rastreavel para a aferi\u00e7c\u00e3ao dos medidores multifasicos;3\n\u2022\tpode ser necessaria a utiliza\u00e7c\u00e3ao de um separador para a remo\u00e7c\u00e3ao de lama e para fins de limpeza.\nPortanto, medidores de vaz\u00e3o multifasica, alem de propiciarem uma medi\u00e7\u00e3o mais representativa dos par\u00e2metros de producao, implicam em uma reduc\u00e3o dos investimentos em recursos humanos e em instala\u00e7\u00e3es. Apesar das vantagens da utiliza\u00e7\u00e3o desses medidores, e somente recentemente, com o desenvolvimento tecnologico, que estes medidores atingiram os requisitos m\u00ednimos de incerteza padr\u00e3o, resoluc\u00e3o e custos requeridos pela industria para aplica\u00e7co\u00e3es na produ\u00e7ca\u00e3o, sendo que estes instrumentos ainda n\u00e3ao atingiram os requisitos m\u00ednimos exigidos pela ANP para utiliza\u00e7ao fiscal. Ainda assim, o custo deste tipo de instrumento ainda \u00e9 considerado elevado para muitas aplicac\u00e3es.\n1.2\tT\u00e9cnicas e M\u00e9todos de Medic\u00e3o\nA medi\u00e7ca\u00e3o multif\u00edasica consiste na utiliza\u00e7c\u00e3ao de equipamentos que permitem a medi\u00e7\u00e3o da vaz\u00e3o de cada fase, em escoamento multifasico, sem que seja necessaria a separa\u00e7\u00e3o dessas fases, para que suas respectivas vazoes (volumetrica ou massica) sejam determinadas. Nesse tipo de medidor, a medi\u00e7\u00e3o das vaz\u00e3es das fases e obtida atraves da interpreta\u00e7ca\u00e3o das medi\u00e7co\u00e3es realizadas por diferentes sensores, de acordo com a concepc\u00e7\u00e3ao de medidor adotada. Estes sensores medem os valores de determinados\n3tradu\u00e7\u00e3o livre para: \u2019\u2019multiphase metering is not traceable to any accepted standards\u201d\npar\u00e2metros relativos \u00e0 fra\u00e7\u00e3o de presen\u00e7a das fases e suas caracter\u00edsticas fluidas, ou ainda caracter\u00edsticas intr\u00ednsecas do escoamento.\nPara a indUstria de petr\u00f3leo e g\u00e1s natural, a mistura multifasica de interesse consiste basicamente de \u00e1gua (normalmente salina), oleo cru e gases. Esta \u00f3 a mistura encontrada nos reservat\u00f3rios de petr\u00f3leo. Dependendo do tipo do reservat\u00f3rio e de diversas condi\u00e7\u00f5es geol\u00f3gicas e de produ\u00e7\u00e3o, a composi\u00e7ao da mistura pode variar entre os extremos, e apresentar como fase predominante qualquer um dos tr\u00e2s componentes, podendo inclusive n\u00e3o apresentar algum dos constituintes. O tri\u00e2ngulo multif\u00e1sico \u00f3 um grafico que representa as poss\u00f3veis composic\u00e3es encontradas na explotac\u00e3o de um po\u00e7o de petr\u00f3leo [13]. Al\u00f3m disso, o triangulo \u00f3 de fundamental import\u00e2ncia para a compreens\u00e3o da complexidade do problema da medi\u00e7\u00e3o multif\u00f3sica. Na figura 1.4 \u00f3 mostrado o tria\u00e2ngulo multif\u00f3asico.\nGAS\nFigura 1.4: Triangulo multifasico [13]\nUm medidor multif\u00e1sico ideal seria aquele que pudesse medir diretamente as fra\u00e7\u00f5es volum\u00e9tricas, as velocidades e as massas espec\u00edficas de cada fase ou componente da mistura, compondo assim as nove inc\u00f3gnitas para a resolu\u00e7\u00e3o do equacionamento das vaz\u00f5es massicas de cada fase. Essa forma de medi\u00e7\u00e3o multif\u00f3sica tamb\u00f3m pode ser classificada como um m\u00f3todo de medic\u00e3o inferencial. No entanto, tal medidor n\u00e3o existe, sendo que a soluc\u00e3o aproximada do problema da vaz\u00e3o multif\u00f3sica \u00f3 obtida atraves de simplifica\u00e7\u00e3es, aproximac\u00e3es e equac\u00e3es emp\u00edricas. Alem disso, e comum a\nutiliza\u00e7\u00e3o de artif\u00edcios que simplificam de alguma forma o problema como, por exemplo, a utiliza\u00e7\u00e3o de misturadores est\u00e1ticos [8], [14]. Os misturadores estaticos, em teoria, homogene\u00edzam a mistura, igualando a velocidade de escoamento das fases constituintes da mistura e for\u00e7ando um escoamento do tipo homog\u00eaneo.\nPodemos dividir o problema da medi\u00e7\u00e3o multif\u00e1sica em quatro sub-problemas, ou categorias gen\u00e1ricas [3]:\n\u2022\tdeterminac\u00e3o dos par\u00e2metros de escoamento4;\n\u2022\tdetermina\u00e7ao das fracoes volum\u00e1tricas5;\n\u2022\tidentificacao do tipo do escoamento6;\n\u2022\tdetermina\u00e7\u00e3o das propriedades da mistura7.\n1.2.1\tPar\u00e2metros de Escoamento\nO principal par\u00eaametro de escoamento medido \u00e1e a velocidade, ou vaz\u00e3ao, do escoamento multif\u00e1sico. Existem diversas t\u00e1cnicas intrusivas e nao-intrusivas para medir a velocidade do escoamento. Abaixo sao descritos e listados os principais tipos de medidores utilizados na determina\u00e7ca\u00e3o da velocidade de escoamento, classificados de acordo com a t\u00e1ecnica de infer\u00eaencia utilizada:\n\u2022\tPress\u00e3o diferencial: a velocidade do escoamento \u00e1 calculada atrav\u00e9s da leitura da queda de press\u00e3ao, ou pressa\u00e3o diferencial, devido a uma restri\u00e7ca\u00e3o de escoamento conhecida. Os tipos mais comuns de restri\u00e7c\u00e3oes utilizadas nesse tipo de equipamento s\u00e3o: placas de orif\u00edcio, tubos de Venturi, Flow Nozzle e tubo de Pitot. Para mais detalhes ver [21] e [22].\n\u2022\tMec\u00e2nico: nesse tipo de medidor s\u00e3o utilizadas partes m\u00e1veis e a medi\u00e7\u00e3o da velocidade \u00e1e realizada atrav\u00e1es da contagem do nu\u00e1mero de volumes isolados que passaram atrav\u00e1es do medidor. Os principais medidores desse tipo s\u00e3ao medidores de deslocamento positivo e medidores tipo turbina. Ver [21]\n\u2022\tUltrass\u00e2nico: a velocidade do escoamento \u00e1 medida atrav\u00e1s da altera\u00e7\u00e3o na velocidade de propaga\u00e7c\u00e3ao das ondas de ultrassom no meio. As duas principais t\u00e1cnicas de infer\u00eancia utilizadas sao: tempo de tr\u00eansito e efeito Doppler. Para mais detalhes ver [17] e [5].\n4flow parameters\n5 volumetric fraction parameters\n6flow regime parameters\n7\tmixture properties\n\u2022\tCorrela\u00e7ao Cruzada: a velocidade do escoamento \u00e9 calculada atrav\u00e9s da correla\u00e7\u00e3o entre dois sinais provenientes de 2 conjuntos de medi\u00e7\u00e3o (transmis-sor/sensor) distantes entre si de uma dist\u00e2ncia conhecida. Os sensores utilizados para fazer a correla\u00e7\u00e3o podem ser de raios-X, raios-7, \u00e9pticos, de imped\u00e2ncia el\u00e9trica, de capacit\u00e2ncia el\u00e9trica ou acusticos. Ver [5] e [17]\n1.2.2\tFra\u00e7\u00f5es Volum\u00e9tricas\nA determinac\u00e7\u00e3ao das fra\u00e7co\u00e3es volum\u00e9etricas das fases constituintes do escoamento mul-tif\u00e9asico pode ser uma tarefa muito complexa caso as velocidades de escoamento das fases sejam diferentes. Quando as velocidades de escoamento das fases s\u00e3o diferentes, ocorre um fen\u00e2meno chamado de slip, ou em portugu\u00eas \u201descorregamento\u201d[15]. Geralmente a velocidade da fase gasosa \u00e9e maior do que a das fases l\u00e9quidas. Quando ocorre algum tipo de separa\u00e7c\u00e3ao das fases l\u00e9quidas, o feno\u00e2meno pode aparecer entre essas fases, implicando em erros de medi\u00e7\u00e3o significativos caso o medidor nao implemente um m\u00e9etodo de medic\u00e7\u00e3ao de velocidade de escoamento diferenciado para cada uma das fases. Por isso, \u00e9e comum a utiliza\u00e7c\u00e3ao de misturadores antes que a medi\u00e7ca\u00e3o multifa\u00e9sica in-line seja realizada, de maneira a homogeneizar a mistura e impedir a separac\u00e3o das fases.\nA correta determina\u00e7c\u00e3ao das frac\u00e7\u00e3oes volum\u00e9etricas dos constituintes da mistura \u00e9e de fundamental importa\u00e2ncia em qualquer tipo de medidor multif\u00e9asico. Existem uma infinidade de t\u00e9ecnicas, m\u00e9etodos e sensores que sa\u00e3o utilizados na determinac\u00e7a\u00e3o das fra\u00e7c\u00e3oes. De uma maneira geral, podemos dizer que n\u00e3o existe um m\u00e9todo universal para a deter-minac\u00e7\u00e3ao das fra\u00e7c\u00e3oes volum\u00e9etricas que seja eficiente para todas as poss\u00e9veis condic\u00e7\u00e3oes de escoamento e misturas. Normalmente a determina\u00e7ao das frac\u00e3es volum\u00e9tricas \u00e9 realizada atrav\u00e9es da correlac\u00e7\u00e3ao das medidas obtidas com dois ou mais m\u00e9etodos, ou sensores. Abaixo sa\u00e3o listados e descritos alguns dos principais m\u00e9etodos de medic\u00e7\u00e3ao utilizados na determina\u00e7\u00e3o das frac\u00e3es volum\u00e9tricas do escoamento:\n\u2022\tIntera\u00e7\u00e3o com sinais de microondas: devido as caracter\u00edsticas diel\u00e9tricas peculiares da \u00e9agua, \u00e9e muito comum a utiliza\u00e7c\u00e3ao de sinais de microondas na de-termina\u00e7c\u00e3ao da fra\u00e7ca\u00e3o volum\u00e9etrica desse componente. Existem diversas t\u00e9ecnicas de medi\u00e7ca\u00e3o que fazem uso de sinais de microondas na determinac\u00e7\u00e3ao da frac\u00e7\u00e3ao de \u00e9agua numa mistura, como por exemplo: medi\u00e7ca\u00e3o da atenua\u00e7ca\u00e3o, do atraso de fase e da frequ\u00eancia de ressonancia. Ver [9], [20] e [26].\n\u2022\tAtenua\u00e7\u00e3o de sinas de ultrassom: as part\u00edculas s\u00e9lidas em suspens\u00e3o, assim como as bolhas de ar presentes num escoamento cuja fase predominante \u00e9e\nl\u00edquida, t\u00eam a propriedade de espalhar 8 ondas de ultrassom. A perda de energia devido a dispers\u00e3o das ondas ultrossonicas reflete numa atenua\u00e7\u00e3o relativa na intensidade do sinal de ultrassom transmitido. Esta t\u00e9cnica pode ser utilizada na determina\u00e7\u00e3o da fra\u00e7\u00e3o de g\u00e9s de uma mistura de agua, g\u00e9s e \u00edleo, por exemplo. Ver [5].\n\u2022\tResson\u00e2ncia Magn\u00e9tica Nuclear (RMN)9: esta t\u00e9cnica baseia-se nas propriedades magn\u00e9ticas de alguns atomos. Nesse tipo de medicao, os \u00e9tomos interagem com campos magn\u00e9ticos est\u00e9ticos, for\u00e7ando o spin dos nucleos dos \u00e9tomos a se alinharem com o campo aplicado. Enta\u00e3o um pulso de ondas eletromagn\u00e9eticas de RF (radiofrequ\u00eancia), de amplo espectro, \u00e9 transmitido ortogonalmente ao campo estatico. Quando a frequ\u00eancia do sinal RF transmitido \u00e9 igual \u00e0 frequ\u00eancia de Larmor, ocorre um fen\u00eaomeno de ressona\u00eancia, e o spin dos atomos se inverte. A energia absorvida devido a esse feno\u00eameno pode ser medida e utilizada para determinar a concentrac\u00e7\u00e3ao de um determinado atomo e, indiretamente, a fra\u00e7c\u00e3ao de uma determinada fase na mistura. Ver [5].\n\u2022\tAtenua\u00e7c\u00f5ao radioativa: este metodo utiliza a atenua\u00e7c\u00e3ao, por absor\u00e7c\u00e3ao ou dispers\u00e3o, por parte do material sob analise 10 de raios X ou raios Gama transmitidos atraves do meio. As ondas com comprimento de onda da ordem dos raios X e Gama possuem caracter\u00edsticas de part\u00e9culas, s\u00e3o os chamados fotons. S\u00e3o os f\u00f3tons que na verdade sao absorvidos ou dispersados pelos \u00e1tomos do MUT. Para a libera\u00e7c\u00e3ao dos f\u00e9otons s\u00e3ao necess\u00e9arias fontes radioativas que podem diretamente ou indiretamente emitir os raios X ou Gama. Ver [15].\n\u2022\tVariacao da Imped\u00e2ncia: existem duas possibilidades de se medir a im-pedancia complexa de um meio: atrav\u00e9s da medi\u00e7\u00e3o da capacitancia ou da in-dut\u00eaancia do meio. Este m\u00e9etodo pode ser utilizado nas misturas bif\u00e9asicas, em que a permeabilidade el\u00e9etrica relativa das fases \u00e9e suficientemente diferente, o que ocorre, por exemplo, no caso da mistura de \u00e9oleo e \u00e9agua. Quando a fase de \u00e9oleo \u00e9e predominante, pode-se utilizar o m\u00e9etodo da medi\u00e7c\u00e3ao da capacit\u00eaancia. Caso a \u00e9gua seja a fase predominante, pode-se utilizar o m\u00e9todo da indut\u00e2ncia. Ver [22] e [15].\n1.2.3\tTipo do Escoamento\nO escoamento multifa\u00e9sico \u00e9e um fen\u00eaomeno complexo, dif\u00e9cil de modelar e de prever. A variac\u00e7a\u00e3o do regime de escoamento depende de diversos fatores. Alguns fatores que\n8tradu\u00e7ao para scatter\n9 em ingl\u00eas NMR\n10MUT - Material Under Test\ninterferem no comportamento transit\u00f3rio do escoamento podem ser considerados como perturba\u00e7\u00f5es. Esses fatores podem ser, por exemplo, a abertura ou fechamento de uma v\u00f3lvula, altera\u00e7\u00f5es na geometria ou na inclinac\u00f5o da tubula\u00e7ao. Na aus\u00eancia dessas perturbac\u00f5es, o regime de escoamento \u00f3 determinado pelas velocidades de escoamento, propriedades dos fluidos, di\u00eametro e inclina\u00e7\u00f5o da tubula\u00e7\u00f5o [14]. Os diversos tipos de escoamento podem ser agrupados em tr\u00eas tipos:\n\u2022\tEscoamento disperso11: caracterizado por uma distribui\u00e7ao uniforme das fases tanto na dire\u00e7\u00f5o radial quanto na dire\u00e7\u00f5o axial, conforme mostrado na figura 1.5.\n\u2022\tEscoamento separado12: este escoamento \u00f3 caracterizado por uma distribui\u00e7\u00f5o cont\u00ednua de fases na dire\u00e7\u00f5o axial enquanto apresenta uma distribuic\u00f5o n\u00f5o-cont\u00ednua na dire\u00e7\u00f5o radial, conforme mostrado na figura 1.6.\n\u2022\tEscoamento intermitente13: este tipo de escoamento apresenta uma distri-bui\u00e7c\u00f5ao n\u00f5ao-cont\u00f3nua de fases na direc\u00e7\u00f5ao axial, implicando num comportamento local inst\u00e1vel, conforme mostrado na figura 1.7.\nFigura 1.5: Exemplos de escoamento disperso [14]\nOs efeitos sobre o tipo do escoamento devido \u00e0s interac\u00f5es entre as fases l\u00edquidas sao menos significativos dos que os efeitos devidos \u00e0s intera\u00e7\u00f5es entre a fase l\u00edquida e gasosa. Portanto, na maioria das situac\u00f5es, pode-se considerar o escoamento da fra\u00e7\u00f5o l\u00f3quida, composta de \u00f3oleo e a\u00f3gua, como sendo um escoamento do tipo disperso [14]. Para uma dada tubula\u00e7ca\u00f5o, condi\u00e7c\u00f5oes de pressa\u00f5o e fluido multif\u00f3asico, pode-se trac\u00e7ar um\nndo ingl\u00eas dispersed flow\n12do ingl\u00eas separeted flow\n13do ingl\u00eas intermittent flow\nFigura 1.6: Exemplos de escoamento separado [14]\nFigura 1.7: Exemplos de escoamento intermitente [14] mapa qualitativo dos tipos de escoamentos esperados em fun\u00e7ca\u00f5o das velocidades de escoamento das fases l\u00e9quidas e gasosas, conforme mostrado nas figuras 1.8 e 1.9, para tubula\u00e7c\u00f5oes verticais e horizontais respectivamente.\nApesar da relevancia e influ\u00e2ncia do tipo do escoamento para a medi\u00e7\u00f5o multif\u00e9sica, a maior parte das t\u00e9cnicas utilizadas na determina\u00e7\u00f5o dos par\u00e2metros do escoamento e das fra\u00e7\u00f5es volum\u00e9tricas requerem que o escoamento seja homogeneizado. Isso caracteriza, portanto, um escoamento disperso com rela\u00e7ao \u00e0s fases l\u00e9quidas e l\u00e9quido-gasosa. Alguns dos princ\u00e9pios de medic\u00e7\u00f5ao citados anteriormente podem ser utilizados para se obter uma imagem tomogr\u00e9afica do escoamento. A imagem obtida pode ser enta\u00f5o utilizada para a determina\u00e7c\u00f5ao de par\u00e2ametros de interesse como, por exemplo, frac\u00f5es volum\u00e9tricas e tipos de escoamento [15]. As t\u00e9cnicas de imagem normalmente utilizam um conjunto de sensores, ou detectores, dispostos radialmente na tubula\u00e7c\u00f5ao\nFigura 1.8: Mapa de escoamento multif\u00e1sico para um escoamento vertical [14]\nHJ\n\u25a0\u00e7\ncr\nO? cn\nnj\nTj\n\"nj\nu\n\u20141-------------------\nI I\nI\nj Bolha Dispersa\n..............-.....?[................\nI f\nI f\nBolha Alongada \u00a1 J\n0) Cl ZJ cn\ncu\n73\nnj\nu\n\u25a1\nCD >\nI\nI\nI\nI\nI\nI l_\n,W/\"Wlllllllll^lllllll||IWIIIIl||||||||lllllilll|l\u00ab|lll'l\"llll,\u00edl,|ll|l<11 1 \u2019\t/ I\nI\nI\nI I --------------!\t Golfada I\t.\n1 z\nI \u00ed\nA\u2014r-y \\ 1 \\\n'\u2022^Estratificado\n% Ondulado =\n=s I\tI\ni I\t1\nI I\n--------------------------------------r\nVelocidade Superficial da Fase Gasosa\nI \u00ed\nI\tJ\nII ............................................bs'\nI\nI\nAnular\nMisto\nEstratificado Liso I\nI\nI\nI\nI\nI\nI\nI\nI\nI\nI L\nI\nI\nI\nI\nI\nI\nI r\ni i\ni\ni\ni\ni\nL\nFigura 1.9: Mapa de escoamento multif\u00e1sico para um escoamento horizontal [14] de escoamento. Apesar da complexidade e da capacidade computacional exigida, as t\u00e1ecnicas de imagem permitem a determinac\u00e7\u00e3ao experimental do tipo de escoamento. Outra t\u00e1cnica utilizada na determinac\u00e3o do tipo de escoamento consiste na utiliza\u00e7ao de redes neuronais [16]. As redes neuronais caracterizam um tipo de medi\u00e7ao chamado\nde caixa-preta14. Neste tipo de abordagem a modelagem te\u00e9rica do fen\u00f4meno \u00e9 menos importante dos que os resultados obtidos atrav\u00e9es de um grupo de sensores. Uma vez coletados, os dados relativos ao escoamento podem ser utilizados no treinamento da rede neuronal, que por sua vez pode identificar padr\u00e3es de escoamento atrav\u00e9s da correlac\u00e7\u00e3ao de diversas medi\u00e7c\u00e3oes.\n1.2.4\tPropriedades da mistura\nComplementarmente \u00e0 medi\u00e7\u00e3o das fra\u00e7\u00e3es volum\u00e9tricas, velocidades de escoamento e padr\u00e3ao de escoamento, um conjunto de outros par\u00f4ametros da mistura e do escoamento se faz necess\u00e9ario para a solu\u00e7c\u00e3ao, ou redu\u00e7c\u00e3ao das incertezas das medi\u00e7c\u00e3oes, do problema da medi\u00e7ca\u00e3o multifa\u00e9sica. Podemos citar os seguintes par\u00f4ametros como relevantes ao problema [3]:\n\u2022\tdensidades;\n\u2022\tsalinidade;\n\u2022\ttemperatura;\n\u2022\tpress\u00e3ao;\n\u2022\tconstante diel\u00e9etrica.\nDependendo do m\u00e9etodo de medi\u00e7c\u00e3ao empregado na determina\u00e7c\u00e3ao da fra\u00e7ca\u00e3o de \u00e9agua da mistura, algumas compensa\u00e7\u00e3es na medi\u00e7\u00e3o podem ser necessarias. Isto ocorre quando existe uma influ\u00f4ncia direta de um determinado par\u00f4metro sobre a medic\u00e3o em quest\u00e3ao como, por exemplo, a temperatura e a salinidade, que interferem nas medi\u00e7c\u00e3oes realizadas utilizando-se tecnologia de microondas [9]. Quando se deseja calcular a vaza\u00e3o massica da mistura, para\u00f4metros como as densidades, press\u00e3ao e temperatura se tornam indispensaveis. A import\u00f4ancia de um determinado par\u00f4ametro depende das tecnicas de medi\u00e7ao adotadas e do proposito especifico do medidor concebido. De uma maneira geral, quanto maior o nu\u00e9mero de par\u00f4ametros do escoamento, mistura e componentes forem determinados, melhor e mais precisos tendem a ser os resultados obtidos. No entanto, a determinac\u00e7\u00e3ao da correta correlac\u00e7\u00e3ao entre as diversas propriedades medidas torna-se uma tarefa cada vez complexa. M\u00e9todos do tipo caixa-preta, aplicados utilizando-se algum tipo de intelig\u00f4encia computacional e que fazem uso da grande capacidade de processamento dos sistemas digitais modernos ganham cada vez mais import\u00f4ancia e tornam-se cada vez mais importantes para a solu\u00e7c\u00e3ao do problema da medi\u00e7ao multif\u00e1sica [3], [16].\n14do ingles black-box\n1.3\tMedi\u00e7\u00e3o utilizando microondas\nA absor\u00e7\u00e3o de microondas \u00e9 um m\u00e9todo de infer\u00eancia muito difundido e utilizado na determina\u00e7ao da fra\u00e7ao, ou composi\u00e7\u00e3o, de \u00e9gua de uma mistura. Isto \u00e9 poss\u00edvel gra\u00e7as \u00e0s caracter\u00edsticas diel\u00e9tricas da \u00e9gua, bem distintas dos demais componentes da mistura comumente encontrada nos poc\u00e7os de petr\u00e9oleo. Algumas das vantagens da utiliza\u00e7c\u00e3ao deste tipo de sensor para a medi\u00e7ca\u00e3o das propriedades dos materiais sa\u00e3o abaixo listadas [20]:\n\u2022\tn\u00e3o necessitam de contato f\u00edsico com o processo;\n\u2022\tas microondas penetram em praticamente todos os materiais, com excecao dos metais, sendo portanto, os resultados representativos do volume do material sob an\u00e9alise e n\u00e3ao somente da superf\u00e9cie;\n\u2022\tde uma maneira geral, a \u00e9agua apresenta um bom contraste em rela\u00e7c\u00e3ao aos demais materiais, tornando este tipo de medidor aconselhavel para a medi\u00e7\u00e3o da fra\u00e7\u00e3o de \u00e9agua;\n\u2022\tos sensores de microondas n\u00e3ao s\u00e3ao sens\u00e9veis a condi\u00e7c\u00e3oes ambientais como vapores de \u00e1gua, sujeira e altas temperaturas;\n\u2022\tpara as pot\u00eaencias de transmissa\u00e3o normalmente utilizadas neste tipo de aplica\u00e7c\u00e3ao, as microondas (radia\u00e7\u00e3es nao-ionizantes) sao um m\u00e9todo seguro para humanos, em contraste com os m\u00e9todos que utilizam radia\u00e7\u00e3es ionizantes;\n\u2022\tpara as frequ\u00eancias de microondas, a influ\u00eancia da propriedade el\u00e9trica de condu-tividade DC 15 dos materiais pode ser desprezada;\n\u2022\tsensores de microondas s\u00e3ao r\u00e9apidos, possuindo um tempo de resposta pequeno;\n\u2022\tas microondas n\u00e3ao afetam o material sob an\u00e9alise.\nAs microondas interagem com os materiais de diferentes formas. A intera\u00e7c\u00e3ao pode se dar na forma de absorc\u00e7\u00e3ao, emiss\u00e3ao, refra\u00e7c\u00e3ao, dispers\u00e3ao, reflex\u00e3ao ou altera\u00e7c\u00e3ao da velocidade e da fase. Dependendo do arranjo de medic\u00e7\u00e3ao adotado e do fen\u00eaomeno de intera\u00e7c\u00e3ao no qual baseia-se o sensor utilizado, os sensores de microondas podem ser classificados em grupos. Alguns dos principais grupos sao [20]:\n\u2022\tsensores de transmiss\u00e3o16;\n15\tDC conductivity\n16tradu\u00e7\u00e3o livre do ingl\u00eas transmission sensors\n\u2022\tsensores de ressonancia;\n\u2022\tradares e sensores de reflexao;\n\u2022\tradi\u00f3metros;\n\u2022\tsensores tomograficos;\n\u2022\tsensores especiais.\nBasicamente, o que distingue um tipo de sensor do outro \u00e9 a maneira como o sistema de microondas interage com os materiais e qual fen\u00f3meno de intera\u00e7\u00e3o esta sendo avaliado. De uma maneira geral, os sensores, sistemas de transmiss\u00e3ao e processamento dos sinais de microondas s\u00e3ao muito similares.\nOs sensores de cavidade de resson\u00f3ancia s\u00e3ao os mais utilizados na medic\u00e7a\u00e3o da fra\u00e7c\u00e3ao de agua em aplicac\u00e3es na industria de oleo e gas natural [9], [20]. Os sensores de transmiss\u00e3o tambem sao citados [9], mas devido \u00e0 grande atenuac\u00e3o que os sinais de microondas sofrem devido a grandes fra\u00e7co\u00e3es de agua, sua utiliza\u00e7c\u00e3ao n\u00e3ao e t\u00e3ao difundida. Os sensores de transmiss\u00e3ao s\u00e3ao mais simples de serem implementados e desenvolvidos do que os sensores do tipo cavidade de resson\u00f3ancia, e por isso sera\u00e3o estudados no presente trabalho, caracterizando um primeiro esfor\u00e7o na tentativa de dom\u00ednio dessa tecnologia.\nE importante ressaltar que existe um numero reduzido de fabricantes ofertando medidores multifasicos e medidores de fra\u00e7ca\u00e3o de agua que utilizam tecnologia de microondas. Alem disso, talvez por motivos estrategicos, esses fabricantes disponibilizam poucos dados e informa\u00e7\u00e3es a respeito dos seus produtos. Ha tambem poucos artigos e refer\u00f3encias sobre o assunto.\n1.4\tAplicacoes de Sensores de Microondas na IndUstria de Petr\u00f3leo e G\u00e1s\nOs sensores de microondas sao utilizados na industria de petroleo e gas principalmente na medi\u00e7ao da frac\u00e3o de agua. Tambem sao utilizados na medic\u00e3o de n\u00edveis de tanques. Outra aplica\u00e7c\u00e3ao n\u00e3ao diretamente relacionada e na medi\u00e7c\u00e3ao de vazamentos de oleo nos oceanos. A medi\u00e7c\u00e3ao de fra\u00e7c\u00e3ao de agua, utilizando-se tecnologia de microondas, e utilizada em diversas aplica\u00e7\u00e3es, das quais podemos citar:\n\u2022\tMedi\u00e7\u00e3o downhole: a utiliza\u00e7\u00e3o de multiplos boreholes, ou perfura\u00e7\u00e3es, na explotac\u00e3o do petr\u00f3leo \u00e1 uma tend\u00eancia na tecnologia de gerenciamento de re-servat\u00e1rios. Nessa situa\u00e7ao, a produc\u00e3o de muitas zonas de produ\u00e7ao convergem para um poco principal. Para a otimiza\u00e7\u00e3o da produ\u00e7\u00e3o e recupera\u00e7\u00e3o desses reservat\u00e1orios \u00e1e necess\u00e1ario que a produ\u00e7c\u00e3ao de cada zona possa ser medida e controlada de maneira independente. A utilizac\u00e3o de medidores de fra\u00e7\u00e3o de \u00e1agua capazes de medir a frac\u00e7\u00e3ao de \u00e1agua de cada zona permite aos operadores e e engenheiros de reservat\u00e1rio monitorar continuamente as fra\u00e7\u00e3es de \u00e1gua e \u00e1leo produzidas, permitindo a detec\u00e7c\u00e3ao de uma frente de \u00e1agua numa determinada zona de produ\u00e7ao [20].\n\u2022\tMedi\u00e7\u00e3o da produ\u00e7\u00e3o no mainfold principal: os medidores de fra\u00e7ao de \u00e1gua tamb\u00e1m podem ser utilizados na sa\u00e1da de um mainfold para permitir a avalia\u00e7c\u00e3ao da produ\u00e7ca\u00e3o de um conjunto de po\u00e7cos.\n\u2022\tMedi\u00e7\u00e3o da produ\u00e7\u00e3o e de cust\u00f3dia: os medidores de fra\u00e7ao de agua s\u00e3o utilizados na sa\u00e1da de o\u00e1leo de separadores prim\u00e1arios, de maneira a corrigir pequenos desvios da produ\u00e7\u00e3o devido \u00e0 presen\u00e7a de quantidades m\u00e1nimas de \u00e1gua.\n1.5\tObjetivos\nO presente trabalho se insere em um projeto de pesquisa, dentro do DAS/USFC (Departamento de Automa\u00e7\u00e3o e Sistemas), cujo objetivo final \u00e1 o desenvolvimento, an\u00e1alise e calibra\u00e7ca\u00e3o de um prot\u00e1otipo de um medidor de vaz\u00e3ao multif\u00e1asica de baixo custo, n\u00e3ao intrusivo, capaz de medir as fra\u00e7c\u00e3oes dos componentes do escoamento multif\u00e1asico (\u00e1agua/\u00e1oleo/ga\u00e1s) e suas vaz\u00e3oes volum\u00e1etricas. Para tal \u00e1e necess\u00e1ario o desenvolvimento e avalia\u00e7c\u00e3ao das diversas partes constituintes do sistema de medi\u00e7c\u00e3ao multif\u00e1asico.\nA primeira etapa do projeto consiste no desenvolvimento de um medidor de fra\u00e7c\u00e3ao de \u00e1agua que utilize tecnologia de microondas. Para avaliar algumas das diversas t\u00e1ecnicas de infer\u00eaencia utilizando-se microondas foi constru\u00e1da uma bancada para ensaios. Para que os testes fossem poss\u00e1veis tamb\u00e1em foi desenvolvida uma unidade micro-processada de controle e aquisi\u00e7ca\u00e3o de sinais. A unidade de controle e aquisi\u00e7c\u00e3ao desenvolvida para a bancada de testes \u00e1e a base da unidade de processamento do prot\u00e1otipo do medidor de fra\u00e7c\u00e3ao de \u00e1agua.\nOs objetivos do trabalho sao abaixo listados:\n\u2022\tDesenvolvimento de uma unidade de controle e aquisic\u00e7\u00e3ao de dados, utilizando um processador digital de sinais (DSP), com comunicac\u00e7\u00e3ao em rede atrav\u00e1es do protocolo Modbus TCP/IP com um software supervis\u00e1rio;\n\u2022\tDesenvolvimento de um software supervis\u00e9rio, em ambiente Windows, para a aquisi\u00e7c\u00f5ao de dados e configurac\u00e7\u00f5ao da unidade de aquisic\u00e7\u00f5ao e controle.\n\u2022\tConstruc\u00e7\u00f5ao de uma bancada de testes est\u00edaticos para avalia\u00e7c\u00f5ao das diversas t\u00e9cnicas de infer\u00e2ncia utilizando microondas para misturas bif\u00e9sicas homogeneizadas.\n\u2022\tAvaliac\u00e7\u00f5ao da viabilidade das t\u00e9ecnicas de medic\u00e7\u00f5ao baseadas na tecnologia de microondas para a utiliza\u00e7c\u00f5ao na medi\u00e7c\u00f5ao da frac\u00e7a\u00f5o de \u00e9agua em aplica\u00e7c\u00f5oes da industria de petr\u00e9leo e g\u00e9s.\nOs resultados do presente trabalho s\u00f5ao importantes para o desenvolvimento de um medidor de fra\u00e7c\u00f5ao de \u00e9agua industrial e, posteriormente, um medidor multif\u00e9asico. A principal simplifica\u00e7\u00e3o assumida no trabalho \u00e9 a composi\u00e7ao bifasica (\u00e9gua/\u00e9leo) do fluido. Na presen\u00e7a de g\u00e9s, sao esperados erros na determina\u00e7\u00f5o da fra\u00e7\u00f5o ou da porcentagem de \u00e9oleo na mistura, quando se utiliza somente um medidor de fra\u00e7c\u00f5ao de \u00e9agua.\nT\u00f5o importante quanto os resultados obtidos nos testes \u00e9 o dom\u00ednio da tecnologia de instrumenta\u00e7c\u00f5ao baseada em microondas. Tal tecnologia possui um custo relativamente alto. De uma maneira geral, quanto mais alta a frequ\u00e2ncia, maiores os custos dos equipamentos eletr\u00e2onicos necess\u00e9arios. Al\u00e9em disso, a maior parte dos componentes e equipamentos utilizados sao para uso na industria militar ou na industria aeroespacial, fato este que encarece e dificulta ainda mais a compra e o desenvolvimento com tal tecnologia.\n1.6\tOrganizacao da Disserta\u00e7\u00e3o\nNo cap\u00edtulo 2 \u00e9 realizada uma revis\u00f5o condensada da bibliografia referente a medidores de microondas. S\u00f5ao apresentados alguns fundamentos te\u00e9oricos sobre a tecnologia de microondas de maneira a proporcionar \u00e0queles que nao s\u00f5o da area uma introdu\u00e7\u00f5o ao assunto.\nNo cap\u00edtulo 3 \u00e9 apresentado o sistema experimental, constitu\u00eddo da bancada de testes e medi\u00e7c\u00f5ao. Cada uma das partes constituintes da solu\u00e7c\u00f5ao adotada \u00e9e detalhada e justificada.\nNo cap\u00e9tulo 4 s\u00f5ao apresentados os resultados experimentais obtidos com o sistema. Tamb\u00e9em sa\u00f5o descritos e comentados os ensaios que foram realizados para a obten\u00e7c\u00f5ao dos resultados apresentados.\nNo cap\u00edtulo 5 s\u00e3o apresentadas as conclus\u00f5es do trabalho. A efic\u00e1cia do sistema experimental de medi\u00e7ao e das t\u00e1cnicas de medi\u00e7\u00e3o estudadas s\u00e3o comentadas. Tamb\u00e1m s\u00e3o apresentadas sugest\u00f5es para trabalhos futuros, bem como uma lista de poss\u00edveis melhorias.\nCap\u00edtulo 2\nFundamentos Te\u00e9ricos\nNeste cap\u00edtulo \u00e9 realizada uma revis\u00e3o bibliogr\u00e1fica da literatura. S\u00e3o apresentados, de maneira condensada, alguns fundamentos teoricos sobre eletromagnetismo, intera\u00e7ao das ondas eletromagn\u00e9ticas com os materiais e sensores de microondas. O objetivo \u00e9 introduzir o assunto \u00e0queles que nao s\u00e3o da \u00e1rea. O conteudo do presente cap\u00edtulo foi todo extra\u00eddo da literatura, assim como a maior parte das figuras mostradas. A fonte de refer\u00eancia das figuras \u00e9 mostrada na sua descri\u00e7ao. Os temas s\u00e3o abordados de maneira introdut\u00e1ria e ilustrativa. Para mais detalhes devem-se consultar as refer\u00eancias sugeridas para o tema.\n2.1\tOndas Eletromagn\u00e9ticas\nAs chamadas Microondas, assim como a luz vis\u00edvel e os raios-X, s\u00e3o ondas eletro-magn\u00e9eticas. O que difere as microondas das demais ondas eletromagn\u00e9eticas \u00e9e o seu comprimento de onda A, ou sua frequ\u00eancia. O comprimento de onda A e a frequ\u00eancia f se correlacionam atrav\u00e9s da velocidade de propaga\u00e7ao c, dada pela equa\u00e7\u00e3o 2.1. A figura 2.1 mostra como \u00e9 dividido e categorizado o espectro eletromagn\u00e9tico.\nAf = v.\t(2.1)\nA radiac\u00e7a\u00e3o eletromagn\u00e9etica possui uma natureza dual, comportando-se tanto como onda quanto como part\u00e9cula ao mesmo tempo. O comportamento de part\u00e9cula \u00e9e explicado pela f\u00e9sica quantica. De acordo com a f\u00e9sica qu\u00e2ntica, a energia eletromagn\u00e9tica tem uma natureza discreta e n\u00e3ao pode existir em quantidades arbitr\u00e9arias, mas sim em multiplos da menor quantidade poss\u00e9vel, chamada de quantum (ou f\u00e9ton no caso da luz vis\u00e9vel). A energia de um quantum se relaciona com a frequ\u00eancia atrav\u00e9s da equac\u00e3o\nFigura 2.1: Espectro eletromagn\u00e9tico\nEq = hf,\t(2.2)\nonde Eq \u00e9 a energia do quantum e h \u00e9 a constante de Planck (h = 6,626 x 10-34Js). Assim, nas altas freqU\u00eancias (parte superior do espectro) o comportamento de part\u00edcula \u00e9 acentuado, por isso falamos em raios (raios Gama e raios-X). No entanto, na faixa das microondas a energia do quantum \u00e9 muito pequena e, portanto, podemos desprezar o comportamento part\u00edcula e considerar as microondas como ondas somente.\n2.2\tPropaga\u00e7\u00e3o das Ondas Eletromagn\u00e9ticas\nAs ondas eletromagn\u00e9ticas podem propagar-se livremente atrav\u00e9s do espa\u00e7o (ar ou v\u00e1cuo, por exemplo) ou atrav\u00e9s de linhas de transmissao, ou guias-de-onda. As ondas eletromagn\u00e9ticas tamb\u00e9m podem propagar-se atrav\u00e9s dos materiais, estando, no entanto, sujeitas a n\u00edveis de atenua\u00e7\u00e3o maiores ou menores dependendo, de uma maneira geral, da permissividade, da permeabilidade e da condutividade do meio, al\u00e9em da frequ\u00eancia da onda eletromagn\u00e9tica que se propaga. A propaga\u00e7\u00e3o das ondas eletromagn\u00e9ticas \u00e9 descrita atrav\u00e9s das equa\u00e7\u00e3es de Maxwell [11], [9], [6], as quais n\u00e3o ser\u00e3ao aqui mostradas nem abordadas, pois fogem do escopo do presente trabalho.\nO fen\u00eameno da propagac\u00e3o eletromagn\u00e9tica, seja no vacuo ou atrav\u00e9s de outro meio qualquer, \u00e9 regido por tr\u00eas propriedades do meio: pela permissividade el\u00e9trica [e], pela permeabilidade eletromagnetica [^] e pela condutividade [a]. As duas constantes se correlacionam atraves da equa\u00e7\u00e3o 2.3, conhecida como a equa\u00e7\u00e3o de onda eletromagn\u00e9tica.\nd 2E\nV2E -\t= 0,\t(2.3)\nonde E e a intensidade do campo eletrico. A velocidade de propaga\u00e7c\u00e3ao de uma onda num meio depende das constantes de permissividade e permeabilidade do material. Para meios sem perda a velocidade de propaga\u00e7\u00e3o pode ser expressa pela equa\u00e7\u00e3o\nV\t=\t(2.4)\nOs valores das constantes de permissividade (ou dieletrica) e permeabilidade no vacuo s\u00e3ao\ne0 = 8.854 x 10 12\t[F/m]\t(Farad/metros),\t(2.5)\n//,, = 4n x 10 7\t[H/m]\t(Henry/metros)\n(2.6)\nPara os valores acima, a velocidade de propaga\u00e7ao c0 \u00e9 de 2.998 x 108m/s, que e a velocidade de propaga\u00e7\u00e3o da luz no vacuo. Por volta de 1860 Maxwell determinou que a velocidade de uma onda eletromagnetica corresponde a 193.088 milhas por segundo. Nessa epoca a melhor medida direta existente da velocidade da luz era 193.118 milhas por segundo. A partir dessa informac\u00e3o, Maxwell chegou a conclus\u00e3o que a luz deveria ser um fen\u00eaomeno eletromagn\u00e9etico [1].\n2.3\tIntera\u00e7\u00e3o das Microondas com os Materiais\nAs microondas propagam-se em praticamente qualquer meio, sendo afetadas pelo meio em diversas maneiras. Os materiais na\u00e3o-condutores, ou que s\u00e3ao p\u00f3essimos condutores, s\u00e3o chamados de materiais diel\u00f3tricos. Nos materiais diel\u00f3tricos, devido as in-tera\u00e7co\u00e3es eletromagn\u00f3eticas das ondas com as cargas el\u00f3etricas dos materiais (el\u00f3etrons, \u00f3ons, mol\u00f3eculas polares), ou ent\u00e3ao com os dipolos magn\u00f3eticos do meio, as microondas s\u00e3ao atenuadas.\nA atenuac\u00e3o de um sinal de microondas \u00f3 normalmente medida em decib\u00f3is dB. A atenuac\u00e7\u00e3ao da amplitude de um campo \u00f3e dada pela equa\u00e7c\u00e3ao\nAe(dB) = 20logw(.\t(2.7)\nPor ser a pot\u00e2encia proporcional ao quadrado da amplitude do campo, a atenuac\u00e7\u00e3ao, ou ganho, na pot\u00e2encia do sinal eletromagn\u00f3etico \u00f3e dada pela equa\u00e7c\u00e3ao\nAp(dB) = 10logw (.\t(2.8)\nConforme apontado anteriormente, a intera\u00e7\u00e3o das ondas eletromagn\u00f3ticas com o meio depende das constantes de permissividade e permeabilidade do meio. As duas constantes s\u00e3ao expressas matematicamente como nu\u00f3meros complexos, conforme descrito abaixo\nP\u201cr \u2014 j^r ,\t(2.9)\ner = er \u2014 jer.\t(2.10)\nO \u00f3ndice r nas equa\u00e7\u00e3es acima indica que tratam-se de grandezas relativas. A refer\u00e2ncia nesse caso \u00f3 a permissividade el\u00f3trica e0 e a permeabilidade p,0 do v\u00f3cuo. As grandezas se relacionam atrav\u00f3es das equac\u00e7o\u00e3es\n6\t6r 60;\t(2.11)\n\u2014 ftr 1^0'\n(2.12)\nAs propriedades eletromagneticas do meio s\u00f5ao, portanto, descritas atraves de quatro constantes praticamente independentes (4, ,Pr \u25a0 /'\"), as quais, por sua vez, dependem de outras propriedades f\u00edsicas do meio (como por exemplo: mistura, composi\u00e7\u00f5o, densidade, temperatura, entre outras) e tamb\u00e9m da frequ\u00eancia de medi\u00e7\u00f5o utilizada.\nAtrav\u00e9s do conhecimento da rela\u00e7\u00f5o entre er, pr e as propriedades de um dado material, pode-se inferir sobre a composic\u00e7\u00f5ao, ou mistura, do material atrav\u00e9es da an\u00e9alise dos par\u00e2ametros de propaga\u00e7c\u00f5ao da onda nesse meio. Para materiais n\u00f5ao magn\u00e9eticos podemos assumir //,. = 1. Nesse caso, o problema fica reduzido a an\u00e1lise da constante de permissividade el\u00e9etrica do material.\nAl\u00e9em dos fatores de propaga\u00e7c\u00f5ao do meio, este tamb\u00e9em interage com as ondas ele-tromagn\u00e9eticas atrav\u00e9es da refra\u00e7c\u00f5ao e reflex\u00f5ao das ondas. Tais intera\u00e7c\u00f5oes n\u00f5ao sera\u00f5o aqui descritas, pois fogem do escopo e dos objetivos do presente trabalho. A reflex\u00f5ao das ondas eletromagn\u00e9ticas \u00e9 o princ\u00edpio b\u00e9sico de sistemas de radar. Mais informac\u00f5es sobre esse tipo de intera\u00e7c\u00f5oes e sistemas, podem ser encontradas em [6], [11].\n2.4\tPropriedades Diel\u00e9tricas dos Materiais\nOs materiais s\u00f5o normalmente compostos de part\u00edculas eletricamente carregadas, as quais se arranjam de tal maneira que qualquer regi\u00f5ao macrosc\u00e9opica do material tornase eletricamente neutra. Quando submetida a um campo el\u00e9trico externo Ee, este age como uma for\u00e7ca externa, alterando o equil\u00e9brio natural da regia\u00f5o a ele submetida. As part\u00e9culas positivas e negativas movem-se em dire\u00e7co\u00f5es opostas, polarizando a regi\u00f5ao. Essa polariza\u00e7ao produz um campo el\u00e9trico interno (EQ inferior ao campo externo. A permissividade relativa \u00e9e uma medida dos efeitos polarizantes na for\u00e7ca do campo, ou seja, qu\u00f5ao facilmente o meio \u00e9e polarizado.\nA parte complexa de er, ou seja e^ (ver equac\u00f5o 2.10), est\u00e9 relacionada \u00e0 capacidade dissipativa do meio, e nos da uma medida da atenuac\u00f5o imposta pelo meio \u00e0 propaga\u00e7ao de uma onda eletromagn\u00e9etica atrav\u00e9es desse. Num meio onde h\u00e9a perdas diel\u00e9etricas, a energia eletromagn\u00e9tica \u00e9 gradualmente transformada em calor. Tal perda \u00e9 devida a fric\u00e7ca\u00f5o provocada pelo deslocamento das cargas el\u00e9etricas quando o material se polariza. A polariza\u00e7c\u00f5ao ocorre constantemente, em sincronia com o campo el\u00e9etrico alternado induzido pela propaga\u00e7ao da onda eletromagn\u00e9tica atrav\u00e9s do meio. O valor de er \u00e9 sempre positivo e normalmente muito inferior a er .O menor valor para er \u00e9 zero, num meio onde n\u00f5ao h\u00e9a perdas diel\u00e9etricas.\nA parte real de er, ou seja er (ver equacao 2.10), esta relacionada a alterac\u00f5es na relac\u00e7a\u00f5o entre as intensidades dos campos el\u00e9etricos e eletromagn\u00e9eticos. A relac\u00e7\u00f5ao entre\nas intensidades dos campos el\u00e9tricos e magn\u00e9ticos caracteriza a impedancia da onda. A parte real de er tamb\u00e9m est\u00e1 relacionada a velocidade de propagacao da onda no meio. Isso implica num atraso no tempo de propaga\u00e7ao da onda, relativo a onda que se propaga no v\u00e9cuo. Este fenomeno tamb\u00e9m pode ser interpretado como um atraso na fase do sinal transmitido. A equa\u00e7\u00e3o abaixo \u00e9 uma correla\u00e7\u00e3o aproximada, para materiais nao magn\u00e9ticos e com baixas perdas diel\u00e9tricas (er er) [9]\nco\nc =\n(2.13)\n2.4.1\tPropriedades Diel\u00e9tricas da Agua\nDevido \u00e0s caracter\u00edsticas diel\u00e9tricas da agua, \u00e9 comum a utiliza\u00e7ao de medidores de microondas na determina\u00e7ca\u00e3o da fra\u00e7ca\u00e3o de a\u00e9gua de uma mistura. As mol\u00e9eculas de \u00e9gua, devido a sua estrutura molecular peculiar, caracterizam um dipolo permanente, conforme mostrado na figura 2.2. Este dipolo permanente cria na mol\u00e9cula de \u00e9gua um momento de dipolo diferente de zero. Devido a esse momento permanente das mol\u00e9eculas de \u00e9agua, a \u00e9agua l\u00e9quida \u00e9e considerada uma substa\u00eancia polar.\nFigura 2.2: Mol\u00e9cula de agua\nA permissividade da \u00e9gua e altamente dependente de fatores externos como a temperatura e a salinidade. Com o aumento da temperatura, a forca das ligac\u00e3es dos \u00e9tomos de hidrog\u00eanio se enfraquece. O efeito do enfraquecimento de tais liga\u00e7\u00e3es \u00e9 que a parte real da permissividade el\u00e9trica se reduz. O dipolo se movimenta com mais facilidade e em mais altas frequ\u00eancias, reduzindo as perdas diel\u00e9tricas (fator complexo da permissividade el\u00e9trica), e o arrasto no movimento de rota\u00e7ao das mol\u00e9culas \u00e9 reduzido,\ncausando menos fricc\u00e3o e, conseqUentemente, menos perdas dieietricas tambem. A presen\u00e7a de sais dissolvidos na agua altera a estrutura natural das moieculas, reduzindo o fator real da permissividade eletrica do meio [7].\nPor se tratar de uma subst\u00e2ncia polar, a permissividade da agua obedece \u00e0 rela\u00e7ao de Debye [9]. Alem disso, caso a agua possua sais dissolvidos, e necessario se levar em considera\u00e7ao no calculo da permissividade eletrica o termo referente \u00e0 condutividade da agua. A permissividade eletrica pode ser expressa pela equa\u00e7\u00e3o\n7\t7\n\t 7\t| ^rs__________\u00ae ^r_______________________^r<x +\tJ ,\n1 + JUT\n(2.14)\nonde e'r^ e a permissividade optica, para altas frequ\u00e2ncias (quando u to), ers e a permissividade estatica, para baixas frequ\u00e2ncias (quando u 0), t e o tempo de relaxa\u00e7c\u00e3ao e esta associada com a constante de tempo da resposta da polariza\u00e7c\u00e3ao a um degrau no campo eletrico, e a corresponde a condutividade do meio.\nNo grafico da figura 2.3 e mostrado como a permissividade eletrica da agua pura varia com a temperatura para diferentes frequ\u00e2ncias. As linhas vermelhas correspondem a variac\u00e3o da parte real da permissividade eletrica (\u00bf,) com a temperatura, enquanto as linhas verdes correspondem a varia\u00e7c\u00e3ao da parte imaginaria da permissividade eletrica (e'r). No grafico 2.4 sao mostradas as mesmas curvas do grafico 2.3 para a agua com uma concentra\u00e7ao de sais de 10ppt.\nFigura 2.3: Varia\u00e7ao da permissividade eletrica da agua pura com o aumento da temperatura para diferentes frequ\u00f3ncias [7]\nFigura 2.4: Varia\u00e7ao da permissividade el\u00f3trica da \u00f3gua salgada (10 ppt) com o aumento da temperatura para diferentes frequ\u00eancias [7]\nA influ\u00eancia da presen\u00e7a de diferentes concentrac\u00f5es de sais na constante diel\u00f3trica da agua \u00f3 mostrada com mais detalhes na figura 2.5, para uma frequ\u00eancia fixa.\nFigura 2.5: Varia\u00e7ao da permissividade eletrica da agua salgada com o aumento da temperatura para diferentes concentra\u00e7co\u00f5es de sais [7]\nA combinac\u00e7\u00f5ao dos graficos anteriores pode ser qualitativamente representada pelo\ngr\u00e1fico 2.6, onde as linhas tracejadas ilustram as varia\u00e7\u00f5es da constante diel\u00e9trica da \u00e1gua na presen\u00e7a de sais e as setas representam o sentido da varia\u00e7\u00f5o da constante diel\u00e9trica com o aumento da temperatura.\nWavelength (cm)\nFigura 2.6: Varia\u00e7\u00e3o da permissividade el\u00e9trica da \u00e1gua com a freq\u00fc\u00eancia, temperatura e concentra\u00e7ao de sais [7]\n2.5\tGera\u00e7\u00e3o, Transmiss\u00e3o e Processamento de Sinais de Microondas\nPara a gerac\u00e3o, transmissao, recep\u00e7\u00e3o e processamento de sinais de microondas s\u00e3o necess\u00e1rios diversos componentes passivos e ativos (estado s\u00e1lido), espec\u00edficos para este tipo de sinal, os quais s\u00e3o conectados atrav\u00e9s de guias-de-onda. Dentre os componentes passivos podemos citar: antenas, guias-de-onda, cabos coaxiais, terminadores, atenua-dores, divisores de pot\u00eancia x, filtros, isoladores, circuladores 1 2, entre outros. Alguns exemplos de componentes ativos, ou de estado-solido, s\u00e3o: osciladores, VCOs (Voltage Controlled Oscilators), detectores, interruptores 3, misturadores 4, amplificadores e atenuadores controla\u00e1veis.\n1do ingl\u00eas power dividers\n2do ingl\u00eas circulators\n3do ingl\u00eas switches\n4do ingl\u00eas mixers\nPela classifica\u00e7c\u00e3ao acima, s\u00e3ao considerados ativos todos os componentes de estado-s\u00e9olido. No entanto, outras classifica\u00e7c\u00e3oes consideram como ativos componentes que possuem resist\u00eancia negativa e que s\u00e3o capazes de gerar um sinal de RF a partir de uma polariza\u00e7\u00e3o DC [6].\n2.5.1\tPar\u00e2metros de Sistemas de Microondas\nUm sistema de microondas \u00e9 composto por diversos componentes, passivos e ativos, interconectados por linhas de transmiss\u00e3o. A efici\u00eancia do sistema como um todo \u00e9 calculada atraves do conhecimento da efici\u00eancia de cada uma das partes que o compoem. Para medir a efici\u00eancia de cada um dos componentes, incluindo as linhas de transmiss\u00e3o, s\u00e3o utilizados diversos par\u00eametros. Alguns dos par\u00eametros mais importantes s\u00e3ao apresentados a seguir:\na)\tCoeficiente de Reflexao\nA reflexao de uma parcela da pot\u00eancia do sinal transmitido entre dois componentes ocorre quando n\u00e3o ha um casamento da imped\u00eancia caracter\u00edstica da linha de transmissao, Z0, com a impedancia de entrada do componente, ZL. O coeficiente de reflexao rL tamb\u00e9m pode ser determinado em funcao de Z0 e ZL, onde o casamento das imped\u00eancias (Z0 = ZL) proporciona a maxima transfer\u00eancia de pot\u00eancia e, consequentemente, um coeficiente de reflex\u00e3ao nulo, conforme a equac\u00e7\u00e3ao [6]\nFl =\nZL \u2014 Z0\nZL + Z0\n(2.15)\nA pot\u00eancia refletida Pr por um dado componente pode ser calculada atrav\u00e9s do coeficiente de reflex\u00e3o conforme a equa\u00e7\u00e3o [6]\nPr = |Fl|2P\u00ed\u00bb,\n(2.16)\nonde Pin \u00e9 a pot\u00eancia incidente. A pot\u00eancia efetivamente transmitida Pt para o componente \u00e9 dada pela diferen\u00e7a entre Pin e Pr.\nb)\tCoeficiente de Onda Estacion\u00e1ria (VSWR)\nO coeficiente de onda estacion\u00e1ria VSWR (do ingl\u00eas Voltage Standing Wave Ratio) est\u00e1 relacionado \u00e0s interacoes entre o sinal incidente e o refletido. Nos casos onde\nn\u00e3o h\u00e1 o casamento entre a impedancia caracter\u00edstica da linha de transmiss\u00e3o com a impedancia de entrada e, portanto, uma parte da pot\u00eancia incidente \u00e1 refletida, a intera\u00e7\u00e3o entre a onda incidente e a refletida produz um padr\u00e3o de onda estacion\u00e1ria ao longo da linha de transmiss\u00e3o. O VSWR pode ser expresso em func\u00e3o do coeficiente de reflexao rL do componente, conforme a equacao\nVSWR =\n1 + |Fl\n1 -|Fl\n(2.17)\nc)\tPerdas de Inser\u00e7\u00e3o e Perdas de Retorno\nAs perdas de inser\u00e7\u00e3o 5 (IL) e as perdas de retorno 6 (RL) de um componente s\u00e3o dadas pelas equa\u00e7\u00f5es 2.18 e 2.19 respectivamente.\nIL =10log(,\nRL = 10 log t yA = 2\u00b0l\u00b0g |F\u00ea,\n(2.18)\n(2.19)\nonde Pt \u00e9 a pot\u00eancia efetivamente transmitida ao componente e Pin \u00e9 pot\u00eancia incidente no componente.\nd)\tPot\u00eancia de Sa\u00edda (dBm)\nAs medidas em decib\u00e9is [dB] sao normalmente relativas, ou expressam algum tipo de ganho. No entanto, a escala logar\u00edtmica tamb\u00e9m pode ser utilizada para expressar valores absolutos de pot\u00eaencia, sendo para tal necess\u00e9ario que se estabele\u00e7ca uma unidade de refer\u00eancia. Em sistemas de microondas sao normalmente utilizadas como refer\u00eancias 1mW e 1W. A unidade dBm \u00e9 expressa em dB relativos a 1mW, conforme a equac\u00e3o abaixo\nP (dBm) = 10 log P (mW).\t(2.20)\nUtilizando-se a formula acima obt\u00e9m-se que uma medida de 0dBm de pot\u00eancia \u00e9 equivalente a 1mW, assim como uma medida de 30dBm equivale a 1W. A unidade dBW tem 1W como pot\u00eancia de refer\u00eancia. Assim sendo, 0dBW equivale a 1W, bem como \u2014 10dBW equivale a 0,1W.\n5do ingl\u00eas Insertion Loss\n6do ingl\u00eas Return Loss\n2.5.2\tComponentes de um Sistema de Microondas\nAbaixo s\u00e3o descritos cada um dos componentes/modulos que ser\u00e3o utilizados no sistema. Para mais detalhes sobre a constru\u00e7ao e os princ\u00edpios funcionais dos componentes utilizados no sistema de microondas ver [23] e [25].\na) Antenas\nAs antenas sao componentes que irradiam e captam ondas eletromagn\u00e9ticas. Tratam-se de dispositivos rec\u00edprocos, ou seja, uma mesma antena pode ser utilizada para transmitir ou receber os sinais de microondas. As antenas s\u00e3ao responsa\u00edveis pela transicao das ondas guiadas e confinadas as guias-de-onda para o espa\u00e7o livre e viceversa. Enquanto as guias-de-onda s\u00e3o projetadas para apresentarem o m\u00ednimo poss\u00edvel de perdas por irradiac\u00e7\u00e3ao, as antenas por sua vez s\u00e3ao projetadas para irradiarem ao m\u00edaximo. As antenas podem ser classificadas de acordo com a sua geometria, com o ganho, com sua direcionalidade e com a largura da sua banda.\nPor se tratar de um componente com a apenas uma porta, ou conex\u00e3o, a imped\u00e2ncia de entrada e o VSWR da antena podem ser descritos atrav\u00e9s do coeficiente de reflex\u00e3o rL da antena, de acordo com a equa\u00e7ao 2.17, mostrada anteriormente. Uma antena ideal deveria possuir VSWR = 1, ou seja, toda a pot\u00e2ncia incidente Pin \u00e9 transmitida para a antena e n\u00e3o ha perda por reflexao. No entanto, para a maior parte das aplicacoes um VSWR &lt;2 \u00e9 aceit\u00e1vel.\nA largura de banda de uma antena 7 \u00e9 definida como uma faixa de frequ\u00e2ncias para a qual o desempenho da antena est\u00eda em conformidade com algum padr\u00e3ao. Um padrao normalmente empregado \u00e9 um VSWR &lt;2, o qual implica numa reflex\u00e3o de aproximadamente 11% da pot\u00e2ncia incidente. Assim, a largura de banda da antena (BW) corresponderia \u00e0 faixa de frequ\u00e2ncias para o qual o VSWR da antena \u00e9 menor ou igual a 2.\nA diretividade de uma antena Dmax \u00e9 uma medida comparativa das propriedades direcionais de uma antena qualquer em relac\u00e7\u00e3ao a uma antena isotr\u00e9opica, a qual possui, por definic\u00e3o, Dmax = 1. Uma antena isotr\u00f3pica \u00e9 uma antena te\u00f3rica, que nao pode ser realizada na pratica, que irradia energia igualmente em todas as dire\u00e7co\u00e3es. A efici\u00e2encia n de uma antena e dada pela equa\u00e7\u00e3o\nn = P\t'\"P \u25a0\t(2.21)\nPrad i Ploss\n7do ingl\u00eas bandwidth\nonde Prad \u00f3 a pot\u00e2ncia efetivamente irradiada pela antena e Ploss \u00f3 a diferenca entre a pot\u00e2ncia incidente na antena Pin e Prad.\nO ganho G de uma antena \u00f3 dado pelo produto da diretividade Dmax pela efici\u00e2ncia n da antena. De uma maneira geral, quanto mais concentrada no espa\u00e7o for a regi\u00e3o de irradia\u00e7\u00e3o da antena, maior ser\u00f3 o seu ganho. Na figura 2.7 sao mostradas comparativamente as distribui\u00e7c\u00e3oes espaciais da irradia\u00e7c\u00e3ao de tr\u00e2es tipo de antenas.\nFigura 2.7: Tipos de antenas - compara\u00e7\u00e3o dos diagramas de radia\u00e7\u00e3o [6]\nb) Divisores de Pot\u00eancia, Acopladores e Acopladores H\u00edbridos\nOs Divisores de Pot\u00e2ncia 8, Acopladores 9 e os Acopladores H\u00f3bridos 10 sao componentes utilizados para combinar ou dividir sinais. Um sinal incidente num desses componentes pode ter sua pot\u00e2encia de incid\u00e2encia divida em 2 ou mais portas. A pot\u00e2ncia nas portas de sa\u00eddas pode ser igualmente divida, o que equivale a um fator de acoplamento de 3dB, ou possuir outros valores para os fatores de acoplamento. Al\u00f3m disso, o sinal numa das portas de sa\u00f3da pode ser defasado em rela\u00e7\u00e3o \u00e0s outras portas, caracterizando um acoplador do tipo h\u00f3brido (hybrid). Enquanto os componentes do tipo Acoplador e Acoplador H\u00f3brido normalmente possuem 2 portas de sa\u00f3da, podendo apresentar fatores de acoplamento diferentes de 3dB ou defasagem entre os sinais das portas, os componentes do tipo Divisor de Pot\u00e2encia costumam apresentar mais de 2 portas, todas com sinais id\u00e2enticos. Estes tipos de componentes podem ser utilizados, por exemplo, em alimentadores de antenas, discriminadores de frequ\u00e2ncia,\n8do ingl\u00eas Power Spliters\n9do ingl\u00eas Couplers\n10do ingl\u00eas Hybrids\nmisturadores balanceados de sinais, moduladores, deslocadores de fase, detectores de fase, entre outras aplicares.\nc)\tIsoladores e Circuladores\nOs isoladores e circuladores sao componentes n\u00e3o rec\u00edprocos. Isso implica que os coeficientes de transmiss\u00e3o n\u00e3o s\u00e3o os mesmos para diferentes direc\u00e3es de propagacao. Um isolador normalmente apresenta uma baixa atenuac\u00e3o na transmiss\u00e3o de sinais da porta 1 para a porta 2, mas no sentido inverso, ou seja, na transmiss\u00e3o de sinais da porta 2 para a porta 1, este apresenta uma grande atenua\u00e7\u00e3o, conforme mostrado na figura 2.8a. Normalmente este tipo de componente \u00e9 utilizado na protec\u00e3o de fontes de energia como, por exemplo, osciladores e amplificadores, impedindo que a pot\u00eancia refletida devido a um descasamento de imped\u00eancias danifique o equipamento gerador, conforme ilustrado na figura 2.8b. Dessa forma, o componente inserido anteriormente a um isolador num sistema de gerac\u00e7\u00e3ao enxerga uma imped\u00eaancia perfeitamente casada, uma vez que n\u00e3o ha reflex\u00e3o de energia. Na pratica, a inser\u00e7\u00e3o de um isolador num sistema de microondas sempre ocasionara uma perda de pot\u00eaencia no sistema.\nFigura 2.8: Isoladores (a)Funcionamento e (b)exemplo de Aplicac\u00f5o [6]\nOs circuladores costumam apresentar 3 portas, conforme ilustrado na figura 2.9. Para o circulador ilustrado na figura 2.9, um sinal incidente na porta 1 \u00e9 acoplado a porta 2 somente, assim como um sinal que incida na porta 2 e somente acoplado a porta 3, e um sinal incidente na porta 3 \u00e9 somente acoplado \u00e0 porta 1. Os circuladores s\u00f5o uteis para o roteamento e separa\u00e7ao de sinais, por exemplo, em sistemas que utilizam uma unica antena para a transmiss\u00f5ao e recep\u00e7c\u00f5ao de sinais, conforme ilustrado na figura\n2.9.\nFigura 2.9: Aplica\u00e7\u00e3o t\u00edpica de um circulador [6]\nd)\tDetectores e Misturadores\nO detector \u00e9 um componente que converte a intensidade de um sinal de microondas numa tens\u00e3o DC. Tamb\u00e9m pode ser utilizado para demodular sinais de microondas, reconstruindo sinais de baixa frequ\u00eancias. A detec\u00e7\u00e3o \u00e9 obtida atrav\u00e9s da utiliza\u00e7\u00e3o de componentes com caracter\u00edsticas n\u00e3o-lineares de I-V (corrente - tens\u00e3o) como, por exemplo, jun\u00e7oes p-n e jun\u00e7\u00e3es do tipo Schottky-barrier. Na figura 2.10 sao ilustrados 3 exemplos do funcionamento dos detectores.\nFigura 2.10: Aplica\u00e7\u00f5es de detectores para (a)medir a intensidade de uma microonda, (b)demodular um sinal pulsado e (c)demodular um sinal anal\u00f3gico [6]\nOs misturadores 11 sao componentes utilizados para a conversao de frequ\u00eancias. Um mesmo componente pode ser utilizado tanto como upconverter ou downconverter.\n11 do ingl\u00eas mixers\nOs misturadores possuem 3 portas: LO (Local Oscilattor, ou freq\u00fc\u00eancia de refer\u00eancia), RF (sinal em alta freq\u00fc\u00eancia modulado) e IF (intermidiate-frequency signal . Quando utilizados para modular um sinal em alta frequ\u00eancia (upconverter), o sinal presente na porta RF (sa\u00edda modulada) e resultado da multiplica\u00e7ao do sinal de IF com LO. Quando utilizados na demodulacao de um sinal de alta frequ\u00eancia, o sinal presente em IF (sa\u00edda demodulada) \u00e9 resultado da multiplica\u00e7\u00e3o do sinal de RF por LO. As duas poss\u00edveis situac\u00e3es sao ilustradas na figura 2.11, na qual \u00e9 dada \u00eanfase para os resultados no dom\u00ednio da frequ\u00eancia (subtrac\u00e3o e adicao). Na figura 2.12 \u00e9 ilustrado o funcionamento do misturador como um multiplicador de sinais no dom\u00ednio do tempo.\nFigura 2.11: Aplica\u00e7\u00f5es de Misturadores [6]\nFigura 2.12: Misturador como um multiplicador de sinais [6]\ne)\tAtenuadores, Interruptores e Deslocadores de Fase\nAtenuadores, Interruptores 12 e Deslocadores de Fase 13 s\u00e3o componentes que proporcionam um controle eletr\u00f4nico sobre a atenua\u00e7\u00e3o e a fase de sinais de microondas. Estes tipos de componentes podem ser constru\u00eddos com ferrites ou dispositivos de estado-solido (como didos p-i-n ou FETs) sendo que os componentes de estado-s\u00f3lido costumam ser mais r\u00f3pidos, leves e baratos. Os interruptores s\u00e3o classificados de acordo com o numero de p\u00f3los que possuem, ou seja, o numero de portas de sa\u00edda que possuem (por exemplo: SPST, SPDT, SP3T). Teoricamente, os interruptores, quando ligados, n\u00e3o deveriam inserir nenhuma atenuac\u00e3o no sinal. Bem como quando desligados nao deveriam permitir nenhuma transferencia de pot\u00f4ncia. No entanto, os interruptores reais acabam inserindo alguma perda ao sinal quando ligados e permitindo que uma parcela pequena de pot\u00f4ncia seja transferida quando desligados. Na figura 2.14 \u00f3 mostrado um exemplo de aplica\u00e7c\u00e3ao de um interruptor.\nSourve\nBilis\n(digital information)\n\u2014-*\u25a0\nOutput\n0 10 10 0 0 10\nFigura 2.13: Exemplo de aplica\u00e7\u00e3o de um interruptor [6]\nOs interruptores tamb\u00e9m s\u00e3o utilizados na constru\u00e7\u00e3o de Deslocadores de Fase. O atraso da fase \u00f3e obtido for\u00e7cando-se o sinal a percorrer um caminho de comprimento diferente do caminho normal. A figura 2.14 ilustra o funcionamento de um Deslocador de Fase.\nEm componentes de estado s\u00f3olido, o chaveamento \u00f3e obtido atrav\u00f3es da variac\u00e7\u00e3ao da imped\u00f4ancia do dispositivo. A varia\u00e7c\u00e3ao da imped\u00f4ancia \u00f3e obtida atrav\u00f3es de diferentes estados de polariza\u00e7c\u00e3ao. Alterando-se a polariza\u00e7ca\u00e3o continuamente pode-se obter n\u00f3veis cont\u00f3nuos de atenuac\u00e7\u00e3ao dos sinais. Este tipo de componente \u00f3e conhecido como ate-nuador control\u00f3vel (normalmente por uma tensao anal\u00f3gica), ou atenuador vari\u00f3vel, e entre outras aplicac\u00e7\u00e3oes s\u00e3ao utilizados no controle autom\u00f3atico de ganho em sistemas de recep\u00e7c\u00e3ao e processamento de microondas.\n12 do ingl\u00eas switch\n13do ingl\u00eas Phase-Shiffters\n/\nFigura 2.14: Utilizac\u00e3o de um interruptor na constru\u00e7ao de um deslocador de fase [6]\nf)\tOsciladores e Amplificadores\nOs osciladores e amplificadores s\u00e3ao componentes ativos, sendo constitu\u00e1dos de algum dispositivo de estado s\u00e1olido capaz de produzir resist\u00eaencias negativas quando devidamente polarizado. Enquanto uma resist\u00eancia positiva dissipa a pot\u00eancia de sinais de microondas, introduzindo perdas, uma resist\u00eaencia negativa \u00e1e capaz de produzir sinais eletromagn\u00e1eticos a partir de uma polariza\u00e7c\u00e3ao DC do dispositivo de estado-s\u00e1olido.\nOs osciladores s\u00e3ao utilizados como fontes de microondas em transmissores e como osciladores locais (LO) em moduladores e demoduladores (upconverters e downconverters). Dependendo da forma que sao constru\u00eddos, a frequ\u00eancia de oscila\u00e7\u00e3o pode ser variada continuamente, normalmente atrav\u00e1es de uma tens\u00e3ao, caracterizando um oscilador controlado por tens\u00e3o, ou simplesmente um VCO. Alguns dos par\u00e2metros mais importantes na caracterizac\u00e7\u00e3ao dos osciladores sa\u00e3o: pot\u00eaencia de sa\u00e1da, a DC-to-RF efficiency, a rela\u00e7\u00e3o sinal-ru\u00eddo, a estabilidade e a faixa de varia\u00e7\u00e3o da frequ\u00eancia.\nO amplificador \u00e9 um dispositivo que proporciona um ganho na pot\u00eancia do sinal nele incidente. Um amplificador pode ser cascateado com outros amplificadores de modo a se obter um ganho maior. Os amplificadores que s\u00e3ao utilizados no u\u00edltimo est\u00e1gio de um transmissor, de maneira a proporcionar uma alta pot\u00eancia de sa\u00edda, sao chamados de Amplificadores de Pot\u00eancia. Os amplificadores utilizados na recepc\u00e3o de sinais normalmente possuem uma boa rela\u00e7c\u00e3ao de sinal-ru\u00eddo, sendo chamados de LNA (Low-Noise Amplifier). Alguns par\u00eametros importantes para um amplificador sa\u00e3o: o ganho, a rela\u00e7c\u00e3ao sinal-ru\u00eddo, a largura de banda e a estabilidade. Um bom amplificador na\u00e3o deve apresentar oscila\u00e7c\u00e3oes na sua banda de opera\u00e7c\u00e3ao. A estabilidade do amplificador \u00e9 a sua resist\u00eancia a oscila\u00e7\u00e3o.\n2.6\tTipos de Medidores de Microondas\nUm meio pode afetar as microondas que nele se propagam de diversas formas. A maneira como o meio vai afetar as microondas depende das constantes de permeabilidade e permissividade desse, as quais, por sua vez, dependem de outras propriedades f\u00edsicas do meio. O conhecimento da natureza da depend\u00eancia de er e p,r das demais propriedades f\u00e9sicas do meio nos permite inferir sobre as propriedades do meio atrav\u00e9es da medi\u00e7c\u00e3ao destas constantes diel\u00e9etricas. A medi\u00e7c\u00e3ao das constantes diel\u00e9etricas do meio, por sua vez, pode ser realizada com base no estudo da maneira como o meio afeta um sinal de microondas, cujos par\u00eaametros sejam inicialmente conhecidos. O tipo de medidor, ou t\u00e9ecnica de medic\u00e7a\u00e3o, de microondas utilizado depende do par\u00eaametro de propaga\u00e7c\u00e3ao que se deseja medir. Al\u00e9em disso, o tipo do medidor de microondas e a maneira mais adequada de se medir um dado par\u00eaametro dependem das caracter\u00e9sticas do meio. Os medidores de microondas podem ser classificados em 5 categorias [9][20], as quais ser\u00e3o sucintamente abordadas na sec\u00e3es subsequentes, e em sensores especiais para aplica\u00e7c\u00e3oes espec\u00e9ficas.\n2.6.1\tSensores de Transmissao\nEsta \u00e9e a concepc\u00e7a\u00e3o mais direta e simples para um medidor de microondas. Neste tipo de medidor s\u00e3ao utilizados um transmissor, um receptor e um par de antenas, normalmente do tipo corneta (horn). As duas antenas costumam ser instaladas de maneira que o material a ser medido, ou MUT, fique entre elas, conforme mostrado na figura 2.15. O medidor mostrado na figura 2.15 tamb\u00e9em \u00e9e conhecido como Free-Space Transmission Sensor. Nesse arranjo, a permissividade do meio afeta tanto a amplitude como a fase da onda que se propaga atrav\u00e9es deste.\nA principal vantagem deste tipo de medidor \u00e9e a sua simplicidade. A principal desvantagem \u00e9 a sensibilidade deste tipo de medidor \u00e0s reflex\u00f5es no interior do sistema. As reflex\u00f5es afetam diretamente a precisao na medi\u00e7ao da atenua\u00e7\u00e3o. Se a sec\u00e3o transversal do MUT \u00e9 superior a A/4 e a atenua\u00e7\u00e3o do meio \u00e9 pequena, as multiplas reflex\u00e3es internas v\u00e3ao provocar o aparecimento de ondas estacion\u00e9arias entre as superf\u00e9cies do MUT, adicionando uma varia\u00e7\u00e3o peri\u00e9dica \u00e0 atenua\u00e7\u00e3o medida [9].\nPor outro lado, a medi\u00e7c\u00e3ao da fase \u00e9e muito menos afetada pelas mu\u00e9ltiplas reflex\u00e3oes e pelas ondas estacion\u00e9arias do que a medic\u00e7\u00e3ao da atenua\u00e7c\u00e3ao. A fase \u00e9e medida com a utiliza\u00e7c\u00e3ao de um Misturador. Para tal, se faz necess\u00e9aria a utiliza\u00e7c\u00e3ao de um sinal de refer\u00eaencia, id\u00eaentico ao sinal transmitido, mas que n\u00e3ao seja afetado pelo meio. A medida do atraso de fase corresponde a uma tens\u00e3o DC na porta IF (ver se\u00e7ao 2.5.2) do Misturador. Isto se deve ao fato de se obter, como resultado da multiplica\u00e7c\u00e3ao de\nV\nR\nFigura 2.15: Sensor de Transmiss\u00e3o [9] duas ondas id\u00eanticas, por\u00e9m defasadas, um sinal DC proporcional ao defasamento das ondas.\nNo entanto, a medicao da fase esta sujeita ao problema da ambiguidade da fase [26]. Este problema est\u00e9 associado ao fato de que a medic\u00e3o do \u00eangulo da fase s\u00e9 \u00e9 poss\u00e9vel para valores entre -180\u00b0 e +180\u00b0. Caso a se\u00e7\u00e3o transversal do material a ser medido seja maior que o comprimento de onda no material, o problema da ambiguidade de fase pode aparecer. Uma maneira de se eliminar o problema da ambiguidade de fase \u00e9 realizar a medic\u00e3o do atraso de fase em duas frequ\u00eancias distintas. Para mais detalhes sobre esta t\u00e9ecnica de medi\u00e7c\u00e3ao ver [26].\nOutra maneira de realizar a medic\u00e3o das constantes diel\u00e9tricas do material, evitando os problemas das multiplas reflex\u00e3es, das ondas estacion\u00e1rias e da ambiguidade de fase, \u00e9 atrav\u00e9s da utilizac\u00e3o da t\u00e9cnica de FMCW (Frequency-Modulated Continuous Wave [20]. Esta t\u00e9ecnica, normalmente utilizada em sistemas de radar, mede na verdade o atraso no tempo sofrido pelo sinal ao atravessar o meio. A t\u00e9cnica consiste em realizar uma variac\u00e3o cont\u00ednua e linear da frequ\u00eancia de transmiss\u00e3o do sistema. Na pr\u00e9tica isto equivale a realizar uma modulac\u00e3o em frequ\u00eancia (FM) do sinal a ser transmitido. O sinal recebido \u00e9e ent\u00e3ao multiplicado pelo sinal original. Devido ao atraso temporal sofrido pelo sinal recebido, o resultado da multiplicac\u00e7\u00e3ao dos dois sinais produz um sinal anal\u00f3gico, em baixa frequ\u00eancia, com uma frequ\u00eancia de batimento na porta IF do Misturador utilizado para a multiplica\u00e7\u00e3o dos sinais. A frequ\u00eancia de batimento esta diretamente relacionada ao atraso sofrido pelo sinal. O m\u00e9todo de FMCW \u00e9 ilustrado na figura 2.17. Para mais detalhes sobre este m\u00e9todo, ver [6].\nAl\u00e9em dos problemas j\u00e9a citados na utiliza\u00e7c\u00e3ao desse m\u00e9etodo de infer\u00eaencia, existem alguns outros inconvenientes que precisam ser levados em considera\u00e7ca\u00e3o. A medi\u00e7c\u00e3ao direta tanto da atenua\u00e7ao quanto da fase \u00e9 afetada diretamente pela n\u00e3o-linearidade e\nFigura 2.16: M\u00e9todo de FMCW [6]\npela sensibilidade dos detectores de fase e de intensidade. A principal causa de erros e varia\u00e7\u00f5es nesse tipo de medicao \u00e9 a temperatura do meio, a qual afeta diretamente sua constante diel\u00e9trica. Isto implica na necessidade de que se utilize algum tipo de compensa\u00e7\u00e3o de temperatura no sistema de medicao. Uma outra alternativa ao problema da sensibilidade deste tipo de m\u00e9todo \u00e9 atrav\u00e9s da medi\u00e7\u00e3o frequente de um padrao conhecido. Atraves dos desvios na medi\u00e7\u00e3o do padr\u00e2o, podem-se corrigir os valores da medicao de interesse. Na figura 2.17 \u00e9 ilustrado a configura\u00e7\u00e3o de um sistema de medic\u00e7\u00e3ao de atenua\u00e7c\u00e3ao e atraso de fase utilizando-se um medidor tipo sensor de transmiss\u00e3o. As linhas tracejadas indicam algumas alternativas, j\u00e1 citadas, para a compensa\u00e7c\u00e3ao dos erros inerentes a essa concepc\u00e7\u00e3ao de medidor.\nOutro metodo comumente empregado na melhoria do desempenho deste tipo de sensor e o metodo da medi\u00e7ao balanceada14 [9]. Este metodo de medi\u00e7ao utiliza-se de elementos controlaveis, como atenuadores controlaveis e deslocadores de fase controlaveis,\n14tradu\u00e7\u00e3o do ingl\u00eas: Balancing Method\nFigura 2.17: Sistema para medicao da atenuac\u00e3o e da fase [9] para manter os n\u00e9veis dos sinais incidentes nos detectores dentro de uma determinada faixa, reduzindo a influ\u00eancia da n\u00e3o-linearidade e da reduzida faixa dinamica de alguns dos sensores. Trata-se, na verdade, de um m\u00e9todo de infer\u00eancia em malha-fechada, no qual a principal informacao sobre as caracter\u00edsticas diel\u00e9tricas do meio prov\u00e9m do esfor\u00e7o de controle necess\u00e9rio para se manter as medi\u00e7\u00e3es do sistema numa dada refer\u00eancia. A utiliza\u00e7\u00e3o desse m\u00e9todo permite que os detectores do sistema operem no ponto \u00e9timo de sua faixa din\u00f4mica, maximizando assim par\u00e2metros metrol\u00e9gicos do sistema.\n2.6.2\tSensores de Resson\u00e2ncia\nPara se medir o fen\u00f4omeno da resson\u00f4ancia de uma microonda \u00e9e necess\u00e9ario primeiro criar condi\u00e7c\u00e3oes para que tal fen\u00f4omeno apare\u00e7ca. Para tal, s\u00e3ao normalmente utilizadas cavidades ressonantes. Uma cavidade ressonante pode ser descrita como sendo uma linha de transmiss\u00e3ao limitada por descontinuidades de imped\u00f4ancia em ambos os lados [9]. Al\u00e9em da cavidade ressonante, o fen\u00f4omeno da ressona\u00f4ncia requer que um campo eletromagn\u00e9etico seja criado dentro da cavidade. As microondas precisam ser geradas atrav\u00e9es de um circuito externo e enta\u00e3o, atrav\u00e9es de uma abertura ou antena, irradiadas no interior da cavidade. As descontinuidades de impeda\u00f4ncia fazem com que a microonda que se propaga seja refletida diversas vezes. O fen\u00f4omeno de resson\u00f4ancia s\u00e9o ocorre em frequ\u00f4ncias especificas e requer que a condi\u00e7ao de ressonancia seja satisfeita. A condi\u00e7\u00e3o de ressonancia, dada pela equac\u00e3o 2.22, \u00e9 satisfeita quando a rela\u00e7\u00e3o entre o comprimento da onda e as dimens\u00e3oes da cavidade assume determinados valores.\n2l +\t+ fa = n \u2022 2n\nA\n(2.22)\nonde l \u00e9 comprimento da cavidade (ou linha de transmiss\u00f5o), ^1 e sao os angulos de fase dos coeficientes de reflex\u00f5o das extremidades da cavidade, e n \u00e9 um inteiro.\nA condi\u00e7\u00f5o de resson\u00eancia acima descrita vale para uma cavidade ressonante vazia. Caso a cavidade seja preenchida com algum material diel\u00e9trico, a frequencia de resson\u00eancia ocorrera numa frequ\u00eancia inferior, uma vez que o comprimento de onda depende da constante diel\u00e9trica do meio. Para os casos em que er \u00bb o comprimento de onda pode ser expresso em fun\u00e7ao da permissividade el\u00e9trica atrav\u00e9s da equa\u00e7\u00f5o [9]:\nAo\n(2.23)\nA permissividade el\u00e9etrica pode ser ent\u00e3ao calculada de forma aproximada em fun\u00e7c\u00e3ao da frequ\u00eancia de resson\u00eancia da cavidade vazia e da frequ\u00eancia de ressonancia preenchida com um dado material dieletrico. Para os casos em que \u00abr \u00bb \u00abr a permissividade el\u00e9etrica do meio pode ser aproximada pela equac\u00e7\u00e3ao 2.24.\n\u00abr \u00ab (f)2-\t(2.24)\nfr\nonde fr0 \u00e9 a frequ\u00eancia de resson\u00eancia da cavidade vazia e fr \u00e9 a frequ\u00eancia de resson\u00eancia obtida na presen\u00e7a de um determinado MUT.\nPara a medic\u00e7\u00e3ao da constante diel\u00e9etrica do meio atrav\u00e9es de um medidor de res-sona\u00eancia, \u00e9e necess\u00e9ario primeiro induzir um campo eletromagn\u00e9etico dentro da cavidade. A varia\u00e7ao da frequ\u00eancia das ondas irradiadas na cavidade, dentro de uma faixa determinada, permitir\u00e1 a ocorr\u00eancia do fenomeno de resson\u00e2ncia. A detecc\u00e3o do fen\u00f4meno de resson\u00eancia fr pode ser realizada atrav\u00e9s da medic\u00e3o da atenua\u00e7ao ou da fase, ou ambas, utilizando-se 2 t\u00e9cnicas [20]: atrav\u00e9s da medicao do coeficiente de reflexao na linha utilizada para transmitir o sinal de microondas para a cavidade (ver figura 2.19), ou atrav\u00e9es da medi\u00e7c\u00e3ao do coeficiente de transmiss\u00e3ao, com a utiliza\u00e7ca\u00e3o de um receptor independente dentro a cavidade (ver figura 2.20). Nas figuras 2.18 e 2.19 sao mostrados os comportamentos esperados de fase e amplitude para uma faixa de frequ\u00eancias pr\u00e9xima na vizinhan\u00e7a de fr para as t\u00e9cnicas de coeficiente de reflex\u00e3o e de coeficiente de transmiss\u00e3ao, respectivamente.\nOs medidores de cavidade de resson\u00eancia ja foram muito estudados por [9] e [20]. E n\u00e3ao ser\u00e3ao aqui abordados em mais detalhes pois fogem do escopo do presente trabalho.\nFigura 2.18: Gr\u00e1fico da fase e magnitude num medidor de coeficiente de reflex\u00e3o com fr = 1.5GHz [20]\n2.6.3\tSensores de Reflex\u00e3o\nOs sensores de reflex\u00e3o medem as caracter\u00edsticas do sinal refletido por um objeto, atraves da transmiss\u00e3o de um sinal conhecido. Os sensores de reflexao podem ser classificados em sensores de contato ou sensores de espa\u00e7o livre, quando utilizados para medir as propriedades diel\u00e1etricas dos materiais, ou ainda como sensores de radar, quando utilizados na medi\u00e7\u00e3o da distancia e velocidade de objetos. Na industria de petr\u00e1leo e gas, este tipo de sensor \u00e1 utilizado na medic\u00e3o de n\u00e1vel em tanques [27], ver figura 2.20, e em alguns casos na medi\u00e7ao de par\u00e2metros de escoamento, conforme ilustrado na figura 2.21.\nOs sensores de contato utilizam linhas de transmissao ou guias-de-onda abertas numa das extremidades. E esta extremidade aberta que deve ser colocada em contato com o objeto ou meio do qual se deseja medir as propriedades diel\u00e1etricas. O coeficiente de reflexao da extremidade aberta r tem suas caracter\u00edsticas de fase e amplitude afetadas pela constante diel\u00e1trica \u00e9r do meio. Os sensores de espaco livre funcionam de maneira similar, no entanto enquanto nos sensores de contato as linhas de transmiss\u00e3ao s\u00e3o colocadas em contato com o objeto, nos sensores de espaco livre s\u00e3o utilizadas antenas para a transmiss\u00e3o e recepc\u00e3o do sinal refletido. Ambos os m\u00e1todos permitem a infer\u00e2ncia sobre o coeficiente de reflex\u00e3o r complexo do meio e sobre sua permissivi-dade.\nFigura 2.19: Gr\u00e1fico da fase e magnitude num medidor de coeficiente de transmiss\u00e3o com fr = 1.5GHz [20]\nFigura 2.20: Sensor de ressonancia utilizado na medi\u00e7\u00e3o de n\u00edvel de um tanque de oleo de um navio [9]\nOs sensores do tipo radar, ao contrario dos demais tipos de sensores ate agora discutidos, n\u00e3o sao utilizados na medi\u00e7\u00e3o das propriedades dos materiais e sim na medi\u00e7ao de dist\u00e2ncia, movimento, vibra\u00e7\u00f5es, interfaces, entre outros. De acordo com o princ\u00edpio de funcionamento os radares podem ser classificados em: radar de pulso, radar de impulso, radar FMCW (Frequency Modulated Continuou Wave) e radares de efeito Doppler.\nO tipo de radar mais simples e o radar de pulso. Nesse tipo de radar, a onda portadora e transmitida apenas por um pequeno intervalo de tempo com a utiliza\u00e7c\u00e3ao\nFigura 2.21: Princ\u00edpio de funcionamento de um medidor de par\u00e2metros de escoamento utilizando um sensor de reflexao [9]\nde um interruptor (switch), conforme ilustrado na figura 2.22. Sendo a velocidade de propaga\u00e7ao c conhecida, com base no tempo que a onda refletida demora para retornar ao sistema, \u00e9 poss\u00edvel calcular a distancia do objeto, conforme a equa\u00e7ao\n2l c \u2019\n(2.25)\nonde l \u00e9 a distancia do objeto e c \u00e9 a velocidade de propaga\u00e7\u00e3o da onda no meio.\nQuanto menor o tamanho do pulso, maior a resolu\u00e7c\u00e3ao do sistema. Quando se deseja maximizar a resolu\u00e7c\u00e3ao do sistema e a maxima dista\u00eancia do objeto a ser medido e pequena, utiliza-se o radar de impulso. Neste tipo de radar o pulso transmitido e reduzido ao maximo. E importante ressaltar que quanto menor o pulso, maior e a banda necessaria e pior e a imunidade aos ru\u00eddos.\nO radar de efeito Doppler e normalmente utilizado na medicao da velocidade de um objeto. Isto se deve ao fen\u00f4meno f\u00edsico conhecido como efeito Doppler. O efeito Doppler \u00e9 caracterizado pela alterac\u00e3o da frequ\u00f4ncia do sinal recebido em rela\u00e7\u00e3o ao sinal transmitido. Tal fenomeno ocorre quando o objeto sob analise esta em movimento em relacao ao sistema de medi\u00e7ao. Nesse tipo de radar um sinal de frequ\u00f4ncia constante \u00e9 continuamente transmitido. O desvio de frequ\u00f4ncia (fd) do sinal refletido pode ser calculado com a utiliza\u00e7\u00e3o de um misturador (mixer) e se relaciona com a velocidade do objeto sob ana\u00e9lise atrav\u00e9es da equa\u00e7c\u00e3ao\n2v\nfd = \u2014 X fo,\t(2.26)\nc\nonde vr \u00e9 a velocidade relativa do objeto, c \u00e9 a velocidade de propagacao da onda no meio e f0 \u00e9 a frequ\u00f4ncia do sinal transmitido.\nNo radar de FMCW a frequ\u00f4ncia do sinal transmitido e continuamente variada,\nFigura 2.22: Princ\u00f3pio de funcionamento de um radar de pulso [6]\ncom a utilizac\u00e3o de um VCO, para cima e para baixo entre duas frequ\u00e2ncias f1 e f2, conforme mostrado na figura 2.23. A frequ\u00e2ncia do sinal recebido ser\u00f3, portanto, diferente da frequ\u00e2ncia do sinal sendo transmitido. A diferen\u00e7a entre as frequ\u00e2ncias (fiF) transmitida e recebida pode ser entao calculada atrav\u00f3s da utiliza\u00e7ao de um misturador (mixer), sendo dada pela equa\u00e7\u00e3o\nfiF = t^) ,\t(2-27)\nonde T \u00f3 o tempo de propaga\u00e7\u00e3o da onda desde o momento que foi transmitida at\u00f3 o momento de sua recep\u00e7ao, e T \u00f3 o per\u00f3odo da onda modulada.\nO radar tipo FMCW pode ser utilizado tanto na determina\u00e7ao da dist\u00e2ncia quanto da velocidade do objeto. Caso o objeto esteja em movimento, relativamente ao sistema de medi\u00e7\u00e3o, haver\u00f3 um deslocamento na frequ\u00e2ncia recebida pelo sistema. Para mais detalhes ver [6].\nt\nFigura 2.23: Princ\u00edpio de funcionamento de um radar de FMCW [9]\n2.6.4\tSensores Radiom\u00e9tricos\nOs radi\u00f4metros, como s\u00e3o chamados, medem a intensidade da radia\u00e7\u00e3o t\u00e9rmica de corpo negro 15 irradiada por um objeto. Essa radia\u00e7\u00e3o \u00e9 a mesma que objetos quentes emitem nas frequ\u00f4ncias da luz vis\u00edvel quando se tornam incandescentes. Para a faixa das microondas, a intensidade da irradia\u00e7ao \u00e9 diretamente proporcional a temperatura do objeto, sendo no entanto dependente da sua constante de emissividade. A constante de emissividade do objeto esta relacionada \u00e0s propriedades diel\u00e9tricas e dimensionais da superf\u00edcie e a sua capacidade de refletir e absorver ondas eletromagn\u00e9ticas. Um corpo negro ideal possui emissividade igual a 1. Toda a sua radia\u00e7ao t\u00e9rmica \u00e9 irradiada atraves da sua superf\u00edcie, assim como esse absorve toda radia\u00e7\u00e3o (e consequentemente luz) nele incidente. Na pratica, os objetos possuem emissividade menor que 1 e portanto uma parte da sua radiac\u00e7\u00e3ao t\u00e9ermica \u00e9e refletida e n\u00e3ao consegue transpor a superf\u00e9cie do objeto. Na figura 2.24 \u00e9 ilustrado o princ\u00e9pio de funcionamento de um radi\u00f4metro.\nO radi\u00f4metro de microondas \u00e9 um sensor, suficientemente sens\u00edvel, capaz de detectar a radia\u00e7c\u00e3ao t\u00e9ermica de corpo negro de um objeto na faixa das microondas. Os radi\u00f4ometros sa\u00e3o considerados passivos pois eles apenas captam as radia\u00e7c\u00e3oes t\u00e9ermicas emitidas por um objeto. Esse tipo de sensor \u00e9e amplamente empregado no monitoramento da superf\u00edcie terrestre por sat\u00e9lites e avioes. Dentre algumas das aplica\u00e7\u00f5es de monitoramento da superf\u00e9cie terrestre, podemos citar: o monitoramento de inc\u00f4endios florestais, o monitoramento da camada de gelo polar e o monitoramento de vazamentos de \u00f3leo nos oceanos. Na industria sao utilizados na medi\u00e7ao remota da temperatura de processos, onde devido as altas temperaturas, ou ainda outros fatores, nao \u00e9 poss\u00e9vel a utiliza\u00e7ca\u00e3o de sensores de contato ou de infravermelho. Tamb\u00e9em sa\u00e3o citadas na litera-\n15do ingl\u00eas black-body radiation\nFigura 2.24: Princ\u00edpio de funcionamento de um radiometro, onde Tp \u00e9 a temperatura do objeto, Tb \u00e9 a temperatura de brilho e n \u00e9 a emissividade [9]\ntura aplicac\u00f5es desse tipo de sensor na medicina [9].\n2.6.5\tSensores Tomograficos\nA interac\u00e7a\u00e3o das microondas com os materiais tamb\u00edem pode ser utilizada na produ\u00e7\u00e3o de imagens do interior de um objeto ou de um meio. Essa t\u00e9cnica de medi\u00e7\u00e3o \u00e9 amplamente empregada na medicina, com a utilizac\u00e3o de sensores de raios-X e de ressonancia magn\u00e9tica para a visualizac\u00e3o do interior do paciente. A tomografia utilizando microondas \u00e9 realizada atrav\u00e9s da utiliza\u00e7\u00e3o de um arranjo de sensores 16 que captam sinais de microondas que foram transmitidos atrav\u00e9s do objeto, ou meio, em diferentes posic\u00e3es, conforme mostrado na figura 2.25. A distribui\u00e7\u00e3o geom\u00e9trica dos sensores varia de acordo com a aplica\u00e7\u00e3o. Quando utilizados na medi\u00e7ao de par\u00eametros de escoamento em tubos (aplica\u00e7ao t\u00e9pica na industria de petr\u00f3leo e g\u00e9s) sao normalmente dispostos radialmente ao redor do tubo.\nOs sensores utilizados na constru\u00e7ca\u00e3o de um tom\u00e9ografo s\u00e3ao praticamente os mesmos utilizados num sensor de transmissa\u00e3o de espa\u00e7co livre. Assim como num sensor de transmiss\u00e3ao, os sensores do tom\u00e9ografo medem a atenua\u00e7c\u00e3ao e o atraso de fase do sinal. No entanto, em vez de utilizar um unico sensor, na tomografia de microondas sao\n16do ingl\u00eas array of receivers\nSENSOR ARRAY\nFigura 2.25: Princ\u00edpio de funcionamento de tom\u00f3grafo de microondas [9] utilizados v\u00f3rios sensores. A reconstru\u00e7\u00e3o da imagem com base nos dados adquiridos pelos diversos sensores requer v\u00f3rios caiculos e demanda um processamento computacional significativo, sendo essa uma das principais limita\u00e7\u00e3es desse tipo de sensor. Na industria de petr\u00f3leo e gas, este tipo de sensor \u00f3 utilizado na determina\u00e7\u00e3o do tipo de um escoamento multif\u00f3sico [20].\n2.7\tConclus\u00f5es\nNo presente cap\u00f3tulo foi apresentada uma breve introduc\u00e7\u00e3ao ao eletromagnetismo. As microondas foram caracterizadas como ondas eletromagn\u00e9ticas. Os fenomenos decorrentes da intera\u00e7c\u00e3ao das ondas eletromagn\u00f3eticas, e mais especificamente as microondas, com os materiais foram apresentados, ainda que em car\u00f3ater introdut\u00f3orio. As peculiaridades diel\u00f3etricas da \u00f3agua foram descritas, caracterizando as vantagens da utiliza\u00e7ca\u00e3o dos sensores de microondas para a medi\u00e7ca\u00e3o da fra\u00e7c\u00e3ao de a\u00f3gua. Os componentes utilizados na construc\u00e7\u00e3ao de um sistema el\u00f3etrico de gera\u00e7ca\u00e3o e processamento de microondas foram apresentados, bem como os principais par\u00e2metros utilizados na especifica\u00e7\u00e3o desses componentes. Foram apresentados os tipos de sensores de microondas existentes e suas principais aplicac\u00e7\u00e3oes. Os princ\u00f3pios de constru\u00e7c\u00e3ao de tais sensores tamb\u00f3em foram abordados.\nNo pr\u00f3oximo cap\u00f3tulo ser\u00f3a apresentado o sistema experimental desenvolvido no presente trabalho. O sistema de gera\u00e7\u00e3o e processamento de microondas utilizado na bancada experimental ser\u00f3 descrito em detalhes, bem como o sistema digital de controle e aquisi\u00e7c\u00e3ao que permite a utilizac\u00e7a\u00e3o da bancada experimental de testes.\nCap\u00edtulo 3\nSistema Experimental Desenvolvido\nNo presente cap\u00e9tulo \u00e9 apresentado o m\u00e9todo desenvolvido. Trata-se de uma bancada de medi\u00e7\u00e3o e testes constru\u00edda para avaliar a viabilidade dos sensores de microondas na medi\u00e7c\u00e3ao da fra\u00e7c\u00e3ao de \u00e9agua. N\u00e3ao so\u00e9 as t\u00e9ecnicas ser\u00e3ao avaliadas, mas tamb\u00e9em toda a concep\u00e7ca\u00e3o do sistema de medi\u00e7ca\u00e3o. O sistema experimental foi desenvolvido para permitir a realiza\u00e7ca\u00e3o de testes esta\u00e9ticos com uma mistura bifa\u00e9sica de \u00e9agua e \u00e9oleo. Os testes s\u00e3ao est\u00e9aticos pois na\u00e3o h\u00e9a vaz\u00e3ao. Nos ensaios esta\u00e9ticos s\u00e3ao utilizados tanques, com dimens\u00e3oes semelhantes a uma tubula\u00e7c\u00e3ao de produ\u00e7c\u00e3ao, os quais s\u00e3ao enchidos com uma composi\u00e7c\u00e3ao que reproduz as propriedades f\u00e9sicas, relevantes para o presente trabalho, encontradas num escoamento real.\nOs sub-sistemas que compo\u00e3em a bancada de testes e o medidor propriamente dito foram projetados segundo requisitos de um medidor industrial. Dessa forma, ap\u00e9s verificada a efic\u00e9cia de um determinado tipo de sensor, e determinados os par\u00eametros ideais para a medi\u00e7ca\u00e3o da fra\u00e7ca\u00e3o de a\u00e9gua, toda a infra-estrutura utilizada na bancada pode ser utilizada no desenvolvimento do prot\u00e9otipo de um medidor industrial de fra\u00e7c\u00e3ao de \u00e9agua. Podemos citar alguns requisitos indispens\u00e9aveis para medidores industriais:\n\u2022\tcomunicacao em rede;\n\u2022\tfonte de alimenta\u00e7\u00e3o dedicada, robusta e confi\u00e9vel;\n\u2022\tfuncionamento automa\u00e9tico;\n\u2022\tinterface de configura\u00e7c\u00e3ao e parametriza\u00e7c\u00e3ao dedicada e espec\u00e9fica;\n\u2022\tmecanismos de auto-diagn\u00e9ostico e sinalizac\u00e7\u00e3ao de falhas;\n\u2022\tacondicionamento adequado \u00e0s condi\u00e7\u00e3es operacionais.\nA solu\u00e7\u00e3o adotada pode ser subdividida em 8 sistemas, que juntos comp\u00f5em o sistema experimental e a bancada de testes utilizada nos ensaios. Os subsistemas que comp\u00f5em a solu\u00e7\u00f5o implementada s\u00f5o abaixo listados:\n\u2022\tsistema de gera\u00e7\u00f5o e processamento de sinais de microondas;\n\u2022\tsistema digital de controle e aquisi\u00e7\u00f5o de dados;\n\u2022\tsistema de comunica\u00e7c\u00f5ao embarcada;\n\u2022\tsistema de alimentac\u00f5o el\u00e9trica dos sistemas eletr\u00f4nicos e de microondas;\n\u2022\tsistema computacional do Concentrador de Dados;\n\u2022\tsistema computacional de interface com o usuario;\n\u2022\tsistema de medic\u00e7o\u00f5es auxiliares;\n\u2022\tsistema de suporte aos ensaios.\nNa figura 3.1 \u00e9 mostrada a arquitetura do sistema desenvolvido, onde se destacam os diferentes sub-sistemas. Estes subsistemas ser\u00f5o descritos nas pr\u00e9ximas sec\u00f5es.\n3.1\tSistema de Gera\u00e7\u00e3o e Processamento de Microondas\nPara o projeto do sistema de gera\u00e7ao e processamento de microondas foi selecionada a frequ\u00f4ncia central e banda de operac\u00f5o do medidor. Durante a revis\u00f5o bibliogr\u00e1fica, verificou-se que a frequ\u00f4ncia mais comumente utilizada nesse tipo de medidor \u00e9 de 2,4GHz. No entanto, conforme apresentado no cap\u00edtulo 2 (2.5), na presen\u00e7a de sais, a atenua\u00e7ao da \u00e1gua, para sinais dessa frequ\u00f4ncia, e muita alta. A frequ\u00f4ncia escolhida para o medidor foi de 10GHz. Nessa frequ\u00f4ncia, as perdas diel\u00e9tricas da \u00e1gua s\u00f5o maiores do que na frequ\u00f4ncia de 2,4GHz. No entanto, a presenca de sais na \u00e1gua influencia muito pouco as perdas diel\u00e9tricas do meio para sinais da frequ\u00f4ncia de 10GHz. A maior atenua\u00e7\u00f5o da agua para a frequ\u00f4ncia escolhida pode ser vista como um ponto positivo uma vez que, em teoria, quanto maior a atenua\u00e7c\u00f5ao, maior a sensibilidade do instrumento de medic\u00e7\u00f5ao de fra\u00e7c\u00f5ao de \u00e9agua. Apesar disso, podemos apontar como uma desvantagem da maior atenua\u00e7c\u00f5ao do sinal a necessidade da transmiss\u00f5ao de um sinal de maior pot\u00f4ncia. Tamb\u00e9m \u00e9 importante ressaltar que quanto maior a frequ\u00f4ncia de opera\u00e7c\u00f5ao, mais caros s\u00f5ao os equipamentos necess\u00e9arios. O comportamento do sistema\nSistema de Medi\u00e7\u00f5es Auxiliares\nFigura 3.1: Arquitetura do sistema de ensaios com microondas\nde medi\u00e7ca\u00e3o na presen\u00e7ca de sais \u00e9e um par\u00eaametro importante no projeto de um medidor de fra\u00e7c\u00e3ao de \u00e9agua para a indu\u00e9stria de petr\u00e9oleo e g\u00e9as, uma vez que uma parcela significativa dos po\u00e7cos de produ\u00e7c\u00e3ao encontram-se abaixo do leito oce\u00eaanico.\nPara o problema da determina\u00e7ca\u00e3o da fra\u00e7c\u00e3ao de \u00e9agua numa mistura bifa\u00e9sica de \u00e9oleo e a\u00e9gua, o tipo de sensor de microondas mais utilizado e adequado, segundo diversos autores [9][20][3], \u00e9e o sensor de ressona\u00eancia. No entanto, optamos pelos sensores de transmiss\u00e3ao como objeto de estudo do presente trabalho. A op\u00e7c\u00e3ao pelos sensores de transmiss\u00e3ao deve-se ao fato de ser este o tipo mais simples de sensor para a aplica\u00e7ca\u00e3o em quest\u00e3ao. Tamb\u00e9em podemos ressaltar o fato de que o sistema de gera\u00e7c\u00e3ao e processamento de microondas utilizado nesse tipo de sensor \u00e9e muito similar ao sistema utilizado em sensores de resson\u00eaancia, mudando apenas a t\u00e9ecnica de infer\u00eaencia de um para o outro. Uma vez validado o sistema de gera\u00e7c\u00e3ao e transmiss\u00e3ao de microondas para sensores de transmissa\u00e3o, o desenvolvimento de um sensor de resson\u00eaancia se caracteriza como uma melhoria natural para o sistema. O sistema de gera\u00e7c\u00e3ao e processamento de microondas \u00e9e formado pelos seguintes componentes :\n\u2022\tAntenas tipo Corneta: optou-se por antenas desse tipo devido ao alto ganho, ou diretividade, destas. E\u00e9 prov\u00e9avel que numa etapa futura de desenvolvimento estas antenas sejam substitu\u00e9das por antenas de outro tipo, mais compactas. S\u00e3ao utilizadas duas antenas: uma dedicada a transmissao de sinais e outra somente para a recepc\u00e3o. As antenas utilizadas tem ganhos de 10dBi e 20dBi.\n\u2022\tVCO: a utiliza\u00e7c\u00e3ao de um oscilador control\u00e9avel deve-se ao fato de este permitir a realiza\u00e7\u00e3o de ensaios numa faixa de frequ\u00eancias em torno da frequ\u00eancia central. Al\u00e9m disso, o VCO \u00e9 um componente indispens\u00e9vel na realizacao de determinados tipos de ensaios e na constru\u00e7\u00e3o de diversos tipos de sensores. A frequ\u00eancia de oscila\u00e7\u00e3o do VCO utilizado pode ser variada de 8GHz a 12GHz.\n\u2022\tInterruptor: quando ligado, o interruptor insere uma atenua\u00e7ao m\u00ednima de 60dB no sinal transmitido. Na pr\u00e9atica isso equivale a desligar o sistema de transmiss\u00e3ao. Da maneira como foi projetado o sistema, a utilizac\u00e7\u00e3ao do interruptor permite que a transmiss\u00e3ao de microondas so\u00e9 ocorra quando uma medi\u00e7c\u00e3ao for necessa\u00e9ria, evitando assim a transmissa\u00e3o cont\u00e9nua de sinais de microondas.\n\u2022\tDivisor de Pot\u00eancia: este componente passivo permite a \u201ddivis\u00e3o\u201dde um sinal em dois sinais id\u00eaenticos, em fase, mas com metade da pot\u00eaencia do sinal original. S\u00e3ao utilizados dois divisores de pot\u00eaencia no sistema. Um divisor \u00e9e utilizado na replica\u00e7c\u00e3ao da onda gerada pelo VCO, a qual serve de refer\u00eaencia para o c\u00e9alculo do atraso de fase devido \u00e0 propaga\u00e7\u00e3o da onda pelo meio diel\u00e9trico. O segundo divisor permite que o sinal recebido pela antena de recep\u00e7c\u00e3ao tenha sua intensidade e atraso de fase medidos.\n\u2022\tAmplificador de Pot\u00eancia: o amplificador de pot\u00e2ncia \u00f3 o ultimo elemento do sistema antes da transmiss\u00e3ao do sinal. A pot\u00e2encia de sa\u00f3da m\u00f3axima do amplificador selecionado \u00f3 de 30dBm, ou 1000 mW.\n\u2022\tAtenuador Controlado por Tens\u00e3o: este componente \u00f3 utilizado pois permite o ajuste cont\u00f3nuo do n\u00f3vel do sinal recebido. O ajuste cont\u00f3nuo do sinal permite que a intensidade do sinal incidente na porta RF do misturador seja mantida constante, otimizando o funcionamento do misturador e, consequentemente, a medi\u00e7c\u00e3ao do atraso de fase. Esse procedimento tamb\u00f3em mant\u00f3em constante a intensidade do sinal incidente no detector, impedindo que este sature. A medic\u00e7\u00e3ao da intensidade do sinal recebido \u00f3e feita indiretamente atrav\u00f3es do conhecimento do sinal de controle utilizado no atenuador controla\u00f3vel. O controle da atenua\u00e7c\u00e3ao \u00f3e linear e feito por uma tens\u00e3ao anal\u00f3ogica.\n\u2022\tMisturador: o misturador \u00f3 um componente passivo utilizado no sistema para a medic\u00e7\u00e3ao do atraso de fase.\n\u2022\tDetector: o detector permite a medi\u00e7ca\u00e3o da intensidade do sinal no sistema. Em compara\u00e7c\u00e3ao aos detectores passivos, os detectores ativos proporcionam sinais de medi\u00e7c\u00e3ao de maior n\u00f3vel, devido a um circuito interno de amplifica\u00e7c\u00e3ao.\nAs especificac\u00e7\u00e3oes t\u00f3ecnicas dos componentes acima listados encontram-se no Ap\u00e2ndice A. Na figura 3.2 \u00f3 mostrado o diagrama de blocos do sistema de gera\u00e7ao e transmiss\u00e3ao de microondas. Os componentes de microondas s\u00e3ao conectados atrav\u00f3es de cabos coaxiais flex\u00edveis, especificas para a frequ\u00e2ncia de operac\u00e3o do sistema. Todas as guias de onda utilizadas possuem conectores SMA-f\u00e2mea em ambas as extremidades. A montagem dos componentes foi realizada sobre uma placa de acr\u00f3lico, conforme pode ser visto figura 3.3. A placa de acr\u00edlico foi escolhida por se tratar de um material n\u00e3o condutor. A preocupa\u00e7c\u00e3ao inicial com a montagem do sistema de microondas sobre uma superf\u00f3cie n\u00e3ao condutora mostrou-se desnecess\u00f3aria, uma vez que posteriormente verificamos que todas as carca\u00e7cas dos componentes s\u00e3ao aterradas. Tamb\u00f3em foi constatado, posteriormente , durante a realiza\u00e7c\u00e3ao dos primeiros testes com o sistema, a necessidade da utiliza\u00e7c\u00e3ao de dissipadores de calor no VCO e principalmente no amplificador de pot\u00e2encia do sistema. Durante a operac\u00e7\u00e3ao esses componentes atingem altas temperaturas , tendo seu desempenho muito influenciado pela temperatura. O atenuador controlado por tens\u00e3ao n\u00e3ao funcionou corretamente e na\u00e3o foi utilizado no sistema, como pode ser verificado na figura 3.3.\nFigura 3.2: Diagrama de blocos do sistema de de gera\u00e7\u00e3o e processamento de microondas\nFigura 3.3: Foto do sistema de gera\u00e7\u00e3o e processamento de microondas montado sobre uma placa de acr\u00edlico\n3.2\tSistema Digital de Controle e Aquisi\u00e7\u00e3o de Dados\nA opcao pelo desenvolvimento dos sensores de microondas, em vez da utiliza\u00e7\u00e3o de equipamentos laboratoriais ou de bancada, implicou na necessidade de desenvolvimento de um sistema digital de controle espec\u00edfico, que atendesse aos requisitos do sistema de microondas. Conforme visto no cap\u00edtulo 2, o funcionamento de tais sensores n\u00e3o \u00e9 direto e simples, em alguns casos demandando a realiza\u00e7\u00e3o de um conjunto de procedimentos para a obten\u00e7ao de uma medida (como por exemplo no caso de utiliza\u00e7\u00e3o de uma tecnica de FMCW). Nenhuma das solu\u00e7\u00e3es de aquisi\u00e7\u00e3o e controle dispon\u00edveis atendia a todos os requisitos do sistema de gera\u00e7c\u00e3ao e processamento de microondas proposto. Al\u00edem disso, os sistemas de aquisi\u00e7ca\u00e3o de dados normalmente utilizados em\naplica\u00e7co\u00e3es laboratoriais e de pesquisa na\u00e3o atendem aos requisitos de uma aplica\u00e7c\u00e3ao industrial (ver lista de requisitos para sistemas industriais no inicio do cap\u00edtulo).\nTendo em vista as raz\u00e3oes acima expostas e o objetivo a m\u00f3edio prazo de desenvolvimento de um medidor multif\u00f3asico industrial, um sistema digital de controle e aquisic\u00e7\u00e3ao de dados foi desenvolvido. O desenvolvimento deste sistema teve como premissa b\u00f3asica a modularidade e o reaproveitamento de c\u00f3digo e de hardware. Na pratica isso quer dizer que todo o sistema foi projetado n\u00e3o somente para atender \u00e0s necessidades do atual projeto, mas para que tamb\u00f3em pudesse ser aproveitado integralmente ou parcialmente em outros projetos. A primeira medida adotada para tornar o sistema embarcado modular foi a separa\u00e7c\u00e3ao do mo\u00f3dulo de controle e aquisic\u00e7\u00e3ao do m\u00f3odulo de comunica\u00e7c\u00e3ao. O sistema embarcado de comunica\u00e7c\u00e3ao forma com o sistema de controle e aquisi\u00e7c\u00e3ao a unidade de processamento do medidor de fra\u00e7c\u00e3ao de \u00f3agua. A separac\u00e7\u00e3ao do sistema de comunica\u00e7c\u00e3ao do sistema de processamento e controle tamb\u00f3em implica numa melhora das caracter\u00f3sticas de tempo real do sistema, uma vez que o controle e a aquisi\u00e7c\u00e3ao s\u00e3ao realizados por um processador dedicado e independente dos n\u00e3ao-determinismos, caracter\u00f3sticos da comunica\u00e7c\u00e3ao em rede, ficando essa tarefa a cargo do processador do sistema embarcado de comunicac\u00e7\u00e3ao. Na atual sec\u00e7\u00e3ao ser\u00f3a apresentado somente o sistema de controle e aquisi\u00e7c\u00e3ao de dados, sendo o sistema embarcado de comunica\u00e7c\u00e3ao apresentado na se\u00e7c\u00e3ao seguinte.\n3.2.1\tCaracter\u00edsticas do Hardware\nO sistema de controle e aquisic\u00e3o possui um DSP de 16 bits com 40 MIPS (Milhoes de instru\u00e7c\u00e3oes por segundo), dedicado somente ao processamento dos sinais do processo. O modelo utilizado \u00f3 o dsPIC30F4013, fabricado pela Microchip. O sistema foi projetado com 4 entradas analogicas. A digitaliza\u00e7c\u00e3ao dos sinais analogicos e realizada pelo conversor A/D interno do DSP, o qual possui resolucao de 12 bits e frequ\u00f4ncia de aquisi\u00e7ao de ate 200 MHz. Os sinais anal\u00f3gicos do processo s\u00e3o primeiramente condicionados e depois filtrados (filtro analogico). A etapa de condicionamento consiste num amplificador de instrumenta\u00e7ca\u00e3o modelo INA113, fabricado pela Texas Instruments. O ganho do modulo de condicionamento de sinais pode ser configurado de 1 a 500 com o auxilio de um jumper e de um potenci\u00f3metro. Apos ser condicionado, o sinal analogico \u00f3e ent\u00e3ao filtrado por um filtro anal\u00f3ogico. Foi utilizada uma aproxima\u00e7ca\u00e3o tipo Butterworth ativa de quarta ordem. Al\u00f3m de filtrar as componentes de alta frequ\u00f4ncia do sinal anal\u00f3gico, o filtro tamb\u00f3m funciona como filtro anti-recobrimento. A frequ\u00f4ncia de corte escolhida foi de 10 kHz. O digrama de Bode do filtro analogico implementado \u00f3 mostrado na figura 3.4. O sinal filtrado \u00f3 ent\u00e3o amostrado pelo conversor A/D do DSP. O filtro anti-recobrimento foi projetado para funcionar com uma frequ\u00f4ncia de\naquisi\u00e7\u00e3o de 40 kHz por entrada anal\u00f3gica. No entanto, a freq\u00fc\u00eancia de aquisi\u00e7\u00e3o do sistema \u00f3 configur\u00f3vel pelo usu\u00f3rio, sendo 40kHz por canal a freq\u00fc\u00eancia m\u00f3xima de aquisicao. A medida que o usuario reduz a frequ\u00eancia de aquisicao, a efici\u00eancia do filtro como filtro anti-recobrimento \u00f3 reduzida. Para mais informa\u00e7\u00e3es sobre filtros anal\u00f3gicos, ver [10] e [28].\nFigura 3.4: Diagrama de Bode do filtro anti-recobrimento\nO sistema de controle e aquisi\u00e7\u00e3o possu\u00ed 4 sa\u00eddas anal\u00f3gicas. E utilizado um conversor D/A modelo TLV5618, fabricado pela Texas Instruments, no sistema. E importante ressaltar que o DSP nao possui conversor D/A integrado. O conversor escolhido possui resolucao de 12 bits. A comunicac\u00e3o entre o conversor e o DSP \u00e9 feita serialmente atraves do padr\u00e3o SPI (Serial Peripheral Interface). O sinal anal\u00e9gico produzido pelos conversores D/A do sistema \u00e9 filtrado atrav\u00e9s de um filtro anal\u00e9gico RC passivo de 1a ordem e entao condicionado atrav\u00e9s do m\u00f3dulo de condicionamento das sa\u00eddas anal\u00e9ogicas. O m\u00e9odulo de condicionamento das sa\u00e9das analo\u00e9gicas consiste de dois amplificadores por canal: um amplificador inversor e outro n\u00e3ao-inversor. A escolha de qual dos dois amplificadores ser\u00e9 utilizado \u00e9 feita atrav\u00e9s de um jumper na placa. O ganho do amplificador escolhido \u00e9 configuravel atrav\u00e9s de um potenci\u00f3metro. Assim, devido \u00e0 utiliza\u00e7\u00e3o dos dois tipos de amplificadores, o sinal analogico de sa\u00e9da, ou controle, pode ter sua faixa configurada de 0V a 12V, ou de 0V a -12V. O sistema foi assim projetado porque alguns componentes do sistema de gerac\u00e3o e processamento de microondas utilizam sinais de controle negativos, enquanto outros utilizam sinais positivos. Al\u00e9em das entradas e sa\u00e9das anal\u00e9ogicas, o sistema tamb\u00e9em possui 2 entradas digitais e 2 sa\u00e9das digitais, ambas isoladas do resto do sistema atrav\u00e9es de um ampli-\nficador de ganho unit\u00e1rio, que funciona como prote\u00e7\u00e3o. Para mais informa\u00e7\u00f5es sobre condicionamento de sinais, amplificadores operacionais e microeletronica ver [12]. Na figura 3.5 \u00e1 mostrado o diagrama de blocos do sistema de controle e aquisi\u00e7\u00e3o de dados.\nDSP\nFiltro de anti-recobrimento\n\t\t\n\tConversor\t\n\tD/A\t\n\t\t\nProte\u00e7\u00e3o\nCondicionamento de sinais\nFiltro de reconstru\u00e7\u00e3o\nz BARRAMENTO\nDE .COMUNICA\u00c7\u00c3O\nDll\nDI2\n\u25ba DOI\n* DO2\n<\u2014All '&lt;\u2014AI2\n<\u2014AI3\n<\u2014AI4\nCondicionamento de sinais\n\u25ba\tAO1\n\u25ba\tAO2\n\u25ba\tAO3\n\u25ba\tAO4\nFigura 3.5: Diagrama de blocos do sistema controle e aquisi\u00e7\u00e3o de dados\nOs componentes e modulos constituintes do sistema de controle e aquisic\u00e3o de dados foram montados numa PCI (Placa de Circuito Impresso), juntamente com o sistema embarcado de comunicac\u00e3o, que sera descrito na proxima se\u00e7\u00e3o. O layout da placa foi realizado seguindo as recomenda\u00e7\u00f5es e procedimentos de compatibilidade eletromagnetica para placas de circuito impresso. A t\u00edtulo de ilustra\u00e7\u00e3o, o desenho da placa \u00e1 mostrado na figura 3.6. A placa \u00e1 alimentada por uma fonte de tens\u00e3o simetrica de \u00b115 V. A placa possui um pequeno modulo de alimenta\u00e7\u00e3o que, alem das tens\u00e3es de +15V e -15V, fornece tambem +5V e +3,3V, para os componentes da placa. Foram utilizados somente componentes PTH (Placement Through Hole) no projeto devido \u00e0 simplicidade de prototipa\u00e7\u00e3o e fabricac\u00e3o oferecida por esse tipo de tecnologia, se comparada com a tecnologia de SMT (Surface Mount Technology). Na figura 3.7 \u00e9 mostrada uma foto da unidade de processamento do sistema, composta pelo sistema de controle e aquisic\u00e7\u00e3ao de dados e pelo sistema embarcado de comunicac\u00e7\u00e3ao. O diagrama esquematico do sistema de controle e aquisi\u00e7\u00e3o encontra-se no Apendice B.\n3.2.2\tCaracter\u00edsticas do Firmware\nO firmware do DSP do sistema de aquisi\u00e7ao e controle foi desenvolvido em linguagem C, utilizando o ambiente de desenvolvimento MPLab da Microchip. O compilador utilizado foi C30 da Microchip, especifico para a fam\u00edlia de DSPs dsPIC30 da Microchip. O firmware foi estruturado na forma de tarefas colaborativas e n\u00e3o bloqueantes atrav\u00e1s da utiliza\u00e7\u00e3o de diversas m\u00e1quinas de estado, uma para cada tarefa. As tarefas que o DSP processa sa\u00e3o abaixo listadas:\nFigura 3.6: Desenho da PCI da unidade de processamento do sistema\nFigura 3.7: Unidade de processamento do sistema\n\u2022\tAquisi\u00e7\u00e3o: leitura das entradas anal\u00f3gicas;\n\u2022\tFiltro Digital: processamento dos amostras de acordo com o filtro digital configurado;\n\u2022\tControle: calculo do sinal de controle em malha fechada, quando configurado para tal;\n\u2022\tMedi\u00e7\u00e3o da Fra\u00e7\u00e3o de Agua: realiza\u00e7ao dos comandos para opera\u00e7ao do sistema de gera\u00e7\u00e3o e processamento de microondas;\n\u2022\tAtualiza\u00e7\u00e3o das Sa\u00eddas: atualiza\u00e7\u00e3o dos valores das sa\u00eddas anal\u00f3gicas e digitais, quando necess\u00e9ario;\n\u2022\tAlarmes: envio de mensagens de alarme quando um determinado valor, ou condi\u00e7c\u00e3ao, pr\u00e9e-estabelecida for atingida;\n\u2022\tComunica\u00e7ao: implementa a comunica\u00e7\u00e3o serial com o sistema embarcado de comunica\u00e7c\u00e3ao;\n\u2022\tManipula\u00e7\u00e3o da Mem\u00f3ria N\u00e3o-Vol\u00e1til: leitura ou escrita da mem\u00e9ria n\u00e3o-vol\u00e9atil que armazena os registradores de configura\u00e7c\u00e3ao do sistema;\n\u2022\tLogging: uma variac\u00e3o da tarefa de comunicac\u00e3o para transfer\u00eancia de grandes quantidades de dados, em tempo real, atrav\u00e9es de um barramento paralelo.\nA execu\u00e7ao das tarefas acima descritas \u00e9 regida pela interrup\u00e7\u00e3o do temporizador de aquisi\u00e7\u00e3o, sendo que todas s\u00e3o executadas em todos os ciclos de aquisic\u00e3o. O controle de execu\u00e7\u00e3o de cada tarefa \u00e9 regido por uma m\u00e9quina de estados independente. Dessa forma, apesar de todas as tarefas serem solicitadas em todos os ciclos de aquisi\u00e7c\u00e3ao, na maior parte das vezes elas retornam o controle prontamente \u00e0 rotina principal, pois nada t\u00eaem a executar. Essa organiza\u00e7c\u00e3ao otimiza o desempenho de tempo-real do sistema. No entanto, nenhuma avalia\u00e7ca\u00e3o ou estudo mais aprofundado sobre o comportamento de tempo-real do sistema foi realizado pois foge do escopo do presente trabalho. Na figura 3.8 \u00e9 mostrado o fluxo de dados atrav\u00e9s das diferentes tarefas do sistema de controle e aquisic\u00e7\u00e3ao.\nA interface com o sistema de comunica\u00e7c\u00e3ao embarcada \u00e9e realizada serialmente, atraves de uma implementa\u00e7ao simplificada do protocolo Modbus SLIP. Os dados de logging s\u00e3o enviados atrav\u00e9s do barramento paralelo para uma mem\u00e9ria FIFO externa, pertencente ao sistema embarcado de comunica\u00e7c\u00e3ao, o qual ser\u00e9a descrito na pr\u00e9oxima se\u00e7c\u00e3ao.\nO sistema de controle e aquisic\u00e3o foi projetado para ser flex\u00e9vel e permitir a sua utiliza\u00e7ca\u00e3o em diversas etapas do projeto e, inclusive, em outros sistemas e aplica\u00e7co\u00e3es. O sistema de controle e aquisi\u00e7c\u00e3ao pode ser configurado para operar em diferentes modos de opera\u00e7c\u00e3ao. Abaixo s\u00e3ao listados os poss\u00e9veis modos de opera\u00e7c\u00e3ao:\n\u2022\tModo Aquisi\u00e7\u00e3o: nesse modo o sistema realiza somente aquisic\u00e3o de dados. Um usua\u00e9rio ou uma aplicac\u00e7\u00e3ao podem ler as entradas anal\u00e9ogicas ou digitais quando\nMem\u00f3ria n\u00e3o-vol\u00e1til (configura\u00e7\u00f5es)\nAplica\u00e7ao de Usu\u00e1rio\nAquisi\u00e7\u00e3o de Dados\nAtualiza\u00e7ao das Sa\u00eddas\nFigura 3.8: Fluxograma de dados no firmware do sistema de controle e aquisi\u00e7\u00f5o\ndesejarem ou o sistema pode realizar o logging das entradas automaticamente. O sistema tambem pode ser configurado para gerar alarmes quando uma determinada condi\u00e7\u00f5o for atingida. As entradas anal\u00e9gicas podem ainda ser filtradas pelo filtro digital do sistema.\n\u2022\tModo Controlador Manual: nesse modo um usuario ou uma aplica\u00e7\u00f5o pode, al\u00e9m de monitorar as entradas do sistema, enviar comandos para as sa\u00e9das anal\u00e9ogicas ou digitais do sistema.\n\u2022\tModo Controlador Autom\u00e1tico: nesse modo o sistema pode controlar um processo de forma autom\u00e9atica, de acordo com uma lei de controle previamente configurada nele.\n\u2022\tModo Filtro Digital: o sistema de controle e aquisi\u00e7ao pode ser configurado como um filtro digital, continuamente amostrando um sinal anal\u00f3gico, processando o sinal digital e reconstruindo o sinal analo\u00e9gico filtrado.\n\u2022\tModo Medidor de Fra\u00e7\u00e3o de Agua: quando configurado nesse modo, o sistema assume uma \u00e7onfigura\u00e7\u00f5o espec\u00e9fica. Todas as tarefas do sistema s\u00f5o configuradas de uma forma pr\u00e9-determinada. Os par\u00e1metros de \u00e7onfigura\u00e7\u00f5o do usu\u00e9rio sao espec\u00edficos para a realiza\u00e7\u00f5o dessa tarefa. O sistema possui ainda dois submodos quando configurado para operar no modo medidor de fra\u00e7ao de a\u00e9gua. No submodo teste o sistema realiza ensaios previamente determinados para avaliac\u00f5o do sistema e das diversas t\u00e9cnicas de infer\u00f4ncia. No submodo medidor o sistema mede continuamente a fra\u00e7\u00f5o de agua do sistema, armazenando o valor\nmais recente num registrador da mem\u00f3ria, o qual pode ser lido, por exemplo, atrav\u00e9s de um software supervis\u00f3rio.\n3.3 Sistema Embarcado de Comunica\u00e7\u00e3o\nConforme descrito anteriormente, o sistema embarcado de comunica\u00e7ao foi separado do sistema de controle e aquisi\u00e7ao de dados com o objetivo de tornar mais modular o sistema. Apesar disso, ambos os sistemas s\u00e3o montados numa mesma placa, compartilham uma mesma fonte de alimenta\u00e7\u00e3o e juntos constituem a unidade de processamento do medidor de frac\u00e7a\u00e3o de \u00f3agua. A primeira etapa do projeto do sistema embarcado de comunicac\u00e3o foi a escolha do protocolo de comunica\u00e7ao a ser utilizado. A decis\u00e3o de qual protocolo implementar e adotar no desenvolvimento de uma unidade de processamento compacta, especifica e de baixo custo, conforme aqui apresentada, n\u00e3o \u00e9 uma decis\u00e3ao trivial. A implementa\u00e7c\u00e3ao do protocolo de comunica\u00e7c\u00e3ao tem que ser realizada em nivel de hardware, ou meio f\u00edsico, e em nivel de software. Al\u00e9m de determinar diversos aspectos do projeto de hardware e software do sistema embarcado, o protocolo de comunica\u00e7\u00e3o escolhido influencia a maneira como o medidor como um todo ira funcionar, determinando como se dar\u00e9 a intera\u00e7ao desse equipamento com outros e com os usuarios e operadores do sistema. O sistema embarcado de comunica\u00e7\u00e3o foi projetado para atender aos seguintes requisitos de projeto:\n\u2022\trobustez;\n\u2022\tescalonabilidade do sistema;\n\u2022\tcapacidade de monitoramento, configura\u00e7\u00e3o e diagn\u00f3stico remoto;\n\u2022\tbaixo custo;\n\u2022\tinteroperabilidade e compatibilidade com outros equipamentos e sistemas;\n\u2022\talta velocidade de transmiss\u00e3ao de dados.\n3.3.1\tProtocolo de Comunica\u00e7\u00e3o\nCom o avan\u00e7o tecnol\u00f3gico surgiram, e surgem cada vez mais, novas necessidades de integra\u00e7\u00e3o entre os sistemas produtivos, em seus diversos n\u00edveis (redes de campo, ch\u00e3o-de-f\u00f3brica, supervis\u00f3rios, sistemas de gest\u00e3o, etc). Dessa forma, hoje em dia um instrumento de medic\u00e7\u00e3ao n\u00e3ao precisa somente medir a grandeza propriamente dita, mas\ntamb\u00f3em disponibilizar seus dados num sistema de informa\u00e7c\u00e3ao mais amplo e integrado, bem como permitir alterac\u00e7\u00e3oes de configura\u00e7c\u00e3ao e o diagn\u00f3ostico do seu funcionamento remotamente. Instrumentos que n\u00e3o s\u00e3o capazes de se integrarem num sistema computacional de informa\u00e7c\u00e3ao, ou supervis\u00e3ao, praticamente n\u00e3ao existem mais no mercado. Instrumentos que utilizam padr\u00e3oes e protocolos de comunica\u00e7c\u00e3ao propriet\u00f3arios tamb\u00f3em t\u00e2em perdido mercado para instrumentos que adotam um padr\u00e3ao de comunicac\u00e7\u00e3ao aberto ou homologado e mantido por uma organiza\u00e7ca\u00e3o ou cons\u00f3orcio de empresas.\nDevido a redu\u00e7\u00e3o dos custos dos microprocessadores e ao aumento exponencial da sua capacidade de processamento, os padro\u00e3es de comunica\u00e7c\u00e3ao est\u00e3ao cada vez mais complexos e incorporam nos instrumentos de medi\u00e7ca\u00e3o e controle que os utilizam uma variedade de funcionalidades at\u00f3e pouco tempo s\u00f3o encontradas em sistemas computacionais de grande e m\u00f3dio porte, como: computadores industriais, pessoais e CLPs de grande porte. Dentre os diversos padro\u00e3es existentes, podemos destacar alguns dos mais utilizados, como por exemplo: Fieldbus Foundation, Profibus DP, CAN e Modbus. Cada padr\u00e3ao possui suas vantagens e desvantagens sendo que, em geral, cada segmento industrial acaba adotando um padr\u00e3ao.\nA escolha do protocolo de comunica\u00e7c\u00e3ao a ser implementado requer uma ponderac\u00e7\u00e3ao entre requisitos do sistema, esfor\u00e7cos de desenvolvimento e custos. Tendo em vista essas pondera\u00e7\u00e3es, a op\u00e7ao foi pela utilizac\u00e3o do protocolo Modbus TCP/IP. O Modbus \u00f3 um protocolo de comunica\u00e7\u00e3o criado em 1979 para permitir a comunicacao entre, e com, controladores e equipamentos industriais. A maioria dos CLPs utilizados nos mais diversos segmentos industriais adotam esse padr\u00e3ao ou, no m\u00f3nimo, possuem m\u00f3odulos de expansa\u00e3o compat\u00f3veis com o padr\u00e3ao Modbus. Recentemente, a Modbus-IDA, as-socia\u00e7c\u00e3ao responsa\u00f3vel pela manuten\u00e7c\u00e3ao da especifica\u00e7c\u00e3ao do protocolo Modbus, lan\u00e7cou uma nova especifica\u00e7c\u00e3ao: o Modbus TCP/IP. Desde ent\u00e3ao, tal padr\u00e3ao tem tido crescente import\u00e2ncia no mercado devido \u00e0 sua facilidade de integra\u00e7\u00e3o com os antigos equipamentos Modbus-RTA e tambem devido \u00e0 sua simplicidade.\nO protocolo Modbus TCP/IP \u00f3 um protocolo do tipo mestre/escravo, em que somente o mestre pode iniciar uma transmissa\u00e3o no barramento. Certamente na\u00e3o se trata de um protocolo de u\u00f3ltima gera\u00e7c\u00e3ao, que contempla em sua especificac\u00e7\u00e3ao todas as funcionalidades requeridas pelos novos \u2019\u2019equipamentos inteligentes\u201d, com sua arquitetura de controle distribu\u00f3do. No entanto, para a grande maioria das aplicac\u00e7o\u00e3es encontradas nas diversas etapas da cadeia de processamento do petr\u00f3oleo (explota\u00e7c\u00e3ao, transporte, refino), o Modbus TCP/IP \u00f3e um protocolo robusto e confi\u00f3avel, que atende aos requisitos dos sistemas de automa\u00e7c\u00e3ao, controle e supervis\u00e3ao requeridos. Al\u00f3em disso, trata-se de um protocolo aberto.\nComo o nome sugere, o protocolo Modbus TCP/IP \u00f3e implementado sobre uma rede Ethernet. O padr\u00e3o Ethernet tem ganhado cada vez mais espa\u00e7o no mercado das redes\nde campo. No entanto, este padr\u00e3ao n\u00e3ao implementa a camada de aplica\u00e7c\u00e3ao do modelo OSI. Faz-se, portanto, necess\u00e9aria a utiliza\u00e7c\u00e3ao de algum outro protocolo que permita a comunicac\u00e7\u00e3ao entre os instrumentos, e dos instrumentos com os sistemas de alto n\u00e9vel, no caso o protocolo Modbus TCP/IP. Dentre as vantagens da utilizac\u00e3o do padr\u00e3o Ethernet, podemos citar:\n\u2022\ttecnologia de baixo custo;\n\u2022\tpadrao amplamente difundido e conhecido;\n\u2022\tfacilidade na integrac\u00e7\u00e3ao com sistemas de mais alto n\u00e9vel;\n\u2022\tpadr\u00e3ao aberto;\n\u2022\tpermite alta velocidade de transmiss\u00e3ao de dados;\n\u2022\tpossibilita longas dist\u00eaancias de comunica\u00e7ca\u00e3o sem necessidade da utiliza\u00e7c\u00e3ao de repetidores.\n3.3.2\tCaracter\u00edsticas do Hardware\nNo m\u00e9dulo de comunica\u00e7\u00e3o foi utilizado um microcontrolador PIC18F2620, de 8bits e 8MIPS, da Microchip. Para a interface com a camada f\u00e9sica do protocolo de comu-nica\u00e7ao \u00e9 utilizado um controlador Ethernet modelo ENC28J60, fabricado pela Microchip. A comunica\u00e7c\u00e3ao entre o microcontrolador e o controlador Ethernet \u00e9e realizada serialmente atrav\u00e9es de uma interface SPI. O controlador de Ethernet, al\u00e9em de implementar a camada f\u00edsica, implementa tamb\u00e9m a camada MAC do protocolo Ethernet. As demais camadas definidas pelo protocolo s\u00e3ao implementadas no microcontrolador. Para tal \u00e9e utilizada uma biblioteca fornecida gratuitamente pela pr\u00e9opria Microchip, conhecida como \u201dpilha TCP/IP\u201d(do ingl\u00eas TCP/IP Stack). A referida pilha TCP/IP demanda um espa\u00e7co significativo na mem\u00e9oria de programa do microcontrolador que a implementa. O microcontrolador, PIC18F2620 utilizado no presente projeto, possui 64kb de mem\u00f3ria de programa (Flash), dos quais aproximadamente 34kb foram utilizados pelo sistema em quest\u00e3ao.\nAl\u00e9em dos componentes acima listados, o sistema embarcado de comunica\u00e7c\u00e3ao tamb\u00e9m possui uma mem\u00e9ria RAM FIFO (Fisrt In First Out). A mem\u00e9ria FIFO \u00e9e utilizada como um elemento isolador entre o sistema embarcado de comunica\u00e7c\u00e3ao e o sistema de controle e aquisic\u00e7\u00e3ao. A mem\u00e9oria FIFO so\u00e9 \u00e9e utilizada quando o modo logging \u00e9 ativado. O fluxo de dados da comunica\u00e7\u00e3o de logging so ocorre num sentido, sendo que somente o sistema de controle e aquisi\u00e7ca\u00e3o produz esse dados. O sistema\nde comunica\u00e7\u00e3o l\u00ea esses dados e os envia via Ethernet para aplica\u00e7\u00e3o do usu\u00e1rio. O restante da comunica\u00e7ao entre os dois sistemas \u00e1 realizado serialmente, atrav\u00e1s de uma implementa\u00e7\u00e3o simplificada do protocolo Modbus. Esse t\u00e1pico ser\u00e1 abordado em mais detalhes na proxima se\u00e7ao. A comunica\u00e7\u00e3o dos dados de logging pode demandar uma banda significativa do barramento de comunicac\u00e3o, dependo da frequ\u00eancia de aquisic\u00e3o e de logging configuradas. O sistema foi projetado para funcionar com qualquer mem\u00e1ria FIFO da fam\u00edlia IDT72XX, fabricada pela empresa americana IDT. As mem\u00e1rias dessa fam\u00e1lia possuem capacidades que variam de 2kb a 64kb. A mem\u00e1ria FIFO n\u00e3ao \u00e1e um componente obrigat\u00e1orio no sistema. E\u00e1 poss\u00e1vel, atrav\u00e1es da utiliza\u00e7ca\u00e3o de um cabo flat, conectar diretamente o sistema de comunica\u00e7\u00e3o ao sistema de controle e aquisi\u00e7\u00e3o. Em teoria, o desempenho em tempo-real do sistema de controle e aquisi\u00e7\u00e3o fica prejudicado quando n\u00e3o se utiliza a memoria FIFO. No entanto, n\u00e3o foram realizados estudos para determinar quantitativamente o desempenho em tempo-real do sistema. A placa montada para a realiza\u00e7ca\u00e3o do presente trabalho n\u00e3ao possui memo\u00e1ria FIFO devido a dificuldades t\u00e9cnicas encontradas na montagem do componente SMD (Surface Mount Device) da mem\u00e1ria na placa.\nO sistema de comunicac\u00e7a\u00e3o possui ainda um circuito de prote\u00e7c\u00e3ao e isolamento el\u00e1etrico do barramento Ethernet, conforme sugerido no datasheet do controlador ENC28J60. O conector RJ45 utilizado foi o modelo NU1S516, fabricado pela Bothhand. O modelo escolhido possui integrado um transformador de pulsos para cada par tranc\u00e7ado de co-munica\u00e7ca\u00e3o. O transformador de pulsos do conector faz parte do circuito de prote\u00e7c\u00e3ao do sistema de comunicac\u00e3o. Na figura 3.9 \u00e1 mostrado o diagrama de blocos do sistema de comunicac\u00e3o. A placa PCI, sobre a qual o sistema de comunicacao foi montado, j\u00e1 foi apresentada na se\u00e7c\u00e3ao anterior. Os diagramas esquem\u00e1aticos do sistema de comunica\u00e7c\u00e3ao encontram-se no Ap\u00eandice B. O sistema de comunicac\u00e3o possui ainda 5 leds que sinalizam seu estado de funcionamento, sendo que 3 s\u00e3o integrados ao conector RJ45 e outros dois leds de 5mm s\u00e3o externos. O significado de cada led \u00e1 abaixo descrito:\n\u2022\tAmarelo RJ45: RX da comunica\u00e7\u00e3o Ethernet.\n\u2022\tVerde RJ45: TX da comunica\u00e7ao Ethernet.\n\u2022\tVermelho RJ45: indicador de funcionamento (power) do sistema.\n\u2022\tAmarelo 5mm: endere\u00e7o IP configurado (manualmente ou via DHCP).\n\u2022\tVerde 5mm: comunica\u00e7\u00e3o com o sistema concentrador de dados estabelecida.\nComunica\u00e7\u00e3o\nSerial\nMem\u00f3ria\nFIFO\nJ BARRAMENTO DE\n\u25a0 COMUNICA\u00c7\u00c3O\nFigura 3.9: Diagrama de blocos do sistema embarcado de comunica\u00e7ao\n3.3.3\tCaracter\u00edsticas do Firmware\nO firmware do microcontrolador do sistema de comunica\u00e7\u00e3o embarcada foi desenvolvido em linguagem C, utilizando o ambiente de desenvolvimento MPLab da Microchip. O compilador utilizado foi o C18 da Microchip, especifico para a fam\u00f3lia de microcon-troladores PIC18 da Microchip. O firmware do microcontrolador e todo estruturado em fun\u00e7c\u00e3ao da implementa\u00e7c\u00e3ao da biblioteca TCP/IP Stack da Microchip. A referida biblioteca \u00f3e organizada em tarefas cooperativas. Cada camada de n\u00f3vel do protocolo Ethernet \u00f3e implementada numa tarefa, que por sua vez \u00f3e implementada atrav\u00f3es de m\u00f3quina de estado finito [24]. A estrutura de camadas do padr\u00e3o Ethernet e a maneira como esta \u00f3 mapeada nas tarefas da biblioteca TCP/IP Stack \u00f3 mostrada na figura\n3.10.\tPara mais detalhes sobre implementac\u00e3o da comunica\u00e7ao Ethernet em sistemas embarcados ver [2] e [4].\nNem todas as camadas, ou tarefas, da biblioteca foram utilizadas. Abaixo s\u00e3ao listadas as tarefas utilizadas no desenvolvimento do sistema de comunica\u00e7c\u00e3ao embarcada do m\u00f3odulo de processamento do medidor de fra\u00e7c\u00e3ao de \u00f3agua.\n\u2022 MAC: camada de controle de acesso ao meio (Media Acess Control). Corresponde \u00e0 camada 2 do modelo OSI, ou seja, a camada de Enlace de Dados. Alem de exercer o controle de acesso ao meio e propiciar os mecanismos ba\u00f3sicos de de-tecc\u00e7\u00e3ao de erros de transmissa\u00e3o, esta camada \u00f3e responsa\u00f3vel pelo endere\u00e7co MAC, ou endere\u00e7o f\u00edsico do dispositivo de comunica\u00e7ao. O endere\u00e7o MAC identifica unicamente um dispositivo numa rede Ethernet e \u00f3e o mecanismo b\u00f3asico, de mais baixo n\u00f3vel, de endere\u00e7camento dentro do padr\u00e3ao Ethernet. Esta camada n\u00e3ao faz parte da biblioteca TCP/IP original da Microchip. Na verdade, a implementa\u00e7c\u00e3ao dessa camada depende do controlador Ethernet utilizado, funcionando na verdade como um driver para o controlador Ethernet. No presente trabalho foi utilizada a tarefa\nTCP/IP Reference Model\nMicrochip Stack Implementation\nApplication\nTransport\nInternet\nHost-to-Network\nFigura 3.10: Mapeamento das camadas do padr\u00e3o Ethernet em tarefas na biblioteca TCP/IP Stack da Microchip [24]\nMAC, ou driver, implementada especificamente para o controlador ENC28J60, a qual \u00e9 fornecida gratuitamente pelo fabricante.\n\u2022\tARP: camada de resolu\u00e7\u00e3o de endere\u00e7os (Address Resolution Protocol). Corresponde a camada 3 do modelo OSI, ou seja, a camada de Rede. A fun\u00e7ao desse protocolo \u00e9e a resolu\u00e7c\u00e3ao de endere\u00e7cos IPs em endere\u00e7cos MAC. A resoluc\u00e7\u00e3ao \u00e9e ne-cessaria, por exemplo, na determina\u00e7\u00e3o do endere\u00e7o MAC de um dispositivo do qual s\u00e9o se conhece o endere\u00e7co IP.\n\u2022\tIP: camada de Internet (Internet Protocol). Corresponde \u00e0 camada 3 do modelo OSI. Esse protocolo, ou camada, \u00e9 respons\u00e9vel pelo endere\u00e7amento, roteamento e controle de envio e recepc\u00e3o dos datagramas IP. A vers\u00e3o do protocolo utilizada \u00e9e a IPv4.\n\u2022\tICMP: camada de controle de mensagens de Internet (Internet Control Message Protocol). Corresponde \u00e0 camada 3 do modelo OSI. Esse protocolo \u00e9 normalmente utilizado no envio mensagens de erro ou anomalias na rede. Tamb\u00e9em pode ser usado para obter informa\u00e7c\u00e3oes e realizar diagno\u00e9sticos sobre a rede. O servi\u00e7co de ping, por exemplo, utiliza esse protocolo para determinar se um dado dispositivo esta\u00e9 acess\u00e9vel.\n\u2022\tTCP: camada de controle de transmiss\u00e3o (Transmission Control Protocol). Corresponde \u00e0 camada 4 do modelo OSI, ou seja, a camada de Transporte. Esse protocolo permite a transmiss\u00e3ao confi\u00e9avel de dados de um dispositivo a outro, sem duplica\u00e7c\u00e3ao ou perda de dados. Implementa servi\u00e7cos de detec\u00e7ca\u00e3o de erros e\nretransmiss\u00e3o de pacotes. E um protocolo orientado a conex\u00f5es, ou seja, requer que primeiro seja estabelecida uma conex\u00e3o entre dois dispositivos para que s\u00f3 ent\u00e3o a transfer\u00eancia de dados possa ser iniciada.\n\u2022\tUDP: camada de datagramas de usu\u00f3rio (User Datagram Protocol). Corresponde \u00e0 camada 4 do modelo OSI. Esse protocolo permite a transmiss\u00e3o de dados de maneira r\u00f3pida e com o m\u00ednimo de overhead poss\u00edvel no padr\u00e2o TCP/IP. Trata-se de um protocolo de transmiss\u00e3o n\u00e3o-confi\u00e1vel, pois n\u00e3o implementa nenhum mecanismo de controle ou integridade.\n\u2022\tDHCP: camada de configura\u00e7ao din\u00eamica de dispositivos (Dynamic Host Configuration Protocol. Corresponde \u00e0 camada 7 do modelo OSI, ou seja, a camada de Aplica\u00e7ao. A implementac\u00e3o de um cliente DHCP permite a configura\u00e7\u00e3o au-toma\u00f3tica de diversos par\u00eaametros necessa\u00f3rios para que o cliente opere numa dada rede IP, como por exemplo: endereco IP, m\u00f3scara de rede e gateway padr\u00e3o.\nAl\u00f3em das tarefas acima descritas, que implementam as camadas de protocolo do padr\u00e3o Ethernet, a biblioteca TCP/IP Stack tamb\u00e9m necessita, para o seu funcionamento cooperativo, da configura\u00e7ao da tarefa de gerenciamento da pilha (Stack Manager, a qual por sua vez coordena o funcionamento das demais tarefas. A tarefa de gerenciamento da pilha faz parte da biblioteca padr\u00e3o distribu\u00edda pela Microchip.\nConforme citado anteriormente, a implementa\u00e7c\u00e3ao do padra\u00e3o TCP/IP, atrav\u00f3es da biblioteca fornecida pelo Microchip, corresponde somente a uma parte do protocolo de comunica\u00e7\u00e3o adotado no sistema. Foi necess\u00f3ria a implementa\u00e7\u00e3o do protocolo Modbus TCP/IP no sistema embarcado de comunicac\u00e7a\u00e3o. O protocolo Modbus TCP/IP \u00f3 basicamente um cliente dos servicos oferecidos pelo protocolo TCP. Nesse sentido, os pacotes de dados transportados pelo protocolo TCP s\u00e3ao, na verdade, os datagramas de requisi\u00e7c\u00e3ao e resposta do protocolo Modbus TCP/IP. O protocolo Modbus TCP/IP corresponde a camada 7 do modelo OSI, ou seja, a camada de aplica\u00e7\u00e3o. Assim como o processamento dos demais protocolos, o processamento do protocolo Modbus TCP/IP tamb\u00f3em \u00f3e realizado atrav\u00f3es de uma tarefa colaborativa no sistema de comunica\u00e7c\u00e3ao embarcada. A tarefa do protocolo Modbus TCP/IP foi implementada de maneira n\u00e3ao-bloqueante.\nO protocolo Modbus TCP/IP foi implementado para funcionar somente como um escravo na comunicac\u00e7\u00e3ao Modbus, apenas respondendo a requisi\u00e7c\u00e3oes de um mestre. A intera\u00e7c\u00e3ao entre os sistemas embarcado de comunica\u00e7c\u00e3ao e de controle e aquisi\u00e7c\u00e3ao se da\u00f3 de maneira transparente para os equipamentos e usu\u00f3arios externos. Para todos os efeitos, o mestre Modbus enxerga apenas um dispositivo. Os endere\u00e7cos dos registradores Modbus s\u00e3ao mapeados de maneira cont\u00f3nua e un\u00f3voca, conforme exigido pelo protocolo. No\nentanto, internamente o mapeamento desses registradores \u00e9 divido entre os sistemas de comunica\u00e7\u00e3o e de controle e aquisi\u00e7\u00e3o.\nDa maneira como foi implementada no sistema, a tarefa Modbus TCP/IP identifica as mensagens Modbus TCP/IP recebidas pelo sistema, valida essas mensagens e ent\u00e3o decide se a requisic\u00e7\u00e3ao deve ser repassada ao modulo de controle e aquisi\u00e7c\u00e3ao ou n\u00e3ao. Na maior parte dos casos a solicita\u00e7\u00e3o e repassada ao sistema de controle e aquisic\u00e3o. A requisic\u00e3o Modbus repassada ao sistema de controle e aquisi\u00e7\u00e3o e simplificada. Somente o PDU (simple Protocol Data Unity) da requisic\u00e3o e repassada ao sistema de controle e aquisi\u00e7\u00e3o. O sistema de controle e aquisi\u00e7ao ent\u00e3o processa a requisi\u00e7ao recebida e retorna a resposta ao sistema de comunica\u00e7\u00e3o embarcada. O sistema de comunica\u00e7\u00e3o reconstr\u00f3i o ADU (Application Data Unit) referente \u00e0 implementa\u00e7\u00e3o TCP/IP do protocolo e em seguida envia a resposta, atraves da rede Ethernet, ao dispositivo mestre solicitante. Na figura 3.11 e ilustrada a estrutura de uma mensagem Modbus TCP/IP. Para mais detalhes sobre o protocolo Modbus TCP/IP, ver [19] e [18]. O mapeamento dos registradores Modbus no sistema e suas respectivas func\u00e3es s\u00e3o descritos no Ap\u00eandice C.\nFigura 3.11: Estrutura da mensagem Modbus TCP/IP [19]\nTarefa de Logging\nO protocolo Modbus TCP/IP nao foi desenvolvido com o prop\u00f3sito de permitir que um registrador seja lido numa frequ\u00eancia muito alta, n\u00e3o sendo, portanto, adequado para a funcionalidade de logging do sistema. O proprio protocolo TCP/IP insere um overhead de comunica\u00e7c\u00e3ao muito alto, tornando a comunica\u00e7c\u00e3ao ineficiente de certa forma. Para aplica\u00e7co\u00e3es que requerem taxas de transfer\u00eaencia muito altas, ou streaming de dados, o protocolo UDP/IP e mais adequado. Para atender \u00e0s necessidades de logging do sistema, foi implementada um tarefa de logging no sistema de comunica\u00e7c\u00e3ao, que assim como as demais ate agora descritas, funciona de maneira colaborativa e n\u00e3ao-bloqueante. O mecanismo de logging do sistema utiliza unica e exclusivamente comunica\u00e7ao de dados sobre UDP/IP. Nem o sistema de comunica\u00e7\u00e3o, nem o sistema de controle e aquisic\u00e7a\u00e3o foram projetados para armazenar grandes quantidades de dados do processo na sua memoria interna. Dessa forma, todo o logging propriamente dito do\nsistema, ou seja, o armazenamento em memoria nao-volatil dos dados de processo, e realizado via rede atraves de um servi\u00e7o implementado pelo sistema do concentrador de dados (que sera descrito na proxima se\u00e7\u00e3o), ou ainda por um servi\u00e7o externo qualquer, desde que esse servi\u00e7o implemente o protocolo de logging utilizado. A tarefa de logging, implementada no sistema de comunica\u00e7ao, apenas l\u00e2 os dados inseridos na memoria FIFO (ou diretamente enviados pelo barramento paralelo) e envia esses dados para o servi\u00e7o de logging remoto configurado no sistema.\nPara o funcionamento da funcionalidade de logging remoto no sistema foi necessaria a cria\u00e7\u00e3o de um protocolo m\u00ednimo de comunicac\u00e3o. Toda a opera\u00e7\u00e3o de logging do medidor \u00e9 coordenada pelo sistema embarcado de comunica\u00e7\u00e3o, mais especificamente pela tarefa de logging. Caso o sistema esteja configurado para realizar o logging, a tarefa de logging primeiramente solicita ao servi\u00e7co remoto de logging a cria\u00e7c\u00e3ao de um canal de logging, de acordo com as configura\u00e7co\u00e3es da unidade de processamento. Apos a confirmac\u00e7\u00e3ao da cria\u00e7c\u00e3ao do canal, a tarefa de logging ent\u00e3ao autoriza o modulo de controle e aquisic\u00e3o a iniciar o envio dos dados. Os dados de logging recebidos pelo sistema sa\u00e3o empacotados de acordo com o protocolo definido e ent\u00e3ao enviados, via rede, para o servi\u00e7o de logging remoto. Uma solicita\u00e7\u00e3o para finalizar o logging pode ser enviada pelo usuario, pela aplica\u00e7ca\u00e3o remota ou pelo proprio sistema de controle e aquisi\u00e7c\u00e3ao. Quando o sistema de comunicacao recebe uma solicitac\u00e3o de finalizac\u00e3o de logging, este primeiro interrompe o logging no sistema de aquisi\u00e7ca\u00e3o e controle, quando for o caso, e enta\u00e3o solicita ao servi\u00e7co de logging remoto a finaliza\u00e7c\u00e3ao do canal de logging criado. O protocolo de logging, criado para permitir o funcionamento de tal mecanismo, conforme descrito, \u00e9 apresentado no Ap\u00e2ndice D.\nTarefa de Recrutamento\nO sistema de comunica\u00e7c\u00e3ao pode ser configurado com um IP fixo ou enta\u00e3o utilizar o protocolo de DHCP para obter um endere\u00e7o IP e suas configura\u00e7\u00e3es de rede. Quando configurado para utilizar o servi\u00e7o de DHCP, se faz necessaria a utilizac\u00e3o de algum mecanismo de cadastramento de equipamentos. Do contrario, um mestre nunca descobriria o endere\u00e7co de um dado equipamento, assim configurado, numa rede. Para solucionar esse problema foi criado um mecanismo de \u201drecrutamento\u201dde equipamentos. Para tanto foi criada uma tarefa de recrutamento no sistema de comunica\u00e7c\u00e3ao. A tarefa de recrutamento segue as mesmas premissas das demais tarefas ate agora descritas. Para tal mecanismo de recrutamento funcionar e necessario que exista um servi\u00e7co re-crutador na rede. O servi\u00e7co recrutador e implementado no sistema do concentrador de dados, o qual sera descrito na proxima sec\u00e7\u00e3ao.\nQuando o sistema de comunicac\u00e7a\u00e3o embarcada obtem um IP atraves do servidor\nDHCP da rede, a tarefa de recrutamento solicita ao recrutador da rede, via um broadcast, a sua inclus\u00e3ao na lista de equipamentos da rede. A lista de equipamentos da rede pode ent\u00e3ao ser obtida por um mestre qualquer e o endere\u00e7co IP de um dado equipamento pode ser determinado. Os equipamentos s\u00e3ao identificados atrav\u00e9es de IDs alfa-num\u00e9ericas, definidas pelo usua\u00e9rio. Al\u00e9em das IDs, o usu\u00e9ario, ou aplicac\u00e7\u00e3ao, pode utilizar os par\u00eaametros de descri\u00e7c\u00e3ao do equipamento e tipo do equipamento para identificar univocamente um determinado equipamento. O protocolo de cadastramento foi implementado sobre o protocolo UDP, uma vez que demanda a transmiss\u00e3ao em broadcast de uma solicita\u00e7c\u00e3ao de um recrutamento. A descri\u00e7c\u00e3ao do protocolo de recrutamento desenvolvido \u00e9e apresentada no Ap\u00eaendice D.\n3.4\tSistema Computacional do Concentrador de Dados\nA unidade de processamento do medidor de fra\u00e7c\u00e3ao de \u00e9agua foi, at\u00e9e agora, apresentada e tratada como sendo uma unidade u\u00e9nica na rede. No entanto, o sistema digital como um todo, formado pela unidade de processamento, sistema do concentrador de dados e sistema de interface com o usu\u00e9ario, foi concebido para funcionar com diversos equipamentos numa mesma rede. Num cen\u00e9ario onde existem diversos equipamentos e usua\u00e9rios operando esses equipamentos, um sistema concentrador se faz necess\u00e9ario. O sistema computacional do concentrador de dados \u00e9e um servi\u00e7co de suporte a opera\u00e7c\u00e3ao das unidades de processamento do medidor de fra\u00e7ca\u00e3o de \u00e9agua. Al\u00e9em disso, o sistema do concentrador de dados implementa uma interface de comunica\u00e7ca\u00e3o de alto n\u00e9vel entre o sistema de interface com usu\u00e9ario com as unidades de processamento. As funcionalidades oferecidas pelo sistema do concentrador de dados s\u00e3ao abaixo listadas:\n\u2022\tServico de recrutamento de equipamentos: quando os equipamentos sao configurados para utilizarem o servi\u00e7co de DHCP para a obten\u00e7c\u00e3ao de seus en-dere\u00e7cos de rede, faz-se necessa\u00e9ria a utiliza\u00e7c\u00e3ao de um mecanismo que resolva os endere\u00e7cos dos equipamentos. O servi\u00e7co de recrutamento recebe solicita\u00e7c\u00e3oes de recrutamento e mant\u00e9em uma lista com os equipamentos presentes na mesma sub-rede na qual ele est\u00e9a instalado.\n\u2022\tServi\u00e7o de logging: o registro de logging do equipamento n\u00e3o fica armazenado nele devido a limita\u00e7c\u00e3oes da sua capacidade de armazenamento. O servi\u00e7co de logging \u00e9e o respons\u00e9avel pelo registro dos dados de logging dos equipamentos da mesma rede na qual ele foi instalado. Os arquivos podem ser posteriormente consultados pela aplica\u00e7c\u00e3ao de usu\u00e9ario.\n\u2022 Servico de Webservices para opera\u00e7\u00e3o do sistema digital: o servi\u00e7o de\nWebservices implementa uma interface de alto n\u00edvel, orientada a servi\u00e7os, para a configura\u00e7\u00e3o e opera\u00e7\u00e3o das unidades de processamento do sistema. A consulta aos arquivos de logging e a lista de equipamentos recrutados na rede tambem \u00e9 realizada atraves do servi\u00e7o de webservices.\nO servi\u00e7o do concentrador de dados precisa ser instalado na mesma sub-rede em que as unidades de processamento serao instaladas. O servi\u00e7o pode ser instalado no proprio servidor da rede ou numa maquina separada. Caso o servi\u00e7o seja instalado numa maquina separada, e seja necessario acessar o sistema digital de outra rede, \u00e9 importante que a maquina na qual o servic\u00e7o do concentrador de dados foi instalado possua definida uma rota para a comunicac\u00e3o com as redes externas. Devido ao fato de as unidades de processamento implementarem o padrao Modbus TCP/IP, qualquer aplicativo supervisorio ou de configura\u00e7ao que seja compat\u00edvel como esse padrao pode ser utilizado sem que haja a necessidade de utiliza\u00e7ao do servico do concentrador de dados. E importante ressaltar que o servi\u00e7o do concentrador de dados nao interfere na comunica\u00e7\u00e3o Modbus TCP/IP, permanecendo as unidades de processamento compat\u00edveis com tal padr\u00e3o. Na figura 3.12 \u00e9 ilustrada uma poss\u00edvel configurac\u00e3o para o sistema digital, com a utiliza\u00e7c\u00e3ao do servi\u00e7co do concentrador de dados\n{ FIREWALL )\n/ / I I\nI\nI\n\\\nConcentrador\nde Dados\nA\nEquipamento #1\nPC_1\nPC 2\nEquipamento\n#2\nPC_n\nEquipamento #N\n\\\ni\ni\nServidor da Intranet [\ni\nj\n/\nINTRANET\nFigura 3.12: Poss\u00edvel configura\u00e7\u00e3o para o sistema digital\nO chamado Webservice \u00e9 uma solu\u00e7\u00e3o utilizada na integrac\u00e3o de sistemas e na comunica\u00e7\u00e3o entre aplicac\u00e3es diferentes. Com esta tecnologia \u00e9 poss\u00e9vel que sistemas desenvolvidos em plataformas diferentes sejam compat\u00edveis. Trata-se de uma tecnologia de RPC (Remote Procedure Calls), que permite o desenvolvimento de aplica\u00e7\u00e3es distribu\u00e9das atrav\u00e9es de m\u00e9etodos e objetos remotos. As bases para a constru\u00e7c\u00e3ao de um Webservice s\u00e3o os padr\u00e3es XML e SOAP. O transporte dos dados \u00e9 normalmente realizado via protocolo HTTP (o padr\u00e3o nao determina o protocolo de transporte). Os dados sao transferidos no formato XML e encapsulados pelo protocolo SOAP. A grande vantagem de se utilizar o HTTP (e os Webservices) como solu\u00e7\u00e3o de comunicac\u00e3o entre equipamentos e sistemas \u00e9 a de que, normalmente, os firewalls corporativos e industriais n\u00e3ao oferecem restri\u00e7co\u00e3es a esse tipo de comunica\u00e7c\u00e3ao sem, no entanto, perderem a seguranca. Boa parte dos sistemas supervisorios, ou SCADAs, atuais j\u00e9 implementam nas suas vers\u00e3oes mais recentes drivers para a comunica\u00e7ca\u00e3o com equipamentos e processos que suportam Webservices.\nA comunica\u00e7c\u00e3ao remota via rede, implementada no sistema pelo servi\u00e7co de Webservices do sistema do concentrador de dados, tem se tornado cada vez mais importante em aplica\u00e7c\u00e3oes industriais. As capacidades de supervis\u00e3ao, configura\u00e7ca\u00e3o e diagn\u00e9ostico remotos est\u00e3ao se tornando padr\u00e3ao em sistemas industriais por diversas raz\u00e3oes, como por exemplo:\n\u2022\tpermite que especialistas possam acompanhar as vari\u00e9veis do processo em qualquer lugar do mundo em que se encontrarem, e de qualquer computador;\n\u2022\tpermite o diagn\u00e9ostico e solu\u00e7c\u00e3ao de problemas em equipamentos defeituosos por parte do fabricante sem que seja necessario o envio de um t\u00e9cnico a planta;\n\u2022\treduz os custos operacionais da planta e o custos de manuten\u00e7c\u00e3ao e de instalac\u00e7\u00e3ao dos equipamentos;\nO sistema do concentrador de dados foi todo desenvolvido na linguagem CSharp, utilizando a ferramenta de desenvolvimento Visual Studio, da Microsoft. O concentrador de dados utiliza a plataforma .NET v2, desenvolvida pela Microsoft. A utiliza\u00e7ca\u00e3o da plataforma .NET requer que o servi\u00e7co seja instalado numa maquina que ofere\u00e7ca suporte a utilizac\u00e3o dessa plataforma. Existem alguns projetos de implementac\u00e3o dessa plataforma em ambiente Linux, como o projeto Mono. Para ser instalado num sistema operacional Microsoft Windows \u00e9 necess\u00e9rio que este possua instalados o IIS (Internet Information Service e a plataforma .NET v2 propriamente dita. Ambos podem ser obtidos atrav\u00e9es da p\u00e9agina da Microsoft na Internet.\nOs servi\u00e7cos de recrutamento e logging do sistema do concentrador de dados utilizam exclusivamente o protocolo UDP/IP na comunica\u00e7\u00e3o com as unidades de processamento, conforme descrito na se\u00e7ao anterior do presente cap\u00e1tulo. O protocolo de comunicac\u00e7a\u00e3o desenvolvido para permitir o funcionamento desse servic\u00e7o \u00e1e descrito no Ap\u00eaendice D. No Ap\u00eaendice E s\u00e3ao apresentados e descritos todos os servi\u00e7cos, ou m\u00e1etodos, oferecidos pela interface Webservice. Na figura 3.13 \u00e1 mostrado o diagrama de blocos do sistema do concentrador de dados, onde est\u00e3ao representadas todos as comunica\u00e7co\u00e3es existentes no sistema, bem como os protocolos utilizados.\nO sistema do concentrador de dados desenvolvido pode ser considerado como um driver de nova gera\u00e7ca\u00e3o para as unidades de processamento, pois permite a comunica\u00e7c\u00e3ao destes com diversos aplicativos: sistemas supervisorios de ultima gera\u00e7c\u00e3ao, planilhas eletr\u00eaonicas (Excel, por exemplo), ambientes visuais de desenvolvimento e ate mesmo um simples navegador de hipertexto. A interface final que permite a compatibilidade com todos os aplicativos citados e a interface Webservices. Computadores de dentro e de fora da intranet poder\u00e3ao utiliza-la para acessar os recursos das unidades de processamento. N\u00e3o e necessario instalar drivers Modbus TCP/IP nos computadores para permitir a utiliza\u00e7\u00e3o das unidades. Na verdade, n\u00e3o e necessario instalar driver algum. Somente o servi\u00e7o do concentrador de dados precisa ser instalado e estar ligado e conectado \u00e0 rede para prover os servi\u00e7cos necessarios.\n3.5\tSistema de Interface com Usuario\nO sistema digital foi concebido para que a interface com usuario funcione em rede, atraves da utilizac\u00e7\u00e3ao de um navegador de Internet padra\u00e3o. Nesse contexto, o sistema de interface com usuario e apenas uma pagina de hipertexto (HTTP) que permite que o usuario configure a unidade de processamento que, por sua vez, controla e coordena a opera\u00e7ca\u00e3o dos sistemas que comp\u00e3oem o medidor de frac\u00e7\u00e3ao de agua. Alem de permitir a configura\u00e7c\u00e3ao do funcionamento do medidor de fra\u00e7c\u00e3ao de agua, o sistema de interface com o usuario tambem permite a opera\u00e7ca\u00e3o do sistema, o acesso aos dados de logging armazenados no concentrador de dados e tambem a leitura do estado atual do medidor, em tempo-real, incluindo todas a suas variaveis de entrada, sa\u00edda e internas.\nA principio nao existem restri\u00e7\u00e3es de acesso e o usuario pode acessar a interface com usuario do sistema de qualquer computador, que n\u00e3ao necessariamente precisa estar na mesma rede que o sistema do concentrador de dados. Para permitir o acesso do usuario aos equipamentos, o sistema realiza uma autenticac\u00e7\u00e3ao simples com o uso de senhas. O administrador da rede, ou do sistema, pode adicionar novos usuarios no sistema, remover usuarios ou alterar senhas. O sistema de interface implementado para\nFigura 3.13: Arquitetura computacional do sistema do concentrador de dados\nfuncionar atrav\u00e9es de um navegador \u00e9e, em teoria, compat\u00e9vel com todos os navegadores e independente do sistema operacional. O u\u00e9nico pr\u00e9e-requisito \u00e9e que o navegador possua instalado o plugin .NET Compact Framework v2.0, ou superior. Apesar de, teoricamente, o sistema ser independente da plataforma, somente foram realizados testes no ambiente Microsoft Windows, e com a utiliza\u00e7\u00f5o dos navegadores Mozilla Firefox v1.5, Mozilla Firefox v2.0 e Microsoft Internet Explorer v6.\nAp\u00e9os a sua autentica\u00e7ca\u00f5o no sistema, o usu\u00e9ario tem acesso a lista de equipamentos detectados na rede de equipamentos. Somente serao detectados no sistema os equipamentos do tipo do descrito no presente trabalho, ou equipamentos desenvolvidos que utilizem pelo menos o mesmo sistema de comunicac\u00e7\u00f5ao embarcada aqui descrito, ou que implementem, de alguma forma, o protocolo de recrutamento descrito no Ap\u00f4endice C. O usu\u00e9ario pode ent\u00f5ao escolher na lista de equipamentos detectados o equipamento que ele deseja configurar ou operar. Ap\u00e9os a escolha do equipamento, o usu\u00e9ario tem acesso aos menus de configura\u00e7ca\u00f5o e opera\u00e7c\u00f5ao espec\u00e9ficos ao tipo do equipamento selecionado. As informa\u00e7c\u00f5oes de identifica\u00e7c\u00f5ao do equipamento selecionado aparecem no canto superior esquerdo da tela. Por enquanto, o unico tipo de equipamento existente \u00e9 o medidor de fra\u00e7c\u00f5ao de a\u00e9gua. Apesar disso, o sistema de interface com o usu\u00e9ario, assim como o restante do sistema digital, foi projetado para ser escalona\u00e9vel e tamb\u00e9em ser re-utiliz\u00e9avel integralmente ou parcialmente em outros projetos e equipamentos. Abaixo s\u00f5ao listadas as op\u00e7c\u00f5oes do menu de configura\u00e7c\u00f5ao que o usu\u00e9ario pode configurar:\n\u2022\tEthernet: nesta opc\u00f5o o usuario pode configurar o identificador, a descric\u00f5o e o tipo do equipamento. Essas informa\u00e7c\u00f5oes s\u00f5ao exibidas na lista de equipamentos detectados e s\u00f5o uteis para a identifica\u00e7\u00f5o de um dado equipamento na rede. O usu\u00e9ario pode tamb\u00e9em configurar se o sistema funcionar\u00e9a com IP fixo ou obter\u00e9a as suas configura\u00e7\u00f5es atrav\u00e9s do servico de DHCP. Caso seja escolhida a op\u00e7\u00f5o de IP fixo, \u00e9e necess\u00e9ario que o usu\u00e9ario configure tamb\u00e9em os par\u00f4ametros de IP, a m\u00e9scara de rede e o gateway da rede.\n\u2022\tModo de Aquisi\u00e7\u00e3o: nesta opc\u00f5o o usu\u00e9rio pode configurar os canais de aquisi\u00e7ca\u00f5o ativos dentre os 4 dispon\u00e9veis. Tamb\u00e9em \u00e9e necessa\u00e9ria a configura\u00e7c\u00f5ao da frequ\u00f4ncia de aquisi\u00e7ao e da taxa de oversampling, parametros esses comuns a todas as entradas.\n\u2022\tModo Controlador: nesta opc\u00e7\u00f5ao o usu\u00e9ario pode habilitar ou desabilitar os controladores digitais do sistema e pode tamb\u00e9em configurar os par\u00f4ametros dos controladores. Na atual implementa\u00e7ca\u00f5o, os par\u00f4ametros s\u00f5ao as constantes da equa\u00e7c\u00f5ao de diferen\u00e7cas do controlador desejado e a refer\u00f4encia do controlador. A refer\u00f4encia do controlador pode ser posteriormente alterada em tempo real.\n\u2022\tModo Filtro Digital: permite que o usu\u00e1rio configure o funcionamento do filtro digital, habilitando ou desabilitando esta funcionalidade. Tamb\u00e9m \u00e9 poss\u00edvel configurar os par\u00e1metros do filtro. Na atual implementa\u00e7\u00e3o, os par\u00e2metros do filtro digital s\u00e3o as constantes da equa\u00e7\u00e3o de diferen\u00e7a do filtro desejado.\n\u2022\tModo Medidor de Fracao de Agua: nesta op\u00e7\u00e3o o usu\u00e9rio pode habilitar o medidor de frac\u00e3o de \u00e9gua e configurar seus parametros de funcionamento. Os parametros configurados aqui s\u00e3o espec\u00edficos a t\u00e9cnica de medi\u00e7\u00e3o utilizada e t\u00e1m sofrido constantes modifica\u00e7c\u00e3oes no decorrer do trabalho, por isso n\u00e3ao descritos em mais detalhes no momento.\n\u2022\tSa\u00eddas Anal\u00f3gicas: permite ao usu\u00e9rio habilitar ou desabilitar individualmente as sa\u00e9das anal\u00f3gicas do sistema. As sa\u00e9das habilitadas precisam ter configuradas o seu sinal de origem. O sinal de refer\u00e1encia de uma sa\u00e9da anal\u00e9ogica pode ser a sa\u00e9da de um filtro ou controlador. Tamb\u00e9em pode ser configurada pelo usu\u00e9ario via rede. Existe ainda uma outra op\u00e7\u00e3o, que seria a gera\u00e7ao de uma fun\u00e7\u00e3o de pr\u00e9-definida.\n\u2022\tSa\u00eddas Digitais: nessa op\u00e7\u00e3o o usu\u00e9rio pode habilitar ou desabilitar individualmente as sa\u00e9das digitais do sistema.\n\u2022\tLogging: permite que o usu\u00e9rio configure quais canais de dados do medidor ele deseja que sejam armazenados. Os poss\u00e9veis canais de logging s\u00e3ao as entradas anal\u00e9ogicas, as sa\u00e9das anal\u00e9ogicas e os sinais do controlador. Al\u00e9em disso, o usua\u00e9rio pode definir a frequ\u00e1ncia de logging em fun\u00e7\u00e3o da taxa de aquisi\u00e7\u00e3o. Tamb\u00e9m \u00e9 poss\u00e9vel escolher se o logging ser\u00e9 realizado no concentrador de dados da rede ou atrav\u00e9s de algum outro dispositivo. Caso seja utilizado outro dispositivo, \u00e9 necess\u00e9rio configurar o endereco IP e a porta para o envio do dados de logging\n\u2022\tAlarmes: nessa opc\u00e3o \u00e9 poss\u00e9vel configurar o sistema de alarmes do sistema. O mecanismo de alarmes n\u00e3ao foi implementado. O comportamento do sistema no caso de alarmes e a maneira como essa informa\u00e7c\u00e3ao chegar\u00e9a ao usu\u00e9ario ainda n\u00e3ao foram definidas. Apesar disso, essa opc\u00e7\u00e3ao aparece no menu de configura\u00e7c\u00e3oes.\nQuando habilitado o modo medidor de fra\u00e7ao de \u00e9gua, as demais op\u00e7oes de confi-gura\u00e7c\u00e3ao do sistema tornam-se indispon\u00e9veis, pois s\u00e3ao determinadas pelo funcionamento do modo do medidor de fra\u00e7\u00e3o de agua. Somente quando o modo de fra\u00e7\u00e3o de agua esta\u00e9 desabilitado o usu\u00e9ario pode configurar o sistema. A operac\u00e7\u00e3ao do sistema fora do modo medidor de frac\u00e7\u00e3ao de \u00e9agua foi de muita utilidade durante o desenvolvimento e teste dos sistemas que comp\u00e3oem o medidor.\nAl\u00e9em do menu de configura\u00e7ca\u00e3o, o sistema de interface tamb\u00e9em possui o menu de opera\u00e7c\u00e3ao. No menu de operac\u00e7\u00e3ao, o usua\u00e9rio pode ler os valores atuais das entradas\nanal\u00f3gicas, entradas digitais, sa\u00eddas anal\u00f3gicas e sa\u00eddas digitais. O usu\u00e1rio tamb\u00e9m pode controlar as sa\u00eddas anal\u00f3gicas e digitais, desde que estas estejam configuradas para aceitar o controle do usu\u00f3rio. Tamb\u00f3m \u00f3 poss\u00edvel para o usuario iniciar um ensaio com o sistema de microondas. Os ensaios de microondas s\u00e3o realizados para a avalia\u00e7ao das t\u00f3cnicas de medic\u00e3o utilizando-se um dado conjunto de par\u00e2metros como, por exemplo, frequ\u00e2ncia do sinal, limites do sweep de frequ\u00e2ncia, numero de amostragem em cada frequencia do sweep, entre outros. Todo os resultados experimentais que ser\u00e3o apresentados no presente trabalho foram obtidos atrav\u00f3s da realiza\u00e7ao dos referidos ensaios.\nA interface com o usuario foi desenvolvida utilizando-se a linguagem de codifica\u00e7\u00e3o HTML, para a codifica\u00e7\u00e3o b\u00f3sica das p\u00f3ginas de hipertexto. Tamb\u00f3m foi utilizada a linguagem ASP.NET para a cria\u00e7\u00e3o dos controles de usu\u00f3rio nas p\u00f3ginas. Os scripts de servidor executados pelos comandos ASP.NET foram escritos na liguagem CSharp. O sistema de interface com usuario foi todo desenvolvido no ambiente Microsoft Visual Studio v5. Na figura 3.14 \u00f3 mostrada uma tela do sistema supervisorio, na qual aparece a lista de equipamentos detectados. Na figura 3.15 \u00f3 mostrada uma tela do sistema supervis\u00f3rio, na qual aparecem as configura\u00e7\u00e3es de logging do equipamento.\n,_1 Untitled Page - Mozilla\n3 File Edit View Go Bookmarks Tools Window Help\nV http://localhost:! 310/ConcentradorWeblnterface/index. him\n sg\n- i . i. a, \u00ab\nReload 5K\n\nSistema de Configura\u00e7\u00e3o e Monitoramento de M\u00f3dulos de Aquisi\u00e7\u00e3o de Dados\nEquipamento Selecionado:\t\nID:\tN/A\nDescri\u00e7\u00e3o:\tN/A\nModelo:\tN/A\nIP:\tN/A\nNENHUM EQUIPAMENTO SELECIONADO!\t\nSelecionar Equipamento \u00bbi\t\nListagem dos equipamentos detectados:\n1\tPD\tTIPO\tDESC\tIP\t\nSelect\tAQ01\t>\t1 Prototipo\t1192.168.0.100\t\n\t\t\t\t1 Selecio\tna Equipamento |\n\u00a1 I\t1|-O=\nFigura 3.14: Tela da interface com usu\u00e1rio onde \u00f3 apresentada a lista de equipamentos detectados na rede\nFigura 3.15: Tela da interface com usuario onde e apresentado o menu de configura\u00e7\u00e3o de logging do sistema\n3.6\tSistema de Alimenta\u00e7\u00e3o DC\nPara atender as demandas de pot\u00eancia e tens\u00e3es de alimenta\u00e7\u00e3o dos sistemas, principalmente do sistema de gera\u00e7ao e processamento de microondas, foram desenvolvidas fontes de alimenta\u00e7\u00e3o DC espec\u00edficas. O sistema de gera\u00e7\u00e3o e processamento de microondas demanda uma diversidade de tens\u00e3oes DC, com as mais variadas pot\u00eaencias. Os componentes que comp\u00e3oem o sistema de gera\u00e7c\u00e3ao e processamento de microondas necessitam, para funcionar, das tens\u00e3es de \u00b15V, \u00b112V e \u00b115V. Al\u00e9m disso, devido ao seu alto custo, o sistema de gera\u00e7c\u00e3ao e processamento de microondas necessita de um sistema de alimenta\u00e7c\u00e3ao confi\u00edavel, que seja capaz de proteger os sistemas a ele ligados contra surtos, sobretens\u00e3oes e demais anormalidades da rede el\u00edetrica. O sistema de alimentac\u00e7\u00e3ao tamb\u00edem precisa ser imune a interfer\u00eaencias eletromagn\u00edeticas, uma vez que este estar\u00eda muito pro\u00edximo de fontes eletromagn\u00edeticas relativamente potentes, capazes de interferir no funcionamento de dispositivos el\u00edetricos e eletr\u00eaonicos.\nOutro requisito das fontes de alimentac\u00e7\u00e3ao DC, empregadas em sistemas de instrumenta\u00e7\u00e3o e medi\u00e7\u00e3o, \u00e9 que essas apresentem baixo ripple e baixo conteudo harm\u00eanico na tens\u00e3o de sa\u00edda. A qualidade das medi\u00e7\u00e3es do sistema de gera\u00e7\u00e3o e processamento est\u00e1 diretamente relacionada \u00e0 qualidade das fontes de alimenta\u00e7ao utilizadas. Por esse motivo, fontes chaveadas, muito comuns no mercado hoje em dia, na\u00e3o s\u00e3ao as mais indicadas para sistemas de instrumentac\u00e7\u00e3ao e medi\u00e7ca\u00e3o, uma vez que devido ao seu princ\u00edpio de funcionamento, essas n\u00e3o costumam apresentar as caracter\u00edsticas de desejadas. Por esse motivo optou-se pelo desenvolvimento de fontes de alimenta\u00e7ca\u00e3o lineares. As fontes desenvolvidas possuem as seguintes caracter\u00edsticas:\n\u2022\tinterruptor iluminado - permite que o usuario identifique mais facilmente se o sistema esta ligado ou n\u00e3o;\n\u2022\tconectores para cabos de for\u00e7a do tipo o IEC - padr\u00e3o utilizado nas fontes de computadores;\n\u2022\tprote\u00e7ao contra surtos na entrada atrav\u00eds de fus\u00edvel;\n\u2022\tchave interna seletora de tens\u00e3o (110/220);\n\u2022\ttransformadores isoladores toroidais de alto rendimento, blindados e selados;\n\u2022\tutilizac\u00e3o de diodos schottky na ponte de retifica\u00e7ao;\n\u2022\tdiversos est\u00edagios de filtragem e estabilizac\u00e7\u00e3ao;\n\u2022\tprote\u00e7c\u00e3ao el\u00edetrica contra sobretens\u00e3oes na sa\u00edda;\n\u2022 prote\u00e7ao contra sobrecorrente e curtos na sa\u00edda atraves da utiliza\u00e7\u00e3o de fus\u00edveis de queima r\u00e1pida (quick blow).\nOs transformadores toroidais utilizados s\u00e3o da s\u00e1rie 70000 da AMVECO Magnetics Inc, possuem perfil baixo e s\u00e3o espec\u00edficos para serem montados em PCI. O modelo do transformador utilizado depende da tensao e da pot\u00eancia de sa\u00e1da. A PCI da fonte foi desenhada de maneira a ser compat\u00e1vel com qualquer transformador AMVECO da s\u00e1erie 70000. O desenho da PCI tamb\u00e1em levou em considera\u00e7c\u00e3ao aspectos de compatibilidade eletromagn\u00e1tica, de maneira a minimizar a influ\u00eancia e a emissao de interfer\u00eancias eletromagn\u00e1eticas na fonte.\nAs fontes foram projetadas com 2 sa\u00e1das completamente independentes de tens\u00e3ao, podendo inclusive serem ajustadas com tenso\u00e3es de sa\u00e1da distintas. A tens\u00e3ao de sa\u00e1da \u00e1e determinada por um regulador de tens\u00e3o vari\u00e1vel, modelo LM317. O LM317 permite que a tensa\u00e3o de sa\u00e1da seja configurada entre 1,25V e 37V, havendo pequenas varia\u00e7c\u00e3oes dessa faixa de acordo com o fabricante do componente. A configura\u00e7c\u00e3ao da tens\u00e3ao de sa\u00e1da no sistema de alimenta\u00e7c\u00e3ao DC \u00e1e feita atrav\u00e1es do ajuste de um conjunto de potenci\u00eaometro e resistor. Dependendo dos valores escolhidos para o conjunto, a fonte pode apresentar uma faixa de variac\u00e7\u00e3ao de tensa\u00e3o maior ou menor, sempre respeitando o limite superior imposto pela tens\u00e3ao de nominal de sa\u00e1da do transformador. O ajuste fino da tens\u00e3ao de sa\u00e1da \u00e1e sempre feito atrav\u00e1es do potencio\u00eametro.\nPara a utiliza\u00e7ca\u00e3o de sa\u00e1das sim\u00e1etricas \u00e1e necess\u00e1ario primeiramente igualar as tens\u00e3oes das 2 sa\u00e1das da fontes e ent\u00e3ao curto-circuitar o terminal negativo da sa\u00e1da 1 com o terminal positivo da sa\u00e1da 2. Para cada um dos circuitos de estabiliza\u00e7ca\u00e3o da fonte, foi utilizado um CMC (Common Mode Choke), que permite a elimina\u00e7ao ou redu\u00e7\u00e3o do ru\u00e1do de modo comum, presente nestes. A prote\u00e7c\u00e3ao de sobretensa\u00e3o de cada uma das sa\u00e1das \u00e1e realizada atrav\u00e1es de um circuito de clipping. O disparo do circuito de clipping \u00e1 realizado por um diodo zenner, com tensao de polariza\u00e7ao adequada \u00e0s tens\u00e3es de sa\u00fada desejadas. Quando o circuito de clipping \u00e1 acionado, a tens\u00e3o de sa\u00fada \u00e1 instantaneamente aterrada e o fus\u00e1vel de prote\u00e7\u00e3o da sada queima. A utiliza\u00e7\u00e3o do circuito de prote\u00e7c\u00e3ao contra sobretens\u00e3oes de na sa\u00e1da \u00e1e opcional.\nForam montadas 4 fontes de alimenta\u00e7ao, sendo tr\u00eas para o sistema de gera\u00e7\u00e3o e processamento de microondas e uma para a unidade de processamento. Todas as fontes montadas foram configuradas para funcionar como fontes sim\u00e1etricas. As tr\u00eaes fontes montadas para o sistema de gerac\u00e7\u00e3ao e processamento de microondas s\u00e3ao de \u00b15V, \u00b112V e \u00b115V. A fonte da unidade de processamento \u00e1 de \u00b115V, para permitir que as sa\u00e1das anal\u00e1ogicas da unidade possam ser configuradas, com uma certa margem de folga, para a faixa de \u00b112V. Foram projetadas e constru\u00e1das caixas de metal para as fontes. A tampa da caixa de metal \u00e1e de chapa perfurada para facilitar a ventila\u00e7c\u00e3ao da\nfonte, principalmente dos reguladores de tens\u00e3o, que necessitam dissipar muito calor. Na sa\u00eddas de tens\u00e3o CC foram utilizados conectores f\u00eamea tipo \u201dbanana\u201dde 4mm. Na figura 3.16 \u00e9 mostrado, a t\u00edtulo de ilustra\u00e7ao, o desenho da PCI da fonte. Nas figuras 3.17 e 3.18 s\u00e3o mostradas fotos dos fontes prontas. O diagrama esquem\u00e9tico da fonte \u00e9 mostrado no Ap\u00eandice B.\nFigura 3.16: Desenho da PCI da fonte de alimentac\u00e3o\nFigura 3.17: Foto da fonte de alimentac\u00e3o com a tampa aberta\n3.7\tSistema de Suporte aos Ensaios\nPara a avalia\u00e7ao dos sensores de microondas e das tecnicas de medic\u00e3o, foi necess\u00e9ria a constru\u00e7\u00e3o de uma bancada de testes que, na aus\u00eancia de uma infra-estrutura de escoamento multif\u00e9asico, permite que alguns aspectos de um escoamento multif\u00e9asico sejam reproduzidos em laboratorio. Os componentes principais da bancada de ensaio\nFigura 3.18: Foto da fonte de alimenta\u00e7\u00e3o com a tampa fechada s\u00e3o os tanques de acr\u00edlico. Foram utilizados dois tanques de acr\u00edlico, projetados e constru\u00eddos especificamente para o projeto, com sec\u00e3es transversais de tamanho similar a um tubo normalmente utilizado em instalacoes de produ\u00e7ao de petr\u00f3leo e g\u00e1s. Foi utilizado um tanque com sec\u00e3o transversal quadrada e outro com se\u00e7\u00e3o circular. Ambos os tanques possuem aproximadamente 6 polegadas de di\u00e2metro ou largura. O ensaio \u00f3 realizado num tanque por vez. Foram utilizados dois tanques com o objetivo de comparar a influ\u00e2ncia da geometria dos tanques no funcionamento do medidor. Os tanques possuem uma valvula de admiss\u00e3o e outra de sa\u00edda. Para a realiza\u00e7\u00e3o dos ensaios, os tanques s\u00e3ao enchidos com uma fra\u00e7c\u00e3ao de \u00edagua e \u00edoleo conhecida. Apo\u00eds a realiza\u00e7ca\u00e3o do ensaio a quantidade de \u00edagua ou \u00edoleo pode ser modificada com o aux\u00edlio das v\u00edalvulas.\nOs tanques foram projetados para serem utilizados na horizontal. Nessa confi-gurac\u00e3o, a separa\u00e7\u00e3o natural que ocorre entre a agua e o \u00f3leo nao afeta o comportamento do sistema. Isto ocorre porque os volumes de \u00e1gua e \u00f3leo que ficam entre as duas antenas utilizadas sa\u00e3o sempre constantes, independentemente do esta\u00edgio de separac\u00e7\u00e3ao da mistura. A configurac\u00e7\u00e3ao horizontal tamb\u00edem facilita a remo\u00e7ca\u00e3o controlada de algum dos componentes atrav\u00e1s da v\u00e1lvula de sa\u00edda, uma vez que ap\u00f3s um curto per\u00edodo de tempo a mistura se separa por completo, com \u00edoleo na parte superior e \u00edagua na parte inferior. A op\u00e7ao pela utiliza\u00e7ao do acr\u00edlico para a construcao dos tanques deve-se ao fato de que este n\u00e3ao interage com as microondas. Al\u00edem disso, o acr\u00edlico, por ser um material translu\u00edcido, permite que a mistura no interior do tanque seja visualmente inspecionada. Os tanques s\u00e3o sustentados por suportes de madeira para evitar interac\u00e3es indesejadas com as microondas.\nA bancada de ensaios foi constru\u00edda em metal e pintada eletrostaticamente com tinta epoxi, sendo montada sobre rodas para permitir a sua f\u00e1cil movimenta\u00e7\u00e3o. Os tanques e as antenas, que s\u00e3o a parte do sistema que ficam expostas \u00e0s microondas, foram confinadas numa caixa de metal devidamente aterrada. O objetivo da caixa \u00e1 impedir que as microondas se propaguem livremente pelo espa\u00e7o e interfiram no funcionamento dos equipamentos eletronicos utilizados no medidor e tamb\u00e1m nao oferecam nenhum risco \u00e0 saude das pessoas pr\u00e1ximas durante a realiza\u00e7ao dos ensaios. As antenas sa\u00e3o fixadas em posicionadores que permitem que estas possam ser afastadas ou aproximadas do tanque. Os posicionadores, por sua vez, sao fixados na tampa superior e na base da caixa de metal. A tampa da caixa foi constru\u00edda com chapas perfuradas. As chapas perfuradas permitem que seja poss\u00e1vel visualizar o interior da caixa sem, no entanto, comprometer o isolamento eletromagn\u00e1tico da caixa, uma vez que o di\u00e2metro dos furos da tampa \u00e1e bem inferior ao comprimento de onda das microondas utilizadas no sistema. Na figura 3.19 \u00e1 mostrada uma foto da bancada de ensaios durante a rea-lizac\u00e3o de um ensaio. Na figura 3.20 \u00e1 mostrada em detalhe a estrutura de ensaio no interior da caixa de metal.\nFigura 3.19: Foto da bancada de ensaios durante um ensaio\nFigura 3.20: Foto da bancada de ensaios durante um ensaio (detalhe do interior da caixa de Faraday)\n3.8\tSistema de Medi\u00e7\u00f5es Auxiliares\nConforme mostrado no cap\u00edtulo 2, as caracter\u00edsticas diel\u00e9tricas da agua variam significativamente com algumas propriedade f\u00edsicas da \u00e9gua. As duas principais fontes de erros de medi\u00e7ao para a aplica\u00e7ao dos sensores de microondas na industria de petr\u00f3leo e g\u00e9s s\u00e3o a temperatura da mistura e a salinidade da \u00e9gua. Para o correto funcionamento de um sensor de microondas e necess\u00e9rio que as medi\u00e7oes realizadas sejam corrigidas com os valores da medi\u00e7c\u00e3ao da temperatura e da salinidade mistura bif\u00edasica.\nApesar da import\u00e2ncia da realiza\u00e7\u00e3o das medi\u00e7\u00e3es auxiliares para a confiabilidade do sistema, o sistema de medi\u00e7c\u00e3oes auxiliares n\u00e3ao chegou a ser implementado no presente trabalho. Em aplica\u00e7\u00e3es industriais o efeito dessas fontes de varia\u00e7ao e incerteza \u00e9 relevante e n\u00e3ao pode ser desprezado, tendo em vista as condi\u00e7c\u00e3oes extremas que esses sistemas podem ser submetidos. No entanto, para o estudo em condic\u00e3es simuladas e controladas de laborat\u00e9rio, a influ\u00e2ncia de tais par\u00e2metros n\u00e3o compromete a validade das medi\u00e7c\u00e3oes.\n3.9\tConclus\u00f5es\nNo presente cap\u00e9tulo foi apresentado e descrito o sistema experimental desenvolvido. Cada um dos sub-sistemas que compoem a bancada de testes foram descritos,\ncom excec\u00e7\u00e3ao do sistema de medi\u00e7c\u00e3ao auxiliares que n\u00e3ao chegou a ser implementado durante o presente trabalho. Todos os sistemas foram desenvolvidos tendo em vista a possibilidade de aplicac\u00e7\u00e3ao futura num medidor industrial. Os sistemas de instru-menta\u00e7c\u00e3ao e de controle desenvolvidos permitem a constru\u00e7c\u00e3ao de va\u00e9rios tipos de sensores de microondas como, por exemplo, sensores de transmiss\u00e3ao, sensores de resson\u00e1ancia e sensores de reflex\u00e3o. A tecnologia aplicada nesses tipos de sensores \u00f3 muito parecida e com pequenas alterac\u00e7\u00e3oes na estrutura da bancada esses tipos de testes podem ser realizados.\nCom o desenvolvimento da bancada de ensaios uma etapa importante do projeto foi conclu\u00e9do. A partir da bancada \u00e9e poss\u00e9vel a realiza\u00e7c\u00e3ao de diversos experimentos que permitem que diversos aspectos positivos e negativos dos sensores de microondas possam ser avaliados. No pro\u00e9ximo cap\u00e9tulo ser\u00e3ao descritos os tipos de testes que foram realizados no sistema e as condi\u00e7c\u00e3oes nas quais se derem esses testes. Tamb\u00e9em ser\u00e3ao apresentados os resultados obtidos com a realiza\u00e7c\u00e3ao dos testes.\nCap\u00edtulo 4\nResultados Experimentais\nNo presente cap\u00edtulo ser\u00e3o descritos os testes e ensaios realizados com a unidade experimental. O objetivo principal dos testes \u00ede avaliar e viabilidade da utilizac\u00e7\u00e3ao de sensores de transmiss\u00e3ao para a medi\u00e7ca\u00e3o da fra\u00e7c\u00e3ao de a\u00edgua em aplica\u00e7c\u00e3oes da indu\u00edstria de petr\u00edoleo e ga\u00eds. Ser\u00e3ao apresentados os dados os obtidos nos diversos testes e ensaios realizados.\n4.1\tDescric\u00e3o de um Ensaio\nA bancada de ensaios foi inicialmente projetada para permitir a avaliac\u00e7\u00e3ao de sensores de transmiss\u00e3ao somente. Apesar disso, o sistema de microondas, permite assim como, o sistema digital, que outros tipos de sensores sejam constru\u00eddos e avaliados. No presente trabalho foram avaliados somente os sensores de transmiss\u00e3o. No entanto, foram identificados diversos fen\u00e2omenos de resson\u00e2ancia no interior da caixa de ensaios da bancada de testes.\nPara a realiza\u00e7c\u00e3ao dos testes foram utilizados a\u00edgua e \u00edoleo de cozinha. As quantidades desses dois componentes foram variadas ao longo de toda a faixa de mistura. Para uma dada composi\u00e7c\u00e3ao da mistura, diversos ensaios foram realizados e os dados foram coletados. Al\u00edem da composi\u00e7c\u00e3ao da mistura, o outro par\u00e2ametro do sistema que pode ser alterado \u00e9 a frequ\u00e2ncia do VCO.\nUm teste consiste em (para uma dada composi\u00e7ao da mistura bifasica no interior do tanque) medir a intensidade e o atraso de fase do sinal transmitido atrav\u00edes da mistura para um conjunto de frequ\u00e2ncias. Os testes podem ser realizados, por exemplo, para toda a faixa de frequ\u00e2ncias do VCO, de 8GHz a 12GHz. Um teste tamb\u00e9m pode ser realizado numa frequ\u00e2encia somente, ou em qualquer nu\u00edmero de frequ\u00e2encias desejado. A resoluc\u00e7\u00e3ao do sistema de gera\u00e7ca\u00e3o de microondas \u00ede de, aproximadamente, 1MHz.\nA realiza\u00e7\u00e3o dos ensaios experimentais foi automatizada na placa de controle e aquisi\u00e7ca\u00e3o. O usuario so necessita configurar alguns par\u00eaametros adicionais para que o sistema realize, de maneira automatica, o teste solicitado, disponibilizando em seguida os dados de logging armazenados durante a realiza\u00e7ca\u00e3o do teste. Os par\u00eaametros que o usuario necessita configurar no sistema de controle s\u00e3ao:\n\u2022\tTaxa de aquisi\u00e7\u00e3o do sistema (fs): a taxa de aquisicao do sistema, alem de definir a taxa de amostragem do sistema, funciona como refer\u00eaencia de tempo para alguns para\u00eametros do ensaio, sendo esses par\u00eaametros medidos em numero de amostras.\n\u2022\tFrequ\u00eancia inicial (f0): a frequ\u00eancia na qual o sistema de microondas inicia o ensaio e a aquisi\u00e7c\u00e3ao dos dados.\n\u2022\tFrequ\u00eancia final (f1: frequ\u00eancia na qual o sistema encerra o ensaio.\n\u2022\tIncremento da Frequ\u00eancia (Af): permite ao usuario configurar o valor do intervalo de acordo com o qual se dara a varia\u00e7ao da frequ\u00eancia do VCO.\n\u2022\tN\u00famero de Aquisi\u00e7\u00f5es (Naq: define o numero de aquisi\u00e7\u00f5es que ser\u00e2o realizadas numa determinada frequ\u00eaencia ou patamar. O interruptor do sistema de gera\u00e7c\u00e3ao e processamento de microondas so permite a transmiss\u00e3ao do sinal de microondas durante o numero de aquisi\u00e7co\u00e3es definidas por esse par\u00eaametro.\n\u2022\tIntervalo Entre Dois Per\u00edodos de Aquisi\u00e7ao (Toff: este par\u00e2metro define por quanto tempo o sistema ficara desligado antes de iniciar um novo ciclo de aquisic\u00e3o. Este par\u00e2metro pode ser configurado como 0.\nO ensaio inicia com o sistema de gera\u00e7\u00e3o de microondas desligado e f0 configurada. Apos Toff aquisi\u00e7\u00f5es, o interruptor do sistema \u00e9 ligado, permitindo a transmiss\u00e3o do sinal de microondas atraves do meio. S\u00e3o ent\u00e3o realizadas NAq aquisi\u00e7\u00f5es, apos as quais o interruptor e novamente desligado. Apos a conclus\u00e3o das Naq a frequ\u00eancia de oscila\u00e7ao e incrementada em Af. Caso f1 nao tenha sido atingida, o sistema aguarda Toff aquisi\u00e7\u00f5es e ent\u00e3o liga novamente o interruptor e repete todo o ciclo. Quando f1 e atingido, o sistema encerra o ensaio, desliga o interruptor e disponibiliza os dados para o usuario. Na figura 4.1 s\u00e3o ilustrados os par\u00e2metros de ensaio.\n4.2\tEnsaios Realizados\nO ganho do sistema de gera\u00e7ca\u00e3o e processamento de microondas n\u00e3ao e o mesmo para toda a faixa de frequ\u00eaencias. O ganho em frequ\u00eaencia do sistema como um todo e\nFigura 4.1: Par\u00e2metros de configura\u00e7\u00e3o de um ensaio bancada de testes resultado da composi\u00e7\u00e3o dos ganhos em frequ\u00e2ncia de cada um dos componentes que o comp\u00e3em. Al\u00e9m disso, a posic\u00e3o relativa das antenas, bem como o meio entre elas, influenciam a resposta em frequ\u00e2ncia do conjunto. As curvas de ganho da \u00e9gua ja foram apresentadas no cap\u00edtulo 2.\nCom o objetivo de determinar a influencia da fra\u00e7ao de \u00e9gua na resposta do sistema, foram realizados ensaios variando-se o volume de \u00e9gua dentro dos tanques. Depois que o tanque foi completado com \u00e9gua, iniciou-se a reducao gradativa da quantidade de \u00e9agua e a adi\u00e7ca\u00e3o da mesma quantidade de \u00e9oleo. A \u00e9agua foi adicionada no tanque em multiplos de 1L. Depois de enchido o tanque, a \u00e9gua foi removida em multiplos de 0,5L. A mesma quantidade era adicionada de oleo. Para cada composic\u00e3o do tanque foram sempre realizados 2 ensaios, que sao abaixo descritos:\n\u2022\tEnsaio A: este ensaio consiste na medi\u00e7\u00e3o da fase e atenua\u00e7\u00e3o em duas frequ\u00e2encias. Foram escolhidas as duas frequ\u00e2encias de m\u00e9axima intensidade do sinal. As duas frequ\u00e2encias precisam ter um m\u00e9nimo valor de separac\u00e7\u00e3ao entre elas, sendo necess\u00e9ario que ambas caracterizem m\u00e9aximos regionais da curva de intensidade do sinal. O sistema foi configurado para realizar 20 aquisi\u00e7\u00e3es em cada frequ\u00e2ncia, numa taxa de aquisi\u00e7ao de 1000 amostras por segundo.\n\u2022\tEnsaio B: este ensaio consiste na realiza\u00e7\u00e3o de uma varredura, ou sweep, de frequ\u00e2encias em torno da regi\u00e3ao que apresenta o pico m\u00e9aximo de intensidade do sinal. A faixa de varia\u00e7\u00e3o das frequ\u00e2ncias \u00e9 de 100MHz, e o incremento da frequ\u00e2ncia \u00e9 m\u00e9nimo, ou seja, aproximadamente 1MHz. Sao realizadas 3 amostragem em cada frequencia. O sistema \u00e9 desligado por dois per\u00edodos de amostragem antes de coletar os dados referentes \u00e0 pr\u00e9xima frequencia.\nNo entanto, para a realiza\u00e7\u00e3o sistem\u00e1tica dos ensaios acima descritos, \u00e9 necess\u00e1rio primeiro que se determine as frequ\u00eancias de maxima intensidade do sinal. Para tal, e necessaria a realizacao de alguns ensaios utilizando toda a faixa de frequencias e a maxima resolu\u00e7\u00e3o, ou menor incremento poss\u00edvel. As frequ\u00eancias de maxima intensidade do sinal no sistema, determinadas para uma dada configura\u00e7\u00e3o de ensaios e uma dada quantidade de \u00e1agua, sa\u00e3o utilizadas em todas as medi\u00e7c\u00e3oes posteriores realizadas, variando-se somente a frac\u00e3o de agua e \u00e1leo no interior do tanque. A fra\u00e7\u00e3o agua (Fh) e a frac\u00e3o de oleo (Fo)no interior do tanque sao expressas em funcao do volume de oleo (VO) e do volume de agua (Vh) contidos no tanque, conforme as equacoes\nFh =\tVh\t(4.1)\n\tVh + Vo \u2019\t\nFo =\tVo\t(4.2)\n\tVh + Vo \u25a0\t\nA realiza\u00e7\u00e3o das medi\u00e7\u00f5es em duas frequ\u00eancias, no ensaio tipo A, tem como objetivo a avalia\u00e7c\u00e3ao do atraso de fase em duas frequ\u00eaencias distintas, de maneira a eliminar, em teoria, a ambiguidade inerente \u00e0 medi\u00e7\u00e3o do atraso de fase. Os dados obtidos com a realiza\u00e7c\u00e3ao dos ensaios tipo sweep nos permitem determinar a resposta em frequ\u00eaencia do sistema.\nPara cada configurac\u00e7a\u00e3o de \u00e1agua e \u00e1oleo no tanque, o ensaios A foi repetido diversas vezes (de 4 a 8 vezes). Os dados coletados em todas as medic\u00e3es, em todas as repeti\u00e7\u00e3es, foram ent\u00e3ao estatisticamente processados e a m\u00e1edia e o desvio padr\u00e3ao foram calculados. Para alguns ensaios foi utilizada uma manta de met\u00e1alica envolvendo o tanque. O objetivo da manta era o de reproduzir a situa\u00e7\u00e3o encontrada numa tubula\u00e7\u00e3o real, onde espera-se a ocorr\u00eancia de diversas reflexoes no interior do tubo. Na figura 4.2 \u00e9 mostrada uma foto do tanque de se\u00e7ca\u00e3o retangular, envolvido pela manta met\u00e1alica.\n4.3\tCurvas Obtidas\n4.3.1 Configura\u00e7\u00e3o 1\nOs ensaios que produziram os gr\u00e1aficos abaixo mostrados foram realizados utilizando-se o tubo de se\u00e7c\u00e3ao transversal retangular. A manta met\u00e1alica tamb\u00e1em foi utilizada na realiza\u00e7ca\u00e3o dos ensaios. Primeiramente foi realizado um ensaio para determinar os dois m\u00e1aximos de intensidade do sistema. As frequ\u00eaencias obtidas, para as quais a intensidade do sinal \u00e9 m\u00e1xima e, portanto, a atenuac\u00e3o \u00e9 m\u00ednima, foram 9657 MHz e 9881 MHz,\nFigura 4.2: Tanque de ensaio com a manta met\u00e1lica sendo a segunda a frequ\u00eancia de m\u00e1ximo ganho do sistema. O ensaio tipo A foi realizado nessas duas frequ\u00eancias e o ensaio tipo B realizado na faixa de 9802 MHz \u00e0 9918 MHz. Nas figuras abaixo tamb\u00e1m \u00e1 mostrada a faixa de incerteza das medi\u00e7\u00f5es obtida atrav\u00e1s da tratamento estat\u00edstico dos dados coletados. Na figura 4.3 \u00e1 mostrado o grafico da intensidade em fun\u00e7ao da fra\u00e7ao de \u00e1leo para a frequ\u00eancia de 9657 MHz. Na figura 4.4 \u00e1e mostrado o gra\u00e1fico do atraso de fase em fun\u00e7c\u00f5ao da frac\u00e7\u00f5ao de \u00e1oleo para a frequ\u00eaencia de 9657 MHz. Na figura 4.5 \u00e1 mostrado o gr\u00e1fico da intensidade em func\u00f5o da fra\u00e7\u00f5o de \u00e1leo para a frequ\u00eancia de 9881 MHz. Na figura 4.6 \u00e1 mostrado o gr\u00e1fico do atraso de fase em funcao da frac\u00f5o de \u00e1leo no tanque, para a frequ\u00eancia de 9881 MHz.\nA conversao dos valores de atraso de fase, obtidos pelo sistema digital, em unidades de engenharia n\u00f5ao foi realizada pois restam du\u00e1vidas sobre como fazer a convers\u00f5ao. O sistema foi projetado para realizar a medi\u00e7\u00f5o das fases com n\u00e1veis de altos sinais de LO e RF no misturador. No entanto, nao foram obtidos os n\u00e1veis de sinais desejados no misturador. Quando utilizados sinais de n\u00e1vel alto, capazes de saturar as entradas do misturador, a medi\u00e7ao de fase independe das intensidades dos sinais. Em [9] e apresentada uma equac\u00f5o que permite obter o atraso de fase, utilizando-se um misturador, para quando os n\u00e1veis dos sinais n\u00f5ao s\u00f5ao suficientes para saturar as entradas do misturador. Conforme pode ser visto nos gr\u00e1ficos acima, n\u00f5o \u00e1 poss\u00e1vel determinar uma correla\u00e7\u00f5o direta entre os par\u00eaametros medidos e a fra\u00e7c\u00f5ao de a\u00e1gua. Na\u00f5o \u00e1e poss\u00e1vel sequer determinar uma tend\u00eaencia nas curvas de intensidade e atraso de fase. O comportamento esperado para a intensidade do sinal \u00e1e um aumento da intensidade com o aumento da frac\u00f5o de \u00e1leo (ou equivalentemente, a reducao da frac\u00f5o de agua). Observou-se\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t/ /\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nFigura 4.3: Gr\u00e1fico da intensidade em funcao da fra\u00e7ao de \u00f3leo, utilizando-se o tanque de se\u00e7\u00e3o retangular e com a utilizacao da manta de alum\u00ednio\nAtraso de Fase x Fra\u00e7\u00e3o de \u00c1gua (9657 IVHz) (incerteza)\nFra\u00e7\u00e3o\nFigura 4.4: Grafico do atraso de fase em fun\u00e7\u00e3o da fra\u00e7ao de \u00edleo, utilizando-se o tanque de se\u00e7c\u00e3ao retangular e com a utilizac\u00e7\u00e3ao da manta de alum\u00ednio\nFigura 4.5: Gr\u00e1fico do intensidade em fun\u00e7\u00e3o da fra\u00e7\u00e3o de \u00f3leo, utilizando-se o tanque de se\u00e7\u00e3o retangular e com a utiliza\u00e7ao da manta de alum\u00ednio\nFigura 4.6: Gr\u00e1fico do atraso de fase em fun\u00e7\u00e3o da fra\u00e7ao de \u00e1leo, utilizando-se o tanque de se\u00e7c\u00e3ao retangular e com a utilizac\u00e7\u00e3ao da manta de alum\u00e1nio\nque o valor medido da intensidade oscila, apresentando uma leve tend\u00eancia de crescimento para ambas as frequencias escolhidas para os testes. Para o atraso de fase, o comportamento esperado e o inverso da intensidade, ou seja, espera-se uma redu\u00e7ao do atraso de fase com o aumento da fra\u00e7\u00e3o de oleo. As medi\u00e7\u00f5es obtidas, alem de oscilarem, apresentam tend\u00eancias distintas para as duas frequ\u00eancias escolhidas. Apesar disso, o desvio padr\u00e3o calculado para as diversas medi\u00e7\u00e3es realizadas mostrou-se pequeno, especialmente para a medi\u00e7\u00e3o da fase. O desempenho metrologico do sistema foi considerado satisfatorio, indicando que o comportamento observado do sistema esteja provavelmente relacionado as intera\u00e7\u00e3es secundarias entre as microondas e o meio, alem das interac\u00e7\u00e3oes esperadas e desejadas.\n4.3.2\tConfigura\u00e7\u00e3o 2\nOs ensaios que produziram os graficos abaixo mostrados foram realizados utilizando-\nse o tubo de se\u00e7\u00e3o transversal retangular. Nestes ensaios a manta metalica n\u00e3o foi\nutilizada. Na figura 4.7 e mostrada uma foto da configura\u00e7\u00e3o utilizada nesse ensaio.\nFigura 4.7: Tanque de ensaio sem a manta metalica\nA metodologia de realiza\u00e7\u00e3o dos ensaios nessa configura\u00e7ao foi um pouco diferente da metodologia utilizada na realiza\u00e7\u00e3o dos ensaios com a configura\u00e7\u00e3o 1. Alem dos ensaios A e B anteriormente descritos, o ensaio de varredura utilizando toda a faixa de frequencias foi repetido para todas as frac\u00f5es de agua. O ensaio de varredura de faixa inteira foi realizado utilizando-se a maxima resolu\u00e7\u00e3o de frequ\u00eancia do sistema. Na figura 4.8 e mostrado o resultado do ensaio de varredura de ampla faixa para todas as frac\u00e7o\u00e3es de agua. As frequ\u00eaencias escolhidas para a realiza\u00e7c\u00e3ao dos ensaios tipo A foram\n9907 MHz e 9991 MHz, sendo a primeira a frequ\u00eancia de m\u00e1ximo ganho do sistema. Os resultados obtidos com a realiza\u00e7ao dos ensaios tipo A, para as duas frequ\u00eancias descritas sao mostrados na figura 4.9. Os ensaios tipo B foram realizados na faixa de 9860 MHz a 10000 MHz. Os resultados obtidos com a realizac\u00e3o dos ensaios tipo B \u00e1 mostrada na figura 4.10\nf [GHz]\nFigura 4.8: Gr\u00e1fico da intensidade em fun\u00e7\u00e3o da frequ\u00eancia (faixa inteira), utilizando-se o tanque de se\u00e7ao retangular para diversas fra\u00e7\u00f5es de \u00e1gua\nO comportamento do atraso de fase para os ensaios realizados utilizando-se a configura\u00e7\u00e3o 2 n\u00e3o ser\u00e3o mostrados pois, conforme comentado anteriormente, a metodologia dos ensaios realizados com a configura\u00e7\u00e3o 2 foi um pouco diferente da adotada na configura\u00e7\u00e3o 1. Buscou-se, com os ensaios realizados com a configura\u00e7\u00e3o 2, compreender melhor os fen\u00eamenos de reflexao e resson\u00eancia no interior do sistema. Foram observados diversos tipos de correlac\u00e7\u00e3oes entre a intensidade do sinal e a fra\u00e7c\u00e3ao de \u00e1agua. Analisando com atenc\u00e3o e em detalhes os resultados obtidos com o ensaio de varredura de faixa inteira, observou-se frequ\u00eaencias para as quais a correla\u00e7c\u00e3ao entre a intensidade do sinal e a quantidade de \u00e1gua \u00e1 diretamente proporcional. Em outras frequ\u00eancias a correla\u00e7c\u00e3ao observado foi inversamente proporcional e, ainda, em outras frequ\u00eaencia n\u00e3ao se observou nenhuma correla\u00e7ca\u00e3o direta entra a intensidade do sinal e a fra\u00e7ca\u00e3o de \u00e1agua.\nFigura 4.9: Grafico da intensidade em fun\u00e7ao da fracao de agua (tipo A), utilizando-se o tanque de sec\u00e3o retangular 2 frequ\u00eancias escolhidas\nFigura 4.10: Grafico do intensidade em func\u00e3o da frequ\u00eancia (tipo B), utilizando-se o tanque de se\u00e7ca\u00e3o retangular para diversas fra\u00e7c\u00e3oes de agua\nAl\u00e1em disso, como pode ser observado nos gra\u00e1ficos da intensidade em func\u00e7\u00e3ao da fra\u00e7c\u00e3ao de \u00e1agua, tanto para a configura\u00e7c\u00e3ao 1 quanto para a configurac\u00e7\u00e3ao 2, para uma dada faixa de fra\u00e7c\u00e3oes \u00e1e poss\u00e1vel obter uma relac\u00e7\u00e3ao direta e n\u00e3ao-amb\u00e1gua entre a intensidade do sinal e a fra\u00e7\u00e3o de \u00e1gua. No grafico 4.10 \u00e9 poss\u00edvel observar, para a faixa de 60% a 100% de \u00e1gua uma relac\u00e3o clara entre a intensidade do sinal e a fra\u00e7\u00e3o de \u00e1gua, apesar de a relacao obtida ser o inverso da esperada. E importante ressaltar que a maior parte dos medidores existentes no mercado s\u00e3ao especificados para funcionar dentro de uma determinada faixa de fra\u00e7c\u00e3oes de \u00e1agua.\nCap\u00edtulo 5\nCon\u00e7lus\u00e3es\nO presente trabalho se caracteriza como pioneiro na \u00e1rea dentro do DAS. Al\u00e9m dos objetivos expostos no cap\u00e1tulo 1, podemos ressaltar como objetivo secund\u00e1rio a criac\u00e7\u00e3ao de uma infra-estrutura m\u00e1nima que permitisse a realiza\u00e7c\u00e3ao do presente trabalho e servisse como base para desenvolvimentos e trabalhos futuros na \u00e1rea. Tendo em vista a aus\u00eaencia de uma infra-estrutura de testes laboratoriais, todo o sistema foi projetado e constru\u00e1do tendo como objetivo final o desenvolvimento de um medidor industrial.\nNo presente trabalho foi desenvolvida uma bancada de ensaios para a avaliac\u00e7\u00e3ao da viabilidade da aplica\u00e7ca\u00e3o da tecnologia de microondas e dos sensores de transmissa\u00e3o para a medi\u00e7ao da fra\u00e7\u00e3o de \u00e1gua numa mistura est\u00e1tica de agua e \u00e1leo. Foram realizados diversos experimentos com o sistema, variando-se alguns par\u00eaametros do processo, mas utilizando-se a mesma configura\u00e7c\u00e3ao do sistema de instrumenta\u00e7c\u00e3ao.\nOs dados coletados nos ensaios foram analisados e verificou-se, para uma dada confi-gura\u00e7c\u00e3ao do sistema, uma correla\u00e7c\u00e3ao entre a fra\u00e7c\u00e3ao de a\u00e1gua da mistura e os par\u00eaametros medidos pelo sistema de instrumenta\u00e7\u00e3o. Com base na correla\u00e7\u00e3o obtida um prot\u00e1tipo de medidor de fra\u00e7c\u00e3ao de \u00e1agua foi desenvolvido. No entanto, verificou-se, conforme apontado na literatura por [9] e [20], as limita\u00e7\u00f5es dos sensores de transmiss\u00e3o para a aplica\u00e7c\u00e3ao em quest\u00e3ao.\nOs resultados obtidos nos ensaios em que foi utilizada a manta met\u00e1alica na\u00e3o indicaram nenhuma correlac\u00e7\u00e3ao entre a fra\u00e7c\u00e3ao de \u00e1agua e os par\u00eaametros medidos. A hip\u00e1otese mais prov\u00e1avel para a causa dos efeitos indesejados \u00e1e a exist\u00eaencia de mu\u00e1ltiplas reflex\u00e3oes no interior do tanque devido \u00e0 utiliza\u00e7\u00e3o da manta met\u00e1lica. As reflex\u00e3es interagem criando padro\u00e3es de ondas estacion\u00e1arias que interferem de maneira significativa nas medi\u00e7c\u00e3oes de intensidade e atraso de fase do sinal de microondas. Tal fen\u00eaomeno \u00e1e descrito na literatura e apontado como principal limita\u00e7c\u00e3ao no uso de sensores de trans-missa\u00e3o para medi\u00e7ca\u00e3o da frac\u00e7\u00e3ao de a\u00e1gua em tubos. As curvas de intensidade e de atraso\nde fase em fun\u00e7\u00e3o da fra\u00e7\u00e3o de oleo, mostradas em 4.3.1, apresentaram resultados significativamente distintos para duas frequ\u00eancias diferentes, refor\u00e7ando assim a hipotese das muitiplas reflex\u00f5es, uma vez que, para diferentes comprimentos de onda, os padr\u00e3es de intera\u00e7c\u00e3oes s\u00e3ao diferentes.\nApesar do conhecimento pr\u00e9vio de tais efeitos e limitac\u00e3es dos sensores de trans-miss\u00e3ao, a escolha de tal tipo de sensor deve-se ao fato de ser este o tipo de sensor de microondas mais simples. O desenvolvimento de outros tipos de sensores depende do desenvolvimento intermedi\u00e9ario dos sensores de transmiss\u00e3ao. A comprova\u00e7ca\u00e3o experimental de fen\u00eaomenos descritos na literatura pode ser considerada como v\u00e9alido conhecimento adquirido no processo de desenvolvimento e dom\u00e9nio das tecnologias envolvidas. A compreens\u00e3ao dos feno\u00eamenos de reflex\u00e3ao e forma\u00e7ca\u00e3o de ondas estacion\u00e9arias que ocorrem nos sensores de transmiss\u00e3o \u00e9 a base te\u00e9rica para o desenvolvimento dos sensores de ressona\u00eancia, apontados como os sensores mais adequados para serem utilizados na aplica\u00e7c\u00e3ao em quest\u00e3ao.\nAparentemente, as multiplas reflex\u00e3es e ondas estacionarias tamb\u00e9m interferiram nos ensaios realizados sem a manta metalica, produzindo comportamentos indesejados no sistema de medi\u00e7c\u00e3ao, ainda que em menor intensidade do que nos ensaios em que foi utilizada a manta met\u00e1lica. Suspeitamos que a caixa met\u00e1lica, construida para isolar o sistema, causa os mesmos efeitos de reflex\u00e3ao observados nos ensaios com a manta met\u00e9alica.\nPara refor\u00e7ar a hip\u00e1tese das influ\u00eancia das reflex\u00e3es nas medic\u00e3es, foi verificado que a frequ\u00eaencia de m\u00e9axima intensidade do sinal varia com a utiliza\u00e7c\u00e3ao da manta metalica. Utilizando-se o tubo de se\u00e7\u00e3o retangular, verificou-se que a frequ\u00eancia de m\u00e9axima intensidade do sinal, obtida atrav\u00e9es do ensaio de varredura de frequ\u00eaencias, \u00e9e de 9881 MHz para ensaios em que se utiliza a manta met\u00e1lica, e de 9907 MHz nos ensaios em que n\u00e3ao se utiliza a manta. Aparentemente, em ambas as situa\u00e7c\u00e3oes est\u00e3ao ocorrendo fen\u00f4menos de ressonancia nas frequ\u00eancias citadas. Em teoria, a frequ\u00eancia de ressona\u00eancia deveria variar de acordo com as dimenso\u00e3es da cavidade de resson\u00eaancia e com as propriedades diel\u00e9tricas do MUT, no entanto, nao foi poss\u00edvel observar tal feno\u00eameno. Para uma dada configura\u00e7c\u00e3ao de ensaio, a mesma frequ\u00eaencia de resson\u00eaancia foi obtida para toda a faixa de fra\u00e7c\u00e3ao de \u00e1oleo, com varia\u00e7c\u00e3oes m\u00e1nimas no limite da resolu\u00e7\u00e3o do sistema. Nessas situa\u00e7oes de multiplas reflex\u00e3es, a influ\u00eancia do meio no sinal recebido n\u00e3ao pode ser facilmente determinada. Portanto, nessa situa\u00e7c\u00e3oes, a efici\u00eaencia do sistema na medi\u00e7c\u00e3ao da frac\u00e7\u00e3ao de \u00e1oleo \u00e1e question\u00e1avel.\nOutro fator que supostamente influenciou os resultados criando padr\u00e3oes de inter-fer\u00eaencia e ondas estaciona\u00e1rias foi a interface est\u00e1atica presente na mistura bif\u00e1asica. Assim como a luz, as microondas sofrem reflex\u00e3oes e refra\u00e7c\u00e3oes quando encontram um interface entre dois meios com propriedades diel\u00e1etricas distintas. A interface est\u00e1atica\npresente nos testes estaticos realizados no sentido axial do tanques n\u00e3o corresponde a realidade de um escoamento multif\u00e9sico. Novos testes dever\u00e2o ser conduzidos sobre uma mistura de \u00e9gua/\u00e9leo devidamente homogeneizada (sem apresentar esta interface). Isto pode ser realizado adicionado-se um misturador dentro do corpo de prova na bancada de testes. Futuramente uma unidade de escoamento multifasico devera gerar o fluido de teste em condi\u00e7\u00f5es mais pr\u00e9ximas da realidade. Neste sentido, atualmente estao sendo conduzidos trabalhos no DAS, na direc\u00e3o de construir e disponibilizar para testes esta unidade de escoamento multif\u00e9asico.\nO sistema de medi\u00e7\u00e3o mostrou-se bastante estavel e confi\u00e1vel, tendo em vista a re-petibilidade obtida nas medi\u00e7\u00e3es realizadas para uma mesma configura\u00e7\u00e3o. Al\u00e9m disso, a incerteza das medi\u00e7oes, calculada atrav\u00e9s do desvio padr\u00e2o, foi satisfat\u00f3ria, especialmente a medi\u00e7c\u00e3ao do atraso de fase que se mostrou bastante est\u00e9avel. No entanto, para obter esse comportamento est\u00e9avel foi necess\u00e9ario estabilizar a temperatura do sistema de gerac\u00e7a\u00e3o e processamento de microondas utilizando refrigerac\u00e7a\u00e3o for\u00e7cada. Durante a realiza\u00e7\u00e3o dos primeiros testes com o sistema, verificou-se que o VCO e o amplificador de pot\u00e2ncia do sistema de gera\u00e7\u00e3o e processamento de microondas produziam muito calor. Nessas condi\u00e7c\u00e3oes, o sistema de medic\u00e7a\u00e3o apresentou p\u00e9essimas caracter\u00e9sticas metrol\u00e9gicas. Os dissipadores utilizados no sistema foram sub dimensionados. Para solucionar o problema, foi utilizada ventila\u00e7ca\u00e3o for\u00e7cada no sistema de microondas.\nA pot\u00e2encia do sinal transmitido e, consequentemente, a intensidade do sinal recebido, ficaram muito abaixo do esperado e determinado teoricamente. A pot\u00e2encia abaixo do esperado reduz a sensibilidade do sistema e forc\u00e7a essa a operar muito abaixo das condicoes \u00e9timas. Uma hipotese para a causa da reducao da pot\u00e2ncia do sistema \u00e9 a perda de pot\u00e2encia devido ao na\u00e3o casamento de imped\u00e2ancias entre os componentes do sistema de gera\u00e7ca\u00e3o e processamento de microondas, ocasionando o aparecimento de ondas estacion\u00e9arias no sistema e, consequentemente, a perda de pot\u00e2encia. Eventualmente, esse feno\u00e2meno possa ser, pelo menos em parte, responsa\u00e9vel pelo sobre-aquecimento do sistema. Uma poss\u00e9vel solu\u00e7c\u00e3ao para esse problema \u00e9e a utiliza\u00e7c\u00e3ao de isoladores entre os elementos de pot\u00e2ncia do sistema (VCO e amplificador). Uma outra possibilidade para a melhora do sinal recebido \u00e9e a utiliza\u00e7c\u00e3ao de um amplificador para o sinal recebido.\nO mecanismo de logging de alta velocidade implementado utilizando o protocolo UDP/IP n\u00e3o funcionou como o esperado. Na pr\u00e9tica, para altas frequ\u00e2ncias de logging a perda de pacotes na rede foi muito grande, uma vez que o protoclo UDP/IP na\u00e3o possui mecanismos de controle de transporte. Devido a essa limita\u00e7c\u00e3ao, a taxa de aquisi\u00e7c\u00e3ao em que os ensaios foram realizados foi de 1 kHZ.\n5.1\tPend\u00eancias de Implementa\u00e7\u00e3o\nAbaixo s\u00e3o listadas funcionalidades e componentes que fazem parte do projeto do sistema, mas que, no entanto, n\u00e3o foram implementadas por razoes diversas.\n\u2022\tO sistema de medic\u00e3es auxiliares nao chegou a ser implementado. Ele \u00e9 importante para a determinac\u00e3o da influ\u00eancia da temperatura e da salinidade nas propriedades dieletricas do meio. Numa aplicac\u00e3o industrial, em condi\u00e7\u00f5es reais de escoamento, a medi\u00e7\u00e3o dessas grandezas s\u00e3o indispensaveis para a correta medi\u00e7c\u00e3ao da fra\u00e7ca\u00e3o de agua.\n\u2022\tO atenuador controlado por tens\u00e3ao apresentou defeito e n\u00e3ao foi utilizado no sistema. O atenuador controlavel e uma pe\u00e7ca importante no sistema de gera\u00e7c\u00e3ao e processamento de microondas. Este componente garante n\u00edveis constantes de intensidade no misturador do sistema de microondas, permitindo que este opere em condi\u00e7co\u00e3es \u00edotimas.\n\u2022\tA mem\u00f3ria FIFO, que conecta o sistema de comunica\u00e7\u00e3o embarcada ao sistema de controle e aquisi\u00e7c\u00e3ao de dados, n\u00e3ao foi montada na placa. A utiliza\u00e7c\u00e3ao deste componente \u00f3 fundamental em aplicac\u00e3es que requerem altas frequ\u00eancias de log-gzng.\n\u2022\tAs tarefas de controle, filtro digital e alarme da unidade de aquisi\u00e7\u00e3o n\u00e3o foram completamente implementadas. A tarefa de controle \u00f3e indispensa\u00f3vel caso se utilize o atenuador controlado no sistema de gerac\u00e7\u00e3ao e processamento de microondas. A tarefa de filtro digital pode melhorar significativamente a qualidade das medi\u00e7c\u00e3oes da unidade de aquisi\u00e7c\u00e3ao.\n5.2\tLimita\u00e7\u00f5es Operacionais\nAbaixo s\u00e3ao listadas algumas limitac\u00e7\u00e3oes, n\u00e3ao previstas, que o sistema implementado apresentou:\n\u2022\tPara o correto funcionamento do sistema de medi\u00e7ao \u00f3 necess\u00f3rio utilizar ven-tila\u00e7c\u00e3ao forc\u00e7ada no sistema.\n\u2022\tA frequ\u00eancia maxima de logging obtida e de 1 kHz, limitando a taxa de aquisi\u00e7\u00e3o para os ensaios em 1 kHz.\n5.3\tDificuldades Encontradas\nO processo de aquisi\u00e7\u00e3o dos componentes de microondas \u00e9 lento e burocr\u00e1tico. N\u00e3o existem fabricantes nacionais. Os fabricantes disponibilizam poucas informa\u00e7\u00f5es sobre seus produtos. Os fabricantes n\u00e3o costumam manter estoques de seus componentes, sendo estes produzidos apos o pedido de compra, o que implica numa demora de algumas semanas para a produ\u00e7\u00e3o dos componentes e, \u00e0s vezes, compra de uma quantidade m\u00ednima. Al\u00e9m disso, por se tratarem de componentes normalmente utilizados em aplica\u00e7co\u00e3es militares e aeroespaciais, o processo de compra pode exigir algum tipo declara\u00e7\u00e3o de utiliza\u00e7\u00e3o para fins pac\u00edficos.\nA inexist\u00eancia de um laborat\u00e1rio equipado e preparado para a realiza\u00e7ao de ensaios e avalia\u00e7\u00e3o das t\u00e9cnicas de infer\u00eancia utilizando microondas pode ser considerada como uma grande dificuldade. Tais tipos de testes demandam uma variedade de equipamentos, tais como: analisadores de espectro, geradores de microondas, amplificadores de pot\u00eaencia, antenas direcionais, guias de onda, entre outros. Todos os testes e medi\u00e7c\u00e3oes foram realizados utilizando unica e exclusivamente o equipamento desenvolvido no presente trabalho, n\u00e3o havendo nenhum outro equipamento de refer\u00eancias para a valida\u00e7\u00e3o dos resultados ou calibra\u00e7c\u00e3ao do equipamento desenvolvido.\n5.4\tSugest\u00f5es para Trabalhos Futuros\nA maior parte das sugest\u00e3oes para trabalhos futuros s\u00e3ao decorrentes de defici\u00eaencias e problemas identificados no presente trabalho que, por motivos diversos, n\u00e3ao foram solucionados. Abaixo s\u00e3ao listadas algumas sugest\u00e3oes para trabalhos futuros:\n\u2022\timplementa\u00e7\u00e3o das pend\u00eancias de implementa\u00e7\u00e3o do presente trabalho;\n\u2022\tutiliza\u00e7\u00e3o de isoladores no sistema de processamento de microondas;\n\u2022\tavaliac\u00e7\u00e3ao do sistema utilizando outras antenas e configura\u00e7c\u00e3oes das antenas;\n\u2022\tmontagem do sistema de processamento e gera\u00e7c\u00e3ao de microondas sobre uma placa met\u00e1lica que facilite a dissipa\u00e7ao do calor produzido pelos componentes;\n\u2022\tmontagem do sistema de microondas na forma de uma matriz de componentes, de maneira a simplificar e permitir a alterac\u00e7\u00e3ao da configura\u00e7ca\u00e3o dos componentes de microondas, permitindo a alteracao do roteamento dos sinais atrav\u00e9s da utiliza\u00e7\u00e3o de guias de onda flex\u00edveis;\n\u2022\tutiliza\u00e7\u00e3o de mais um amplificador de pot\u00e2ncia para a transmiss\u00e3o do sinal e ainda mais um amplificador para a recepcao;\n\u2022\treavalia\u00e7ao do mecanismo de logging em alta velocidade;\n\u2022\tprojeto de uma cavidade de resson\u00e2ancia e avaliac\u00e7a\u00e3o dos sensores de ressona\u00e2ncia utilizando o sistema de instrumentac\u00e7a\u00e3o atual;\n5.5\tConsidera\u00e7\u00f5es Finais\nDe uma maneira geral, o medidor desenvolvido apresentou resultados muito pr\u00f3ximos dos esperados. Os sistemas de instrumentac\u00e3o e medi\u00e7\u00e3o funcionaram de maneira satisfat\u00f3ria. O tempo dedicado \u00e0 realizac\u00e3o dos ensaios propriamente ditos foi pequeno. O esfor\u00e7o necessario para colocar o sistema em opera\u00e7ao consumiu muito tempo.\nA grande realiza\u00e7ca\u00e3o do presente trabalho foi a cria\u00e7c\u00e3ao de uma infra-estrutura para trabalhos futuros. A experi\u00e2encia e o conhecimento adquirido no desenvolvimento do sensor de transmiss\u00e3ao s\u00e3ao de fundamental import\u00e2ancia para trabalhos futuros, apesar de, aparentemente, esse tipo de sensor n\u00e3ao produzir os resultados desejados para a aplica\u00e7c\u00e3ao em quest\u00e3ao.\nExistem diversas aplicac\u00e3es para sensores de microondas. Trata-se de uma linha de pesquisa ampla e variada. A instrumenta\u00e7c\u00e3ao utilizando-se tecnologia de microondas, apesar de n\u00e3o ser uma tecnologia nova, ainda \u00e1 assunto pouco estudo. Existem poucas publica\u00e7\u00e3es na \u00e1rea e alguns poucos fabricantes oferecendo produtos que empregam essa tecnologia no mercado.\nAp\u00eandice A\nEspecifica\u00e7\u00f5es T\u00e9cnicas dos Componentes de Microondas Utilizados\nNeste ap\u00eandice s\u00e3o apresentadas as especifica\u00e7\u00f5es t\u00e9cnicas, bem como o modelo e o fabricante, dos componentes utilizados no sistema de gera\u00e7ao e processamento de microondas. Para maiores detalhes sobre os deve-se consultar os datasheets fornecidos pelos fabricantes, os quais podem ser obtidos atraves no website das empresas.\nA.1 Antenas\nForam utilizadas duas antenas tipo horn, fabricadas pela empresa Q-par Angus (http://www.q-par.com). Abaixo sao descritas as principais caracter\u00edsticas de cada um dos modelos utilizados.\n\u2022\tQSH16S10S\n\u2014 Ganho =10 dBi\n\u2014 Conector = tipo SMA\n\u2014 Banda = 8,2 GHz a 12,4 GHz\n\u2022\tQSH16S20S\n\u2014 Ganho = 20 dBi\n\u2014 Conector = tipo SMA\n\u2014 Banda = 8,2 GHz a 12,4 GHz\nA.2 VCO\nFoi utilizado no sistema um VCO modelo O2ACP12001, fabricado pela Teledyne Cougar (http://www.cougarcorp.com). Abaixo s\u00e3o listadas as principais caracter\u00edsticas desse componente:\n\u2022\tBanda = 8 GHz a 12 GHz\n\u2022\tTens\u00e3o de controle = 0V a -12V\n\u2022\tPot\u00eancia de sa\u00edda =17 dBm\n\u2022\tVaria\u00e7\u00e3o da pot\u00eancia de sa\u00edda = 5,5 dB\n\u2022\tTens\u00e3o de alimenta\u00e7\u00e3o = +15VDC\n\u2022\tCorrente de alimenta\u00e7\u00e3o (max) = 220 mA\n\u2022\tConectores = tipo SMA\nA.2.1 Interruptor\nFoi utilizado no sistema um interruptor (switch) de um polo, modelo SW1AD-16, fabricado pela Pulsar Microwave Corporation (http://www.pulsarmicrowave.com). Abaixo s\u00e3ao listadas as principais caracter\u00edsticas desse componente:\n\u2022\tBanda = 0,3 GHz a 13 GHz\n\u2022\tTipo = absortiva\n\u2022\tPerda de inser\u00e7\u00e3o (max) = 3,5 dB\n\u2022\tVSWR = 1,70\n\u2022\tTempo de \u00e7haveamento = 100 ns\n\u2022\tTens\u00e3o de controle = +5V\n\u2022\tTensao de alimenta\u00e7ao = \u00b15VDC\n\u2022\tCorrente de alimenta\u00e7\u00e3o (tipico) = 30 mA (+5V) e 30mA (-5V)\n\u2022\tConectores = tipo SMA\nA.2.2 Divisor de Pot\u00eancia\nFoi utilizado um divisor de pot\u00eancia (power divider) passivo, de 2 vias, modelo PS2-16-450/8S, fabricado pela Pulsar Microwave Corporation (http://www.pulsarmicrowave.com). Abaixo sao listadas as principais caracter\u00edsticas desse componente:\n\u2022\tBanda = 8 GHz a 12,4 GHz\n\u2022\tPerda de inser\u00e7\u00e3o (max) = 0,4 dB\n\u2022\tVSWR (max) = 1,35\n\u2022\tConectores = tipo SMA\nA.2.3 Amplificador de Pot\u00eaencia\nFoi utilizado um amplificador de pot\u00eancia (power amplifier) modelo A2CP11049, fabricado pela Teledyne Cougar (http://www.cougarcorp.com). Abaixo s\u00e3ao listadas as principais caracter\u00edsticas desse componente:\n\u2022\tBanda = 6 GHz a 11 GHz\n\u2022\tPot\u00eancia de sa\u00edda (max)= 30dBm\n\u2022\tGanho de pequeno sinal (min) = 18.5 dB\n\u2022\tVSWR (max) = 1,7\n\u2022\tTens\u00e3o de alimenta\u00e7\u00e3o = +12VDC\n\u2022\tCorrente de alimenta\u00e7\u00e3o (max) = 590 mA\n\u2022\tConectores = tipo SMA\nA.2.4 Atenuador Controlado por Tens\u00e3o\nFoi utilizado no sistema um atenuador controlado por tens\u00e3o (voltage controlled attenuator), com controle linear, modelo AAT-28-479A/5S, fabricado pela Pulsar Microwave Corporation (http://www.pulsarmicrowave.com). Abaixo s\u00e3o listadas as principais caracter\u00edsticas desse componente:\n\u2022\tBanda = 6 GHz a 16 GHz\n\u2022\tFaixa de atenua\u00e7ao = 32dB\n\u2022\tGanho = 8dB/Volt\n\u2022\tPerda de inser\u00e7\u00e3o (max) = 4 dB\n\u2022\tVSWR (max) = 2\n\u2022\tTensao de controle = 0V a 4V\n\u2022\tTensao de alimentacao = \u00b115VDC\n\u2022\tCorrente de alimentac\u00e3o (tipico) = 100 mA (+15V) e 50mA (-15V)\n\u2022\tConectores = tipo SMA\nA.2.5 Misturador\nFoi utilizado no sistema um misturador (mixer), passivo, modelo MMP12241, fabricado pela Teledyne Cougar (http://www.cougarcorp.com). Abaixo sao listadas as principais caracter\u00edsticas desse componente:\n\u2022 Banda na porta LO = 2 GHz a 12 GH\n\u2022\tBanda na porta RF = 2 GHz a 12 GHz\n\u2022\tBanda na porta IF = DC a 2 GHz\n\u2022\tPerda de convers\u00e3o (max) = 5 dB\n\u2022\tPot\u00eancia de LO (nominal) = +7.0 dBm\n\u2022\tConectores = tipo SMA\nA.2.6 Detector\nFoi utilizado no sistema um detector (detector), ativo, modelo DACP18001, fabricado pela Teledyne Cougar (http://www.cougarcorp.com). Abaixo sao listadas as principais caracter\u00edsticas desse componente:\n\u2022 Banda = 0,1 GHz a 18 GHz\n\u2022\tN\u00edveis de pot\u00eancia de entrada = -30 dBm a +5 dBm\n\u2022\tVSWR (max) = 1,5\n\u2022\tTens\u00e3o de alimenta\u00e7\u00e3o = \u00b15VDC\n\u2022\tConectores = tipo SMA\nApendice B\nDiagramas Esquematicos\nA seguir s\u00e3ao apresentados os diagramas esquem\u00edaticos do sistema de alimenta\u00e7c\u00e3ao DC, do sistema de controle e aquisi\u00e7ca\u00e3o, e do sistema de comunica\u00e7c\u00e3ao embarcada. O sistema de controle e aquisi\u00e7c\u00e3ao foi dividido em 2 m\u00edodulos: m\u00edodulo principal de processamento e m\u00edodulo de condicionamento de sinais. O m\u00edodulo de condicionamento de sinais por sua vez \u00ede dividido em 2 sub-m\u00edodulos: mo\u00eddulo de condicionamento das entradas analogicas e m\u00eddulo de condicionamento da sa\u00eddas anal\u00edgicas. Os componentes passivos dos m\u00edodulo de condicionamento condicionamento de sinais n\u00e3ao possuem valores indicados. Os valores dependem dos ganhos que se deseja no sistema e do projeto do filtro anti-recobrimento e, portanto, n\u00e3ao ser\u00e3ao detalhados nos diagramas esquem\u00edaticos.\nFigura B.1: Diagrama esquem\u00e1tico da fonte de alimentac\u00e3o DC\nFigura B.5: Diagrama esquem\u00e1tico do sistema de comunicando embarcada\nAp\u00eandice C\nMapeamento dos Registrados\nModbus da Unidade de Processamento\nNa tabela C.1 \u00e9 apresentado o mapa de registradores Modbus da unidade de processamento do sistema. Atrav\u00e9s do conhecimento do mapa de registradores \u00e9 poss\u00edvel integrar a unidade de processamento a qualquer sistema compat\u00edvel com o protocolo Modbus TCP/IP. O padr\u00e3o Modbus utiliza registradores de 16 bits, ou 2 bytes. A fun\u00e7ao de cada registrador \u00e9 descrita na sequ\u00eancia.\n\u2022\tMODBUS.CONKREG: configura o modo de opera\u00e7c\u00e3ao da unidade de processamento. Abaixo sao listados os poss\u00edveis valores para esse registrador:\n\u2014\t0x0000 = Modo Aquisic\u00e3o.\n\u2014\t0x0001 = Modo Filtro Digital.\n\u2014\t0x0002 = Modo Controlador.\n\u2014\t0x0003 = Modo WCMeter.\n\u2022\tMODBU'S TYPE REG: tipo ou modelo do equipamento. 1\n\u2022\tMODBUS ID REG: define um ID alfanum\u00e9erico para o equipamento para facilitar a sua identifica\u00e7c\u00e3ao numa rede com v\u00e9arios equipamentos.\n\u2022\tMODBU'S DESC REG: define uma descri\u00e7\u00e3o para um dado equipamento com o objetivo de facilitar sua identificacao e fun\u00e7ao numa rede com v\u00e1rios equipamentos.\n1 por enquanto s\u00f3 existe um tipo\nRegistrador\tEndere\u00e7o\tTamanho (Words)\nMODBUS_CONF_REG\t0x0001\t1\nMODBUS_TYPE_REG\t0x0002\t1\nMODBUSJD_REG\t0x0003\t4\nMODBUS_DESC_REG\t0x0007\t16\nMODBUSJP_REG\t0x0017\t2\nMODBUS_MASK_REG\t0x0019\t2\nMODBUS_GATEWAY_REG\t0x001B\t2\nLOG_CONF_REG\t0x001D\t1\nLOG_FREQ_REG\t0x001E\t1\nLOG_REMOTEJP\t0x001F\t2\nLOG_REMOTE_PORT\t0x0021\t1\nAQ_FREQ_REG\t0x0030\t1\nAQ_CHANNELS_REG\t0x0031\t1\nAQ_OVERSAMPLING_REG\t0x0032\t1\nANALOG_OUT1_CONF_REG\t0x0033\t1\nANALOG_OUT2_CONF_REG\t0x0034\t1\nANALOG_OUT3_CONF_REG\t0x0035\t1\nANALOG_OUT4_CONF_REG\t0x0036\t1\nANALOG_OUT1_VALUE_REG\t0x0037\t1\nANALOG_OUT2_VALUE_REG\t0x0038\t1\nANALOG_OUT3_VALUE_REG\t0x0039\t1\nANALOG_OUT4_VALUE_REG\t0x003A\t1\nLOG_AQ_CHANNELS_REG\t0x003B\t1\nLOG_ANALOG_OUT_CHANNELS_REG\t0x003C\t1\nDIGITAL_OUT1_CONF_REG\t0x003D\t1\nDIGITAL_OUT2_CONF_REG\t0x003E\t1\nDIGITAL_OUT1_VALUE_REG\t0x003F\t1\nDIGITAL_OUT2_VALUE_REG\t0x0040\t1\nREGWCMODE\t0x0043\t1\nREG_WC_FREQ_MIN\t0x0044\t1\nREG_WC_FREQ_MAX\t0x0045\t1\nREG_WC_STEP_NAQ\t0x0046\t1\nREG_WC_INTER_STEP\t0x0048\t1\nREG_WC_AQFREQ\t0x0049\t1\nREG_WC_AQ_OVERSAMPLING\t0x004A\t1\nREG-WC-START\t0x004B\t1\nTabela C.1: Mapa dos registrador Modbus da unidade de processamento\n\u2022\tMODBUS IP REG: IP do equipamento. Indispensavel quando se utiliza IP fixo.\n\u2022\tMODBUS MASK RBG: mascara de rede do equipamento. Indispensavel quando se utiliza IP fixo.\n\u2022\tMODBUS.GATEWAY._REG: endereco do gateway da rede Ethernet. Indis-pensavel quando se utiliza IP fixo.\n\u2022\tLOG CONF REG: configura se o logging sera realizado pelo servi\u00e7o do concentrador de dados, ou atraves de um servi\u00e7co externo. Abaixo s\u00e3ao listados os posslveis valores para esse registrador:\n\u2014\t0x0000 - logging desabilitado.\n\u2014\t0x0001 - logging habilitado atraves do servico do concentrador de dados.\n\u2014\t0x0002 - logging habilitado atraves de um servi\u00e7o externo.\n\u2014\t0x0003 - logging habilitado simultaneamente atraves do servi\u00e7o do concentrador de dados e de um servi\u00e7co externo.\n\u2022\tLOG FREQ REG: a frequ\u00eancia de logging e dada pela razao entre a frequ\u00eancia de aquisi\u00e7c\u00e3ao e o valor deste registrador.\n\u2022\tLOG REMOTE IP: configura o IP do equipamento de logging remoto. Quando se utiliza o servi\u00e7co de logging do concentrador de dados na\u00e3o e necessario configurar esse par\u00eaametro.\n\u2022\tLOG REMOT'E PORT\u2019: configura a porta do equipamento de logging remoto. Quando se utiliza o servi\u00e7co de logging do concentrador de dados n\u00e3ao e necessario configurar esse par\u00eaametro.\n\u2022\tAQ FREQ REG: configura a frequ\u00eancia de aquisi\u00e7\u00e3o de dados do sistema. Todos os canais de aquisic\u00e7\u00e3ao ativos utilizam a mesma frequ\u00eaencia de aquisi\u00e7c\u00e3ao.\n\u2022\tAQ CHANNELS REG: configura os canais anal\u00f3gicos habilitados. Cada bit corresponde a um canal. Quando setado, o bit habilita a aquisi\u00e7ca\u00e3o do canal correspondente. Como o presente sistema so possui 4 entradas analogicas, somente os bits de 0 a 3 s\u00e3ao utilizados, correspondendo cada um a uma das entradas digitais.\n\u2022\tAQ OVERSAMPLING REG: configura o par\u00eaametro de oversampling dos canais de aquisi\u00e7\u00e3o. Quando configurado com um valor diferente de 1, o sistema multiplica a frequ\u00eaencia real de aquisi\u00e7c\u00e3ao pelo valor n configurado no registrador, calculando ent\u00e3ao a media entre as n amostras, de maneira que, para o usuario,\na frequ\u00eancia de aquisi\u00e7\u00e3o se mantenha constante. No entanto, como o sistema na verdade aumenta a frequ\u00eancia e calcula a m\u00e9dia utilizando o mesmo fator, as medidas se tornam mais representativas. O valor 0x0000 nao \u00e9 v\u00e9lido para esse par\u00eaametro.\n\u2022\tANALOG OUT1 CONE REG: configura a sa\u00e9da anal\u00e9gica 1 da unidade de processamento. Abaixo sao listados os poss\u00e9veis valores para esse registrador:\n\u2014\t0x0000 = sa\u00e9da desabilitada.\n\u2014\t0x0001 = sa\u00e9da constante, configur\u00e9vel pelo usu\u00e9rio.\n\u2014\t0x0002 = sa\u00e9da tipo fun\u00e7ao predefinida.\n\u2014\t0x0003 = sa\u00e9da do filtro digital 1.\n\u2014\t0x0004 = sa\u00e9da do filtro digital 2.\n\u2014\t0x0005 = sa\u00e9da do controlador 1.\n\u2014\t0x0006 = sa\u00e9da do controlador 2.\n\u2014\t0x0007 = sa\u00e9da de controle do modo medidor de fra\u00e7\u00e3o de \u00e9gua.\n\u2022\tANALOG OUT2 CONE REG: configura a sa\u00e9da anal\u00e9gica 2 da unidade de processamento. Utiliza a mesma configura\u00e7ao da sa\u00e9da anal\u00f3gica 1.\n\u2022\tANALOG OUT3 CONE REG: configura a sa\u00e9da anal\u00e9gica 3 da unidade de processamento. Utiliza a mesma configurac\u00e7\u00e3ao da sa\u00e9da analo\u00e9gica 1.\n\u2022\tANALOG OU'Tl CONE REG: configura a sa\u00e9da anal\u00e9gica 4 da unidade de processamento. Utiliza a mesma configura\u00e7c\u00e3ao da sa\u00e9da analo\u00e9gica 1.\n\u2022\tANALOG OUT1 VALUE REG: permite a leitura do valor atual da sa\u00e9da anal\u00e9gica 1, ou a escrita desta, caso a sa\u00e9da esteja configurada no modo \u201dconfi-gur\u00e9vel pelo usu\u00e9rio\u201d(0x0001).\n\u2022\tANALOG OUT2 VALUE REG: permite a leitura do valor atual da sa\u00e9da analo\u00e9gica 2, ou a escrita desta, caso a sa\u00e9da esteja configurada no modo \u201dconfi-gur\u00e9vel pelo usu\u00e9rio\u201d(0x0001).\n\u2022\tANALOG OUT3 VALUE REG: permite a leitura do valor atual da sa\u00e9da anal\u00e9ogica 3, ou a escrita desta, caso a sa\u00e9da esteja configurada no modo \u201dconfi-gur\u00e9vel pelo usuario\u201d(0x0001).\n\u2022\tANALOG_OUT4 VALUE REG: permite a leitura do valor atual da sa\u00e9da anal\u00e9ogica 4, ou a escrita desta, caso a sa\u00e9da esteja configurada no modo \u201dconfi-gur\u00e9vel pelo usu\u00e9rio\u201d(0x0001).\n\u2022\tLOG AQCHANNELSREG: habilita ou desabilita o logging das entradas anal\u00f3gicas do sistema. Cada bit corresponde a um canal. Como a unidade de processamento possu\u00ed apenas 4 canais de aquisi\u00e7\u00e3o, somente o bits de 0 a 3 s\u00e3o utilizados. Quando setado, o bit habilita o logging do canal correspondente.\n\u2022\tLOGANALOGOUTCHANNELSREG: habilita ou desabilita o logging das sa\u00eddas anal\u00f3gicas do sistema. Cada bit corresponde a um canal. Como a unidade de processamento possu\u00ed apenas 4 sa\u00eddas anal\u00f3gicas, somente o bits de 0 a 3 sao utilizados. Quando setado, o bit habilita o logging do canal correspondente.\n\u2022\tDIGITAL OUT1 CONF REG: configura a sa\u00edda digital 1 da unidade de aquisi\u00e7c\u00e3ao. Abaixo s\u00e3ao listados os poss\u00edveis valores para esse registrador:\n\u2014\t0x0000 = sa\u00edda digital desabilitada. Quando desabilitada a sa\u00edda assume vai para o estado l\u00edgico baixo (zero).\n\u2014\t0x0001 = sa\u00edda digital configuravel pelo usuario.\n\u2014\t0x0002 = sa\u00edda de controle do modo medidor de fra\u00e7ao de \u00edgua\n\u2022\tDIGITAL OUT2 CONF REG: configura a sa\u00edda digital 1 da unidade de aquisic\u00e3o. Utiliza a mesma configura\u00e7\u00e3o da sa\u00edda digital 1.\n\u2022\tDIGITAL OUT1 VALUE REG: permite a leitura do valor atual da sa\u00edda digital 1, ou a escrita desta, caso a sa\u00edda esteja configurada no modo \u2019\u2019configur\u00edvel pelo usu\u00edrio\u201d(0x0001).\n\u2022\tDIGITAL OUT2 VALUE REG: permite a leitura do valor atual da sa\u00edda digital 2, ou a escrita desta, caso a sa\u00edda esteja configurada no modo \u2019configur\u00edavel pelo usu\u00edario\u2019(0x0001).\n\u2022\tREG WC MODE: configura o funcionamento do modo \u2019medidor de fra\u00e7c\u00e3ao de \u00edgua\u201dda unidade de processamento (MODBUS_CONF_REG = 0x0003).Abaixo s\u00e3ao listados os poss\u00edveis valores para esse registrador:\n\u2014\t0x0001 = modo ensaio. Nesse modo o sistema realiza ensaios pr\u00ed-determinados com o sistema de microondas.\n\u2014\t0x0002 = modo medidor. Nesse modo o sistema mede continuamente a fra\u00e7c\u00e3ao de \u00edagua do sistema.\n\u2022\tREG WC FREQ MIN: configura a frequencia do sinal de microondas na qual o sistema deve iniciar no modo de ensaio do medidor de frac\u00e7a\u00e3o de a\u00edgua. O valor m\u00ednimo \u00ed 7000 (MHz) e o m\u00edximo 12500 (MHz).\n\u2022\tREGWCFREQMAX: configura a frequ\u00eancia maxima do sinal de microondas no modo de ensaio do medidor de fra\u00e7\u00e3o de agua. O valor m\u00ednimo e 7000 (MHz) e o m\u00e1ximo 12500 (MHz).\n\u2022\tREG WC STEP NAQ: configura o nu\u00e1mero de medi\u00e7c\u00e3oes que devem ser realizadas em cada est\u00e1gio. Aceita valores de 1 \u00e0 65535.\n\u2022\tREG WC INTER ST'EP: configura o incremento da frequ\u00eaencia do sinal de microondas entre os est\u00e1agios de um ensaio do modo medidor de fra\u00e7c\u00e3ao de \u00e1agua.\n\u2022\tREG WC AQF'REQ: configura a frequ\u00eancia de aquisi\u00e7\u00e3o durante um ensaio no modo medidor de fra\u00e7\u00e3o de agua. Quando configurado no modo medidor de fra\u00e7ao de \u00e1gua o valor definido em AQ_FREQ_REG \u00e1 ignorado pelo sistema.\n\u2022\tREG WC AQ OVERSAMPLING: configura a frequ\u00eancia de aquisto durante um ensaio no modo medidor de fra\u00e7\u00e3o de agua. Quando configurado no modo medidor de fra\u00e7\u00e3o de agua o valor definido em AQ_FREQ_REG \u00e9 ignorado pelo sistema.\n\u2022\tREG WC START: configura o par\u00e2metro de oversampling dos canais de aquisi\u00e7c\u00e3ao durante um ensaio no modo medidor de fra\u00e7ca\u00e3o de agua. Quando configurado no modo medidor de fra\u00e7ca\u00e3o de agua o valor definido em AQ_OVERSAMPLING_REG \u00e9 ignorado pelo sistema.\nAp\u00eandice D\nEspecifica\u00e7\u00e3o dos Protocolos de Comunica\u00e7\u00e3o Criados\nPara complementar o protocolo Modbus TCP/IP e permitir que a unidade de aquisi\u00e7\u00e3o possu\u00e1sse as funcionalidades necessarias foi necessario o desenvolvimento de alguns protocolos de comunicac\u00e7\u00e3ao. Os protocolos desenvolvidos funcionam sobre UDP/IP e sao utilizados na comunica\u00e7ao entre a unidade de aquisi\u00e7\u00e3o e o concentrador de dados. Ser\u00e3ao apresentados dois protocolos: o protocolo de recrutamento de equipamentos e o protocolo de solicitac\u00e7\u00e3ao e configurac\u00e7a\u00e3o de logging. Os protocolos s\u00e3ao m\u00e1nimos e simples\nD.1 Protocolo de Recrutamento\nO protocolo de recrutamento permite que um mestre detecte o ingresso de um novo equipamento na rede e que o equipamento detecte o mestre. Al\u00e1em de ser necess\u00e1ario para permitir a resolu\u00e7c\u00e3ao dos IPs dos equipamentos, o processo de recrutamento \u00e1e indispensa\u00e1vel para a utiliza\u00e7c\u00e3ao do servi\u00e7co de logging do concentrador de dados. Somente equipamentos devidamente recrutados podem solicitar o servi\u00e7co de logging ao concentrador.\nO mecanismo de recrutamento funciona atrav\u00e1s do broadcast, \u00e0s portas 4000 da rede, de solicitac\u00e3es de recrutamento (RECRUTERREQUEST) de equipamentos novos equipamentos ou n\u00e3ao recrutados ainda. O servi\u00e7co de recrutamento do concentrador de dados, quando recebe uma solicita\u00e7ca\u00e3o de recrutamento, retorna ao equipamento solicitante uma confirma\u00e7ao de recrutamento (RECRUTER_ACK), informando o seu enderec\u00e7o IP. Um equipamento n\u00e3ao recrutado vai continuar enviando solicita\u00e7co\u00e3es de\nrecrutamento periodicamente at\u00e1 receber uma confirmac\u00e3o de um servi\u00e7o de recrutamento.\nO concentrador de dados mant\u00e1m a sua lista de equipamentos recrutados testando continuamente a conex\u00e3o com os equipamentos atrav\u00e1s do servi\u00e7o de ping do padr\u00e3o Ethernet. Quando um equipamento deixa de responder as comandos de ping do recru-tador, este equipamento \u00e1 removido da lista de equipamentos do recrutador. De forma similar, se o recrutador deixar de responder a alguma requisicao de um equipamento, este assume o estado de n\u00e3ao recrutado e passa a enviar solicitac\u00e3oes novamente.\nToda vez que o servico de recrutamento \u00e1 iniciado, re-inciado ou tem o seu endereco IP alterado, o recrutador envia na rede, atrav\u00e1s de um broadcast, uma notifica\u00e7\u00e3o de RECRUTERCHANGE, informando seu novo IP. Os equipamentos que recebem essa notificac\u00e7\u00e3ao devem passar ao estado de n\u00e3ao-recrutados, reiniciando o processo de recrutamento atrav\u00e1s do envio peri\u00e1dico de solicita\u00e7\u00f5es de RECRUTERREQUEST. Abaixo s\u00e3o descritas as mensagens de solicita\u00e7\u00e3o (RECRUTERREQUEST), confirma\u00e7\u00e3o (RE-CRUTERACK) e notificac\u00e3o (RECRUTERCHANGE).\nComando ID do equipamento Descri\u00e7\u00e3o do equipamento Tipo do equipamento\t1 Byte 8 Bytes 24 Bytes 1 Byte\t0xCC 8 caracteres ASCII 24 caracteres ASCII 0x01\nTabela D.1: Mensagem de solicitac\u00e3o de recrutamento (RECRUTERREQUEST)\nComando IP do concentrador de dados\t1 Byte 4 Bytes\t0xCE b1.b2.b3.b4\nTabela D.2: Mensagem de confirma\u00e7\u00e3o de recrutamento (RECRUTERACK)\nComando IP do concentrador de dados\t1 Byte 4 Bytes\t0xCA b1.b2.b3.b4\nTabela D.3: Mensagem de notifica\u00e7\u00e3o de mudan\u00e7a do concentrador de dados (RECRUTERCHANGE)\nD.2 Protocolo de Logging\nO protocolo de logging permite a utilizac\u00e3o do servi\u00e7o de logging do concentrador de dados. Qualquer equipamento que esteja na lista de equipamentos cadastrados pode solicitar ao concentrador de dados um canal de logging. Para cada equipamento que solicitar um canal de logging \u00e9 criado uma tarefa espec\u00edfica para receber, tratar e armazenar os dados enviados pelo equipamento. A tarefa de logging de um determinado equipamento vai continuar ativa at\u00e9e que o equipamento solicite o encerramento\ndo servi\u00e7co, ou ent\u00e3ao, saia da rede e, consequentemente, da lista de equipamentos recrutados. De maneira a otimizar a utiliza\u00e7\u00e3o da memoria no concentrador de dados, a tarefa de logging de um dado equipamento s\u00e1 \u00e9 criada quando o equipamento envia um requisi\u00e7ao (LOGGER_REQUEST) ao concentrador de dados.\nO mecanismo do servi\u00e7o de logging inicia com o envio, via UDP/IP, de uma requisi\u00e7\u00e3o de logging a porta 4001 do concentrador de dados. Juntamente com a re-quisic\u00e7a\u00e3o o equipamento deve informar ao servi\u00e7co de logging o nu\u00e9mero de canais de logging que ser\u00e3o utilizados, a frequ\u00eancia de logging (em func\u00e3o da frequ\u00eancia de aquisi\u00e7\u00e3o), a frequ\u00eancia de aquisi\u00e7\u00e3o e o tamanho do pacote de dados que ser\u00e1 utilizado. O tamanho do pacote \u00e9e definido pelo equipamento de maneira a otimizar sua memoria e seus buffers internos. Um pacote pode conter os dados de logging de diversos canais, durante um dado per\u00e9odo de tempo.\nQuando o servi\u00e7co de logging recebe uma requisi\u00e7c\u00e3ao de um equipamento, este enta\u00e3o cria uma tarefa espec\u00e9fica para a recep\u00e7c\u00e3ao e tratamento do fluxo de dados de logging gerado pelo equipamento. O servi\u00e7co de logging retorna uma confirma\u00e7ca\u00e3o de cria\u00e7c\u00e3ao de canal de logging (LOGGERACK) ao equipamento solicitante. Quando cria a tarefa de logging para um dado equipamento, o servi\u00e7co de logging designa uma porta de comunicacao para ser usada unica e exclusivamente para a comunica\u00e7ao de logging com o equipamento. Junto com a confirma\u00e7c\u00e3ao de cria\u00e7ca\u00e3o de canal de logging o servic\u00e7o de logging retorna ao equipamento a porta designada para a comunica\u00e7ca\u00e3o de logging desse equipamento. Ap\u00e9os o recebimento da confirmac\u00e7\u00e3ao da cria\u00e7c\u00e3ao de canal de logging o equipamento pode iniciar o envio de dados de logging para a porta designada do concentrador de dados.\nOs dados de logging s\u00e3o enviados na forma de um streaming de dados ao concetra-dor. Somente o equipamento envia dados ao concentrador. Nao existem mecanismos de controle de erros ou de transmissa\u00e3o segura. Junto com cada pacote de logging o equipamento envia um byte de sequ\u00eancia de pacote ao concentrador. O byte de sequ\u00eancia \u00e9 incrementado a cada novo envio. O numero de sequ\u00eancia funciona como um mecanismo de estampa de tempo simples. Com base nas configura\u00e7c\u00e3oes de frequ\u00eaencia de logging e de frequ\u00eaencia de aquisic\u00e7a\u00e3o, enviados com a requisic\u00e7a\u00e3o de logging, o concentrador calcula a estampa de tempo referente a um dado byte de sequ\u00eaencia e estampa no arquivo de logging o instante de recebimento de cada dado. Cada tarefa de logging criada \u00e9e associada a um unico arquivo de logging. O arquivo de logging fica armazenado no concentrador de dados e pode ser posteriormente recuperado.\nUma tarefa de logging pode ser encerrada pelo equipamento solicitante atrav\u00e9es do envio de uma solicitac\u00e3o de finaliza\u00e7\u00e3o de canal de logging (LOGGER_STOP) ao servico de logging na porta 4001 do concentrador de dados. Quando o concentrador recebe uma requisi\u00e7c\u00e3ao de finaliza\u00e7ca\u00e3o ele encerra a tarefa de logging criada para o equipamento e\nlibera o arquivo de logging gerado para o sistema do concetrador. O arquivo de logging tamb\u00e9em \u00e9e liberado para o sistema se o equipamento sai da lista de equipamentos recrutados ou solicita um canal de logging j\u00e9a possuindo um canal de logging ativo. Abaixo s\u00e3o descritas as mensagens de solicita\u00e7\u00e3o (LOGGERREQUEST), confirma\u00e7\u00e3o (LOGGERACK) e notificac\u00e3o (LOGGERSTOP).\nComando\t1 Byte\t0xDC\nCanais de logging\t2 Bytes\tcada bit representa um canal\nFrequ\u00eancia de logging\t2 Bytes\t0 a 65535\nFrequ\u00eancia de aquisi\u00e7ao\t2 Bytes\t0 a 65535\nTamanho do pacote de logging\t1 Byte\t\nTabela D.4: Mensagem de solicita\u00e7ao de cria\u00e7\u00e3o de canal de logging (LOGGERREQUEST)\nComando Porta de comunica\u00e7\u00e3o dedicada\t1\tByte 2\tBytes\t0xDE 0 a 65535\nTabela D.5:\nMensagem de confirmac\u00e3o de criacao de canal de logging (LOGGERACK)\nComando\t1 Byte\t0xD9\nTabela D.6: Mensagem de notifica\u00e7ao de finalizac\u00e3o de canal de logging (LOGGEREND)\nAp\u00eandice E\nDescri\u00e7\u00e3o dos Webservices do Sistema do Concentrador de Dados\nNeste ap\u00eandice s\u00e3o apresentados os Webservices disponibilizados pelo sistema do concentrador de dados. Esses Webservices podem ser utilizados por qualquer aplicac\u00e3o de usuario que venha a ser desenvolvida. Tambem podem ser utilizados por qualquer sistema supervisorio que tenha suporte, ou driver, para Webservices. As fun\u00e7\u00f5es que serao apresentadas permitem a utiliza\u00e7ao de todas as funcionalidades da unidade de processamento. Tambem permitem que o usuario interaja com o sistema num n\u00edvel de abstra\u00e7\u00e3o maior do que a utiliza\u00e7ao do protocolo Modbus TCP/IP permite. Enquanto que, utilizando-se o protocolo Modbus, a configura\u00e7ao do sistema \u00e9 realizada atraves do escrita e leitura de registradores, os Webservices criam uma camada de abs-tra\u00e7c\u00e3ao que torna detalhes do protocolo e da implementa\u00e7c\u00e3ao transparentes ao usuario. As fun\u00e7c\u00e3oes e estruturas de dados utilizadas pelo Webservices s\u00e3ao obtidas automaticamente pelo cliente atraves da linguagem WSDL (Web Services Description Language) e do protocolo UDDI (Universal Description, Discovery and Integration), definidos na especifica\u00e7c\u00e3ao da tecnologia de Webservices. As fun\u00e7c\u00e3oes disponibilizadas pelos Webservices sao descritas abaixo. Na sequ\u00eancia sao apresentadas as estruturas de dados utilizadas. Os prot\u00f3tipos1 das fun\u00e7oes e das estruturas s\u00e3o apresentados na sintaxe da linguagem CSharp.\nE.1 Func\u00e3es dos Webservices\nMo ingl\u00eas: prototypes\n\u2022\tHWList ListHardwares() - retorna uma lista com os dados dos equipamentos detectados na rede pelo concentrador de dados.\n\u2022\tbool WriteRegister(IP, REG ADD, REG.VALUE) - implementa\u00e7\u00e3o da fun\u00e7\u00e3o Modbus de escrita de um Unico registrador. O parametro IP corresponde ao endere\u00e7o da unidade na rede. O parametro REGADD e o endere\u00e7o do registrador Modbus que se deseja escrever. A fun\u00e7c\u00e3ao retorna verdadeiro se o comando foi bem sucedido, ou falso caso contrario.\n\u2022\tbool WriteCoil(IP, COIL ADD, COIL.STATE) - implementac\u00e3o da func\u00e3o Modbus de escrita de uma sa\u00edda digital. O par\u00e2metro IP corresponde ao endere\u00e7o da unidade na rede. O par\u00e2metro COILADD \u00e9 a sa\u00edda digital que se deseja escrever. A fun\u00e7c\u00e3ao retorna verdadeiro se o comando foi bem sucedido, ou falso caso contr\u00e1rio.\n\u2022\tbool WriteMultipleRegisters(IP,\tREG..STARTADD, DATA,\nN REG) - implementa\u00e7\u00e3o da fun\u00e7\u00e3o Modbus de escrita de multiplos registradores. O par\u00e2ametro IP corresponde ao endere\u00e7co da unidade na rede. O par\u00e2metro REGSTART \u00e9 o endere\u00e7o do primeiro registrador Modbus que se deseja escrever. O par\u00e2metro N_REG corresponde ao numero de registradores, a partir de REGSTART_ADD, que se deseja escrever. Os valores que se deseja escrever devem ser passados, na ordem correspondente, atraves do par\u00e2ametro DATA. A fun\u00e7ca\u00e3o retorna verdadeiro se o comando foi bem sucedido, ou falso caso contrario.\n\u2022\tbool ReadMultipleRegisters(IP, REG START ADD, N REG, ref DATA) - implementa\u00e7c\u00e3ao da func\u00e7\u00e3ao Modbus de leitura de multiplos registradores. O par\u00e2ametro IP corresponde ao endere\u00e7co da unidade na rede. O par\u00e2metro REGSTART \u00e9 o endere\u00e7o do primeiro registrador Modbus que se deseja ler. O par\u00e2metro N_REG corresponde ao numero de registradores, a partir de REGSTART_ADD, que se deseja ler. Os resultados do comando de leitura ser\u00e3ao armazenados em DATA. A fun\u00e7ca\u00e3o retorna verdadeiro se o comando foi bem sucedido, ou falso caso contrario.\n\u2022\tbool ReadInputRegisters(IP, REGI START ADD,\tN..REG,\tref\nDATA) - implementa\u00e7c\u00e3ao da fun\u00e7c\u00e3ao Modbus de leitura de multiplas entradas analogicas. O par\u00e2ametro IP corresponde ao endere\u00e7co da unidade na rede. O par\u00e2metro REGSTART a primeira entrada anal\u00f3gica que se deseja ler. O par\u00e2metro N_REG corresponde ao numero de entradas analogicas, a partir de REGSTART_ADD, que se deseja ler. Os resultados do comando de leitura ser\u00e3ao armazenados em DATA. A fun\u00e7ca\u00e3o retorna verdadeiro se o comando foi bem sucedido, ou falso caso contrario.\n\u2022\tbool ConfigureAquisitionRegisters(IP, AQRegs) - permite a configura\u00e7\u00e3o dos par\u00eaametros de aquisic\u00e7\u00e3ao de dados da unidade de processamento. A estrutura AQRegs que cont\u00f3m a configura\u00e7ao desejada deve ser passada como par\u00e2metro. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7c\u00e3ao retorna verdadeiro se o comando foi bem sucedido, ou falso caso contr\u00f3ario.\n\u2022\tbool ConfigureAnalogOutputRegisters(IP, AnalogOutRegs) - permite a configurac\u00e7\u00e3ao dos par\u00eaametros das sa\u00f3das analo\u00f3gicas da unidade de processamento. A estrutura AnalogOutRegs que cont\u00f3em a configura\u00e7c\u00e3ao desejada deve ser passada como para\u00eametro. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A func\u00e7a\u00e3o retorna verdadeiro se o comando foi bem sucedido, ou falso caso contra\u00f3rio.\n\u2022\tbool ConfigureDigitalOutputRegisters(IP, DigitalOutRegs) - permite a configura\u00e7c\u00e3ao dos par\u00eaametros das sa\u00f3das anal\u00f3ogicas da unidade de processamento. A estrutura DigitalOutRegs que cont\u00f3m a configura\u00e7\u00e3o desejada deve ser passada como para\u00eametro. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A func\u00e7\u00e3ao retorna verdadeiro se o comando foi bem sucedido, ou falso caso contra\u00f3rio.\n\u2022\tbool ConfigureEthernetModule(IP, EthernetModuleRegs) - permite a configura\u00e7c\u00e3ao dos par\u00eaametros de rede da unidade de processamento. A estrutura EthernetModuleRegs que cont\u00f3m a configurac\u00e3o desejada deve ser passada como par\u00eaametro. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A func\u00e7\u00e3ao retorna verdadeiro se o comando foi bem sucedido, ou falso caso contra\u00f3rio.\n\u2022\tbool ConfigureLoggingRegisters(IP, LOGRegs) - permite a configurac\u00e3o dos par\u00e2metros de logging da unidade de processamento. A estrutura LOGRegs que cont\u00f3m a configura\u00e7ao desejada deve ser passada como par\u00e2metro. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7c\u00e3ao retorna verdadeiro se o comando foi bem sucedido, ou falso caso contr\u00f3ario.\n\u2022\tbool ConfigureLoggingChannels(IP, LOGChannelsRegs) - permite a configura\u00e7c\u00e3ao dos canais de logging da unidade de processamento. A estrutura LOGChannelsRegs que cont\u00f3m a configura\u00e7\u00e3o desejada deve ser passada como par\u00eaametro. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A func\u00e7\u00e3ao retorna verdadeiro se o comando foi bem sucedido, ou falso caso contra\u00f3rio.\n\u2022\tbool ConfigureWCRegisters(IP, WCRegs) - permite a configura\u00e7\u00e3o dos par\u00eaametros de funcionamento do modo medidor de fra\u00e7c\u00e3ao de \u00f3agua da unidade de processamento. A estrutura WCRegs que cont\u00f3m a configura\u00e7\u00e3o desejada deve ser passada como para\u00eametro. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7c\u00e3ao retorna verdadeiro se o comando foi bem sucedido, ou falso caso contra\u00f3rio.\n\u2022\tbool SetAnalogOutputs(IP, AnalogOutRegs) - permite a defini\u00e7ao dos valores das sa\u00e1das anal\u00e1ogicas da unidade de processamento. A estrutura Analo-gOutRegs que cont\u00e1em os valores desejados deve ser passada como para\u00eametro. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7ca\u00e3o retorna verdadeiro se o comando foi bem sucedido, ou falso caso contr\u00e1ario.\n\u2022\tEthernetModuleRegs ReadEthernetModuleConfiguration(IP) - permite a leitura dos par\u00eaametros de configurac\u00e7\u00e3ao de rede da unidade de processamento. O para\u00eametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7c\u00e3ao retorna a estrutura EthernetModuleRegs com os par\u00eaametros lidos da unidade de processamento.\n\u2022\tAQRegs ReadAquisitionConfigurationRegisters(IP) - permite a leitura dos par\u00eaametros de configurac\u00e7\u00e3ao de aquisi\u00e7c\u00e3ao da unidade de processamento. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7c\u00e3ao retorna a estrutura AQRegs com os par\u00eaametros lidos da unidade de processamento.\n\u2022\tAnalogOutRegs ReadAnalogOutConfigurationRegisters(IP) - permite a leitura dos par\u00eaametros de configura\u00e7c\u00e3ao das sa\u00e1das anal\u00e1ogicas da unidade de processamento. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7c\u00e3ao retorna a estrutura AnalogOutRegs com os par\u00eaametros lidos da unidade de processamento.\n\u2022\tDigitalOutRegs ReadDigitalOutConfigurationRegisters(IP) - permite a leitura dos par\u00eaametros de configura\u00e7ca\u00e3o das sa\u00e1das digitais da unidade de processamento. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7c\u00e3ao retorna a estrutura DigitalOutRegs com os par\u00eaametros lidos da unidade de processamento.\n\u2022\tLOGChannelsRegs ReadLoggingChannelsRegisters(IP) - permite a leitura dos par\u00eaametros da configura\u00e7c\u00e3ao de canais de logging habilitados da unidade de processamento. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7\u00e3o retorna a estrutura LOGChannelsRegs que cont\u00e1m a configura\u00e7ao de canais de logging habilitados da unidade de processamento.\n\u2022\tLOGRegs ReadLoggingConfigurationRegisters(IP) - permite a leitura dos par\u00eaametros de configura\u00e7c\u00e3ao de logging da unidade de processamento. O para\u00eametro IP corresponde ao endere\u00e7co da unidade na rede. A fun\u00e7ca\u00e3o retorna a estrutura LOGRegs com os para\u00eametros lidos da unidade de processamento.\n\u2022\tWCRegs ReadWCConfigurationRegisters(IP) - permite a leitura dos par\u00eaametros de funcionamento do modo medidor de frac\u00e7\u00e3ao de \u00e1agua da unidade de processamento. O par\u00eaametro IP corresponde ao endere\u00e7co da unidade na rede.\nA fun\u00e7\u00e3o retorna a estrutura WCRegs com os par\u00e2metros lidos da unidade de processamento.\nE.2 Estruturas de Dados do Webservices\nAbaixo s\u00e3o listadas todas as estruturas de dados utilizadas no servi\u00e7o de Webservices do concentrador de dados.\nHWTNode[32] HWList\nstruct HWTNode\nString IP;\nString ID;\nString DESC; byte TYPE;\nstruct EthernetModuleRegs\nbool DHCP;\nint TYPE;\nString ID;\nString DESC;\nString IP;\nString MASK;\nString GATEWAY;\nstruct AQRegs\nushort AQ_FREQ;\nushort AQ_CHANNELS;\nushort AQ_OVERSAMPLIG;\nstruct AnalogOutRegs\nushort ANALOG_OUT_1CONF;\nushort ANALOG_OUT_1VALUE;\nushort ANALOG_OUT_2CONF;\nushort ANALOG_OUT_2VALUE;\nushort ANALOG_OUT_3CONF;\nushort ANALOG_OUT_3VALUE;\nushort ANALOG_OUT_4CONF;\nushort ANALOG_OUT_4VALUE;\nstruct WCRegs\nushort WC_MODE;\nushort WC_FREQ_MIN;\nushort WC_FREQ_MAX;\nushort WC_STEP_NAQ;\nushort WC_STEP_SIZE;\nushort WC_INTER_STEP;\nushort WC_AQ_FREQ;\nushort WC_AQ_OVERSAMPLING;\nstruct DigitalOutRegs\nushort DIGITAL_OUT_1CONF;\nushort DIGITAL_OUT_2CONF;\nushort DIGITAL_OUT_1VALUE;\nushort DIGITAL_OUT_2VALUE;\nstruct LOGChannelsRegs\nushort LOG_AQ_CHANNELS;\nushort LOG_ANALOG_OUT_CHANNELS;\nstruct LOGRegs\nushort LOG_CONF;\nushort LOG_FREQ;\nString REMOTE_IP;\nushort REMOTE_PORT;\nRefer\u00eancias Bibliogr\u00e1ficas\n[1]\tDavid Achson. From Calculus to Chaos - An Introduction to Dynamics. Oxford Un iversity Press, 1997.\n[2]\tJan Axelson. Embedded Ethernet and Internet Complete - Desingning and Programming Small Devices for Networking. Lakeview Research LLC, 2003.\n[3]\tIbrahim M.M. Babelli. In search of an ideal multiphase flow meter for the oil industry. The Arabian Journal for Science and Engineering, 27(2B), october 2002.\n[4]\tJeremy Bentham. TCP/IP Lean - Web Servers for Embedded Systems. CMP Books, 2002.\n[5]\tJohan Carlson. Ultrasonic Characterization of Materials and Multiphase Flows. PhD thesis, Lulea University of Technology, 2002.\n[6]\tKai Chang. RF and Microwave Wireless Systems. John Wiley and Sons, INC., 2000.\n[7]\tMartin Chaplin. Water structure and science. obtido no site da London South Bank University, 2007.\n[8]\tJose A. P. da Silva Filho e Fransisco J. de Silva Neto Claudio B.C. Silva, Miguel J. Borges Filho. Criterio para a sele\u00e7\u00e3o de medidores multifasicos na petrobras. Boletim tecnico, Petrobras, jan/dez 1999.\n[9]\tPertti Vainikainen Ebbe G. Nyfors. Industrial Microwave Sensors. Artech House, INC., 1989.\n[10]\tSidnei Noceti Filho. Filtros Seletores de Sinais. Editora da UFSC, 2003.\n[11]\tNathan Ida. Microwave NDT. Kluwer Academic Publisher, 1992.\n[12]\tTexas Instruments. Op Amps for Everyone. Texas Instruments.\n[13]\tAndy W. Jamieson. Multiphase metering - the challenge of implementation. 16th Noth Sea Flow Measurement Workshop, 1998.\n[14]\tEivind Dykesteen John Amdal, Harald Danielsen. Handbook of multiphase metering. Technical report, The Norwegian Society for Oil and Gas Measurement.\n[15]\tMartyn John Key. Gas Microstructure X-Ray Detectors and Tomographic Multiphase Flow Measurement. PhD thesis, University of Surrey, 1999.\n[16]\tMamoru Ishii Lefteri H. Tsoukalas and Ye Mi. A neurofuzzy methodology for impedance-based multiphase flow identification. Engng. Applic. Artif. Intell., 10(6):545,555, 1997.\n[17]\tW. Merzkirch M. Schneider, F. Peters. Influence of velocity profile and turbulence on cross-correlation-based flow metering.\n[18]\tModbus-IDA.\tModbus application protocol specification v1.1b.\nhttp://www.modbus.org.\n[19]\tModbus-IDA. Modbus messaging on tcp/ip implementation guide v1.0b. http://www.modbus.org.\n[20]\tEbbe Gustaf Nyfors. Cylindrical Microwave Resonator Sensors For Measuring Materials Under Flow. PhD thesis, Helsinki University of Technology, 2000.\n[21]\tInc Omega Engineering. Transactions in Mesuarement and Control - Volume IV - Flow and Level Measurement, volume IV of Transactions in Mesuarement and Control. Omega Engineering, Inc.\n[22]\tEmilio E. Paladino and Clovis R. Maliska. Multi-phase flow modelling in differential pressure flow meters. Proceedings of the ENCIT 2002, 2002.\n[23]\tDavid M. Pozar. Microwave Engineering. John Wiley adn Sons, INC., 1998.\n[24]\tNilesh Rajbharti. The microchip tcp/ip stack. Technical report, Microchip Technology Inc.\n[25]\tUlrich L. Rohde and David P. Newkirk.\n[26]\tAndrzej W. Kraszewski Samir Trabelsi and Stuart O. Nelson. Phase-shift ambiguity in microwave dielectric properties measurements. IEEE Transactions On Instrumentation And Measurement, 49(1), February 2000.\n[27]\tAlexander S. Sovlukov and Victor I. Tereshin. Measurement of liquefied petroleum gas quantity in a tank by radio-frequency techniques. IEEE Transactions On Instrumentation and Measurement, 53(4), August 2004.\n[28]\tSteve Winder. Analog and Digital Filter Design. Newnes, second edition edition, 2002."}]}}}