{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.11998"}, {"@name": "filename", "#text": "17448_Projeto%20-%20MEE%20-%20Jo%c3%a3o%20Ricardo%20Silva.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "Relat\u00f3rio de Projeto \n\nMestrado em Engenharia Eletrot\u00e9cnica \n\nControlador de Caldeiras e Salamandras Dom\u00e9sticas \n\n \n\n \n\n \n\n \n\nJo\u00e3o Ricardo Cardoso Silva \n\n \n\n \n\nLeiria, mar\u00e7o de 2017 \n\n \n\n\n\n\n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nRelat\u00f3rio de Projeto \n\nMestrado em Engenharia Eletrot\u00e9cnica \n\nRamo de Energia e Automa\u00e7\u00e3o \n\nControlador de Caldeiras e Salamandras Dom\u00e9sticas \n\n \n\nJo\u00e3o Ricardo Cardoso Silva \n\n \n\nRelat\u00f3rio de Projeto de Mestrado realizado sob a orienta\u00e7\u00e3o do Doutor Pedro \nMarques, Professor Adjunto da Escola Superior de Tecnologia e Gest\u00e3o do Instituto \nPolit\u00e9cnico de Leiria e coorienta\u00e7\u00e3o do Mestre Paulo Ventura, Professor Adjunto da \nEscola Superior de Tecnologia e Gest\u00e3o do Instituto Polit\u00e9cnico de Leiria. \n\n \n\nLeiria, mar\u00e7o de 2017  \n\n\n\nii \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\niii \n\n \n\nDedicat\u00f3ria \n\n \n\n \n\n \n\nAos meus pais, aos meus av\u00f3s. \n\n  \n\n\n\niv \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\nv \n\n \n\nAgradecimentos \n\nApesar do processo solit\u00e1rio a que uma tese de mestrado est\u00e1 destinada, \n\ninevitavelmente re\u00fane o contributo de v\u00e1rias pessoas. \n\nAgrade\u00e7o aos meus orientadores, Professor Doutor Pedro Marques e Professor \n\nMestre Paulo Ventura, o apoio, dedica\u00e7\u00e3o e disponibilidade que sempre demonstraram ao \n\nlongo deste projeto. \n\nAo Eng.\u00ba Felisbelo Lisboa e \u00e0 Eng.\u00aa Alexandra Lisboa, pelo acompanhamento, \n\nconfian\u00e7a e ensinamentos bem como a todos os colaboradores da METALOMEC\u00c2NICA \n\nVICTOR MONTEIRO pela forma como fui tratado, recebido, pela integra\u00e7\u00e3o que me \n\nproporcionaram e pela disponibilidade demonstrada desde o primeiro instante, deixo \n\ntamb\u00e9m uma palavra de agradecimento. \n\nAgrade\u00e7o tamb\u00e9m aos meus colegas de curso, docentes e restantes colaboradores do \n\nInstituto Polit\u00e9cnico de Leiria pelo aux\u00edlio, pela camaradagem e pelo apoio ao longo destes \n\nanos de estudo. \n\nAo colega de curso e amigo Cristiano Justino, quero agradecer o apoio, a motiva\u00e7\u00e3o \n\ne o esp\u00edrito de entreajuda que sempre demonstrou, n\u00e3o s\u00f3 durante o desenvolvimento deste \n\nprojeto, mas ao longo de todo o curso de mestrado. \n\nPor \u00faltimo, um agradecimento aos meus pais, irm\u00e3o e av\u00f3s, por todo o contributo \n\nprestado na minha educa\u00e7\u00e3o e pela forma como sempre me enriqueceram enquanto pessoa. \n\nSem eles, nada teria sido poss\u00edvel. A eles, refor\u00e7o a minha gratid\u00e3o! \n\n \n\n \n\n \n\n \n\n\n\nvi \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\nvii \n\n \n\nResumo \n\nOs pellets s\u00e3o uma fonte de energia renov\u00e1vel proveniente da compacta\u00e7\u00e3o de \n\ndesperd\u00edcios da madeira. Ocupam menos espa\u00e7o do que a lenha, produzem menos cinzas, \n\ns\u00e3o mais f\u00e1ceis de transportar e podem ser utilizados em sistemas com funcionamento \n\nautom\u00e1tico, proporcionando maior conforto aos seus utilizadores. Por terem origem na \n\nbiomassa, s\u00e3o considerados neutros em termos ambientais e o seu pre\u00e7o n\u00e3o depende \n\ndiretamente das oscila\u00e7\u00f5es do pre\u00e7o do petr\u00f3leo. Estas caracter\u00edsticas fazem dos pellets um \n\ncombust\u00edvel que tem ganho cada vez mais quota de mercado. \n\nUm sistema de aquecimento a pellets necessita de um controlo eletr\u00f3nico que garanta \n\no seu bom funcionamento. Sistemas de aquecimento dom\u00e9stico derivados deste combust\u00edvel \n\nj\u00e1 s\u00e3o fabricados em Portugal. No entanto, n\u00e3o existe no pa\u00eds nenhum fabricante de \n\ncontroladores eletr\u00f3nicos dedicados a sistemas de queima de pellets. Este projeto de \n\nmestrado teve como motiva\u00e7\u00e3o o repto lan\u00e7ado pela empresa nacional e fabricante de \n\nsistemas de aquecimento a pellets, a MVM \u2013 Metalomec\u00e2nica V\u00edctor Monteiro, Lda, de \n\ndesenvolver um controlador com um custo competitivo, com assinatura portuguesa. \n\nNeste trabalho foram analisados os elementos que constituem um sistema de \n\naquecimento a pellets, estudadas as melhores formas de os controlar e integrou-se esse \n\nconhecimento no estudo do processo de queima. Tudo isto resultou no desenvolvimento de \n\numa placa controladora e respetivo firmware capaz de garantir o funcionamento de uma \n\nsalamandra a pellets que oferece ao utilizador o controlo autom\u00e1tico da climatiza\u00e7\u00e3o, \n\nprograma\u00e7\u00e3o de funcionamento autom\u00e1tico com controlo remoto por Bluetooth e/ou \n\ninfravermelhos. \n\nDurante o desenvolvimento, o controlador foi testado num equipamento \n\ncomercializado pela MVM, local onde foi poss\u00edvel comprovar o seu bom funcionamento. \n\n \n\n \n\n \n\nPalavras-chave: Pellets, Aquecimento dom\u00e9stico, Salamandras a pellets, \n\nControlo de salamandras. \n\n\n\nviii \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\nix \n\n \n\nAbstract \n\nPellets are a source of renewable energy made from the compaction of wood waste. \n\nThey occupy less space than firewood, produce less ashes, are easier to carry and can be \n\nused in systems with automatic operation, providing greater comfort to its users. Because \n\nthey have their origin in biomass, they are considered harmless in environmental terms and \n\ntheir price doesn\u2019t depend directly on the oil price fluctuations. These characteristics make \n\npellets a fuel type that has gained more and more market share. \n\nA pellet heating system needs an electronic control system to ensure that it functions \n\nproperly. Domestic heating systems derived from this fuel are already manufactured in \n\nPortugal. However, there isn\u2019t any electronic control system manufacturer in the country. \n\nThis master\u2019s project was motivated by the challenge launched by the national company and \n\nmanufacturer of pellet heating systems, MVM \u2013 Metalomec\u00e2nica Victor Monteiro, Lda, to \n\ndevelop a controller with a competitive cost, with Portuguese signature. \n\nIn this work, the elements that constitute a pellet heating system were analyzed, the \n\nbest ways of controlling them were studied and the knowledge was integrated in the study \n\nof the burning process. All this has resulted in the development of a controller board and its \n\nfirmware capable of guaranteeing the operation of a pellet stove that offers the user automatic \n\nclimate control, automatic function programming and Bluetooth and/or infrared remote \n\ncontrol and automatic function programming. During the development, the controller was \n\ntested on an equipment marketed by MVM, where it was possible to assess its good \n\noperation. \n\n \n\n \n\n \n\n \n\n \n\n \n\nKeywords: Pellets, Domestic heating, Pellet stoves, Stoves Control \n\n\n\nx \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\nxi \n\n \n\nLista de figuras \n\nFigura 1 - Evolu\u00e7\u00e3o do pre\u00e7o do barril de petr\u00f3leo ($USD/Barril) nos \u00faltimos 16 anos [1]. 2 \n\nFigura 2 - Simula\u00e7\u00e3o de custos de utiliza\u00e7\u00e3o a prazo dos equipamentos para aquecimento \n\n[6]. ......................................................................................................................................... 4 \n\nFigura 3 - Pellets [10]. ........................................................................................................... 8 \n\nFigura 4 - Comparativo do custo do kWh t\u00e9rmico para aquecimento. ................................ 10 \n\nFigura 5 - Lareira aberta encastrada [16]............................................................................. 12 \n\nFigura 6 - Lareira aberta no centro de uma divis\u00e3o [17]. .................................................... 12 \n\nFigura 7 - Esquema de fluxos de ar de um recuperador de calor [21]. ................................ 14 \n\nFigura 8 - Corte lateral de um sistema recuperador de calor ventilado [16]. ...................... 15 \n\nFigura 9 - Sistema de recuperador de calor interligado com \u00e1guas sanit\u00e1rias [24]. ............ 16 \n\nFigura 10 - Salamandra t\u00edpica, com aquecimento por irradia\u00e7\u00e3o [25]. ............................... 17 \n\nFigura 11 - Corte lateral de uma salamandra com recupera\u00e7\u00e3o de calor [23]. .................... 18 \n\nFigura 12 - Corte lateral de esquema de uma caldeira [27]. ................................................ 19 \n\nFigura 13 - Esquema de um sistema de aquecimento dom\u00e9stico a caldeira [28]. ............... 20 \n\nFigura 14 - Evolu\u00e7\u00e3o do mercado nacional de pellets [9]. .................................................. 20 \n\nFigura 15 - Corte lateral de uma salamandra a pellets [29]. ................................................ 21 \n\nFigura 16 - Exemplo de recuperador de calor a pellets [30]. .............................................. 22 \n\nFigura 17 - Salamandras com aquecimento de \u00e1guas sanit\u00e1rias [31]. ................................. 23 \n\nFigura 18 - Controlador de queima de pellets da marca FUMIS ALPHA [32]. ................. 24 \n\nFigura 19 - Resist\u00eancia incandescente de modo a iniciar a combust\u00e3o dos pellets [33]. .... 24 \n\nFigura 20 - Esquema el\u00e9trico de um controlador de queima de pellets [34]. ...................... 26 \n\nFigura 21 - Corte lateral de uma caldeira a pellets [35]. ..................................................... 27 \n\nFigura 22 - Fluxograma de funcionamento de um equipamento a pellets........................... 29 \n\nFigura 23 - Interface com bot\u00f5es para salamandra a pellets [36]. ....................................... 30 \n\nFigura 24 - Interface com potenci\u00f3metros para salamandra a pellets [37]. ......................... 31 \n\nFigura 25 - Interface com LCD para salamandra a pellets [38]. ......................................... 31 \n\nFigura 26 - Interface de ecr\u00e3-t\u00e1ctil para salamandra a pellets [39]. .................................... 32 \n\nFigura 27 - Painel remoto com bot\u00f5es [40]. ........................................................................ 33 \n\nFigura 28 - Painel remoto de ecr\u00e3 t\u00e1ctil [41]. ...................................................................... 33 \n\nFigura 29 - Interface de LCD com um comando remoto [42]. ............................................ 34 \n\nFigura 30 - M\u00f3dulo Wi-Fi [43]............................................................................................ 35 \n\n\n\nxii \n\n \n\nFigura 31 - M\u00f3dulo GSM/GPRS [44]. ................................................................................ 36 \n\nFigura 32 - Diagrama de blocos do controlador a desenvolver. .......................................... 38 \n\nFigura 33 - Protoshield para Ardu\u00edno Uno [45]. ................................................................. 41 \n\nFigura 34 - Shield de Ethernet para Ardu\u00edno [46]. .............................................................. 41 \n\nFigura 35 - Ardu\u00edno Uno. .................................................................................................... 43 \n\nFigura 36 - Ardu\u00edno Mega 2560. ......................................................................................... 44 \n\nFigura 37 - Placa de desenvolvimento PICDEM LAB II [47]. ........................................... 45 \n\nFigura 38 - Placa de desenvolvimento Explorer 8 [47]. ...................................................... 45 \n\nFigura 39 - Placa de desenvolvimento ChipKIT Uno32 [49]. ............................................ 47 \n\nFigura 40 - Raspberry Pi 2 Model B. .................................................................................. 48 \n\nFigura 41 - Compara\u00e7\u00e3o do Raspberry Pi Zero com uma nota de 5$ [50]. ........................ 48 \n\nFigura 42 - Salamandra de testes, modelo Prima Air, durante um ensaio de queima. ........ 53 \n\nFigura 43 - Elementos constituintes da salamandra a controlar. ......................................... 54 \n\nFigura 44 - Rela\u00e7\u00e3o entre tens\u00e3o de sa\u00edda e \u00e2ngulo de disparo [49]. .................................. 56 \n\nFigura 45 - Tens\u00e3o e corrente numa carga resistiva controlada com TRIAC [51]. ............ 56 \n\nFigura 46 - Tens\u00e3o e corrente numa carga indutiva controlada com TRIAC [51]. ............. 57 \n\nFigura 47 - Diagrama de blocos do controlo de velocidade de um motor AC. ................... 58 \n\nFigura 48 - Circuito de snubber com resist\u00eancia e condensador [52]. ................................ 59 \n\nFigura 49 - Ilustra\u00e7\u00e3o de uma passagem por zero [52]. ...................................................... 61 \n\nFigura 50 - Esquema el\u00e9trico do circuito utilizado na dete\u00e7\u00e3o de zero. .............................. 61 \n\nFigura 51 - M\u00f3dulo de rel\u00e9 utilizado na comuta\u00e7\u00e3o da resist\u00eancia de aquecimento. .......... 65 \n\nFigura 52 - Informa\u00e7\u00e3o disponibilizada pelo ecr\u00e3. .............................................................. 66 \n\nFigura 53 - Conjunto de comando remoto emissor e recetor de infravermelhos. ............... 67 \n\nFigura 54 - M\u00f3dulo transcetor Bluetooth. ........................................................................... 68 \n\nFigura 55 - Esquema el\u00e9trico do circuito de leitura dos sensores de temperatura. ............. 68 \n\nFigura 56 - Sa\u00edda do circuito de dete\u00e7\u00e3o de zero. ............................................................... 70 \n\nFigura 57 - Sinal de disparo de TRIAC em sincronismo com a dete\u00e7\u00e3o de zero. ............... 71 \n\nFigura 58 - Ecr\u00e3 corrompido pela comuta\u00e7\u00e3o do motor de alimenta\u00e7\u00e3o. ........................... 73 \n\nFigura 59 - Registo de efeito da comuta\u00e7\u00e3o do rel\u00e9 na alimenta\u00e7\u00e3o de 5V. ....................... 73 \n\nFigura 60 - Acionamento de motor de alimenta\u00e7\u00e3o, em prot\u00f3tipo, atrav\u00e9s de opto-isolador \n\ncom dete\u00e7\u00e3o de passagem por zero. .................................................................................... 75 \n\nFigura 61 - Compara\u00e7\u00e3o entre sinal, temperatura lida e real do sensor de fumos. ............. 76 \n\nFigura 62 - Compara\u00e7\u00e3o entre sinal, temperatura lida e real do sensor ambiente. .............. 76 \n\n\n\nxiii \n\n \n\nFigura 63 - Interface da aplica\u00e7\u00e3o m\u00f3vel para Windows 10, com comandos por Bluetooth.\n\n ............................................................................................................................................. 78 \n\nFigura 64 - Placas constituintes do controlador desenvolvido. ........................................... 81 \n\nFigura 65 - An\u00e1lise de ru\u00eddo em carga de um carregador USB. .......................................... 83 \n\nFigura 66 - Diagrama de blocos dos circuitos de alimenta\u00e7\u00e3o e dete\u00e7\u00e3o de zero com a placa \n\nde controlo/Arduino. ............................................................................................................ 84 \n\nFigura 67 - Esquema de circuito de dete\u00e7\u00e3o de zero com recurso a transformador. ........... 84 \n\nFigura 68 - Esquema el\u00e9trico do circuito de alimenta\u00e7\u00e3o do controlador. .......................... 87 \n\nFigura 69 - Sinal de sa\u00edda do detetor de passagem por zero. ............................................... 88 \n\nFigura 70 - An\u00e1lise de tens\u00e3o \u00e0 entrada do regulador ap\u00f3s retifica\u00e7\u00e3o e filtragem. ............ 89 \n\nFigura 71 - An\u00e1lise da componente AC da tens\u00e3o de sa\u00edda do regulador de tens\u00e3o. .......... 90 \n\nFigura 72 - Teste de instala\u00e7\u00e3o num equipamento de queima de pellets. ........................... 92 \n\nFigura 73 - Fluxograma do ciclo principal de funcionamento do firmware. ....................... 93 \n\nFigura 74 - Fluxograma de in\u00edcio do processo de queima. .................................................. 96 \n\nFigura 75 - Mensagem informativa de in\u00edcio de funcionamento. ....................................... 96 \n\nFigura 76 - Fluxograma do processo de extin\u00e7\u00e3o da queima de pellets. ............................. 98 \n\nFigura 77 - Mensagem de t\u00e9rmino de funcionamento. ........................................................ 98 \n\nFigura 78 - Menu de programa\u00e7\u00e3o de funcionamento. ...................................................... 100 \n\nFigura 79 - Bot\u00f5es do painel de interface. ......................................................................... 101 \n\nFigura 80 - Aquisi\u00e7\u00e3o de dados atrav\u00e9s de comunica\u00e7\u00e3o por infravermelhos e Bluetooth.\n\n ........................................................................................................................................... 103 \n\nFigura 81 - Informa\u00e7\u00e3o no ecr\u00e3 em modo de funcionamento manual. .............................. 104 \n\nFigura 82 - S\u00edmbolo de alarme e informa\u00e7\u00e3o no modo de climatiza\u00e7\u00e3o autom\u00e1tica......... 104 \n\nFigura 83 - Informa\u00e7\u00e3o no LCD durante a utiliza\u00e7\u00e3o de um menu. .................................. 106 \n\nFigura 84 - Fun\u00e7\u00e3o de convers\u00e3o de tens\u00e3o em temperatura. ............................................ 107 \n\nFigura 85 - Fluxograma da fun\u00e7\u00e3o de gest\u00e3o de estado do motor alimentador. ................ 109 \n\nFigura 86 - Fun\u00e7\u00e3o de gest\u00e3o de alimenta\u00e7\u00e3o de pellets. .................................................. 110 \n\nFigura 87 - Fluxograma de controlo por \u00e2ngulo de fase implementado no firmware, ...... 111 \n\nFigura 88 - Fluxograma de eventos interruptivos do controlo dos motores de velocidade \n\nvari\u00e1vel. ............................................................................................................................. 112 \n\nFigura 89 - Atribui\u00e7\u00e3o de valor ao registo de contagem TCNT1. ..................................... 114 \n\nFigura 90 - Encoder de efeito de Hall do motor extrator de fumos. .................................. 114 \n\n \n\n\n\nxiv \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\nxv \n\n \n\nLista de tabelas \n\nTabela 1 - Compara\u00e7\u00e3o de custos anuais para aquecimento de uma moradia. ...................... 3 \n\nTabela 2 - Utilidade e categoria dos diferentes tipos de biocombust\u00edveis [7]. ...................... 7 \n\nTabela 3 - Compara\u00e7\u00e3o do pre\u00e7o e rendimento entre os v\u00e1rios combust\u00edveis para \n\naquecimento [11]. .................................................................................................................. 9 \n\nTabela 4 - Crit\u00e9rios de certifica\u00e7\u00e3o de qualidade de pellets. ............................................... 11 \n\nTabela 5 - Requisitos de um controlador de queima de pellets, sem interface. ................... 39 \n\nTabela 6 - Especifica\u00e7\u00f5es t\u00e9cnicas Ardu\u00edno Uno. ............................................................... 42 \n\nTabela 7 - Especifica\u00e7\u00f5es t\u00e9cnicas Ardu\u00edno Mega 2560. .................................................... 43 \n\nTabela 8 - Especifica\u00e7\u00f5es t\u00e9cnicas da placa de desenvolvimento ChipKIT Uno32. ........... 46 \n\nTabela 9 - An\u00e1lise \u00e0s plataformas de controlo face aos requisitos do projeto. .................... 50 \n\nTabela 10 - Equival\u00eancia entre bot\u00f5es do comando remoto, painel de interface e etiquetas.\n\n ........................................................................................................................................... 103 \n\nTabela 11 - Intervalos de tempo de funcionamento do motor alimentador para os diferentes \n\nn\u00edveis de pot\u00eancia. ............................................................................................................. 110 \n\nTabela 12 - Compara\u00e7\u00e3o de pre\u00e7os do controlador em diferentes m\u00e9todos de produ\u00e7\u00e3o. 118 \n\nTabela 13 - Lista de componentes utilizados no controlador. ........................................... 131 \n\n \n\n  \n\n\n\nxvi \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\nxvii \n\n \n\nLista de siglas \n\nCOP Coefficient of Performance \n\nEEPROM Electrically-Erasable Programmable Read-Only Memory \n\nEMI Electromagnetic Interference \n\nFTDI Future Technology Devices International \n\nGPRS General Packet Radio Service \n\nLCD Liquid-Crystal Display \n\nLED Light Emitting Diode \n\nNTC Negative Temperature Coefficient \n\nPID Proportional Integral Derivative \n\nPWM Pulse-Width Modulation \n\nSMS Short Message Service \n\nSPI Serial Peripheral Interface \n\nTRIAC Triode for Alterning Current \n\nTTL Transistor-Transistor Logic \n\nUSB Universal Serial Bus \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\nxviii \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\nxix \n\n \n\n\u00cdndice \n\nDEDICAT\u00d3RIA III \n\nAGRADECIMENTOS V \n\nRESUMO VII \n\nABSTRACT IX \n\nLISTA DE FIGURAS XI \n\nLISTA DE TABELAS XV \n\nLISTA DE SIGLAS XVII \n\n\u00cdNDICE XIX \n\n1. INTRODU\u00c7\u00c3O 1 \n\n1.1. ENQUADRAMENTO 1 \n\n1.2. OBJETIVOS 5 \n\n1.3. ESTRUTURA DO TRABALHO 5 \n\n2. SISTEMAS DE QUEIMA DE BIOMASSA 7 \n\n2.1. BIOMASSA 7 \n\n2.2. SISTEMAS DE AQUECIMENTO A BIOMASSA 11 \n\n2.2.1. AQUECIMENTO A LENHA 11 \n\n2.2.2. AQUECIMENTO A PELLETS 20 \n\n2.3. CONTROLO DA QUEIMA DE PELLETS 23 \n\n2.3.1. CONTROLADOR 28 \n\n2.3.2. INTERFACE DIRETA 29 \n\n2.3.3. INTERFACE \u00c0 DIST\u00c2NCIA 33 \n\n2.3.4. FUNCIONALIDADES 36 \n\n2.3.5. CONTROLADOR A IMPLEMENTAR 37 \n\n3. SOLU\u00c7\u00d5ES DE CONTROLO 39 \n\n3.1. ARDUINO 40 \n\n3.1.1. ARDUINO UNO 42 \n\n3.1.2. ARDUINO MEGA 2560 43 \n\n3.2. MICROCHIP 44 \n\n3.3. CHIPKIT 45 \n\n3.3.1. CHIPKIT UNO32 46 \n\n3.4. RASPBERRY PI 47 \n\n\n\nxx \n\n \n\n3.5. AN\u00c1LISE COMPARATIVA 49 \n\n4. CONTROLADOR DESENVOLVIDO 53 \n\n4.1. PROT\u00d3TIPO - HARDWARE 55 \n\n4.1.1. CONTROLO DE MOTORES E RESIST\u00caNCIA 55 \n\n4.1.2. INTERFACE E SENSORES 65 \n\n4.1.3. TESTES E RESULTADOS 69 \n\n4.2. CONTROLADOR \u2013 HARDWARE EM PLACA \u00daNICA 78 \n\n4.2.1. ALIMENTA\u00c7\u00c3O DE CONTROLO 82 \n\n4.2.2. TESTES E RESULTADOS 87 \n\n4.3. CONTROLADOR \u2013 FIRMWARE 92 \n\n4.3.1. DESCRI\u00c7\u00c3O DE FUNCIONAMENTO 95 \n\n4.3.2. GEST\u00c3O DA INTERFACE 100 \n\n4.3.3. CONTROLO DO SISTEMA 108 \n\n4.3.4. TESTES E RESULTADOS 116 \n\n4.4. AN\u00c1LISE DE CUSTOS / PRODU\u00c7\u00c3O 117 \n\n5. CONCLUS\u00d5ES E TRABALHOS FUTUROS 119 \n\nREFER\u00caNCIAS 123 \n\nANEXOS 131 \n\n\n\n1 \n\n \n\n1. Introdu\u00e7\u00e3o \n\n1.1. Enquadramento \n\nO conforto t\u00e9rmico \u00e9 uma sensa\u00e7\u00e3o relacionada com o ambiente t\u00e9rmico \n\ncircunjacente, de suma import\u00e2ncia para o nosso bem-estar. Significa na pr\u00e1tica que uma \n\npessoa nestas condi\u00e7\u00f5es n\u00e3o tem a sensa\u00e7\u00e3o de frio nem de calor.  \n\nO Homem necessita de manter a temperatura do seu corpo a cerca de 37\u00baC o que o \n\nobriga a uma procura constante de equil\u00edbrio para com o meio envolvente, que influencia \n\ndiretamente a sua temperatura interna. Um ambiente neutro ou confort\u00e1vel permite que a \n\nprodu\u00e7\u00e3o de calor metab\u00f3lico se equilibre com as trocas de calor com o meio. A busca pelo \n\nconforto t\u00e9rmico est\u00e1 diretamente ligada \u00e0 natureza do Homem. H\u00e1 centenas de milhar de \n\nanos, altura da prova mais concreta de dom\u00ednio do fogo, esta busca traduzia-se numa fogueira \n\nao ar livre. \n\nA tecnologia evoluiu e a busca constante pelo conforto permanece. Facilmente se \n\natingem temperaturas baixas, desconfort\u00e1veis, no inverno. Em alguns locais do mundo, as \n\ntemperaturas s\u00e3o demasiado baixas o ano inteiro, bem longe do conceito de conforto t\u00e9rmico. \n\nEm Portugal, muitos edif\u00edcios t\u00eam um isolamento t\u00e9rmico deficiente, sobretudo os \n\nmais antigos, pelo que manter uma habita\u00e7\u00e3o aquecida \u00e9 essencial, em especial durante o \n\ninverno, altura em que se atingem temperaturas abaixo dos 10\u00baC em qualquer parte do pa\u00eds. \n\nO aquecimento com origem na eletricidade ou em combust\u00edveis f\u00f3sseis tem vindo a tornar-\n\nse demasiado dispendioso e nem todas as habita\u00e7\u00f5es permitem armazenar quantidades de \n\nlenha suficientes que durem uma esta\u00e7\u00e3o. Cada vez mais o custo, a efici\u00eancia energ\u00e9tica e \n\ntamb\u00e9m as preocupa\u00e7\u00f5es ambientais devem ser fatores a ter em conta quando se escolhe um \n\ncombust\u00edvel para aquecimento. Os combust\u00edveis f\u00f3sseis t\u00eam-se caracterizado por uma forte \n\ninstabilidade no pre\u00e7o, motivo pelo qual investir num sistema de aquecimento deste tipo traz \n\nassociado um risco assinal\u00e1vel. A Figura 1 mostra a evolu\u00e7\u00e3o do pre\u00e7o do barril de petr\u00f3leo, \n\nem d\u00f3lares, desde o ano 2000 at\u00e9 ao ano de 2016. \n\n \n\n\n\n2 \n\n \n\n \n\nFigura 1 - Evolu\u00e7\u00e3o do pre\u00e7o do barril de petr\u00f3leo ($USD/Barril) nos \u00faltimos 16 anos [1]. \n\n \n\nPodemos observar varia\u00e7\u00f5es de mais de 100$USD, tendo o barril de petr\u00f3leo chegado \n\na estar cotado a um m\u00e1ximo de 140$USD e registado um pre\u00e7o m\u00ednimo abaixo dos 40$USD. \n\nPara um utilizador que queira aquecer um edif\u00edcio ou habita\u00e7\u00e3o, recorrer a combust\u00edveis \n\nf\u00f3sseis pode tornar-se demasiado dispendioso e inst\u00e1vel uma vez que est\u00e1 \u00e0 merc\u00ea destas \n\noscila\u00e7\u00f5es. \n\nQuer a n\u00edvel governamental quer a n\u00edvel social, tem existido uma consciencializa\u00e7\u00e3o \n\nem termos ambientais que tem levado \u00e0 procura de solu\u00e7\u00f5es ecol\u00f3gicas, eficientes e \n\nrenov\u00e1veis no aquecimento de edif\u00edcios. No mercado de combust\u00edveis para aquecimento \n\ndom\u00e9stico os sistemas alimentados a biomassa t\u00eam vindo a ganhar quota de mercado \n\nrelativamente a outros sistemas. \n\nA necessidade de modernizar os sistemas de queima tradicionais alimentados a \n\nbiomassa lenhosa, fez com que surgissem combust\u00edveis de biomassa densificada, como os \n\npellets, com a vantagem de permitir o funcionamento autom\u00e1tico do sistema de aquecimento \n\ncomo ocorre com alguns sistemas a gas\u00f3leo, g\u00e1s butano ou g\u00e1s natural. \n\nOs pellets s\u00e3o pequenos aglomerados constitu\u00eddos exclusivamente por biomassa \n\nflorestal residual e subprodutos da ind\u00fastria florestal, devidamente triturados e secos [2]. \n\nComo s\u00e3o uma fonte renov\u00e1vel de produ\u00e7\u00e3o nacional, a estabilidade e previsibilidade do \n\npre\u00e7o s\u00e3o garantidas - n\u00e3o est\u00e1 dependente de guerras, conflitos internacionais, etc. - al\u00e9m \n\nde que, devido ao tratamento a que est\u00e1 sujeito na sua transforma\u00e7\u00e3o, a humidade \u00e9 muito \n\nreduzida, permitindo que a combust\u00e3o seja muito mais eficiente e liberte menos fumo que a \n\n\n\n3 \n\n \n\nlenha normal, o que lhe confere um elevado poder calor\u00edfico. Existem ainda outras mais-\n\nvalias na escolha de pellets em vez de outros combust\u00edveis. Uma vez que s\u00e3o produzidos a \n\npartir da limpeza das florestas, contribuem para a redu\u00e7\u00e3o do risco de inc\u00eandio florestal. \n\nReduzem tamb\u00e9m a depend\u00eancia energ\u00e9tica que temos em rela\u00e7\u00e3o a outros pa\u00edses, \n\nbeneficiando a economia nacional. Outra vantagem \u00e9 o facto de serem um combust\u00edvel \n\nmenos poluente do que os combust\u00edveis f\u00f3sseis, pois libertam muito menos mon\u00f3xido de \n\ncarbono e di\u00f3xido de carbono na sua utiliza\u00e7\u00e3o; s\u00e3o considerados um combust\u00edvel neutro em \n\ntermos ambientais uma vez que a quantidade de CO e CO2 libertados na combust\u00e3o \u00e9 \n\nequivalente \u00e0 que a \u00e1rvore absorveu ao longo da sua vida. Os pellets s\u00e3o tamb\u00e9m uma escolha \n\nmais pr\u00e1tica porque s\u00e3o vendidos em sacos, o que facilita o seu transporte e armazenamento \n\n[3]. \n\nEm Portugal a floresta ocupa cerca de 38% do territ\u00f3rio [4], o que oferece vastas \n\n\u00e1reas com os recursos necess\u00e1rios \u00e0 produ\u00e7\u00e3o de pellets. Existem alguns fabricantes \n\nnacionais de pellets que inclusive t\u00eam feito investimentos muito significativos [5]. Desta \n\nforma, os pellets perspetivam-se como uma solu\u00e7\u00e3o ecol\u00f3gica, econ\u00f3mica e sustent\u00e1vel. \n\nOs pellets s\u00e3o bastante menos volumosos do que a lenha - e, portanto, s\u00e3o mais f\u00e1ceis \n\nde armazenar -, t\u00eam um poder calor\u00edfico semelhante a esta e a sua utiliza\u00e7\u00e3o como \n\ncombust\u00edvel torna estes sistemas de aquecimento muito competitivos em termos de custos \n\nde utiliza\u00e7\u00e3o relativamente aos sistemas de aquecimento a combust\u00edveis f\u00f3sseis, eletricidade \n\nou g\u00e1s natural. Exemplo disso \u00e9 o aquecimento de v\u00e1rias divis\u00f5es de uma moradia que n\u00e3o \n\npossua uma lareira. Quando comparados os custos de utiliza\u00e7\u00e3o de um equipamento a pellets \n\ncom os de uma caldeira a g\u00e1s natural, ar condicionado ou um termoventilador, o equipamento \n\na pellets tem um custo de utiliza\u00e7\u00e3o menor que as outras op\u00e7\u00f5es [6]. \n\n \n\nTabela 1 - Compara\u00e7\u00e3o de custos anuais para aquecimento de uma moradia. \n\nCustos Termoventilador \nAr \n\ncondicionado \n\nCaldeira \na g\u00e1s \n\nnatural \n\nSalamandra \na pellets \n\nAquisi\u00e7\u00e3o 120\u20ac 2600\u20ac 1600\u20ac 1400\u20ac \n\nInstala\u00e7\u00e3o 0\u20ac 325\u20ac 175\u20ac 250\u20ac \n\nManuten\u00e7\u00e3o anual 0\u20ac 60\u20ac 30\u20ac 60\u20ac \n\nGasto anual de energia 1263\u20ac 224\u20ac 572\u20ac 304\u20ac \n\n \n\n\n\n4 \n\n \n\nA Tabela 1 cont\u00e9m dados de uma simula\u00e7\u00e3o [6] do custo de aquecimento de uma \n\nmoradia \u2013 3 ou mais divis\u00f5es \u2013 que permitem concluir que os dois equipamentos mais \n\nbaratos para aquecer uma moradia s\u00e3o a salamandra a pellets e o ar condicionado. A \n\ndiferen\u00e7a anual de custo em termos energ\u00e9ticos, entre ambos, \u00e9 de 80\u20ac. Apesar de ainda ser \n\numa diferen\u00e7a consider\u00e1vel, \u00e9 necess\u00e1rio avaliar tamb\u00e9m todas as outras despesas, como a \n\nmanuten\u00e7\u00e3o, aquisi\u00e7\u00e3o e instala\u00e7\u00e3o dos equipamentos para se ter uma ideia do custo a longo \n\nprazo. Na Figura 2 podemos ver a simula\u00e7\u00e3o dos custos de utiliza\u00e7\u00e3o de todos os \n\nequipamentos ao longo de diferentes prazos. \n\n \n\n \n\nFigura 2 - Simula\u00e7\u00e3o de custos de utiliza\u00e7\u00e3o a prazo dos equipamentos para aquecimento [6]. \n\n  \n\n\u00c9 poss\u00edvel concluir que apesar de ser o equipamento com o menor custo de aquisi\u00e7\u00e3o, \n\no termoventilador ultrapassa de imediato todos os outros equipamentos no que respeita aos \n\ncustos de utiliza\u00e7\u00e3o ap\u00f3s 5 anos. A caldeira a g\u00e1s natural mant\u00e9m a sua posi\u00e7\u00e3o de terceiro \n\nequipamento mais caro para os prazos de 2 at\u00e9 10 anos de utiliza\u00e7\u00e3o. O ar condicionado \n\naparece nos primeiros 2 anos como o equipamento com um custo de utiliza\u00e7\u00e3o mais elevado, \n\nmas compensa para prazos mais alargados, tornando-se no equipamento mais barato logo a \n\nseguir \u00e0 salamandra. Esta, aparece desde os 2 anos de utiliza\u00e7\u00e3o como sendo o equipamento \n\nmais barato. Mesmo ap\u00f3s 10 anos, entre os dois equipamentos mais baratos \u00e0 partida, a \n\nsalamandra a pellets e o ar condicionado, a salamandra continua a ser a op\u00e7\u00e3o \n\nfinanceiramente mais vantajosa. Esta vantagem deve-se \u00e0 disparidade do custo de aquisi\u00e7\u00e3o \n\ne instala\u00e7\u00e3o entre os equipamentos onde o equipamento de queima de pellets tem menor \n\ncusto. \n\n2 645 \u20ac\n\n6 553 \u20ac\n\n13 107 \u20ac\n\n3 493 \u20ac\n\n4 347 \u20ac\n\n5 769 \u20ac\n\n2 979 \u20ac\n\n4 347 \u20ac\n\n5 769 \u20ac\n\n2 378 \u20ac\n\n3 472 \u20ac\n\n5 294 \u20ac\n\n0 \u20ac 2 000 \u20ac 4 000 \u20ac 6 000 \u20ac 8 000 \u20ac 10 000 \u20ac 12 000 \u20ac 14 000 \u20ac\n\n2\n\n5\n\n10\n\nCusto (\u20ac)\n\nA\nn\n\no\ns\n\nCustos de utiliza\u00e7\u00e3o a prazo\n\nSalamandra a Pellets\n\nCaldeira a g\u00e1s natural\n\nAr Condicionado\n\nTermoventilador\n\n\n\n5 \n\n \n\nO processo de queima dos pellets para aquecimento dom\u00e9stico difere ligeiramente \n\nem rela\u00e7\u00e3o \u00e0 combust\u00e3o de lenha. Nestes sistemas a pellets a efici\u00eancia da queima \u00e9 \n\nsuportada pela presen\u00e7a de eletr\u00f3nica de controlo embebida que garante o in\u00edcio, a \n\ncontinuidade da queima e a pot\u00eancia final regulada em calor, pretendida pelo utilizador. \n\nCom vasto conhecimento de mercado, a empresa MVM \u2013 Metalomec\u00e2nica V\u00edctor \n\nMonteiro, Lda, produz e comercializa sistemas de aquecimento a lenha e pellets - caldeiras, \n\nsalamandras, bailarinas e recuperadores de calor - mas necessita de importar toda a eletr\u00f3nica \n\nde controlo associada. Esta necessidade deu origem ao desafio lan\u00e7ado pela empresa: ser \n\ndesenvolvido um controlador de origem nacional, com um custo competitivo. \n\n \n\n1.2. Objetivos \n\nAceite o desafio, o objetivo deste projeto foi desenvolver um controlador de queima \n\nde pellets com um custo competitivo relativamente a outras op\u00e7\u00f5es existentes, partindo de \n\numa an\u00e1lise do sistema de queima e de um estudo de mercado para avaliar quais as melhores \n\nop\u00e7\u00f5es e caracter\u00edsticas que este dever\u00e1 contemplar, n\u00e3o descurando a possibilidade de, no \n\nfuturo, acrescentar funcionalidades com relativa facilidade. \n\nO desenvolvimento efetuado engloba a componente de controlo \u2013 firmware \u2013, \n\nhardware e ensaios num equipamento comercializado pela MVM. \n\n \n\n1.3. Estrutura do trabalho \n\nEste relat\u00f3rio \u00e9 composto por 5 sec\u00e7\u00f5es que distinguem as v\u00e1rias etapas de estudo, \n\npesquisa e desenvolvimento do trabalho. \n\nA sec\u00e7\u00e3o 1 consiste numa introdu\u00e7\u00e3o ao tema do desenvolvimento do projeto, a sua \n\nmotiva\u00e7\u00e3o e objetivos. \n\nNa sec\u00e7\u00e3o 2 \u00e9 feita uma apresenta\u00e7\u00e3o do estudo efetuado acerca dos sistemas de \n\nqueima de biomassa, aprofundado para o caso concreto deste trabalho que s\u00e3o os sistemas \n\n\n\n6 \n\n \n\nde queima de pellets. \u00c9 tamb\u00e9m feita uma descri\u00e7\u00e3o de v\u00e1rias op\u00e7\u00f5es de controlo existentes \n\nno mercado e finaliza-se com a ideia do controlador a ser realizado. \n\nA compara\u00e7\u00e3o e an\u00e1lise de plataformas de controlo que melhor se adequam \u00e0 \n\nrealiza\u00e7\u00e3o deste projeto \u00e9 feita na sec\u00e7\u00e3o 3. \n\nO desenvolvimento de todo o hardware e firmware do controlador bem como dos \n\ntestes efetuados \u00e9 explicado ao longo da sec\u00e7\u00e3o 4, onde tamb\u00e9m \u00e9 feita uma an\u00e1lise aos \n\ncustos de produ\u00e7\u00e3o do controlador. \n\nPor fim, na sec\u00e7\u00e3o 5, s\u00e3o apresentadas conclus\u00f5es relativas ao trabalho desenvolvido \n\ne algumas ideias de desenvolvimento futuro. \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n7 \n\n \n\n2. Sistemas de queima de biomassa \n\n2.1. Biomassa \n\nA energia proveniente da biomassa \u00e9 uma das formas de energia utilizada h\u00e1 mais \n\ntempo pelo Homem, tanto para a produ\u00e7\u00e3o de calor como para o aquecimento de alimentos, \n\npela sua abund\u00e2ncia e facilidade de aproveitamento. Cerca de 80% da oferta mundial de \n\nenergias renov\u00e1veis deriva do aproveitamento de biomassa [7]. \n\nDefinida pela Diretiva Europeia 2009/28/CE de 23 de abril, a biomassa \u00e9 \u201ca fra\u00e7\u00e3o \n\nbiodegrad\u00e1vel de produtos, res\u00edduos e detritos de origem biol\u00f3gica provenientes da \n\nagricultura (incluindo subst\u00e2ncias de origem vegetal e animal), da explora\u00e7\u00e3o florestal e de \n\nind\u00fastrias afins, incluindo da pesca e da aquicultura, bem como a fra\u00e7\u00e3o biodegrad\u00e1vel dos \n\nres\u00edduos industriais e urbanos\u201d [8]. \n\nAtualmente, atrav\u00e9s de v\u00e1rias tecnologias de convers\u00e3o, \u00e9 poss\u00edvel obter da biomassa \n\nbiocombust\u00edveis s\u00f3lidos, l\u00edquidos e gasosos, capazes de gerar energia t\u00e9rmica, energia \n\nmec\u00e2nica e energia el\u00e9trica. A Tabela 2 mostra diferentes utilidades dos tipos de \n\nbiocombust\u00edveis existentes. \n\n \n\nTabela 2 - Utilidade e categoria dos diferentes tipos de biocombust\u00edveis [7]. \n\nTipo de biocombust\u00edvel Categoria Utilidade \n\nS\u00f3lido \n\nLenha, carv\u00e3o vegetal, \n\nres\u00edduos florestais e \n\nagr\u00edcolas, fra\u00e7\u00e3o org\u00e2nica \n\ndo lixo, restos de madeira \n\nQueima em lareiras, \n\nfog\u00f5es, braseiros (para \n\ngera\u00e7\u00e3o de calor), queima \n\nindustrial (para gera\u00e7\u00e3o de \n\nvapor e eletricidade) \n\nL\u00edquido Biodiesel, etanol, metanol \nCombust\u00edvel para \n\nautom\u00f3veis \n\nGasoso Biog\u00e1s \nQueima (para gera\u00e7\u00e3o de \n\ncalor e eletricidade) \n\n \n\nA energia t\u00e9rmica gerada a partir da biomassa florestal traz importantes benef\u00edcios \n\nsociais, econ\u00f3micos e ambientais. Na Uni\u00e3o Europeia, em 2012, o consumo de biomassa \n\npara a produ\u00e7\u00e3o de calor representou 74,7Mtep. Em Portugal, a lenha \u00e9 a fonte de energia \n\nmais utilizada no sector do aquecimento ambiente e com menor custo unit\u00e1rio. \u00c9 utilizada \n\n\n\n8 \n\n \n\nem 54,7% dos alojamentos que utilizam caldeiras a biomassa para aquecimento de \u00e1guas \n\nsanit\u00e1rias [9]. \n\n \n\n? Lenha \n\nA biomassa lenhosa \u00e9 vulgarmente conhecida como lenha. Inicia o seu processo de \n\ncombust\u00e3o a cerca de 200\u00baC, temperatura \u00e0 qual se come\u00e7a a decompor em gases e carv\u00e3o. \n\nDurante a decomposi\u00e7\u00e3o parte dos gases s\u00e3o queimados, chegando a atingir temperaturas de \n\n700\u00baC, altura em que \u00e9 necess\u00e1ria uma grande quantidade de ar para manter a combust\u00e3o. \n\nSeguidamente inicia-se a \u00faltima fase do processo de combust\u00e3o, a queima do carv\u00e3o, onde \n\na quantidade de ar necess\u00e1ria \u00e0 combust\u00e3o diminui bastante. \n\n \n\n? Pellets \n\nOs pellets, apresentados na Figura 3, s\u00e3o considerados biomassa pois s\u00e3o pequenos \n\naglomerados cil\u00edndricos constitu\u00eddos apenas por biomassa florestal, devidamente triturada e \n\nseca. Ao contr\u00e1rio da lenha que \u00e9 normalmente tratada como biomassa lenhosa, os pellets \n\nn\u00e3o t\u00eam qualquer designa\u00e7\u00e3o espec\u00edfica. S\u00e3o uma fonte de energia renov\u00e1vel produzida a \n\npartir da limpeza das florestas e desperd\u00edcios da ind\u00fastria da madeira, e devido \u00e0 produ\u00e7\u00e3o \n\nnacional existente, tal como referido anteriormente, \u00e9 garantida a estabilidade dos pre\u00e7os. \n\n \n\n \n\nFigura 3 - Pellets [10]. \n\n \n\nOs pellets t\u00eam j\u00e1 alguma relev\u00e2ncia no panorama t\u00e9rmico e at\u00e9 el\u00e9trico, nacional e \n\neuropeu, apresentando-se a produ\u00e7\u00e3o destas energias como uma alternativa econ\u00f3mica e \n\n\n\n9 \n\n \n\nenergeticamente eficiente. S\u00e3o produzidos para os segmentos de mercados industrial, \n\ncomercial e residencial. \n\nDevido ao tratamento na sua transforma\u00e7\u00e3o a humidade \u00e9 muito reduzida - abaixo de \n\n1% - permitindo assim que a combust\u00e3o seja muito mais eficiente e liberte menos fumo que \n\na lenha, garantindo um elevado poder calor\u00edfico. O Poder Calor\u00edfico Inferior (PCI), que \n\nquantifica a energia realmente dispon\u00edvel por unidade de massa em forma de calor, ap\u00f3s \n\nevapora\u00e7\u00e3o da \u00e1gua, \u00e9 de 14,4MJ/kg na lenha. Nos pellets, o PCI \u00e9 de 18,0MJ/kg, o que \n\ncorresponde a 5 kWh/kg [2]. \n\nO elevado rendimento dos aparelhos de combust\u00e3o de pellets em conjunto com seu \n\npoder calor\u00edfico fazem deles uma solu\u00e7\u00e3o muito atrativa. Em termos concretos, numa r\u00e1pida \n\nan\u00e1lise \u00e9 poss\u00edvel verificar que al\u00e9m da vantagem financeira na aquisi\u00e7\u00e3o de um aparelho de \n\ncombust\u00e3o deste tipo de biomassa, demonstrada na sec\u00e7\u00e3o 1.1, o pre\u00e7o por unidade de \n\nenergia, kWh, tamb\u00e9m \u00e9 bastante competitivo. A Tabela 3 mostra um resumo dos pre\u00e7os, \n\nrendimento e poder calor\u00edfico inferior de v\u00e1rios tipos de combust\u00edveis para aquecimento. \n\n \n\nTabela 3 - Compara\u00e7\u00e3o do pre\u00e7o e rendimento entre os v\u00e1rios combust\u00edveis para aquecimento [11]. \n\n Pre\u00e7o Rendimento PCI \n\nLenha 0,13 \u20ac/kg 70% 14,4 MJ/kg \n\nPellets 0,22 \u20ac/kg 85% 18,0 MJ/kg \n\nEletricidade - bomba de calor 0,171 \u20ac/kWh 2,5 COP* - \n\nG\u00e1s natural 0,081 \u20ac/kWh 85% - \n\nGas\u00f3leo 1,35 \u20ac/L 85% 42,9 MJ/kg \n\nEletricidade 0,171 \u20ac/kWh 100% - \n\nG\u00e1s propano 2,172 \u20ac/kg 85% 46,3 MJ/kg \n*COP: Coeficiente de Performance. \n\n \n\nOs dados da tabela anterior permitem-nos avaliar o custo por kWh t\u00e9rmico, que se \n\ntraduz diretamente no custo do aquecimento. A Figura 4, mostra uma an\u00e1lise comparativa \n\ndo custo do kWh t\u00e9rmico para aquecimento [12]. \n\n \n\n\n\n10 \n\n \n\n \n\nFigura 4 - Comparativo do custo do kWh t\u00e9rmico para aquecimento. \n\n \n\nOs pellets aparecem numa posi\u00e7\u00e3o bastante competitiva quando comparados com o \n\ncombust\u00edvel de custo mais diminuto, a lenha, onde a diferen\u00e7a n\u00e3o ultrapassa os 0,006\u20ac por \n\nkWh. Se \u00e9 verdade que esta pequena diferen\u00e7a econ\u00f3mica pode ser decisiva para algumas \n\npessoas, tamb\u00e9m \u00e9 verdade que o facto de terem armazenamento e transporte facilitado por \n\nserem vendidos em sacos em qualquer grande superf\u00edcie comercial tem muita import\u00e2ncia, \n\nespecialmente se o destino for aquecer um apartamento, onde regra geral o espa\u00e7o de \n\narmazenamento \u00e9 reduzido. Um equipamento de queima deste tipo de biomassa oferece \n\ntamb\u00e9m habitualmente uma autonomia superior a 25h. \n\nOutra vantagem \u00e9 o facto de ser o combust\u00edvel s\u00f3lido mais limpo, onde a emiss\u00e3o de \n\ncompostos qu\u00edmicos como \u00f3xidos de nitrog\u00e9nio (NOx) ou compostos org\u00e2nicos vol\u00e1teis \u00e9 \n\nmuito reduzida, o que torna os pellets uma das formas de aquecimento menos poluentes \n\ndispon\u00edveis no mercado [13]. \n\nEm 2011, foram introduzidas novas normas Europeias no sistema de certifica\u00e7\u00e3o para \n\nbiocombust\u00edveis s\u00f3lidos. Entre elas est\u00e1 a norma onde se incluem os pellets de madeira, EN \n\n14961-2, que veio substituir as normas nacionais. Esta norma inclui duas classes de \n\nqualidade, A1 e A2. Os produtos de qualidade A1 produzem menor quantidade de cinza e \n\ns\u00e3o usados normalmente em condi\u00e7\u00f5es dom\u00e9sticas enquanto os produtos de qualidade A2 \n\nproduzem mais cinza e s\u00e3o utilizados em aplica\u00e7\u00f5es industriais [14]. Os crit\u00e9rios para \n\nqualifica\u00e7\u00e3o dos pellets incluem a sua densidade, tamanho, comportamento de fus\u00e3o das \n\n0,046 \u20ac 0,052 \u20ac\n0,068 \u20ac\n\n0,095 \u20ac\n\n0,160 \u20ac\n0,170 \u20ac\n\n0,200 \u20ac\n\n0,00 \u20ac\n\n0,05 \u20ac\n\n0,10 \u20ac\n\n0,15 \u20ac\n\n0,20 \u20ac\n\n0,25 \u20ac\n\nLenha Pellets Bomba de\nCalor\n\nG\u00e1s Natural Gas\u00f3leo Eletricidade G\u00e1s Propano\n\nCusto do kWh t\u00e9rmico para aquecimento\n\n\n\n11 \n\n \n\ncinzas e temperatura de amolecimento da cinza. A Tabela 4 mostra as diferen\u00e7as dos \n\nprincipais crit\u00e9rios para a classifica\u00e7\u00e3o de qualidade A1 ou A2, segundo a norma. \n\n \n\nTabela 4 - Crit\u00e9rios de certifica\u00e7\u00e3o de qualidade de pellets. \n\n A1 A2 \n\nComprimento (mm) ?40 ?40 \n\nFinos (%, massa) ?1 ?1 \n\nTeor de Cinza (%, massa) ?0,7 ?1,5 \n\nTemp. fus\u00e3o de cinza (\u00baC) ?1200 ?1100 \n\n \n\n Relativamente ao comprimento, est\u00e1 estipulado que 1% do total dos pellets pode ser \n\nmaior do que 40mm desde que n\u00e3o exceda os 45mm de comprimento. O teor de cinza \u00e9 \n\nanalisado a 550\u00baC e a determina\u00e7\u00e3o da sua temperatura de fus\u00e3o \u00e9 feita a 815\u00baC [15]. Do \n\nponto de vista do controlo, \u00e9 indiferente a qualidade dos pellets utilizados. No entanto, para \n\nuso dom\u00e9stico \u00e9 prefer\u00edvel utilizar pellets de qualidade superior uma vez que quanto mais \n\nelevada for a qualidade do combust\u00edvel, menos quantidade de cinza \u00e9 produzida. \n\n \n\n2.2. Sistemas de aquecimento a Biomassa \n\n2.2.1. Aquecimento a lenha \n\n? Lareira aberta \n\nUma lareira aberta, representada na Figura 5, \u00e9 a forma mais antiga de obter energia \n\nt\u00e9rmica a partir da biomassa no sector residencial. Numa lareira aberta n\u00e3o h\u00e1 controlo sobre \n\na combust\u00e3o a n\u00e3o ser atrav\u00e9s da quantidade de lenha nela colocada. \n\n \n\n\n\n12 \n\n \n\n \n\nFigura 5 - Lareira aberta encastrada [16]. \n\n  \n\nConstitu\u00edda por uma c\u00e2mara de combust\u00e3o, normalmente em tijolo refrat\u00e1rio, \n\ndiretamente ligada \u00e0 chamin\u00e9, a lareira aberta cl\u00e1ssica est\u00e1 normalmente encastrada numa \n\nparede. \u00c9 extremamente ineficiente al\u00e9m de ser nociva para a sa\u00fade pois a queima da lenha \n\nconsome o ar existente e liberta poluentes atmosf\u00e9ricos para o ar interior. \n\nAs lareiras abertas mais recentes podem estar em qualquer espa\u00e7o que tenha uma \n\nchamin\u00e9 vertical, como ilustra a Figura 6. \n\n \n\n \n\nFigura 6 - Lareira aberta no centro de uma divis\u00e3o [17]. \n\n \n\nA sua efici\u00eancia n\u00e3o excede os 10% pois o calor resultante \u00e9 apenas o irradiado pelo \n\nfogo e pelos tijolos refrat\u00e1rios. Tudo o resto \u00e9 perdido pela chamin\u00e9 e quanto mais \u201cfuma\u201d a \n\n\n\n13 \n\n \n\nlareira, mais depressa sobe por ela o calor que \u00e9 suposto ser aproveitado, criando uma \n\ncorrente de ar frio que entra na c\u00e2mara de combust\u00e3o, \u00e9 aquecido e sobe pela chamin\u00e9. \n\nNeste tipo de sistema apenas se conseguem aquecer as zonas mais pr\u00f3ximas. Uma \n\nlareira normal precisa de 80 a 300m3/h de ar para a queima de lenha, o que corresponde a \n\nrenovar o ar de uma divis\u00e3o v\u00e1rias vezes por hora. A renova\u00e7\u00e3o \u00e9 feita pelo ar frio que entra \n\npelas frestas das portas e janelas um pouco por toda a habita\u00e7\u00e3o, arrefecendo-a. Se n\u00e3o \n\nhouver renova\u00e7\u00e3o de ar da divis\u00e3o em que se encontra, a lareira p\u00f5e em perigo a sa\u00fade dos \n\nutilizadores uma vez que devido \u00e0 queima liberta mon\u00f3xido de carbono, g\u00e1s altamente t\u00f3xico \n\ne cuja inala\u00e7\u00e3o \u00e9 mortal.  \n\nSegundo um estudo apresentado pela Universidade de Aveiro, a combust\u00e3o de \n\nlareiras \u00e9 respons\u00e1vel por cerca de 20% das emiss\u00f5es de part\u00edculas para a atmosfera devido \n\n\u00e0 combust\u00e3o resid\u00eancial, causas de, por exemplo, problemas respirat\u00f3rios [18]. \n\nFace \u00e0 evolu\u00e7\u00e3o tecnol\u00f3gica, este tipo de sistema para aquecimento tornou-se \n\ncompletamente obsoleto, motivo pelo qual s\u00f3 as lareiras mais antigas resistem e dessas \n\nmuitas n\u00e3o s\u00e3o utilizadas. \n\n \n\n? Recuperador de calor \n\nUma evolu\u00e7\u00e3o da ineficiente e cl\u00e1ssica lareira \u00e9 o recuperador de calor. Um \n\nrecuperador de calor \u00e9 um equipamento que se pode instalar numa lareira, uma vez que uma \n\nlareira \u00e9, por defini\u00e7\u00e3o, um espa\u00e7o vazio que serve o prop\u00f3sito da queima de lenha. Com um \n\nrecuperador, segundo informa\u00e7\u00f5es dadas por alguns fabricantes [19], o calor produzido \u00e9 \n\naproveitado at\u00e9 70% enquanto o consumo de lenha diminui at\u00e9 4 vezes [20], o que representa \n\numa grande melhoria da efici\u00eancia relativamente \u00e0 lareira. O sistema de recupera\u00e7\u00e3o de calor \n\nconsiste na circula\u00e7\u00e3o do ar ambiente num circuito fechado impedindo que este se misture \n\ncom o ar da c\u00e2mara de combust\u00e3o e escape pela chamin\u00e9. Tem ainda a vantagem de ser \n\nposs\u00edvel canalizar parte deste ar quente para outras divis\u00f5es do edif\u00edcio. A  Figura 7 \n\nrepresenta o esquema de fluxos de ar de um recuperador de calor. \n\n \n\n\n\n14 \n\n \n\n \n\nFigura 7 - Esquema de fluxos de ar de um recuperador de calor [21]. \n\n \n\nNeste tipo de equipamento, o ar aquecido circula atrav\u00e9s de uma c\u00e2mara de \n\naquecimento, normalmente em chapa de a\u00e7o soldada ou ferro fundido, totalmente estanque, \n\nsem qualquer comunica\u00e7\u00e3o com o compartimento dos fumos. S\u00e3o fabricados com uma porta \n\nde vidro cer\u00e2mico de modo a difundir o calor, fechar o equipamento e aumentar o rendimento \n\nda combust\u00e3o, tornando-a mais limpa devido ao decr\u00e9scimo da liberta\u00e7\u00e3o de poluentes para \n\no local que est\u00e1 a ser aquecido, como o mon\u00f3xido de carbono. Por estar totalmente fechado, \n\ndeixa de haver inconvenientes como o risco de contacto direto com o fogo, a crepita\u00e7\u00e3o, \n\ncinzas e fumo. \n\nUm recuperador de calor tem duas correntes de ar: uma para a queima e uma do \n\naquecimento ao ar. O ar da c\u00e2mara de combust\u00e3o resultante da queima de lenha, ao aquecer, \n\nsobe e sai diretamente pela chamin\u00e9. Este ar \u00e9 normalmente renovado atrav\u00e9s de uma entrada \n\nde ar exterior - no exterior da casa ou situada noutra divis\u00e3o - \u00e0 divis\u00e3o em que o aparelho \n\nse encontra, criando um fluxo de ar. Aquando da instala\u00e7\u00e3o destes equipamentos em lareiras \n\nj\u00e1 existentes, onde n\u00e3o existe outro local para a entrada de ar, a renova\u00e7\u00e3o de ar da c\u00e2mara \n\nde combust\u00e3o pode ser feita atrav\u00e9s do ar da pr\u00f3pria divis\u00e3o, como no caso apresentado na \n\nFigura 7. A entrada de ar para a c\u00e2mara de combust\u00e3o \u00e9 controlada manualmente atrav\u00e9s de \n\numa pequena porta localizada na frente do recuperador. Ao controlar a entrada de ar, \n\nconseguimos controlar a queima da lenha e, por consequ\u00eancia, o calor gerado. \n\nO aquecimento da divis\u00e3o \u00e9 feito ou pela convec\u00e7\u00e3o natural ou por circula\u00e7\u00e3o \n\nfor\u00e7ada. O recuperador de calor \u00e9 dotado de uma entrada de ar na parte inferior, por onde o \n\n\n\n15 \n\n \n\nar frio entra para a c\u00e2mara de aquecimento e uma sa\u00edda de ar na zona superior, por onde sai \n\no ar j\u00e1 aquecido pelas paredes da c\u00e2mara. Esta corrente de ar pode ser totalmente natural \n\natrav\u00e9s do processo de convec\u00e7\u00e3o ou pode ser for\u00e7ada, com a presen\u00e7a de ventiladores. Ao \n\nfor\u00e7ar o ar a circular, as paredes da c\u00e2mara de aquecimento arrefecem. Ao arrefecerem, mais \n\ncalor v\u00e3o retirar \u00e0 queima, logo menos calor ser\u00e1 perdido pela chamin\u00e9, aumentando ainda \n\nmais o rendimento. Este processo est\u00e1 ilustrado na Figura 8. \n\n \n\n \n\nFigura 8 - Corte lateral de um sistema recuperador de calor ventilado [22]. \n\n \n\nOs sistemas que extraem o ar da c\u00e2mara de aquecimento trabalham em depress\u00e3o \u2013 \n\nexaustores - enquanto que trabalham em press\u00e3o - insufladores - os sistemas cujo ar \u00e9 \n\ninsuflado. Se trabalhar em press\u00e3o o sistema necessita de um c\u00e1rter, tamb\u00e9m conhecido como \n\ncarenagem, que serve como caixa de ar. O tamanho e pot\u00eancia dos ventiladores exaustores \n\nou insufladores devem ser adequados \u00e0 \u00e1rea de ferro exposto ao fogo [23]. \n\nN\u00e3o faz sentido, nos sistemas com ventilador, a circula\u00e7\u00e3o do ar ser for\u00e7ada \n\nimediatamente quando a queima come\u00e7a pois iria atrasar o aquecimento das paredes da \n\nc\u00e2mara. O mesmo sucede quando se pretende extinguir a chama, situa\u00e7\u00e3o onde se pretende \n\naproveitar o calor remanescente. Para este efeito, usa-se um sistema eletr\u00f3nico ou \n\neletromec\u00e2nico simples com um term\u00f3stato que faz acionar o ventilador. Este termostato \u00e9 \n\nregulado manualmente pelo utilizador para permitir definir a temperatura a partir da qual se \n\npretende que o ventilador ligue e desligue. \n\n\n\n16 \n\n \n\nExistem ainda recuperadores de calor que al\u00e9m de aquecerem o ar ambiente, \n\nconseguem distribuir o calor pela casa atrav\u00e9s fluidos t\u00e9rmicos. Estes recuperadores podem \n\nfuncionar de forma aut\u00f3noma ou interligados com outros sistemas de aquecimento central - \n\ngeot\u00e9rmico, aerot\u00e9rmico ou solar. O fluido aquecido circula por radiadores ou piso radiante \n\npara dissipar o calor para as outras divis\u00f5es da habita\u00e7\u00e3o. O aquecimento de \u00e1guas sanit\u00e1rias \n\ntamb\u00e9m pode ser feito, com este sistema, de modo independente ou interligado com sistemas \n\nde pain\u00e9is solares, p. ex. como mostra a Figura 9. \n\n \n\n \n\nFigura 9 - Sistema de recuperador de calor interligado com \u00e1guas sanit\u00e1rias [24]. \n\n \n\n? Salamandra \n\nAs salamandras s\u00e3o equipamentos completamente fechados, ideais para aquecer \n\nespa\u00e7os mais pequenos ou para instalar em s\u00edtios onde n\u00e3o existe chamin\u00e9 vertical. Quando \n\ncomparados aos recuperadores de calor, s\u00e3o equipamentos mais baratos e podem ser \n\ninstalados em qualquer divis\u00e3o sem necessidade de encastre numa parede. \n\nOs modelos mais antigos n\u00e3o eram nada mais do que uma lareira fechada, sem \n\nqualquer tecnologia ou controlo, como mostra a Figura 10. Atualmente, as salamandras \n\nconseguem ter todas as caracter\u00edsticas e op\u00e7\u00f5es de um recuperador de calor com um \n\nrendimento muito semelhante. \n\n \n\n\n\n17 \n\n \n\n \n\nFigura 10 - Salamandra t\u00edpica, com aquecimento por irradia\u00e7\u00e3o [25]. \n\n \n\nConstru\u00eddas em a\u00e7o ou em ferro fundido, as salamandras mais antigas aquecem o ar \n\nambiente apenas por irradia\u00e7\u00e3o, onde todo o corpo do equipamento \u00e9 aquecido pelo calor da \n\ncombust\u00e3o. O rendimento destes equipamentos varia entre os 50 e os 70%. \n\nAtualmente existem salamandras com a particularidade de recuperar o g\u00e1s libertado \n\nquando as achas - bocados de lenha - s\u00e3o consumidas e utiliz\u00e1-lo como combust\u00edvel, \n\nchamadas salamandras com dupla combust\u00e3o. Conseguem rendimentos muito elevados, \u00e0 \n\nvolta de 80%, tendo duas chamas diferentes na fornalha - a chama relacionada com as achas \n\ne a chama relacionada com a recupera\u00e7\u00e3o do g\u00e1s. Uma vez que 75% do poder energ\u00e9tico da \n\nmadeira prov\u00e9m do g\u00e1s que cont\u00e9m, este aproveitamento faz da salamandra de dupla \n\ncombust\u00e3o um aparelho muito ecol\u00f3gico e eficiente. \n\nOutro tipo de salamandra, conhecida como salamandra de massa, armazena o calor \n\nproduzido pela combust\u00e3o da madeira e restitui-o ao longo do dia. S\u00e3o fabricadas \u00e0 base de \n\nmateriais como a faian\u00e7a, tijolo refrat\u00e1rio, rochas vulc\u00e2nicas ou pedra. Por terem capacidade \n\nde acumular calor, conseguem atingir rendimentos de entre 70% e os 85%. Segundo \n\ninforma\u00e7\u00f5es de uma cadeia revendedora, a autonomia destes aparelhos pode chegar a 20h, \n\nsendo necess\u00e1rio carregar a salamandra ao longo do dia [26]. \n\nTamb\u00e9m as salamandras possibilitam a recupera\u00e7\u00e3o de calor, tendo a possibilidade \n\nde distribuir parte dele por v\u00e1rias divis\u00f5es de uma habita\u00e7\u00e3o, como acontece com os \n\nrecuperadores. O corte lateral de uma salamandra com recupera\u00e7\u00e3o de calor \u00e9 ilustrado na \n\nFigura 11, onde \u00e9 poss\u00edvel identificar as zonas de entrada e sa\u00edda de ar, bem como a zona \n\nonde ocorre o seu aquecimento. \n\n\n\n18 \n\n \n\n \n\n \n\nFigura 11 - Corte lateral de uma salamandra com recupera\u00e7\u00e3o de calor [23]. \n\n \n\nAo compararmos os equipamentos representados na Figura 8 e na Figura 11, \n\npodemos observar que n\u00e3o existem diferen\u00e7as entre uma salamandra e um recuperador de \n\ncalor em termos de processo. \n\nAlguns fabricantes t\u00eam modelos em que o fumo passa duas vezes na c\u00e2mara de \n\ncombust\u00e3o de modo a aumentar o poder de recupera\u00e7\u00e3o do aparelho, melhorando assim a \n\nsua efici\u00eancia. \n\nExistem tamb\u00e9m modelos de salamandra com forno. Isto significa que podem ser - e \n\nnormalmente s\u00e3o - instaladas numa cozinha, permitindo utilizar o forno para cozinhar \n\nalimentos enquanto aquecem a divis\u00e3o. \n\n \n\n? Caldeira \n\nUma caldeira tem um m\u00e9todo de aquecimento de ambiente diferente dos sistemas \n\nanteriormente mencionados. Em vez de aquecer o ar, a caldeira aquece exclusivamente um \n\nfluido t\u00e9rmico que deve respeitar uma s\u00e9rie de requisitos como ter uma boa estabilidade \n\nt\u00e9rmica, n\u00e3o atacar quimicamente o material onde circula, ter um baixo ponto de congela\u00e7\u00e3o, \n\nbaixa press\u00e3o de vapor e viscosidade, alta condutibilidade t\u00e9rmica, n\u00e3o ser t\u00f3xico nem ter \n\n\n\n19 \n\n \n\nodor forte, etc. Os fluidos mais utilizados para este fim s\u00e3o a \u00e1gua, o vapor ou o \u00f3leo t\u00e9rmico. \n\nA escolha depende da temperatura de funcionamento, press\u00e3o e pot\u00eancia exigidas, \n\nestabilidade e capacidade t\u00e9rmica, viscosidade, boa compatibilidade com metais e ligas, \n\nentre outras. \n\nO calor da combust\u00e3o, numa caldeira, \u00e9 utilizado para aquecer serpentinas met\u00e1licas \n\na altas temperaturas. Uma bomba hidr\u00e1ulica for\u00e7a a circula\u00e7\u00e3o do fluido t\u00e9rmico por essas \n\nserpentinas, aquecendo-o. Um esquema de uma caldeira, em corte lateral, pode ser \n\nobservado na Figura 12. \n\n \n\n \n\nFigura 12 - Corte lateral de esquema de uma caldeira [27]. \n\n \n\nAs divis\u00f5es da habita\u00e7\u00e3o s\u00e3o aquecidas pela circula\u00e7\u00e3o do fluido t\u00e9rmico pelos \n\nsistemas radiadores existentes, que podem incluir radiadores de parede como na Figura 13, \n\npiso radiante ou transferir o calor para um sistema de aquecimento e armazenamento de \n\n\u00e1guas sanit\u00e1rias. \n\n \n\n\n\n20 \n\n \n\n \n\nFigura 13 - Esquema de um sistema de aquecimento dom\u00e9stico a caldeira [28]. \n\n \n\n2.2.2. Aquecimento a pellets \n\n\u00c0 exce\u00e7\u00e3o da lareira aberta, todos os sistemas anteriormente descritos t\u00eam uma \n\nvers\u00e3o cujo combust\u00edvel s\u00e3o pellets, em vez da lenha.  \n\nO aquecimento a pellets tem atra\u00eddo cada vez mais consumidores. A Figura 14 mostra \n\na evolu\u00e7\u00e3o do mercado nacional de pellets. \n\n \n\n \n\nFigura 14 - Evolu\u00e7\u00e3o do mercado nacional de pellets [9]. \n\n \n\n627 635\n689\n\n903\n\n43 43 73\n123\n\n584 600 622\n776\n\n0\n\n200\n\n400\n\n600\n\n800\n\n1000\n\n2010 2011 2012 2013\n\nk\nto\n\nn\n\nEvolu\u00e7\u00e3o do mercado nacional de pellets\n\nProdu\u00e7\u00e3o Consumo Interno Exporta\u00e7\u00e3o\n\n\n\n21 \n\n \n\nEntre 2010 e 2013 verificou-se uma subida consider\u00e1vel na produ\u00e7\u00e3o e na exporta\u00e7\u00e3o \n\nde pellets. No entanto, \u00e9 no consumo interno que a subida \u00e9 mais acentuada: em tr\u00eas anos \n\nquase triplicou, passando de 43 kton para 123 kton. Em 2014 houve um aumento de produ\u00e7\u00e3o \n\npara 1Mton e o consumo interno atingiu 200kton dos quais 60% representam o consumo no \n\nsector dom\u00e9stico [9]. Estes dados revelam que os consumidores est\u00e3o a apostar nos sistemas \n\nde queima de pellets. \n\nNa Figura 15 podemos visualizar o esquema t\u00edpico de uma salamandra a pellets. \n\n \n\n \n\nFigura 15 - Corte lateral de uma salamandra a pellets [29]. \n\n \n\nOs pellets s\u00e3o armazenados num dep\u00f3sito, normalmente situado acima de um fuso \n\nsem-fim. A gravidade faz os pellets ca\u00edrem para o fuso que, ao rodar, os transporta para a \n\nc\u00e2mara de combust\u00e3o. Al\u00e9m de transportados, s\u00e3o tamb\u00e9m comprimidos na c\u00e2mara. Este \n\ntransporte e compress\u00e3o s\u00e3o acionados por um motor que faz rodar o fuso. Quando a c\u00e2mara \n\nde combust\u00e3o est\u00e1 devidamente carregada, a igni\u00e7\u00e3o \u00e9 feita atrav\u00e9s de uma resist\u00eancia \n\nel\u00e9trica, incandescente, que se desliga quando se inicia a combust\u00e3o. A partir deste momento, \n\n\n\n22 \n\n \n\ns\u00e3o a rota\u00e7\u00e3o do ventilador que controla a entrada de ar e a velocidade do fuso de transporte \n\nque controlam a combust\u00e3o. No caso da Figura 15, o ventilador que controla a admiss\u00e3o de \n\nar \u00e9 o ventilador de escape, algo que \u00e9 comum a v\u00e1rios modelos de salamandra a pellets. \n\nNuma salamandra a pellets o aquecimento do ambiente \u00e9 feito atrav\u00e9s de radia\u00e7\u00e3o e \n\nconvec\u00e7\u00e3o do ar. Quando o ar aquece, sobe, pois torna-se mais leve e menos denso, passando \n\npelo permutador de calor. A entrada e sa\u00edda de ar na salamandra s\u00e3o feitas atrav\u00e9s de \n\ncircula\u00e7\u00e3o for\u00e7ada. A sa\u00edda de ar da salamandra faz-se atrav\u00e9s da passagem do ar pelo \n\npermutador - aquecido pelo ar da c\u00e2mara de combust\u00e3o-, aquecendo assim o espa\u00e7o onde o \n\naparelho est\u00e1 instalado. Os gases da c\u00e2mara de combust\u00e3o s\u00e3o renovados a partir de uma \n\nentrada de ar existente, fluindo por um circuito de escape. A queima \u00e9 controlada pela \n\nregula\u00e7\u00e3o da quantidade de pellets e do ar renovado que necessitam de entrar na c\u00e2mara de \n\ncombust\u00e3o, quantidade esta que \u00e9 proporcional \u00e0 energia t\u00e9rmica gerada. \n\nEntre uma salamandra e um recuperador de calor a pellets, como o da Figura 16, n\u00e3o \n\nh\u00e1 diferen\u00e7as no processo de queima. Tal como nas vers\u00f5es a lenha, s\u00e3o equipamentos que \n\nse distinguem essencialmente pela coloca\u00e7\u00e3o, j\u00e1 que o recuperador necessita de ser \n\nencastrado numa parede. \n\n \n\n \n\nFigura 16 - Exemplo de recuperador de calor a pellets [30]. \n\n \n\nAs vers\u00f5es a pellets de recuperadores e de salamandras tamb\u00e9m permitem aproveitar \n\no calor gerado para o aquecimento de \u00e1guas sanit\u00e1rias, adicionando um circuito de \u00e1gua que \n\npassa dentro de uma estrutura, normalmente tubular, ligada a uma parede da c\u00e2mara de \n\n\n\n23 \n\n \n\ncombust\u00e3o. O corte lateral de uma salamandra com aquecimento de \u00e1guas sanit\u00e1rias pode \n\nser visto na Figura 17. \n\n \n\n \n\nFigura 17 - Salamandras com aquecimento de \u00e1guas sanit\u00e1rias [31]. \n\n \n\nAs caldeiras tamb\u00e9m t\u00eam uma vers\u00e3o a pellets. Tal como nas vers\u00f5es a lenha, neste \n\nequipamento \u00e9 utilizado um fluido para propagar energia t\u00e9rmica produzida pelo edif\u00edcio. \n\n \n\n2.3. Controlo da queima de pellets \n\nEm todos os sistemas de queima de pellets est\u00e1 presente um controlador eletr\u00f3nico. \n\nEste controlador consegue oferecer um leque de op\u00e7\u00f5es que proporcionam maior conforto e \n\ncomodidade ao utilizador enquanto otimizam a efici\u00eancia e o desempenho e asseguram a \n\nmonitoriza\u00e7\u00e3o da seguran\u00e7a do equipamento. A Figura 18, mostra um exemplo de um \n\ncontrolador existente no mercado. \n\n \n\n\n\n24 \n\n \n\n \n\nFigura 18 - Controlador de queima de pellets da marca FUMIS ALPHA [32]. \n\n \n\nO transporte e compacta\u00e7\u00e3o dos pellets, feito atrav\u00e9s do fuso sem-fim, \u00e9 acionado \n\natrav\u00e9s de um motor. Uma volta do fuso vai corresponder a um determinado n\u00famero de \n\npellets que caem na c\u00e2mara de combust\u00e3o. A quantidade de pellets que cai por unidade de \n\ntempo est\u00e1 diretamente relacionada com a pot\u00eancia t\u00e9rmica que pretendemos obter, motivo \n\npelo qual o controlador tem que saber quando o fuso d\u00e1 uma volta completa \u2013 caso o motor \n\ntenha um encoder - ou quanto tempo est\u00e1 a rodar. \n\nPara iniciar a queima dos pellets \u00e9 utilizada uma resist\u00eancia el\u00e9trica, normalmente \n\nem cer\u00e2mica, que aquece at\u00e9 atingir temperaturas de cerca de 600\u00baC. Esta resist\u00eancia, igual \n\n\u00e0 da Figura 19, est\u00e1 ligada apenas at\u00e9 que haja combust\u00e3o, sendo desligada assim que \u00e9 \n\ndetetado o fogo. \n\n \n\n \n\nFigura 19 - Resist\u00eancia incandescente de modo a iniciar a combust\u00e3o dos pellets [33]. \n\n \n\nPara que a combust\u00e3o seja detetada, existe um sensor de temperatura localizado na \n\nconduta de fumos. Quando a temperatura dos fumos ultrapassa os 50\u00baC, significa que existe \n\nfogo na c\u00e2mara de combust\u00e3o. Nesse momento a resist\u00eancia \u00e9 desligada e s\u00f3 volta a ser \n\nligada num rein\u00edcio do processo de acendimento. \n\n\n\n25 \n\n \n\nNo caso de uma salamandra h\u00e1, dependendo do modelo, dois ou tr\u00eas ventiladores que \n\nprecisam de ser controlados: o ventilador de entrada de ar, o ventilador de sa\u00edda e o \n\nventilador de escape. O ventilador de escape extrai os fumos e o ar da c\u00e2mara de combust\u00e3o \n\ne deve funcionar a partir do momento em que se pretende dar in\u00edcio \u00e0 queima. O ventilador \n\nde sa\u00edda, for\u00e7a o ar a sair da salamandra, aquecido pela passagem pelo permutador, para o \n\nlocal onde o equipamento se encontra. Nos modelos mais recentes raramente o ventilador de \n\nentrada \u00e9 utilizado. Quando \u00e9, for\u00e7a a entrada de ar para a c\u00e2mara de combust\u00e3o e pode \n\ntamb\u00e9m for\u00e7ar a passagem pelo permutador de calor, dependendo do modelo do \n\nequipamento. Quando n\u00e3o existe, \u00e9 o ventilador de escape que for\u00e7a a entrada de ar na \n\nc\u00e2mara de combust\u00e3o. \n\nA velocidade do ventilador respons\u00e1vel pela admiss\u00e3o de ar na c\u00e2mara de combust\u00e3o \n\nest\u00e1 diretamente ligada, na programa\u00e7\u00e3o de controlo, \u00e0 velocidade de alimenta\u00e7\u00e3o dos \n\npellets. O fluxo de ar depende do n\u00edvel de pot\u00eancia desejada. A Figura 20 ilustra o esquema \n\nde liga\u00e7\u00f5es entre um controlador e os elementos que constituem a salamandra a pellets. \n\n \n\n\n\n26 \n\n \n\n \n\nFigura 20 - Esquema el\u00e9trico de um controlador de queima de pellets [34]. \n\n \n\nNuma caldeira o processo varia ligeiramente. Continua a existir o ventilador de \n\nescape, mas dado o modo de permuta\u00e7\u00e3o de calor utilizado deixa de haver ventilador de \n\nsa\u00edda, substitu\u00eddo por uma bomba hidr\u00e1ulica que for\u00e7a a circula\u00e7\u00e3o do fluido. O ventilador \n\nde escape for\u00e7a tamb\u00e9m a admiss\u00e3o do ar que alimenta a combust\u00e3o dos pellets. A Figura 21 \n\nilustra um esquema t\u00edpico de uma caldeira a pellets.  \n\n \n\n\n\n27 \n\n \n\n \n\nFigura 21 - Corte lateral de uma caldeira a pellets [35]. \n\n \n\nTodo este controlo eletr\u00f3nico permite ao utilizador n\u00e3o s\u00f3 definir a pot\u00eancia de \n\naquecimento que pretende que seja produzida, mas tamb\u00e9m, no caso das salamandras e \n\nrecuperadores de calor, a temperatura ambiente que pretende. A exist\u00eancia de um sensor de \n\ntemperatura ambiente, ligado ao controlador, permite que seja feita a gest\u00e3o da pot\u00eancia \n\nt\u00e9rmica do equipamento de modo a que o local onde est\u00e1 instalada atinja e mantenha a \n\ntemperatura desejada. \n\nNo caso da caldeira, por ser um sistema de aquecimento central, a temperatura a \n\ncontrolar \u00e9 a temperatura do fluido, necessitando depois que o utilizador controle o calor \n\ndissipado individualmente nos radiadores ou pavimento radiante, caso pretenda regular a \n\ntemperatura em espa\u00e7os distintos. O controlador n\u00e3o consegue controlar cada dissipador \n\nt\u00e9rmico individualmente, mas pode ser definido um n\u00edvel de pot\u00eancia que serve toda a \n\nhabita\u00e7\u00e3o. \n\nPor ser necess\u00e1rio garantir a seguran\u00e7a do equipamento e das pessoas, a temperatura \n\nde fumos da conduta de exaust\u00e3o est\u00e1 constantemente a ser monitorizada por forma a alertar \n\ncaso haja alguma anomalia. Quando atrav\u00e9s do sensor de detetam temperaturas na ordem \n\ndos 230\u00baC, \u00e9 emitido um aviso que de imediato deve cortar a alimenta\u00e7\u00e3o de modo a \n\nextinguir o fogo o mais r\u00e1pido poss\u00edvel at\u00e9 que haja interven\u00e7\u00e3o do utilizador. \n\n\n\n28 \n\n \n\nDependendo do modelo, h\u00e1 tamb\u00e9m sensores de obstru\u00e7\u00e3o nas grelhas de ventila\u00e7\u00e3o \n\nde entrada, sa\u00edda ou extra\u00e7\u00e3o de fumos. Em caso de erro, o controlador cessa o processo de \n\nqueima at\u00e9 que o problema seja resolvido de modo a permitir a correta circula\u00e7\u00e3o do ar. \n\nToda a eletr\u00f3nica adjacente ao controlo permite que um sistema de aquecimento a \n\npellets, nomeadamente as salamandras e recuperadores de calor, arranquem \n\nautomaticamente e poupem bastante combust\u00edvel, podendo atingir, como referido \n\nanteriormente, autonomias de 25 horas dependendo da capacidade do dep\u00f3sito. \n\nApesar das diferen\u00e7as entre as salamandras, recuperadores e caldeiras, o processo de \n\ncontrolo e queima de pellets \u00e9 sempre muito semelhante. Por isso, um controlador pode ser \n\ndesenvolvido para ser aplicado a qualquer um destes sistemas. \n\n \n\n2.3.1. Controlador \n\nNeste projeto, o objetivo \u00e9 desenvolver um controlador gen\u00e9rico de custo reduzido, \n\naplicado numa salamandra e que n\u00e3o comprometa a sua adapta\u00e7\u00e3o a outro tipo de aparelho. \n\nCom essa premissa, seguidamente \u00e9 apresentado o levantamento de algumas op\u00e7\u00f5es de \n\ncontrolo existentes no mercado, nomeadamente no que diz respeito \u00e0 interface e \n\ncomunica\u00e7\u00e3o dos controladores de sistemas a pellets. \n\nO equipamento eletr\u00f3nico que serve de controlo \u00e0 queima dos pellets tem que ser \n\ncapaz de atuar sobre o motor de alimenta\u00e7\u00e3o de pellets, os ventiladores e a resist\u00eancia de \n\nigni\u00e7\u00e3o em momentos de funcionamento distintos: in\u00edcio da queima, gest\u00e3o de pot\u00eancia de \n\nqueima e t\u00e9rmino do processo. Simultaneamente, deve monitorizar todos os sensores \n\nexistentes pois servem de ponto de refer\u00eancia (p. ex.: in\u00edcio de igni\u00e7\u00e3o, temperatura \n\npretendida) ou de sinal de erro (p. ex.: sobreaquecimento, porta aberta, etc.). \n\nA gest\u00e3o que o controlador faz da pot\u00eancia t\u00e9rmica do equipamento pode ter duas \n\nformas de refer\u00eancia: uma em que o utilizador define um n\u00edvel de pot\u00eancia pr\u00e9-programado \n\ne outra em que a gest\u00e3o \u00e9 feita em torno de um valor de temperatura ambiente escolhido pelo \n\nutilizador. O fluxograma de funcionamento de um sistema de queima de pellets pode ser \n\nvisto na Figura 22. \n\n\n\n29 \n\n \n\n \n\nFigura 22 - Fluxograma de funcionamento de um equipamento a pellets. \n\n \n\nEntre a gest\u00e3o de pot\u00eancia autom\u00e1tica, para atingir uma temperatura definida pelo \n\nutilizador e a gest\u00e3o de pot\u00eancia para um n\u00edvel previamente definido, n\u00e3o h\u00e1 diferen\u00e7as no \n\nprocesso. Esta gest\u00e3o \u00e9 feita pelo n\u00famero de vezes que a c\u00e2mara de combust\u00e3o \u00e9 alimentada \n\nnum determinado intervalo de tempo e variando a velocidade do ventilador que gere a \n\nadmiss\u00e3o de ar na c\u00e2mara de combust\u00e3o. \n\nAl\u00e9m da gest\u00e3o de todo o processo, o controlador necessita ter recursos suficientes \n\npara interagir com o utilizador. \n\n \n\n2.3.2. Interface direta \n\nUtilizar um microcontrolador num equipamento de aquecimento dom\u00e9stico, al\u00e9m de \n\nter as vantagens no controlo do processo enunciadas anteriormente, tamb\u00e9m permite \n\naumentar substancialmente o conforto do utilizador atrav\u00e9s da compatibilidade com v\u00e1rias \n\nformas de comunica\u00e7\u00e3o e intera\u00e7\u00e3o. \n\nDe suma import\u00e2ncia, a interface \u00e9 o elo entre o utilizador e o controlador sem a qual \n\nseria imposs\u00edvel a intera\u00e7\u00e3o do utilizador com o equipamento. \u00c9 ela que permite ao utilizador \n\ninteragir com o equipamento e, sobretudo, s\u00e3o as suas caracter\u00edsticas que determinam o \n\nconforto, usabilidade e acessibilidade dessa intera\u00e7\u00e3o. Em seguida s\u00e3o apresentadas as \n\n\n\n30 \n\n \n\ninterfaces mais comuns dos controladores de queima de pellets existentes no mercado, \n\njuntamente com uma breve an\u00e1lise a cada uma delas. \n\n \n\n? Painel de bot\u00f5es \n\nUma forma simples de interagir com um controlador \u00e9 atrav\u00e9s de um painel com \n\nbot\u00f5es como o da Figura 23 ou potenci\u00f3metros como o da Figura 24. \u00c9 tamb\u00e9m a solu\u00e7\u00e3o \n\nmais barata. \n\n \n\n \n\nFigura 23 - Interface com bot\u00f5es para salamandra a pellets [36]. \n\n \n\nNo exemplo da Figura 23, o utilizador pode alterar o n\u00edvel da pot\u00eancia t\u00e9rmica da \n\nsalamandra bem como variar a velocidade do ventilador de sa\u00edda de ar quente. Uma s\u00e9rie de \n\ncinco leds acendem de acordo com o n\u00edvel de pot\u00eancia e velocidade escolhidos. Tem um \n\npotenci\u00f3metro que regula a velocidade do motor de alimenta\u00e7\u00e3o e um bot\u00e3o de in\u00edcio de \n\nfuncionamento. \n\n\u00c9 a maneira mais simples de utilizar uma salamandra e ser\u00e1 tamb\u00e9m a que melhor \n\nser\u00e1 entendida pelo grosso da popula\u00e7\u00e3o, em especial aqueles que n\u00e3o est\u00e3o habituados \u00e0 \n\ntecnologia. \n\n \n\n\n\n31 \n\n \n\n \n\nFigura 24 - Interface com potenci\u00f3metros para salamandra a pellets [37]. \n\n \n\nA interface da Figura 24 \u00e9 id\u00eantica \u00e0 da figura anterior, mas esta permite tamb\u00e9m o \n\ncontrolo autom\u00e1tico da temperatura ambiente da divis\u00e3o. \n\nPor serem t\u00e3o simples, estes tipos de interface s\u00e3o bastante limitados em termos de \n\nfuncionalidades. T\u00eam vantagem no pre\u00e7o reduzido e na facilidade de utiliza\u00e7\u00e3o. \n\n \n\n? Painel com LCD \n\nOs pain\u00e9is com um LCD como o da Figura 25 s\u00e3o o tipo de interface mais utilizado \n\nnos sistemas de aquecimento a pellets. Como o display apenas serve para leitura de \n\ninforma\u00e7\u00e3o, para a escrita no controlador \u00e9 essencial outra forma de intera\u00e7\u00e3o como uns \n\nbot\u00f5es de press\u00e3o. Estes pain\u00e9is aliam a simplicidade de leitura de informa\u00e7\u00e3o com a \n\nfacilidade de intera\u00e7\u00e3o e possibilidades de configura\u00e7\u00e3o de variad\u00edssimas op\u00e7\u00f5es. \n\n \n\n \n\nFigura 25 - Interface com LCD para salamandra a pellets [38]. \n\n\n\n32 \n\n \n\nPor ter um display, este tipo de interface permite ao utilizador ler um vasto leque de \n\ninforma\u00e7\u00f5es entre temperaturas, hora, data, informa\u00e7\u00f5es de estado da salamandra ou detalhes \n\nacerca de erros que possam ocorrer.  \n\nTorna-se tamb\u00e9m essencial ter acesso a muita informa\u00e7\u00e3o quando se pretendem \n\nincluir funcionalidades como a climatiza\u00e7\u00e3o num determinado hor\u00e1rio ou mesmo gerir um \n\ncalend\u00e1rio de funcionamento para a salamandra onde tudo \u00e9 feito automaticamente pelo \n\ncontrolador; tendo o utilizador apenas que colocar os pellets na salamandra.  \n\n \n\n? Painel de ecr\u00e3-t\u00e1ctil \n\nAlguns pain\u00e9is de controlo mais recentes t\u00eam uma interface dotada de ecr\u00e3 t\u00e1ctil \n\ncomo o da Figura 26. Estes pain\u00e9is conseguem ter todas as vantagens dos pain\u00e9is com LCD \n\ne evitam outro tipo de entradas de informa\u00e7\u00e3o \u2013 bot\u00f5es ou potenci\u00f3metros. \u00c9 uma solu\u00e7\u00e3o \n\nmais cara do que as anteriores. \n\n \n\n \n\nFigura 26 - Interface de ecr\u00e3-t\u00e1ctil para salamandra a pellets [39]. \n\n \n\nAl\u00e9m do pre\u00e7o n\u00e3o ser o mais adequado para a integra\u00e7\u00e3o num controlador de custo \n\nreduzido, a facilidade de intera\u00e7\u00e3o com ecr\u00e3-t\u00e1ctil ainda n\u00e3o \u00e9 consensual, em especial dentro \n\nda popula\u00e7\u00e3o mais idosa. O ecr\u00e3 necessita de ter um tamanho adequado para se tornar \n\npr\u00e1tico, podendo tornar-se inest\u00e9tico e aumentando bastante o seu custo. \n\n \n\n\n\n33 \n\n \n\n2.3.3. Interface \u00e0 dist\u00e2ncia \n\n? Painel remoto \n\nAlguns modelos de controlador disp\u00f5em de uma op\u00e7\u00e3o onde o painel n\u00e3o s\u00f3 n\u00e3o \n\nnecessita de estar encastrado no aparelho, como tamb\u00e9m n\u00e3o tem um s\u00edtio fixo. \u00c9 o caso do \n\npainel remoto da Figura 27. \n\n \n\n \n\nFigura 27 - Painel remoto com bot\u00f5es [40]. \n\n \n\nPara ser c\u00f3modo tem que ser limitado em tamanho e, portanto, em funcionalidades. \n\nA portabilidade tamb\u00e9m est\u00e1 limitada a uma certa dist\u00e2ncia do equipamento e ao tempo de \n\nvida \u00fatil da bateria que utilizar. Esta solu\u00e7\u00e3o aumenta o pre\u00e7o final do controlador pois \u00e9 \n\nnecess\u00e1ria comunica\u00e7\u00e3o sem fios para interagir com este. Esta op\u00e7\u00e3o pode tamb\u00e9m ser \n\naplicada com um painel remoto de ecr\u00e3-t\u00e1til como o apresentado na Figura 28.  \n\n \n\n \n\nFigura 28 - Painel remoto de ecr\u00e3 t\u00e1ctil [41]. \n\n\n\n34 \n\n \n\nAs solu\u00e7\u00f5es apresentadas podem ser aplicadas em conjunto com outros tipos de \n\ninterface, complementando-se entre si. \n\n \n\n? Controlo por comando remoto \n\nRelativamente \u00e0 possibilidade de controlo remoto, existe uma op\u00e7\u00e3o mais simples e \n\nmais barata do que as anteriores: a integra\u00e7\u00e3o de um comando remoto com um painel LCD. \n\nA Figura 29 apresenta um exemplo desta solu\u00e7\u00e3o. \n\n \n\n \n\nFigura 29 - Interface de LCD com um comando remoto [42]. \n\n \n\nAo adicionar um m\u00f3dulo de infravermelhos ao controlador e um pequeno comando \n\nremoto, \u00e9 poss\u00edvel controlar algumas vari\u00e1veis do sistema, \u00e0 dist\u00e2ncia, como a velocidade \n\ndo motor ventilador ambiente, a temperatura ambiente desejada, ligar/desligar o \n\nequipamento, etc. \n\nEm termos de custo esta solu\u00e7\u00e3o n\u00e3o tem um valor elevado e pode ser uma mais-\n\nvalia para alguns consumidores. \n\n \n\n? M\u00f3dulo Wi-Fi \n\nAcrescentar ao controlador um m\u00f3dulo de comunica\u00e7\u00e3o sem fios Wi-Fi como o \n\nrepresentado na Figura 30 abre portas no que \u00e0 comunica\u00e7\u00e3o e intera\u00e7\u00e3o diz respeito. \n\n\n\n35 \n\n \n\n \n\n \n\nFigura 30 - M\u00f3dulo Wi-Fi [43]. \n\n \n\nUm controlador com Wi-Fi permite, por exemplo, o acesso atrav\u00e9s de um \n\ncomputador, smartphone ou tablet, utilizando-os como controlo remoto dentro de casa ou \n\nem qualquer local com acesso \u00e0 internet. Com este tipo de comunica\u00e7\u00e3o \u00e9 poss\u00edvel configurar \n\numa calendariza\u00e7\u00e3o programada de aquecimento, monitorizar dados do controlador como a \n\ntemperatura ambiente ou temperatura de fumos, iniciar ou terminar o processo de queima \n\natrav\u00e9s de uma aplica\u00e7\u00e3o ou p\u00e1gina web. \n\nEsta solu\u00e7\u00e3o implica o desenvolvimento de uma p\u00e1gina web ou aplica\u00e7\u00e3o que permita \n\ncomunicar e controlar o equipamento. Como nem toda a gente tem interesse numa solu\u00e7\u00e3o \n\nde controlo \u00e0 dist\u00e2ncia nem disp\u00f5e de uma liga\u00e7\u00e3o \u00e0 internet em casa, uma implementa\u00e7\u00e3o \n\ndeste tipo deve ser vista como um m\u00e9todo interface complementar e opcional. O pre\u00e7o \n\nelevado deste m\u00f3dulo tamb\u00e9m traz consequ\u00eancias a n\u00edvel de pre\u00e7o final do produto. \n\n \n\n? M\u00f3dulo GPRS \n\nUm pouco mais barato que o m\u00f3dulo de Wi-Fi, a comunica\u00e7\u00e3o por GPRS - Figura 31 \n\n- est\u00e1 implementada em alguns modelos de controladores topo de gama.  \n\n \n\n\n\n36 \n\n \n\n \n\nFigura 31 - M\u00f3dulo GSM/GPRS [44]. \n\n \n\nSemelhante ao m\u00f3dulo anterior, o GPRS permite ao utilizador enviar uma SMS ao \n\ncontrolador com comandos de controlo. \u00c9 poss\u00edvel controlar totalmente a salamandra e ainda \n\nreceber alguma informa\u00e7\u00e3o relevante, relativa a alguma anomalia que possa ocorrer no \n\nequipamento durante a sua utiliza\u00e7\u00e3o, atrav\u00e9s do telem\u00f3vel pessoal do utilizador. \n\nOs custos do m\u00f3dulo e da comunica\u00e7\u00e3o GPRS podem afastar os utilizadores desta \n\nsolu\u00e7\u00e3o, n\u00e3o fazendo tamb\u00e9m sentido num controlador que se pretende de baixo custo. \n\n \n\n2.3.4. Funcionalidades \n\nComo j\u00e1 foi referido, a presen\u00e7a de um controlador eletr\u00f3nico permite uma s\u00e9rie de \n\nfuncionalidades ao equipamento. Algumas baseiam-se em programa\u00e7\u00e3o e hardware \n\nadicional, outras apenas necessitam de programa\u00e7\u00e3o. A primeira, que est\u00e1 sempre inclu\u00edda \n\nem qualquer equipamento de queima de pellets, \u00e9 o acendimento autom\u00e1tico, onde o \n\nutilizador apenas carrega no bot\u00e3o e o processo de igni\u00e7\u00e3o \u00e9 feito pelo controlador. \n\nAdicionalmente, os controladores podem ter implementadas: \n\n? In\u00edcio autom\u00e1tico da climatiza\u00e7\u00e3o: pressup\u00f5e que o utilizador defina a \n\ntemperatura m\u00ednima do local onde se situa o equipamento que determine o seu arranque. \n\nCaso se atinjam temperaturas abaixo do estipulado, a combust\u00e3o inicia-se e o equipamento \n\nprocede \u00e0 climatiza\u00e7\u00e3o. A temperatura de limite m\u00ednimo e a temperatura de climatiza\u00e7\u00e3o \n\ndevem ser previamente definidas. \n\n\n\n37 \n\n \n\n? Climatiza\u00e7\u00e3o: a presen\u00e7a de um sensor de temperatura ambiente permite ao \n\nutilizador definir a temperatura que mais conforto lhe proporciona, relegando para o \n\ncontrolador a gest\u00e3o da pot\u00eancia necess\u00e1ria para atingir e manter essa mesma temperatura. \n\nEsta funcionalidade n\u00e3o s\u00f3 traz mais conforto ao utilizador como tamb\u00e9m poupa bastante \n\ncombust\u00edvel, evitando situa\u00e7\u00f5es em que a temperatura se torne desconfort\u00e1vel. \n\n? Limpeza de cinzas: ao iniciar o funcionamento do equipamento, o ventilador \n\nde extra\u00e7\u00e3o de fumos pode ser ligado na velocidade m\u00e1xima durante uns segundos para \n\nlimpar alguma cinza que esteja acumulada na c\u00e2mara de combust\u00e3o. Esta funcionalidade \u00e9 \n\nlimitada pelo design do equipamento. \n\n? Programa\u00e7\u00e3o de funcionamento: o controlador permite a programa\u00e7\u00e3o do \n\nfuncionamento do equipamento. Significa isto que o aparelho funciona automaticamente \n\ndentro de um intervalo hor\u00e1rio estipulado pelo utilizador, climatizando o local onde se \n\nencontra. Esta fun\u00e7\u00e3o necessita de um circuito integrado real time clock para que o \n\ncontrolador mantenha o conhecimento da data e hora. \n\n \n\n2.3.5. Controlador a implementar \n\nUm controlador de queima de pellets pode oferecer v\u00e1rias funcionalidades em \n\ndiferentes tipos de interface. Como descrito na presente sec\u00e7\u00e3o, o controlo do processo \n\nmant\u00e9m-se o mesmo, independentemente do tipo de interface ou funcionalidades presentes. \n\nDada a variedade de op\u00e7\u00f5es e ao facto de no desenvolvimento deste projeto a programa\u00e7\u00e3o \n\ndo firmware n\u00e3o acrescentar nenhum custo, \u00e9 poss\u00edvel desenvolver um controlador base, \n\nonde a competitividade e o baixo custo s\u00e3o os principais requisitos, preparado para receber \n\nmais do que um tipo de interface. A interface define o n\u00edvel e gama do equipamento e isso \n\ntraz novas funcionalidades; o controlo do processo de queima e tudo o que lhe \u00e9 associado \n\nmant\u00e9m-se. A Figura 32 representa o diagrama de blocos do controlador a desenvolver neste \n\nprojeto.  \n\n \n\n\n\n38 \n\n \n\n \n\nFigura 32 - Diagrama de blocos do controlador a desenvolver. \n\n \n\nPara o desenvolvimento deste controlador, ter uma interface de f\u00e1cil utiliza\u00e7\u00e3o e que \n\nfosse capaz de permitir usufruir das funcionalidades indicadas nesta sec\u00e7\u00e3o era um dos \n\nobjetivos. Em termos de hardware, a escolha recaiu sobre um ecr\u00e3 LCD e 6 bot\u00f5es de \n\npress\u00e3o. Adicionalmente, o controlo remoto por infravermelhos e a comunica\u00e7\u00e3o Bluetooth \n\ntamb\u00e9m foram implementados como interface adicional. \n\nA unidade de controlo tamb\u00e9m tinha que ter a capacidade de suportar o controlo \n\nb\u00e1sico de um equipamento de queima de pellets, portanto, ser capaz de adquirir informa\u00e7\u00e3o \n\ndos sensores de temperatura e controlar os restantes elementos que constituem uma \n\nsalamandra, ao mesmo tempo que permite uma expans\u00e3o gradual do controlador em termos \n\nde capacidades (de comunica\u00e7\u00e3o, intera\u00e7\u00e3o e monitoriza\u00e7\u00e3o) como p. ex. a comunica\u00e7\u00e3o por \n\nBluetooth ou adi\u00e7\u00e3o de sensores de n\u00edvel de combust\u00edvel. \n\n \n\n \n\n \n\n \n\n \n\n\n\n39 \n\n \n\n3. Solu\u00e7\u00f5es de controlo \n\nUma vez que a programa\u00e7\u00e3o do firmware desenvolvido neste projeto n\u00e3o acrescenta \n\nnenhum custo monet\u00e1rio direto, \u00e9 da escolha do hardware que depende o pre\u00e7o final do \n\ncontrolador. Numa primeira fase pretendeu-se que o desenvolvimento fosse feito procurando \n\na integra\u00e7\u00e3o de solu\u00e7\u00f5es de hardware existentes no mercado tendo em vista uma poupan\u00e7a \n\nde tempo em desenvolvimento de hardware, a minora\u00e7\u00e3o do custo final da solu\u00e7\u00e3o e \n\ndesenvolvendo apenas o hardware espec\u00edfico necess\u00e1rio, mantendo-se tamb\u00e9m em \n\nconsidera\u00e7\u00e3o a fiabilidade na realiza\u00e7\u00e3o de poucas unidades e a disponibilidade de mercado.  \n\nTendo em conta as explica\u00e7\u00f5es do funcionamento do sistema anteriormente referidas \n\nna sec\u00e7\u00e3o 2.3, podemos definir os requisitos m\u00ednimos de hardware necess\u00e1rios para o in\u00edcio \n\ndo desenvolvimento do projeto. A Tabela 5 faz um resumo do n\u00famero e tipo de entradas e \n\nsa\u00eddas necess\u00e1rias para o desenvolvimento de um controlador, sem contabilizar a interface. \n\n \n\nTabela 5 - Requisitos de um controlador de queima de pellets, sem interface. \n\n Portos Tipo \n\nMotores Ventiladores 2x Digital \n\nMotor de alimenta\u00e7\u00e3o 1x Digital \n\nResist\u00eancia 1x Digital \n\nSondas de temperatura 2x Anal\u00f3gico \n\nTotal 6 - \n\n  \n\nA plataforma precisa de ter dispon\u00edveis pelo menos quatro sa\u00eddas digitais para os \n\nventiladores, motor e resist\u00eancia el\u00e9trica e duas entradas anal\u00f3gicas para as sondas de \n\ntemperatura ambiente e temperatura de fumos de combust\u00e3o. Isto para o controlo dos \n\nmodelos b\u00e1sicos, pois h\u00e1 que ter em conta que uma salamandra, dependendo do modelo, \n\npoder\u00e1 apresentar outros requisitos \u2013 monitoriza\u00e7\u00e3o de temperatura da c\u00e2mara de combust\u00e3o, \n\nfecho da porta de alimenta\u00e7\u00e3o, encoder de motores ventiladores ou/e alimentador, etc. \u2013 que \n\nse traduzem na obrigatoriedade em ter mais entradas anal\u00f3gicas e/ou digitais dispon\u00edveis. \n\nH\u00e1 ainda que reservar entradas e sa\u00eddas digitais para a interface homem-m\u00e1quina, cujo \n\nn\u00famero depende do tipo de interface que for utilizado. Tal como foi apresentado nas sec\u00e7\u00f5es \n\n2.3.2 e 2.3.3, existem v\u00e1rias op\u00e7\u00f5es de interface que diferem no que respeita aos seus \n\nrequisitos. O controlador n\u00e3o deve estar vinculado a apenas um tipo de interface, motivo \n\n\n\n40 \n\n \n\npelo qual a escolha da plataforma deve ter em considera\u00e7\u00e3o a capacidade de integrar v\u00e1rias \n\nop\u00e7\u00f5es. \n\nSeguidamente apresenta-se uma an\u00e1lise de v\u00e1rias plataformas de controladores \n\nexistentes no mercado que sejam capazes de cumprir com os requisitos t\u00e9cnicos e \n\nespecifica\u00e7\u00f5es do produto, com uma an\u00e1lise das suas caracter\u00edsticas, pre\u00e7o, vantagens e \n\ndesvantagens que cada uma pode representar na concretiza\u00e7\u00e3o deste projeto. \n\n \n\n3.1. Arduino \n\nArduino \u00e9 provavelmente a plataforma de prototipagem eletr\u00f3nica de hardware mais \n\nconhecida em todo o mundo. A maioria das placas utiliza um microcontrolador da Atmel \n\nAVR e s\u00e3o programadas com um sistema de linguagem pr\u00f3pria que na pr\u00e1tica \u00e9 C/C++. A \n\nprograma\u00e7\u00e3o \u00e9 feita recorrendo a uma liga\u00e7\u00e3o USB, atrav\u00e9s de um adaptador FTDI FT232 \n\nexistente em cada placa e, portanto, n\u00e3o necessitam de nenhum dispositivo programador \n\nexterno uma vez que o carregamento do firmware pode ser feito diretamente de um \n\ncomputador. \n\nEsta plataforma inclui um Ambiente de Desenvolvimento Integrado chamado \n\nArdu\u00edno IDE que cont\u00e9m um editor de texto para a escrita de c\u00f3digo, uma consola de liga\u00e7\u00e3o \n\ns\u00e9rie RS232 e permite descarregar os programas para o microcontrolador. \n\nA placa Arduino n\u00e3o s\u00f3 tem os portos de liga\u00e7\u00e3o dispon\u00edveis para que seja poss\u00edvel \n\nconectar qualquer dispositivo como existe uma grande variedade de dispositivos e acess\u00f3rios \n\nnormalmente conhecidos como Shields. Uma Shield \u00e9 uma placa de liga\u00e7\u00e3o r\u00e1pida \u00e0 placa \n\ndo Arduino que permite expandir as suas capacidades. Cada Shield, dependendo do seu \n\ndesign, pode ser compat\u00edvel com v\u00e1rios modelos de Arduino. \n\n \n\n\n\n41 \n\n \n\n \n\nFigura 33 - Protoshield para Ardu\u00edno Uno [45]. \n\n \n\n Encontram-se a custos reduzidos placas de liga\u00e7\u00e3o que s\u00e3o apenas placas de \n\nprototipagem e permitem desenvolver qualquer circuito, como a placa da Figura 33, mas \n\ntamb\u00e9m placas para liga\u00e7\u00e3o Ethernet como mostra a Figura 34, Wi-Fi, Bluetooth, Drive de \n\nmotores DC, leitores de encoders, rel\u00e9s, LCDs, v\u00e1rios tipos de sensores, etc. [46]. \n\n \n\n \n\nFigura 34 - Shield de Ethernet para Ardu\u00edno [46]. \n\n \n\nComo \u00e9 uma plataforma de c\u00f3digo aberto, qualquer pessoa pode consultar, examinar \n\nou modificar um produto j\u00e1 que todos os ficheiros de desenvolvimento - esquemas de \n\nhardware e software - est\u00e3o dispon\u00edveis. Tal facto tamb\u00e9m faz com que existam muitas \n\nvers\u00f5es, feitas por terceiros, vendidas a pre\u00e7os mais acess\u00edveis. \n\n \n\n\n\n42 \n\n \n\n3.1.1. Arduino Uno \n\nO Arduino Uno \u00e9 a placa de desenvolvimento de entrada de gama da plataforma, que \n\ntem incorporado um microcontrolador de 8bits ATmega328P. Um resumo das especifica\u00e7\u00f5es \n\nt\u00e9cnicas pode ser visto na Tabela 6. \n\n \n\nTabela 6 - Especifica\u00e7\u00f5es t\u00e9cnicas Ardu\u00edno Uno. \n\nArdu\u00edno Uno \n\nMicrocontrolador ATmega328P \n\nTens\u00e3o de Opera\u00e7\u00e3o 5V \n\nPortos digitais I/O 14 \n\nPortos PWM 6 \n\nEntradas Anal\u00f3gicas 6 (10bits) \n\nVelocidade de Rel\u00f3gio 16MHz \n\nMem\u00f3ria flash 32KB \n\n \n\nA partir dos dados da Tabela 5 do in\u00edcio desta sec\u00e7\u00e3o \u00e9 percet\u00edvel que esta placa tem \n\nos requisitos necess\u00e1rios para controlar a queima de pellets. Disponibiliza 6 entradas \n\nanal\u00f3gicas das quais s\u00e3o necess\u00e1rias 2 e 14 portos digitais I/O sendo necess\u00e1rios 4. Supre as \n\nnecessidades e ainda permite instalar uma interface de bot\u00f5es ou acoplar um LCD e bot\u00f5es \n\nde press\u00e3o. No entanto, a instala\u00e7\u00e3o de qualquer interface utilizaria praticamente todos os \n\nrestantes portos dispon\u00edveis, inviabilizando a adi\u00e7\u00e3o de qualquer funcionalidade que \n\nnecessitasse de hardware extra. Esta op\u00e7\u00e3o deixa o controlador limitado em termos de \n\nevolu\u00e7\u00f5es futuras quer ao n\u00edvel de expans\u00e3o da interface quer de comunica\u00e7\u00e3o. \n\nUma placa de outros fabricantes, equivalente \u00e0 Arduino Uno da Figura 35 encontra-\n\nse a pre\u00e7os que come\u00e7am nos 2\u20ac. \n\n \n\n \n\n\n\n43 \n\n \n\n \n\nFigura 35 - Ardu\u00edno Uno. \n\n \n\n3.1.2. Arduino Mega 2560 \n\nMega 2560 \u00e9 das placas Arduino que mais possibilidades oferece: incorpora um \n\nmicroprocessador de 8bits, ATmega2560, tem 54 portos I/O, 16 entradas anal\u00f3gicas e 256 \n\nkb de mem\u00f3ria para carregar o firmware. Um resumo das especifica\u00e7\u00f5es t\u00e9cnicas pode ser \n\nvisto na Tabela 7. \n\n \n\nTabela 7 - Especifica\u00e7\u00f5es t\u00e9cnicas Ardu\u00edno Mega 2560. \n\nArdu\u00edno Mega \n\nMicrocontrolador ATmega2560 \n\nTens\u00e3o de Opera\u00e7\u00e3o 5V \n\nPortos digitais I/O 54 \n\nPortos PWM 15 \n\nEntradas Anal\u00f3gicas 16 (10bits) \n\nVelocidade de Rel\u00f3gio 16MHz \n\nMem\u00f3ria flash 256KB \n\n \n\nEsta placa tem capacidade suficiente para suprir as necessidades deste projeto. O \n\nn\u00famero de portos dispon\u00edveis e a capacidade de mem\u00f3ria alargada d\u00e3o a possibilidade de \n\ndesenvolver e expandir as capacidades e funcionalidades de um controlador sem o limitar \n\nlogo \u00e0 partida. Com esta placa n\u00e3o existir\u00e3o muitas limita\u00e7\u00f5es caso se pretenda adicionar \n\ncomunica\u00e7\u00e3o Wi-Fi, GPRS, monitoriza\u00e7\u00e3o de sensores extra como tranca da porta ou aviso \n\nde falta de combust\u00edvel, entre outros. \n\nRecorrendo a outros fabricantes, consegue-se adquirir a um pre\u00e7o a partir dos 7\u20ac uma \n\nplaca id\u00eantica \u00e0 Ardu\u00edno Mega 2560, representada na Figura 36.  \n\n\n\n44 \n\n \n\n \n\nFigura 36 - Ardu\u00edno Mega 2560. \n\n \n\n3.2. Microchip  \n\nA Microchip \u00e9 o fornecedor l\u00edder mundial de microcontroladores. A fam\u00edlia PIC \u00e9 \n\nutilizada em aplica\u00e7\u00f5es que v\u00e3o desde o \u00e1udio, gest\u00e3o de baterias, Ethernet, monitoriza\u00e7\u00e3o \n\nde energia, ilumina\u00e7\u00e3o, comunica\u00e7\u00f5es sem fios, dom\u00f3tica, ind\u00fastria autom\u00f3vel, etc., numa \n\ngama de aparelhos que se estende desde m\u00e1quinas de caf\u00e9 at\u00e9 berbequins [47]. \n\nA Microchip vende os seus microcontroladores apenas como unidades simples. N\u00e3o \n\nexiste uma placa de desenvolvimento r\u00e1pido que permita programar e fazer liga\u00e7\u00f5es a \n\ndispositivos eletr\u00f3nicos externos, capaz de ser integrada numa solu\u00e7\u00e3o final, como no caso \n\ndo Ardu\u00edno. H\u00e1 uma grande quantidade de modelos em diferentes gamas e tipos que podem \n\nser utilizados para este projeto, desde que respeitem o n\u00famero de portos digitais e entradas \n\nanal\u00f3gicas necess\u00e1rias. Por ser vendido apenas o microcontrolador, o pre\u00e7o por unidade \n\ntamb\u00e9m \u00e9 reduzido, mas implica a compra \u2013 ou cria\u00e7\u00e3o - de uma placa de desenvolvimento \n\ne de um programador. \n\n Existem duas placas de desenvolvimento pr\u00f3prias que permitem programar uma s\u00e9rie \n\nde microcontroladores mas que n\u00e3o possibilitam a integra\u00e7\u00e3o numa solu\u00e7\u00e3o final. Uma delas \n\napenas tem o socket para o microprocessador e uma breadboard - Figura 37 - enquanto outra \n\ntraz agregados alguns perif\u00e9ricos como um ecr\u00e3 LCD, bot\u00f5es de press\u00e3o e tem sa\u00eddas \n\ndispon\u00edveis para fazer liga\u00e7\u00f5es - Figura 38. \n\n \n\n\n\n45 \n\n \n\n  \n\nFigura 37 - Placa de desenvolvimento PICDEM LAB II [47]. \n\n \n\nFigura 38 - Placa de desenvolvimento Explorer 8 \n\n[47]. \n\n \n\n \n\nA placa PICDEM LAB II custa 92\u20ac, enquanto a placa Explorer 8 tem um custo de \n\n69\u20ac. \n\nApesar do software de desenvolvimento destes microcontroladores, o MPLAB \n\nXpress, ser gratuito, caso n\u00e3o se utilizem as placas de desenvolvimento pr\u00f3prias, para \n\ndescarregar o programa para o microcontrolador \u00e9 necess\u00e1rio um programador espec\u00edfico, \n\ncomprado \u00e0 parte, cujo pre\u00e7o no fabricante \u00e9 de 44\u20ac. H\u00e1 possibilidade de desenvolver um \n\nprogramador pr\u00f3prio, mas obrigaria a desenvolver hardware. Existem tamb\u00e9m alguns \n\nprogramadores desenvolvidos por terceiros, dispon\u00edveis no mercado com um custo que \n\ncome\u00e7a nos 8\u20ac. \n\n \n\n3.3. ChipKIT \n\nA ChipKIT \u00e9 o resultado de uma parceria da Microchip com a Digilent Inc que entra \n\nno mercado para tentar diminuir as desvantagens da Microchip como plataforma de \n\ndesenvolvimento r\u00e1pido e para introduzir microprocessadores de 32bits \u00e0 comunidade que, \n\nat\u00e9 ent\u00e3o, n\u00e3o existiam. Segundo a pr\u00f3pria equipa de desenvolvimento, a ChipKIT \u00e9 a mais \n\nrecente plataforma de desenvolvimento r\u00e1pido dispon\u00edvel, totalmente inspirada no Arduino. \n\nAs placas n\u00e3o s\u00f3 foram desenhadas com o mesmo formato e disposi\u00e7\u00e3o de fura\u00e7\u00f5es para \n\nserem compat\u00edveis com parte dos shields do Arduino como tamb\u00e9m as suas pr\u00f3prias \n\nbibliotecas e ambiente de programa\u00e7\u00e3o foram trabalhadas para serem compat\u00edveis nesta \n\nplataforma, tornando-as funcionais em ambas. A diferen\u00e7a para a plataforma Arduino est\u00e1 \n\nnos microprocessadores utilizados - da fam\u00edlia PIC32, da Microchip, de 32bits, com uma \n\ntens\u00e3o de opera\u00e7\u00e3o de 3,3V [48]. \n\n\n\n46 \n\n \n\n3.3.1. ChipKIT Uno32 \n\nA placa de desenvolvimento ChipKIT Uno32 est\u00e1 desenhada com o mesmo formato \n\nda placa Arduino Uno, mas integra o microprocessador PIC32MX320F128. \u00c9 um \n\nprocessador de 32bits, velocidade de rel\u00f3gio de 80MHz e com 42 portos digitais I/O \n\ndispon\u00edveis. A Tabela 8 resume as especifica\u00e7\u00f5es t\u00e9cnicas desta placa. \n\n \n\nTabela 8 - Especifica\u00e7\u00f5es t\u00e9cnicas da placa de desenvolvimento ChipKIT Uno32. \n\nChipKIT Uno32 \n\nMicrocontrolador PIC32MX320F128 \n\nTens\u00e3o de Opera\u00e7\u00e3o 3,3V \n\nPortos digitais I/O 41 \n\nPortos PWM 5 \n\nEntradas Anal\u00f3gicas 16 (10bits) \n\nVelocidade de Rel\u00f3gio 80MHz \n\nMem\u00f3ria flash 512KB \n\n \n\nPelas caracter\u00edsticas \u00e9 percet\u00edvel que as capacidades desta placa s\u00e3o superiores \u00e0s da \n\nplaca Arduino Uno e pouco inferiores a um Arduino Mega, ficando ligeiramente atr\u00e1s da \n\n\u00faltima no n\u00famero de portos dispon\u00edveis, situa\u00e7\u00e3o que n\u00e3o \u00e9 limitadora para este projeto. \u00c9 \n\nposs\u00edvel verificar tamb\u00e9m que tem uma velocidade de rel\u00f3gio superior a ambas as placas \n\nconcorrentes. A tens\u00e3o de opera\u00e7\u00e3o \u00e9 de 3,3V, diferente dos 5V da plataforma Arduino o \n\nque leva a que s\u00f3 seja compat\u00edvel com shields do mesmo n\u00edvel de tens\u00e3o. Os portos digitais \n\napenas conseguem fornecer uma sa\u00edda digital de 3,3V mas s\u00e3o tolerantes a tens\u00f5es de entrada \n\nat\u00e9 5V. A placa ChipKIT Uno32 tem um pre\u00e7o de 27\u20ac e est\u00e1 representada na Figura 39. \n\n \n\n\n\n47 \n\n \n\n \n\nFigura 39 - Placa de desenvolvimento ChipKIT Uno32 [49]. \n\n \n\nNa fam\u00edlia ChipKIT existe um modelo de gama superior, equivalente ao Arduino \n\nMega, a placa MAX32. Ultrapassa em larga margem as necessidades deste projeto por ter 83 \n\nportos digitais, p. ex. e tamb\u00e9m um pre\u00e7o bastante superior - 45\u20ac - ao j\u00e1 capaz modelo \n\nUno32. Por este motivo e por se considerar que o pre\u00e7o estaria logo \u00e0 partida a condicionar \n\no valor final do controlador sem oferecer mais do que a placa Uno32, n\u00e3o se ir\u00e1 detalhar \n\nacerca das suas especifica\u00e7\u00f5es t\u00e9cnicas nem considerar na decis\u00e3o. \n\n \n\n3.4. Raspberry Pi \n\nO Raspberry Pi \u00e9 um computador desenvolvido pela Raspberry Pi Foundation. Tem \n\num baixo custo, \u00e9 capaz de se ligar a um monitor ou televis\u00e3o, permite navegar na internet, \n\nreproduzir v\u00eddeo em alta defini\u00e7\u00e3o ou at\u00e9 utilizar um processador de texto, tudo com o \n\ntamanho de um cart\u00e3o de cr\u00e9dito. \n\nEste computador em miniatura contempla tamb\u00e9m 40 portos digitais, dando-lhe a \n\ncapacidade de controlar um sistema de queima de pellets e adicionar sistemas de interface e \n\ncomunica\u00e7\u00e3o. A programa\u00e7\u00e3o \u00e9 feita dentro do pr\u00f3prio sistema operativo, Raspbian, \n\ninstalado num cart\u00e3o de mem\u00f3ria. O \u00faltimo modelo tem um pre\u00e7o de 40\u20ac, o que torna o \n\npre\u00e7o do projeto mais elevado quando comparado com as outras op\u00e7\u00f5es/plataformas. A este \n\npre\u00e7o \u00e9 necess\u00e1rio adicionar tamb\u00e9m o pre\u00e7o do cart\u00e3o de mem\u00f3ria onde corre o sistema \n\noperativo e de uma placa ADC (Analog-Digital Converter), necess\u00e1ria para a leitura das \n\nsondas de temperatura. A Figura 40 representa um Raspberry Pi 2 Model B. \n\n\n\n48 \n\n \n\n \n\n \n\nFigura 40 - Raspberry Pi 2 Model B. \n\n \n\nBem mais interessante, pelo pre\u00e7o e tamanho ainda mais reduzido, \u00e9 um outro modelo \n\nPi, o Raspberry Pi Zero. Representado na Figura 41, este modelo mant\u00e9m o mesmo n\u00famero \n\nde portos I/O que o modelo anterior - 40 portos digitais -, com um pre\u00e7o de cerca de 5\u20ac. \n\n \n\n \n\nFigura 41 - Compara\u00e7\u00e3o do Raspberry Pi Zero com uma nota de 5$ [50]. \n\n \n\nTamb\u00e9m neste caso \u00e9 necess\u00e1rio adicionar ao pre\u00e7o do Raspberry o pre\u00e7o de um \n\ncart\u00e3o de mem\u00f3ria de onde corre o sistema operativo e da placa ADC. O pre\u00e7o do cart\u00e3o \n\nronda os 4\u20ac enquanto a placa de convers\u00e3o anal\u00f3gica tem um custo de 26\u20ac. \n\nNo Raspberry, o firmware de controlo tem que ser executado atrav\u00e9s de uma \n\naplica\u00e7\u00e3o desenvolvida que fica a correr no sistema. Deste modo, tudo fica guardado no \n\ncart\u00e3o de mem\u00f3ria, que precisa de ser carregado com uma imagem da aplica\u00e7\u00e3o e sistema \n\noperativo para operar corretamente. \n\n \n\n\n\n49 \n\n \n\n3.5. An\u00e1lise comparativa \n\nAnalisando as op\u00e7\u00f5es anteriores percebemos que todas s\u00e3o tecnicamente v\u00e1lidas e \n\ncada uma apresenta vantagens e desvantagens que se podem encaixar no desenvolvimento \n\ndeste projeto. \n\nO Raspberry Pi \u00e9 a op\u00e7\u00e3o com mais poder de processamento. \u00c9 desnecess\u00e1rio para o \n\ncontrolo da uma salamandra mas pode tornar-se vantajoso caso se pretenda implementar \n\numa interface gr\u00e1fica mais elaborada - para um ecr\u00e3-t\u00e1ctil, p. ex. - ou criar algum tipo de \n\nmonitoriza\u00e7\u00e3o/interface atrav\u00e9s de uma rede dom\u00e9stica - ethernet ou Wi-Fi. Implica o estudo \n\nde um ambiente de programa\u00e7\u00e3o diferente das plataformas Ardu\u00edno/ChipKIT ou Microchip. \n\nA sua placa tem todos os portos I/O acess\u00edveis para interliga\u00e7\u00e3o com dispositivos eletr\u00f3nicos, \n\no que permite interagir com alguns m\u00f3dulos existentes no mercado ou at\u00e9 mesmo shields \n\ndesenhadas para outras plataformas - embora n\u00e3o de uma forma integrada. Tanto o ambiente \n\nde programa\u00e7\u00e3o como o sistema operativo est\u00e3o dispon\u00edveis de forma gratuita.  \n\nO modelo Zero tem um custo mais reduzido. A sua arquitetura complica o \n\ndesenvolvimento de uma placa \u00fanica dedicada no futuro, para reduzir ainda mais os custos, \n\nmas n\u00e3o impossibilita o desenvolvimento de uma ou mais placas separadas para a interface \n\ne para o m\u00f3dulo de pot\u00eancia do controlador. No total, um controlador com Raspberry Pi \n\ncome\u00e7aria logo \u00e0 partira em 69\u20ac com o modelo Pi 2 e 35\u20ac com o modelo Zero, um valor \n\nacima dos concorrentes que n\u00e3o justificariam esta escolha para a aplica\u00e7\u00e3o em causa. \n\nA utiliza\u00e7\u00e3o de microcontroladores da fam\u00edlia PIC da Microchip obriga a \n\ndesenvolver uma placa que torne acess\u00edveis os portos do microcontrolador e que o permita \n\nprogramar caso n\u00e3o se pretenda comprar o conjunto de placas de desenvolvimento e de \n\nprograma\u00e7\u00e3o. Esta placa tem que ter as dimens\u00f5es corretas no caso de se pretender integrar \n\ncom alguma shield, como na plataforma Arduino/ChipKIT ou as shields podem ser utilizadas \n\ncomo placas separadas desde que o microcontrolador utilize a mesma tens\u00e3o de opera\u00e7\u00e3o do \n\nm\u00f3dulo. Como j\u00e1 foi referido anteriormente, nesta fase do projeto \u00e9 uma mais valia n\u00e3o \n\nnecessitar de desenvolver hardware. \n\nA plataforma ChipKIT veio introduzir no mercado uma solu\u00e7\u00e3o a grande parte das \n\ndesvantagens da Microchip. S\u00e3o compat\u00edveis com grande parte dos shields existentes para \n\nArduino e partilham bibliotecas de programa\u00e7\u00e3o. Ter um pre\u00e7o superior \u00e0s placas da \n\n\n\n50 \n\n \n\nplataforma concorrente fez com que fosse preterida como plataforma de desenvolvimento. \n\nNo entanto, a proximidade entre a programa\u00e7\u00e3o, dimens\u00e3o de placas e ambiente de \n\ndesenvolvimento abre a possibilidade de, no final do projeto, transferir o trabalho \n\ndesenvolvido para um microcontrolador da Microchip. Desta forma, \u00e9 poss\u00edvel desenvolver \n\num firmware, test\u00e1-lo numa placa Arduino e no final compilar o projeto no ambiente do \n\nChipKIT para aplicar a um microcontrolador da fam\u00edlia PIC ou vice-versa - com as devidas \n\naltera\u00e7\u00f5es aos seus registos. \n\nA plataforma Arduino surge assim como a op\u00e7\u00e3o mais barata para desenvolver o \n\nprot\u00f3tipo. O ambiente de programa\u00e7\u00e3o \u00e9 gratuito e pode ser utilizado de forma livre. As \n\nplacas t\u00eam o pre\u00e7o mais acess\u00edvel quando comparadas com as outras op\u00e7\u00f5es e est\u00e3o prontas \n\na ser interligadas quer com shields ou m\u00f3dulos, quer com solu\u00e7\u00f5es desenvolvidas \n\nespecificamente para este projeto pois t\u00eam acess\u00edveis todos os portos I/O. \n\nA Tabela 9 resume as vantagens e desvantagens de cada uma das plataformas, \n\nanalisando as suas caracter\u00edsticas face aos requisitos para o desenvolvimento deste projeto. \n\n \n\nTabela 9 - An\u00e1lise \u00e0s plataformas de controlo face aos requisitos do projeto. \n\n Arduino ChipKIT Microchip Raspberry \n\nCompatibilidade com shields/m\u00f3dulos Sim Sim N\u00e3o N\u00e3o \n\nPortos I/O dispon\u00edveis Sim Sim N\u00e3o N\u00e3o \n\nNecessidade de hardware p/ \n\nprograma\u00e7\u00e3o  \nN\u00e3o N\u00e3o Sim N\u00e3o \n\nCapacidades de comunica\u00e7\u00e3o \n\navan\u00e7ada (ethernet, Wi-Fi, etc.) \nN\u00e3o N\u00e3o N\u00e3o Sim \n\nNecessidade de hardware extra* N\u00e3o N\u00e3o Sim Sim \n* Placa ADC, oscilador, resist\u00eancias, etc. \n\n \n\nAtrav\u00e9s da Tabela 9 \u00e9 poss\u00edvel verificar que as ofertas da Microchip e da Raspberry \n\nt\u00eam algumas desvantagens relativamente \u00e0s outras duas plataformas concorrentes, j\u00e1 \n\nenunciadas no decorrer da an\u00e1lise comparativa. A plataforma Arduino e ChipKIT s\u00e3o muito \n\nsemelhantes. Entre elas, a escolha recaiu sobre a Arduino devido ao seu pre\u00e7o mais reduzido. \n\nO desenvolvimento iniciou-se com uma placa Mega cuja escolha, dentro das op\u00e7\u00f5es da \n\nplataforma, se deveu \u00e0 rela\u00e7\u00e3o entre o pre\u00e7o e capacidade de expans\u00e3o que a placa \n\nproporciona. A placa Uno \u00e9 capaz de controlar a salamandra mas poderia impedir o \n\ndesenvolvimento de funcionalidades que se possam futuramente implementar. A Mega \n\n\n\n51 \n\n \n\ncontinua a ser uma das placas mais baratas e n\u00e3o limita este projeto em termos de \n\ndesenvolvimento, dando margem para integrar um conjunto de capacidades - de \n\ncomunica\u00e7\u00e3o, de monitoriza\u00e7\u00e3o, etc. - que n\u00e3o obrigam \u00e0 troca do microcontrolador e/ou \n\nplaca associada como poderia acontecer no caso da Uno.  \n\nAl\u00e9m da placa Mega, para o in\u00edcio do desenvolvimento do projeto foram escolhidos \n\num ecr\u00e3 LCD e 3 bot\u00f5es de press\u00e3o para desenvolver e testar a interface principal, um \n\nm\u00f3dulo de rel\u00e9 e uma protoshield, - id\u00eantica \u00e0 da Figura 33 - para o controlo dos motores e \n\nresist\u00eancia. O ecr\u00e3 escolhido pode apresentar a informa\u00e7\u00e3o numa dimens\u00e3o que cause \n\ndificuldades de leitura por pessoas com problemas de vis\u00e3o. \u00c9 poss\u00edvel e caber\u00e1 a decis\u00e3o \n\nao fabricante das salamandras, substituir o ecr\u00e3 escolhido por outro de maiores dimens\u00f5es \n\nsem necessidade de ajuste na programa\u00e7\u00e3o ou nas liga\u00e7\u00f5es el\u00e9tricas do controlador. \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n52 \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n53 \n\n \n\n4. Controlador Desenvolvido \n\nApesar da plataforma Arduino ter um grande n\u00famero de m\u00f3dulos de hardware j\u00e1 \n\ndesenvolvidos para as mais variadas aplica\u00e7\u00f5es, n\u00e3o foi poss\u00edvel encontrar no mercado todas \n\nas solu\u00e7\u00f5es de hardware necess\u00e1rias para o desenvolvimento deste projeto, tanto por motivos \n\nde ordem t\u00e9cnica como financeira. Por exemplo, uma salamandra exige o controlo de \n\nvelocidade de um motor AC. N\u00e3o foi poss\u00edvel encontrar um m\u00f3dulo que permitisse o \n\ncontrolo requerido atrav\u00e9s de um microcontrolador e, portanto, teve que ser desenvolvido \n\nhardware com essa finalidade. \n\nPara o teste das solu\u00e7\u00f5es implementadas e ensaios de utiliza\u00e7\u00e3o do controlador foi \n\nutilizado um sistema de queima de pellets, uma salamandra, disponibilizada pela MVM e \n\nlocalizada na sede da empresa. H\u00e1 muitas op\u00e7\u00f5es para a constitui\u00e7\u00e3o de um equipamento de \n\nqueima de pellets, onde cada fabricante toma as suas decis\u00f5es. Para este trabalho, o modelo \n\ndisponibilizado para testes e desenvolvimento foi o Prima Air que pode ser visto na \n\nFigura 42. \n\n \n\n \n\nFigura 42 - Salamandra de testes, modelo Prima Air, durante um ensaio de queima. \n\n \n\n\n\n54 \n\n \n\nO controlador utilizado pela MVM no modelo Prima Air tem um sensor de massa de \n\nar e um encoder acoplado ao ventilador extrator de fumos al\u00e9m dos constituintes b\u00e1sicos \n\nreferidos na Tabela 5. Segundo as indica\u00e7\u00f5es da empresa, o encoder \u00e9 um elemento essencial \n\npor quest\u00f5es de seguran\u00e7a mas o sensor de massa de ar \u00e9 um elemento dispens\u00e1vel. \n\nCaso haja uma falha no extrator de fumos, detetada atrav\u00e9s da leitura do encoder, a \n\nsalamandra tem que ser impedida de iniciar a queima ou cessar de imediato o processo de \n\nqueima se este estiver a decorrer. A presen\u00e7a do sensor de massa de ar garante um fluxo de \n\nar m\u00ednimo na admiss\u00e3o \u2013 para cada n\u00edvel de pot\u00eancia \u2013 pois \u00e9, quanto existe, atrav\u00e9s da sua \n\nleitura que se varia a velocidade do ventilador encarregue da admiss\u00e3o de ar. A sua presen\u00e7a \n\nn\u00e3o \u00e9 fundamental e encarece o sistema de aquecimento, motivo pelo qual foi ignorado no \n\ndesenvolvimento do controlo a aplicar neste modelo. \n\nA Figura 43 mostra o conjunto de elementos deste modelo de salamandra que \n\nnecessitam da aten\u00e7\u00e3o do controlador. \n\n \n\n \n\nFigura 43 - Elementos constituintes da salamandra a controlar. \n\n \n\nTanto os motores como a resist\u00eancia funcionam \u00e0 tens\u00e3o nominal da rede el\u00e9trica \n\nnacional, ou seja, 230V. \n\n \n\n\n\n55 \n\n \n\n4.1. Prot\u00f3tipo - hardware \n\nNas sec\u00e7\u00f5es seguintes s\u00e3o descritos os circuitos desenvolvidos para o controlo dos \n\nmotores, controlo de resist\u00eancia e os componentes utilizados na interface e aquisi\u00e7\u00e3o de \n\ndados de temperatura, concluindo com testes e resultados da implementa\u00e7\u00e3o relativos ao \n\ndesenvolvimento do prot\u00f3tipo do controlador. \n\n \n\n4.1.1. Controlo de motores e resist\u00eancia \n\nAos motores de exaust\u00e3o de fumos e ventila\u00e7\u00e3o ambiente, exige-se que tenham \n\nvelocidade vari\u00e1vel tanto para controlar a queima como para regular a quantidade de ar \n\nquente que circula para o ambiente onde o sistema se encontra. A resist\u00eancia de aquecimento \n\ne o motor de alimenta\u00e7\u00e3o t\u00eam um controlo de estado on/off. Para variar a velocidade dos \n\nmotores ventiladores foi implementado um controlo por \u00e2ngulo de fase. \n\n \n\n? Controlo por \u00e2ngulo de fase \n\nO controlo por \u00e2ngulo de fase \u00e9 um tipo de controlo que permite variar a tens\u00e3o numa \n\ncarga a partir de uma fonte AC de tens\u00e3o fixa. A velocidade varia consoante a tens\u00e3o eficaz \n\naplicada no motor, que por sua vez varia conforme o \u00e2ngulo de disparo, como mostra a \n\nequa\u00e7\u00e3o: \n\n?? = ?? ? ???(?) [?] \n\nOnde: \n\nVo: tens\u00e3o eficaz de sa\u00edda \n\nVs: tens\u00e3o eficaz de entrada \n\n?: \u00e2ngulo de disparo \n\n \n\nUm interruptor (TRIAC) \u00e9 acionado num determinado instante do semi-ciclo da onda, \n\no que faz com que a tens\u00e3o eficaz aplicada na carga varie consoante o \u00e2ngulo de semi-ciclo \n\nem que come\u00e7a a conduzir: a tens\u00e3o \u00e9 m\u00e1xima quando o \u00e2ngulo de disparo \u00e9 de 0 radianos \n\n\n\n56 \n\n \n\ne ser\u00e1 m\u00ednima para um \u00e2ngulo de ? radianos. A curva que estabelece a rela\u00e7\u00e3o entre a tens\u00e3o \n\nde sa\u00edda Vo e o \u00e2ngulo de disparo ? est\u00e1 representada na Figura 44. \n\n \n\n \n\nFigura 44 - Rela\u00e7\u00e3o entre tens\u00e3o de sa\u00edda e \u00e2ngulo de disparo [51]. \n\n \n\nPara uma carga puramente resistiva a corrente acompanha a tens\u00e3o. Quando o disparo \n\n\u00e9 dado no TRIAC, este inicia a condu\u00e7\u00e3o at\u00e9 que a corrente seja inferior \u00e0 corrente de \n\nmanuten\u00e7\u00e3o, algo que acontece no final do semi-ciclo em que est\u00e1 a operar. Na Figura 45 \n\npodemos observar este comportamento, onde Vo representa a tens\u00e3o e iL a corrente na carga. \n\n \n\n \n\nFigura 45 - Tens\u00e3o e corrente numa carga resistiva controlada com TRIAC [51]. \n\n \n\n Como um motor AC \u00e9 uma carga indutiva, o comportamento ser\u00e1 ligeiramente \n\ndiferente. A carga \u00e9 excitada com a tens\u00e3o correspondente ao \u00e2ngulo de disparo ? mas a \n\n\n\n57 \n\n \n\ncorrente n\u00e3o tem um valor instant\u00e2neo diretamente proporcional. Existe um desfasamento \n\nque faz com que a corrente apenas baixe o suficiente para interromper a condu\u00e7\u00e3o ? radianos \n\nap\u00f3s o in\u00edcio do semi-ciclo seguinte. A Figura 46 ilustra este comportamento, onde Vo e iL \n\nrepresentam a tens\u00e3o e a corrente na carga, respetivamente. \n\n \n\n \n\nFigura 46 - Tens\u00e3o e corrente numa carga indutiva controlada com TRIAC [51]. \n\n  \n\nComo referido anteriormente, ao contr\u00e1rio de uma carga resistiva, uma carga indutiva \n\ncomo um motor AC n\u00e3o permite varia\u00e7\u00f5es de corrente instant\u00e2neas. Este facto impede um \n\ncontrolo completo num semi-ciclo de onda: se o \u00e2ngulo de disparo ? for inferior ao \u00e2ngulo \n\nem que a corrente \u00e9 extinta, ?, o motor estar\u00e1 sempre ligado porque o fornecimento de \n\ncorrente nunca \u00e9 interrompido. Isto significa que neste tipo de controlo numa carga indutiva \n\nn\u00e3o \u00e9 poss\u00edvel variar a tens\u00e3o em toda a gama. \n\nSaber com precis\u00e3o qual o \u00e2ngulo num determinado momento pressup\u00f5e a exist\u00eancia \n\nde uma refer\u00eancia: o \u00e2ngulo 0\u00ba. De maneira a encontrar uma refer\u00eancia angular foi \n\nimplementado um circuito de dete\u00e7\u00e3o de zero \u2013 zero crossing detector. A Figura 47 mostra \n\no diagrama de blocos do controlo de velocidade por \u00e2ngulo de fase implementado nos \n\nmotores ventiladores. \n\n \n\n \n\n\n\n58 \n\n \n\n \n\nFigura 47 - Diagrama de blocos do controlo de velocidade de um motor AC. \n\n \n\nUm dos requisitos do hardware para controlo de velocidade a desenvolver \u00e9 garantir \n\nque estaria isolado do microprocessador de maneira a evitar-lhe danos em caso de avaria. \n\nAl\u00e9m da prote\u00e7\u00e3o dos elementos perif\u00e9ricos, \u00e9 necess\u00e1rio proteger os pr\u00f3prios elementos de \n\npot\u00eancia como o TRIAC. Para tal foram utilizados um opto isolador e um circuito de snubber.  \n\nO opto isolador escolhido foi o MOC3022 que \u00e9 um circuito integrado com sa\u00edda a \n\nTRIAC ativada por um d\u00edodo emissor de luz infravermelha, utilizado para fazer o controlo \n\ndo disparo na gate de um TRIAC a jusante. Este integrado garante o isolamento para tens\u00f5es \n\neficazes at\u00e9 5000V, o suficiente para garantir que um problema que exista a jusante deste \n\nn\u00e3o se propagar\u00e1 para os elementos a montante, pois caso aconte\u00e7a alguma anomalia serve \n\nde elemento fus\u00edvel.  \n\nO snubber \u00e9 utilizado para proteger o TRIAC que comuta a carga e simultaneamente \n\npara diminuir a interfer\u00eancia eletromagn\u00e9tica provocada pela comuta\u00e7\u00e3o. A interrup\u00e7\u00e3o \n\nrepentina de corrente numa carga indutiva leva a um aumento da tens\u00e3o, j\u00e1 que a tens\u00e3o aos \n\nterminais da indut\u00e2ncia \u00e9 proporcional \u00e0 taxa de varia\u00e7\u00e3o da corrente, ? ? ?? ??? . Este \n\naumento de tens\u00e3o nos terminais do TRIAC, ??/??, \u00e9 descrito como critical rate of rise. \n\nPor ser uma carga indutiva, o motor armazena energia na forma de campo magn\u00e9tico \n\ndevido \u00e0 corrente que por ele passa. Quando o TRIAC est\u00e1 \u201con\u201d, a corrente flui por ele e \n\npelo motor. Quando TRIAC abre e fica \u201coff\u201d, ainda h\u00e1 corrente - e energia armazenada na \n\nforma de campo magn\u00e9tico - a passar pelo motor, por\u00e9m, neste momento, n\u00e3o tem por onde \n\ncircular visto que o circuito foi interrompido. Isto vai provocar um aumento de tens\u00e3o at\u00e9 \n\nque toda a energia armazenada em forma de campo magn\u00e9tico seja transformada em energia \n\nel\u00e9trica. A tens\u00e3o vai subir at\u00e9 a um ponto em que seja suficiente para que a corrente possa \n\n\n\n59 \n\n \n\ncontinuar ao mesmo n\u00edvel \u2013 j\u00e1 que n\u00e3o pode alterar-se instantaneamente \u2013 mesmo que para \n\nisso tenha que ionizar o ar, tornando-o condutor, momento em que \u00e9 poss\u00edvel observar um \n\narco el\u00e9trico. \n\nEste fen\u00f3meno transit\u00f3rio de aumento de tens\u00e3o, conhecido como \u201cinductive \n\nspiking\u201d, \u00e9 tamb\u00e9m uma fonte de interfer\u00eancias eletromagn\u00e9ticas e caso a tens\u00e3o gerada seja \n\nsuperior ao que o comutador pode suportar pode mesmo danific\u00e1-lo. \n\nO snubber \u00e9 um circuito tipicamente composto por uma resist\u00eancia em s\u00e9rie com um \n\ncondensador, paralelos aos terminais do TRIAC, que serve para atenuar ou eliminar este \n\nproblema. A Figura 48 mostra um esquema de um circuito de snubber. \n\n \n\n \n\nFigura 48 - Circuito de snubber com resist\u00eancia e condensador [52]. \n\n \n\nA inclus\u00e3o deste tipo de circuito garante um caminho para que a carga indutiva possa \n\nfazer fluir a corrente quando o TRIAC est\u00e1 off, de maneira a que a tens\u00e3o aos seus terminais \n\nn\u00e3o aumente tanto e o fa\u00e7a de forma mais lenta quando este abre, ou seja, faz com que ??/?? \n\nseja menor uma vez que a energia armazenada no motor ser\u00e1 dissipada pelo snubber. \n\nNeste projeto, para o controlo dos ventiladores foi utilizado o circuito recomendado \n\npela ficha t\u00e9cnica do MOC3022, onde j\u00e1 est\u00e1 inclu\u00eddo um snubber. \n\nO TRIAC escolhido foi o BT136-600 que se encontra no mercado por valores a partir \n\nde 0,35\u20ac. Poderia ter sido feita outra escolha para o modelo do TRIAC, nomeadamente entre \n\nmodelos com circuitos de snubber integrados \u2013 snubberless TRIAC. No entanto, dados os \n\nrequisitos dos motores e o pre\u00e7o do dispositivo, este era o modelo mais acess\u00edvel. \n\n\n\n60 \n\n \n\nComo s\u00e3o dispositivos de entrega comutada de pot\u00eancia podem aquecer bastante e \n\nnecessitar de um dissipador. A verifica\u00e7\u00e3o desta necessidade foi feita seguindo a equa\u00e7\u00e3o da \n\nrela\u00e7\u00e3o entre a temperatura da jun\u00e7\u00e3o e a pot\u00eancia dissipada: \n\n?? ? ?? = (???? + ???? ) ? ?? \n\nSegundo a ficha t\u00e9cnica do TRIAC, a resist\u00eancia t\u00e9rmica entre a jun\u00e7\u00e3o e a c\u00e1psula \n\n(???? ) \u00e9 de 3,7\u00baC/W e a resist\u00eancia t\u00e9rmica entre a jun\u00e7\u00e3o e o meio ambiente (????)  \u00e9 de \n\n60\u00baC/W. A temperatura ambiente dentro da salamandra, \u00e0 qual a eletr\u00f3nica de controlo vai \n\nestar submetida, ??, pode atingir durante o seu funcionamento os 40\u00baC. A pot\u00eancia do \n\nTRIAC, ??, pode ser calculada atrav\u00e9s da corrente que por ele passa (?? ) multiplicada pela \n\ntens\u00e3o aos seus terminais (?? ) quando est\u00e1 a conduzir, que segundo a ficha t\u00e9cnica o valor \n\nm\u00e1ximo \u00e9 de 1,7V. \n\nNa salamandra, os motores de ventila\u00e7\u00e3o e exaust\u00e3o de fumos t\u00eam a mesma pot\u00eancia \n\nel\u00e9trica, 57W. O motor alimentador tem uma pot\u00eancia ligeiramente inferior, de 53W. As \n\ncorrentes dos motores ventiladores foram medidas, tendo-se verificado valores eficazes de \n\n0,35A. \n\nPara efeitos de dimensionamento foram considerados os valores dos motores \n\nventiladores pois s\u00e3o mais exigentes do que o motor alimentador no que a consumo de \n\ncorrente el\u00e9trica diz respeito e a tens\u00e3o m\u00e1xima aos terminais do TRIAC: \n\n?? = ?? ? ??  \n\n?? = 1,7 ? 0,35 ? 0,6 [?] \n\nPela f\u00f3rmula da temperatura de jun\u00e7\u00e3o, temos: \n\n?? = ?? + ((???? + ???? ) ? ??) = 40 + ((60 + 3,7) ? 0,6) = 78,22 [\u00ba?] \n\nCom uma temperatura de jun\u00e7\u00e3o m\u00e1xima admiss\u00edvel de 125\u00baC, o funcionamento do \n\nTRIAC nunca estar\u00e1 em perigo devido \u00e0 temperatura. Segundo informa\u00e7\u00e3o da ficha t\u00e9cnica \n\ndisponibilizada pelo fabricante, a corrente eficaz m\u00e1xima admiss\u00edvel, 4A, apenas come\u00e7a a \n\ndecair acima dos 107\u00baC, um valor ainda distante de atingir nesta situa\u00e7\u00e3o pelo que a \n\ninstala\u00e7\u00e3o de um dissipador se pode dispensar. \n\n \n\n\n\n61 \n\n \n\n? Dete\u00e7\u00e3o de Zero \n\nOs circuitos de dete\u00e7\u00e3o de zero recebem a tens\u00e3o da rede como entrada e devolvem \n\num pulso sincronizado com a passagem da tens\u00e3o por ~0V - Figura 49 -, ou seja, \n\nsincronizado com o in\u00edcio de cada semi-ciclo da onda de tens\u00e3o. O pulso de sa\u00edda do circuito \n\n\u00e9 a refer\u00eancia do controlador. \n\n \n\n \n\nFigura 49 - Ilustra\u00e7\u00e3o de uma passagem por zero [52]. \n\n \n\nO circuito de dete\u00e7\u00e3o de zero dimensionado est\u00e1 esquematizado na Figura 50. \n\n \n\n \n\nFigura 50 - Esquema el\u00e9trico do circuito utilizado na dete\u00e7\u00e3o de zero. \n\n \n\nQuando a tens\u00e3o de entrada - aplicada ao conector J1 - se encontra no final do semi-\n\nciclo negativo, o seu valor vai aumentando - passando de negativo para positivo - at\u00e9 \n\n\n\n62 \n\n \n\nultrapassar a tens\u00e3o necess\u00e1ria para que o led consiga entrar na zona de condu\u00e7\u00e3o, passando \n\na emitir luz que satura o trans\u00edstor do opto acoplador, for\u00e7ando a sa\u00edda para o \n\nmicrocontrolador a uma tens\u00e3o de 0V. Seguidamente, no final do semi-ciclo seguinte \u2013 \n\npositivo - a tens\u00e3o baixa at\u00e9 passar de um valor positivo para um valor negativo fazendo com \n\nque o led entre na zona de bloqueio, deixe de conduzir e, por conseguinte, cesse a emiss\u00e3o \n\nde luz. O trans\u00edstor passa ent\u00e3o a estar na zona de corte, bloqueando a passagem de corrente, \n\nelevando a tens\u00e3o de sa\u00edda para o microcontrolador ao n\u00edvel l\u00f3gico ativo, ou seja, Vcc. \n\nSempre que h\u00e1 uma altera\u00e7\u00e3o no n\u00edvel da sa\u00edda para o controlador, h\u00e1 praticamente no \n\nmesmo instante uma passagem por zero: praticamente, pois o circuito n\u00e3o deteta o valor de \n\ntens\u00e3o 0V mas sim o valor da tens\u00e3o \u00e0 entrada que permite a passagem de corrente suficiente \n\nno led para que o valor de tens\u00e3o aos terminais do coletor e emissor do fototransistor (Vce) \n\nseja suficiente para que o microcontrolador reconhe\u00e7a como um n\u00edvel l\u00f3gico 0 ou 1. \n\nPara o dimensionamento do circuito foi necess\u00e1rio garantir que a corrente no led seria \n\nsuficiente para que o microprocessador reconhecesse uma mudan\u00e7a de estado l\u00f3gico e ao \n\nmesmo tempo que n\u00e3o ultrapassasse o limite suportado pelo circuito integrado escolhido, o \n\nPC814. \n\nSegundo informa\u00e7\u00f5es do fabricante do microcontrolador que equipa a placa Arduino, \n\na Atmel, as resist\u00eancias de pull-up, R3 na Figura 50, t\u00eam um valor entre os 20k? e os 50k?. \n\nEsta informa\u00e7\u00e3o permite saber qual a corrente necess\u00e1ria para a satura\u00e7\u00e3o do trans\u00edstor. \n\nAssim, considerando o pior caso (pull-up de 20k?) e sabendo que Vcc = 5V, sabemos que a \n\ncorrente \u00e9 de: \n\nI? =\n5\n\n20 ? 103\n= 0,250 [??] \n\nA ficha t\u00e9cnica do PC814 garante uma CTR (current tansfer ratio) m\u00ednima de 20% \n\nmas que pode atingir os 300%. Isto significa que, para uma CTR de 20%, apenas 20% da \n\ncorrente no led, If estar\u00e1 \u00e0 sa\u00edda, no fototransistor, I?. Desta maneira foi poss\u00edvel estimar \n\nque, no pior dos casos, precisaremos de 1,25mA de corrente no led. \n\nAinda segundo informa\u00e7\u00f5es da ficha t\u00e9cnica do opto-acoplador quando este se \n\nencontra diretamente polarizado e com uma corrente If = \u00b1 20mA estabelece aos seus \n\nterminais uma tens\u00e3o - forward voltage - de cerca 1,2V. Com base nestas informa\u00e7\u00f5es e \n\nconsiderando o valor de tens\u00e3o eficaz da rede el\u00e9trica de 230V, sabendo que a corrente If \n\n\n\n63 \n\n \n\nm\u00e1xima suportada pelo opto-acoplador \u00e9 de 50mA, calculou-se um valor de resist\u00eancia para \n\nlimitar a corrente: \n\n? =\n230 ? 1,2\n\n20 ? 10?3\n~11 ? 103 [?]  \n\nCom este valor de resist\u00eancia a corrente m\u00e1xima no led estaria abaixo dos 50mA: \n\nIf ???\n=  \n\n(?2 ? 230) ? 1,2\n\n11 ? 103\n?  29,4 [??] \n\nA pot\u00eancia que essa resist\u00eancia teria que dissipar seria de: \n\n?? =  \n(230 ? 1,2)2\n\n11 ? 103\n?  4,76 [?] \n\nNesta configura\u00e7\u00e3o era necess\u00e1ria uma resist\u00eancia de 5W de pot\u00eancia ou superior, \n\numa vez que estando muito pr\u00f3ximo do valor nominal, poderia n\u00e3o se conseguir dissipar a \n\npot\u00eancia caso a temperatura ambiente fosse maior que o valor nominal, 25\u00baC, como acontece \n\nno interior da salamandra. No entanto, por uma quest\u00e3o de pre\u00e7o e como o acesso a uma \n\nresist\u00eancia com estas caracter\u00edsticas n\u00e3o era imediato, optou-se por limitar um pouco mais a \n\ncorrente no led e ao mesmo tempo tornar a solu\u00e7\u00e3o mais barata, utilizando resist\u00eancias de \n\ncarv\u00e3o. Uma resist\u00eancia de 5W custa acima de 1,10\u20ac enquanto que a solu\u00e7\u00e3o adotada ficou \n\nnos 0,24\u20ac. \n\nUma vez que h\u00e1 resist\u00eancias de carv\u00e3o de 2W, foi poss\u00edvel reduzir o custo do circuito. \n\nConsiderando os componentes dispon\u00edveis, optou-se por uma resist\u00eancia equivalente de \n\n23,5k?, resultado de um paralelo de duas resist\u00eancias de 47 k?, com um pre\u00e7o unit\u00e1rio de \n\n0,12\u20ac. Recalculando, obtemos: \n\n?? =\n230 ? 1,2\n\n23,5 ? 10?3\n? 9,73 ? 10?3 [?] \n\nA corrente de pico no led, nestas condi\u00e7\u00f5es, seria de: \n\n?? ???\n=  \n\n(?2 ? 230) ? 1,2\n\n23,5 ? 103\n?  13,7 [??] \n\nUma corrente eficaz de 9,73mA no led faz dissipar um total de pot\u00eancia em cada uma \n\ndas resist\u00eancias utilizadas em paralelo de:  \n\n\n\n64 \n\n \n\n?? =  \n(230 ? 1,2)2\n\n47 ? 103\n?  1,11 [?] \n\nEste valor de pot\u00eancia encontra-se abaixo do valor nominal das resist\u00eancias de \n\ncarv\u00e3o. Uma vez que lhes ser\u00e1 aplicada uma tens\u00e3o de pico superior a 300V, foram \n\nescolhidas resist\u00eancias de maiores dimens\u00f5es para n\u00e3o haver risco de arco el\u00e9trico entre os \n\nseus terminais. \n\nCom estes valores de resist\u00eancia a dete\u00e7\u00e3o de passagem por zero \u00e9, no pior dos casos, \n\nfeita a um n\u00edvel de tens\u00e3o de entrada de: \n\n?????????? = (23,5 ? 10\n3 ? 0,625 ? 10?3)  + 1,2 ?  15,8 [?] \n\nO circuito foi composto pelos seguintes elementos: \n\n? 2x 47k? - 2W \n\n? 1x PC814 \n\nO d\u00edodo D1 est\u00e1 inclu\u00eddo no encapsulamento do PC814 enquanto a resist\u00eancia R3 \u00e9 \n\numa resist\u00eancia de pullup interna, parte integrante do microprocessador e habilitada por \n\nsoftware. \n\n \n\n? Controlo on/off \n\nA resist\u00eancia de aquecimento para dar in\u00edcio \u00e0 queima e o motor alimentador n\u00e3o \n\nest\u00e3o constantemente ligados durante o funcionamento da salamandra. A resist\u00eancia apenas \n\ntem import\u00e2ncia no in\u00edcio do processo para garantir a igni\u00e7\u00e3o dos pellets e o motor \n\nalimentador \u00e9 ligado apenas durante um curto intervalo de tempo ao longo de um per\u00edodo \n\npr\u00e9-definido, dependente do n\u00edvel de pot\u00eancia selecionado. \n\nPara o controlo da resist\u00eancia foi utilizado o m\u00f3dulo de rel\u00e9 da Figura 51 que tem um \n\ncusto unit\u00e1rio de cerca de 1,60\u20ac. Este m\u00f3dulo j\u00e1 inclui um d\u00edodo em antiparalelo na bobine \n\ne \u00e9 acionado por interm\u00e9dio de um trans\u00edstor para proteger o microcontrolador de picos de \n\ntens\u00e3o gerados na sua comuta\u00e7\u00e3o, tal como o circuito de snubber referido anteriormente. \n\n \n\n\n\n65 \n\n \n\n \n\nFigura 51 - M\u00f3dulo de rel\u00e9 utilizado na comuta\u00e7\u00e3o da resist\u00eancia de aquecimento. \n\n \n\nNo motor de alimenta\u00e7\u00e3o, o controlo \u00e9 feito atrav\u00e9s de um opto-isolador com circuito \n\nde dete\u00e7\u00e3o de passagem por zero integrado, o MOC3041. Inicialmente foi testado o controlo \n\natrav\u00e9s de um m\u00f3dulo de rel\u00e9 id\u00eantico ao da resist\u00eancia sem resultados satisfat\u00f3rios, como \u00e9 \n\ndescrito na sec\u00e7\u00e3o 4.1.3.  \n\n \n\n4.1.2. Interface e Sensores \n\nA escolha da interface \u00e9 sempre muito importante em qualquer sistema, em especial \n\nnos sistemas que pretendem, como este, abranger clientes de todas as faixas et\u00e1rias e n\u00edveis \n\nde literacia. Como referido na sec\u00e7\u00e3o 2.3.5, era essencial escolher algo que permitisse uma \n\nintera\u00e7\u00e3o simples, de f\u00e1cil implementa\u00e7\u00e3o, com ampla capacidade de troca de informa\u00e7\u00e3o \n\nna rela\u00e7\u00e3o homem-m\u00e1quina, ao mesmo tempo que n\u00e3o limitasse o sistema em \n\nfuncionalidades. Dentro destas caracter\u00edsticas optou-se por um ecr\u00e3 LCD de 16 colunas por \n\n2 linhas e 6 bot\u00f5es de press\u00e3o como interface principal. Foi adicionado um m\u00f3dulo recetor \n\nde infravermelhos para permitir o controlo da salamandra atrav\u00e9s de um comando remoto, \n\num sinalizador sonoro e um rel\u00f3gio de tempo real. Foi tamb\u00e9m adicionado um m\u00f3dulo de \n\ncomunica\u00e7\u00e3o Bluetooth para permitir a comunica\u00e7\u00e3o com outros equipamentos, como um \n\nsmartphone. \n\n \n\n? Ecr\u00e3 LCD \n\nA presen\u00e7a do ecr\u00e3 permite ao utilizador ter acesso a informa\u00e7\u00f5es \u00fateis da salamandra \n\ncomo o n\u00edvel de pot\u00eancia debitada, temperatura ambiente, horas, data e dia da semana, obter \n\n\n\n66 \n\n \n\nalguns detalhes sobre algum poss\u00edvel mau funcionamento ou disponibilizar informa\u00e7\u00e3o \n\nacerca de v\u00e1rias funcionalidades como o funcionamento programado ou outras que possam \n\nser adicionadas no futuro. A Figura 52 mostra o aspeto da informa\u00e7\u00e3o dada pelo ecr\u00e3 ao \n\nutilizador. \n\n \n\n \n\nFigura 52 - Informa\u00e7\u00e3o disponibilizada pelo ecr\u00e3. \n\n \n\n? Bot\u00f5es de press\u00e3o \n\nOs 6 bot\u00f5es de press\u00e3o da interface est\u00e3o associados a 6 portos digitais - configurados \n\ncomo entrada - do microcontrolador. T\u00eam fun\u00e7\u00f5es de in\u00edcio e paragem do processo de \n\nqueima, altera\u00e7\u00e3o do modo de funcionamento do equipamento e incremento/decremento de \n\nvari\u00e1veis. \n\nTodos os portos digitais associados aos bot\u00f5es s\u00e3o asseridos a zero e foram \n\nconfigurados com pull-up interno. A resist\u00eancia de pull-up tem valor vari\u00e1vel entre os 20k? \n\ne os 50k?, dependendo do microcontrolador [46] e \u00e9 acionada por software. \n\n \n\n? Comando remoto / recetor de infravermelhos \n\nO sensor recetor de infravermelhos foi adicionado por uma quest\u00e3o de comodidade, \n\nde maneira a igualar a oferta de muitos controladores atuais, existentes no mercado. \u00c9 um \n\nelemento opcional \u2013 a sua aus\u00eancia n\u00e3o afeta o comportamento do sistema - e est\u00e1 \n\nacompanhado de um comando transmissor de infravermelhos para permitir a comunica\u00e7\u00e3o. \n\nA Figura 53 mostra ambos os componentes bem como as liga\u00e7\u00f5es do recetor, modelo \n\nVS1838B. \n\n \n\n\n\n67 \n\n \n\n \n\nFigura 53 - Conjunto de comando remoto emissor e recetor de infravermelhos. \n\n \n\nEsta solu\u00e7\u00e3o, com um custo total - comando e sensor de infravermelhos - a rondar os \n\n1,20\u20ac, apresenta uma boa rela\u00e7\u00e3o entre o custo e a comodidade oferecida ao utilizador e da\u00ed \n\na sua integra\u00e7\u00e3o neste projeto. A presen\u00e7a ou aus\u00eancia de controlo remoto tamb\u00e9m n\u00e3o \n\ncarece de nenhuma configura\u00e7\u00e3o especial no firmware pelo que o fabricante de \n\nequipamentos pode decidir acerca da sua inclus\u00e3o a cada venda de forma individual. \n\nEste prot\u00f3tipo tamb\u00e9m incorporou um besouro que emite um sinal sonoro a cada \n\nclique num bot\u00e3o de press\u00e3o ou a\u00e7\u00e3o por interm\u00e9dio do comando remoto e um m\u00f3dulo com \n\nrel\u00f3gio de tempo real DS1302 para o controlador reter a informa\u00e7\u00e3o hor\u00e1ria e permitir a \n\nprograma\u00e7\u00e3o do funcionamento autom\u00e1tico da salamandra. O conjunto tem um pre\u00e7o a \n\nrondar o 1\u20ac. \n\n \n\n? M\u00f3dulo de comunica\u00e7\u00e3o Bluetooth \n\nO m\u00f3dulo de comunica\u00e7\u00e3o por Bluetooth, cujo pre\u00e7o ronda os 5\u20ac, foi integrado no \n\nsistema como forma de comunica\u00e7\u00e3o complementar, que lhe acresce valor mas que \u00e9 \n\nopcional. Em primeiro lugar porque nem toda a gente tem um smartphone ou est\u00e1 disposta \n\na pagar mais para algo que pode n\u00e3o lhe ser essencial. Segundo, porque a utiliza\u00e7\u00e3o \n\npressup\u00f5e o desenvolvimento de uma aplica\u00e7\u00e3o e esse desenvolvimento acarreta custos. A \n\nutiliza\u00e7\u00e3o n\u00e3o \u00e9 exclusiva a smartphones. Qualquer aparelho com comunica\u00e7\u00e3o bluetooth, - \n\ncomputador, tablet, etc. \u2013 pode interagir com o controlador. \n\n\n\n68 \n\n \n\nA Figura 54 mostra o m\u00f3dulo bluetooth utilizado neste projeto, o m\u00f3dulo HC-05 que \n\n\u00e9 um transcetor TTL \u2013 combina transmissor e recetor. \n\n \n\n \n\nFigura 54 - M\u00f3dulo transcetor Bluetooth. \n\n \n\n? Sensores de temperatura \n\nA leitura dos sensores de temperatura deste modelo de salamandra \u00e9 feita atrav\u00e9s da \n\nliga\u00e7\u00e3o a duas portas anal\u00f3gicas de duas resist\u00eancias NTC de 240k? e 10k? uma para \n\nmonitoriza\u00e7\u00e3o da temperatura dos fumos de combust\u00e3o e outra de monitoriza\u00e7\u00e3o da \n\ntemperatura ambiente do local onde a salamandra se encontra, respetivamente. Para obter o \n\nvalor de temperatura destas resist\u00eancias foi utilizado o circuito cujo esquema \u00e9 apresentado \n\nna Figura 55. \n\n \n\n \n\nFigura 55 - Esquema el\u00e9trico do circuito de leitura dos sensores de temperatura. \n\n \n\n\n\n69 \n\n \n\nA NTC \u00e9 ligada em s\u00e9rie com outra resist\u00eancia, R1, de valor equivalente (240k? e \n\n10k? para estes sensores), criando um divisor de tens\u00e3o aplicado numa entrada anal\u00f3gica \n\ndo microcontrolador. A tens\u00e3o aplicada, Vcc, \u00e9 a mesma tens\u00e3o de alimenta\u00e7\u00e3o do \n\nmicrocontrolador. A varia\u00e7\u00e3o do valor resistivo de uma NTC n\u00e3o \u00e9 linear, obrigando a um \n\ntratamento da leitura do valor de tens\u00e3o no porto anal\u00f3gico, que ser\u00e1 abordado na sec\u00e7\u00e3o \n\n4.3.2.  \n\n \n\n4.1.3. Testes e resultados \n\nPara comprovar o bom funcionamento do hardware, foi realizada uma s\u00e9rie de testes. \n\nNesta sec\u00e7\u00e3o descrevem-se os trabalhos realizados com vista ao teste/verifica\u00e7\u00e3o do bom \n\nfuncionamento do hardware desenvolvido. Ser\u00e3o abordados o circuito de controlo de \n\nvelocidade por \u00e2ngulo de fase, o circuito de dete\u00e7\u00e3o de zero com aferi\u00e7\u00f5es das varia\u00e7\u00f5es de \n\nsinal correspondentes \u00e0 dete\u00e7\u00e3o de zero no que diz respeito ao seu valor e frequ\u00eancia, medida \n\na corrente \u00e0 entrada do mesmo circuito de maneira a confirmar que esta se encontra dentro \n\ndos limites do optoacoplador e testada a conformidade do sinal de disparo do TRIAC. A \n\ntemperatura lida pelo microcontrolador atrav\u00e9s dos sensores de temperatura foi comparada \n\ncom uma medi\u00e7\u00e3o atrav\u00e9s de um sensor calibrado. Foi tamb\u00e9m desenvolvida uma aplica\u00e7\u00e3o \n\nm\u00f3vel para comprovar o funcionamento do m\u00f3dulo de comunica\u00e7\u00e3o Bluetooth. \n\n \n\n? Circuito de controlo de velocidade por \u00e2ngulo de fase \n\nNo teste de verifica\u00e7\u00e3o do valor de corrente na entrada do circuito detetor de zero, \n\nanteriormente apresentado na Figura 50, o valor medido foi de 10,38mA. \n\nEmbora n\u00e3o seja uma discrep\u00e2ncia significativa, a diferen\u00e7a est\u00e1 tamb\u00e9m relacionada \n\ncom o valor de tens\u00e3o da rede ser superior ao utilizado nos c\u00e1lculos. A corrente foi calculada \n\npara um valor de tens\u00e3o eficaz de 230V, mas aquando a medi\u00e7\u00e3o do seu valor real verificou-\n\nse um valor de 239V. Com este valor, cada resist\u00eancia dissipa na realidade uma pot\u00eancia de: \n\n?? =  239 ? (\n10,38 ? 10?3\n\n2\n) ?  1,24 [?] \n\n\n\n70 \n\n \n\nO valor real est\u00e1 abaixo da pot\u00eancia nominal da resist\u00eancia e n\u00e3o se desvia \n\nconsideravelmente do valor calculado. \n\nAp\u00f3s confirma\u00e7\u00e3o de que o limite de corrente no led e nas resist\u00eancias \u00e9 v\u00e1lido, \n\nseguiu-se o teste de funcionamento do circuito de dete\u00e7\u00e3o de zero utilizando um oscilosc\u00f3pio \n\nligado \u00e0 sa\u00edda do circuito e a um transformador 230V/12V. O recurso ao transformador para \n\neste teste deve-se \u00e0s limita\u00e7\u00f5es t\u00e9cnicas da ponta de prova utilizada que n\u00e3o suportava \n\ndiretamente a tens\u00e3o da rede, 230V. Ao utilizar o transformador, garantiu-se uma an\u00e1lise \n\nfi\u00e1vel do ponto zero; dependendo do sentido do enrolamento, as tens\u00f5es de entrada e sa\u00edda \n\ndos transformadores ou est\u00e3o em fase ou desfasadas 180\u00ba. A Figura 56 apresenta os \n\nresultados do teste. \n\n \n\n \n\nFigura 56 - Sa\u00edda do circuito de dete\u00e7\u00e3o de zero. \n\n \n\nA amarelo est\u00e1 representada a tens\u00e3o da rede, reduzida pelo transformador, enquanto \n\no gr\u00e1fico a azul mostra a varia\u00e7\u00e3o do n\u00edvel de tens\u00e3o \u00e0 sa\u00edda do circuito de dete\u00e7\u00e3o. Os \n\nresultados vis\u00edveis na Figura 56 provam que o circuito de dete\u00e7\u00e3o de zero est\u00e1 a funcionar \n\ncom um desfasamento muito pequeno relativamente a cada passagem da tens\u00e3o da rede por \n\nzero, momento onde \u00e9 poss\u00edvel observar a sa\u00edda do circuito a variar entre os 0V e os 5V, tal \n\ncomo era esperado. Estes resultados s\u00e3o melhores do que os inicialmente calculados. \n\nA corrente m\u00ednima necess\u00e1ria no led foi verificada a partir de um ensaio que consistiu \n\nno aumento da tens\u00e3o aos terminais de entrada do circuito da Figura 50 at\u00e9 que houvesse \n\nm\u00faltiplas leituras sequenciais do mesmo estado l\u00f3gico, 1 ou 0, sendo o estado enviado \n\n\n\n71 \n\n \n\natrav\u00e9s da porta s\u00e9rie do Arduino. Os resultados mostraram uma tens\u00e3o de entrada de 6,9V, \n\nque resultou numa tens\u00e3o aos terminais do PC814 de 1V. Conseguimos assim encontrar a \n\ncorrente por:  \n\n?? =  \n6,9 ? 1\n\n23,5 ? 103\n ? 0,251 [??] \n\nPara este valor de corrente no led, \u00e9 poss\u00edvel calcular que a dete\u00e7\u00e3o de zero aconte\u00e7a \n\nquando a sinusoide da tens\u00e3o de entrada, 230V, atinge um valor instant\u00e2neo de: \n\n?????????? = (23,5 ? 10\n3 ? 0,251 ? 10?3)  + 1 ?  7,1 [?] \n\nEste atraso na dete\u00e7\u00e3o de zero n\u00e3o tem consequ\u00eancias pr\u00e1ticas no controlo dos \n\nmotores. \n\nPara completar os testes no circuito de controlo com varia\u00e7\u00e3o de velocidade, foi feito \n\num teste que consistia na atua\u00e7\u00e3o no TRIAC para alimentar o motor, cerca de 5ms ap\u00f3s o \n\ncontrolador receber o sinal de passagem por zero. O objetivo do teste era apenas confirmar \n\nque a atua\u00e7\u00e3o num TRIAC era feita de forma correta, com o tempo de espera em sincronismo \n\ncom a passagem por zero, com in\u00edcio durante um semi-ciclo e o fim pr\u00f3ximo do final do \n\nmesmo semi-ciclo. Os resultados podem ser observados na Figura 57. \n\n \n\n \n\nFigura 57 - Sinal de disparo de TRIAC em sincronismo com a dete\u00e7\u00e3o de zero. \n\n \n\n\n\n72 \n\n \n\nRepresentado a amarelo aparece a tens\u00e3o da rede, novamente reduzida atrav\u00e9s do \n\ntransformador j\u00e1 referido, e a azul o sinal de disparo do TRIAC. Observa-se na imagem que \n\no controlador d\u00e1 o sinal de disparo praticamente a meio do ciclo de onda e terminando \n\nmomentos antes do final do ciclo e da pr\u00f3xima passagem por zero, como pretendido, uma \n\nvez que foi programado um tempo de atraso de cerca 5ms. \n\nConfirmado o bom funcionamento da sucess\u00e3o de sincronismo com zero e sinal de \n\natua\u00e7\u00e3o no TRIAC, foi testado todo o circuito no TRIAC escolhido, conforme descrito na \n\nsec\u00e7\u00e3o 4.1.1, com um motor aplicado. Este teste permitiu observar a rota\u00e7\u00e3o do motor e a \n\nvaria\u00e7\u00e3o de velocidade que ocorria quando se alterava o valor do tempo de espera do disparo \n\nrelativamente \u00e0 dete\u00e7\u00e3o de zero. \n\nEstes testes permitiram validar o correto funcionamento do hardware de controlo de \n\nvelocidade dos motores ventiladores. \n\n \n\n? Controlo do motor de alimenta\u00e7\u00e3o \n\nOs par\u00e2metros usados para a alimenta\u00e7\u00e3o da salamandra pelos controladores da \n\nMVM t\u00eam um tempo de alimenta\u00e7\u00e3o vari\u00e1vel \u2013 dependente do n\u00edvel de pot\u00eancia selecionado \n\n- durante um per\u00edodo de 4 segundos. Para a utiliza\u00e7\u00e3o de um rel\u00e9 de contacto mec\u00e2nico, o \n\nper\u00edodo e os tempos de alimenta\u00e7\u00e3o foram ajustados para intervalos mais longos, \n\nproporcionais aos dos controladores existentes, de maneira a evitar um desgaste precoce do \n\nmecanismo de contacto e a diminuir a frequ\u00eancia de comuta\u00e7\u00e3o deste, geradora de ru\u00eddo \n\naud\u00edvel que se torna inc\u00f3modo. O motor alimentador mostrou-se funcional quando testado \n\ncom o m\u00f3dulo de rel\u00e9 anteriormente referido, no entanto, o restante sistema apresentava \n\nanomalias no funcionamento. \n\nNo in\u00edcio dos testes com o controlador instalado na salamandra, invariavelmente o \n\nLCD produzia caracteres t\u00edpicos de um sistema corrompido ao final de algum tempo. Uma \n\nimagem desse estado pode ser vista na Figura 58. \n\n \n\n\n\n73 \n\n \n\n \n\nFigura 58 - Ecr\u00e3 corrompido pela comuta\u00e7\u00e3o do motor de alimenta\u00e7\u00e3o. \n\n \n\nMesmo com o LCD ileg\u00edvel o controlador continuava a operar de acordo com o \n\nexpect\u00e1vel. Dado que o LCD \u00e9 bastante sens\u00edvel a flutua\u00e7\u00f5es de tens\u00e3o e como estamos a \n\nlidar com comuta\u00e7\u00f5es de carga com pot\u00eancia muitas vezes superior \u00e0 do ecr\u00e3 poderia haver \n\nalguma interfer\u00eancia, sobretudo tendo em conta que neste prot\u00f3tipo a disposi\u00e7\u00e3o e \n\ncomprimento dos cabos de liga\u00e7\u00e3o e o espa\u00e7o entre os elementos com diferentes n\u00edveis de \n\ntens\u00e3o permitiam uma maior exposi\u00e7\u00e3o a perturba\u00e7\u00f5es como interfer\u00eancias eletromagn\u00e9ticas \n\n(EMI) radiadas. \n\nAp\u00f3s analise da tens\u00e3o de alimenta\u00e7\u00e3o do ecr\u00e3 recorrendo a um oscilosc\u00f3pio foi \n\nposs\u00edvel verificar que a alimenta\u00e7\u00e3o do ecr\u00e3 (5V) apresentava de forma frequente um \n\nfen\u00f3meno transit\u00f3rio e que esta anomalia coincidia com a comuta\u00e7\u00e3o do rel\u00e9 do motor \n\nalimentador da salamandra. Na Figura 59 pode ser observado um registo da linha de 5V, \n\ncapturado pelo oscilosc\u00f3pio, num momento de comuta\u00e7\u00e3o do rel\u00e9 do motor alimentador. \n\n \n\n \n\nFigura 59 - Registo de efeito da comuta\u00e7\u00e3o do rel\u00e9 na alimenta\u00e7\u00e3o de 5V. \n\n\n\n74 \n\n \n\nOs picos de tens\u00e3o registados s\u00e3o demasiado elevados, chegando a ultrapassar os \n\n20V, um valor quatro vezes superior \u00e0 tens\u00e3o nominal. Cada comuta\u00e7\u00e3o do motor de \n\nalimenta\u00e7\u00e3o provocava um transit\u00f3rio forte o suficiente para corromper os dados do LCD. \n\nApesar de o microcontrolador partilhar a alimenta\u00e7\u00e3o, n\u00e3o h\u00e1 evid\u00eancias de efeitos destas \n\nvaria\u00e7\u00f5es de tens\u00e3o no seu funcionamento. No entanto, estes picos de tens\u00e3o podem \n\nfacilmente provocar danos, comprometendo a sua fiabilidade e longevidade. \n\nComprovada a rela\u00e7\u00e3o da comuta\u00e7\u00e3o com os problemas no sistema de visualiza\u00e7\u00e3o, \n\nteria que se testar para aferir da exist\u00eancia de ru\u00eddo em situa\u00e7\u00e3o de funcionamento com carga \n\ne em vazio. \n\nForam mantidos todos os elementos da salamandra ligados ao controlador com \n\nexce\u00e7\u00e3o do motor alimentador, ficando o programa a correr com a comuta\u00e7\u00e3o do rel\u00e9 sem \n\ncarga. Ao fim de mais de 1 hora n\u00e3o foi registada nenhuma anomalia observ\u00e1vel diretamente \n\n\u2013 corrup\u00e7\u00e3o no ecr\u00e3 \u2013 ou medida com o oscilosc\u00f3pio, o que provou a origem do problema \n\nna comuta\u00e7\u00e3o do motor de alimenta\u00e7\u00e3o atrav\u00e9s do rel\u00e9. \n\nO motor \u00e9 uma carga indutiva e, como tal, n\u00e3o permite que o valor da corrente se \n\naltere instantaneamente. No entanto, \u00e9 isso que o rel\u00e9 faz quando abre e fecha os contactos, \n\ninterrompendo o circuito e causando uma perturba\u00e7\u00e3o que \u00e9 captada pela bobine do rel\u00e9 e \n\nconsequentemente propagada para a alimenta\u00e7\u00e3o de 5V. Aquando da comuta\u00e7\u00e3o dos \n\ncontactos \u00e9 criado um pico de tens\u00e3o e um arco el\u00e9trico entre eles, gerados pela energia \n\narmazenada no motor \u2013 que inclusivamente, por breves momentos, se torna um gerador de \n\nenergia pois n\u00e3o se imobiliza de imediato. \n\nA solu\u00e7\u00e3o para comutar o motor de forma linear foi a utiliza\u00e7\u00e3o de um opto-isolador \n\ncom circuito de dete\u00e7\u00e3o de passagem por zero integrado como o MOC3041. Este circuito \n\napenas conduz quando a tens\u00e3o da rede se aproxima do valor zero, independentemente do \n\nmomento em que o controlador d\u00ea o sinal de comando. O mesmo acontece quando o sinal \n\nde comando deixa de existir, uma vez que o integrado s\u00f3 inibe a alimenta\u00e7\u00e3o do motor na \n\npassagem por zero seguinte ao t\u00e9rmino do sinal de comando. Desta forma o arranque e \n\nparagem do motor s\u00e3o bastante suaves, evitando flutua\u00e7\u00f5es e picos de tens\u00e3o. Tem ainda \n\numa vantagem para um poss\u00edvel cliente, que deixa de ouvir qualquer ru\u00eddo ao proveniente \n\ndo controlo do motor de alimenta\u00e7\u00e3o como acontecia no caso do rel\u00e9 cujo movimento dos \n\ncontactos mec\u00e2nicos \u00e9 aud\u00edvel. \n\n\n\n75 \n\n \n\nO circuito de controlo do motor foi o recomentado pelo fabricante do MOC, segundo \n\ninforma\u00e7\u00e3o disponibilizada na ficha t\u00e9cnica, onde est\u00e1 inclu\u00eddo um circuito de snubber \n\nid\u00eantico ao utilizado no controlo dos ventiladores. \n\n A placa desenvolvida para testar o circuito \u00e9 apresentada na Figura 60. \n\n \n\n \n\nFigura 60 - Acionamento de motor de alimenta\u00e7\u00e3o, em prot\u00f3tipo, atrav\u00e9s de opto-isolador com dete\u00e7\u00e3o de passagem por \n\nzero. \n\n \n\nPara comprovar o bom funcionamento do sistema, a salamandra ficou em \n\nfuncionamento durante v\u00e1rias horas e simultaneamente a alimenta\u00e7\u00e3o de 5V era \n\nmonitorizada pelo oscilosc\u00f3pio \u2013 configurado para detetar qualquer pico de tens\u00e3o superior \n\na 5,1V. Durante o teste n\u00e3o houve qualquer registo de interfer\u00eancia na linha de alimenta\u00e7\u00e3o \n\nde 5V nem houve registo de qualquer anomalia no ecr\u00e3 LCD at\u00e9 \u00e0 data de escrita deste \n\nrelat\u00f3rio. \n\n \n\n? Aquisi\u00e7\u00e3o de sinal \u2013 sensores de temperatura \n\nA an\u00e1lise ao funcionamento dos sensores de temperatura foi feita atrav\u00e9s do envio, \n\natrav\u00e9s da porta s\u00e9rie, dos valores de temperatura e tens\u00e3o reportados pelo controlador \n\ncomparando-os com os valores medidos por um equipamento de refer\u00eancia, calibrado, de \n\nforma a aferir acerca da sua fiabilidade. \n\nA Figura 61 e a Figura 62 mostram os resultados da an\u00e1lise aos sensores de \n\ntemperatura de fumos e ambiente, respetivamente. \n\n \n\n\n\n76 \n\n \n\n \n\nFigura 61 - Compara\u00e7\u00e3o entre sinal, temperatura lida e real do sensor de fumos. \n\n \n\n \n\nFigura 62 - Compara\u00e7\u00e3o entre sinal, temperatura lida e real do sensor ambiente. \n\n \n\nOs resultados indicam uma leitura correta por parte do controlador n\u00e3o tendo sido \n\nverificadas discrep\u00e2ncias consider\u00e1veis entre o valor medido e o valor real para a gama de \n\n37\n\n62\n\n81\n\n105\n\n135\n\n159\n\n41\n\n60\n\n80\n\n101\n\n130\n\n154\n\n25\n\n45\n\n65\n\n85\n\n105\n\n125\n\n145\n\n165\n\n3,16 4,09 4,48 4,73 4,87 4,93\n\nT\ne\n\nm\np\n\ne\nra\n\ntu\nra\n\n (\n\u00baC\n\n)\n\nSinal de entrada (V)\n\nCompara\u00e7\u00e3o entre sinal, temperatura lida \ne real do sensor de fumos\n\nTemperatura\nmedida\n\nTemperatura\nreal\n\n19\n\n25\n\n29\n\n32\n\n19\n\n27\n\n32\n\n36\n\n15\n\n20\n\n25\n\n30\n\n35\n\n40\n\n2,21 2,55 2,72 2,88\n\nT\ne\n\nm\np\n\ne\nra\n\ntu\nra\n\n (\n\u00baC\n\n)\n\nSinal de entrada (V)\n\nCompara\u00e7\u00e3o entre sinal, temperatura lida e real do \nsensor ambiente\n\nTemperatura\nmedida\n\nTemperatura\nreal\n\n\n\n77 \n\n \n\nmedi\u00e7\u00e3o do teste. O sensor de temperatura ambiente revelou uma margem de erro superior \n\nao sensor de temperatura de fumos. Esta diferen\u00e7a mais acentuada deve-se \u00e0 constitui\u00e7\u00e3o \n\nf\u00edsica que lhe confere uma resist\u00eancia t\u00e9rmica superior \u2013 o sensor est\u00e1 envolvido por material \n\npl\u00e1stico, ao contr\u00e1rio do sensor de fumos cujo corpo envolvente \u00e9 met\u00e1lico. Por este motivo, \n\ntamb\u00e9m foi mais dif\u00edcil, durante o teste, garantir a homogeneidade t\u00e9rmica no sensor de \n\ntemperatura ambiente, fator que pode ser motivo de erro de leitura. Uma vez que estes s\u00e3o \n\nos sensores utilizados pela MVM, n\u00e3o foi ponderada uma troca por outro tipo de sensores, \n\nnomeadamente no que diz respeito ao sensor de temperatura ambiente. \n\n \n\n? Comunica\u00e7\u00e3o por Bluetooth \n\nO teste de comunica\u00e7\u00e3o por Bluetooth foi feito recorrendo a uma aplica\u00e7\u00e3o que serve \n\nde interface com o controlador. Esta aplica\u00e7\u00e3o foi desenvolvida com recurso ao programa \n\nVisual Studio 2015, a exemplos de aplica\u00e7\u00f5es e tutoriais disponibilizados pela Microsoft. \n\nPor utilizar as mais recentes ferramentas, a aplica\u00e7\u00e3o pertence \u00e0 Windows Universal \n\nPlatform, o que significa que \u00e9 capaz de correr em todas as vers\u00f5es do sistema operativo \n\nWindows 10; em computador, tablet ou smartphone.  \n\nO teste consistiu no controlo da salamandra atrav\u00e9s da aplica\u00e7\u00e3o utilizando um \n\nsmartphone, algo que se mostrou funcional e mais pr\u00e1tico que a utiliza\u00e7\u00e3o do comando \n\nremoto pois o smartphone n\u00e3o necessita de ser apontado em dire\u00e7\u00e3o \u00e0 salamandra como o \n\ncomando. A Figura 63 mostra a interface da aplica\u00e7\u00e3o, onde \u00e9 poss\u00edvel verificar a exist\u00eancia \n\nde 6 bot\u00f5es tal como os utilizados na placa de interface ou no comando remoto. \n\n \n\n\n\n78 \n\n \n\n \n\nFigura 63 - Interface da aplica\u00e7\u00e3o m\u00f3vel para Windows 10, com comandos por Bluetooth. \n\n \n\n4.2. Controlador \u2013 Hardware em placa \n\n\u00fanica \n\nOs ensaios ao controlador realizados na sec\u00e7\u00e3o anterior procuraram, al\u00e9m de corrigir \n\neventuais anomalias, comprovar a fiabilidade t\u00e9cnica do equipamento.  \n\nComo o conjunto de hardware utilizado nos ensaios n\u00e3o apresentou problemas ou \n\nfalhas de ordem t\u00e9cnica ao longo das horas, ciclos de teste e parametriza\u00e7\u00e3o a que foi sujeito, \n\nconsiderou-se estar em condi\u00e7\u00f5es de avan\u00e7ar com o desenvolvimento de um sistema \n\nintegrado.  \n\nA integra\u00e7\u00e3o do sistema de controlo podia ser feita de duas maneiras: a primeira, \n\nmais comum, agregando todos os componentes eletr\u00f3nicos numa \u00fanica placa, a segunda, \n\naproveitando o conceito das shields do Arduino e tornar o pr\u00f3prio controlador numa shield, \n\nseparando o hardware desenvolvido no projeto da plataforma de desenvolvimento que \n\n\n\n79 \n\n \n\nagrega o microcontrolador. Apesar de ser uma solu\u00e7\u00e3o pouco vulgar, \u00e9 sustentada pelo fator \n\nfinanceiro: o custo de produ\u00e7\u00e3o inferior. \n\nUma placa de desenvolvimento equivalente ao Arduino Mega, como a utilizada no \n\nprot\u00f3tipo do controlador, pode comprar-se por cerca de 7\u20ac enquanto que comprar apenas o \n\nmicrocontrolador, ATmega2560, custa cerca de 10\u20ac e exige normalmente volumes m\u00ednimos \n\nde compra entre as 1000 e as 1500 unidades. Para comprar uma quantidade menor o pre\u00e7o \n\nunit\u00e1rio sobe para cerca de 15\u20ac. A este pre\u00e7o ainda ter\u00edamos que adicionar o pre\u00e7o de um \n\nm\u00f3dulo de comunica\u00e7\u00e3o para programar o microcontrolador (cerca de 2\u20ac), oscilador e \n\ncondensadores que apesar de terem um custo reduzido - na ordem dos c\u00eantimos - acabam \n\npor ter o seu peso com o acumular de unidades fabricadas. Futuramente, caso se pretenda \n\navan\u00e7ar para um volume de produ\u00e7\u00e3o, o pre\u00e7o da placa com todos os componentes \n\nintegrados pode tornar-se mais competitivo. \n\nFinalizados os testes de hardware no prot\u00f3tipo, avan\u00e7ou-se para o desenvolvimento \n\ndas placas e dos seus esquemas el\u00e9tricos. Para tal, foi utilizado o software gratuito \n\nDesignSpark PCB. Este software permite selecionar os componentes diretamente de uma \n\nloja online, importando o footprint (desenho da coloca\u00e7\u00e3o do componente na placa de \n\ncircuito impresso) espec\u00edfico. \n\nO controlo do equipamento ficou a cargo da mesma placa Arduino Mega, que tem \n\ncomo \u201cshield\u201d a placa desenvolvida neste projeto. O LCD, os bot\u00f5es de press\u00e3o e o recetor \n\ninfravermelhos ficaram integrados numa placa \u00e0 parte, exclusiva \u00e0 interface do equipamento. \n\nO m\u00f3dulo de Bluetooth e o m\u00f3dulo de rel\u00f3gio de tempo real podem ser ligados \u00e0 placa \n\nprincipal por interm\u00e9dio de conectores dedicados. \n\nNesta placa de interface deveria tamb\u00e9m ter sido integrado um sinalizador sonoro \n\npara emitir um feedback de uma entrada seja de um bot\u00e3o, sinal do comando ou comunica\u00e7\u00e3o \n\nBluetooth, tal como no prot\u00f3tipo. O sinalizador foi substitu\u00eddo por um led que emite luz a \n\ncada entrada do utilizador como sinal de feedback. \n\nA placa de controlo tem as mesmas dimens\u00f5es do controlador utilizado pela MVM \n\nde modo a ser poss\u00edvel trocar facilmente o controlador que existe nas salamandras \n\ncomercializadas pela empresa pela placa desenvolvida neste projeto. N\u00e3o foram tidas em \n\nconsidera\u00e7\u00e3o as dimens\u00f5es para a cria\u00e7\u00e3o da placa de interface pois nos modelos \n\ncomercializados por outras marcas estas est\u00e3o envolvidas numa caixa de pl\u00e1stico.  \n\n\n\n80 \n\n \n\nPara esta placa de controlo foram adicionadas algumas funcionalidades que poder\u00e3o \n\nser \u00fateis no futuro e obrigariam a uma revis\u00e3o da placa caso n\u00e3o fossem j\u00e1 contempladas: \n\n? Adicionada sa\u00edda para rel\u00e9 de bomba de \u00e1gua para \u00e1guas sanit\u00e1rias e \n\naquecimento central \u2013 sabendo que muitas salamandras t\u00eam uma bomba de \u00e1gua para \n\naquecimento de \u00e1guas sanit\u00e1rias era incoerente desenvolver uma placa e n\u00e3o preparar o \n\nsistema para controlar este tipo de equipamentos. Mais ainda, as caldeiras a pellets t\u00eam um \n\nprocesso de queima muito semelhante ao das salamandras e uma ligeira modifica\u00e7\u00e3o no \n\nfirmware do controlador permite-lhe funcionar em ambos os sistemas. A bomba de fluido \n\nt\u00e9rmico que existe nas caldeiras tamb\u00e9m pode ser controlada a partir deste rel\u00e9. \n\n? Adicionadas 2 liga\u00e7\u00f5es anal\u00f3gicas na liga\u00e7\u00e3o \u00e0 placa de interface \u2013 a placa \n\nde interface do controlador est\u00e1 conectada com a placa de controlo atrav\u00e9s de uma ficha de \n\n20 pinos. Para a interface utilizada no prot\u00f3tipo n\u00e3o s\u00e3o necess\u00e1rios todos os pinos que a \n\nficha disponibiliza. No entanto, o controlador n\u00e3o deve estar limitado \u00e0 utiliza\u00e7\u00e3o desta \n\ninterface. A adi\u00e7\u00e3o de duas liga\u00e7\u00f5es aos portos anal\u00f3gicos do microcontrolador permite por \n\nexemplo substituir a placa de interface por outra que apenas tenhas dois potenci\u00f3metros que \n\nregulem a pot\u00eancia e a velocidade do ventilador ambiente. O n\u00famero de liga\u00e7\u00f5es a portos \n\ndigitais tamb\u00e9m permite substituir a interface por um ecr\u00e3 t\u00e1ctil. A placa de controlo foi \n\ndesenvolvida para estar preparada para receber v\u00e1rios tipos de interface necessitando apenas \n\nde altera\u00e7\u00f5es no firmware. \n\n? Adicionadas duas interrup\u00e7\u00f5es na alimenta\u00e7\u00e3o de pot\u00eancia da placa \u2013 as \n\nduas interrup\u00e7\u00f5es podem ser usadas com prote\u00e7\u00f5es t\u00e9rmicas ou pressostato. A abertura \n\ndestes contactos interrompe a alimenta\u00e7\u00e3o de toda a parte de pot\u00eancia da placa \u2013 motores e \n\nresist\u00eancia. \n\nEstas adi\u00e7\u00f5es visam preparar as placas para futuros desenvolvimentos, n\u00e3o a \n\nlimitando a um s\u00f3 equipamento de queima de pellets ou a uma s\u00f3 op\u00e7\u00e3o de interface. A \n\nFigura 64 mostra o conjunto das placas de controlo e de interface do controlador, bem como \n\no cabo de liga\u00e7\u00e3o entre elas. \n\n \n\n\n\n81 \n\n \n\n \n\nFigura 64 - Placas constituintes do controlador desenvolvido. \n\n \n\nPara o sistema integrado foi necess\u00e1rio desenvolver um circuito de alimenta\u00e7\u00e3o da \n\neletr\u00f3nica de controlo, que era at\u00e9 ent\u00e3o feito atrav\u00e9s de uma porta USB de um computador \n\nport\u00e1til. Esta integra\u00e7\u00e3o motivou tamb\u00e9m altera\u00e7\u00f5es no circuito de dete\u00e7\u00e3o de zero, que \n\ntiveram como objetivo melhorar alguns aspetos que, apesar de serem tecnicamente vi\u00e1veis, \n\npodiam ser melhorados por motivos de seguran\u00e7a e at\u00e9 econ\u00f3micos, recordando que as \n\nresist\u00eancias do circuito detetor de zero t\u00eam perdas de mais de 1W cada. Estas altera\u00e7\u00f5es \n\nrelativamente ao prot\u00f3tipo s\u00e3o apresentadas na sec\u00e7\u00e3o seguinte. \n\nAquando do desenvolvimento da placa, para a coloca\u00e7\u00e3o dos seus componentes foi \n\nnecess\u00e1rio ter em considera\u00e7\u00e3o a facilidade de instala\u00e7\u00e3o no equipamento e interliga\u00e7\u00e3o aos \n\ncomponentes do equipamento de maneira a facilitar o processo e a minimizar erros de \n\nprodu\u00e7\u00e3o/montagem. Houve indica\u00e7\u00e3o por parte da empresa de que seria vantajoso ter fichas \n\nde liga\u00e7\u00e3o espec\u00edficas para cada um dos componentes, que impossibilitassem uma instala\u00e7\u00e3o \n\nincorreta. \n\n \n\n \n\n \n\n\n\n82 \n\n \n\n4.2.1. Alimenta\u00e7\u00e3o de controlo \n\nDurante a fase de testes e desenvolvimento do projeto a eletr\u00f3nica de controlo foi \n\nalimentada atrav\u00e9s de uma liga\u00e7\u00e3o a um computador por uma porta USB que consegue \n\nfornecer at\u00e9 500mA a 5V. A placa Arduino est\u00e1 preparada para ser alimentada diretamente \n\na partir destas portas pelo que se tornou na solu\u00e7\u00e3o mais r\u00e1pida e pr\u00e1tica, mais ainda porque \n\na pr\u00f3pria programa\u00e7\u00e3o do microcontrolador \u00e9 feita atrav\u00e9s desta liga\u00e7\u00e3o. Para uma solu\u00e7\u00e3o \n\nfinal, utilizar uma porta USB de um computador para alimentar a eletr\u00f3nica de controlo n\u00e3o \n\nfaz sentido. Acrescentar um transformador externo ligado \u00e0 rede de 230V que apenas \n\nalimente a tens\u00e3o de 5V tamb\u00e9m n\u00e3o se torna pr\u00e1tico e acrescenta complexidade indesejada \n\nna montagem da m\u00e1quina. \n\nPara dimensionar corretamente a alimenta\u00e7\u00e3o do controlador \u00e9 necess\u00e1rio perceber \n\nqual o seu consumo. A medi\u00e7\u00e3o de consumo foi feita com o rel\u00e9 ativo e o brilho e contraste \n\ndo ecr\u00e3 no m\u00e1ximo de maneira a que o valor medido fosse o m\u00e1ximo necess\u00e1rio. Esta \n\nsitua\u00e7\u00e3o s\u00f3 se verifica quando o rel\u00e9 est\u00e1 energizado, ou seja, no in\u00edcio do processo de \n\nqueima, quando a resist\u00eancia est\u00e1 a aquecer. Arredondando os valores verificou-se que a \n\nalimenta\u00e7\u00e3o da parte de controlo necessita de conseguir fornecer cerca de 1W de pot\u00eancia a \n\n5V, o que equivale a 200mA. Como termo de compara\u00e7\u00e3o, foi feita uma medi\u00e7\u00e3o tamb\u00e9m \n\nno estado normal de opera\u00e7\u00e3o, sem o rel\u00e9 energizado, onde se verificou que o consumo de \n\ncorrente reduz para os 102mA, indicando 0,511W, ou seja, praticamente metade dos valores \n\nm\u00e1ximos do conjunto hardware utilizado neste controlador. \n\nA maneira mais r\u00e1pida de solucionar a alimenta\u00e7\u00e3o do microcontrolador sem \n\nqualquer liga\u00e7\u00e3o externa \u00e9 utilizar um carregador USB e integr\u00e1-lo no desenho da placa final \n\nseja como m\u00f3dulo \u2013 tipo shield \u2013 ou integrando por completo todo o seu circuito el\u00e9trico na \n\nplaca. Estes carregadores t\u00eam um custo aproximado de 1,5\u20ac. \n\nH\u00e1 ainda uma segunda op\u00e7\u00e3o que embora seja um pouco mais dispendiosa torna todo \n\no projeto mais eficiente e fi\u00e1vel. Como referido anteriormente, o controlador ir\u00e1 permanecer \n\ninstalado dentro da estrutura salamandra, local onde se atingem temperaturas na ordem dos \n\n40\u00baC. Os carregadores USB e os m\u00f3dulos de alimenta\u00e7\u00e3o s\u00e3o bastante ineficientes e, como \n\ntal, aquecem bastante. Uma utiliza\u00e7\u00e3o prolongada em ambientes com temperaturas elevadas \n\ncomo \u00e9 o caso do interior da estrutura de um equipamento de queima de pellets pode revelar-\n\n\n\n83 \n\n \n\nse perigoso ou mesmo comprometer a fiabilidade do controlador. Al\u00e9m disso, o valor de \n\ntens\u00e3o tem sempre presente um elevado n\u00edvel de ru\u00eddo, como mostra a Figura 65. \n\n \n\n \n\nFigura 65 - An\u00e1lise de ru\u00eddo em carga de um carregador USB. \n\n \n\nA an\u00e1lise da Figura 65 foi feita no prot\u00f3tipo de testes a fim de validar a ideia de \n\nintegra\u00e7\u00e3o no controlador final. Pelos resultados observ\u00e1veis na Figura, esta solu\u00e7\u00e3o n\u00e3o foi \n\nconsiderada satisfat\u00f3ria. \n\nUm transformador de montagem em placa de circuito impresso, al\u00e9m de permitir uma \n\nsolu\u00e7\u00e3o de alimenta\u00e7\u00e3o integrada, mais eficiente e segura, permite tamb\u00e9m utilizar a tens\u00e3o \n\ndo secund\u00e1rio no circuito de dete\u00e7\u00e3o de zero e assim eliminar as resist\u00eancias de 2W de \n\npot\u00eancia utilizadas. Para o desenvolvimento de uma solu\u00e7\u00e3o integrada final esta mostrou-se \n\na op\u00e7\u00e3o com o melhor compromisso apesar de ser mais dispendiosa. Foi utilizado um \n\ntransformador de 230V/9V com uma pot\u00eancia de 5VA que no mercado tem um custo unit\u00e1rio \n\nde 5\u20ac. Podia ter sido utilizado um transformador com uma tens\u00e3o menor no secund\u00e1rio para \n\ndissipar menos pot\u00eancia, mas estes t\u00eam um custo superior \u2013 transformador de 230V/8V de \n\n4VA, p. ex., tem um pre\u00e7o superior a 8\u20ac. A Figura 66 mostra o diagrama de blocos dos \n\n\n\n84 \n\n \n\ncircuitos de dete\u00e7\u00e3o de zero e de alimenta\u00e7\u00e3o redesenhados para a integra\u00e7\u00e3o com utiliza\u00e7\u00e3o \n\nde um transformador. \n\n \n\n \n\nFigura 66 - Diagrama de blocos dos circuitos de alimenta\u00e7\u00e3o e dete\u00e7\u00e3o de zero com a placa de controlo/Arduino. \n\n \n\nA Figura 67 mostra o esquema el\u00e9trico redesenhado do circuito de dete\u00e7\u00e3o de zero \n\nrecorrendo \u00e0 sinusoide de tens\u00e3o do secund\u00e1rio do transformador de montagem em placa de \n\ncircuito impresso. \n\n \n\n \n\nFigura 67 - Esquema de circuito de dete\u00e7\u00e3o de zero com recurso a transformador. \n\n \n\nFazendo os c\u00e1lculos para o dimensionamento do circuito de dete\u00e7\u00e3o de zero \n\nconsiderando o transformador com uma tens\u00e3o no secund\u00e1rio de 9VAC e uma tens\u00e3o aos \n\nterminais do d\u00edodo - segundo a ficha t\u00e9cnica - Vf = 1,2V para If = 20mA, de maneira a limitar \n\na corrente no led do opto-acoplador, temos: \n\n\n\n85 \n\n \n\n? =\n9 ? 1,2\n\n20 ? 10?3\n? 390 [?]  \n\nCom este valor de resist\u00eancia a corrente m\u00e1xima no led mant\u00e9m-se abaixo do valor \n\nm\u00e1ximo indicado pelo fabricante, 50mA: \n\nIf ???\n=  \n\n(?2 ? 9) ? 1,2\n\n390\n?  29,4 [??] \n\nUma resist\u00eancia de 390? satisfaz a limita\u00e7\u00e3o de corrente para o led do opto-\n\nacoplador. Por se saber \u00e0 partida que o consumo de pot\u00eancia por parte da eletr\u00f3nica de \n\ncontrolo \u00e9 percentualmente reduzido em rela\u00e7\u00e3o \u00e0 pot\u00eancia nominal do transformador - o \n\nque leva a um aumento de tens\u00e3o aos terminais do secund\u00e1rio - foi utilizada uma resist\u00eancia \n\nde valor superior, 680?.  \n\nPara este circuito, o integrado identificado na Figura 67 como U1 foi alterado para o \n\nPC817 por dificuldades na aquisi\u00e7\u00e3o do modelo utilizado no circuito anterior. Como \n\nconsequ\u00eancia dessa altera\u00e7\u00e3o teve que ser colocado um d\u00edodo externo, D1, apesar de as suas \n\ncaracter\u00edsticas el\u00e9tricas n\u00e3o diferirem do PC814. \n\nPara o circuito de alimenta\u00e7\u00e3o do controlador, a tens\u00e3o do secund\u00e1rio do \n\ntransformador tem que ser retificada, filtrada e de seguida regulada. A retifica\u00e7\u00e3o da onda \n\nsinusoidal do transformador \u00e9 feita atrav\u00e9s de uma ponte de d\u00edodos (custo de 0,36\u20ac). \n\nAs express\u00f5es que se seguem resultam da rela\u00e7\u00e3o que se verifica entre a carga \n\narmazenada Q [C] num condensador com capacidade C [F], corrente constante de \n\ncarga/descarga I [A], durante um tempo ?T [s] e respetiva varia\u00e7\u00e3o de tens\u00e3o ?V [V]. \n\n? = ? ? ? \n\n? ? ?? = ? ? ?? \n\nA capacidade do condensador, ?, \u00e9 escolhida em fun\u00e7\u00e3o da corrente que o circuito \n\ntem de fornecer \u00e0 carga IDC (corrente de descarga do condensador) e da m\u00e1xima varia\u00e7\u00e3o \n\nde tens\u00e3o admiss\u00edvel (Vripple). ?? \u00e9 o per\u00edodo da onda retificada, que ser\u00e1 de 10ms uma \n\nvez que a onda sinusoidal tem uma frequ\u00eancia de 50Hz (per\u00edodo de 20ms). \n\n \n\n\n\n86 \n\n \n\nUsando as express\u00f5es anteriores, resulta: \n\n?? = ??????? =\n??? ? ??\n\n?\n? ? ?? ? ? =\n\n??? ? ??\n\n???????\n \n\nO secund\u00e1rio do transformador tem uma tens\u00e3o de 9VAC, o que significa que o seu \n\nvalor m\u00e1ximo ser\u00e1 de: \n\n9 ? ?2 ? 12,73 [?] , \n\ntens\u00e3o \u00e0 qual temos que retirar 1,4V devido \u00e0 tens\u00e3o nos terminais dos d\u00edodos \n\n12,73 ? 1,4 = 11,33 [?] \n\nO regulador de tens\u00e3o utilizado foi o LM7805 que, segundo a sua ficha t\u00e9cnica, \n\nnecessita de ter pelo menos 7V (Vdrop = 2V) na entrada para conseguir produzir uma tens\u00e3o \n\nde sa\u00edda regulada de 5V. Assim, conclui-se que a tens\u00e3o de ripple, para que o circuito \n\nfuncione corretamente, n\u00e3o pode ser superior a: \n\n11,33 ? 7 = 4,33 [V] \n\nO transformador utilizado tem uma pot\u00eancia de 5VA, o que corresponde a uma \n\ncorrente m\u00e1xima de: \n\n? = ? ? ? \n\n5 = 9 ? ? \n\n5\n\n9\n= ? ? 0,556 [?] \n\nA partir destes c\u00e1lculos \u00e9 poss\u00edvel calcular a capacidade m\u00ednima do condensador de \n\nfiltragem atrav\u00e9s da f\u00f3rmula inicial: \n\n? =\n0,556 ? 0,01\n\n4,33\n= 1284 [??] \n\nConclui-se que um condensador com um valor de 1284 ?? ser\u00e1 o m\u00ednimo para o \n\nfuncionamento do circuito. A esta capacidade corresponderia uma tens\u00e3o de ripple de 4,33V \n\npara o consumo de corrente m\u00e1ximo admiss\u00edvel pelo transformador considerado. De maneira \n\na diminuir o valor de ripple, foi utilizado um condensador de capacidade superior, de valor \n\n2200uF. \n\n\n\n87 \n\n \n\nO circuito final de alimenta\u00e7\u00e3o pode ser visto na Figura 68. \n\n \n\nFigura 68 - Esquema el\u00e9trico do circuito de alimenta\u00e7\u00e3o do controlador. \n\n \n\nOs condensadores C2 e C3 t\u00eam um custo de 0,10\u20ac e 0,07\u20ac respetivamente. Foram \n\nadicionados ao circuito da Figura 68 por recomenda\u00e7\u00e3o do fabricante do regulador de tens\u00e3o, \n\nLM7805, que tem um custo de cerca de 0,40\u20ac. Para facilitar a montagem e por estar em \n\nparalelo com o condensador de filtragem, C2 foi ignorado uma vez que o valor de C1 \n\nutilizado \u00e9 superior \u00e0 soma dos valores C1 e C2 do esquema da Figura 68. \n\n \n\n4.2.2. Testes e resultados \n\nAp\u00f3s a fabrica\u00e7\u00e3o das placas, foi necess\u00e1rio confirmar o bom funcionamento do \n\ncircuito detetor de zero e de alimenta\u00e7\u00e3o. A an\u00e1lise ao circuito de dete\u00e7\u00e3o de zero foi feita \n\ncom a alimenta\u00e7\u00e3o ligada \u00e0 placa recorrendo a um oscilosc\u00f3pio para verificar o sinal \u00e0 sa\u00edda \n\ndo circuito e medida a tens\u00e3o na resist\u00eancia de maneira a calcular a corrente que passa no \n\nled. Foi tamb\u00e9m aferida a tens\u00e3o de ripple \u00e0 entrada e \u00e0 sa\u00edda do regulador de tens\u00e3o, medida \n\na sua temperatura e verificou-se a necessidade de utiliza\u00e7\u00e3o de um dissipador. \n\nA Figura 69 mostra a medi\u00e7\u00e3o do sinal de dete\u00e7\u00e3o de zero. \n\n \n\n\n\n88 \n\n \n\n \n\nFigura 69 - Sinal de sa\u00edda do detetor de passagem por zero. \n\n \n\nOs resultados da an\u00e1lise no oscilosc\u00f3pio est\u00e3o de acordo com o esperado. A cada \n\npassagem por zero o sinal do circuito alterna entre os 0V e os 5V. Obtemos uma onda \n\nquadrada com um per\u00edodo de 20ms, 50Hz de frequ\u00eancia. Na Figura 69 \u00e9 poss\u00edvel ainda \n\nobservar que a satura\u00e7\u00e3o do trans\u00edstor do optoacoplador est\u00e1 a ser feita para um n\u00edvel de \n\ntens\u00e3o de entrada de 3,04V. \n\nO valor medido de tens\u00e3o na resist\u00eancia de 680? foi de 10,04V de tens\u00e3o eficaz.  \n\nConclu\u00edmos que a corrente eficaz nela e no led do optoacoplador \u00e9 de: \n\n???? =  \n10,04\n\n680\n? 14,7 [??] \n\nPara analisar o circuito de alimenta\u00e7\u00e3o da parte de controlo ligou-se a placa \u00e0 \n\nalimenta\u00e7\u00e3o principal de 230V e com o oscilosc\u00f3pio mediu-se a entrada do regulador de \n\ntens\u00e3o. A Figura 70 representa o resultado dessa observa\u00e7\u00e3o. \n\n \n\n\n\n89 \n\n \n\n \n\nFigura 70 - An\u00e1lise de tens\u00e3o \u00e0 entrada do regulador ap\u00f3s retifica\u00e7\u00e3o e filtragem. \n\n \n\nNa Figura 70 \u00e9 poss\u00edvel observar a tens\u00e3o \u00e0 entrada do regulador de tens\u00e3o do circuito \n\nde alimenta\u00e7\u00e3o, j\u00e1 retificada e filtrada, de valor 13,4V. Os valores s\u00e3o mais elevados do que \n\no esperado, o que se deve ao facto do consumo de corrente da parte de controlo ser baixo \n\nrelativamente \u00e0 capacidade do transformador, o que faz com que a tens\u00e3o aos terminais do \n\nsecund\u00e1rio aumente. Verificamos tamb\u00e9m que o valor de ripple da tens\u00e3o de entrada \u00e9 de \n\n620mV o que \u00e9 suficiente para garantir a estabilidade da sa\u00edda do regulador de tens\u00e3o para \n\nestes n\u00edveis de tens\u00e3o de entrada. \n\nA componente AC da sa\u00edda de tens\u00e3o do regulador tamb\u00e9m foi analisada com recurso \n\na um oscilosc\u00f3pio e est\u00e1 representada na Figura 71. \n\n \n\n\n\n90 \n\n \n\n \n\nFigura 71 - An\u00e1lise da componente AC da tens\u00e3o de sa\u00edda do regulador de tens\u00e3o. \n\n \n\n\u00c9 poss\u00edvel verificar uma varia\u00e7\u00e3o de tens\u00e3o na ordem dos 64mV, o que \u00e9 um valor \n\nbastante aceit\u00e1vel para uma tens\u00e3o de 5V. \n\nTal como nos TRIACs, tamb\u00e9m no regulador de tens\u00e3o \u00e9 necess\u00e1rio ter aten\u00e7\u00e3o \u00e0 \n\npot\u00eancia dissipada. A sua ficha t\u00e9cnica informa uma resist\u00eancia t\u00e9rmica, ???? = 65\u00ba?/? e \n\n???? = 5\u00ba?/?, sendo ????  a resist\u00eancia t\u00e9rmica entre a jun\u00e7\u00e3o e a c\u00e1psula e ???? a \n\nresist\u00eancia t\u00e9rmica entre a jun\u00e7\u00e3o e o meio ambiente. \n\nA pot\u00eancia dissipada pelo regulador \u00e9 dada pela f\u00f3rmula: \n\n? = (??? ? ????) ? ???? \n\nPara um valor de tens\u00e3o eficaz de 13,4V e considerando a corrente m\u00e1xima \n\nnecess\u00e1ria para alimentar o controlador de 200mA, a pot\u00eancia \u00e9 dada por: \n\n? = (13,4 ? 5) ? 0,2 = 1,68 [?] \n\nA rela\u00e7\u00e3o entre a temperatura da jun\u00e7\u00e3o e a pot\u00eancia dissipada \u00e9 dada por: \n\n?? ? ?? = (???? + ???? ) ? ?? \n\n\n\n91 \n\n \n\n  No interior da salamandra de testes, a temperatura atinge os 40\u00baC mas apenas \n\nquando est\u00e1 em funcionamento, o que n\u00e3o coincide com o momento de maior requisito \n\nenerg\u00e9tico que o regulador de tens\u00e3o ir\u00e1 atingir. Nesta altura, considera-se uma temperatura \n\nambiente (??) de 25\u00baC, ainda que seja um valor manifestamente elevado para a esta\u00e7\u00e3o do \n\nano em que a salamandra \u00e9 suposta funcionar. Assim, temos segundo a equa\u00e7\u00e3o anterior: \n\n?? = ((65 + 5) ? 1,68) + 25 = 142,6 [\u00ba?] \n\n Esta situa\u00e7\u00e3o \u00e9 apenas tempor\u00e1ria, enquanto o processo de queima est\u00e1 a iniciar e o \n\nrel\u00e9 tem que ser energizado para a resist\u00eancia aquecer. Para comprovar os c\u00e1lculos, foram \n\nfeitos ensaios na salamandra, onde se verificou uma temperatura de 132\u00baC a uma temperatura \n\nambiente de cerca de 19\u00baC. \n\nDurante o processo de queima ou quando a salamandra est\u00e1 parada, o consumo de \n\ncorrente baixa para os 102mA, o que se traduz numa pot\u00eancia dissipada pelo regulador de: \n\n? = (13,4 ? 5) ? 0,102 ? 0,86 [?] \n\nMetade da pot\u00eancia significa tamb\u00e9m metade do calor produzido pelo regulador, mas \n\nnesta altura \u00e9 necess\u00e1rio considerar o pior caso, onde a salamandra est\u00e1 em funcionamento \n\ne a temperatura ambiente atinge 40\u00baC. Para estas condi\u00e7\u00f5es, temos: \n\n?? = ((65 + 5) ? 0,86) + 40 = 100,2 [\u00ba?] \n\n Se a temperatura atingir os 40\u00baC no interior da salamandra, o regulador estar\u00e1 a cerca \n\nde 85,5\u00baC. Em ambos os casos as temperaturas encontram-se abaixo dos 150\u00baC de \n\ntemperatura m\u00e1xima indicada na ficha t\u00e9cnica (?? = 150\u00ba?) mas durante a queima as \n\ntemperaturas s\u00e3o superiores a 100\u00baC e durante o aquecimento est\u00e1 muito acima dos 125\u00baC \n\nde temperatura m\u00e1xima de funcionamento (???? = 125\u00baC), motivo pelo qual a instala\u00e7\u00e3o de \n\num dissipador se torna indispens\u00e1vel. \n\nPara diminuir os riscos, garantir a fiabilidade t\u00e9rmica do regulador e prepar\u00e1-lo para \n\na poss\u00edvel instala\u00e7\u00e3o de um rel\u00e9 para acionamento da bomba de \u00e1guas sanit\u00e1rias, altura em \n\nque a pot\u00eancia dissipada ser\u00e1 maior, foi instalado um dissipador: apesar de o rel\u00e9 da bomba \n\nde \u00e1gua n\u00e3o funcionar em simult\u00e2neo com o rel\u00e9 da resist\u00eancia el\u00e9trica e, com isso, n\u00e3o \n\nexistir um aumento no valor da corrente m\u00e1xima necess\u00e1ria pelo controlador, \u00e9 expect\u00e1vel \n\n\n\n92 \n\n \n\nque o primeiro funcione durante longos per\u00edodos de tempo. Para uma temperatura ambiente \n\nde 19\u00baC, o regulador de corrente registou uma temperatura m\u00e1xima de 47\u00baC. \n\nA Figura 72 mostra o in\u00edcio da instala\u00e7\u00e3o da placa de controlo desenvolvida numa \n\nsalamandra a pellets, \n\n \n\n \n\nFigura 72 - Teste de instala\u00e7\u00e3o num equipamento de queima de pellets. \n\n \n\n4.3. Controlador \u2013 firmware \n\nPara que o microcontrolador execute todas as a\u00e7\u00f5es necess\u00e1rias ao funcionamento da \n\nsalamandra, precisa de executar um firmware que lhe permita atuar e comunicar \n\ncorretamente com o hardware que o rodeia - TRIACs, rel\u00e9, LCD, etc. \u2013, receber e perceber \n\na informa\u00e7\u00e3o que o utilizador lhe quer transmitir. \n\n\n\n93 \n\n \n\nO desenvolvimento do firmware deste controlador foi feito no ambiente de \n\ndesenvolvimento disponibilizado pelo Arduino, o Arduino IDE, vers\u00e3o 1.6.9. O seu \n\nfluxograma de funcionamento geral pode ser visto na Figura 73. \n\n \n\n \n\nFigura 73 - Fluxograma do ciclo principal de funcionamento do firmware. \n\n \n\nO ciclo principal do programa come\u00e7a por verificar se existe alguma entrada \n\ncorrespondente \u00e0 interface dispon\u00edvel no controlador: primeiro os bot\u00f5es de press\u00e3o e depois \n\no comando remoto por infravermelhos e comunica\u00e7\u00e3o Bluetooth. Caso exista a press\u00e3o de \n\nalgum bot\u00e3o ou tenha sido enviado algum comando atrav\u00e9s de infravermelhos ou Bluetooth, \n\nessa entrada \u00e9 tratada de imediato j\u00e1 que este tratamento corresponde apenas \u00e0 adi\u00e7\u00e3o, \n\nsubtra\u00e7\u00e3o ou altera\u00e7\u00e3o de estado (de verdadeiro para falso e vice-versa) de uma vari\u00e1vel. Nas \n\n\n\n94 \n\n \n\nentradas dos bot\u00f5es de press\u00e3o \u00e9 feita uma verifica\u00e7\u00e3o do estado l\u00f3gico dos seus portos \n\nenquanto que na comunica\u00e7\u00e3o por Bluetooth e infravermelhos existe transmiss\u00e3o de dados. \n\nSeguidamente o programa passa para a gest\u00e3o da alimenta\u00e7\u00e3o do equipamento, onde \n\ncorre uma fun\u00e7\u00e3o que gere o estado do motor alimentador de pellets. Esta fun\u00e7\u00e3o determina \n\nse a c\u00e2mara de combust\u00e3o deve ou n\u00e3o ser alimentada, tomando a decis\u00e3o em fun\u00e7\u00e3o do \n\nintervalo de tempo estabelecido pelas vari\u00e1veis \u201cfeeder_on_lvl\u201d e \u201cfeeder_off_lvl\u201d. Estas \n\nvari\u00e1veis ditam o tempo que o motor deve estar ligado e desligado. Quando a salamandra \n\nn\u00e3o est\u00e1 a iniciar a queima ou esta n\u00e3o existe, o motor n\u00e3o entra em funcionamento. \n\nO ciclo continua com a execu\u00e7\u00e3o dos c\u00e1lculos do controlo PID que gere velocidade \n\ndo motor exaustor, onde se inclui a leitura de velocidade atrav\u00e9s do encoder que lhe est\u00e1 \n\nassociado. Este controlador PID atua diretamente no tempo de disparo do TRIAC, alterando \n\no valor do registo do temporizador associado. \n\nNa \u00faltima fun\u00e7\u00e3o executada pelo ciclo principal, correspondente aos dois \u00faltimos \n\nblocos do fluxograma da Figura 73, s\u00e3o atualizadas as vari\u00e1veis auxiliares de gest\u00e3o de \n\ntempo, verifica\u00e7\u00e3o de erros do sistema, s\u00e3o feitas leituras das temperaturas de fumos e \n\nambiente, \u00e9 atualizada a informa\u00e7\u00e3o do LCD e \u00e9 executado c\u00f3digo referente \u00e0 tomada de \n\ndecis\u00e3o de arranque e t\u00e9rmino de queima, seja atrav\u00e9s de funcionamento autom\u00e1tico ou por \n\ninterm\u00e9dio da interface. Caso a pot\u00eancia da queima esteja a ser regulada automaticamente \n\ncom o objetivo de climatizar uma divis\u00e3o, tamb\u00e9m \u00e9 nesta altura que um controlador PID \n\nfaz os c\u00e1lculos para gerir a pot\u00eancia de sa\u00edda da salamandra. \n\nO firmware est\u00e1 dividido em v\u00e1rios ficheiros para permitir uma melhor organiza\u00e7\u00e3o \n\nfuncional. Al\u00e9m dos ficheiros que cont\u00eam c\u00f3digo de funcionamento do sistema, existe ainda \n\num ficheiro, \u201cconfigurations.h\u201d, que cont\u00e9m informa\u00e7\u00e3o e configura\u00e7\u00f5es relativas ao \n\ncontrolo do processo de queima e ao controlador, que foi criado de maneira a facilitar a \n\nconfigura\u00e7\u00e3o do firmware no modelo de equipamento onde vai ser executado. \n\nComo cada modelo de salamandra necessita de ser devidamente testado e \n\nparametrizado para que seja poss\u00edvel controlar a queima de pellets, neste ficheiro encontram-\n\nse os valores de alimenta\u00e7\u00e3o e velocidade de rota\u00e7\u00e3o do extrator de fumos para os v\u00e1rios \n\nn\u00edveis de pot\u00eancia pretendida, para o acendimento da salamandra, valores de temperatura de \n\ndete\u00e7\u00e3o de fogo, extin\u00e7\u00e3o de fogo, per\u00edodo de alimenta\u00e7\u00e3o de pellets, tempos de espera de \n\nmudan\u00e7a de n\u00edvel de pot\u00eancia, tempo m\u00e1ximo de espera de acendimento da salamandra, etc.. \n\n\n\n95 \n\n \n\nDesta forma qualquer fabricante de salamandras poder\u00e1 testar e parametrizar facilmente os \n\nseus modelos, bastando-lhe para isso alterar os valores de configura\u00e7\u00e3o existentes neste \n\nficheiro e carregar o firmware para o controlador. \n\nTer as configura\u00e7\u00f5es agregadas num s\u00f3 ficheiro tamb\u00e9m permite mais facilmente \n\norganizar o firmware num momento em que este sirva para controlar v\u00e1rios modelos de \n\nequipamentos. Nessa altura, pode existir um ficheiro de configura\u00e7\u00e3o do controlador que \n\nselecione e carregue um ficheiro de configura\u00e7\u00e3o espec\u00edfico de cada modelo, j\u00e1 \n\nparametrizado, ainda que todos os ficheiros coabitem na mesma diretoria. \n\n \n\n4.3.1. Descri\u00e7\u00e3o de funcionamento \n\nA programa\u00e7\u00e3o desenvolvida para este controlador garante o controlo da salamandra \n\nem todas as fases do processo de queima de pellets: o in\u00edcio e extin\u00e7\u00e3o de combust\u00e3o e a \n\nqueima cont\u00ednua. \n\nO fluxograma da Figura 74 representa o fluxograma do processo de in\u00edcio de \n\ncombust\u00e3o programado neste controlador. Este processo \u00e9 iniciado aquando da execu\u00e7\u00e3o do \n\nc\u00f3digo referente \u00e0 tomada de decis\u00e3o, no final do ciclo principal do firmware, sendo a partir \n\nda\u00ed feita toda a gest\u00e3o que permite a igni\u00e7\u00e3o dos pellets. \n\n \n\n\n\n96 \n\n \n\n \n\nFigura 74 - Fluxograma de in\u00edcio do processo de queima. \n\n \n\nAo dar ordem de in\u00edcio ao controlador, aparece uma mensagem informativa no ecr\u00e3 \n\ndo controlador, como mostra a Figura 75. \n\n \n\n \n\nFigura 75 - Mensagem informativa de in\u00edcio de funcionamento. \n\n \n\nA resist\u00eancia de aquecimento \u00e9 ligada e o motor alimentador faz girar o fuso sem-\n\nfim que transporta os pellets durante 3 segundos. Esta rota\u00e7\u00e3o inicial garante o transporte de \n\ncombust\u00edvel para a c\u00e2mara de combust\u00e3o ou do dep\u00f3sito para o fuso caso o combust\u00edvel \n\ntenha acabado durante a \u00faltima utiliza\u00e7\u00e3o. O ventilador de fumos come\u00e7a a renovar o ar da \n\nc\u00e2mara de combust\u00e3o a uma velocidade de 1300 rpm. A partir deste momento o sistema \n\nentra num processo em que aguarda a subida de temperatura de fumos. Quando esta \n\n\n\n97 \n\n \n\ntemperatura atinge um valor igual ou superior a 35\u00baC o sistema deteta que os pellets j\u00e1 est\u00e3o \n\na come\u00e7ar a arder na c\u00e2mara de combust\u00e3o e aumenta a velocidade do extrator de fumos \n\npara as 1500 rpm. Este incremento de velocidade visa garantir um maior fluxo de ar na \n\nc\u00e2mara de combust\u00e3o e como consequ\u00eancia enriquecer a mistura e potenciar o inc\u00eandio. \n\nQuanto se atinge uma temperatura igual ou superior a 50\u00baC nos fumos, o sistema \n\nreconhece que o inc\u00eandio existe e \u00e9 est\u00e1vel e passa a considerar-se em funcionamento. Nesta \n\naltura, a resist\u00eancia de aquecimento \u00e9 desligada e tanto a velocidade do motor de fumos \n\ncomo o intervalo e tempo de alimenta\u00e7\u00e3o dos pellets assumem novos valores de acordo com \n\no n\u00edvel de pot\u00eancia selecionado pelo utilizador. O n\u00edvel de pot\u00eancia est\u00e1 guardado na \n\nEEPROM do controlador, \u00e9 lido a cada arranque do sistema e o seu valor no in\u00edcio da queima \n\nser\u00e1 o valor da \u00faltima utiliza\u00e7\u00e3o do equipamento, podendo variar entre 1 e 5. Se a salamandra \n\ntiver sido encerrada com o modo de funcionamento autom\u00e1tico, \u00e9 lido o \u00faltimo valor de \n\ntemperatura utilizado pelo utilizador. \n\nCaso se exceda o limite de tempo em que o processo de acendimento pode estar a \n\ndecorrer, 15 minutos por omiss\u00e3o, o sistema entra em estado de erro, provocando a \n\ninterrup\u00e7\u00e3o imediata do processo e apresentando uma mensagem no LCD. \n\nA Figura 76 representa o fluxograma do processo de extin\u00e7\u00e3o da queima \n\nimplementado. Tal como no caso do in\u00edcio do processo de queima, tamb\u00e9m este processo \u00e9 \n\niniciado aquando da execu\u00e7\u00e3o do c\u00f3digo referente \u00e0 tomada de decis\u00e3o, no final do ciclo \n\nprincipal do firmware. \n\n \n\n\n\n98 \n\n \n\n \n\nFigura 76 - Fluxograma do processo de extin\u00e7\u00e3o da queima de pellets. \n\n \n\nQuando se pretende desligar o equipamento, o sistema desliga a alimenta\u00e7\u00e3o de \n\npellets e maximiza a rota\u00e7\u00e3o do extrator de fumos at\u00e9 que a temperatura destes seja inferior \n\na 45\u00baC, momento em que se desliga e o sistema fica a aguardar at\u00e9 receber nova ordem de \n\niniciar. Na segunda linha do ecr\u00e3, at\u00e9 que a temperatura de fumos seja inferior a 45\u00baC, \u00e9 dada \n\na informa\u00e7\u00e3o de que o processo de queima est\u00e1 a terminar, como \u00e9 poss\u00edvel observar na \n\nFigura 77. \n\n \n\n \n\nFigura 77 - Mensagem de t\u00e9rmino de funcionamento. \n\n \n\nOs processos de in\u00edcio e de paragem de queima n\u00e3o podem ser interrompidos por \n\nquest\u00f5es de seguran\u00e7a, motivo pelo qual embora a ordem de in\u00edcio, atrav\u00e9s do painel de \n\nbot\u00f5es, do comando de infravermelhos ou da comunica\u00e7\u00e3o Bluetooth, seja identificada, n\u00e3o \n\n\u00e9 tratada se o equipamento estiver em algum momento de transi\u00e7\u00e3o \u2013 processo de arranque \n\nou de paragem. \n\n\n\n99 \n\n \n\nQuando se est\u00e1 a dar in\u00edcio \u00e0 queima de pellets, existe fogo na c\u00e2mara de combust\u00e3o \n\nmuito antes de o controlador o detetar \u2013 como referido anteriormente, \u00e9 necess\u00e1rio detetar \n\numa temperatura de fumos de exaust\u00e3o igual ou superior a 50\u00baC para assumir a presen\u00e7a de \n\nfogo cont\u00ednuo. Caso exista fogo mas a temperatura de fumos ainda n\u00e3o seja suficientemente \n\nalta para que o controlador o valide como tal, uma interrup\u00e7\u00e3o do in\u00edcio de queima desligaria \n\nos motores alimentadores e o ventilador de exaust\u00e3o de fumos, causando uma queima \n\ndeficiente, que gera muito fumo e resulta numa grande quantidade de cinzas.  \n\nO inverso aconteceria com a interrup\u00e7\u00e3o do processo de extin\u00e7\u00e3o de queima. Se o \n\nprocesso fosse interrompido, caso se voltasse a habilitar a alimenta\u00e7\u00e3o de combust\u00edvel e a \n\nadmiss\u00e3o de ar para a c\u00e2mara de combust\u00e3o, mas as chamas n\u00e3o fossem suficientes para \n\nsustentar o processo de queima, a c\u00e2mara iria acabar por se encher de pellets que n\u00e3o seriam \n\nqueimados, at\u00e9 que a temperatura diminu\u00edsse naturalmente e o controlador entrasse em erro, \n\naguardando interven\u00e7\u00e3o humana. \n\nDurante a queima de pellets o controlador apenas tem que se certificar que o motor \n\nalimentador faz girar o fuso dentro do tempo correto e que o ventilador de fumos est\u00e1 com a \n\nvelocidade definida. Ambos os valores, tempo de alimenta\u00e7\u00e3o e velocidade de extra\u00e7\u00e3o, s\u00e3o \n\nassumidos quando existe uma mudan\u00e7a no estado da queima \u2013 de in\u00edcio de processo para \n\nqueima continuada, p. ex. \u2013 ou no n\u00edvel de pot\u00eancia selecionado. \n\nAo longo dos processos de in\u00edcio, de extin\u00e7\u00e3o e de queima cont\u00ednua, a velocidade do \n\nmotor ventilador \u00e9 sempre monitorizada no ciclo principal do firmware. \n\nRelativamente \u00e0s funcionalidades potenciadas pela interface, os bot\u00f5es de press\u00e3o do \n\npainel, o comando remoto e aplica\u00e7\u00e3o para controlo atrav\u00e9s de Bluetooth permitem ao \n\nutilizador ligar ou desligar a queima de pellets, selecionar o n\u00edvel de pot\u00eancia desejada e a \n\nvelocidade do ventilador ambiente - atrav\u00e9s dos 5 n\u00edveis de pot\u00eancia pr\u00e9-definidos - quando \n\na salamandra est\u00e1 em funcionamento manual ou definir a temperatura desejada quando se \n\nencontra em modo de funcionamento autom\u00e1tico. \u00c9 poss\u00edvel tamb\u00e9m definir uma \n\nprograma\u00e7\u00e3o di\u00e1ria de funcionamento autom\u00e1tico com hor\u00e1rio de in\u00edcio e de fim bem como \n\na hora, data e dia da semana do equipamento. O menu de programa\u00e7\u00e3o de funcionamento \n\npode ser visto na Figura 78. \n\n \n\n\n\n100 \n\n \n\n \n\nFigura 78 - Menu de programa\u00e7\u00e3o de funcionamento. \n\n \n\n \u00c9 tamb\u00e9m atrav\u00e9s dos bot\u00f5es que a hora e a data da salamandra s\u00e3o ajustadas em \n\ncaso de necessidade. \n\n \n\n4.3.2. Gest\u00e3o da interface \n\nNo ciclo principal de funcionamento do programa a gest\u00e3o da interface do \n\ncontrolador \u00e9 feita no in\u00edcio para as entradas de informa\u00e7\u00e3o e no final para a sa\u00edda de \n\ninforma\u00e7\u00e3o apresentada no LCD.  \n\nA gest\u00e3o dos bot\u00f5es do painel de interface est\u00e1 dividida em duas fun\u00e7\u00f5es. Uma das \n\nfun\u00e7\u00f5es l\u00ea o estado dos pinos associados aos bot\u00f5es \u2013 \u201cread_buttons()\u201d - e outra efetua o \n\ntratamento de vari\u00e1veis resultante da press\u00e3o do bot\u00e3o identificado \u2013 \n\n\u201cbuttons_press_decode()\u201d. \n\nA fun\u00e7\u00e3o \u201cread_buttons()\u201d verifica o estado de cada um dos pinos associados aos \n\nbot\u00f5es. Para esta verifica\u00e7\u00e3o foi necess\u00e1rio ter em conta o tempo de repetibilidade da press\u00e3o, \n\npelo que foi implementado um sistema de debounce. Esta fun\u00e7\u00e3o de leitura apenas devolve \n\na identifica\u00e7\u00e3o do bot\u00e3o pressionado caso a \u00faltima press\u00e3o lida para aquele bot\u00e3o tiver sido \n\nfeita h\u00e1 mais de 500ms. Desta maneira, mesmo que o utilizador mantenha o bot\u00e3o \n\npressionado o controlador s\u00f3 assume como uma entrada v\u00e1lida de 500ms em 500ms, tempo \n\nsuficiente para entradas de informa\u00e7\u00e3o rigorosas e precisas. O valor deste tempo de espera \n\nest\u00e1 pr\u00e9-definido na vari\u00e1vel \u201cDEBOUNCE_BUTTONS\u201d e pode ser facilmente alterado no \n\nficheiro \u201cconfigurations.h\u201d. \n\nA fun\u00e7\u00e3o principal de tratamento de entradas nos bot\u00f5es \u00e9 a fun\u00e7\u00e3o \n\n\u201cbuttons_press_decode()\u201d. Esta fun\u00e7\u00e3o recebe o identificador gerado pela fun\u00e7\u00e3o de leitura \n\ne trata-o de imediato de acordo com a funcionalidade desejada. Existem 6 identificadores \n\n\n\n101 \n\n \n\ndiferentes, correspondentes aos 6 bot\u00f5es de press\u00e3o do painel de interface, como mostra a \n\nFigura 79. \n\n \n\n \n\n \n\n1- START_BUTTON \n\n2- AUTO_BUTTON \n\n3- BUTTON1 \n\n4- BUTTON2 \n\n5- BUTTON3 \n\n6- BUTTON4 \n\nFigura 79 - Bot\u00f5es do painel de interface. \n\n \n\n? START_BUTTON_PIN \u2013 identificador referente ao bot\u00e3o start. A press\u00e3o \n\nneste bot\u00e3o d\u00e1 ordem de in\u00edcio ou paragem do processo de combust\u00e3o dos pellets.  \n\n? AUTO_BUTTON_PIN \u2013 identificador referente ao bot\u00e3o de modo de \n\nclimatiza\u00e7\u00e3o autom\u00e1tica ou n\u00edvel de pot\u00eancia manual. Quando o processo de queima est\u00e1 a \n\ndecorrer, permite ao utilizador selecionar o modo de climatiza\u00e7\u00e3o autom\u00e1tica da divis\u00e3o \n\nonde se encontra a salamandra ou selecionar o modo manual, onde o utilizador seleciona o \n\nn\u00edvel de pot\u00eancia e velocidade de ventila\u00e7\u00e3o desejados. \n\n? BUTTON1_PIN \u2013 identificador referente ao bot\u00e3o n\u00famero 1. Incrementa o \n\nn\u00edvel de pot\u00eancia caso a salamandra esteja a funcionar em modo manual ou incrementa a \n\ntemperatura desejada no caso de o equipamento estar a funcionar em modo de climatiza\u00e7\u00e3o \n\nautom\u00e1tica. Quando n\u00e3o est\u00e1 a decorrer nenhum processo de queima \u2013 arranque, paragem \n\nou queima cont\u00ednua \u2013 este bot\u00e3o tamb\u00e9m incrementa as vari\u00e1veis apresentadas no ecr\u00e3, como \n\npor exemplo a data, hora, o ano ou o dia da semana, para as funcionalidades de arranque e \n\nparagem aut\u00f3noma da salamandra ou para a defini\u00e7\u00e3o da data/hora. \n\n? BUTTON2_PIN \u2013 identificador referente ao bot\u00e3o n\u00famero 2. O tratamento \n\ndeste identificador \u00e9 em tudo semelhante ao bot\u00e3o n\u00famero 1 com a diferen\u00e7a que serve de \n\ndecremento ao inv\u00e9s de incrementar. As vari\u00e1veis apresentadas no ecr\u00e3, o n\u00edvel de pot\u00eancia \n\ndesejado ou a temperatura de climatiza\u00e7\u00e3o s\u00e3o decrementadas com a press\u00e3o neste bot\u00e3o. \n\n\n\n102 \n\n \n\n? BUTTON3_PIN \u2013 identificador referente ao bot\u00e3o n\u00famero 3. Quando o \n\nprocesso de queima est\u00e1 a decorrer e est\u00e1 selecionado o modo de funcionamento manual, \n\neste bot\u00e3o incrementa a velocidade do ventilador ambiente presente na salamandra. Se n\u00e3o \n\nexistir processo de queima \u2013 arranque, paragem ou queima cont\u00ednua \u2013 este bot\u00e3o movimenta \n\nos menus. No ecr\u00e3 de funcionamento normal, a press\u00e3o deste bot\u00e3o entra no menu de \n\nfuncionamento programado e sequencialmente avan\u00e7a sobre a defini\u00e7\u00e3o de hora de arranque \n\ne paragem do mesmo, alterando a escolha da vari\u00e1vel que se pretende modificar \u2013 horas e \n\nminutos. Caso esteja no menu de defini\u00e7\u00e3o de hora e data, este bot\u00e3o faz recuar para a sele\u00e7\u00e3o \n\nde vari\u00e1vel anterior. \n\n? BUTTON4_PIN \u2013 identificador do bot\u00e3o n\u00famero 4. Tem o funcionamento \n\ncontr\u00e1rio ao bot\u00e3o n\u00famero 3. Decrementa a velocidade do ventilador ambiente quando a \n\nqueima est\u00e1 a decorrer e o modo de funcionamento \u00e9 manual e serve de movimento de \n\nmenus. A press\u00e3o deste bot\u00e3o durante a apresenta\u00e7\u00e3o do menu principal leva ao menu de \n\nacerto de hora/data, avan\u00e7ando na sele\u00e7\u00e3o de vari\u00e1vel dentro deste at\u00e9 \u00e0 defini\u00e7\u00e3o do dia da \n\nsemana e consequente grava\u00e7\u00e3o de todas as op\u00e7\u00f5es \u2013 data, hora e dia da semana. A press\u00e3o \n\ndeste bot\u00e3o durante a apresenta\u00e7\u00e3o do menu de funcionamento programado faz recuar a \n\nsele\u00e7\u00e3o de vari\u00e1vel a alterar. \n\nO processamento das mensagens enviadas pelo comando remoto \u00e9 feito de forma \n\nsemelhante ao que \u00e9 feito nos bot\u00f5es, mas neste caso foi utilizada uma biblioteca de \n\ncomandos infravermelho j\u00e1 existente, instalada no ficheiro \u201cIRremote.h\u201d. A cada ciclo do \n\nprograma \u00e9 verificada a exist\u00eancia de alguma mensagem que, caso exista, \u00e9 tratada logo de \n\nseguida. A verifica\u00e7\u00e3o e tratamento das entradas de infravermelhos s\u00e3o processados na \n\nmesma fun\u00e7\u00e3o dos bot\u00f5es de painel, \u201cbuttons_press_decode()\u201d. Cada bot\u00e3o do comando \n\nremoto envia uma mensagem espec\u00edfica, dando entrada no sistema como um valor \n\nhexadecimal.  \n\nPara atribuir as funcionalidades a cada bot\u00e3o, foram identificadas as mensagens de \n\ncada bot\u00e3o do controlador \u2013 etiqueta identificadora -, imprimindo o seu valor na porta de \n\ncomunica\u00e7\u00e3o s\u00e9rie do Arduino. Depois de identificadas as etiquetas dos bot\u00f5es foi poss\u00edvel \n\nescolher quais os bot\u00f5es que se pretendia usar e atribuir-lhes uma funcionalidade, id\u00eanticas \n\n\u00e0s fun\u00e7\u00f5es dos bot\u00f5es do painel.  \n\nO tratamento de informa\u00e7\u00e3o recebida por Bluetooth tamb\u00e9m est\u00e1 implementado \n\ndentro da fun\u00e7\u00e3o \u201cbuttons_press_decode()\u201d. A comunica\u00e7\u00e3o \u00e9 estabelecida atrav\u00e9s da porta \n\n\n\n103 \n\n \n\ns\u00e9rie 3 do Arduino Mega e a aquisi\u00e7\u00e3o de dados \u00e9 feita do mesmo modo que uma \n\ncomunica\u00e7\u00e3o por cabo, utilizando a biblioteca pr\u00f3pria de comunica\u00e7\u00e3o s\u00e9rie da plataforma.  \n\nA Figura 80 mostra a parte da fun\u00e7\u00e3o de tratamento de dados relativa \u00e0s \n\ncomunica\u00e7\u00f5es sem fio, onde \u00e9 verificada a exist\u00eancia de informa\u00e7\u00e3o primeiro por \n\ninfravermelhos e, caso n\u00e3o exista, verifica-se a exist\u00eancia de dados na porta de comunica\u00e7\u00f5es \n\nonde o m\u00f3dulo Bluetooth est\u00e1 instalado. \n\n \n\n \n\nFigura 80 - Aquisi\u00e7\u00e3o de dados atrav\u00e9s de comunica\u00e7\u00e3o por infravermelhos e Bluetooth. \n\n \n\nA Tabela 10 mostra a equival\u00eancia entre os bot\u00f5es do comando, os bot\u00f5es do painel \n\ne as suas etiquetas identificadoras para cada tipo de comunica\u00e7\u00e3o no firmware. \n\n \n\nTabela 10 - Equival\u00eancia entre bot\u00f5es do comando remoto, painel de interface e etiquetas. \n\nBot\u00f5es Etiquetas \n\nComando Painel IR Bluetooth Bot\u00f5es de press\u00e3o \n\nPlay Start 0xFFA857 1 START_BUTTON_PIN \n\nMenu Auto 0xFFE21D 2 AUTO_BUTTON_PIN \n\n+ Bot\u00e3o 1 0xFF02FD 3 BUTTON1_PIN \n\n- Bot\u00e3o 2 0xFF9867 4 BUTTON2_PIN \n\n>>| Bot\u00e3o 3 0xFF906F 5 BUTTON3_PIN \n\n|<&lt;Bot\u00e3o 4 0xFFE01F 6 BUTTON4_PIN \n\n \n\nCada vez que existe um input do utilizador, ou seja, cada vez que o utilizador \n\npressiona um bot\u00e3o do painel, do comando remoto ou envia um comando por Bluetooth e \n\nessa entrada seja v\u00e1lida - com uma cad\u00eancia superior a 500ms -, o led vermelho presente no \n\npainel acende durante um curto per\u00edodo de tempo. Na eventualidade do led ser substitu\u00eddo \n\npelo sinalizador sonoro, este ir\u00e1 emitir\u00e1 um sinal aud\u00edvel. \n\n\n\n104 \n\n \n\nPara o output da interface o LCD disponibiliza todas as informa\u00e7\u00f5es ao utilizador, \n\ncomo a temperatura ambiente da divis\u00e3o onde o equipamento se encontra e um rel\u00f3gio com \n\na hora. Quando n\u00e3o est\u00e1 em funcionamento, o ecr\u00e3 informa na linha inferior a data e dia da \n\nsemana, como anteriormente mostrado na Figura 52. O acesso \u00e0 informa\u00e7\u00e3o de hora e data \n\n\u00e9 feito atrav\u00e9s de comunica\u00e7\u00e3o com o m\u00f3dulo de rel\u00f3gio DS1302, utilizando uma biblioteca \n\npr\u00f3pria \u201crtc.h\u201d [53] e uma liga\u00e7\u00e3o \u201c3-WIRE SPI\u201d, que \u00e9 id\u00eantica a uma liga\u00e7\u00e3o SPI mas \n\nhalf-duplex, com uma \u00fanica linha de dados [54]. \n\nDurante a queima de pellets a segunda linha do ecr\u00e3 \u00e9 utilizada para informar acerca \n\ndo n\u00edvel de pot\u00eancia e do n\u00edvel de velocidade do ventilador ambiente que est\u00e3o a ser \n\nutilizados no caso do funcionamento se encontrar em modo manual ou a temperatura \n\ndesejada caso o equipamento se encontre em modo de funcionamento autom\u00e1tico. \n\n A Figura 81 mostra a informa\u00e7\u00e3o disponibilizada pelo ecr\u00e3 durante o funcionamento \n\nda salamandra em modo manual. \n\n \n\n \n\nFigura 81 - Informa\u00e7\u00e3o no ecr\u00e3 em modo de funcionamento manual. \n\n \n\nO LCD informa tamb\u00e9m o utilizador se a programa\u00e7\u00e3o de funcionamento est\u00e1 ativa \n\nou n\u00e3o, atrav\u00e9s do s\u00edmbolo de alarme, a seguir \u00e0 informa\u00e7\u00e3o hor\u00e1ria, que pode ser visto na \n\nFigura 82, onde tamb\u00e9m \u00e9 vis\u00edvel a informa\u00e7\u00e3o de temperatura desejada, disponibilizada na \n\nsegunda linha do ecr\u00e3 durante o modo de funcionamento autom\u00e1tico. \n\n \n\n \n\nFigura 82 - S\u00edmbolo de alarme e informa\u00e7\u00e3o no modo de climatiza\u00e7\u00e3o autom\u00e1tica. \n\n\n\n105 \n\n \n\nA segunda linha do ecr\u00e3 tamb\u00e9m fornece informa\u00e7\u00f5es em forma de texto acerca de \n\nalguns erros que possam ocorrer. Existem 4 erros identificados que s\u00e3o sinalizados com uma \n\nmensagem no ecr\u00e3: \n\n? \u201cErro!Queima\u201d \u2013 este erro ocorre quando h\u00e1 uma anomalia no \n\nfuncionamento do controlador ou quando o sensor de temperatura de fumos est\u00e1 danificado. \n\nAparece quando o sistema est\u00e1 em funcionamento, n\u00e3o se encontra em processo de paragem \n\ne a temperatura de fumos lida pelo controlador \u00e9 5\u00baC inferior \u00e0 temperatura de dete\u00e7\u00e3o de \n\ninc\u00eandio, portanto, aos 45\u00baC para uma temperatura de dete\u00e7\u00e3o de inc\u00eandio de 50\u00baC. O erro \n\n\u00e9 considerado cr\u00edtico, e como tal, o sistema interrompe de imediato a alimenta\u00e7\u00e3o de pellets \n\npara a c\u00e2mara de combust\u00e3o e aguarda por interven\u00e7\u00e3o do utilizador. \n\n? \u201cErro!Temp.Fumos\u201d \u2013 ocorre quando o sensor de leitura da temperatura de \n\nfumos est\u00e1 danificado ou a temperatura de fumos ultrapassa o valor estipulado pela vari\u00e1vel \n\n\u201cMAX_SMOKE_TEMP\u201d \u2013 240\u00baC por omiss\u00e3o. Ao longo dos testes, a temperatura de fumos \n\ndurante o funcionamento normal do equipamento rondou os 180\u00baC. A ocorr\u00eancia deste erro \n\ncessa a alimenta\u00e7\u00e3o dos pellets e coloca o ventilador de fumos na velocidade m\u00e1xima at\u00e9 \n\nque a temperatura de fumos seja inferior \u00e0 temperatura de dete\u00e7\u00e3o de extin\u00e7\u00e3o de inc\u00eandio, \n\n\u201cFIRE_EXTINGUISH_TEMP\u201d \u2013 45\u00baC por omiss\u00e3o. Ambas as vari\u00e1veis podem ser \n\nconfiguradas no ficheiro \u201cconfigurations.h\u201d. \n\n? \u201cErro!Vent.Fumos\u201d \u2013 este erro est\u00e1 relacionado com o encoder do \n\nventilador de fumos. Se o sistema detetar que a velocidade do ventilador - medida pelo \n\nencoder \u2013 \u00e9 de 0 rpm e este valor for diferente da velocidade pretendida ou se a velocidade \n\ndetetada tiver um erro superior a 300 rpm relativamente \u00e0 velocidade pretendida, entra em \n\nerro. O ventilador de fumos tem que funcionar sempre pelo que este erro n\u00e3o s\u00f3 cessa o \n\nprocesso de queima impedindo a alimenta\u00e7\u00e3o de pellets caso este esteja a decorrer como \n\ntamb\u00e9m impede o arranque da salamandra. A verifica\u00e7\u00e3o do encoder ocorre a cada 20 \n\nsegundos. \n\n? \u201cErro!Acend.\u201d \u2013 erro relacionado com o arranque do processo de queima. \n\nSe demorar mais de 15 minutos \u2013 valor configurado pela vari\u00e1vel \u201cSTART_TIMEOUT\u201d do \n\nficheiro \u201cconfigurations.h\u201d \u2013 o sistema entra neste erro e termina a tentativa de acendimento \n\ndos pellets. Pode ocorrer por aus\u00eancia de pellets no compartimento ou na c\u00e2mara de \n\ncombust\u00e3o ou por defici\u00eancia na resist\u00eancia de acendimento. \n\nAl\u00e9m das mensagens de erro, o LCD informa tamb\u00e9m o utilizador das grandezas que \n\nest\u00e1 a manipular para definir a programa\u00e7\u00e3o autom\u00e1tica da salamandra ou o acerto de hora e \n\n\n\n106 \n\n \n\ndata. Durante a utiliza\u00e7\u00e3o de um destes menus o ecr\u00e3 indica na primeira linha qual o menu \n\nonde se encontra e na segunda linha indica quais as grandezas que ser\u00e3o manipuladas, como \n\nindica a Figura 83, que mostra a informa\u00e7\u00e3o dada pelo ecr\u00e3 durante a defini\u00e7\u00e3o de hora de \n\narranque no menu de programa\u00e7\u00e3o autom\u00e1tica. \n\n \n\n \n\nFigura 83 - Informa\u00e7\u00e3o no LCD durante a utiliza\u00e7\u00e3o de um menu. \n\n \n\nDurante a navega\u00e7\u00e3o nos menus o ecr\u00e3 \u00e9 atualizado imediatamente ap\u00f3s um bot\u00e3o \n\nser pressionado. No ecr\u00e3 principal, a informa\u00e7\u00e3o \u00e9 atualizada automaticamente a cada 5 \n\nsegundos. \n\nA escrita de informa\u00e7\u00e3o no LCD foi feita utilizando a biblioteca \u201cLiquidCrystal.h\u201d, \n\nque est\u00e1 dispon\u00edvel publicamente e faz parte da lista de bibliotecas disponibilizadas pela \n\nplataforma Arduino. \n\nQuando a informa\u00e7\u00e3o \u00e9 atualizada, \u00e9 tamb\u00e9m feita uma atualiza\u00e7\u00e3o \u00e0s leituras dos \n\ncomponentes que a ele estejam associados, nomeadamente o rel\u00f3gio e o sensor de \n\ntemperatura ambiente. O per\u00edodo de atualiza\u00e7\u00e3o de 5 segundos \u00e9 suficiente para manter o \n\nutilizador informado e para garantir a seguran\u00e7a da monitoriza\u00e7\u00e3o de temperaturas. Ao longo \n\nde 5 segundos n\u00e3o \u00e9 poss\u00edvel haver uma varia\u00e7\u00e3o consider\u00e1vel da temperatura que ponha em \n\nrisco o sistema ou as pessoas, em especial na temperatura de fumos que \u00e9 o par\u00e2metro mais \n\ncr\u00edtico no que \u00e0 seguran\u00e7a diz respeito, no caso da salamandra utilizada neste projeto. \n\nA atualiza\u00e7\u00e3o da leitura das temperaturas \u00e9 feita pela fun\u00e7\u00e3o \u201cread_temp()\u201d; \n\nchamada dentro da fun\u00e7\u00e3o principal \u201ctemperatures_update()\u201d. A fun\u00e7\u00e3o principal garante a \n\natualiza\u00e7\u00e3o dos valores das temperaturas e verifica se h\u00e1 algum valor em n\u00e3o conformidade. \n\nSe existir, a fun\u00e7\u00e3o obriga o sistema a entrar em estado de erro. Tamb\u00e9m \u00e9 nesta fun\u00e7\u00e3o que \n\ns\u00e3o detetados o princ\u00edpio de inc\u00eandio e o inc\u00eandio durante o in\u00edcio do processo de combust\u00e3o \n\ne a extin\u00e7\u00e3o de inc\u00eandio quando se pretende terminar o processo. \n\n\n\n107 \n\n \n\nO estado de \u201cprinc\u00edpio de inc\u00eandio\u201d ocorre quando o controlador deteta que a \n\ntemperatura de fumos est\u00e1 a aumentar e ultrapassa os 35\u00baC \u2013 vari\u00e1vel \n\n\u201cSTART_FIRE_DETECT_TEMP\u201d - mas ainda \u00e9 inferior \u00e0 temperatura de dete\u00e7\u00e3o de \n\ninc\u00eandio. A fun\u00e7\u00e3o identifica o estado de \u201cinc\u00eandio\u201d quando a temperatura de fumos \n\nultrapassa o valor estipulado pela vari\u00e1vel \u201cFIRE_DETECT_TEMP\u201d \u2013 50\u00baC por omiss\u00e3o \u2013 \n\ne garante que o sistema inicia o controlo dos n\u00edveis de pot\u00eancia a partir deste momento. A \n\nextin\u00e7\u00e3o de inc\u00eandio acontece quando o processo de queima est\u00e1 a ser finalizado e a \n\ntemperatura de fumos se torna inferior a 45\u00baC \u2013 valor guardado na vari\u00e1vel \n\n\u201cFIRE_EXTINGUISH_TEMP\u201d \u2013, momento em que o motor ventilador interrompe o seu \n\nfuncionamento e o sistema se encontra pronto para iniciar de novo quando assim for \n\npretendido. \n\nA fun\u00e7\u00e3o \u201cread_temp()\u201d devolve o valor da temperatura correspondente ao valor \n\nlido no porto anal\u00f3gico correspondente. O porto anal\u00f3gico do controlador devolve um valor \n\nentre 0 e 1023, lido pela fun\u00e7\u00e3o \u201canalogRead()\u201d,  que necessita de ser convertido primeiro \n\nem tens\u00e3o e depois para uma escala de temperatura - em graus Celsius.   \n\nNormalmente para o tratamento de informa\u00e7\u00e3o de um sensor de temperatura NTC \u00e9 \n\nutilizada uma tabela de convers\u00e3o conhecida como \u201clook-up table\u201d. Neste caso para a \n\nconvers\u00e3o de valores foi utilizada a equa\u00e7\u00e3o de Steinhart-Hart [55]. Al\u00e9m de ser mais \n\nsimples, esta equa\u00e7\u00e3o tamb\u00e9m ocupa menos mem\u00f3ria no programa quando comparado com \n\nas tabelas de convers\u00e3o. \u00c9 a fun\u00e7\u00e3o \u201cread_temp()\u201d, ilustrada na Figura 84, que converte a \n\ninforma\u00e7\u00e3o lida no porto anal\u00f3gico pela fun\u00e7\u00e3o \u201canalogRead()\u201d para graus Celsius \n\nutilizando a equa\u00e7\u00e3o e devolve o seu valor. \n\n \n\n \n\nFigura 84 - Fun\u00e7\u00e3o de convers\u00e3o de tens\u00e3o em temperatura. \n\n \n\n \n\n\n\n108 \n\n \n\n4.3.3. Controlo do sistema \n\nAl\u00e9m da gest\u00e3o da interface, o firmware gere tamb\u00e9m a velocidade dos motores e o \n\nestado da resist\u00eancia do sistema.  \n\nNa Figura 73 verifica-se que nem o motor ventilador ambiente nem a resist\u00eancia de \n\naquecimento est\u00e3o presentes de forma direta no ciclo principal. Isto acontece porque s\u00e3o 2 \n\nelementos que n\u00e3o t\u00eam liga\u00e7\u00e3o com a pot\u00eancia de sa\u00edda da salamandra, fazendo com que n\u00e3o \n\nexista necessidade de controlar o seu estado ciclicamente. A resist\u00eancia \u00e9 ligada quando h\u00e1 \n\nordem \u2013 atrav\u00e9s de uma entrada na interface \u2013 para o in\u00edcio da queima e \u00e9 desligada quando \n\nse deteta o inc\u00eandio cuja gest\u00e3o \u00e9 feita pela fun\u00e7\u00e3o de leitura de temperaturas. O motor \n\nventilador apenas v\u00ea a sua velocidade variar em situa\u00e7\u00f5es espec\u00edficas, tamb\u00e9m originadas \n\npor inputs do utilizador, como a mudan\u00e7a do seu n\u00edvel de pot\u00eancia ou a temperatura m\u00ednima \n\nde funcionamento \u2013 o ventilador s\u00f3 \u00e9 habilitado automaticamente a partir de uma \n\ntemperatura de fumos m\u00ednima \u201cSTART_ROOM_FAN_TEMP\u201d de valor por omiss\u00e3o de \n\n55\u00baC. \n\nPor outro lado, o calor produzido pela salamandra depende diretamente tanto do \n\nestado do motor alimentador como da velocidade do exaustor de fumos. Ambos necessitam \n\nde controlo permanente de maneira a ser poss\u00edvel manter o n\u00edvel de pot\u00eancia desejado. \n\n \n\n? Alimenta\u00e7\u00e3o de pellets \u2013 motor alimentador \n\nO controlo do motor alimentador est\u00e1 a cargo da fun\u00e7\u00e3o feeder_management(). Esta \n\nfun\u00e7\u00e3o gere o estado do motor, ligado ou desligado, e a dura\u00e7\u00e3o do funcionamento do \n\nmesmo. A Figura 85 mostra o fluxograma de funcionamento desta fun\u00e7\u00e3o. \n\n\n\n109 \n\n \n\n \n\nFigura 85 - Fluxograma da fun\u00e7\u00e3o de gest\u00e3o de estado do motor alimentador. \n\n \n\n Ao entrar na fun\u00e7\u00e3o \u00e9 verificado se a alimenta\u00e7\u00e3o de pellets est\u00e1 ou n\u00e3o habilitada, o \n\nque depende do estado da vari\u00e1vel booleana \u201cenable_feed\u201d, onde true significa que est\u00e1 \n\nhabilitada e false o contr\u00e1rio. Esta habilita\u00e7\u00e3o \u00e9 dada pela fun\u00e7\u00e3o que inicia o processo de \n\nqueima, start_burning(), e retirada pela fun\u00e7\u00e3o que termina o funcionamento do sistema, \n\nstop_burning(), ou por qualquer evento de erro detetado pelo sistema. Caso n\u00e3o esteja \n\nhabilitada, a fun\u00e7\u00e3o termina. Caso contr\u00e1rio, continua para as verifica\u00e7\u00f5es temporais. A \n\nFigura 86 mostra o peda\u00e7o de c\u00f3digo que gere a alimenta\u00e7\u00e3o. \n\n \n\n\n\n110 \n\n \n\n \n\nFigura 86 - Fun\u00e7\u00e3o de gest\u00e3o de alimenta\u00e7\u00e3o de pellets. \n\n \n\nO motor alimentador tem um tempo de funcionamento vari\u00e1vel uma vez que a \n\nalimenta\u00e7\u00e3o de pellets para a c\u00e2mara de combust\u00e3o \u00e9 feita atrav\u00e9s de intervalos de tempo. A \n\nTabela 11 mostra os diferentes tempos de alimenta\u00e7\u00e3o conforme o n\u00edvel de pot\u00eancia \n\nselecionado. \n\n \n\nTabela 11 - Intervalos de tempo de funcionamento do motor alimentador para os diferentes n\u00edveis de pot\u00eancia. \n\nN\u00edvel de Pot\u00eancia Alimenta\u00e7\u00e3o Lig. (s.) Alimenta\u00e7\u00e3o Deslg. (s.) \n\n1 0,7 3,3 \n\n2 0,84 3,16 \n\n3 1,04 2,96 \n\n4 1,24 2,76 \n\n5 1,44 2,56 \n\n \n\nOs tempos de alimenta\u00e7\u00e3o utilizados s\u00e3o os mesmos dos par\u00e2metros do controlador \n\nutilizado na salamandra Prima Air, par\u00e2metros esses cedidos pela MVM. Durante os ensaios \n\ndo controlador confirmou-se que estes par\u00e2metros de alimenta\u00e7\u00e3o servem os n\u00edveis de \n\npot\u00eancia a que est\u00e3o associados, confirmando tamb\u00e9m assim o bom funcionamento da gest\u00e3o \n\ndo motor alimentador por parte do controlador desenvolvido. \n\n \n\n \n\n\n\n111 \n\n \n\n? Ventilador ambiente e exaustor de fumos \u2013 motores de \n\nvelocidade vari\u00e1vel \n\nOs motores de ventila\u00e7\u00e3o ambiente e de exaust\u00e3o de fumos necessitam de regula\u00e7\u00e3o \n\nde velocidade para proporcionar o maior conforto poss\u00edvel ao utilizador e para controlar a \n\nadmiss\u00e3o de ar da c\u00e2mara de combust\u00e3o, respetivamente. \n\n Al\u00e9m do hardware dedicado descrito na sec\u00e7\u00e3o 4.1.1, \u00e9 necess\u00e1rio um tratamento \n\nespecial no firmware que permita o controlo de velocidade destes motores. A Figura 87 \n\napresenta o fluxograma de controlo por \u00e2ngulo de fase implementado. \n\n \n\n \n\nFigura 87 - Fluxograma de controlo por \u00e2ngulo de fase implementado no firmware, \n\n \n\n\n\n112 \n\n \n\nO controlo por \u00e2ngulo de fase \u00e9 tratado no firmware somente atrav\u00e9s de eventos \n\ndespoletados por interrup\u00e7\u00f5es. Isto significa que todo o controlo \u00e9 feito atrav\u00e9s de rotinas \n\nque n\u00e3o est\u00e3o no ciclo principal do programa. \n\nO primeiro evento \u00e9 a aquisi\u00e7\u00e3o de refer\u00eancia de zero. O circuito de dete\u00e7\u00e3o de zero \n\nfornece uma transi\u00e7\u00e3o no seu sinal de sa\u00edda \u2013 ver Figura 56 \u2013, coincidente com a passagem \n\npor zero da onda sinusoidal de tens\u00e3o da rede, que vai fazer variar o n\u00edvel l\u00f3gico de um porto \n\nde interrup\u00e7\u00e3o externa do Arduino. Foi utilizado o porto digital 2 para este efeito. \n\nAp\u00f3s a dete\u00e7\u00e3o de zero \u00e9 esperado o tempo necess\u00e1rio para que o \u00e2ngulo de disparo \n\nseja o desejado. Nessa altura, o porto digital associado ao motor passa a ter \u00e0 sua sa\u00edda 5V \n\nat\u00e9 perto do final do semi-ciclo da onda sinusoidal, momento em que passa novamente a 0V, \n\ncomo ilustrado no exemplo da Figura 57.  \n\nO fluxograma da Figura 88 mostra o fluxograma da rotina dos eventos de interrup\u00e7\u00e3o \n\nque ocorrem por cada disparo do TRIAC. Estes eventos s\u00e3o tratados de forma imediata, fora \n\ndo programa principal. \n\n \n\n \n\nFigura 88 - Fluxograma de eventos interruptivos do controlo dos motores de velocidade vari\u00e1vel. \n\n \n\n\n\n113 \n\n \n\nA passagem por zero ativa uma interrup\u00e7\u00e3o externa. A rotina desta interrup\u00e7\u00e3o \n\nreinicia o temporizador 1 e d\u00e1 in\u00edcio \u00e0 contagem at\u00e9 ao momento de fazer o disparo do \n\nTRIAC, algo que \u00e9 feito atrav\u00e9s do evento do comparador \u201cTimer 1 Comparators Match\u201d. \n\nO evento de interrup\u00e7\u00e3o de \u201cTimer 1 overflow\u201d desliga o disparo do TRIAC. \n\nCada motor tem a ele associado um registo comparador. \u00c9 atrav\u00e9s do valor deste \n\nregisto que \u00e9 alterado o \u00e2ngulo de disparo. No programa, representa um tempo de espera \n\nap\u00f3s a passagem por zero. Quando a contagem do temporizador for igual ao valor do registo \n\ncomparador onde est\u00e1 definido o valor para a contagem do temporizador 1, OCR1A/B, ocorre \n\na interrup\u00e7\u00e3o em que a sua rotina dispara o TRIAC associado e permite a condu\u00e7\u00e3o de \n\ncorrente para o motor. \n\nA rotina de interrup\u00e7\u00e3o de final de contagem, overflow, tem a fun\u00e7\u00e3o de desligar o \n\nsinal de condu\u00e7\u00e3o dos TRIACs. A sua ocorr\u00eancia \u00e9 manipulada dentro da \u00faltima ISR de \n\ncompara\u00e7\u00e3o que tenha existido. Se n\u00e3o tiver existido nenhuma, o temporizador nunca atinge \n\no limite dos registos de contagem, recordando que s\u00e3o sempre reiniciados a cada 10ms, ou \n\nseja, a cada evento externo de dete\u00e7\u00e3o de zero. \n\nPara que este ciclo de interrup\u00e7\u00f5es se complete e repita de forma adequada, foi \n\nnecess\u00e1ria uma configura\u00e7\u00e3o pr\u00e9via. A onda sinusoidal da tens\u00e3o da rede tem uma frequ\u00eancia \n\nde 50Hz e o seu per\u00edodo \u00e9 dado por 1/50 = 20ms. Cada passagem por zero ir\u00e1 ent\u00e3o ocorrer \n\na uma frequ\u00eancia de 100Hz, ou seja, a cada 10ms. \n\nPara calibrar este controlo, o temporizador 1 - timer 1 na ficha t\u00e9cnica do \n\ncontrolador - foi configurado com um prescale de 1/256 que \u00e9 basicamente um \n\ndesmultiplicador de contagens. Uma vez que o Arduino funciona a uma frequ\u00eancia de \n\n16Mhz, podemos calcular que ao longo de 1 segundo o temporizador ir\u00e1 efetuar \n\n16 ? 106\n\n256\n= 62500 \n\nincrementos no seu registo de contagem, 16us por cada um. Desta forma foi poss\u00edvel \n\nrelacionar quantos incrementos existem durante meio per\u00edodo de uma onda sinusoidal com \n\n50Hz de frequ\u00eancia: \n\n10 ? 10?3\n\n16 ? 10?6\n= 625 \n\n\n\n114 \n\n \n\nEstes dados foram utilizados para garantir que a interrup\u00e7\u00e3o de overflow acontecesse \n\nantes de uma nova passagem por zero. Para este efeito, a \u00faltima interrup\u00e7\u00e3o a acontecer \n\nassociada a um registo comparador - OCR - atribui ao registo de contagem - TCNT - o valor \n\nm\u00e1ximo admiss\u00edvel menos o valor de contagens que faltam at\u00e9 estar pr\u00f3ximo de uma nova \n\npassagem por zero, como mostra a Figura 89, onde \u201cj\u201d \u00e9 a vari\u00e1vel com o valor de contagens \n\nque j\u00e1 foram feitas desde \u00faltima interrup\u00e7\u00e3o de dete\u00e7\u00e3o de zero. \n\n \n\n \n\nFigura 89 - Atribui\u00e7\u00e3o de valor ao registo de contagem TCNT1. \n\n \n\nFoi definido o valor pr\u00f3ximo de uma nova passagem por zero de 580 contagens, o \n\nque corresponde a cerca de 9,28ms. \n\n \n\n? Controlo de velocidade com encoder \n\nA velocidade do motor de ventila\u00e7\u00e3o ambiente est\u00e1 pr\u00e9-definida, associada aos n\u00edveis \n\nde pot\u00eancia dispon\u00edveis, mas tamb\u00e9m pode ser alterada pelo utilizador para que lhe sirva de \n\nmelhor conforto. No caso do motor de exaust\u00e3o de fumos a velocidade tem que ser precisa \n\ne vigiada.  \n\nO motor ventilador de fumos tem incorporado um encoder baseado num sensor de \n\nefeito de Hall, ilustrado na Figura 90. \n\n \n\n \n\nFigura 90 - Encoder de efeito de Hall do motor extrator de fumos. \n\n \n\n\n\n115 \n\n \n\n O sensor de efeito de Hall faz variar a sua sa\u00edda a cada volta completa do motor. Essa \n\nvaria\u00e7\u00e3o \u00e9 lida e contabilizada pelo microcontrolador que calcula a velocidade em rota\u00e7\u00f5es \n\npor minuto a que o motor est\u00e1 a rodar. \n\nEsta contabiliza\u00e7\u00e3o de pulsos do sensor de Hall tamb\u00e9m est\u00e1 implementada atrav\u00e9s \n\nde um porto de interrup\u00e7\u00e3o externa. Sempre que o motor completa uma rota\u00e7\u00e3o, o sinal do \n\nencoder transita de 5V para 0V e a rotina de interrup\u00e7\u00e3o associada ao pino do Arduino \n\nincrementa uma unidade numa vari\u00e1vel, \u201crevolutions\u201d. \n\nPara variar o \u00e2ngulo de fase de disparo do TRIAC por forma a controlar a velocidade \n\ndo exaustor de fumos, o firmware utiliza uma biblioteca de controlo PID que garante a \n\nestabilidade e precis\u00e3o da velocidade em fun\u00e7\u00e3o do fluxo de ar que se pretende na c\u00e2mara \n\nde combust\u00e3o. Inicialmente, implementou-se um controlo proporcional que apenas atuava \n\nconforme a diferen\u00e7a entre a velocidade pretendida e a medida. No entanto, com a variedade \n\nde bibliotecas da plataforma que j\u00e1 oferecem controlo proporcional, integral e derivativo, \n\ntomou-se por op\u00e7\u00e3o passar a usar uma delas, pois conseguiam uma maior estabilidade a \n\nvelocidades constantes do motor e varia\u00e7\u00f5es mais suaves durante as transi\u00e7\u00f5es de \n\nvelocidade. \n\nO c\u00e1lculo do \u00e2ngulo de fase a aplicar no controlo do motor exaustor e a leitura da \n\nvelocidade do ventilador s\u00e3o feitos na fun\u00e7\u00e3o \u201ccompute_smoke_fan_speed()\u201d. A velocidade \n\ndo ventilador \u00e9 calculada apenas de segundo a segundo para se conseguir um bom n\u00edvel de \n\nprecis\u00e3o na sua leitura. Foram efetuados testes para outros intervalos de medi\u00e7\u00e3o, mais \n\ncurtos, mas sem sucesso quanto \u00e0 precis\u00e3o do c\u00e1lculo de velocidade: o valor calculado \n\noscilava em demasia mesmo sem se verificar uma varia\u00e7\u00e3o real de velocidade do motor. O \n\naumento do intervalo de medi\u00e7\u00e3o permitiu aumentar a precis\u00e3o de leitura sem preju\u00edzo do \n\ncontrolo do motor. \n\nComo a verifica\u00e7\u00e3o \u00e9 feita a cada segundo, para obter a velocidade do ventilador em \n\nrota\u00e7\u00f5es por minuto basta multiplicar o n\u00famero de voltas completas \u2013 o n\u00famero da vari\u00e1vel \n\nincrementada pela interrup\u00e7\u00e3o gerada pelo encoder - por 60. A fun\u00e7\u00e3o \n\n\u201cexhaust_fan_PID.Compute()\u201d corre fora do per\u00edodo de 1 segundo, sendo executada em \n\ntodos os ciclos por indica\u00e7\u00e3o das instru\u00e7\u00f5es da biblioteca utilizada. Apesar de ser sempre \n\nexecutada, a fun\u00e7\u00e3o apenas faz c\u00e1lculos quando \u00e9 necess\u00e1rio. \n\n \n\n\n\n116 \n\n \n\n4.3.4. Testes e resultados \n\nO desenvolvimento do firmware deste projeto foi sempre suportado por ensaios no \n\nequipamento disponibilizado pela empresa MVM. Estes ensaios inclu\u00edram testes de in\u00edcio \n\nde queima, de varia\u00e7\u00e3o e gest\u00e3o de pot\u00eancia debitada, t\u00e9rmino da queima e de utiliza\u00e7\u00e3o dos \n\nv\u00e1rios tipos de interface implementados. \n\nO processo de queima de pellets est\u00e1 parametrizado para o modelo utilizado durante \n\nos testes, o Prima Air. Ap\u00f3s correta parametriza\u00e7\u00e3o, n\u00e3o foi registada nenhuma falha no \n\narranque, t\u00e9rmino ou manuten\u00e7\u00e3o da queima durante as v\u00e1rias horas \u2013 intercaladas - de testes \n\na que foi submetido. Para obter maior garantia de bom funcionamento e maior prova de \n\nfiabilidade do sistema, seria oportuno reunir condi\u00e7\u00f5es para manter o equipamento em \n\nfuncionamento durante um per\u00edodo superior a 24h. Infelizmente, tal n\u00e3o foi poss\u00edvel durante \n\no desenvolvimento deste projeto. \n\nA parametriza\u00e7\u00e3o do arranque do equipamento e da manuten\u00e7\u00e3o da queima para os \n\ndiferentes n\u00edveis de pot\u00eancia foi feita inicialmente com valores id\u00eanticos aos utilizados \n\nnoutros controladores. Ap\u00f3s alguns ensaios, verificou-se que se obtinham melhores \n\nresultados durante o arranque fazendo com que o sistema fosse alimentando a c\u00e2mara de \n\ncombust\u00e3o ao longo do tempo. Isto previne que o sistema tente arrancar sem combust\u00edvel e \n\ngarante uma combust\u00e3o melhor durante o arranque do equipamento, acelerando a dete\u00e7\u00e3o de \n\ninc\u00eandio. \n\nPara os v\u00e1rios n\u00edveis de pot\u00eancia de queima foi necess\u00e1rio alterar o valor de \n\nvelocidade do ventilador exaustor de fumos, que controla tamb\u00e9m a admiss\u00e3o de ar. No \n\ncontrolador utilizado pela MVM, a velocidade do exaustor parametrizada \u00e9 apenas um limite \n\nm\u00ednimo e esta \u00e9 controlada pelo fluxo de ar que existe. Como neste projeto se abdicou do \n\nmedidor de massa de ar, ajustou-se a velocidade do ventilador, aumentando-a, mantendo os \n\npar\u00e2metros de alimenta\u00e7\u00e3o de pellets, de maneira a obter resultados de queima vis\u00edvel e \n\ntermicamente satisfat\u00f3rios. \n\nA fun\u00e7\u00e3o de climatiza\u00e7\u00e3o n\u00e3o foi testada num ambiente real devido a \n\ncondicionamentos no que respeita \u00e0 coloca\u00e7\u00e3o do equipamento de testes. Esta funcionalidade \n\ndeveria ter sido testada num espa\u00e7o fechado, id\u00eantico a uma divis\u00e3o de um edif\u00edcio, como \n\npor exemplo uma sala de estar, de maneira a aferir a capacidade de aumento, diminui\u00e7\u00e3o e \n\n\n\n117 \n\n \n\nmanuten\u00e7\u00e3o de temperatura por parte da salamandra especialmente no que diz respeito \u00e0 \n\nestabilidade e velocidade de resposta. Preferencialmente, durante o teste, o equipamento \n\ndeveria tamb\u00e9m ser sujeito a varia\u00e7\u00f5es acentuadas de temperatura ambiente para ser \n\nestudado o seu comportamento, simulando a abertura de uma porta ou uma corrente de ar \n\nfria. N\u00e3o obstante, o processo de climatiza\u00e7\u00e3o foi simulado, aquecendo e arrefecendo o \n\nsensor de temperatura ambiente e observando-se a resposta do controlador. Nesta simula\u00e7\u00e3o \n\nforam obtidos resultados satisfat\u00f3rios. Para a climatiza\u00e7\u00e3o autom\u00e1tica o firmware utiliza os \n\n5 n\u00edveis de pot\u00eancia existentes. \n\nO arranque e paragem programados n\u00e3o demonstraram nenhum problema no seu \n\nfuncionamento. \n\n \n\n4.4. An\u00e1lise de custos / produ\u00e7\u00e3o \n\nComo foi sendo referido ao longo deste relat\u00f3rio, um dos principais objetivos do \n\ndesenvolvimento do controlador seria ter um custo competitivo. Durante o \n\ndesenvolvimento do hardware houve sempre a considera\u00e7\u00e3o do fator pre\u00e7o e \n\ndisponibilidade no mercado na escolha dos componentes utilizados, tentando manter um \n\ncompromisso entre o custo e a funcionalidade da solu\u00e7\u00e3o final. \n\nPara a elabora\u00e7\u00e3o de uma unidade de controlo semelhante \u00e0 desenvolvida, s\u00e3o \n\nnecess\u00e1rios os componentes descritos no Anexo A, Tabela 13. Al\u00e9m do pre\u00e7o dos \n\ncomponentes, \u00e9 necess\u00e1rio considerar o pre\u00e7o da placa Arduino e da placa de circuito \n\nimpresso, o que dar\u00e1 um pre\u00e7o total a rondar os 50\u20ac - excluindo a comunica\u00e7\u00e3o \n\nBluetooth, m\u00f3dulo pelo qual se ter\u00e1 que somar 5\u20ac. Neste caso, seria necess\u00e1rio \n\ncontabilizar tamb\u00e9m os custos de assemblagem, que n\u00e3o est\u00e3o inclu\u00eddos no pre\u00e7o do \n\nmaterial. Os pre\u00e7os dos componentes foram consultados em lojas online, em setembro \n\nde 2016, pelo que o seu pre\u00e7o pode estar sujeito a altera\u00e7\u00f5es.  \n\n\u00c9 poss\u00edvel obter pre\u00e7os mais competitivos caso se opte pela compra em v\u00e1rias lojas \n\ndistintas, procurando o pre\u00e7o mais baixo de mercado para cada componente, ou ainda \n\ncaso se compre em grandes quantidades. \n\n\n\n118 \n\n \n\nPara ter no\u00e7\u00e3o dos custos de produ\u00e7\u00e3o e montagem deste controlador, foi feito um \n\npedido de cota\u00e7\u00e3o a uma empresa internacional para 50 e 100 unidades. \u00c0 produ\u00e7\u00e3o e \n\nassemblagem de componentes para 50 unidades do controlador foi dada uma cota\u00e7\u00e3o de \n\nUS$2076 \u2013 1941\u20ac \u2013 enquanto 100 unidades custariam US$3597 \u2013 3364\u20ac, \u00e0 taxa de \n\nconvers\u00e3o atual. Conclu\u00edmos que a unidade ficaria por 38.82\u20ac no caso da produ\u00e7\u00e3o de \n\n50 controladores e 33.64\u20ac para a produ\u00e7\u00e3o de 100. A estes pre\u00e7os, seria necess\u00e1rio \n\nadicionar o pre\u00e7o do LCD (1\u20ac) e da placa Arduino (7\u20ac) bem como do m\u00f3dulo de rel\u00f3gio \n\nde tempo real (1\u20ac), comando e recetor infravermelhos (1,20\u20ac) e, caso necess\u00e1rio, \n\nBluetooth (5\u20ac). A Tabela 12 resume os pre\u00e7os unit\u00e1rios dos 3 modos de produ\u00e7\u00e3o \n\nanalisados. \n\n \n\nTabela 12 - Compara\u00e7\u00e3o de pre\u00e7os do controlador em diferentes m\u00e9todos de produ\u00e7\u00e3o. \n\nModo de Produ\u00e7\u00e3o \nPre\u00e7o* total \n\nunit\u00e1rio \n\nProdu\u00e7\u00e3o individual, manual** 50\u20ac \n\nProdu\u00e7\u00e3o e assemblagem \u2013 50 unidades 49\u20ac \n\nProdu\u00e7\u00e3o e assemblagem \u2013 100 unidades 44\u20ac \n  *Os pre\u00e7os n\u00e3o incluem m\u00f3dulo Bluetooth. \n\n**Exclui m\u00e3o de obra. \n\n \n\nComo era esperado, existe uma redu\u00e7\u00e3o do custo unit\u00e1rio do controlador com o \n\naumento da produ\u00e7\u00e3o. Mesmo em pequenas quantidades, o custo de um controlador com \n\nassemblagem inclu\u00edda \u00e9 inferior ao pre\u00e7o da compra e montagem manual de um \n\ncontrolador se excluirmos o custo de m\u00e3o de obra necess\u00e1ria para a opera\u00e7\u00e3o. \n\nRelativamente aos controladores existentes no mercado, a empresa MVM indicou \n\num pre\u00e7o de refer\u00eancia que ronda os 57\u20ac para os modelos com funcionalidades id\u00eanticas \n\nao desenvolvido neste projeto, embora sem conectividade Bluetooth nem controlo \n\natrav\u00e9s de infravermelhos. \n\nConcluindo, pode-se afirmar que o controlador desenvolvido neste projeto apresenta \n\num pre\u00e7o competitivo, que pode ser inferior aos utilizados atualmente conforme o \n\nm\u00e9todo e volume de produ\u00e7\u00e3o. A diferen\u00e7a de pre\u00e7o pode tornar-se mais significativa \n\ncaso o n\u00famero de unidades produzidas seja consideravelmente aumentado, bem como a \n\nprocura por outros fornecedores pode levar \u00e0 conclus\u00e3o de que \u00e9 poss\u00edvel um pre\u00e7o ainda \n\nmais baixo. \n\n\n\n119 \n\n \n\n5. Conclus\u00f5es e Trabalhos Futuros \n\nPara a realiza\u00e7\u00e3o deste trabalho foi necess\u00e1rio proceder a um estudo exaustivo acerca \n\ndos sistemas de queima para aquecimento dom\u00e9stico, nomeadamente dos sistemas de \n\nqueima a pellets: o estudo do seu funcionamento e das op\u00e7\u00f5es existentes no mercado para \n\ncontrolar estes sistemas caracterizaram o primeiro passo para o desenvolvimento deste \n\ncontrolador. \n\nReunida a informa\u00e7\u00e3o acerca dos equipamentos, atrav\u00e9s de pesquisa e atrav\u00e9s do \n\ndi\u00e1logo com a MVM, procurou-se iniciar o projeto escolhendo uma plataforma que se \n\nconcluiu ser a mais adequada, o Arduino. \n\nPosteriormente, durante o desenvolvimento do hardware prot\u00f3tipo, os v\u00e1rios \n\nm\u00e9todos de controlo associados aos elementos da salamandra foram desenvolvidos e \n\nagregados a uma solu\u00e7\u00e3o de interface e firmware desenvolvido em paralelo. \n\nEste trabalho engloba ensaios num equipamento de testes, localizado na MVM, onde \n\nforam obtidos resultados satisfat\u00f3rios no que \u00e0 qualidade da queima \u2013 aus\u00eancia de fumos \u2013 \n\ndiz respeito. O sistema mostrou-se fi\u00e1vel ao longo das horas de teste, n\u00e3o havendo registo \n\nde nenhuma anomalia no que diz respeito \u00e0 queima, \u00e0 leitura de temperaturas ou mau \n\nfuncionamento de hardware. \n\nPara efeitos de comercializa\u00e7\u00e3o, ser\u00e1 necess\u00e1rio submeter o controlador a v\u00e1rias \n\nhoras de testes monitorizados \u2013 os chamados stress tests \u2013 e tamb\u00e9m tratar dos processos de \n\ncertifica\u00e7\u00e3o. Durante a realiza\u00e7\u00e3o do projeto n\u00e3o foi poss\u00edvel efetuar testes de longa dura\u00e7\u00e3o \n\numa vez que n\u00e3o havia condi\u00e7\u00f5es para o efeito, dado o equipamento estar localizado na \n\nempresa, local onde durante a noite n\u00e3o existe vigil\u00e2ncia. Seria tamb\u00e9m importante aferir \n\nacerca do cumprimento das diretivas referentes \u00e0 legisla\u00e7\u00e3o a aplicar relativamente \u00e0 \n\ncompatibilidade eletromagn\u00e9tica do controlador, nomeadamente atrav\u00e9s de testes na c\u00e2mara \n\nanecoica da ESTG. Seria necess\u00e1rio garantir o cumprimento das diretivas 2004/108/CE que \n\ndiz respeito \u00e0 compatibilidade eletromagn\u00e9tica e a 2006/95/CE que refere \u00e0 baixa tens\u00e3o e \n\nsubmeter o controlador ao organismo nacional de normaliza\u00e7\u00e3o, o Instituto Portugu\u00eas da \n\nQualidade (IPQ). \n\nRelativamente ao custo deste controlador, tendo como refer\u00eancia o pre\u00e7o indicado \n\npela MVM, que \u00e9 de controladores produzidos para v\u00e1rios pa\u00edses \u2013 portanto, em v\u00e1rios \n\n\n\n120 \n\n \n\nmilhares de unidades -, pode-se considerar que o objetivo de apresentar um controlador com \n\num custo competitivo foi alcan\u00e7ado. O custo \u00e9 inferior ao valor de refer\u00eancia e consegue-se \n\ndiluir caso seja produzido em grandes quantidades, o que implica a venda a v\u00e1rias empresas \n\ne provavelmente a exporta\u00e7\u00e3o. \n\nPara trabalhos futuros, apesar de objetivamente o trabalho inicial proposto estar \n\nconclu\u00eddo, a melhoria cont\u00ednua \u00e9 uma vantagem que se pretendeu garantir desde o in\u00edcio do \n\nprojeto. O desenho da placa de controlo contempla as liga\u00e7\u00f5es para um rel\u00e9 que pode ser \n\naproveitado para acionar uma bomba de \u00e1gua, aplicado a equipamentos com aquecimento \n\nde \u00e1guas sanit\u00e1rias e/ou a caldeiras. No entanto, o firmware n\u00e3o prev\u00ea essa situa\u00e7\u00e3o. Bastaria, \n\npor exemplo, ligar a bomba de \u00e1gua sempre que a temperatura de fumos fosse superior a um \n\ndeterminado valor, conhecido e testado, que garantisse o aquecimento da \u00e1gua em \n\ncircula\u00e7\u00e3o. \n\nAinda relativamente ao firmware, \u00e9 poss\u00edvel reduzir os custos do controlador caso se \n\nimplemente uma interface mais simples e barata. H\u00e1 utilizadores que n\u00e3o d\u00e3o valor a um \n\necr\u00e3 ou comando remoto e cuja intera\u00e7\u00e3o com dois potenci\u00f3metros seletores de n\u00edvel de \n\npot\u00eancia e velocidade de ventilador sejam suficientes. O hardware j\u00e1 prev\u00ea isso \u2013 diferentes \n\nplacas de interface \u2013 mas o firmware necessita de ser adaptado. No caso de um utilizador ter \n\ndificuldades visuais, \u00e9 poss\u00edvel substituir o ecr\u00e3 utilizado neste projeto por outro de maiores \n\ndimens\u00f5es, desde que tenha o mesmo controlador de ecr\u00e3 (HD44780), sem efetuar altera\u00e7\u00f5es \n\nao firmware; seria uma mais valia a ter em conta, mediante avalia\u00e7\u00e3o do custo inerente. \n\nA climatiza\u00e7\u00e3o n\u00e3o foi testada em ambiente pr\u00f3prio neste trabalho e apenas reflete o \n\ncontrolo nos 5 n\u00edveis de pot\u00eancia pr\u00e9-definidos. Uma climatiza\u00e7\u00e3o com d\u00e9bito de pot\u00eancia \n\ngradual poder\u00e1 trazer melhores resultados tanto na manuten\u00e7\u00e3o de temperatura como na \n\npoupan\u00e7a de consumo de pellets. Para este efeito provavelmente seria necess\u00e1rio incluir o \n\nmedidor de massa de ar para conseguir fazer um controlo direto da admiss\u00e3o de ar na \n\ncombust\u00e3o. Embora a integra\u00e7\u00e3o do sensor medidor de massa de ar obrigue a uma revis\u00e3o \n\nna placa do controlador e a implementa\u00e7\u00e3o no firmware, esta poderia ser uma funcionalidade \n\nvantajosa para parte dos clientes de sistemas de aquecimento a pellets. A altera\u00e7\u00e3o \u00e0 placa \n\ndo controlador n\u00e3o daria origem a uma vers\u00e3o distinta mas sim a uma nova vers\u00e3o, \n\ncompat\u00edvel com a placa atual. \n\nA comunica\u00e7\u00e3o sem fios tamb\u00e9m n\u00e3o ficou esquecida. Ao ser aplicado o m\u00f3dulo \n\nBluetooth, o utilizador pode controlar o equipamento atrav\u00e9s v\u00e1rios dispositivos, fazendo \n\n\n\n121 \n\n \n\nuso da aplica\u00e7\u00e3o universal criada no decorrer deste projeto, compat\u00edvel com smartphones, \n\ntablets, ou computadores com o sistema operativo Windows 10. A aplica\u00e7\u00e3o desenvolvida, \n\napesar de plenamente funcional, serve meramente para efeitos demonstrativos. Numa vers\u00e3o \n\ncomercial dever\u00e1 ser melhorada a sua interface e alargadas as capacidades. Seria \u00fatil por \n\nexemplo uma monitoriza\u00e7\u00e3o da temperatura da casa, receber alertas de pouco combust\u00edvel \n\nno dep\u00f3sito ou at\u00e9 mesmo notifica\u00e7\u00f5es de temperatura baixa na habita\u00e7\u00e3o, sugerindo o in\u00edcio \n\nde climatiza\u00e7\u00e3o autom\u00e1tica \u2013 deste modo, a salamandra n\u00e3o deixaria o edif\u00edcio arrefecer em \n\ndemasia, poupando combust\u00edvel na manuten\u00e7\u00e3o da temperatura e garantindo conforto \n\nt\u00e9rmico aos utilizadores. Outra possibilidade seria fazer uso da liga\u00e7\u00e3o Bluetooth para \n\ncomandar o sistema atrav\u00e9s de um painel de controlo embutido na parede, com bot\u00f5es ou \n\necr\u00e3 t\u00e1ctil, dispensando a interface presente no corpo da salamandra. \n\nFazendo uma retrospetiva ao trabalho desenvolvido, verifica-se que os objetivos \n\nprincipais foram cumpridos: desenvolvimento de um controlador nacional, com um custo \n\nreduzido e ainda com margem para evolu\u00e7\u00e3o, que oferece algo que de momento n\u00e3o existe \n\nno mercado da MVM: a comunica\u00e7\u00e3o Bluetooth e a exist\u00eancia de uma aplica\u00e7\u00e3o m\u00f3vel. \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\n\n122 \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\n123 \n\n \n\nRefer\u00eancias \n\n \n\n[1] \u201cTradingEconomics,\u201d [Online]. Available: \n\nhttp://www.tradingeconomics.com/. [Acedido em 2016 Fevereiro 19]. \n\n[2] \u201cEnerpellets,\u201d [Online]. Available: \n\nhttp://www.enerpellets.pt/our_pellets.html. [Acedido em 18 Fevereiro 2016]. \n\n[3] \u201cEnergium,\u201d [Online]. Available: \n\nhttp://www.energenium.pt/energias/biomassa.html. [Acedido em 18 Fevereiro \n\n2016]. \n\n[4] \u201cEnergias Renov\u00e1veis,\u201d [Online]. Available: \n\nhttp://energiasalternativas.webnode.com.pt/energias-renovaveis/biomassa/. \n\n[Acedido em 17 Fevereiro 2016]. \n\n[5] \u201cJornal de Neg\u00f3cios,\u201d [Online]. Available: \n\nhttp://www.jornaldenegocios.pt/empresas/detalhe/grupo_portugues_investe_53_\n\nmilhoes_em_fabrica_de_pellets_nos_estados_unidos.html. [Acedido em 18 \n\nFevereiro 2016]. \n\n[6] \u201cDECO Proteste,\u201d [Online]. Available: http://www.deco.proteste.pt/. \n\n[Acedido em 19 Fevereiro 2016]. \n\n[7] \u201cPortal do Ambiente e do Cidad\u00e3o,\u201d [Online]. Available: \n\nhttp://ambiente.maiadigital.pt/ambiente/energia/mais-informacao-1/sobre-as-\n\nenergias-alternativas. [Acedido em 23 Fevereiro 2016]. \n\n[8] \u201cDirectiva Europeia,\u201d [Online]. Available: \n\nhttp://www.apren.pt/fotos/gca/lexuriserv_1265321625.pdf. [Acedido em 18 \n\nFevereiro 2016]. \n\n[9] \u201cBioEnergiaPortugal,\u201d [Online]. Available: \n\nhttp://bioenergiaportugal.com/wp-\n\ncontent/uploads/2015/06/02_BioenergiaPortugal2015_CBE_TeresaAlmeida.pdf. \n\n[Acedido em 24 Fevereiro 2016]. \n\n\n\n124 \n\n \n\n[10] \u201cChaleurnature,\u201d [Online]. Available: http://www.chaleurnature-granules-\n\nbois-76-chauffage-normandie.com/images/prod2-big.jpg. [Acedido em 18 \n\nFevereiro 2016]. \n\n[11] \u201cEnerpor,\u201d [Online]. Available: www.enerpor.pt. [Acedido em 24 \n\nFevereiro 2016]. \n\n[12] \u201cEnerpor,\u201d [Online]. Available: http://www.enerpor.pt/pt/Simulador. \n\n[Acedido em 03 Agosto 2016]. \n\n[13] \u201cC\u00e2mara Municipal Oliveira de Azemeis,\u201d [Online]. Available: www.cm-\n\noaz.pt. [Acedido em 13 03 2016]. \n\n[14] \u201cCebio,\u201d [Online]. Available: \n\nhttp://www.cebio.net/web/images/stories/PellCert_flyer.pdf. [Acedido em 7 \n\nSetembro 2016]. \n\n[15] \u201cAssocia\u00e7\u00e3o Nacional de Pellets Energ\u00e9ticas de Biomassa,\u201d [Online]. \n\nAvailable: http://www.anpeb.pt/. [Acedido em 25 Fevereiro 2016]. \n\n[16] \u201cQuente-e-frio,\u201d [Online]. Available: http://www.quente-e-frio.info/wp-\n\ncontent/uploads/2014/03/lareira-1.jpg. [Acedido em 18 Fevereiro 2016]. \n\n[17] [Online]. Available: http://img.edilportale.com/product-\n\nthumbs/b_prodotti-62649-rele9c2503b1fc64d40bf7996074373e526.jpg. [Acedido \n\nem 18 Fevereiro 2016]. \n\n[18] \u201cTvi24,\u201d 11 Fevereiro 2009. [Online]. Available: www.tvi24.iol.pt. \n\n[Acedido em 14 Mar\u00e7o 2016]. \n\n[19] \u201cAlpis,\u201d [Online]. Available: \n\nhttp://www.alpis.pt/recuperadores/manualrecuperador.pdf. [Acedido em 20 \n\nOutubro 2016]. \n\n[20] \u201cSalar Lareiras,\u201d [Online]. Available: http://www.salar-\n\nlareiras.pt/vantagens-lareira-recuperador-calor.html. [Acedido em 5 Dezembro \n\n2016]. \n\n[21] \u201cMaxima Interiores,\u201d [Online]. Available: \n\nhttp://www.maximainteriores.xl.pt/decor/interiores/especial/19/esp_03.jpg. \n\n[Acedido em 18 Fevereiro 2016]. \n\n\n\n125 \n\n \n\n[22] \u201cJVP Churrasqueiras,\u201d [Online]. Available: http://www.jvp-\n\nchurrasqueiras.com/imagens/recuperadores_calor_K78-c.jpg. [Acedido em 18 \n\nFevereiro 2016]. \n\n[23] \u201cSitiodaslareiras,\u201d [Online]. Available: http://www.sitiodaslareiras.com. \n\n[Acedido em 18 Fevereiro 2016]. \n\n[24] \u201cEnat.pt,\u201d [Online]. Available: http://pt.enat.pt/media/342827/esquema-\n\nsolzaima2.jpg. [Acedido em 18 Fevereiro 2016]. \n\n[25] \u201cOliveira &amp; Carvalho,\u201d [Online]. Available: \n\nhttp://img.pai.pt/mysite/media/40/02/5/961d8533-ee54-4c5f-bc3c-\n\n9cb1df07624a_LARGE.jpg. [Acedido em 18 Fevereiro 2016]. \n\n[26] \u201cLeroyMerlin,\u201d [Online]. Available: http://www.leroymerlin.pt/Site/Fazer-\n\ne-facil/Tutoriais/Tudo-o-que-precisa-saber-sobre-salamandras.aspx. [Acedido em \n\n15 Fevereiro 2017]. \n\n[27] \u201cEnergokamin - Solid Fuel Flames,\u201d [Online]. Available: \n\nhttp://www.energokamin.com/EN/images/solid-fuel-flames-en.jpg. [Acedido em \n\n16 Fevereiro 2016]. \n\n[28] \u201cHydronic Heating,\u201d [Online]. Available: http://1.bp.blogspot.com/-\n\nwR7Oj8y_TVE/UmE2Dy96heI/AAAAAAAAHDU/Fyznr1k-\n\nNJI/s1600/hydronic-heating-installation.gif. [Acedido em 18 Fevereiro 2016]. \n\n[29] \u201cThisoldhouse,\u201d [Online]. Available: \n\nhttp://www.thisoldhouse.com/toh/photos/0,,20654453_21251500,00.html. \n\n[Acedido em 18 Fevereiro 2016]. \n\n[30] \u201cMLE - Solu\u00e7\u00f5es de Climatiza\u00e7\u00e3o,\u201d [Online]. Available: \n\nhttp://www.mle.pt/extraflame/encastraveis-a-pellets/encastravel-a-pellets-\n\ncomfort-mini-crystal/#prettyPhoto[gallery1]/1/. [Acedido em 18 Fevereiro 2016]. \n\n[31] \u201cFamarbrevetti,\u201d [Online]. Available: \n\nhttp://www.famarbrevetti.com/media/comuni/spaccato-karif-zefira.jpg. [Acedido \n\nem 18 Fevereiro 2016]. \n\n[32] \u201cEnat.pt,\u201d [Online]. Available: \n\nhttp://pt.enat.pt/pt/produtos/biomassa/caldeiras-a-pellets. [Acedido em 18 \n\nFevereiro 2016]. \n\n\n\n126 \n\n \n\n[33] \u201cRauschert,\u201d [Online]. Available: \n\nhttp://rauschert.com/images/content_200x200/functional-\n\ncomponents/gluehzuender-1.jpg. [Acedido em 18 Fevereiro 2016]. \n\n[34] C. M. Mendes, \u201cC. M. Mendes, \"Ensaio de equipamento de aquecimento \n\nambiente a pellets para marca\u00e7\u00e3o CE\", Universidade do Minho,\u201d [Online]. \n\nAvailable: \n\nhttp://repositorium.sdum.uminho.pt/bitstream/1822/21725/1/TESE_Carl \n\nos%20Mendes_2011.pdf. [Acedido em 18 Fevereiro 2016]. \n\n[35] \u201cPropellets,\u201d [Online]. Available: http://www.propellets.at/en/heating-\n\nwith-woodpellets/pellet-boilers/how-does-it-work/. [Acedido em 18 Fevereiro \n\n2016]. \n\n[36] \u201cPelletHead,\u201d [Online]. Available: http://pellethead.com/wp-\n\ncontent/uploads/2013/12/p-323-120559_one__34368.jpg. [Acedido em 18 \n\nFevereiro 2016]. \n\n[37] [Online]. Available: \n\nhttp://cdn.shopify.com/s/files/1/0270/8519/files/HarmanCircuitBoard_large.JPG?\n\n8666109069640077379. [Acedido em 18 Fevereiro 2016]. \n\n[38] \u201cCEZA,\u201d [Online]. Available: \n\nhttp://ceza.it/media/images/prodotti/pannello_display.jpg. [Acedido em 18 \n\nFevereiro 2016]. \n\n[39] [Online]. Available: \n\nhttps://i.ytimg.com/vi/6rU2K6ZmTMs/maxresdefault.jpg. [Acedido em 18 \n\nFevereiro 2016]. \n\n[40] \u201cAmazon,\u201d [Online]. Available: http://ecx.images-\n\namazon.com/images/I/41eEOMq2OpL._SX300_.jpg. [Acedido em 18 Fevereiro \n\n2016]. \n\n[41] \u201cAmazon,\u201d [Online]. Available: http://ecx.images-\n\namazon.com/images/I/51X%2BRUkJcuL._SX342_.jpg. [Acedido em 18 \n\nFevereiro 2016]. \n\n[42] \u201cEveryChina,\u201d [Online]. Available: \n\nhttp://img2.everychina.com/img/b1/af/b6dbb3d09292ee04744ba0417e31-\n\n300x300c0-\n\n\n\n127 \n\n \n\naa6b/control_panel_home_heater_wood_pellet_stoves_burners_fire_place_cr_06\n\n.jpg. [Acedido em 18 Fevereiro 2016]. \n\n[43] \u201cInstructables,\u201d [Online]. Available: http://www.instructables.com. \n\n[Acedido em 18 Fevereiro 2016]. \n\n[44] \u201cM\u00f3dulo GPRS,\u201d [Online]. Available: \n\nhttp://g01.a.alicdn.com/kf/HTB1HoZgIVXXXXbTaXXXq6xXFXXXK/New-\n\nSIM900A-V4-0-Kit-Wireless-Extension-Module-GSM-GPRS-Board-Antenna-\n\nTested-Worldwide-Store.jpg. [Acedido em 18 Fevereiro 2016]. \n\n[45] \u201cWikim\u00e9dia,\u201d [Online]. Available: \n\nhttps://upload.wikimedia.org/wikipedia/commons/d/d7/Protoshield2.jpg. \n\n[Acedido em 28 Fevereiro 2016]. \n\n[46] \u201cArduino.cc,\u201d [Online]. [Acedido em 28 Fevereiro 2016]. \n\n[47] \u201cMicrochip,\u201d [Online]. Available: http://www.microchip.com/. [Acedido \n\nem 29 Fevereiro 2016]. \n\n[48] \u201cChipKITT,\u201d [Online]. Available: http://chipkit.net. [Acedido em 10 \n\nSetembro 2016]. \n\n[49] \u201cEmbeddedAdventures,\u201d [Online]. Available: \n\nhttp://www.embeddedadventures.com/images/uploaded_images/PLT_1005_600.j\n\npg. [Acedido em 10 Setembro 2016]. \n\n[50] \u201cRaspberryPiOrg,\u201d [Online]. Available: https://www.raspberrypi.org. \n\n[Acedido em 28 02 2016]. \n\n[51] L. M. P. Neves, Rectificadores Controlados a Tir\u00edstor - Electr\u00f3nica de \n\nPot\u00eancia.  \n\n[52] \u201cWikip\u00e9dia,\u201d [Online]. Available: \n\nhttps://en.wikipedia.org/wiki/Zero_crossing#/media/File:Zero_crossing.svg. \n\n[Acedido em 23 06 2016]. \n\n[53] Arduino, \u201cArduinoDS1302,\u201d [Online]. Available: \n\nhttp://playground.arduino.cc/Main/DS1302. [Acedido em 3 Fevereiro 2017]. \n\n[54] \u201cTOTALPHASE,\u201d [Online]. Available: \n\nhttps://www.totalphase.com/support/articles/200350046-Interfacing-with-3-wire-\n\nSPI. [Acedido em 20 Setembro 2016]. \n\n\n\n128 \n\n \n\n[55] C. Erlich Industrial Development, \u201cEIDUSA,\u201d [Online]. Available: \n\nhttp://www.eidusa.com/Electronics_Kits_TEMP_THERMISTOR_1.htm. \n\n[Acedido em 16 Novembro 2016]. \n\n[56] [Online]. Available: \n\nhttp://www.solucoesindustriais.com.br/images/produtos/imagens_897/p_microco\n\nntroladores-8.jpg. [Acedido em 29 Fevereiro 2016]. \n\n[57] Eletronica-pt, \u201cEletronica-pt,\u201d [Online]. Available: \n\nhttp://www.electronica-pt.com/. [Acedido em 21 06 2016]. \n\n[58] \u201cRadio-Electronics,\u201d [Online]. Available: http://www.radio-\n\nelectronics.com/. [Acedido em 2016 06 21]. \n\n[59] \u201cPCB Heaven,\u201d [Online]. Available: http://www.pcbheaven.com/. \n\n[Acedido em 08 Setembro 2016]. \n\n[60] \u201cQPH.EC,\u201d [Online]. Available: https://qph.ec.quoracdn.net/main-qimg-\n\n2e55af769c5750d552fc37570eb7f07b?convert_to_webp=true. [Acedido em 8 \n\nSetembro 2016]. \n\n \n\n \n\n \n\n  \n\n\n\n129 \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\n130 \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nEsta p\u00e1gina foi intencionalmente deixada em branco \n\n \n\n  \n\n\n\n131 \n\n \n\n Anexos \n\nAnexo A \u2013 Lista de material \n\n \n\nOs pre\u00e7os indicados na Tabela 13 s\u00e3o valores de refer\u00eancia. \n\nTabela 13 - Lista de componentes utilizados no controlador. \n\nQuantidade Descri\u00e7\u00e3o Pre\u00e7o und. \n\n6 Bot\u00f5es de press\u00e3o 0,10\u20ac \n\n1 Buzzer 0,2\u20ac \n\n1 Condensador 0,1uF 0,26\u20ac \n\n3 Condensador de Poliester 100nF 1,2\u20ac \n\n1 Condensador 2200uF 0,35\u20ac \n\n3 Conetor macho, passo 2,54mm 0,80\u20ac \n\n1 D\u00edodo 1N4148 0,05\u20ac \n\n2 Ficha f\u00eamea p/ cabo flat cable 1,35\u20ac \n\n2 Ficha macho p/ pcb flat cable 0,55\u20ac \n\n7 Fichas de parafuso 0,65\u20ac \n\n1(m) Flat cable 1,8\u20ac \n\n1 LCD 1\u20ac \n\n2 MOC3022 0,25 \u20ac \n\n1 MOC3041 0,64 \u20ac \n\n1 M\u00f3dulo Bluetooth 5\u20ac \n\n1 M\u00f3dulo RTC DS1302 1\u20ac \n\n1 Opto. PC814 0,18\u20ac \n\n1 Ponte Rect. DF08M 0,36\u20ac \n\n1 Recetor IR c/ Comando Remoto 1,20\u20ac \n\n1 Reg. Tens\u00e3o LM7805 0,4\u20ac \n\n1 Rel\u00e9 5Vdc 1\u20ac \n\n2 Resist\u00eancia 10k? 0,15\u20ac \n\n2 Resist\u00eancia 180? 2W 0,10 \u20ac \n\n1 Resist\u00eancia 1k? 0.20\u20ac \n\n3 Resist\u00eancia 2,2k? 2W 0,18\u20ac \n\n2 Resist\u00eancia 220? 0,13\u20ac \n\n1 Resist\u00eancia 240k? 0,20\u20ac \n\n1 Resist\u00eancia 360? 2W 0,30\u20ac \n\n1 Resist\u00eancia 380? 0,13\u20ac \n\n1 Resist\u00eancia 680? 0,13\u20ac \n\n1 Transformador 230V/9V, 5VA 5,01 \u20ac \n\n1 Trans\u00edstor 2n3904 0,05\u20ac \n\n3 TRIAC BT136-600 0,35 \u20ac"}]}}}