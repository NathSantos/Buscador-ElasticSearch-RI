{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.17465"}, {"@name": "filename", "#text": "24259_Vin%c3%adcius%20C%c3%a9sar.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "P\u00f3s-Gradua\u00e7\u00e3o em Ci\u00eancia da Computa\u00e7\u00e3o \n\n \n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n\u201cRastreamento de Reconstru\u00e7\u00e3o de \n\nDutos em Ambientes Submarinos\u201d \n\n \n\nPor \n\n \n\nVin\u00edcius Miranda C\u00e9sar \n\n \n\nDisserta\u00e7\u00e3o de Mestrado \n\n \n\n \n\n \n\n \n\n \n\n \nUniversidade Federal de Pernambuco \n\nposgraduacao@cin.ufpe.br \n\nwww.cin.ufpe.br/~posgraduacao \n\n \n \n\nRECIFE \n2015 \n\n\n\n Universidade Federal de Pernambuco \n\nCENTRO DE INFORM\u00c1TICA \n\nP\u00d3S-GRADUA\u00c7\u00c3O EM CI\u00caNCIA DA COMPUTA\u00c7\u00c3O \n\n \n \n \n \n \n \n \n \n \n \n\n \n\nVin\u00edcius Miranda C\u00e9sar \n \n\n \n\n \n\n \n\n\u201cRASTREAMENTOS E RECOSNTRU\u00c7\u00c3O DE \n\nDUTOS EM AMBIENTES SUBMARINOS\u201d \n\n \n \n\n \n\n \n\n \n\n \n \n\n \n\n \n\n                                          \n\n \n\n \n\n \n\n                                         \n\n \n\n \n\nORIENTADOR(A): Prof\u00aa Dr. Judith Kelner \n \n \n \n \n \n\nRECIFE \n2015 \n\nEste trabalho foi apresentado \u00e0 P\u00f3s-Gradua\u00e7\u00e3o em Ci\u00eancia da \n\nComputa\u00e7\u00e3o do Centro de Inform\u00e1tica da Universidade Federal de \n\nPernambuco como requisito parcial para obten\u00e7\u00e3o do grau de Mestre em \n\nCi\u00eancia da Computa\u00e7\u00e3o. \n \n\n \n\n\n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n                  \n\n \n                               Cataloga\u00e7\u00e3o na fonte \n\nBibliotec\u00e1ria Jane Souto Maior, CRB4-571                  \n  \n\n  \n \n\nC421r C\u00e9sar, Vin\u00edcius Miranda                               \nRastreamento e reconstru\u00e7\u00e3o de dutos em ambiente submarino  \n\n/ Vin\u00edcius Miranda C\u00e9sar. \u2013 Recife: O Autor, 2015. \n 104 f.: il. fig., tab. \n \n  Orientador: Judith Kelner. \n  Disserta\u00e7\u00e3o (Mestrado) \u2013 Universidade Federal de \n\nPernambuco. CIn, Ci\u00eancia da computa\u00e7\u00e3o, 2015. \n                   Inclui refer\u00eancias. \n \n\n       1. Ci\u00eancia da computa\u00e7\u00e3o.  2. Vis\u00e3o computacional. 3. \nReconstru\u00e7\u00e3o 3D. 4. Processamento de imagem. I. Kelner, Judith \n(orientadora).  II. T\u00edtulo. \n \n      004               CDD (23. ed.)          UFPE- MEI 2015-152 \n       \n\n \n\n \n\n \n\n\n\nDisserta\u00e7\u00e3o de apresentada por Vin\u00edcius Miranda C\u00e9sar \u00e0 P\u00f3s-Gradua\u00e7\u00e3o em Ci\u00eancia da \n\nComputa\u00e7\u00e3o do Centro de Inform\u00e1tica da Universidade Federal de Pernambuco, sob o \n\nt\u00edtulo \u201cRastreamento e Reconstru\u00e7\u00e3o de Dutos em Ambiente Submarino\u201d orientada \n\npela Profa. Judith Kelner e aprovada pela Banca Examinadora formada pelos professores: \n\n \n\n \n\n    ______________________________________________ \n\n                                        Prof. George Darmiton da Cunha Cavalcanti \n\n                                        Centro de Inform\u00e1tica/UFPE \n\n \n\n \n\n \n\n                                       ______________________________________________ \n\n                                       Prof. Alberto Barbosa Raposo \n\n                                       Departamento de Ci\u00eancia da Computa\u00e7\u00e3o / PUC/RJ \n\n \n\n                    \n\n                           \n\n                                       _______________________________________________ \n\n                                       Profa. Judith Kelner \n\n                                       Centro de Inform\u00e1tica / UFPE \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nVisto e permitida a impress\u00e3o. \n\nRecife, 7 de agosto de 2015. \n\n \n\n \n\n___________________________________________________ \n\nProfa. Edna Natividade da Silva Barros \nCoordenadora da P\u00f3s-Gradua\u00e7\u00e3o em Ci\u00eancia da Computa\u00e7\u00e3o do  \n\nCentro de Inform\u00e1tica da Universidade Federal de Pernambuco. \n\n\n\nAGRADECIMENTOS\n\nA conclus\u00e3o desta disserta\u00e7\u00e3o de mestrado foi poss\u00edvel gra\u00e7as ao apoio de diversas\npessoas e entidades. A primeira entidade \u00e9 o de grupo de pesquisa GRVM, liderado\npela Professora Dra. Judith Kelner. Aproveito para agradecer a todos os membros que\ncolaboraram de forma direta ou indireta para o desenvolvimento desta pesquisa. A CAPES\ne a FINEP/Petrobras que contribu\u00edram financeiramente atrav\u00e9s de bolsas e projetos de\npesquisa o meu mais sincero agradecimento. Por fim, agrade\u00e7o aos membros do laborat\u00f3rio\nTES no Cenpes, do laborat\u00f3rio LabOceano da COPPE/UFRJ e da Sapura que permitiram\na realiza\u00e7\u00e3o de diversos experimentos. Esses experimentos colaboraram imensamente para\nos resultados finais apresentados neste trabalho. Finalmente agrade\u00e7o ao prof. Silvio Melo\npela sua coorienta\u00e7\u00e3o e ao Dr. Ismael Santos pelas suas interven\u00e7\u00f5es, ambos contribu\u00edram\npara a finaliza\u00e7\u00e3o da pesquisa.\n\n\n\nIf everything seems under control,\nyou\u2019re just not going fast enough\n\n(Mario Andretti)\n\n\n\nRESUMO\nA instala\u00e7\u00e3o de dutos flex\u00edveis em ambiente submarino de alta profundidade \u00e9 realizada\nrecorrentemente pelas ind\u00fastrias de \u00f3leo e g\u00e1s. Estes dutos transportam fluidos como \u00e1gua,\ngases e \u00f3leo. Durante o minucioso processo de instala\u00e7\u00e3o dos dutos flex\u00edveis, \u00e9 necess\u00e1rio\no monitoramento constante de sua geometria a fim de evitar a propaga\u00e7\u00e3o de esfor\u00e7os e\nconsequentemente danos aos equipamentos envolvidos. Para que este monitoramento seja\neficiente, podem ser utilizadas t\u00e9cnicas de reconstru\u00e7\u00e3o 3D que usam como entrada as\nimagens capturadas por um par de c\u00e2meras est\u00e9reo instaladas nos rob\u00f4s que acompanham\na opera\u00e7\u00e3o. Esta disserta\u00e7\u00e3o de mestrado prop\u00f5e o desenvolvimento dos algoritmos de\nrastreamento e reconstru\u00e7\u00e3o para dutos flex\u00edveis com o intuito de permitir o monitoramento\nem tempo real da opera\u00e7\u00e3o.\n\nO algoritmo de rastreamento proposto tem a fun\u00e7\u00e3o de determinar um conjunto de pontos\nque representam a proje\u00e7\u00e3o do eixo medial do duto em cada imagem do par est\u00e9reo. Para\nalcan\u00e7ar esse objetivo, o algoritmo utiliza caracter\u00edsticas da ilumina\u00e7\u00e3o em ambientes\nsubmarinos e de marca\u00e7\u00f5es realizadas no duto. A etapa de reconstru\u00e7\u00e3o utiliza os pontos\nrastreados para estimar uma curva B-spline racional n\u00e3o-uniforme (NURBS) sobre um\nplano tridimensional. Essa aproxima\u00e7\u00e3o simplifica o processo de reconstru\u00e7\u00e3o e permite\nobter resultados mais precisos.\n\nExperimentos realizados em ambiente aqu\u00e1tico e a\u00e9reo, utilizando uma escala reduzida,\npermitiram uma an\u00e1lise da acur\u00e1cia e robustez dos algoritmos propostos. O erro m\u00e9dio\nalcan\u00e7ado foi menor que meio cent\u00edmetro em todos os casos analisados. Al\u00e9m disso,\nconcluiu-se que a disposi\u00e7\u00e3o dos pontos da curva e a posi\u00e7\u00e3o do plano influenciam na\nestimativa da reconstru\u00e7\u00e3o. Testes com imagens reais da opera\u00e7\u00e3o foram tamb\u00e9m realizados\ne permitiram validar as t\u00e9cnicas propostas neste ambiente. Os resultados obtidos foram\nrobustos em casos de baixa ilumina\u00e7\u00e3o, ruidosos e com elevada obliquidade. Os m\u00e9todos\npropostos s\u00e3o eficientes computacionalmente e permitem a obten\u00e7\u00e3o do resultado a uma\ntaxa superior a 30 quadros por segundo.\n\nPalavras-chave: B-spline; curvas; dutos; est\u00e9reo; NURBS; rastreamento; reconstru\u00e7\u00e3o.\n\n\n\nABSTRACT\nInstalling flexible pipes in deep underwater environments is a recurrent task in oil produc-\ntion industry. Such flexible pipes are responsible for transporting fluids such as water, gases\nand oil. The installation pipe connections is a meticulous process that requires continuous\nmonitoring of the pipe\u2019s geometry in order to prevent excessive tension along the line that\nmay cause costly damages to the end equipment.\n\nThis master thesis develops a 3D reconstruction method to ensure the success of this\ncritical operation. The model makes use of images captured by a stereo rig mounted on\nthe robots supporting the operation. At the heart of the model is a novel algorithm for\ntracking and reconstructing flexible pipes in order to allow real time pipe monitoring\nduring the installation operation.\n\nOur approach tracks a set of points that represents the pipe\u2019s projected medial axis in\neach image provided by the stereo rig. This is achieved using the scene\u2019s specifications\nincluding the as deep-water environment illumination and marks pre-painted over the used\npipes. The reconstruction stage uses the tracked points to estimate a plane non-uniform\nrational B-spline (NURBS) in 3D space. This approximation simplifies the reconstruction\nand i8s shown to improve accuracy.\n\nUnderwater and aerial experiments were performed in a reduced scale scenario to evaluate\nthe proposed method\u2019s accuracy and robustness. In all test cases, the mean of reconstruction\nerror was less than 1 centimeter. Furthermore, we conclude that the points\u2019 distribution\nalong the pipeline and the curve plane position impact the reconstruction\u2019s accuracy. In\naddition, tests carried out using real operation videos were performed. They allowed us to\nvalidate our technical proposal in this harsh environment. The results obtained were robust\nin almost all the analyzed cases. The proposed methods are computationally efficient and\nallow obtaining results at a rate of 30 frames per second or higher.\n\nKeywords: B-spline; curves; NURBS; pipe; reconstruction; stereo; tracking.\n\n\n\nLISTA DE ILUSTRA\u00c7\u00d5ES\n\nFigura 1 \u2013 Padr\u00e3o de pintura em regi\u00f5es brancas e pretas usada para marcar o duto. 21\nFigura 2 \u2013 C\u00e2mera submarina de baixa ilumina\u00e7\u00e3o . . . . . . . . . . . . . . . . . 23\nFigura 3 \u2013 Imagem de um duto real . . . . . . . . . . . . . . . . . . . . . . . . . . 24\nFigura 4 \u2013 Exemplos de imagens utilizadas por trabalhos de rastreamento e detec-\n\n\u00e7\u00e3o de dutos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26\nFigura 5 \u2013 Proje\u00e7\u00e3o de um ponto amostral na curva. . . . . . . . . . . . . . . . . 41\nFigura 6 \u2013 Corte longitudinal e transversal na imagem do duto . . . . . . . . . . . 43\nFigura 7 \u2013 Ilustra\u00e7\u00e3o da entrada e sa\u00edda do algoritmo de rastreamento . . . . . . . 44\nFigura 8 \u2013 Regi\u00e3o de proje\u00e7\u00e3o do duto na imagem . . . . . . . . . . . . . . . . . . 45\nFigura 9 \u2013 Curva superior e inferior no espa\u00e7o tridimensional . . . . . . . . . . . . 46\nFigura 10 \u2013 Ilustra\u00e7\u00e3o da transforma\u00e7\u00e3o da imagem . . . . . . . . . . . . . . . . . . 47\nFigura 11 \u2013 Ilustra\u00e7\u00e3o do rastreamento longitudinal . . . . . . . . . . . . . . . . . . 48\nFigura 12 \u2013 Esquem\u00e1tico do rastreamento transversal . . . . . . . . . . . . . . . . . 51\nFigura 13 \u2013 Regi\u00e3o de incerteza na triangula\u00e7\u00e3o de um ponto . . . . . . . . . . . . 57\nFigura 14 \u2013 Gr\u00e1fico do erro na triangula\u00e7\u00e3o de um ponto . . . . . . . . . . . . . . . 58\nFigura 15 \u2013 Incerteza na reconstru\u00e7\u00e3o da curva pelo m\u00e9todo de Xiao e Li . . . . . . 59\nFigura 16 \u2013 Ilustra\u00e7\u00e3o da proje\u00e7\u00e3o de uma curva planar em um par de c\u00e2meras est\u00e9reo 59\nFigura 17 \u2013 Ilustra\u00e7\u00e3o de imagens com trechos diferentes de duto sendo rastreados. 61\nFigura 18 \u2013 Obliquidade . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64\nFigura 19 \u2013 Regi\u00e3o de incerteza da reconstru\u00e7\u00e3o de um segmento de reta . . . . . . 65\nFigura 20 \u2013 Gr\u00e1ficos do erro da reconstru\u00e7\u00e3o de um segmento de reta . . . . . . . . 66\nFigura 21 \u2013 Ilustra\u00e7\u00e3o das componentes principais dos pontos da curva . . . . . . . 66\nFigura 22 \u2013 Suporte utilizado para movimenta\u00e7\u00e3o das c\u00e2meras. . . . . . . . . . . . 70\nFigura 23 \u2013 Cen\u00e1rio criado para experimentos em laborat\u00f3rio . . . . . . . . . . . . 70\nFigura 24 \u2013 Resultado do rastreamento em amostra de quadros do V\u00eddeo 1 capturado\n\nem ambiente aqu\u00e1tico. . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\nFigura 25 \u2013 Gr\u00e1fico de erro da reconstru\u00e7\u00e3o obtido no V\u00eddeo 1 nos experimentos\n\nsubmersos. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\nFigura 26 \u2013 Resultado do rastreamento em amostra de quadros do V\u00eddeo 2 capturado\n\nem ambiente aqu\u00e1tico. . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\nFigura 27 \u2013 Gr\u00e1fico de erro da reconstru\u00e7\u00e3o obtido no V\u00eddeo 2 nos experimentos\n\nem ambiente aqu\u00e1tico. . . . . . . . . . . . . . . . . . . . . . . . . . . . 74\nFigura 28 \u2013 Gr\u00e1fico da obliquidade estimado no V\u00eddeo 2 do experimento em ambiente\n\naqu\u00e1tico. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75\n\n\n\nFigura 29 \u2013 Resultado do rastreamento em amostra de quadros do V\u00eddeo 3 capturada\nem ambiente aqu\u00e1tico. . . . . . . . . . . . . . . . . . . . . . . . . . . . 75\n\nFigura 30 \u2013 Gr\u00e1fico de erro da reconstru\u00e7\u00e3o da curva obtido no V\u00eddeo 3 nos experi-\nmentos em ambiente aqu\u00e1tico . . . . . . . . . . . . . . . . . . . . . . . 76\n\nFigura 31 \u2013 Gr\u00e1fico da obliquidade estimado no V\u00eddeo 3 obtido na captura do\nexperimento realizado em ambiente aqu\u00e1tico. . . . . . . . . . . . . . . 77\n\nFigura 32 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 4 captu-\nrado em ambiente aqu\u00e1tico. . . . . . . . . . . . . . . . . . . . . . . . . 78\n\nFigura 33 \u2013 Gr\u00e1fico de erro da reconstru\u00e7\u00e3o obtido no V\u00eddeo 4 capturado nos expe-\nrimentos em ambiente aqu\u00e1tico . . . . . . . . . . . . . . . . . . . . . . 78\n\nFigura 34 \u2013 Gr\u00e1fico da obliquidade no V\u00eddeo 4 estimado no experimento realizado\nem ambiente aqu\u00e1tico. . . . . . . . . . . . . . . . . . . . . . . . . . . . 79\n\nFigura 35 \u2013 Ilustra\u00e7\u00e3o do erro entre a curva reconstru\u00edda e a curva do gabarito\nquando o erro m\u00e1ximo se localiza nas extremidades. . . . . . . . . . . . 80\n\nFigura 36 \u2013 Quadros capturados nos experimentos no laborat\u00f3rio e em ambiente\na\u00e9reo. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82\n\nFigura 37 \u2013 Ilustra\u00e7\u00e3o da estimativa dos graus de liberdade do movimento da c\u00e2mera\nnos experimentos em laborat\u00f3rio e no ar . . . . . . . . . . . . . . . . . 83\n\nFigura 38 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 1 captu-\nrado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 86\n\nFigura 39 \u2013 Resultado do rastreamento em amostra de quadro do V\u00eddeo 1, capturado\nem ambiente real, sem o uso da fun\u00e7\u00e3o de pesos. . . . . . . . . . . . . . 86\n\nFigura 40 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 2, captu-\nrado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 87\n\nFigura 41 \u2013 Imagens transformadas pelo algoritmo de rastreamento . . . . . . . . . 88\nFigura 42 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 3, captu-\n\nrado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 88\nFigura 43 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 4, captu-\n\nrado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 89\nFigura 44 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 5, captu-\n\nrado em ambiente real. . . . . . . . . . . . . . . . . . . . . . . . . . . . 90\nFigura 45 \u2013 Resultados do rastreamento nos casos de estresse do algoritmo . . . . . 91\n\n\n\nLISTA DE TABELAS\n\nTabela 1 \u2013 Medidas de erro de reconstru\u00e7\u00e3o da curva no experimento em laborat\u00f3rio\nrealizado em ambiente aqu\u00e1tico. . . . . . . . . . . . . . . . . . . . . . . 80\n\nTabela 2 \u2013 Par\u00e2metros utilizados em cada v\u00eddeo nos experimentos realizados em\nambiente a\u00e9reo. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81\n\nTabela 3 \u2013 Tabela de estimativas da amplitude do movimento do duto em cada\ngrau de liberdade nos experimentos realizados em ambiente a\u00e9reo . . . 84\n\nTabela 4 \u2013 Tabela do erro da estimativa das amplitudes dos movimentos nos\nexperimentos em laborat\u00f3rio e em ambiente a\u00e9reo. . . . . . . . . . . . 84\n\nTabela 5 \u2013 Tabela de erros de reconstru\u00e7\u00e3o da curva nos experimentos em labora-\nt\u00f3rio e em ambiente a\u00e9reo . . . . . . . . . . . . . . . . . . . . . . . . . 85\n\n\n\nSUM\u00c1RIO\n\n1 INTRODU\u00c7\u00c3O . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n1.1 Motiva\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n1.2 Objetivo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n1.3 Vis\u00e3o geral dos algoritmos propostos . . . . . . . . . . . . . . . . . . 16\n1.3.1 Rastreamento . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n1.3.2 Reconstru\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n1.4 Principais desafios . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18\n1.5 Contribui\u00e7\u00f5es . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18\n1.6 Estrutura do documento . . . . . . . . . . . . . . . . . . . . . . . . . . 18\n\n2 CEN\u00c1RIO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20\n2.1 Posicionamento . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20\n2.2 Duto . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20\n2.3 Sistema de c\u00e2meras . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n2.4 C\u00e2meras . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22\n2.5 Ilumina\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23\n2.6 Imagens . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23\n2.7 Considera\u00e7\u00f5es finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\n\n3 TRABALHOS RELACIONADOS . . . . . . . . . . . . . . . . . . . . 25\n3.1 Mapeamento interno de dutos . . . . . . . . . . . . . . . . . . . . . . 25\n3.2 Rastreamento e detec\u00e7\u00e3o de dutos e cabos . . . . . . . . . . . . . . 26\n3.3 Reconstru\u00e7\u00e3o de curvas . . . . . . . . . . . . . . . . . . . . . . . . . . 28\n3.4 Considera\u00e7\u00f5es finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30\n\n4 FUNDAMENTOS . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31\n4.1 Nota\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31\n4.2 Vis\u00e3o computacional . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n4.2.1 Geometria Projetiva . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n4.2.1.1 Coordenadas homog\u00eaneas . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n4.2.1.2 Transforma\u00e7\u00f5es projetivas . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33\n4.2.2 Modelo de c\u00e2mera pinhole . . . . . . . . . . . . . . . . . . . . . . . . . . 34\n4.2.3 Geometria epipolar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34\n4.2.4 Retifica\u00e7\u00e3o est\u00e9reo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\n4.2.5 Rela\u00e7\u00e3o entre proje\u00e7\u00f5es de pontos coplanares . . . . . . . . . . . . . . . . 35\n4.3 NURBS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37\n\n\n\n4.3.1 Defini\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37\n4.3.2 Invari\u00e2ncia a transforma\u00e7\u00f5es projetivas . . . . . . . . . . . . . . . . . . . . 38\n4.4 M\u00ednimos quadrados . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39\n4.5 Ajuste de curva . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40\n4.6 Considera\u00e7\u00f5es finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41\n\n5 T\u00c9CNICA PROPOSTA DE RASTREAMENTO DE DUTOS . . . . 43\n5.1 Formula\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43\n5.2 Regi\u00e3o de proje\u00e7\u00e3o do duto . . . . . . . . . . . . . . . . . . . . . . . . 45\n5.3 Transforma\u00e7\u00e3o da imagem . . . . . . . . . . . . . . . . . . . . . . . . 46\n5.4 Rastreamento longitudinal . . . . . . . . . . . . . . . . . . . . . . . . 47\n5.5 Rastreamento transversal . . . . . . . . . . . . . . . . . . . . . . . . . 49\n5.5.1 Fun\u00e7\u00e3o de pesos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n5.5.2 Solu\u00e7\u00e3o utilizando m\u00ednimos quadrados . . . . . . . . . . . . . . . . . . . . 50\n5.6 Aproxima\u00e7\u00f5es . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51\n5.7 Implementa\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\n5.8 Considera\u00e7\u00f5es finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53\n\n6 T\u00c9CNICA PROPOSTA PARA RECONSTRU\u00c7\u00c3O DE CURVAS PLA-\nNARES . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\n\n6.1 Reconstru\u00e7\u00e3o est\u00e9reo de NURBS . . . . . . . . . . . . . . . . . . . . 55\n6.2 Restri\u00e7\u00e3o de planaridade da curva . . . . . . . . . . . . . . . . . . . . 57\n6.3 Impondo a restri\u00e7\u00e3o de planaridade . . . . . . . . . . . . . . . . . . . 58\n6.4 Parametriza\u00e7\u00e3o da curva . . . . . . . . . . . . . . . . . . . . . . . . . 60\n6.5 N\u00famero de pontos de controle . . . . . . . . . . . . . . . . . . . . . . 62\n6.6 Algoritmo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63\n6.7 Fatores que influenciam a acur\u00e1cia da curva reconstru\u00edda . . . . . . 64\n6.8 Considera\u00e7\u00f5es finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67\n\n7 RESULTADOS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68\n7.1 Implementa\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68\n7.2 Metodologia dos experimentos . . . . . . . . . . . . . . . . . . . . . . 68\n7.3 Experimentos em laborat\u00f3rio . . . . . . . . . . . . . . . . . . . . . . . 69\n7.3.1 Ambiente aqu\u00e1tico . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71\n7.3.1.1 V\u00eddeo 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71\n7.3.1.2 V\u00eddeo 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\n7.3.1.3 V\u00eddeo 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74\n7.3.1.4 V\u00eddeo 4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\n7.3.1.5 Principais conclus\u00f5es do experimento . . . . . . . . . . . . . . . . . . . . . . . 77\n7.3.2 Ambiente a\u00e9reo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80\n\n\n\n7.3.2.1 Descri\u00e7\u00e3o do experimento . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80\n7.3.2.2 An\u00e1lise dos resultados . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82\n7.4 Experimentos em ambiente real . . . . . . . . . . . . . . . . . . . . . 85\n7.4.1 V\u00eddeo 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85\n7.4.2 V\u00eddeo 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87\n7.4.3 V\u00eddeo 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87\n7.4.4 V\u00eddeo 4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89\n7.4.5 V\u00eddeo 5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90\n7.4.6 Casos de estresse . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90\n7.5 An\u00e1lise geral . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92\n7.5.1 Erro de reproje\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92\n7.5.2 Itera\u00e7\u00f5es . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92\n7.5.3 Tempo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93\n7.6 Considera\u00e7\u00f5es finais . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94\n\n8 CONCLUS\u00c3O . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95\n8.1 Principais conclus\u00f5es . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95\n8.2 Principais contribui\u00e7\u00f5es . . . . . . . . . . . . . . . . . . . . . . . . . . 96\n8.3 Trabalhos futuros . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97\n\nREFER\u00caNCIAS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98\n\n\n\n14\n\n1 INTRODU\u00c7\u00c3O\n\nMesmo sendo um ambiente de dif\u00edcil acesso para o homem, o fundo do mar,\nprincipalmente em \u00e1guas profundas, vem sendo cada vez mais explorado devido \u00e0s riquezas\nque este espa\u00e7o oferece. Dentre as principais tarefas desenvolvidas nesse meio, podemos\ncitar a ind\u00fastria de \u00f3leo e g\u00e1s; atividades militares; instala\u00e7\u00e3o de cabos de energia e\ntelecomunica\u00e7\u00e3o; e pesquisa da flora e fauna marinha.\n\nAlgumas dessas tarefas requerem que sejam realizadas opera\u00e7\u00f5es de manuten\u00e7\u00e3o,\ninstala\u00e7\u00e3o e inspe\u00e7\u00e3o de equipamentos no leito marinho. Por se tratar de um ambiente\nhostil ao ser humano devido \u00e0s suas caracter\u00edsticas f\u00edsicas, estas tarefas, normalmente, s\u00e3o\nrealizadas por rob\u00f4s, denominados UUV (Uninhabited Undersea Vehicle). Os UUV podem\nser classificados em duas classes: os AUV (Autonomous Underwater Vehicle) e os ROV\n(Remotely Operated Vehicles).\n\nOs AUV s\u00e3o rob\u00f4s aut\u00f4nomos, ou seja, possuem sua pr\u00f3pria fonte de energia e\ntomam decis\u00f5es para realizar seus movimentos e definir sua trajet\u00f3ria sem utiliza\u00e7\u00e3o de\ncabos. Eles s\u00e3o \u00fateis em buscas de destro\u00e7os e levantamento de dados do terreno, tendo\nem vista que conseguem varrer uma grande \u00e1rea com autonomia. S\u00e3o rob\u00f4s leves, velozes\ne com menor liberdade de movimento. Um dos desafios dos AUV \u00e9 otimizar a trajet\u00f3ria\npercorrida para maximizar a efici\u00eancia energ\u00e9tica, uma vez que sua energia \u00e9 armazenada\nem baterias (WHITCOMB, 2000).\n\nDe outro modo, os ROV s\u00e3o ve\u00edculos operados remotamente a partir de um navio.\nA sua alimenta\u00e7\u00e3o e os dados s\u00e3o transportados atrav\u00e9s de um cabo, denominado umbilical.\nEstes rob\u00f4s t\u00eam grande liberdade de movimentos e muitos possuem bra\u00e7os e garras hidr\u00e1u-\nlicas que auxiliam as opera\u00e7\u00f5es. Os ROV s\u00e3o grandes e pesados, facilmente personaliz\u00e1veis\ne permitem a instala\u00e7\u00e3o de outros dispositivos (bra\u00e7os hidr\u00e1ulicos e ferramentas, por\nexemplo) e sensores (tais como: sonares, aceler\u00f4metros, term\u00f4metros e c\u00e2meras de v\u00eddeo)\nem seu chassi.\n\nOs UUV s\u00e3o sempre equipados com v\u00e1rios sensores para auxiliar sua navega\u00e7\u00e3o,\ncomo aceler\u00f4metros, girosc\u00f3pios, b\u00fassolas, alt\u00edmetros, etc. Dentre os sensores que obt\u00eam\ninforma\u00e7\u00f5es do ambiente marinho, podemos citar magnet\u00f4metros, sonares e c\u00e2meras.\nMagnet\u00f4metros s\u00e3o sensores sens\u00edveis a campos eletromagn\u00e9ticos e muito utilizados para\nlocalizar e seguir cabos no leito marinho. S\u00e3o sensores grandes, de alto custo e muito\nsens\u00edveis a ru\u00eddo (ORTIZ; SIM\u00d3; OLIVER, 2002).\n\nOs sonares s\u00e3o mais \u00fateis para varrer grandes \u00e1reas, por\u00e9m n\u00e3o s\u00e3o eficientes para\nmapear \u00e1reas pequenas, principalmente devido \u00e0 sua baixa taxa sinal/ru\u00eddo. Al\u00e9m disso,\ntamb\u00e9m s\u00e3o sensores grandes, pesados e de custo elevado.\n\n\n\nCap\u00edtulo 1. Introdu\u00e7\u00e3o 15\n\nOs sensores \u00f3pticos, tamb\u00e9m s\u00e3o utilizados, sendo de baixo custo e facilmente\ninstalados em um ROV ou AUV. Devido ao decaimento da luz na \u00e1gua, estes sensores s\u00e3o\nineficientes em grandes dist\u00e2ncias, por\u00e9m apresentam boa precis\u00e3o quando consideradas\nregi\u00f5es a poucos metros do rob\u00f4. A grande maioria dos ROV \u00e9 equipado com pelo menos\numa c\u00e2mera de v\u00eddeo que fornece imagens a um operador remoto (BONIN; BURGUERA;\nOLIVER, 2014).\n\nObservando as vantagens dos sensores \u00f3pticos (c\u00e2mera de v\u00eddeo), aplica\u00e7\u00f5es de\nvis\u00e3o computacional v\u00eam sendo cada mais exploradas (HORGAN; TOAL, 2009). Por\nexemplo, estabilizar o ROV a partir de imagens do solo marinho (GARCIA et al., 2001);\nseguir cabos e dutos (ZHANG et al., 2012); mensurar dist\u00e2ncias (SUN; YU; XU, 2013);\nrealizar mapeamento 3D do fundo do mar (DRAP et al., 2015); auxiliar o processo de\nmanuten\u00e7\u00e3o de equipamentos (CHEN et al., 2014); estimar o posicionamento e localiza\u00e7\u00e3o\ndo ROV para facilitar a navegabilidade (BURDINSKY; MYAGOTIN, 2015), entre outros.\n\nO processamento das imagens capturadas por sensores \u00f3pticos n\u00e3o \u00e9 trivial, pois\n\u00e9 preciso decodificar a informa\u00e7\u00e3o de interesse dentre um conjunto complexo de dados,\ngeralmente contendo grande quantidade de ru\u00eddo. Nesse contexto, a \u00e1rea do conhecimento\nrespons\u00e1vel por processar, analisar e compreender imagens \u00e9 a de vis\u00e3o computacional.\nDiversos conhecimentos de outras \u00e1reas como matem\u00e1tica, estat\u00edstica, f\u00edsica, intelig\u00eancia\nartificial e processamento de imagens, s\u00e3o englobados nessa \u00e1rea (DAVID; JEAN, 2002).\n\n1.1 MOTIVA\u00c7\u00c3O\nA instala\u00e7\u00e3o de dutos \u00e9 uma das recorrentes opera\u00e7\u00f5es que s\u00e3o realizadas no fundo\n\ndo mar pelas ind\u00fastrias de \u00f3leo e g\u00e1s. Esses dutos interligam dois pontos no fundo do\nmar (um po\u00e7o a um ponto de distribui\u00e7\u00e3o, por exemplo) ou um ponto no fundo do mar a\noutro localizado na superf\u00edcie (um po\u00e7o a uma plataforma, por exemplo) e servem para\ntransportar fluidos como \u00e1gua, gases e \u00f3leo. Detalhes da opera\u00e7\u00e3o s\u00e3o dados em (NAGLE\net al., 1993).\n\nEsses dutos s\u00e3o flex\u00edveis, possuem de 20 a 50 cent\u00edmetros de di\u00e2metro e podem\nalcan\u00e7ar quil\u00f4metros de comprimento. A instala\u00e7\u00e3o \u00e9 realizada atrav\u00e9s de navios especiali-\nzados denominados PLSV, que transportam e instalam os dutos interligando equipamentos\nsubmarinos. Esse tipo de instala\u00e7\u00e3o usa o aux\u00edlio de um ROV para realizar diversas tarefas,\ndentre estas a de prover imagens do ambiente aos engenheiros e operadores.\n\nO procedimento de instala\u00e7\u00e3o se torna muito delicado devido \u00e0s dimens\u00f5es e peso\ndo duto. Uma tens\u00e3o excessiva pode ser propagada ao longo do duto e atingir os conectores,\npodendo danificar os equipamentos. Para minimizar estes riscos, simula\u00e7\u00f5es f\u00edsicas s\u00e3o\nrealizadas previamente \u00e0 opera\u00e7\u00e3o para estimar configura\u00e7\u00f5es seguras de acoplamento\n(XAVIER, 2006).\n\n\n\nCap\u00edtulo 1. Introdu\u00e7\u00e3o 16\n\nEntretanto, verificar se o duto segue corretamente as configura\u00e7\u00f5es definidas pela\nsimula\u00e7\u00e3o f\u00edsica ainda \u00e9 um processo realizado atrav\u00e9s de compara\u00e7\u00e3o visual com as\nimagens capturadas do ROV. Essa compara\u00e7\u00e3o consome muito tempo e \u00e9 suscet\u00edvel a erros,\npois \u00e9 uma tarefa manual intensa e que n\u00e3o considera as distor\u00e7\u00f5es radial e de perspectiva\nproduzidas pela c\u00e2mera.\n\n1.2 OBJETIVO\nO objetivo principal \u00e9 prover uma compara\u00e7\u00e3o autom\u00e1tica e em tempo real que\n\navalia se o duto est\u00e1 geometricamente de acordo com as configura\u00e7\u00f5es preestabelecidas,\nesta disserta\u00e7\u00e3o de mestrado prop\u00f5e um m\u00e9todo para rastrear e reconstruir o Eixo Medial\ndo Duto (EMD) no espa\u00e7o 3D utilizando c\u00e2meras est\u00e9reo.\n\nPor se tratar de um corpo deform\u00e1vel ao longo do tempo \u00e9 necess\u00e1rio usar pelo\nmenos duas c\u00e2meras para se obter duas ou mais imagens em um mesmo instante de tempo.\nPara que a solu\u00e7\u00e3o proposta seja \u00fatil, foi estipulado que o resultado da reconstru\u00e7\u00e3o deve\napresentar acur\u00e1cia igual ou menor a 1 cent\u00e9simo do comprimento do duto, dados obtidos\nda experi\u00eancia dos engenheiros envolvidos na opera\u00e7\u00e3o. Al\u00e9m disso, o resultado deve\natender aos requisitos de tempo real, ou seja, os algoritmos devem fornecer o resultado a\numa taxa igual ou superior \u00e0 da captura das c\u00e2meras.\n\nComo o cen\u00e1rio de uso dos algoritmos (descrito no Cap\u00edtulo 2) \u00e9 bem definido, as\nt\u00e9cnicas foram concebidas explorando peculiaridades do problema, em busca de maximizar\na acur\u00e1cia e performance do resultado final.\n\nO algoritmo de rastreamento proposto visa determinar um conjunto de pixels\nordenados que consistem na imagem do EMD. Para atingir esse objetivo espec\u00edfico, \u00e9\nestabelecido um modelo de proje\u00e7\u00e3o do duto na imagem. Com base nas condi\u00e7\u00f5es de\nilumina\u00e7\u00e3o do ambiente e da marca\u00e7\u00e3o do duto, \u00e9 realizado um ajuste dessa regi\u00e3o sobre a\nimagem do duto.\n\nO processo como o duto \u00e9 instalado permite que o EMD possa ser estimado como\numa aproxima\u00e7\u00e3o de uma curva planar. Sendo assim, o algoritmo de reconstru\u00e7\u00e3o proposto\nadaptou o m\u00e9todo de Xiao e Li (XIAO; LI, 2005), que reconstr\u00f3i NURBS a partir de\nimagens est\u00e9reo. A adapta\u00e7\u00e3o consistiu em modificar a parametriza\u00e7\u00e3o dos pontos de\ncontrole para que a curva reconstru\u00edda seja planar.\n\n1.3 VIS\u00c3O GERAL DOS ALGORITMOS PROPOSTOS\nAl\u00e9m das imagens, os algoritmos recebem como dados de entrada: o raio do duto\n\ne as calibra\u00e7\u00f5es das c\u00e2meras (par\u00e2metros intr\u00ednsecos e pose relativa entre as c\u00e2meras).\nPara o correto funcionamento do algoritmo de rastreamento, \u00e9 necess\u00e1ria uma etapa de\n\n\n\nCap\u00edtulo 1. Introdu\u00e7\u00e3o 17\n\ninicializa\u00e7\u00e3o, essa etapa fornece um palpite para a posi\u00e7\u00e3o do duto na imagem. O palpite\ninicial pode ser obtido atrav\u00e9s da marca\u00e7\u00e3o de pontos na imagem pelo usu\u00e1rio ou utilizando\nt\u00e9cnicas autom\u00e1ticas para detec\u00e7\u00e3o de dutos, como em (PESSOA et al., 2015).\n\nA partir da etapa de inicializa\u00e7\u00e3o \u00e9 poss\u00edvel triangular um conjunto esparso de\npontos que representam o EMD no espa\u00e7o e assim obter uma estimativa inicial para a\nposi\u00e7\u00e3o do duto. Embora o conjunto de pontos esparso obtido pela inicializa\u00e7\u00e3o identifique\ncorretamente a posi\u00e7\u00e3o do duto na imagem, esses pontos n\u00e3o atendem aos requisitos de\nacur\u00e1cia estabelecidos para o problema.\n\nO algoritmo de rastreamento tem a fun\u00e7\u00e3o de: dada uma posi\u00e7\u00e3o inicial do duto\nlocalizar com precis\u00e3o a proje\u00e7\u00e3o do EMD na imagem. O duto \u00e9 rastreado em cada\nimagem do par est\u00e9reo e o resultado ser\u00e1 usado como entrada do algoritmo de reconstru\u00e7\u00e3o.\nPara reconstruir o duto utilizam-se as calibra\u00e7\u00f5es da c\u00e2mera e os pontos rastreados em\ncada imagem do par est\u00e9reo. Como resultado obt\u00e9m-se uma curva anal\u00edtica NURBS que\nrepresenta o EMD no espa\u00e7o e o plano desta curva. Esse resultado ser\u00e1 tamb\u00e9m usado\npara inicializar o algoritmo de rastreamento no quadro seguinte.\n\n1.3.1 Rastreamento\n\nO algoritmo de rastreamento tem por fun\u00e7\u00e3o, dado um palpite inicial, localizar com\nprecis\u00e3o menor que 1 pixel, um conjunto de pontos 2D que representa a posi\u00e7\u00e3o da EMD\nna imagem. Uma regi\u00e3o bidimensional que representa a proje\u00e7\u00e3o do duto parametrizada\nnas dire\u00e7\u00f5es longitudinais e transversais \u00e9 delimitada, utilizando o raio do duto e sua\nposi\u00e7\u00e3o em rela\u00e7\u00e3o \u00e0 c\u00e2mera.\n\nO rastreamento \u00e9 dividido em duas fases. Na primeira fase, a regi\u00e3o \u00e9 contra\u00edda ou\nexpandida na dire\u00e7\u00e3o longitudinal, utilizando o padr\u00e3o de pintura existente sobre o duto\ndescrito na Se\u00e7\u00e3o 2.2. Em seguida, com base nas caracter\u00edsticas de ilumina\u00e7\u00e3o da cena, o\nrastreamento ajusta a regi\u00e3o na dire\u00e7\u00e3o transversal. Como as transforma\u00e7\u00f5es aplicadas \u00e0\nregi\u00e3o s\u00e3o complexas e expressas de forma anal\u00edtica, a curva que descreve a proje\u00e7\u00e3o do\nEMD \u00e9 dada como um conjunto de pontos 2D.\n\n1.3.2 Reconstru\u00e7\u00e3o\n\nA reconstru\u00e7\u00e3o da curva \u00e9 realizada utilizando os pontos resultantes do rastreamento\nem cada imagem do par est\u00e9reo e os par\u00e2metros de calibra\u00e7\u00e3o das c\u00e2meras.\n\nXiao e Li (XIAO; LI, 2005) apresentaram um algoritmo de reconstru\u00e7\u00e3o de curvas\nNURBS no espa\u00e7o a partir de c\u00e2meras est\u00e9reo que se aplica diretamente ao problema\ndeste trabalho.\n\nEntretanto, o peso e a forma pela qual o duto \u00e9 suspenso permite que o EMD\nseja descrito aproximadamente como uma curva planar. Para incorporar esta restri\u00e7\u00e3o\n\n\n\nCap\u00edtulo 1. Introdu\u00e7\u00e3o 18\n\nao algoritmo de Xiao e Li foi realizada uma adapta\u00e7\u00e3o na parametriza\u00e7\u00e3o dos pontos de\ncontrole na fun\u00e7\u00e3o que computa o erro de reproje\u00e7\u00e3o.\n\n1.4 PRINCIPAIS DESAFIOS\nComo discutido na Se\u00e7\u00e3o 2.6, o background das imagens possuem pixels com menor\n\nintensidade do que os pixels pertencentes ao duto. Essa propriedade da imagem sugere que\no problema possa ser resolvido atrav\u00e9s de t\u00e9cnicas de limiariza\u00e7\u00e3o. Por\u00e9m essas t\u00e9cnicas\nn\u00e3o apresentam resultados satisfat\u00f3rios devido \u00e0s caracter\u00edsticas das imagens capturadas\nem ambiente aqu\u00e1tico: neve marinha, ilumina\u00e7\u00e3o n\u00e3o uniforme e perda de contraste (mais\ndetalhes sobre estes efeitos s\u00e3o dados na Se\u00e7\u00e3o 2.6).\n\nDiante destas dificuldades, o algoritmo de rastreamento foi proposto para ser\nrobusto ao tipo de ru\u00eddo mencionados acima. Baseando-se na proje\u00e7\u00e3o do duto na imagem\nestimada a partir do quadro anterior, o EMD \u00e9 determinado de forma mais acurada. Al\u00e9m\ndisso, o m\u00e9todo proposto utiliza toda a informa\u00e7\u00e3o presente na imagem, dado que n\u00e3o\npossui uma etapa de limiariza\u00e7\u00e3o que elimina os valores de intensidade dos pixels da\nimagem.\n\n1.5 CONTRIBUI\u00c7\u00d5ES\nA primeira contribui\u00e7\u00e3o \u00e9 a t\u00e9cnica de rastreamento voltada para dutos, que\n\nconsidera a forma da proje\u00e7\u00e3o de um duto na imagem. Embora ela possa ser utilizada\napenas em imagens de background mais escuro que a regi\u00e3o do que contem o duto, o\nm\u00e9todo pode ser adaptado para imagens gen\u00e9ricas a partir da ideia de estratifica\u00e7\u00e3o do\nrastreamento em eixos longitudinais e transversais. Al\u00e9m disso, a adapta\u00e7\u00e3o empregada\nno algoritmo de reconstru\u00e7\u00e3o de Xiao e Li pode ser utilizada em outros cen\u00e1rios de\nreconstru\u00e7\u00e3o de curvas de planares.\n\nPor fim, esta disserta\u00e7\u00e3o de mestrado originou a publica\u00e7\u00e3o de um artigo completo\nintitulado \"Stereo Tracking and 3D Reconstruction of Underwater Pipes\", a aparecer nos\nanais da confer\u00eancia British Machine Vision Conference (BMVC), setembro de 2015.\n\n1.6 ESTRUTURA DO DOCUMENTO\nAs demais partes deste documento est\u00e3o organizadas da seguinte forma: o Cap\u00edtulo\n\n2 apresenta o cen\u00e1rio em que o problema est\u00e1 inserido abordando detalhes como c\u00e2meras,\nilumina\u00e7\u00e3o, etc. O Cap\u00edtulo 3 descreve uma revis\u00e3o geral da literatura apresentando algumas\npropostas similares a esse trabalho. No Cap\u00edtulo 4 s\u00e3o apresentados os principais conceitos\nmatem\u00e1ticos para contextualizar esta pesquisa. O algoritmo respons\u00e1vel pelo rastreamento\n\n\n\nCap\u00edtulo 1. Introdu\u00e7\u00e3o 19\n\ndo duto \u00e9 detalhado no Cap\u00edtulo 5, e no Cap\u00edtulo 6 o algoritmo de reconstru\u00e7\u00e3o do eixo\nmedial do duto \u00e9 descrito. No Cap\u00edtulo 7 s\u00e3o apresentados os experimentos e resultados\nobtidos durante esta disserta\u00e7\u00e3o de mestrado. Finalmente, no Cap\u00edtulo 8 s\u00e3o apresentadas\nas conclus\u00f5es e trabalhos futuros relativos \u00e0 pesquisa realizada.\n\n\n\n20\n\n2 CEN\u00c1RIO\n\nEste cap\u00edtulo descreve os aspectos do cen\u00e1rio real do problema, caracter\u00edsticas como\nposicionamento, ilumina\u00e7\u00e3o e c\u00e2meras ser\u00e3o levados em considera\u00e7\u00e3o para conceber os\nalgoritmos que ser\u00e3o descritos nesta disserta\u00e7\u00e3o e especificar o cen\u00e1rio dos experimentos.\n\n2.1 POSICIONAMENTO\nDurante o procedimento de an\u00e1lise da geometria do duto, o posicionamento do\n\nROV e do duto em rela\u00e7\u00e3o ao solo marinho \u00e9 menor que 30 metros, e a profundidade est\u00e1\ncompreendida entre 1 e 4 mil metros. O ROV est\u00e1 equipado com duas c\u00e2meras muito bem\nfixadas \u00e0 sua estrutura e \u00e9 controlado a partir do navio de opera\u00e7\u00e3o, onde as imagens s\u00e3o\nrecebidas e processadas pela ferramenta em tempo real.\n\nPara uma completa visualiza\u00e7\u00e3o da \u00e1rea de interesse do duto, o ROV se posiciona\na uma dist\u00e2ncia entre 5 e 15 metros do duto e realiza movimentos para observar o\nequipamento de diversos pontos de vista. Esses movimentos s\u00e3o sempre muito lentos e\nsuaves devido \u00e0 resist\u00eancia mec\u00e2nica da \u00e1gua.\n\n2.2 DUTO\nOs dutos s\u00e3o constitu\u00eddos de material flex\u00edvel, e portanto assumem diversas formas.\n\nSeu di\u00e2metro \u00e9 aproximadamente constante ao longo de sua extens\u00e3o podem variar de 20\na 50 cm de di\u00e2metro. O comprimento pode atingir alguns quil\u00f4metros, por\u00e9m apenas os\ntrechos entre 10 e 30 metros na extremidade do duto ser\u00e3o analisados, considerando que\nesta \u00e9 a regi\u00e3o que gera maior esfor\u00e7o, e portanto, denominada de regi\u00e3o de interesse.\n\nNa regi\u00e3o de interesse do duto, existe uma pintura regular e intercalada de regi\u00f5es\nbrancas e pretas ao longo de sua extens\u00e3o, como ilustrado na Figura 1. As regi\u00f5es brancas\nt\u00eam comprimento aproximadamente igual ao di\u00e2metro d do duto, enquanto as regi\u00f5es pretas\npossuem comprimento aproximadamente igual a d/2. Esse padr\u00e3o de pintura prov\u00ea uma\ntextura de desambigua\u00e7\u00e3o longitudinal, facilitando a visualiza\u00e7\u00e3o do duto pelo operador e\nservindo tamb\u00e9m para detectar o duto na imagem pela ferramenta de monitoramento. Este\npadr\u00e3o de pintura ser\u00e1 utilizado pelo algoritmo de rastreamento proposto nesta disserta\u00e7\u00e3o\npara determinar a por\u00e7\u00e3o longitudinal do duto que deve ser seguida.\n\nEmbora o duto seja um corpo tridimensional (com altura, comprimento e largura),\no escopo deste trabalho foca na reconstru\u00e7\u00e3o do eixo medial do mesmo (EMD), que\nconsiste em uma curva unidimensional. O EMD pode ser representado atrav\u00e9s de uma\n\n\n\nCap\u00edtulo 2. Cen\u00e1rio 21\n\nFigura 1 \u2013 Padr\u00e3o de pintura em regi\u00f5es brancas e pretas usada para marcar o duto.\n\n. . .d\n\n~d/2 ~d\n\nFonte: O autor\n\ncurva matem\u00e1tica no espa\u00e7o tridimensional e a partir das equa\u00e7\u00f5es da curva s\u00e3o obtidas\npropriedades do duto, como a posi\u00e7\u00e3o e curvatura.\n\nDurante a opera\u00e7\u00e3o grande parte da massa do duto \u00e9 suspensa por suas extremida-\ndes, e com a a\u00e7\u00e3o da gravidade, o EMD se torna uma curva praticamente planar. Embora\no duto esteja sujeito a movimentos, estes por sua vez n\u00e3o alteram significativamente esta\ncaracter\u00edstica. Sendo assim, o EMD \u00e9 considerado para fins pr\u00e1ticos uma curva plana\ninserida em um espa\u00e7o 3D.\n\nEmbora seja flex\u00edvel, o duto apresenta uma certa rigidez que o impede de se\ncomportar como uma curva caten\u00e1ria (LOCKWOOD, 1971) (curva que, por exemplo,\ndescreve cordas ideais suspensas por suas extremidades). Uma abordagem para determinar a\ncurva do EMD \u00e9 utilizar simula\u00e7\u00f5es f\u00edsicas e sistemas de elementos finitos (FRITZKOWSKI;\nKAMINSKI, 2010), informando as propriedades do material que comp\u00f5e o duto. Por\u00e9m,\nesta abordagem requer uma grande quantidade de par\u00e2metros do duto e do ambiente.\nPara evitar essa complexidade, o duto ser\u00e1 modelado atrav\u00e9s de curvas matem\u00e1ticas como\nsplines, permitindo assim represent\u00e1-lo de diversas formas.\n\n2.3 SISTEMA DE C\u00c2MERAS\nDo ponto de vista te\u00f3rico, apenas uma c\u00e2mera seria necess\u00e1ria para reconstruir o\n\nduto. Considerado que o raio do duto \u00e9 conhecido, a dist\u00e2ncia de cada ponto do EMD\npara a c\u00e2mera poderia ser determinada pela espessura da proje\u00e7\u00e3o do duto na imagem.\nEntretanto, do ponto de vista pr\u00e1tico, esse m\u00e9todo seria muito impreciso uma vez que o raio\ndo duto \u00e9 muito menor que a dist\u00e2ncia entre a c\u00e2mera e o objeto. Essa caracter\u00edstica impede\nque sejam estabelecidas restri\u00e7\u00f5es suficientes para extrair informa\u00e7\u00e3o tridimensional. Um\nexemplo disto \u00e9 o fato de que grandes movimentos de aproxima\u00e7\u00e3o do duto para a c\u00e2mera\nresulta em altera\u00e7\u00f5es muito pequenas na imagem. Dessa maneira, para obter um resultado\nv\u00e1lido devem ser utilizadas duas ou mais c\u00e2meras calibradas para triangular a posi\u00e7\u00e3o do\nEMD no espa\u00e7o.\n\nO sistema de c\u00e2meras utilizado no escopo desta pesquisa composto por duas c\u00e2meras\nsubmarinas de baixa ilumina\u00e7\u00e3o de mesma marca e modelo, descritas na Se\u00e7\u00e3o 2.4. Estas\n\n\n\nCap\u00edtulo 2. Cen\u00e1rio 22\n\nc\u00e2meras est\u00e3o bem fixadas \u00e0 estrutura do ROV para impedir movimento relativo entre as\nmesmas. Ambas as c\u00e2meras est\u00e3o posicionadas com eixos \u00f3ticos paralelos e com dist\u00e2ncia\n(baseline) horizontal igual a 80 cm. Esta medida foi adotada para que seja poss\u00edvel obter\numa triangular pontos distantes mais de 5 metros da c\u00e2mera com acur\u00e1cia (detalhes sobre\na influ\u00eancia da dist\u00e2ncia na precis\u00e3o da reconstru\u00e7\u00e3o s\u00e3o dados na Se\u00e7\u00e3o 6.7).\n\nO par est\u00e9reo \u00e9 previamente calibrado antes de cada opera\u00e7\u00e3o para obter os\npar\u00e2metros intr\u00ednsecos de cada c\u00e2mera, assim como o posicionamento relativo entre as\nduas c\u00e2meras (pose). O procedimento de calibra\u00e7\u00e3o considera a varia\u00e7\u00e3o do \u00edndice de\nrefra\u00e7\u00e3o do meio aqu\u00e1tico e a\u00e9reo.\n\n2.4 C\u00c2MERAS\nComo o ambiente onde \u00e9 realizado a opera\u00e7\u00e3o est\u00e1 a mais de mil metros de\n\nprofundidade, \u00e9 preciso utilizar c\u00e2meras submarinas de baixa ilumina\u00e7\u00e3o, que s\u00e3o espec\u00edficas\npara este fim. Esse tipo de c\u00e2mera possui duas caracter\u00edsticas principais para lidar com\nesse tipo de ambiente. A primeira \u00e9 sua estrutura refor\u00e7ada que deve suportar press\u00f5es de\ngrandes profundidades.\n\nA segunda caracter\u00edstica \u00e9 sua sensibilidade \u00e0 luz. Como a luz natural n\u00e3o chega\na essas profundidades, a \u00fanica fonte de luz existente no ambiente s\u00e3o os iluminadores\ndo ROV. Por\u00e9m, como a atenua\u00e7\u00e3o da luz na \u00e1gua \u00e9 elevada, o ambiente ainda assim\n\u00e9 escasso em ilumina\u00e7\u00e3o. Sendo assim, para que seja poss\u00edvel visualizar em dist\u00e2ncias\ncompreendidas entre 5 e 20 metros, \u00e9 preciso utilizar c\u00e2meras de baixa ilumina\u00e7\u00e3o que\nt\u00eam sensibilidade de 10?2 a 10?5 LUX.\n\nDevido \u00e0 dificuldade em avistar em grandes dist\u00e2ncias, c\u00e2meras submarinas de\nbaixa ilumina\u00e7\u00e3o costumam ser grande angulares, com FOV (field of view) maior que 80?.\nIsto permite a visualiza\u00e7\u00e3o da maior parte da cena, mesmo que a c\u00e2mera esteja localizada\nperto dos objetos. Lentes grandes angulares geralmente possuem distor\u00e7\u00e3o radial mais\nacentuada, deformando principalmente as bordas da imagem (SZELISKI, 2010). Para\ntransmitir a imagem at\u00e9 o barco, utiliza-se o formato anal\u00f3gico \u2013 NTSC ou PAL. Outra\ncaracter\u00edstica deste tipo de c\u00e2mera \u00e9 que a imagem produzida \u00e9 monocrom\u00e1tica.\n\nAs informa\u00e7\u00f5es referentes a essa categoria de c\u00e2meras foram obtidas atrav\u00e9s de\numa pesquisa entre os modelos das marcas: Kongsberg, Bowtech e Imenco. O modelo de\nc\u00e2mera utilizadas nos experimentos desse trabalho \u00e9 a Kongsberg OE15-101c, ilustrada na\nFigura 2, e possui 84? de FOV diagonal quando submersa e sensibilidade de 1.3 \u00d7 10?3\n\nLUX.\n\n\n\nCap\u00edtulo 2. Cen\u00e1rio 23\n\nFigura 2 \u2013 C\u00e2mera submarina de baixa ilumina\u00e7\u00e3o utilizada em opera\u00e7\u00f5es reais e nos\nexperimentos desta disserta\u00e7\u00e3o.\n\nFonte: Kongsberg Maritme\n\n2.5 ILUMINA\u00c7\u00c3O\nImagens obtidas em meio aqu\u00e1tico possuem aspectos diferentes daquelas capturadas\n\nem meio a\u00e9reo. A luz sofre forte atenua\u00e7\u00e3o na \u00e1gua, impedindo assim a visualiza\u00e7\u00e3o\nde objetos mais distantes. Al\u00e9m disso, o espalhamento que a luz sofre na \u00e1gua cria\nimagens emba\u00e7adas e com pouco contraste (ANCUTI et al., 2012). Al\u00e9m da intensidade\ne contraste, as cores tamb\u00e9m sofrem altera\u00e7\u00f5es, pois as ondas com menores frequ\u00eancias\n(como o vermelho) sofrem maior atenua\u00e7\u00e3o tornando assim as imagens mais azuladas ou\nesverdeadas (IQBAL et al., 2007). Outro aspecto dessas imagens \u00e9 o ru\u00eddo que surge a partir\nde part\u00edculas em suspens\u00e3o na \u00e1gua (efeito conhecido como neve marinha) (HORGAN;\nTOAL, 2006).\n\nEm profundidades superiores a 30 metros n\u00e3o h\u00e1 luz natural e \u00e9 necess\u00e1rio a\nutiliza\u00e7\u00e3o de iluminadores como fontes de luz, geralmente fixados no UUV, pr\u00f3ximos \u00e0s\nc\u00e2meras. Esse tipo de ilumina\u00e7\u00e3o provoca um aumento da visibilidade em rela\u00e7\u00e3o a um\ncen\u00e1rio iluminado com luz natural abundante, pois os raios de luz refletidos pelo objeto\nvisualizado n\u00e3o se somam \u00e0 luz do ambiente. Em contrapartida, os iluminadores tendem a\ncausar uma ilumina\u00e7\u00e3o n\u00e3o uniforme. Al\u00e9m disso, o posicionamento entre iluminadores e\nc\u00e2meras favorecem a reflex\u00e3o da luz na neve marinha, criando v\u00e1rios pontos de m\u00e1ximo\nna imagem.\n\n2.6 IMAGENS\nUm exemplo de imagem obtida pelas c\u00e2meras est\u00e1 ilustrado na Figura 3. S\u00e3o quadros\n\nmonocrom\u00e1ticos que, ap\u00f3s serem digitalizados, possuem resolu\u00e7\u00e3o igual a 640 \u00d7 480 pixels\ne aspecto 4 : 3. Pode-se verificar na imagem borrada com pontos de m\u00e1ximo oriundos da\nreflex\u00e3o da luz na neve marinha.\n\n\n\nCap\u00edtulo 2. Cen\u00e1rio 24\n\nFigura 3 \u2013 Imagem de um duto obtida no cen\u00e1rio real a 1300 metros de profundidade.\n\nFonte: Petrobras\n\nDevido \u00e0s condi\u00e7\u00f5es de ilumina\u00e7\u00e3o, a imagem possui um background mais escuro que\nos objetos da cena que difundem maior quantidade de luz. Desta forma pixels pertencentes\nao duto possuem intensidade maior do que a sua vizinhan\u00e7a. Essa caracter\u00edstica da imagem\nser\u00e1 utilizada na fun\u00e7\u00e3o de custo do algoritmo de rastreamento.\n\n2.7 CONSIDERA\u00c7\u00d5ES FINAIS\nO cen\u00e1rio da instala\u00e7\u00e3o de dutos possui diversas caracter\u00edsticas espec\u00edficas que\n\ndevem ser levadas em considera\u00e7\u00e3o no momento de especificar os algoritmos mais adequados\npara que os objetivos sejam cumpridos. E se bem exploradas, estas caracter\u00edsticas podem\naprimorar o resultado da reconstru\u00e7\u00e3o. Al\u00e9m disso, a defini\u00e7\u00e3o exata do cen\u00e1rio permite\navaliar a relev\u00e2ncia de trabalhos relacionados, apresentados no pr\u00f3ximo cap\u00edtulo.\n\n\n\n25\n\n3 TRABALHOS RELACIONADOS\n\nEste cap\u00edtulo apresenta o levantamento de trabalhos correlatos no contexto desta\ndisserta\u00e7\u00e3o de mestrado. Dentre os trabalhos relacionados com a proposta de rastreamento,\ndestacam-se: o mapeamento 3D da superf\u00edcie interna de dutos, apresentado na Se\u00e7\u00e3o 3.1;\ne o rastreamento e detec\u00e7\u00e3o de dutos, na Se\u00e7\u00e3o 3.2. O primeiro reconstr\u00f3i a superf\u00edcie\ninterna do duto atrav\u00e9s de pequenos rob\u00f4s e o segundo utiliza a imagem duto para localizar\ne orientar os UUV. Mas nenhum deles possui o foco no rastreamento do eixo medial do\nduto.\n\nUm dos temas abordados nesta disserta\u00e7\u00e3o, que se refere a reconstru\u00e7\u00e3o da curva,\n\u00e9 amplamente estudado na literatura de vis\u00e3o computacional, como descrito na Se\u00e7\u00e3o 3.3.\nNesta se\u00e7\u00e3o buscou-se detalhar desde trabalhos focados no estabelecimento de correspon-\nd\u00eancias de curvas utilizando primitivas como c\u00f4nicas at\u00e9 reconstru\u00e7\u00e3o utilizando curvas\ndo tipo splines.\n\n3.1 MAPEAMENTO INTERNO DE DUTOS\nNo procedimento de inspe\u00e7\u00e3o da superf\u00edcie interna de dutos s\u00e3o utilizados pequenos\n\nrob\u00f4s equipados com sensores e que se locomovem pelo interior do duto (ROH et al.,\n2001). Para reconstruir a geometria interna do duto s\u00e3o utilizadas abordagens monoculares\n(HANSEN et al., 2013) e est\u00e9reo (HANSEN et al., 2011). Nestas abordagens, ap\u00f3s extrair\ncorrespond\u00eancia de pontos caracter\u00edsticos entre as imagens, empregam-se t\u00e9cnicas SfM\n(Structure from Motion) para obter uma nuvem de pontos 3D. Um refinamento n\u00e3o linear\nminimiza o erro de reproje\u00e7\u00e3o global (bundle adjustment) a fim de obter um resultado\nmais acurado.\n\nO trabalho de inspera\u00e7\u00e3o geralmente consiste em averiguar a integridade da su-\nperf\u00edcie interna do duto. Arranh\u00f5es, rachaduras, oxida\u00e7\u00e3o e encrusta\u00e7\u00e3o s\u00e3o exemplos de\nfen\u00f4menos que devem ser detectados por estes algoritmos. Por isso m\u00e9todos para esse fim\nrequisitam precis\u00e3o menor que 1 mil\u00edmetro, como alcan\u00e7ado em (HANSEN et al., 2011).\nAl\u00e9m disso, a nuvem de pontos reconstru\u00edda deve ser densa para que se possa extrair toda\na geometria da superf\u00edcie interna do duto.\n\nComo o interior do duto comp\u00f5e uma cena r\u00edgida, \u00e9 poss\u00edvel realizar uma mini-\nmiza\u00e7\u00e3o global do erro de reproje\u00e7\u00e3o. Cada ponto \u00e9 amostrado em diversas imagens e\numa otimiza\u00e7\u00e3o dos pontos e os par\u00e2metros de c\u00e2mera permite determinar com precis\u00e3o o\ncaminho realizado pelo rob\u00f4 (odometria) e pontos 3D. Por\u00e9m esta abordagem impede que\no resultado seja fornecido em tempo real porque apenas ao final da an\u00e1lise de todo v\u00eddeo\n\n\n\nCap\u00edtulo 3. Trabalhos relacionados 26\n\no resultado ser\u00e1 obtido.\n\n3.2 RASTREAMENTO E DETEC\u00c7\u00c3O DE DUTOS E CABOS\nA grande maioria dos trabalhos presentes na literatura sobre rastreamento e\n\ndetec\u00e7\u00e3o de dutos e cabos em ambientes submarinos lida com imagens semelhantes \u00e0quelas\napresentadas na Figura 4. Estas imagens mostram os dutos com formato praticamente reto\nsobre o ch\u00e3o marinho, e geralmente cruzam a imagem da parte inferior at\u00e9 a parte superior.\nSendo assim, estes trabalhos utilizam metodologias semelhantes para localizar e rastrear o\nduto. Nesse procedimento, primeiramente, realiza-se um processamento da imagem com a\nfinalidade de localizar as arestas e detectar pares de retas quase paralelas que representam\nas bordas do duto na imagem. A partir da equa\u00e7\u00e3o das retas pode-se estimar a posi\u00e7\u00e3o da\nc\u00e2mera em rela\u00e7\u00e3o ao duto. A seguir uma breve descri\u00e7\u00e3o dos principais trabalhos neste\nescopo.\n\nFigura 4 \u2013 Exemplos de imagens utilizadas por trabalhos de rastreamento e detec\u00e7\u00e3o de\ndutos em ambiente submarino. Nestas imagens os dutos repousam sobre o\nch\u00e3o marinho e podem ser localizados atrav\u00e9s da detec\u00e7\u00e3o das suas bordas que\ndescrevem linhas retas na imagem.\n\n(a)\n\nFonte: (FORESTI; GENTILI, 2000)\n\n(b)\n\nFonte: (ORTIZ; OLIVER; FRAU,\n1997)\n\n(c)\n\nFonte: (KIA; ARSHAD, 2006)\n\nEm alguns trabalhos s\u00e3o detectadas as arestas da imagem utilizando o gradi-\nente(NGUYEN; KAOMEA; JR, 1988; ASIF; ARSHAD, 2006), operador LoG (Laplacian\nof Gaussian)(MATSUMOTO; ITO, 1995; BALASURIYA et al., 1997; BALASURIYA;\n\n\n\nCap\u00edtulo 3. Trabalhos relacionados 27\n\nURA, 1999) e filtro de Sobel (NARIMANI; NAZEM; LOUEIPOUR, 2009; ZHANG et al.,\n2012). No passo seguinte, aplica-se a transformada de Hough para detectar as bordas do\nduto. Em (ZINGARETTI et al., 1996; ZINGARETTI; ZANOLI, 1998) s\u00e3o detectadas\narestas na dire\u00e7\u00e3o vertical e uma abordagem de subdivis\u00e3o da imagem \u00e9 adotada para\nlocalizar apenas as bordas do duto. Enquanto em (GRAU; CLIMENT; ARANDA, 1998)\nutilizaram-se descritores de textura para detec\u00e7\u00e3o das bordas.\n\nNa abordagem proposta por Ortiz (ORTIZ; OLIVER; FRAU, 1997; ORTIZ; SIM\u00d3;\nOLIVER, 2002; ANTICH; ORTIZ, 2003) realiza-se uma transformada na imagem para\no espa\u00e7o de {escala de cinza \u00d7 m\u00f3dulo do gradiente}. A imagem transformada \u00e9 ent\u00e3o\nsegmentada utilizando clusteriza\u00e7\u00e3o e a partir da fronteira das regi\u00f5es segmentadas s\u00e3o\ndeterminados os contornos da imagem. Em uma outra etapa deste processo, realiza-se\numa sele\u00e7\u00e3o de contornos na forma de linhas retas para determinar as bordas do duto na\nimagem e estimar sua posi\u00e7\u00e3o em rela\u00e7\u00e3o \u00e0 c\u00e2mera.\n\nEm (KIA; ARSHAD, 2006) utiliza-se uma limiariza\u00e7\u00e3o a partir de dois thresholds\nque busca maximizar a \u00e1rea de componentes conexos. A imagem limiarizada ser\u00e1 usada\ncomo entrada para o sistema de l\u00f3gica fuzzy que determina um conjunto de pontos\ncaracter\u00edsticos do duto. A partir da an\u00e1lise desses pontos obt\u00e9m-se a dire\u00e7\u00e3o do duto na\nimagem.\n\nEm (FORESTI; GENTILI, 2000) \u00e9 proposto um sistema que utiliza redes neurais\npara guiar AUV atrav\u00e9s das arestas do duto e inferir que por\u00e7\u00e3o do cabo est\u00e1 sendo\nobservada a partir de objetos caracter\u00edsticos (\u00e2nodos). Utilizando dois perceptrons multi-\ncamada (MLP) (RIPLEY, 1996), um para detec\u00e7\u00e3o de arestas e outro para detec\u00e7\u00e3o de\n\u00e2nodos, os pixels da imagem s\u00e3o classificados como background ou n\u00e3o. Atrav\u00e9s de uma\ncontagem de pixels executa-se o reconhecimento de linhas e \u00e2nodos na imagem. A posi\u00e7\u00e3o\ndo cabo em rela\u00e7\u00e3o \u00e0 c\u00e2mera pode ser inferida atrav\u00e9s de um par de retas convergentes\nque representam as arestas do cabo.\n\nPara rastrear o duto ap\u00f3s realizada a detec\u00e7\u00e3o do mesmo, muitos trabalhos utilizam\nROI (region of interest), tais como: (ORTIZ; SIM\u00d3; OLIVER, 2002; ORTIZ; OLIVER;\nFRAU, 1997; BALASURIYA; URA, 1999), para minimizar o espa\u00e7o de busca do duto no\nquadro seguinte do v\u00eddeo. Outra abordagem \u00e9 a utiliza\u00e7\u00e3o do filtro de Kalman (ORTIZ;\nSIM\u00d3; OLIVER, 2002; ANTICH; ORTIZ, 2003; ASIF; ARSHAD, 2006; ZINGARETTI;\nZANOLI, 1998; ZHANG et al., 2012) para prever a ROI no pr\u00f3ximo quadro ou realizar\numa inicializa\u00e7\u00e3o do algoritmo de rastreamento.\n\nUma abordagem para detec\u00e7\u00e3o de dutos em f\u00e1bricas \u00e9 descrita em (THIRION et\nal., 2000), e \u00e9 realizada a partir de um conjunto de imagens de treinamento. Atrav\u00e9s das\ncaracter\u00edsticas aprendidas e algumas filtragens, \u00e9 constru\u00eddo um mapeamento que relaciona\ncada pixel com a sua probabilidade de pertencer ao duto. Um algoritmo de graph cut \u00e9\nutilizado para segmentar apenas os pixels pertencentes ao duto.\n\n\n\nCap\u00edtulo 3. Trabalhos relacionados 28\n\nEmbora bem-sucedidos, os trabalhos apresentados n\u00e3o se aplicam ao cen\u00e1rio alvo\ndessa disserta\u00e7\u00e3o. Primeiramente, porque os dutos e cabos detectados por esses algoritmos\ns\u00e3o encontrados apenas atrav\u00e9s da segmenta\u00e7\u00e3o de linhas retas, pois possuem um raio de\ncurvatura muito grande. Em contrapartida, como ilustrado na Figura 3, as arestas dos\ndutos tratados nesta disserta\u00e7\u00e3o n\u00e3o podem ser aproximadas para retas. Al\u00e9m disso, os\nalgoritmos apresentados se preocupam em localizar a c\u00e2mera em rela\u00e7\u00e3o ao duto para\nauxiliar a navega\u00e7\u00e3o de UUV. Para isso o eixo medial do duto \u00e9 aproximado para uma reta.\nEsta disserta\u00e7\u00e3o, por sua vez, tem um prop\u00f3sito diferente, pois encarrega-se de recuperar\na geometria do eixo medial desconsiderando a posi\u00e7\u00e3o da c\u00e2mera.\n\n3.3 RECONSTRU\u00c7\u00c3O DE CURVAS\nA grande maioria dos algoritmos de reconstru\u00e7\u00e3o utiliza correspond\u00eancias de pontos\n\ncaracter\u00edsticos entre imagens para obter uma estrutura 3D, por\u00e9m outras primitivas podem\nser utilizadas como retas e curvas. A dificuldade na utiliza\u00e7\u00e3o destas outras primitivas\n\u00e9 que o estabelecimento de correspond\u00eancia n\u00e3o \u00e9 direto como em pontos devido ao\nproblema de abertura (aperture problem). A ideia \u00e9 que um ponto em uma curva n\u00e3o\napresenta caracter\u00edsticas suficientes para poder determinar-se um ponto correspondente\nem outra curva. Um exemplo deste problema \u00e9 a impossibilidade de distinguir pontos de\numa circunfer\u00eancia entre si, se n\u00e3o forem observados outros fatores como sua vizinhan\u00e7a.\n\nO estabelecimento de correspond\u00eancia e reconstru\u00e7\u00e3o de c\u00f4nicas como primitivas\nfoi investigado em (MA, 1993; KAMINSKI; SHASHUA, 2000; QUAN, 1996). Por\u00e9m o\npotencial de representatividade dos distintos tipos de curvas da natureza atrav\u00e9s das\nc\u00f4nicas \u00e9 relativamente pequeno. Outra primitiva utilizada s\u00e3o curvas alg\u00e9bricas (LI; MA,\n1996; AN; LEE, 1996; KAMINSKI; SHASHUA, 2000). Para reconstruir curvas alg\u00e9bricas\nn\u00e3o planares, (KAMINSKI et al., 2001) utilizou as equa\u00e7\u00f5es de Kruppa. Estas abordagens,\nembora sejam reconstru\u00e7\u00f5es anal\u00edticas, mostram-se muito complexas \u00e0 medida que o grau\nda curva aumenta. Al\u00e9m disso, n\u00e3o \u00e9 obtida uma reconstru\u00e7\u00e3o \u00f3tima segundo o erro de\nreproje\u00e7\u00e3o.\n\nMuitos trabalhos usam a seguinte abordagem: atrav\u00e9s da utiliza\u00e7\u00e3o de detectores\nde arestas e contornos, s\u00e3o obtidas amostras de pontos da curva na imagem, na qual\ncada ponto \u00e9 a proje\u00e7\u00e3o de pontos da curva no espa\u00e7o. Por\u00e9m em outra imagem da\ncurva dificilmente ser\u00e3o amostrados os mesmos pontos 2D correspondentes com os da\nprimeira imagem. Sendo assim n\u00e3o \u00e9 poss\u00edvel estabelecer correspond\u00eancias diretas entre\nos pontos detectados nas imagens. Neste caso, deve ser realizada uma interpola\u00e7\u00e3o de\npontos, tentando mitigar o problema da abertura para assim determinar um conjunto de\ncorrespond\u00eancias de pontos. Atrav\u00e9s da triangula\u00e7\u00e3o das correspond\u00eancias estabelecidas \u00e9\ngerada uma nuvem de pontos que forma a curva no espa\u00e7o.\n\n\n\nCap\u00edtulo 3. Trabalhos relacionados 29\n\nPara c\u00e2meras calibradas, utiliza-se a intersec\u00e7\u00e3o de linhas epipolares com a curva\npara interpolar correspond\u00eancias. Por\u00e9m n\u00e3o \u00e9 uma tarefa f\u00e1cil considerando que uma\nlinha epipolar pode intersectar v\u00e1rias curvas. Sendo assim, outros aspectos das curvas e\nda imagem precisam ser observados para estabelecer as correspond\u00eancias, como feito em\n(DERICHE; FAUGERAS, 1990; NASRABADI; LIU; CHIANG, 1988; BRINT; BRADY,\n1989; NASRABADI; LIU; CHIANG, 1988; PAJARES; CRUZ; L\u00d3PEZ-OROZCO, 2000;\nLI; ZUCKER, 2006; PORRILL; POLLARD, 1991; KEDEM; YARMOVSKI, 1996). Dentre\nos aspectos observados, pode-se citar curvatura e informa\u00e7\u00e3o de contexto na vizinhan\u00e7a\nda curva.\n\nUma dificuldade ao se utilizar a geometria epipolar para este fim \u00e9 o caso em que a\nlinha epipolar \u00e9 tangente \u00e0 curva. Nessa situa\u00e7\u00e3o \u00e9 obtida uma singularidade, desde que h\u00e1\nv\u00e1rias correspond\u00eancias de pontos poss\u00edveis. Com a finalidade de estabelecer uma medida\nde similaridade entre pontos da curva e eliminar a singularidade, (DERICHE; FAUGERAS,\n1990; LI; ZUCKER, 2006) utilizou valores de curvatura e (KEDEM; YARMOVSKI, 1996)\nusou a dist\u00e2ncia de Hausdorff.\n\nNo caso de c\u00e2meras n\u00e3o calibradas, o problema \u00e9 mais desafiador pois as restri\u00e7\u00f5es\nepipolares precisam ser calculadas. Para isso, (WU; YU, 2005; SHAN; ZHANG, 2002;\nJIAN-DONG et al., 2009) utilizaram pontos presentes na imagem ou marcadores para\ncalibrar as c\u00e2meras. Em (SCHMID; ZISSERMAN, 2000; ROBERT; FAUGERAS, 1991;\nMAI; HUNG, 2010; KAMINSKI et al., 2001; XIAO; DING; PENG, 2001) \u00e9 utilizada uma\nabordagem mais aperfei\u00e7oada, pois estabelece correspond\u00eancias entre as curvas, realiza\na reconstru\u00e7\u00e3o e estima a posi\u00e7\u00e3o das c\u00e2meras. Em (FAUGERAS; PAPADOPOULO,\n1993; PAPADOPOULO; FAUGERAS, 1996) Faugeras et al descreve o comportamento\ndo campo de movimento da proje\u00e7\u00e3o de uma curva 3D na imagem, para determinar\nas correspond\u00eancias e reconstruir curvas no espa\u00e7o. Alguns trabalhos, como em (SATO;\nCIPOLLA, 1998; HONG; MA; YU, 2004), utilizam a premissa de simetria do objeto para\nestabelecer restri\u00e7\u00f5es e realizar a reconstru\u00e7\u00e3o.\n\nM\u00e9todos que triangulam independentemente correspond\u00eancias de pontos da curva\ntendem a ser menos robustos a outliers e podem gerar resultados n\u00e3o suaves devido ao ru\u00eddo\nintr\u00ednseco no processo de detec\u00e7\u00e3o. Por este fato (BERTHILSSON; ASTROM; HEYDEN,\n1999; BERTHILSSON; \u00c5STR\u00d6M; HEYDEN, 2001; XIAO; LI, 2005; XIAO; DING; PENG,\n2001) utilizam curvas param\u00e9tricas (B-splines e NURBS) como primitivas. Cada ponto na\nimagem \u00e9 a proje\u00e7\u00e3o de um ponto 3D parametrizado da curva. Desta maneira, otimiza-se\na parametriza\u00e7\u00e3o dos pontos 3D e o erro de reproje\u00e7\u00e3o atrav\u00e9s de um algoritmo de bundle\nadjustment para obter uma reconstru\u00e7\u00e3o. Esta abordagem apresenta resultados precisos e\nest\u00e1veis, pois otimiza o erro de reproje\u00e7\u00e3o. Al\u00e9m disso, apresenta uma formula\u00e7\u00e3o mais\nsimples das demais abordagens, como curvas alg\u00e9bricas por exemplo. Por\u00e9m devido ao\nn\u00famero de vari\u00e1veis envolvidas, trata-se de uma solu\u00e7\u00e3o de custo computacional bastante\n\n\n\nCap\u00edtulo 3. Trabalhos relacionados 30\n\nelevado. Devido \u00e0s vantagens apresentadas nesta abordagem, a proposta do algoritmo de\nreconstru\u00e7\u00e3o dessa disserta\u00e7\u00e3o se baseia na t\u00e9cnica de Xiao e Li (XIAO; LI, 2005) que\nutiliza NURBS para realizar a reconstru\u00e7\u00e3o do eixo medial do duto.\n\n3.4 CONSIDERA\u00c7\u00d5ES FINAIS\nEste cap\u00edtulo abordou os principais trabalhos relacionados com esta disserta\u00e7\u00e3o\n\nde mestrado. Verificou-se que, embora exista na literatura enfoque na reconstru\u00e7\u00e3o e no\nrastreamento de dutos, a estimativa do eixo medial de dutos atrav\u00e9s de t\u00e9cnicas baseadas\nem vis\u00e3o computacional n\u00e3o \u00e9 explorada. Por\u00e9m o problema de reconstru\u00e7\u00e3o de curvas a\npartir de imagens est\u00e9reo \u00e9 um problema amplamente investigado. Dentre esses trabalhos,\ndestacam-se aqueles que focam na reconstru\u00e7\u00e3o est\u00e9reo utilizando splines.\n\nPara fornecer os conceitos essenciais para o entendimento da proposta desta dis-\nserta\u00e7\u00e3o, o pr\u00f3ximo cap\u00edtulo apresenta os fundamentos b\u00e1sicos em vis\u00e3o computacional,\nm\u00e9todos dos m\u00ednimos quadrados e ajuste de curvas.\n\n\n\n31\n\n4 FUNDAMENTOS\n\nNeste cap\u00edtulo ser\u00e3o apresentados os principais fundamentos para contextualizar\nessa disserta\u00e7\u00e3o de mestrado com o objetivo de criar um documento autocontido. Inicial-\nmente, a Se\u00e7\u00e3o 4.1 descreve a nota\u00e7\u00e3o matem\u00e1tica utilizada ao longo do trabalho. Em\nseguida, a Se\u00e7\u00e3o 4.2 explora a geometria projetiva e epipolar em vis\u00e3o computacional,\ndiscutindo-se os principais conceitos para se estudar a geometria em duas vistas.\n\nO modelo de curva utilizado para modelar o eixo medial do duto \u00e9 discorrido na\nSe\u00e7\u00e3o 4.3, onde apresenta-se NURBS, generaliza\u00e7\u00e3o de curvas como B-splines e B\u00e9zier. A\nSe\u00e7\u00e3o 4.4 aborda o m\u00e9todo dos m\u00ednimos quadrados, forma na qual muitos problemas s\u00e3o\nmodelados, inclusive as t\u00e9cnicas de rastreamento e reconstru\u00e7\u00e3o propostas nessa disserta\u00e7\u00e3o.\nPor fim, a Se\u00e7\u00e3o 4.5 combina NURBS e m\u00ednimos quadrados para tratar sobre o problema\nde ajuste de curvas, problema central no algoritmo de reconstru\u00e7\u00e3o de curvas proposto\npor esta pesquisa.\n\nPara uma leitura mais aprofundada acerca dos assuntos deste cap\u00edtulo, o autor\nrecomenda algumas refer\u00eancias: (HARTLEY; ZISSERMAN, 2004) e (SZELISKI, 2010)\nambas cont\u00e9m um rico material sobre geometria em m\u00faltiplas vistas e vis\u00e3o computacional.\nQuanto a NURBS e ajuste de curvas, recomenda-se os livros (PIEGL; TILLER, 2012)\ne (FARIN, 2014), al\u00e9m dos artigos (WANG; POTTMANN; LIU, 2006) e (HARON et\nal., 2012). O livro (FLETCHER, 2013) \u00e9 uma refer\u00eancia tradicional em problemas de\notimiza\u00e7\u00e3o.\n\n4.1 NOTA\u00c7\u00c3O\nA nota\u00e7\u00e3o utilizada ao longo dessa disserta\u00e7\u00e3o \u00e9 similar \u00e0quela empregada em\n\n(HARTLEY; ZISSERMAN, 2004). Valores escalares s\u00e3o representados atrav\u00e9s de letras\ndo alfabeto ingl\u00eas ou grego, mai\u00fasculas ou min\u00fasculas como w, W, ? e ?. Vetores s\u00e3o\nrepresentados por matrizes colunas e s\u00e3o denotados em negrito, como w, W, ? e ?. Para\nenumerar elementos de um vetor, utiliza-se colchetes: x = [x1,x2,x3]>. Matrizes que n\u00e3o\npossuem apenas uma coluna ser\u00e3o representadas utilizando letras do alfabeto ingl\u00eas como\nQ, q e R.\n\nNota\u00e7\u00e3o de fun\u00e7\u00f5es ser\u00e3o sempre acompanhadas de par\u00eanteses e seu par\u00e2metro e\nretorno seguem a mesma nota\u00e7\u00e3o acima. Por exemplo N(t) \u00e9 uma fun\u00e7\u00e3o que recebe um\nescalar e retorna uma matriz. A fun\u00e7\u00e3o ?(s,t; q) recebe como entrada dois escalares e um\nvetor e retorna um vetor como resultado.\n\nEmbora o texto seja escrito em portugu\u00eas, ser\u00e1 utilizado um ponto para separar\n\n\n\nCap\u00edtulo 4. Fundamentos 32\n\na parte inteira da parte decimal de um n\u00famero. Por exemplo, o n\u00famero 12.34 l\u00ea-se doze\ninteiros e trinta e quatro cent\u00e9simos.\n\n4.2 VIS\u00c3O COMPUTACIONAL\nNesta se\u00e7\u00e3o ser\u00e3o abordados os fundamentos de vis\u00e3o computacional com enfoque\n\nem geometria epipolar, essencial para formula\u00e7\u00e3o de problemas de reconstru\u00e7\u00e3o est\u00e9reo.\nPor\u00e9m, antes \u00e9 preciso formalizar alguns conceitos b\u00e1sicos da geometria projetiva e\ngeometria para uma \u00fanica vista.\n\n4.2.1 Geometria Projetiva\n\nA forma mais comum de representar pontos em um plano ou no espa\u00e7o \u00e9 atrav\u00e9s\nda geometria euclidiana. Por\u00e9m esta geometria apresenta alguns desafios para modelar as\ntransforma\u00e7\u00f5es que uma c\u00e2mera realiza ao projetar pontos do espa\u00e7o em uma imagem.\nDentre estes desafios, podemos citar a dif\u00edcil representa\u00e7\u00e3o da intersec\u00e7\u00e3o de retas paralelas.\nOutro problema \u00e9 que o espa\u00e7o euclidiano n\u00e3o \u00e9 invariante para transforma\u00e7\u00f5es projetivas.\nPor estes motivos, a geometria projetiva se torna mais atrativa. A representa\u00e7\u00e3o em\ncoordenadas homog\u00eaneas e a dualidade entre pontos e retas permitem a simplifica\u00e7\u00e3o de\nmuitos c\u00e1lculos em rela\u00e7\u00e3o \u00e0 geometria euclidiana.\n\n4.2.1.1 Coordenadas homog\u00eaneas\n\nEm coordenadas homog\u00eaneas pontos e retas s\u00e3o representados atrav\u00e9s de vetores.\nUm ponto [x,y]> no espa\u00e7o euclidiano \u00e9 definido em coordenadas homog\u00eaneas como o\nvetor\n\nx =\n\n?\n????\nkx\n\nky\n\nk\n\n?\n???? , (4.1)\n\nem coordenadas homog\u00eaneas, onde k \u00e9 um n\u00famero real diferente de 0. Observe que h\u00e1 uma\nvariedade de vetores que representam um mesmo ponto, e para cada representa\u00e7\u00e3o atribui-\nse um valor de escala k diferente. De forma similar, um ponto [x,y,w]> em coordenadas\nhomog\u00eaneas \u00e9 mapeado para o espa\u00e7o euclidiano atrav\u00e9s da divis\u00e3o [x/w,y/w]>.\n\nUma reta que cont\u00e9m o ponto x = [x,y,w]> definida pela equa\u00e7\u00e3o ax+by +cw = 0\npode ser representada pelo vetor\n\nl =\n\n?\n????\na\n\nb\n\nc\n\n?\n???? , (4.2)\n\nobtendo assim a rela\u00e7\u00e3o\nl>x = 0. (4.3)\n\n\n\nCap\u00edtulo 4. Fundamentos 33\n\nA partir da Eq. 4.3, \u00e9 determinada a intersec\u00e7\u00e3o entre duas retas l e l? como l \u00d7 l?.\nDe forma similar, a reta que passa pelos pontos x e x? \u00e9 calculada como x \u00d7 x?.\n\nA intersec\u00e7\u00e3o de retas paralelas no espa\u00e7o euclidiano possui uma representa\u00e7\u00e3o\nna geometria projetiva e \u00e9 dada pelos pontos com coordenada w = 0. Os pontos em que\nw = 0 s\u00e3o chamados de pontos no infinito e formam a reta do infinito [0, 0,c]>. Note que o\nproduto [0, 0,c][x,y, 0]> = 0, ou seja, pontos no infinito pertencem \u00e0 reta do infinito. Uma\ninterpreta\u00e7\u00e3o para o espa\u00e7o projetivo \u00e9 que ele \u00e9 a composi\u00e7\u00e3o do espa\u00e7o euclidiano com a\nreta do infinito.\n\nAt\u00e9 ent\u00e3o foi descrita a geometria projetiva planar, denotada por P2. De forma\nan\u00e1loga podemos definir P3 de modo que um ponto \u00e9 representado por quatro coordenadas\n[x,y,z,w]> e o vetor [a,b,c,d]> corresponde a um plano.\n\n4.2.1.2 Transforma\u00e7\u00f5es projetivas\n\nAs transforma\u00e7\u00f5es projetivas ou homografias representam as perspectividades, ou\nseja, o efeito produzido ao se observar uma cena de um \u00fanico ponto. Para transformar um\nponto x em x? atrav\u00e9s da homografia H, utiliza-se a rela\u00e7\u00e3o\n\nx? =\n\n?\n????\nh11 h12 h13\n\nh21 h22 h23\n\nh31 h32 h33\n\n?\n???? x = Hx, (4.4)\n\nonde x em x? s\u00e3o expressos em coordenadas homog\u00eaneas e pertencem ao P2. Como x e x?\n\nest\u00e3o descritos em coordenadas homog\u00eaneas, a igualdade da Eq. 4.4 \u00e9 verdadeira a menos\nde uma escala.\n\nA homografia consiste em uma transforma\u00e7\u00e3o linear no espa\u00e7o projetivo, por\u00e9m\nao mapear o ponto para coordenadas n\u00e3o homog\u00eaneas, realiza-se uma opera\u00e7\u00e3o de racio-\nnaliza\u00e7\u00e3o (divis\u00e3o por w). Logo, homografias s\u00e3o transforma\u00e7\u00f5es n\u00e3o lineares no espa\u00e7o\neuclidiano. Por fim, homografias preservam apenas a raz\u00e3o de raz\u00f5es (cross ratio) de\ncomprimentos em uma linha.\n\nUm subconjunto das homografias s\u00e3o as afinidades, que apresentam comportamento\nlinear no espa\u00e7o euclidiano. Um mapeamento afim HA que mapeia o ponto x em x? \u00e9\nescrito como\n\nx? =\n\n?\n????\nh11 h12 h13\n\nh21 h22 h23\n\n0 0 1\n\n?\n???? x = HAx. (4.5)\n\nAs afinidades englobam transla\u00e7\u00f5es, reflex\u00f5es, escalas, rota\u00e7\u00f5es e cisalhamentos. Estas\ntransforma\u00e7\u00f5es n\u00e3o preservam \u00e2ngulos e dist\u00e2ncia entre dois pontos, por\u00e9m preservam o\nparalelismo entre retas e a raz\u00e3o de comprimentos e \u00e1reas.\n\n\n\nCap\u00edtulo 4. Fundamentos 34\n\nEmbora as transforma\u00e7\u00f5es apresentadas correspondam ao P2, elas s\u00e3o facilmente\ngeneralizadas para o Pn, mantendo todas as propriedades citadas anteriormente.\n\n4.2.2 Modelo de c\u00e2mera pinhole\n\nMatematicamente, uma imagem \u00e9 formada atrav\u00e9s da proje\u00e7\u00e3o de pontos 3D,\npertencentes a um objeto, por exemplo, em pontos 2D da imagem. O modelo de proje\u00e7\u00e3o\nque se aplica \u00e0 grande maioria das c\u00e2meras existente \u00e9 o modelo pinhole. Neste modelo\nos pontos s\u00e3o projetados sobre o plano de proje\u00e7\u00e3o segundo a igualdade a menos de uma\nescala\n\nx = KR[I|? C]X = PX, (4.6)\n\nonde x \u00e9 o ponto da imagem e X \u00e9 o ponto no espa\u00e7o 3D, ambos em coordenadas\nhomog\u00eaneas. A matriz P \u00e9 chamada de matriz de proje\u00e7\u00e3o por encapsular toda informa\u00e7\u00e3o\nnecess\u00e1ria para projetar um ponto na imagem e pode ser decomposta nas matrizes K, R e\nno vetor C.\n\nA matriz R e o vetor C s\u00e3o chamados de par\u00e2metros extr\u00ednsecos da c\u00e2mera e\ndeterminam a posi\u00e7\u00e3o e orienta\u00e7\u00e3o da c\u00e2mera no espa\u00e7o. R \u00e9 uma matriz de rota\u00e7\u00e3o 3\u00d73 e\no vetor C corresponde ao centro de c\u00e2mera. O conjunto dessas duas informa\u00e7\u00f5es tamb\u00e9m \u00e9\nchamado de pose. O vetor de transla\u00e7\u00e3o t = ?RC representa o centro de c\u00e2mera expresso\nno sistema de coordenadas de c\u00e2mera.\n\nA matriz K encapsula os par\u00e2metros intr\u00ednsecos da c\u00e2mera na forma\n\nK =\n\n?\n????\nfx 0 xc\n0 fy yc\n0 0 1\n\n?\n???? . (4.7)\n\nO foco \u00e9 a dist\u00e2ncia entre o plano de proje\u00e7\u00e3o e o centro da c\u00e2mera. Como muitas c\u00e2meras\nn\u00e3o possuem os pixels quadrados, utiliza-se um valor de foco fx no eixo x diferente do\nfoco fy no eixo y. A interse\u00e7\u00e3o entre o eixo \u00f3tico (dado pela \u00faltima linha de R) e o plano\nde proje\u00e7\u00e3o determina o ponto [xc,yc]>, chamado de ponto principal.\n\nAs c\u00e2meras convencionais possuem um conjunto de lentes pelas quais os raios de\nluz refratam. A varia\u00e7\u00e3o da dire\u00e7\u00e3o dos raios de luz provocam efeitos de distor\u00e7\u00e3o radial e\ntangencial na imagem, que apresentam comportamento n\u00e3o linear (SZELISKI, 2010). A\nabordagem convencional para tratar estas distor\u00e7\u00f5es \u00e9 remov\u00ea-la a partir da calibra\u00e7\u00e3o\ndos par\u00e2metros de distor\u00e7\u00e3o e assim obter uma imagem que segue o modelo pinhole.\n\n4.2.3 Geometria epipolar\n\nA geometria epipolar descreve as propriedades geom\u00e9tricas existentes entre duas\nimagens da mesma cena. Ela \u00e9 independente dos pontos que formam a cena, mas dependente\ndos par\u00e2metros intr\u00ednsecos e extr\u00ednsecos das c\u00e2meras.\n\n\n\nCap\u00edtulo 4. Fundamentos 35\n\nAs propriedades epipolares entre duas imagens \u00e9 encapsulada em uma matriz F\n3 \u00d7 3 de posto 2 chamada de matriz fundamental. Dado um ponto 3D X projetado na\nprimeira imagem em x e na segunda imagem em x?, ambos em coordenadas homog\u00eaneas,\n\u00e9 sempre respeitada a seguinte rela\u00e7\u00e3o\n\nx?>Fx = 0. (4.8)\n\nA matriz fundamental tamb\u00e9m mapeia pontos da primeira imagem em linhas na\nsegunda imagem e vice-versa. Estas linhas s\u00e3o denominadas linhas epipolares. Dado a linha\nepipolar l? = Fx na segunda imagem, o ponto x? pertence a l? j\u00e1 que x?>l? = x?>Fx = 0.\nDe forma an\u00e1loga, podemos definir l = F>x? como a linha epipolar na primeira imagem.\n\n4.2.4 Retifica\u00e7\u00e3o est\u00e9reo\n\nRetifica\u00e7\u00e3o de imagens est\u00e9reo \u00e9 muito utilizada em problemas de estabelecimento\nde correspond\u00eancia est\u00e9reo. O procedimento de retifica\u00e7\u00e3o garante que os pontos corres-\npondentes x = [x,y, 1]> e x? = [x?,y?, 1]> em cada imagem sejam sujeitos a\n\ny = y?. (4.9)\n\nEm uma imagem digital \u00e9 an\u00e1logo dizer que os pontos x e x? estar\u00e3o na linha da matriz\nde pixels de mesmo \u00edndice. A retifica\u00e7\u00e3o simplifica o estabelecimento de correspond\u00eancias\nest\u00e9reo, pois facilita o processo de busca em uma dimens\u00e3o.\n\nRetifica\u00e7\u00e3o est\u00e9reo consiste na transforma\u00e7\u00e3o da primeira e segunda imagens pelas\nhomografias retificantes H e H?, respectivamente. Duas imagens s\u00e3o ditas retificadas se a\nmatriz fundamental entre as imagens for igual a\n\nF? =\n\n?\n????\n\n0 0 0\n0 0 1\n0 ?1 0\n\n?\n???? . (4.10)\n\nObserve que x?>F?x = y? ?y = 0, corroborando assim a igualdade da Eq. 4.9.\n\nOs algoritmos para calcular as homografias retificantes se dividem em duas classes:\ncalibrados e n\u00e3o calibrados. Aqueles que possuem o conhecimento da calibra\u00e7\u00e3o das c\u00e2meras\na priori s\u00e3o denominados calibrados, como (FUSIELLO; TRUCCO; VERRI, 2000). Os\nalgoritmos n\u00e3o calibrados utilizam correspond\u00eancias est\u00e9reo para estimar as homografias,\ncomo (FUSIELLO; IRSARA, 2008; HARTLEY, 1998; LOOP; ZHANG, 1999). Como no\nescopo deste trabalho, o par est\u00e9reo utilizado \u00e9 previamente calibrado, aplica-se a primeira\nclasse de algoritmos.\n\n4.2.5 Rela\u00e7\u00e3o entre proje\u00e7\u00f5es de pontos coplanares\n\nSe um conjunto de pontos 3D pertencem a um plano ?, suas proje\u00e7\u00f5es na primeira\ne segunda imagem s\u00e3o relacionadas por uma homografia H. Ou seja, dado o ponto x na\n\n\n\nCap\u00edtulo 4. Fundamentos 36\n\nprimeira imagem e x? na segunda, obtemos a rela\u00e7\u00e3o\n\nx? = Hx. (4.11)\n\nEssa propriedade \u00e9 explorada amplamente em rastreamento de planos, onde o movimento\nda c\u00e2mera \u00e9 estimado a partir da homografia entre planos correspondentes em duas imagens\n(DAME; MARCHAND, 2010; BENHIMANE; MALIS, 2004).\n\nA homografia H pode ser determinada atrav\u00e9s do plano e das matrizes de proje\u00e7\u00e3o\ndas c\u00e2meras segundo a equa\u00e7\u00e3o\n\nH = K?\n(\n\nR ? tn>/d\n)\n\nK?1, (4.12)\n\nonde ? = [n>,d]> corresponde ao plano e as matrizes de proje\u00e7\u00f5es da c\u00e2mera esquerda e\ndireita s\u00e3o dadas respectivamente por K[I|0] e K?[R|t].\n\nUm caso particular da matriz H \u00e9 obtido quando as imagens est\u00e3o retificadas. Dada\na restri\u00e7\u00e3o epipolar na Eq. 4.8, temos que\n\nx?>Fx =\n\n(Hx)>Fx =\n\nx>H>Fx = 0.\n\n(4.13)\n\nSe os pontos x e x? tiverem sido retificados, a matriz fundamental \u00e9 dada por F? na Eq.\n4.10. Sendo a matriz H formada por elementos h1, . . . ,h9 (como na Eq. 4.4), \u00e9 estabelecido\na partir da Eq. 4.13 que\n\n?h7xy ?h8y2 ?h9y + h4x + h5y + h6 = 0, (4.14)\n\nonde x = [x,y, 1]>.\n\nPara satisfazer a Eq. 4.14, para todo x e y pertencentes a R \u00e9 necess\u00e1rio que\nh4 = h6 = h7 = h8 = 0, h9 = h5 e os valores de h1, h2 e h3 sejam livres. Dessa forma, a\nhomografia que relaciona as proje\u00e7\u00f5es de pontos de um plano quando as imagens est\u00e3o\nretificadas tem a forma\n\nH =\n\n?\n????\na b c\n\n0 1 0\n0 0 1\n\n?\n???? , (4.15)\n\nonde h1, h2 e h3 foram substitu\u00eddos por a, b e c, respectivamente. Logo, neste caso, H \u00e9\numa transforma\u00e7\u00e3o afim que modifica apenas a coordenada x de um ponto.\n\nEssa particularidade \u00e9 explorada no Cap\u00edtulo 6 para relacionar os pontos da proje\u00e7\u00e3o\ndo EMD, que \u00e9 uma curva planar, nas duas imagens. Esta curva por sua vez \u00e9 modelada\ncomo uma NURBS.\n\n\n\nCap\u00edtulo 4. Fundamentos 37\n\n4.3 NURBS\nNURBS (Non Uniform Rational B-Spline) \u00e9 a generaliza\u00e7\u00e3o das curvas de B\u00e9zier\n\ne B-splines; e s\u00e3o amplamente usadas em CAD (Computer Aided Design), computa\u00e7\u00e3o\ngr\u00e1fica e ajuste de curvas (curve fitting). Um dos pontos positivos deste tipo de fun\u00e7\u00e3o \u00e9\nsua suavidade e de representa\u00e7\u00e3o f\u00e1cil e intuitiva atrav\u00e9s de pontos de controle.\n\n4.3.1 Defini\u00e7\u00e3o\n\nNURBS s\u00e3o fun\u00e7\u00f5es divididas por partes, onde cada parte \u00e9 um polin\u00f4mio racional\nde grau p. As jun\u00e7\u00f5es s\u00e3o determinadas atrav\u00e9s do particionamento do dom\u00ednio em n\u00f3s,\nonde a cada p + 1 n\u00f3s tem-se uma polinomial racional. No encontro dos n\u00f3s \u00e9 obtida uma\ncontinuidade Cp?1.\n\nDado um conjunto crescente de m n\u00f3s ti, i = 0, . . . ,m? 1 e ? pontos de controle\nqi = [qix,qiy,qiw]>, i = 0, . . . ,? ? 1, uma curva NURBS de grau p no plano \u00e9 dada pela\nfun\u00e7\u00e3o racional\n\n?(t;{qi}) =\n\n?\n???\n???1\n\ni=0 N\ni\np(t)qiw qix???1\n\ni=0 N\ni\np(t)qiw???1\n\ni=0 N\ni\np(t)qiw qiy???1\n\ni=0 N\ni\np(t)qiw\n\n?\n??? , (4.16)\n\nonde Nip(t) \u00e9 a fun\u00e7\u00e3o de base definida como\n\nNi0(t) =\n\n???\n??\n\n1, se ti ? t &lt;ti+1\n0, caso contr\u00e1rio\n\nNij(t) =\nt? ti\nti+j ? ti\n\nNij?1(t) +\nti+j+1 ? t\nti+j+1 ? ti+1\n\nNi+1j?1(t).\n\n(4.17)\n\nNesta disserta\u00e7\u00e3o, o conjunto de n\u00f3s ser\u00e1 determinado como ti = i. Esta parametri-\nza\u00e7\u00e3o \u00e9 simples e mais eficiente computacionalmente. Entretanto, \u00e9 poss\u00edvel representar as\nmesmas curvas que uma parametriza\u00e7\u00e3o arbitr\u00e1ria (respeitando ti+1 ? ti), exceto curvas\ncom descontinuidades, ou seja, quando ti = ti+1.\n\nEssa \u00e9 a representa\u00e7\u00e3o padr\u00e3o para NURBS, por\u00e9m nesta disserta\u00e7\u00e3o, ser\u00e1 empre-\ngada uma formula\u00e7\u00e3o um pouco diferente. A Eq. 4.16 \u00e9 redefinida como\n\n??(t;{q?i}) =\n\n?\n???\n???1\n\ni=0 N\ni\np(t)q?ix???1\n\ni=0 N\ni\np(t)qiw???1\n\ni=0 N\ni\np(t)q?iy???1\n\ni=0 N\ni\np(t)qiw\n\n?\n??? , (4.18)\n\nonde\n\nq?i =\n\n?\n????\nq?ix\n\nq?iy\n\nq?iw\n\n?\n???? =\n\n?\n????\nqiwq\n\ni\nx\n\nqiwq\ni\ny\n\nqiw\n\n?\n???? . (4.19)\n\n\n\nCap\u00edtulo 4. Fundamentos 38\n\nA partir desta representa\u00e7\u00e3o, os pontos de controle da NURBS s\u00e3o representados\nem coordenadas homog\u00eaneas e n\u00e3o h\u00e1 um par\u00e2metro que se refere especificamente a\num peso. Logo, um ponto da curva em coordenadas homog\u00eaneas \u00e9 dado em fun\u00e7\u00e3o da\ncombina\u00e7\u00e3o linear dos pontos de controle q?i. Ambas as formas de representa\u00e7\u00e3o s\u00e3o\nfacilmente intercambi\u00e1veis atrav\u00e9s da Eq. 4.19.\n\nNesta nota\u00e7\u00e3o, uma NURBS no Rn, por exemplo, pode ser tratada como uma\nB-spline no Pn. Transforma\u00e7\u00f5es como homografias e proje\u00e7\u00f5es em perspectivas podem ser\nrealizadas linearmente no espa\u00e7o projetivo utilizando os pontos de controle. Ao mapear a\ncurva do espa\u00e7o projetivo para o espa\u00e7o euclidiano, \u00e9 ent\u00e3o realizada uma opera\u00e7\u00e3o de\nracionaliza\u00e7\u00e3o como na Eq. 4.18.\n\nUma forma apropriada de reescrever a Eq. 4.18 \u00e9 atrav\u00e9s do produto matricial\n\n??(t; q) = qN(t), (4.20)\n\ntal que os pontos de controle s\u00e3o as colunas da matriz q, ou seja,\n\nq =\n[\nq0 q1 . . . q??1\n\n]\n, (4.21)\n\ne\n\nN(t) =\n\n?\n???????\nN0p (t)\nNip(t)\n\n...\nN??1p (t)\n\n?\n??????? . (4.22)\n\nNote que o ponto avaliado pela fun\u00e7\u00e3o ??(t; q) \u00e9 dado em coordenadas homog\u00eaneas,\ne ao mapear-se este ponto para o espa\u00e7o euclidiano realiza-se a opera\u00e7\u00e3o de racionaliza\u00e7\u00e3o.\nEssa representa\u00e7\u00e3o alternativa facilita a utiliza\u00e7\u00e3o de NURBS em coordenadas homog\u00ea-\nneas. Isso permite demonstrar intuitivamente o que acontece quando uma NURBS sofre\ntransforma\u00e7\u00f5es projetivas, como detalhado na pr\u00f3xima subse\u00e7\u00e3o. No decorrer do texto,\nmen\u00e7\u00f5es a NURBS ser\u00e3o feitas utilizando a representa\u00e7\u00e3o alternativa adotada por esta\ndisserta\u00e7\u00e3o.\n\nAt\u00e9 o momento foi definido NURBS como curvas planares, por\u00e9m facilmente\nestende-se os conceitos para representar curvas no espa\u00e7o a partir de pontos de controle\ndo P3.\n\n4.3.2 Invari\u00e2ncia a transforma\u00e7\u00f5es projetivas\n\nA invari\u00e2ncia a transforma\u00e7\u00f5es projetivas e proje\u00e7\u00f5es em perspectiva \u00e9 uma pro-\npriedade de NURBS e ser\u00e1 aplicada no Cap\u00edtulo 6, quando a proposta do algoritmo de\nreconstru\u00e7\u00e3o de curvas ser\u00e1 descrita.\n\n\n\nCap\u00edtulo 4. Fundamentos 39\n\nSe for aplicada uma homografia H a um ponto qualquer x de um NURBS ?(t; q)\nquando t = ? obt\u00eam-se que um ponto x? na curva transformada \u00e9 dado por\n\nx? = Hx\n\n= H?(?; q)\n\n= HqN(?)\n\n= q?N(?)\n\n= ?(?; q?),\n\n(4.23)\n\nonde q s\u00e3o os pontos de controle organizados em uma matriz.\n\nNa Eq. 4.23 \u00e9 mostrado que aplicar uma homografia H ao pontos de uma NURBS\ncom pontos de controle q resulta em uma NURBS com pontos de controle q? = Hq. De\nmaneira an\u00e1loga, mostra-se que a proje\u00e7\u00e3o de pontos de uma NURBS no espa\u00e7o em uma\nimagem tamb\u00e9m resulta em uma NURBS. Sendo Q a matriz de pontos de controle da\ncurva no espa\u00e7o e P a matriz de proje\u00e7\u00e3o da c\u00e2mera, a NURBS na imagem \u00e9 governada\npelos pontos de controle q = PQ.\n\n4.4 M\u00cdNIMOS QUADRADOS\nOs m\u00e9todos de rastreamento e reconstru\u00e7\u00e3o propostos nessa disserta\u00e7\u00e3o s\u00e3o mo-\n\ndelados atrav\u00e9s de m\u00ednimos quadrados. O problema de m\u00ednimos quadrados consiste em\ndeterminar um vetor de par\u00e2metros x que minimiza a soma quadrada de fun\u00e7\u00f5es residuais\nri(x), i = 0, . . . ,n? 1 e pode ser escrito atrav\u00e9s da equa\u00e7\u00e3o\n\narg min\n?\ni\n\nr2i (x). (4.24)\n\nOrganizando ri(x) em uma fun\u00e7\u00e3o vetorial, obt\u00e9m-se a fun\u00e7\u00e3o de custo representada por\nr(x) = [r0(x), . . . ,rn?1(x)]>. Logo, a Eq. 4.24 pode ser expressa como minimiza\u00e7\u00e3o da\nnorma quadrada de r(x), ou seja,\n\narg min ||r(x)||2. (4.25)\n\nQuando a fun\u00e7\u00e3o r(x) \u00e9 linear em rela\u00e7\u00e3o \u00e0 x, \u00e9 poss\u00edvel obter uma solu\u00e7\u00e3o direta\npara o problema de m\u00ednimos quadrados. Escrevendo o problema na forma Ax = y, define-se\na fun\u00e7\u00e3o de custo como r(x) = Ax ? y e a solu\u00e7\u00e3o \u00f3tima \u00e9 dada por\n\nx = arg min ||Ax ? y||2 = (A>A)?1A>y. (4.26)\n\nSe a fun\u00e7\u00e3o r(x) n\u00e3o \u00e9 linear, como \u00e9 o caso de proje\u00e7\u00f5es em perspectiva, deve-se\nutilizar m\u00e9todos num\u00e9ricos para determinar x. Esses m\u00e9todos s\u00e3o iterativos e partem\nde um palpite inicial x0. O m\u00e9todo de Gauss-Newton aproxima r(x) linearmente na\n\n\n\nCap\u00edtulo 4. Fundamentos 40\n\nvizinhan\u00e7a de xi para calcular o passo iterativo ?i. Tomando a primeira expans\u00e3o de\nTaylor r(xi + ?) ? r(xi) + J?i, onde J \u00e9 o jacobiano de r(x) e utilizando a Eq. 4.26 tem-se\nque\n\n?i = arg min\n?\n||r(xi + ?)||2\n\n= arg min\n?\n||r(xi) + J?||2\n\n= ?(J>J)?1J>r(xi).\n\n(4.27)\n\nDessa forma, o algoritmo pode ser resumido atrav\u00e9s do passo iterativo\n\nxi+1 = xi ? (J>J)?1J>r(xi). (4.28)\n\nEste m\u00e9todo funciona muito bem em problemas simples e quando o palpite inicial\nest\u00e1 pr\u00f3ximo do m\u00ednimo global, por\u00e9m a converg\u00eancia n\u00e3o pode ser garantida. Com o\nobjetivo de garantir estabilidade, o algoritmo de Levenberg-Marquardt (LEVENBERG,\n1944; MARQUARDT, 1963) utiliza a abordagem de regi\u00e3o de confian\u00e7a. Este por sua vez\nadiciona um par\u00e2metro ? no passo iterativo da Eq. 4.28 criando a equa\u00e7\u00e3o\n\nxi+1 = xi ?\n(\n\nJ>J + ? diag(J>J)\n)?1\n\nJ>r(x). (4.29)\n\nO valor ? controla o tamanho do passo, de forma que um passo menor necessita de mais\nitera\u00e7\u00f5es para convergir. Al\u00e9m disso, este algoritmo pode descartar um passo e tentar\nnovamente com um valor diferente de ?. Isto torna a converg\u00eancia do algoritmo mais lenta,\npor\u00e9m evita que o mesmo divirja.\n\n4.5 AJUSTE DE CURVA\nAjuste de curva (curve fitting) \u00e9 o processo de reconstruir uma curva ou fun\u00e7\u00e3o\n\nanal\u00edtica a partir de um conjunto de pontos amostrais fornecidos como entrada. Estes\npontos geralmente possuem ru\u00eddos, sendo necess\u00e1rio encontrar uma resposta aproximada.\nCurvas muito utilizadas para este fim s\u00e3o B-splines devido \u00e0 sua suavidade. B-splines s\u00e3o\num caso particular de NURBS em que os pontos de controle s\u00e3o dados em coordenadas\nn\u00e3o homog\u00eaneas (ou \u00faltima coordenada igual a 1). Nesta Se\u00e7\u00e3o ser\u00e1 descrito o ajuste em\nB-spline, conceito utilizado no Cap\u00edtulo 6 para descrever o algoritmo de reconstru\u00e7\u00e3o da\ncurva.\n\nDado um conjunto de n pontos amostrais xi, i = 0, . . . ,n? 1 o ajuste pode ser\nmodelado pela minimiza\u00e7\u00e3o da fun\u00e7\u00e3o de custo?\n\ni\n\nd(?(t, q), xi)2, (4.30)\n\nsendo d(\u00b7, \u00b7) a dist\u00e2ncia euclidiana entre um ponto e uma curva. A curva \u00e9 dada por ?(t, q),\numa B-spline parametrizada por t e governada pelos pontos de controle encapsulados na\nmatriz q.\n\n\n\nCap\u00edtulo 4. Fundamentos 41\n\nFigura 5 \u2013 A proje\u00e7\u00e3o do ponto amostral x na curva \u00e9 o ponto da curva x? mais pr\u00f3ximo\nde x. A dist\u00e2ncia entre os dois pontos \u00e9 dada por e. O vetor que liga os pontos\nx e x? \u00e9 normal ao vetor tangente t da curva no ponto x?.\n\n?\n\n ?\n?\n\n?\n\n?\n\nFonte: O autor.\n\nA dist\u00e2ncia entre um ponto x e uma curva ?(t, q) \u00e9 dada pela dist\u00e2ncia entre x\ne sua proje\u00e7\u00e3o na curva x?, como ilustrado na Figura 5. Por\u00e9m computar esta dist\u00e2ncia\n\u00e9 invi\u00e1vel devido \u00e0 sua complexidade. Por esse motivo, estipula-se uma parametriza\u00e7\u00e3o\nti para cada ponto amostral para se obter uma aproxima\u00e7\u00e3o da proje\u00e7\u00e3o dos pontos ao\nlongo da curva, de forma que x?i = ?(ti, q). Ent\u00e3o a Eq. 4.30 \u00e9 reescrita como\n\n?\ni\n\ndP (?(ti; q), xi)2, (4.31)\n\nonde dP (\u00b7, \u00b7) se torna a dist\u00e2ncia euclidiana entre dois pontos.\n\nUma maneira de obter uma solu\u00e7\u00e3o linear para Eq. 4.31 \u00e9 parametrizar aproxima-\ndamente os pontos amostrais em ti e utilizar regress\u00e3o linear para determinar q. Existem\ndiversos m\u00e9todos para este fim. Dentre os mais tradicionais, destacam-se a parametriza-\n\u00e7\u00e3o uniforme (BOOR, 1978), das cordas (L\u00dc, 2009) e centr\u00edpeta (HOSCHEK; LASSER;\nSCHUMAKER, 1993). Tamb\u00e9m existem m\u00e9todos mais complexos como parametriza\u00e7\u00e3o\nexponencial (LEE, 1989), universal (LIM, 1999) e h\u00edbrida (AHMED et al., 2004). Uma\ncompara\u00e7\u00e3o dentre esses m\u00e9todos \u00e9 fornecida em (HARON et al., 2012).\n\nPara obter a solu\u00e7\u00e3o \u00f3tima para a Eq. 4.31, utiliza-se o m\u00e9todo alternante, que\nconsiste em iterativamente estimar os pontos de controle e em seguida ajustar os valores\ndos par\u00e2metros ti (FARIN, 2014). Por\u00e9m esta abordagem apresenta converg\u00eancia linear\n(WANG; POTTMANN; LIU, 2006) requerendo que sejam realizadas muitas itera\u00e7\u00f5es.\n\n4.6 CONSIDERA\u00c7\u00d5ES FINAIS\nEste cap\u00edtulo apresentou os principais fundamentos para o entendimento e con-\n\ntextualiza\u00e7\u00e3o da proposta desta disserta\u00e7\u00e3o de mestrado, apresentada nos dois pr\u00f3ximos\ncap\u00edtulos. O Cap\u00edtulo 5 emprega os conceitos sobre geometria projetiva e o modelo pinhole\n\n\n\nCap\u00edtulo 4. Fundamentos 42\n\npara definir o modelo de proje\u00e7\u00e3o do duto. O Cap\u00edtulo 6 realiza a reconstru\u00e7\u00e3o da curva\nutilizando os conceitos de geometria epipolar e ajuste de curva. Otimiza\u00e7\u00e3o n\u00e3o linear \u00e9\nutilizada por ambos os cap\u00edtulos para solucionar problemas de m\u00ednimos quadrados.\n\n\n\n43\n\n5 T\u00c9CNICA PROPOSTA DE RASTREA-\nMENTO DE DUTOS\n\nEste cap\u00edtulo apresenta uma proposta de t\u00e9cnica de rastreamento de dutos. O\nobjetivo principal desta t\u00e9cnica \u00e9 determinar a posi\u00e7\u00e3o do eixo medial do duto na imagem\na partir de um palpite inicial, que pode ser obtido do quadro anterior ou atrav\u00e9s de uma\netapa de inicializa\u00e7\u00e3o. Uma formula\u00e7\u00e3o geral do problema \u00e9 dada na Se\u00e7\u00e3o 5.1. Com base\nno modelo de proje\u00e7\u00e3o apresentado na Se\u00e7\u00e3o 5.2, prop\u00f5e-se uma transforma\u00e7\u00e3o na imagem\nna Se\u00e7\u00e3o 5.3 com o objetivo de tornar o algoritmo mais simples e eficiente. O rastreamento \u00e9\nefetuado identificando na imagem a regi\u00e3o em que o duto foi projetado com base no cen\u00e1rio\ndo problema. Utilizando principalmente as caracter\u00edsticas de pintura e de ilumina\u00e7\u00e3o\nda cena, o algoritmo proposto \u00e9 dividido em duas etapas: rastreamento longitudinal,\napresentado na Se\u00e7\u00e3o 5.4, e rastreamento transversal, apresentado na Se\u00e7\u00e3o 5.5. Com\no intuito de obter um resultado acurado e eficiente, foram realizadas as aproxima\u00e7\u00f5es\nenumeradas na Se\u00e7\u00e3o 5.6. Por fim, a Se\u00e7\u00e3o 5.7 descreve os passos do algoritmo proposto.\n\n5.1 FORMULA\u00c7\u00c3O\nA abordagem proposta utiliza caracter\u00edsticas do problema para encontrar uma\n\nregi\u00e3o R que corresponde ao duto na imagem I. Essa regi\u00e3o tem a forma aproximada de\numa fita de espessura conhecida cujo eixo \u00e9 governado pela proje\u00e7\u00e3o x(t) do Eixo Medial\ndo Duto (EMD) na imagem. A espessura \u00e9 calculada a partir do raio do duto (dado como\nentrada) e sua posi\u00e7\u00e3o no espa\u00e7o. J\u00e1 a regi\u00e3o R pode ser calculada no quadro atual do\nv\u00eddeo com base na etapa de inicializa\u00e7\u00e3o da ferramenta ou no resultado da reconstru\u00e7\u00e3o\ndo quadro anterior.\n\nFigura 6 \u2013 Caracter\u00edsticas do corte longitudinal e transversal utilizadas para realizar o\nrastreamento em duas etapas.\n\n(a) Imagem com cortes.\n\nFonte: Petrobras.\n\nComprimento (pixels)\n0 20 40 60 80 100\n\nIn\nte\n\nn\nsi\n\nd\na\n\nd\ne\n\n0.4\n\n0.6\n\n0.8\n\n1\n\n(b) Corte longitudinal.\n\nFonte: O autor.\n\nComprimento (pixels)\n0 20 40 60\n\nIn\nte\n\nn\nsi\n\nd\na\n\nd\ne\n\n0.4\n\n0.6\n\n0.8\n\n1\n\n(c) Corte transversal.\n\nFonte: O autor.\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 44\n\nFigura 7 \u2013 Ilustra\u00e7\u00e3o da entrada e sa\u00edda do algoritmo de rastreamento. Na Figura 7a\na curva x(t), inicializada a partir do quadro anterior ou da inicializa\u00e7\u00e3o da\nferramenta, \u00e9 ajustada longitudinalmente e transversalmente para representar\ncorretamente o EMD. O resultado \u00e9 a curva x?(t) na Figura 7b.\n\n?\n\n?\n\n?(?)\n\n(a) Entrada do rastreamento.\n\n?\n\n?\n\n??(?)\n\n(b) Sa\u00edda do rastreamento.\n\nFonte: O autor.\n\nOutra caracter\u00edstica que o algoritmo utiliza s\u00e3o as condi\u00e7\u00f5es de ilumina\u00e7\u00e3o descritas\nna Se\u00e7\u00e3o 2.6. Os pixels pertencentes ao duto tendem a aparecer na imagem com maior\nintensidade do que os demais. Logo \u00e9 plaus\u00edvel definir que a probabilidade de um pixel na\nposi\u00e7\u00e3o x = [x,y]> pertencer ao duto pode ser associada \u00e0 sua intensidade na imagem.\n\nLevando em considera\u00e7\u00e3o essas duas caracter\u00edsticas, o objetivo do rastreamento\npode ser resumido em maximizar a probabilidade de R representar o duto, ou seja,\nmaximizar a intensidade dos pixels (ou a energia) contidos em R. Sendo assim, busca-se\ndeterminar uma nova curva x?(t) que descreva a proje\u00e7\u00e3o do EMD, tal que\n\nx? = arg max\nx?\n\n?\nI(R(x?)). (5.1)\n\nComo a ilumina\u00e7\u00e3o n\u00e3o \u00e9 uniforme, n\u00e3o necessariamente os pixels de maior inten-\nsidade da imagem pertencer\u00e3o ao duto, por\u00e9m \u00e9 plaus\u00edvel admitir que localmente essa\npremissa \u00e9 v\u00e1lida. A solu\u00e7\u00e3o da Eq. 5.1, embora intuitiva, falha na pr\u00e1tica, pois a curva\nx(t) tenderia a apresentar um comportamento inst\u00e1vel. O m\u00e1ximo global do problema\nconsiste na regi\u00e3o R reduzida a um tamanho muito pequeno localizada sobre os pixels de\nmaior intensidade da imagem. Para contornar esse problema, o algoritmo foi estratificado\nem duas partes: rastreamento longitudinal e rastreamento transversal.\n\nNo rastreamento longitudinal o objetivo \u00e9 seguir o segmento de duto com base na\nsua textura longitudinal formada por regi\u00f5es claras e escuras, como ilustrado no corte da\nFigura 6b. O padr\u00e3o de pintura no eixo longitudinal permite determinar duas extremidades\npara a curva x(t). Ap\u00f3s as extremidades serem encontradas, a curva x(t) \u00e9 ajustada pelo\nrastreamento transversal ao longo da dire\u00e7\u00e3o transversal utilizando a ideia de maximizar\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 45\n\nFigura 8 \u2013 A regi\u00e3o R dada pela interpola\u00e7\u00e3o da curva superior x+(t) e inferior x?(t) e\nparametrizada por s ao longo da dire\u00e7\u00e3o transversal e t ao longo da dire\u00e7\u00e3o\nlongitudinal.\n\n? ?\n?(?)\n\n?(????)\n\n?? ? = ?(0,?)\n\n?+ ? = ?(1,?)\n?(????)\n\nFonte: O autor.\n\na energia em R, de acordo com a Eq. 5.1. A Figura 6c ilustra que o duto localiza-se na\nregi\u00e3o do gr\u00e1fico onde est\u00e3o os pixels de maior intensidade.\n\nPara apresentar os algoritmos de rastreamento propostos, \u00e9 preciso formular o\ncomportamento matem\u00e1tico da regi\u00e3o R, como descrito na Se\u00e7\u00e3o 5.2. Esta formula\u00e7\u00e3o\npermite modelar uma transforma\u00e7\u00e3o da imagem na Se\u00e7\u00e3o 5.3 que modifica o dom\u00ednio da\nimagem para os par\u00e2metros s e t. Assim, o rastreamento longitudinal pode ser realizado na\ndire\u00e7\u00e3o horizontal da imagem transformada enquanto o transversal \u00e9 realizado na dire\u00e7\u00e3o\nvertical.\n\nO resultado do algoritmo de rastreamento est\u00e1 ilustrado na Figura 7. A entrada\nconsiste em um quadro do v\u00eddeo e a proje\u00e7\u00e3o do EMD x(t) calculada no quadro anterior\nou na etapa de inicializa\u00e7\u00e3o (Figura 7a). Devido ao movimento do duto realizado entre os\nquadros, a curva est\u00e1 deslocada tanto da dire\u00e7\u00e3o longitudinal quanto na dire\u00e7\u00e3o transversal.\nA Figura 7b ilustra o resultado do algoritmo, que consiste na curva x?(t) corretamente\najustada ao duto. Esta figura ser\u00e1 usada ao longo do texto para ilustrar os passos do\nalgoritmo.\n\n5.2 REGI\u00c3O DE PROJE\u00c7\u00c3O DO DUTO\nO duto pode ser considerado um cilindro generalizado (ABBENA; SALAMON;\n\nGRAY, 2006) cujo eixo medial, o EMD, \u00e9 uma curva X(t), definida no intervalo tmin ?\nt ? tmax. Sua superf\u00edcie \u00e9 formada por circunfer\u00eancias normais e centradas em cada ponto\ndo EMD. Desta forma, cada circunfer\u00eancia constitui uma se\u00e7\u00e3o transversal do duto. A\nproje\u00e7\u00e3o de todas as circunfer\u00eancias na imagem gera a regi\u00e3o de proje\u00e7\u00e3o do duto R.\n\nA regi\u00e3o R pode ser interpretada como uma regi\u00e3o delimitada por duas curvas:\numa superior x+(t) e uma inferior x?(t), como ilustrado na Figura 8. Sendo assim, a\nequa\u00e7\u00e3o R que descreve a regi\u00e3o R \u00e9 determinada a partir de uma interpola\u00e7\u00e3o linear\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 46\n\nFigura 9 \u2013 As curvas X+ e X? est\u00e3o sobre a superf\u00edcie do duto e s\u00e3o formadas pelos pontos\nde tang\u00eancia no duto a partir dos raios que passam pelo centro de proje\u00e7\u00e3o C.\n\n?? ?\n\n?+ ?\n\n?? ?\n\nFonte: O autor.\n\nentre as duas curvas:\n\nR(s,t) = (1 ?s) x?(t) + s x+(t)\n\n= x?(t) + s v(t),\n(5.2)\n\nonde\nv(t) = x+(t) ? x?(t) (5.3)\n\nA regi\u00e3o est\u00e1 definida entre os intervalos tmin ? t ? tmax e 0 ? s ? 1 e parametrizada\nlongitudinalmente por t e transversalmente por s. A proje\u00e7\u00e3o do EMD na imagem, denotada\npor x(t), localiza-se entre a curva superior e inferior.\n\nAs curvas x+(t) e x?(t) podem ser calculadas a partir de X(t) utilizando informa\u00e7\u00f5es\nda c\u00e2mera e do raio do duto. Para isso, define-se como X+(t) e X?(t) duas curvas sobre\na superf\u00edcie do duto formadas pelos pontos tangentes aos raios de luz que convergem no\ncentro da c\u00e2mera C, como ilustrado na Figura 9. As curvas superiores e inferiores s\u00e3o\nrespectivamente as proje\u00e7\u00f5es de X+(t) e X?(t) na imagem.\n\n5.3 TRANSFORMA\u00c7\u00c3O DA IMAGEM\nA transforma\u00e7\u00e3o da imagem \u00e9 similar \u00e0 retifica\u00e7\u00e3o de imagens est\u00e9reo, pois tem\n\no objetivo de simplificar c\u00e1lculos e acelerar os algoritmos. Na retifica\u00e7\u00e3o est\u00e9reo, as\nlinhas epipolares da imagem se tornam paralelas ao eixo das abscissas facilitando o\nestabelecimento de correspond\u00eancias est\u00e9reo. Na transforma\u00e7\u00e3o proposta, os vetores v(t)\nse tornam paralelos ao eixo das ordenadas enquanto as curvas x+(t) e x?(t) se tornam\nparalelas ao eixo das abscissas. A transforma\u00e7\u00e3o origina uma imagem T , sendo\n\nT(u,s) =\n?\nI(R(s,t)) onde u = L(t) (5.4)\n\ne\nL(t) =\n\n? t\ntmin\n\n?????\n?????dx(?)d?\n\n?????\n?????d?. (5.5)\n\nA transforma\u00e7\u00e3o modifica o dom\u00ednio espacial da imagem para a parametriza\u00e7\u00e3o da\nregi\u00e3o nas dire\u00e7\u00f5es transversal e longitudinal. Dessa maneira, o rastreamento longitudinal\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 47\n\nFigura 10 \u2013 Ilustra\u00e7\u00e3o da transforma\u00e7\u00e3o da imagem na Figura 7a. Os eixos das abscissas\ne ordenadas passam a ser os par\u00e2metros s e t. Note que se n\u00e3o houvesse a\nextrapola\u00e7\u00e3o, o trecho de duto acima da reta s = 1 n\u00e3o estaria contido na\nimagem. A transforma\u00e7\u00e3o passa a ideia de uma imagem na qual o duto foi\nesticado.\n\n1 + ??\n\n?\n\n?\n????\n\n???? ? ?? ???? + ??????\n\n? = 1\n\n? = 0\n\n-??\n\n1\n\n0\n\nFonte: O autor.\n\ndeve ser realizado ao longo da dire\u00e7\u00e3o horizontal e o transversal ao longo da dire\u00e7\u00e3o\nvertical. A parametriza\u00e7\u00e3o de u, definida no intervalo umin ? u ? umax, em fun\u00e7\u00e3o do\ncomprimento da curva garante que seja mantido seu comprimento ap\u00f3s a transforma\u00e7\u00e3o.\n\nA transforma\u00e7\u00e3o cria distor\u00e7\u00f5es significativas em partes da imagem distantes da\ncurva, ent\u00e3o recomenda-se aplic\u00e1-la apenas na vizinhan\u00e7a da curva. Entretanto \u00e9 preciso\nencontrar o duto no quadro atual e este, provavelmente, se moveu um pouco em rela\u00e7\u00e3o\nao quadro anterior. Para manter o duto dentro dos limites da imagem transformada, os\nintervalos dos par\u00e2metros s e u devem ser extrapolados por ?s e ?u, tal que a imagem\ntransformada seja definida no intervalo umin ? ?u ? u ? umax + ?u e ??s ? s ? 1 + ?s. A\nextrapola\u00e7\u00e3o \u00e9 geralmente pequena, j\u00e1 que tanto a c\u00e2mera quanto os dutos est\u00e3o sujeitos\na movimentos lentos.\n\nDentre as vantagens da transforma\u00e7\u00e3o, est\u00e3o: redu\u00e7\u00e3o consider\u00e1vel das dimens\u00f5es\nda imagem tornando a aplica\u00e7\u00e3o de filtros mais eficiente; pr\u00e9-computa\u00e7\u00e3o da opera\u00e7\u00e3o de\nraiz quadrada em 5.4; e n\u00e3o ser mais preciso avaliar R(s,t). Aplicando-se a transforma\u00e7\u00e3o\nna imagem da Figura 7a obt\u00e9m-se a correspondente na Figura 10. Note que o dom\u00ednio x\ne y foi mapeado para s e t e, devido ao movimento do duto, foi necess\u00e1rio extrapolar os\nintervalos para que a imagem ainda contivesse o duto.\n\n5.4 RASTREAMENTO LONGITUDINAL\nO rastreamento longitudinal consiste em determinar um novo intervalo [u?min,u?max]\n\nque define as extremidades do duto na dire\u00e7\u00e3o longitudinal da regi\u00e3o R. O algoritmo\nutiliza o padr\u00e3o marcado sobre o duto para garantir que um mesmo segmento esteja sendo\nrastreado ao longo do tempo. Como o padr\u00e3o \u00e9 composto por regi\u00f5es claras seguidas de\nregi\u00f5es escuras, estabeleceu-se que as extremidades do duto devem permanecer sobre as\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 48\n\nFigura 11 \u2013 Ilustra\u00e7\u00e3o da aplica\u00e7\u00e3o do rastreamento longitudinal da Figura 10. Note que\natualizou-se umin para u?min e umax para u?max de forma que as extremidades\ndo duto fiquem aproximadamente no centro das regi\u00f5es brancas do padr\u00e3o.\n\n?\n\n?\n????????\n\n?\n\n????\n? ????\n\n? = 1\n\n? = 0\n\n1\n\n0\n\nFonte: O autor.\n\nregi\u00f5es claras. Observe na Figura 6b que a forma das regi\u00f5es brancas ao longo do eixo\nlongitudinal \u00e9 bem definida.\n\nPortanto, o rastreamento \u00e9 realizado maximizando a energia contida numa janela\nlocalizada na vizinhan\u00e7a das extremidades da curva na imagem T , ou seja,\n\nu? = arg max\nu?\n\n? u?+?\nu???\n\n? 1\n0\nT(s,u)2dsdu, (5.6)\n\nonde ? define a metade da largura da janela na dire\u00e7\u00e3o longitudinal. A Eq. 5.6 aplica-se a\nambas extremidades do duto e pode ser resolvida pelo m\u00e9todo de m\u00ednimos quadrados. Note\nque como h\u00e1 uma opera\u00e7\u00e3o de raiz quadrada na Eq. 5.4, a Eq. 5.6 otimiza o somat\u00f3rio\ndas intensidades da imagem I na vizinhan\u00e7a das extremidades.\n\nSe a janela for discretizada em si=0,1,... no intervalo [0, 1] e ?uj=0,1,... no intervalo\n[??,?] e aplicando o m\u00e9todo de Gauss-Newton (Se\u00e7\u00e3o 4.4) para resolver Eq. 5.6, obt\u00e9m-se\n\nu?k+1 = u\n?\nk +\n\n?\ni\n\n?\nj T(si,u?k + ?uj)Tu(si,u?k + ?uj)?\n\ni\n\n?\nj T(si,u?k + ?uj)2\n\n, (5.7)\n\nonde Tu(s,u) corresponde \u00e0 derivada de T(s,u) na dire\u00e7\u00e3o de u. Para determinar a\nextremidade esquerda do duto, deve-se inicializar u?0 = umin. De forma an\u00e1loga, deve-se\ntomar u?0 = umax para encontrar a outra extremidade.\n\nAplicando-se o rastreamento longitudinal na imagem da Figura 10 obt\u00e9m-se o\nresultado ilustrado na Figura 11, onde as extremidades do quadro anterior, dadas por umin\ne umax foram rastreadas para u?min e u?max, respectivamente. Observe que o rastreamento\nlongitudinal deve ser executado antes do transversal para definir a regi\u00e3o do duto que\ndeve ser ajustada na dire\u00e7\u00e3o transversal. O pr\u00f3ximo passo \u00e9 acertar as curvas pontilhadas\nna borda do duto.\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 49\n\n5.5 RASTREAMENTO TRANSVERSAL\nComo a proje\u00e7\u00e3o do duto \u00e9 formada por pixels mais claros que o background, o\n\nrastreamento transversal busca maximizar a energia de dentro da regi\u00e3o R, na imagem\ntransformada T ao longo da dimens\u00e3o s. Isto \u00e9 feito ajustando a curva superior e in-\nferior atrav\u00e9s de uma fun\u00e7\u00e3o ?(u; q), definida no intervalo [u?min,u?max]. Para obter um\najuste suave, utilizou-se B-spline, Se\u00e7\u00e3o 4.3, onde q consiste em ? pontos de controle\nunidimensionais.\n\nPortanto, o problema do rastreamento transversal \u00e9 encontrar q?, tal que\n\nq? = arg max\nq?\n\n? 1\n0\n\n? u?max\nu?\nmin\n\nw(s)T(s + ?(u; q?),u)2duds, (5.8)\n\nonde w(s) \u00e9 uma fun\u00e7\u00e3o de pesos definida na Se\u00e7\u00e3o 5.5.1. De forma similar ao rastreamento\nlongitudinal, o rastreamento transversal maximiza a soma das intensidades dos pixels da\nimagem I contidos na regi\u00e3o R. Como a transformada da imagem possui uma opera\u00e7\u00e3o\nde raiz quadrada na Eq. 5.4, o problema pode ser transformado em m\u00ednimos quadrados\ncuja solu\u00e7\u00e3o \u00e9 apresentada na Se\u00e7\u00e3o 5.5.2.\n\n5.5.1 Fun\u00e7\u00e3o de pesos\n\nO algoritmo de rastreamento proposto se baseia na premissa de que o duto tem\nraio constante ao longo do comprimento e uma marca\u00e7\u00e3o que segue o padr\u00e3o intercalado\nde segmentos brancos e pretos. Por\u00e9m \u00e9 inerente ao procedimento de instala\u00e7\u00e3o haver\nequipamentos fixados no duto, como boias e amarras. Al\u00e9m disso, danos \u00e0 superf\u00edcie do\nduto podem remover a pintura. Estes fatores tendem a afetar principalmente as bordas da\nregi\u00e3o R, tornando a espessura do duto na imagem maior ou menor que a espessura da\nregi\u00e3o. Nesse caso o rastreamento transversal n\u00e3o alinhar\u00e1 corretamente a regi\u00e3o R com o\nduto e pode apresentar comportamento inst\u00e1vel.\n\nPara minimizar esse problema, o rastreamento adota um ponderamento na dire\u00e7\u00e3o\ntransversal de forma que os pixels da borda possuam menor peso na fun\u00e7\u00e3o de custo 5.8,\ntornando-o mais robusto. Os pesos s\u00e3o definidos em fun\u00e7\u00e3o de s como\n\nw(s) =\n\n??????\n?????\n\n1 ? ((s??)/?)2, se s &lt;?;\n\n(1 ?s)/?, se s > 1 ??;\n\n1, caso contr\u00e1rio.\n\n0 ? ? ? 1. (5.9)\n\nA fun\u00e7\u00e3o de peso tem comportamento crescente quando 0 ? s ? ?, constante em\n0 ? s ? 1 ? ? e decrescente em 1 ? ? ? s ? 1. Dessa forma, os maiores pesos est\u00e3o\nno centro da proje\u00e7\u00e3o da se\u00e7\u00e3o transversal enquanto os menores estar\u00e3o localizados nas\nbordas.\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 50\n\n5.5.2 Solu\u00e7\u00e3o utilizando m\u00ednimos quadrados\n\nDada a discretiza\u00e7\u00e3o dos pixels do duto na imagem T em si, i = 0, . . . ,n? 1 e uj,\nj = 0, . . . ,m? 1, onde 0 ? si ? 1 e u?min ? uj ? u?max, a Eq 5.8 pode ser reescrita como\n\nm?1?\nj=0\n\nn?1?\ni=0\n\n(\nw(si) T (i,j)\n\n)2\n(5.10)\n\ne resolvida atrav\u00e9s do m\u00e9todo de m\u00ednimos quadrados. Para simplificar a nota\u00e7\u00e3o, T(si +\n?(uj; q)) ser\u00e1 denotado como T (i,j). O passo iterativo \u00e9 calculado como ?q = (J>J)?1J>r,\nonde J \u00e9 a matriz jacobiana da Eq. 5.10 e r \u00e9 o vetor de residuais. Sendo J(i,j) a (m\u00d7i + j)-\n\u00e9sima linha de J, definimos\n\nJ(i,j) =\n?w(si) T (i,j)\n\n?q\n\n= w(si)\n?T (i,j)\n\n?s\n\n??(uj; q)\n?q\n\n= w(si)\n?T (i,j)\n\n?s\n\n?qN(ui)\n?q\n\n= w(si)T (i,j)s N(ui),\n\n(5.11)\n\nonde T (i,j)s \u00e9 a derivada de T (i,j) na dimens\u00e3o de s e N(u) \u00e9 a fun\u00e7\u00e3o de base segundo Eq.\n4.17.\n\nLogo, maximiza-se a Eq. 5.10 atrav\u00e9s da itera\u00e7\u00e3o\n\nq?k+1 = q\n?\nk + ?q (5.12)\n\ne inicializando q?0 = 0, tendo em vista que o ponto de partida \u00e9 dado pelo resultado obtido\nno quadro anterior.\n\nA matriz J pode atingir dezenas de milhares de linhas devido \u00e0 quantidade de\npixels contidos em R e tornar o c\u00e1lculo de ?q muito custoso computacionalmente em um\nalgoritmo iterativo. Por\u00e9m ao realizar a simplifica\u00e7\u00e3o\n\nJ>J =\n?\nj\n\n?\ni\n\nN(uj)N(uj)>w(si)(T (i,j)s )\n2 =\n\n?\nj\n\nN(uj)N(uj)>\n?\ni\n\nw(si)(T (i,j)s )\n2 (5.13)\n\nreduz-se o custo do produto matricial de m\u00d7n\u00d7?2 para m\u00d7 (n + ?2). Ao se colocar o\ntermo\n\n?\ni w(si)(T (i,j)s )2 em evid\u00eancia evita-se a repeti\u00e7\u00e3o desnecess\u00e1ria de muitos c\u00e1lculos.\n\nAl\u00e9m disso as fun\u00e7\u00f5es de base N(ui) s\u00e3o constantes ao longo das itera\u00e7\u00f5es, podendo assim\nser computadas previamente. Por fim, a matriz J>J possui muitos elementos nulos se ? for\nmuito maior que o grau do polin\u00f4mio. De forma an\u00e1loga, as mesmas simplifica\u00e7\u00f5es podem\nser adotadas em\n\nJ>r =\n?\nj\n\n?\nj\n\nN(uj)w(si)T (i,j)s T\n(i,j) =\n\n?\nj\n\nN(uj)\n?\ni\n\nw(si)T (i,j)s T\n(i,j). (5.14)\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 51\n\nFigura 12 \u2013 Esquem\u00e1tico da aplica\u00e7\u00e3o do rastreamento longitudinal na Figura 10. Observe\nque atualiza-se umin e umax para u?min e u?max de forma que as extremidades\ndo duto fiquem sobre as regi\u00f5es brancas do padr\u00e3o.\n\n?\n\n?\n????\n?\n\n????\n?\n\n? = 1 + ?(?;??)\n\n? = ?(?; ??)\n\n1\n\n0\n\nFonte: O autor.\n\nAp\u00f3s computar o ajuste da curva superior e inferior, \u00e9 preciso ajustar a proje\u00e7\u00e3o do\nEMD. Para isso considera-se que o eixo medial sofreu o mesmo deslocamento na imagem\nque a curva superior e inferior. Esta aproxima\u00e7\u00e3o \u00e9 admiss\u00edvel, pois o movimento do duto\ne da c\u00e2mera entre dois quadros do v\u00eddeo s\u00e3o muito pequenos. Logo\n\nx?(t) = x(t) + ?(L(t); q?)v(t). (5.15)\n\ndetermina a equa\u00e7\u00e3o da curva rastreada.\n\nA Figura 12 ilustra o resultado do rastreamento transversal se este fosse realizado\nna Figura 11. As linhas pontilhadas representam a curva superior e inferior que foram\najustadas para maximizar a energia da regi\u00e3o contida entre elas. A partir da Eq. 5.15 o\najuste encontrado pode ser mapeado para o eixo medial e o resultado x? pode ser obtido\nna imagem da Figura 7b.\n\n5.6 APROXIMA\u00c7\u00d5ES\nO algoritmo de rastreamento faz uso de algumas aproxima\u00e7\u00f5es para obter uma\n\nformula\u00e7\u00e3o simples e eficiente. S\u00e3o elas:\n\n\u2022 A espessura de R \u00e9 constante entre dois quadros consecutivos. Entretanto, se o duto\nse afastar ou se aproximar, esta espessura sofre varia\u00e7\u00e3o;\n\n\u2022 A cada itera\u00e7\u00e3o do rastreamento transversal Eq. 5.12 a forma da curva \u00e9 modificada,\npor\u00e9m os vetores v(t) s\u00e3o considerados constantes;\n\n\u2022 Admite-se que o deslocamento da curva superior e inferior \u00e9 o mesmo do EMD na\nimagem na Eq. 5.15.\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 52\n\n\u2022 A regi\u00e3o R \u00e9 encontrada por uma interpola\u00e7\u00e3o linear entre a curva superior e inferior,\npor\u00e9m essa parametriza\u00e7\u00e3o deveria seguir a proje\u00e7\u00e3o das circunfer\u00eancias das se\u00e7\u00f5es\ntransversais na imagem.\n\nEssas aproxima\u00e7\u00f5es podem ser consideradas aceit\u00e1veis porque o movimento relativo\nentre o duto e a c\u00e2mera \u00e9 muito pequeno entre dois quadros consecutivos. Por exemplo, a\nvaria\u00e7\u00e3o na espessura de R seria desprez\u00edvel. \u00c0 medida que o rastreamento \u00e9 realizado,\na reconstru\u00e7\u00e3o tamb\u00e9m atualiza todas as informa\u00e7\u00f5es consideradas constantes para o\nrastreamento (como posi\u00e7\u00e3o do duto no espa\u00e7o 3D) permitindo que no quadro seguinte o\nrastreamento n\u00e3o sofra ac\u00famulo de erro. Uma alternativa para amenizar essas aproxima\u00e7\u00f5es\n\u00e9 utilizar pir\u00e2mides (ANANDAN, 1989) e computar os dados em cada n\u00edvel.\n\n5.7 IMPLEMENTA\u00c7\u00c3O\nEssa se\u00e7\u00e3o tem por objetivo abordar aspectos pr\u00e1ticos da implementa\u00e7\u00e3o do\n\nalgoritmo de rastreamento descrito neste cap\u00edtulo. Um conjunto de passos descrevendo\ncada etapa do algoritmo ser\u00e1 apresentado. Vale ressaltar que o m\u00e9todo descrito pode ser\nimplementado de diversas formas, e apenas uma dessas est\u00e1 sendo apresentada no contexto\ndesta disserta\u00e7\u00e3o.\n\n1. Calcular a regi\u00e3o R.\n\na) O rastreamento recebe como entrada as calibra\u00e7\u00f5es das c\u00e2meras, um conjunto\nde pontos 2D xi e o plano ?. Os pontos e o plano s\u00e3o referentes ao resultado\nda curva no quadro anterior ou da inicializa\u00e7\u00e3o;\n\nb) Os pontos xi s\u00e3o retroprojetados em ? utilizando a calibra\u00e7\u00e3o da c\u00e2mera,\nobtendo o conjunto de pontos 3D Xi;\n\nc) Utilizando B-splines, aproximar Xi para uma equa\u00e7\u00e3o anal\u00edtica X(t) que repre-\nsenta o EMD.\n\nd) Definir um conjunto de par\u00e2metro ti para determinar os pontos X?i do EMD e\nsuas derivadas de forma que se tenha aproximadamente um ponto 3D por pixel\ndo EMD na imagem. Observe que os conjuntos Xi e X?i podem ter tamanhos\ndiferentes;\n\ne) Estimar os pontos da curva superior x+i , inferior x\n?\ni na imagem e a proje\u00e7\u00e3o do\n\nEMD x?i.\n\n2. Discretizar sj = ??s + j/l, onde l \u00e9 a espessura m\u00e1xima do duto na imagem, e\nui = L(ti) e computar a imagem T utilizando a Eq. 5.4. Empiricamente foi definido\n?s = 1 e ?u como sendo um d\u00e9cimo do comprimento da curva na imagem, dado que\n\n\n\nCap\u00edtulo 5. T\u00e9cnica proposta de rastreamento de dutos 53\n\nestes valores permitem que a imagem transformada contenha a proje\u00e7\u00e3o do duto\nmesmo quando ocorrem movimentos r\u00e1pidos da c\u00e2mera.\n\n3. Realizar o rastreamento longitudinal e obter u?min e u?max. Recomenda-se utilizar um\nvalor de ? pr\u00f3ximo da metade da espessura do duto na imagem.\n\n4. Realizar o rastreamento transversal para estimar q? considerando a regi\u00e3o delimitada\npor u?min e u?max.\n\n5. Computar e retornar os pontos x?i = xi? + ?(ti; q?)v(ti).\n\nForam utilizados dois n\u00edveis de pir\u00e2mide e em cada n\u00edvel s\u00e3o executados os passos\ndescritos acima.\n\nA B-spline utilizada no rastreamento transversal foi definida segundo a Se\u00e7\u00e3o\n6.5. O grau utilizado foi 3 e o n\u00famero de pontos de controle foi definido em fun\u00e7\u00e3o do\ncomprimento l e do di\u00e2metro D, ambos em pixels, do duto na imagem como sendo (?l)/D.\nA constante ? foi definida empiricamente como sendo 1.\n\n5.8 CONSIDERA\u00c7\u00d5ES FINAIS\nCom as simplifica\u00e7\u00f5es e aproxima\u00e7\u00f5es aplicadas, o algoritmo apresenta baixo custo\n\ncomputacional e converg\u00eancia em poucas itera\u00e7\u00f5es. Al\u00e9m disso, \u00e9 um m\u00e9todo facilmente\nparaleliz\u00e1vel, pois cada pixel pode ser computado independentemente. Uma an\u00e1lise do\nn\u00famero de itera\u00e7\u00f5es e tempo de execu\u00e7\u00e3o ser\u00e1 realizada no Cap\u00edtulo 7, onde s\u00e3o descritos\nos experimentos.\n\nEste algoritmo \u00e9 executado independentemente em cada imagem do par est\u00e9reo e\ngera para cada imagem um conjunto de pontos 2D que representam a proje\u00e7\u00e3o do EMD.\nA partir destes pontos, o algoritmo de reconstru\u00e7\u00e3o descrito no pr\u00f3ximo cap\u00edtulo estima\numa curva anal\u00edtica que descreve o EMD no espa\u00e7o.\n\n\n\n54\n\n6 T\u00c9CNICA PROPOSTA PARA RECONS-\nTRU\u00c7\u00c3O DE CURVAS PLANARES\n\nEste cap\u00edtulo descreve a t\u00e9cnica para reconstru\u00e7\u00e3o de curvas planares adaptada\npara o contexto dessa disserta\u00e7\u00e3o. Essa t\u00e9cnica \u00e9 executada ap\u00f3s o rastreamento das\nimagens esquerda e direita, que por sua vez, geram um conjunto de pontos 2D amostrais\nda proje\u00e7\u00e3o do EMD. O objetivo deste cap\u00edtulo \u00e9 propor uma t\u00e9cnica que reconstrua uma\ncurva planar \u00f3tima segundo o erro de reproje\u00e7\u00e3o a partir dos pontos de controle.\n\nPara atingir esse objetivo, foi realizada uma adapta\u00e7\u00e3o no algoritmo proposto\npor Xiao e Li (XIAO; LI, 2005), detalhado na Se\u00e7\u00e3o 6.1, utilizando a abordagem de\nbundle adjustment (TRIGGS et al., 2000) para reconstru\u00e7\u00e3o de NURBS. Baseando-se nas\nrestri\u00e7\u00f5es epipolares de imagens retificadas e na invari\u00e2ncia projetiva de NURBS, Xiao e\nLi mostraram como otimizar o erro de reproje\u00e7\u00e3o utilizando o algoritmo de Levenberg-\nMarquardt. Esta adapta\u00e7\u00e3o visa tornar a reconstru\u00e7\u00e3o do EMD mais acurada, pois utiliza\na restri\u00e7\u00e3o de planaridade da curva.\n\nComo descrito na Se\u00e7\u00e3o 2.2, a forma pela qual o duto \u00e9 suspenso faz com que seu\neixo medial esteja contido em um plano. Sendo assim, o algoritmo de reconstru\u00e7\u00e3o explora\nessa restri\u00e7\u00e3o para obter resultados mais acurados, como explicado na Se\u00e7\u00e3o 6.2. A Se\u00e7\u00e3o\n6.3 apresenta como essa modifica\u00e7\u00e3o foi adicionada \u00e0 abordagem de Xiao e Li.\n\nComo os pontos amostrais providos pelo rastreamento s\u00e3o ordenados e igualmente\nespa\u00e7ados, o procedimento de parametriza\u00e7\u00e3o \u00e9 simplificado. Por\u00e9m \u00e9 preciso levar em\nconsidera\u00e7\u00e3o que n\u00e3o necessariamente os mesmos segmentos de curvas s\u00e3o rastreados em\nambas as imagens. Estas quest\u00f5es s\u00e3o tratadas na Se\u00e7\u00e3o 6.4 que detalha como deve ser\nrealizada a parametriza\u00e7\u00e3o.\n\nA fim de se obter acur\u00e1cia na geometria da curva reconstru\u00edda, a Se\u00e7\u00e3o 6.5 detalha\ncomo calcular o n\u00famero de pontos de controle utilizados na curva. Detalhes do algoritmo\nde reconstru\u00e7\u00e3o s\u00e3o apresentados na Se\u00e7\u00e3o 6.6.\n\nDiversos fatores inerentes ao cen\u00e1rio (dist\u00e2ncia entre as c\u00e2meras e o duto, par\u00e2metros\nintr\u00ednsecos das c\u00e2meras, etc.) influenciam a acur\u00e1cia da curva reconstru\u00edda. A Se\u00e7\u00e3o 6.7\nrealiza uma an\u00e1lise de alguns desses fatores e aborda conclus\u00f5es fundamentais sobre o\ncorreto posicionamento das c\u00e2meras em rela\u00e7\u00e3o ao duto. Por fim, a Se\u00e7\u00e3o 6.8 apresenta as\nconsidera\u00e7\u00f5es finais do cap\u00edtulo.\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 55\n\n6.1 RECONSTRU\u00c7\u00c3O EST\u00c9REO DE NURBS\nComo a t\u00e9cnica proposta se baseia no algoritmo de Xiao e Li (XIAO; LI, 2005),\n\nesta se\u00e7\u00e3o introduz o algoritmo e a pr\u00f3xima se\u00e7\u00e3o apresenta as adapta\u00e7\u00f5es realizadas. O\nalgoritmo de Xiao e Li efetua a reconstru\u00e7\u00e3o anal\u00edtica de uma curva NURBS X(t) = ?(t; Q)\nno espa\u00e7o 3D. O algoritmo recebe como entrada pontos amostrais em um par est\u00e9reo\nde c\u00e2meras calibradas. A matriz Q corresponde aos pontos de controle e os pontos xi,\ni = 0, . . . ,n? 1 e x?j, j = 0, . . . ,m? 1 correspondem \u00e0s amostras da proje\u00e7\u00e3o da curva\nna imagem esquerda e direita, respectivamente. Os pontos xi e x?j s\u00e3o expressos em\ncoordenadas homog\u00eaneas assim como o contradom\u00ednio das fun\u00e7\u00f5es vetoriais ?(\u00b7; \u00b7) e X(\u00b7).\n\nA formula\u00e7\u00e3o do problema consiste em otimizar a fun\u00e7\u00e3o de custo\n?\ni\n\nd(x(ti), xi)2 +\n?\nj\n\nd(x?(tj), x?j)\n2, (6.1)\n\nonde x(t) e x?(t) s\u00e3o as proje\u00e7\u00f5es da curva X(t) na imagem esquerda e direita, respectiva-\nmente. A parametriza\u00e7\u00e3o de cada ponto amostral \u00e9 dada por ti e tj ao longo da curva e\nd(\u00b7, \u00b7) computa a dist\u00e2ncia euclidiana entre dois pontos em coordenadas homog\u00eaneas. Essa\nabordagem trata-se de um bundle adjustment, pois minimiza a dist\u00e2ncia da proje\u00e7\u00e3o das\ncurvas em rela\u00e7\u00e3o aos pontos amostrais.\n\nDe acordo com a Se\u00e7\u00e3o 4.3.2, as curvas projetadas x(t) e x?(t) tamb\u00e9m s\u00e3o NURBS\ndado que essa classe de curvas \u00e9 invariante a proje\u00e7\u00e3o em perspectiva. Logo, \u00e9 estabelecido\nque x(t) = ?(t; q) e x?(t) = ?(t; q?), onde q e q? s\u00e3o os pontos de controle das curvas\nprojetadas. Ainda segundo a Se\u00e7\u00e3o 4.3.2, tem-se que q = PQ e q? = P?Q, onde P e P?\n\ncorrespondem \u00e0s matrizes de proje\u00e7\u00e3o da c\u00e2mera esquerda e direita, respectivamente.\n\nComo exposto anteriormente, a solu\u00e7\u00e3o pode ser alcan\u00e7ada otimizando-se a Eq. 6.1\ne variando os elementos de Q e os par\u00e2metros ti e tj. Para tornar a fun\u00e7\u00e3o de custo 6.1\nmais simples, Xiao e Li propuseram retificar os pontos x e x?, obtendo-se os pontos x? e x??,\nrespectivamente, para facilitar o uso das restri\u00e7\u00f5es epipolares.\n\nAo considerar que o par de c\u00e2meras est\u00e1 calibrado, a retifica\u00e7\u00e3o das imagens pelo\nalgoritmo proposto em (FUSIELLO; TRUCCO; VERRI, 2000) \u00e9 equivalente a posicionar\nas c\u00e2meras paralelamente e igualar as suas matrizes intr\u00ednsecas Dessa forma, definem-se\nas matrizes de proje\u00e7\u00e3o como\n\nP? =\n\n?\n????\nfx 0 cx 0\n0 fy cy 0\n0 0 1 0\n\n?\n???? e P?? =\n\n?\n????\nfx 0 cx ?fx?\n0 fy cy 0\n0 0 1 0\n\n?\n???? , (6.2)\n\nonde fx e fy s\u00e3o os focos da c\u00e2mera nas dire\u00e7\u00f5es x e y respectivamente, [cx,cy]> \u00e9 o ponto\ncentral e ? \u00e9 a dist\u00e2ncia entre as duas c\u00e2meras.\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 56\n\nProjetando cada ponto de controle Qk = [Qkx,Qky,Qkz,Qkw]T , k = 0, . . . ,? ? 1\n(correspondente \u00e0 k-\u00e9sima coluna Q) nas imagens atrav\u00e9s das matrizes de proje\u00e7\u00f5es da Eq.\n6.2, obt\u00e9m-se os pontos de controle qk e q?k (que formam as matrizes q e q?) segundo\n\nqk =\n\n?\n????\nqkx\n\nqky\n\nqkw\n\n?\n???? = P?Qk =\n\n?\n????\nfxQ\n\nk\nx + cxQkz\n\nfyQ\nk\ny + cyQkz\nQkz\n\n?\n???? (6.3)\n\ne\n\nq?k =\n\n?\n????\nq?kx\n\nq?ky\n\nq?kw\n\n?\n???? = P??Qk =\n\n?\n????\nfx(Qkx ??Qkw) + cxQkz\n\nfyQ\nk\ny + cyQkz\nQkz\n\n?\n???? . (6.4)\n\nObserve que devido \u00e0 restri\u00e7\u00e3o epipolar, qky = q?ky e qkw = q?kw . Nesse contexto, a Eq\n6.1 \u00e9 modificada para\n\n?\ni\n\nd(?(ti; q), x?i)2 +\n?\nj\n\nd(?(tj; q?), x??j)\n2 (6.5)\n\ne pode ser otimizada utilizando o algoritmo de Levenberg-Marquardt. Como Xiao e Li\nsugerem que os pesos qkw devem ser dados pelo usu\u00e1rio, a Eq. 6.5 deve ser minimizada\nvariando-se os par\u00e2metros qkx, q?kx , qky, ti e tj. As coordenadas q?ky n\u00e3o precisam ser otimizadas\npois s\u00e3o iguais a qky. No total s\u00e3o otimizadas 3? + m + n vari\u00e1veis e como os par\u00e2metros\nti e tj aparecem apenas em duas equa\u00e7\u00f5es, o jacobiano da Eq. 6.5 consiste em uma\nmatriz esparsa. Utilizando t\u00e9cnicas de solu\u00e7\u00e3o de sistemas esparsos, pode-se computar o\npasso iterativo rapidamente. Entretanto s\u00e3o necess\u00e1rias muitas itera\u00e7\u00f5es para atingir a\nconverg\u00eancia, pois o problema se torna uma varia\u00e7\u00e3o de gradiente descendente e apresenta\nconverg\u00eancia linear (WANG; POTTMANN; LIU, 2006).\n\nAp\u00f3s calcular os pontos de controle das curvas projetadas q e q?, deve-se localizar\nos pontos de controle Q da NURBS no espa\u00e7o 3D. Para isso, deve-se resolver o sistema\nformado pela Eq. 6.3 e pela Eq. 6.4 para obter\n\nQ =\n\n?\n???????\nQkx\n\nQky\n\nQkz\n\nQkw\n\n?\n??????? =\n\n?\n???????\n\nqkx?cxqkw\nfx\n\nqky?cyqkw\nfy\n\nqkw\nfx?\n\nq?kx ?qkx\n\n?\n??????? . (6.6)\n\nComo apenas a propriedade epipolar \u00e9 empregada, n\u00e3o h\u00e1 restri\u00e7\u00f5es quanto \u00e0s\ncoordenadas x dos pontos de controle em imagens retificadas. Isto permite a reconstru\u00e7\u00e3o\nde curvas gen\u00e9ricas no espa\u00e7o 3D. A pr\u00f3xima se\u00e7\u00e3o detalha outras restri\u00e7\u00f5es que podem\nser adicionadas ao problema para que a curva reconstru\u00edda esteja contida em um plano.\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 57\n\nFigura 13 \u2013 Regi\u00e3o de incerteza na triangula\u00e7\u00e3o de um ponto [X,Z]> em um espa\u00e7o\nbidimensional a partir de duas c\u00e2meras paralelas afastadas por uma dist\u00e2ncia\nd. Devido ao erro na observa\u00e7\u00e3o e, o ponto pode ser reconstru\u00eddo em uma\nregi\u00e3o de incerteza (regi\u00e3o preenchida com azul). O erro do ponto reconstru\u00eddo\nno eixo das abscissas \u00e9 eX e e+Z e e\n\n?\nZ no eixo das ordenadas (o erro eX \u00e9 igual\n\npara ambos os lados).\n\n??\n\n???\n\n??+\n\n??\n\n?\n\n?\n\n?\n\n??\n\nFonte: O autor.\n\n6.2 RESTRI\u00c7\u00c3O DE PLANARIDADE DA CURVA\nA aplica\u00e7\u00e3o do m\u00e9todo de Xiao e Li permite a reconstru\u00e7\u00e3o de uma curva NURBS\n\nque representa o EMD, entretanto a reconstru\u00e7\u00e3o tende a apresentar um resultado impreciso\ndevido \u00e0 dist\u00e2ncia do duto ao par de c\u00e2meras. Para mitigar esta dificuldade, a proposta\ndesta disserta\u00e7\u00e3o \u00e9 utilizar a restri\u00e7\u00e3o de planaridade da curva para diminuir o n\u00famero de\ngraus de liberdade do problema e alcan\u00e7ar um resultado mais acurado.\n\nPara simplificar essa explana\u00e7\u00e3o, ser\u00e1 considerada uma analogia com a reconstru\u00e7\u00e3o\nde um segmento de reta L em um espa\u00e7o bidimensional onde o eixo Y foi suprimido. Sendo\nassim, dado um ponto X = [X,Z]> pertencente ao segmento de reta L, sua imagem ser\u00e1\ndenotada por x na c\u00e2mera esquerda e x? na c\u00e2mera direita. Considerando-se que os pontos\nobservados x? e x?? possuem um erro e em rela\u00e7\u00e3o \u00e0 sua verdadeira posi\u00e7\u00e3o (ser\u00e1 admitido\nque correspond\u00eancias de pontos nas duas imagens est\u00e3o sujeitas ao mesmo erro), ent\u00e3o\nx? = x + e e x?? = x? + e. Desprezando outras fontes de erros no sistema (calibra\u00e7\u00e3o da\nc\u00e2mera, distor\u00e7\u00e3o radial, etc.), podemos estabelecer que o erro inerente \u00e0 observa\u00e7\u00e3o de\num ponto gera uma regi\u00e3o de incerteza do ponto reconstru\u00eddo, como ilustrado na Figura\n13. Atrav\u00e9s da fronteira dessa regi\u00e3o, \u00e9 definido que o erro m\u00e1ximo no eixo X \u00e9 eX e no\neixo Z \u00e9 e+Z e e\n\n?\nZ.\n\nUtilizando os dados do cen\u00e1rio apresentado na Se\u00e7\u00e3o 2 e estipulando e = \u00b10.5 pixel,\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 58\n\nFigura 14 \u2013 Gr\u00e1fico do erro na triangula\u00e7\u00e3o de um ponto. Considerando as caracter\u00edsticas\ndo cen\u00e1rio real, ou seja, d = 0.8 metros e f = 530 pixels, \u00e9 estimado o\ncomportamento dos erros eX e e+Z e e\n\n?\nZ em fun\u00e7\u00e3o da dist\u00e2ncia dos pontos \u00e0s\n\nc\u00e2meras. O erro no eixo X pode ser considerado desprez\u00edvel em rela\u00e7\u00e3o ao\neixo Z \u00e0 medida que o ponto se afasta da c\u00e2mera.\n\nZ (metros)\n2 4 6 8 10 12 14 16 18 20\n\nE\nrr\no\n(m\n\net\nro\ns)\n\n0\n\n0.2\n\n0.4\n\n0.6\n\n0.8\n\n1\n\ne\n+\nZ\n\ne\n?\n\nZ\n\neX\n\nFonte: O autor.\n\npode-se determinar os valores eX, e+Z e e\n?\nZ em fun\u00e7\u00e3o da dist\u00e2ncia do ponto \u00e0s c\u00e2meras,\n\ncomo ilustrado na Figura 14. Com base nesse gr\u00e1fico, conclui-se que eX \u00e9 muito menor\nque e+Z e e\n\n?\nZ e por esse motivo ser\u00e1 considerado desprez\u00edvel nas pr\u00f3ximas an\u00e1lises.\n\nPor conseguinte, a regi\u00e3o de incerteza da reconstru\u00e7\u00e3o do segmento L \u00e9 dada pela\nuni\u00e3o das regi\u00f5es de incerteza de seus pontos, como ilustrado na Figura 15 atrav\u00e9s do\ntrap\u00e9zio de cor azul. A curva ? reconstru\u00edda pelo algoritmo de Xiao e Li tende a apresentar\num erro de reconstru\u00e7\u00e3o muito maior na dire\u00e7\u00e3o do eixo Z, como ilustrado atrav\u00e9s da linha\nvermelha na Figura 15. Ao se utilizar a restri\u00e7\u00e3o de planaridade do EMD no problema, a\ncurva reconstru\u00edda \u00e9 sempre planar impedindo este comportamento.\n\nOutra alternativa para resolver esse problema seria projetar a curva reconstru\u00edda\npelo m\u00e9todo de Xiao e Li no plano dominante da curva e assim obter uma curva plana para\nrepresentar o EMD. Por\u00e9m, este m\u00e9todo fornece um resultado n\u00e3o \u00f3timo em rela\u00e7\u00e3o ao\nerro de reproje\u00e7\u00e3o. A adapta\u00e7\u00e3o proposta, descrita na pr\u00f3xima se\u00e7\u00e3o, permite determinar\numa NURBS que seja plana e ao mesmo tempo seja \u00f3tima.\n\n6.3 IMPONDO A RESTRI\u00c7\u00c3O DE PLANARIDADE\nDe acordo com o cen\u00e1rio do problema (Se\u00e7\u00e3o 2.2), admite-se que a curva X(t)\n\nque descreve o EMD est\u00e1 contida em um plano, como ilustrado na Figura 16. Logo, as\nproje\u00e7\u00f5es de X(t) nas imagens esquerda e direita est\u00e3o relacionadas por uma homografia\nH. Em outras palavras,\n\nx?(t) = Hx(t). (6.7)\n\nDe acordo com a Se\u00e7\u00e3o 4.2.4, como os pontos x? e x?? est\u00e3o retificados, a homografia\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 59\n\nFigura 15 \u2013 Incerteza na reconstru\u00e7\u00e3o da curva pelo m\u00e9todo de Xiao e Li. Dada a incerteza\npresente no eixo Z na reconstru\u00e7\u00e3o de um ponto, a curva reconstru\u00edda ?\ntende a apresentar um erro consider\u00e1vel em rela\u00e7\u00e3o ao segmento L. O trap\u00e9zio\nem azul representa a regi\u00e3o de incerteza em que o segmento reta L pode ser\nreconstru\u00eddo.\n\n?\n\n?\n\n?\n?\n\nFonte: O autor.\n\nFigura 16 \u2013 Ilustra\u00e7\u00e3o da proje\u00e7\u00e3o de uma curva planar em um par de c\u00e2meras est\u00e9reo. De\nforma ilustrativa, mostra-se que os pontos da curva (ponto na forma de c\u00edrculo)\nsofrem a mesma opera\u00e7\u00e3o de proje\u00e7\u00e3o que os pontos de controle (ponto na\nforma de \u00d7). Eles est\u00e3o sujeitos tamb\u00e9m as mesmas restri\u00e7\u00f5es epipolares,\ncomo ilustrado atrav\u00e9s da linhas epipolares em azul.\n\n?(??)\n\n?(??) ??(??)\n\n?\n\n?(??)\n\n??\n\n??+?\n\n??+?\n\n??\n\n??+?\n\n??+?\n\n???+?\n\n???+?\n\n???\n\nFonte: O autor.\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 60\n\nH consiste em uma afinidade da forma\n\nH =\n\n?\n????\na b c\n\n0 1 0\n0 0 1\n\n?\n???? . (6.8)\n\nComo mostrado na Se\u00e7\u00e3o 4.3.2, os pontos de controle sofrem a mesma transforma\u00e7\u00e3o no\nespa\u00e7o projetivo que os pontos da curva. Portanto \u00e9 definida a rela\u00e7\u00e3o\n\nq? = Hq. (6.9)\n\nCombinando a Eq.6.8 e a Eq. 6.9 s\u00e3o obtidas as express\u00f5es:\n\nq?kx = a q\nk\nx + b q\n\nk\ny + c q\n\nk\nw\n\nq?ky = q\nk\ny\n\nq?kw = q\nk\nw\n\n. (6.10)\n\nObserve que a restri\u00e7\u00e3o epipolar foi mantida, pois qky = q?ky e qkw = q?kw , e foi\nincorporada uma restri\u00e7\u00e3o entre qkx e q?kx que n\u00e3o existia anteriormente. Em outras palavras,\nos pontos de controle da curva na imagem direita podem ser parametrizados em fun\u00e7\u00e3o dos\npontos de controle da curva na imagem esquerda atrav\u00e9s de a, b e c. Logo, a Eq. 6.5 pode\nser otimizada variando-se qkx, qky, ti, tj, a, b e c, totalizando 2? + m + n + 3 vari\u00e1veis. Com\nesta modifica\u00e7\u00e3o, a curva X(t), obtida pela Eq. 6.6, ser\u00e1 planar, atendendo a restri\u00e7\u00e3o de\nplanaridade do EMD.\n\nA Figura 16 ilustra a modifica\u00e7\u00e3o realizada na ideia de Xiao e Li para que a NURBS\nreconstru\u00edda esteja contida em um plano. No exemplo da imagem, o ponto x(ti) n\u00e3o possui\ncorrespondente na imagem direita e nem x?(tj) possui correspondente na imagem esquerda.\nEmbora n\u00e3o seja poss\u00edvel estabelecer correspond\u00eancias entre os pontos x?i e x??j, os pontos de\ncontrole (qk e q?k) obedecem \u00e0s restri\u00e7\u00f5es epipolares que podem ser exploradas. Otimizando\na proje\u00e7\u00e3o de cada ponto amostral ao longo da curva atrav\u00e9s do par\u00e2metro t, pode-se\ndeterminar uma solu\u00e7\u00e3o \u00f3tima. Para o caso em que a curva X(t) for planar, basta utilizar\na restri\u00e7\u00e3o da Eq. 6.10 para otimizar o erro de reproje\u00e7\u00e3o.\n\n6.4 PARAMETRIZA\u00c7\u00c3O DA CURVA\nAntes de otimizar a Eq. 6.5 dada as restri\u00e7\u00f5es da Eq. 6.10, \u00e9 preciso estabelecer uma\n\nparametriza\u00e7\u00e3o ao longo da curva para os pontos amostrais xi e x?i. Ou seja, determinar\num conjunto de par\u00e2metros ti e tj no intervalo [tmin, tmax] para cada ponto amostral. Os\npontos fornecidos pelo algoritmo de rastreamento est\u00e3o ordenados e t\u00eam aproximadamente\na dist\u00e2ncia fixa (igual a 1 pixel) e regular a cada dois pontos. Logo, utilizar parametriza\u00e7\u00e3o\nuniforme daria resultados semelhantes aos obtidos pela parametriza\u00e7\u00e3o das cordas e pela\ncentr\u00edpeta.\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 61\n\nFigura 17 \u2013 Ilustra\u00e7\u00e3o de imagens com trechos diferentes de duto sendo rastreados. As\nlinhas azuis delimitam a por\u00e7\u00e3o comum entre os pontos amostrais. Utilizando\na restri\u00e7\u00e3o de planaridade da curva \u00e9 poss\u00edvel reconstruir todos os pontos\nrastreados, considerando-se que todos os pontos devem estar contidos em um\nmesmo plano.\n\nImagem Esquerda Imagem Direita\n\nFonte: O autor.\n\nEmbora as curvas (uma por imagem) possam ser parametrizadas independente-\nmente, uma parametriza\u00e7\u00e3o comum a ambas foi empregada visto que elas est\u00e3o associadas\na uma mesma curva no espa\u00e7o 3D. Como trechos diferentes do duto podem ser rastreados\nnas imagens esquerda e direita, \u00e9 preciso atrav\u00e9s dos par\u00e2metros informar que trecho da\ncurva reconstru\u00edda pertence a cada ponto amostral. Essa situa\u00e7\u00e3o \u00e9 ilustrada na Figura\n17, onde trechos diferentes foram rastreados nas imagens da direita e da esquerda. Note\nque se for dado o par\u00e2metro tmin para o primeiro ponto amostral na imagem esquerda, o\nprimeiro ponto na imagem direita deve ter um par\u00e2metro associado bem maior que tmin.\nEntretanto espera-se que as intersec\u00e7\u00f5es das curvas com as linhas azuis possuam a mesma\nparametriza\u00e7\u00e3o.\n\nPara se obter os par\u00e2metros pode-se partir de uma parametriza\u00e7\u00e3o ui na imagem\nesquerda e uj para a imagem direita entre [0, 1]. Com o intuito de tornar as parametriza\u00e7\u00f5es\ncompat\u00edveis, os valores em ui e uj podem ser escalados e transladados. Para isso, pode-se\ndefinir a, b, c e d de forma que\n\nti = aui + b\n\ntj = cuj + d.\n(6.11)\n\nPara determinar a, b, c e d pode-se definir um conjunto de restri\u00e7\u00f5es simples que\npodem ser resolvidas atrav\u00e9s de um sistema linear. No exemplo da Figura 17, o primeiro\nponto da curva na imagem esquerda deve ser parametrizado como tmin e o \u00faltimo da\nimagem direita como tmax. Al\u00e9m disso, os pontos amostrais sobre as linhas pontilhadas\ndevem ter a mesma parametriza\u00e7\u00e3o.\n\nPara definir os pontos sobre as linhas pontilhadas pode-se utilizar o fato de que\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 62\n\nambas as curvas s\u00e3o relacionadas por uma homografia. Aplicando-se a homografia nos\npontos da imagem esquerda, as curvas ficar\u00e3o aproximadamente sobrepostas. Portanto,\nbusca-se o ponto mais pr\u00f3ximo na curva esquerda para cada extremidade da curva da\ndireita, e vice-versa, para determinar as intersec\u00e7\u00f5es da curva com as linhas azuis. Como\neste passo \u00e9 realizado antes da otimiza\u00e7\u00e3o, a homografia do quadro anterior pode ser usada\ncomo aproxima\u00e7\u00e3o. O procedimento descrito serve como aproxima\u00e7\u00e3o para inicializar o\nalgoritmo de otimiza\u00e7\u00e3o e ap\u00f3s a converg\u00eancia \u00e9 obtida uma parametriza\u00e7\u00e3o \u00f3tima para\ncada curva.\n\nNote que trechos do duto que n\u00e3o est\u00e3o sendo rastreados em ambas as imagens\nest\u00e3o sendo parametrizados e ser\u00e3o reconstru\u00eddos. Isso \u00e9 poss\u00edvel pois admite-se que a\ncurva est\u00e1 contida em um plano. Os trechos do duto rastreados nas duas imagens s\u00e3o\nsuficientes para determinar o plano e os segmentos s\u00e3o naturalmente retroprojetados neste\nplano durante a otimiza\u00e7\u00e3o. Por\u00e9m, quanto menor for o trecho comum nas duas imagens,\nmenor deve ser a acur\u00e1cia da reconstru\u00e7\u00e3o, pois haver\u00e1 menos informa\u00e7\u00e3o para estimar\ncorretamente o plano.\n\n6.5 N\u00daMERO DE PONTOS DE CONTROLE\nA curva que representa o EMD \u00e9 suave e geralmente apresenta uma ou duas\n\nmudan\u00e7as de concavidade. Logo \u00e9 esperado que poucos pontos de controle sejam necess\u00e1rios\npara representar corretamente a curva. Contudo, foram geradas conclus\u00f5es diferentes ap\u00f3s\nser realizada uma an\u00e1lise em exemplos de curvas que descrevem EMD calculadas a partir\nde simula\u00e7\u00f5es f\u00edsicas .\n\nAo utilizar uma B-spline c\u00fabica com 4 a 6 pontos de controle, foi obtido um\nSSE (sum squared error) baixo, indicando um bom ajuste de curva. Por\u00e9m, m\u00e9tricas\nmais sens\u00edveis, como a curvatura apresentaram uma grande discrep\u00e2ncia, mostrando\nque essa abordagem n\u00e3o \u00e9 suficientemente acurada para aplica\u00e7\u00e3o de interesse. Como o\nresultado da reconstru\u00e7\u00e3o \u00e9 utilizado por aplica\u00e7\u00f5es que requerem precis\u00e3o, \u00e9 necess\u00e1ria\numa aproxima\u00e7\u00e3o melhor para o EMD.\n\nValores mais acurados de curvatura (erro menor que 0.1% em rela\u00e7\u00e3o ao valor\nde curvatura m\u00e1xima) foram alcan\u00e7ados quando muitos pontos de controle ou um grau\nelevado (6 ou mais) foi usado. Entretanto, constatou-se que graus elevados acarretavam\nem instabilidade e perda de performance. Dessa forma, optou-se por utilizar o grau igual a\n3. Ao observar-se que a suavidade da curva \u00e9 dependente do di\u00e2metro D do duto (quanto\nmaior o di\u00e2metro maior a resist\u00eancia a flex\u00e3o), o n\u00famero de pontos de controle n foi\ndefinido como\n\nn =\n?L\n\nD\n, (6.12)\n\nonde L \u00e9 o comprimento do duto rastreado e ? \u00e9 uma constante. Testes emp\u00edricos mostraram\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 63\n\nque um bom valor para ? \u00e9 2.\n\n6.6 ALGORITMO\nO passo-a-passo do algoritmo utilizado para determinar a curva reconstru\u00edda est\u00e1\n\ndescrito a seguir. A entrada s\u00e3o os pontos rastreados nas imagens da esquerda e da direita\nxi e x?j, respectivamente, e o plano ? do duto obtido a partir do \u00faltimo quadro. Os pontos\ns\u00e3o previamente retificados.\n\n1. Utilizando a calibra\u00e7\u00e3o das c\u00e2meras e o plano estimado durante a reconstru\u00e7\u00e3o do\nquadro anterior, estimar H segundo a Eq. 4.12. Note que, como os pontos est\u00e3o\nretificados, a matriz H tem a forma da Eq. 6.8;\n\n2. Determinar os par\u00e2metros ti e tj segundo a Se\u00e7\u00e3o 6.4 utilizando H;\n\n3. Mapear os pontos da imagem direita para a imagem esquerda utilizando H. Ou seja,\ndefinir x?j = H?1xj;\n\n4. Ajustar simultaneamente os pontos xi e x?j para uma B-spline (ou seja, qw(i) =\nq?w(i) = 1) de forma linear, para obter n pontos de controle que formam as colunas\nda matriz q. O valor de n \u00e9 dado pela Eq. 6.12;\n\n5. Otimizar os valores de q, a, b e c, ti e tj na Eq. 6.1 com o algoritmo de Levenberg-\nMarquardt respeitando as restri\u00e7\u00f5es dadas em 6.10. Os valores de a, b e c devem ser\ninicializados a partir de H;\n\n6. Calcular os pontos de controle Q da curva 3D segundo a Eq. 6.6;\n\n7. Determinar o plano da curva dados os novos valores de a, b e c, ap\u00f3s resolver a Eq.\n4.12.\n\nO retorno do algoritmo consiste na NURBS governada pelos pontos de controle Q\ne o plano em que a curva est\u00e1 contida. Este plano ser\u00e1 utilizado no quadro seguinte para\ndeterminar a regi\u00e3o de proje\u00e7\u00e3o do duto pelo algoritmo de rastreamento.\n\nO algoritmo de reconstru\u00e7\u00e3o da curva \u00e9 de simples implementa\u00e7\u00e3o e similar ao\nde Xiao e Li. Embora o algoritmo apresente converg\u00eancia lenta, como argumentado em\n(WANG; POTTMANN; LIU, 2006), a forma suave da curva permite que em poucas\nitera\u00e7\u00f5es seja obtido um residual pr\u00f3ximo ao m\u00ednimo global. As itera\u00e7\u00f5es subsequentes\nmelhoram muito pouco o erro e a varia\u00e7\u00e3o \u00e9 muito pequena na posi\u00e7\u00e3o dos pontos de\ncontrole. Mais detalhes sobre a converg\u00eancia do algoritmo s\u00e3o dados na Se\u00e7\u00e3o 7.5.2.\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 64\n\nFigura 18 \u2013 Obliquidade \u00e9 definida como o \u00e2ngulo ? entre o eixo \u00f3ptico da c\u00e2mera centrada\nem C e o vetor normal N do plano.\n\n?\n?\n\n?\n\nFonte: O autor.\n\n6.7 FATORES QUE INFLUENCIAM A ACUR\u00c1CIA DA CURVA\nRECONSTRU\u00cdDA\nExistem diversas vari\u00e1veis atreladas ao cen\u00e1rio que podem influenciar o resultado\n\nda reconstru\u00e7\u00e3o, como: os par\u00e2metros intr\u00ednsecos das c\u00e2meras, a dist\u00e2ncia entre as c\u00e2meras,\na dist\u00e2ncia entre o duto e a c\u00e2mera, a posi\u00e7\u00e3o de observa\u00e7\u00e3o do duto, a forma do EMD,\netc. Todas essas vari\u00e1veis podem impactar na precis\u00e3o da reconstru\u00e7\u00e3o, logo \u00e9 importante\nestud\u00e1-las para avaliar formas de tornar as imagens capturadas menos propensas a erros.\nCertas vari\u00e1veis n\u00e3o podem ser alteradas durante a opera\u00e7\u00e3o de instala\u00e7\u00e3o (como par\u00e2metro\ndas c\u00e2meras), j\u00e1 outras sim, como a posi\u00e7\u00e3o que c\u00e2mera visualiza o duto (pois depende do\noperador do ROV).\n\nEm um experimento realizado observou-se que dois fatores influenciam fortemente\na reconstru\u00e7\u00e3o do duto. O primeiro \u00e9 o \u00e2ngulo ? que a normal do plano da curva faz com\no eixo \u00f3ptico da c\u00e2mera. Esse \u00e2ngulo \u00e9 denominado obliquidade e est\u00e1 ilustrado na Figura\n18. Observe que, se os eixos \u00f3pticos das c\u00e2meras forem paralelos, a obliquidade medida\nser\u00e1 a mesma independentemente da c\u00e2mera escolhida. O segundo \u00e9 a magnitude das\ncomponentes principais que formam o duto.\n\nPara justificar a influ\u00eancia desses fatores ser\u00e1 utilizada a analogia da Se\u00e7\u00e3o 6.2, onde\nbusca-se reconstruir um segmento de reta L em uma vers\u00e3o bidimensional do problema.\nSalienta-se que um segmento de reta possui apenas uma componente principal tornando\nmais simples a explica\u00e7\u00e3o inicial, por\u00e9m, mais adiante o problema ser\u00e1 generalizado para\no caso tridimensional.\n\nEm virtude da incerteza de reconstru\u00e7\u00e3o de um ponto ser muito maior ao longo\ndo eixo Z, a regi\u00e3o de incerteza da reconstru\u00e7\u00e3o do segmento L \u00e9 dada pela uni\u00e3o das\nregi\u00f5es de incerteza de seus pontos, como ilustrado na Figura 19. Atrav\u00e9s da Figura 19b e\nda Figura 19c \u00e9 intuitivo perceber que \u00e0 medida que a obliquidade aumenta, a regi\u00e3o de\nincerteza se torna mais ou menos alongada, tornando assim maior a probabilidade de se\nreconstruir segmentos de maior ou menor comprimento. Sendo l o comprimento de L, l+ e\nl? podem ser definidos como o maior e o menor comprimento do segmento reconstru\u00eddo,\nrespectivamente. A varia\u00e7\u00e3o do comprimento do segmento ser\u00e1 adotada como m\u00e9trica do\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 65\n\nFigura 19 \u2013 Regi\u00e3o de incerteza da reconstru\u00e7\u00e3o de um segmento de reta. \u00c0 medida que a\nobliquidade aumenta, segmentos de reta maiores (L+) e menores (L?) passam\na pertencer \u00e0 regi\u00e3o de incerteza.\n\n?\n\n?\n?+ = ??\n\n?\n\n(a) Obliquidade igual a 0.\n\n?\n\n?\n?\n\n?+\n\n?\n\n(b) Maior segmento.\n\n?\n\n??\n\n?\n\n?\n\n?\n\n(c) Menor segmento.\n\nFonte: O autor.\n\nerro da reconstru\u00e7\u00e3o. Logo e+l = |l? l+|/l e e\n?\nl = |l? l?|/l.\n\nMesmo sendo poss\u00edvel calcular analiticamente e+l e e\n?\nl em fun\u00e7\u00e3o de ? e l, esse\n\nprocesso \u00e9 muito complexo. Por esse motivo, foram realizadas simula\u00e7\u00f5es em um cen\u00e1rio\nsint\u00e9tico similar ao da opera\u00e7\u00e3o. Dados como dist\u00e2ncia do objeto para a c\u00e2mera (Z), o\nfoco da c\u00e2mera e baseline (d) s\u00e3o considerados fixos, pois s\u00e3o intr\u00ednsecos ao problema. O\nerro inerente \u00e0 observa\u00e7\u00e3o foi considerado como e = 0.5 pixel.\n\nA partir dos resultados das simula\u00e7\u00f5es, ilustrados nos gr\u00e1ficos da Figura 20, \u00e9\nposs\u00edvel observar que a acur\u00e1cia da reconstru\u00e7\u00e3o \u00e9 sens\u00edvel a dois fatores: o comprimento\ndo segmento e a obliquidade. Quanto menor for o comprimento do segmento e maior a\nobliquidade, menor ser\u00e1 a acur\u00e1cia da reconstru\u00e7\u00e3o. Atrav\u00e9s da Figura 20c observa-se que\na influ\u00eancia de e \u00e9 praticamente linear sobre o erro do comprimento.\n\nGeneralizando a ideia para o caso tridimensional, o segmento L se torna uma\ncurva planar. Ent\u00e3o, ao inv\u00e9s do comprimento do duto, ser\u00e1 considerada a magnitude das\ncomponentes principais dos pontos que formam a curva. Estas componentes s\u00e3o obtidas\npelo algoritmo PCA \u2013 Principal Component Analysis (JOLLIFFE, 2002) aplicado aos\npontos da curva. A primeira componente principal corresponde ao eixo de maior vari\u00e2ncia\ne a segunda componente \u00e9 ortogonal \u00e0 primeira. Os referidos eixos s\u00e3o ilustrados na Figura\n21 e quanto maiores forem suas magnitudes, maior ser\u00e1 o comprimento do duto na dire\u00e7\u00e3o\ndo eixo.\n\nDe acordo com analogia entre o espa\u00e7o 2D e o 3D, o plano da curva ser\u00e1 mais\nesticado na dire\u00e7\u00e3o da segunda componente do que na primeira componente principal.\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 66\n\nFigura 20 \u2013 Gr\u00e1ficos do erro da reconstru\u00e7\u00e3o de um segmento de reta variando o compri-\nmento do segmento, a obliquidade e o erro associado \u00e0 medi\u00e7\u00e3o de pontos do\nsegmento.\n\nl (metros)\n1 2 3 4 5 6 7 8 9 10\n\nE\nrr\no\n(%\n\n)\n\n0\n\n5\n\n10\n\n15\n\n20\n\n25\n\n30\n\n35\n\n40\n\ne\n+\nL\ncom ? = 5?\n\ne\n?\n\nL\ncom ? = 5?\n\ne\n+\nL\ncom ? = 45?\n\ne\n?\n\nL\ncom ? = 45?\n\n(a) Obliquidade fixa e variando o compri-\nmento.\n\n? (?)\n0 10 20 30 40 50 60 70 80 90\n\nE\nrr\no\n(%\n\n)\n\n0\n\n2\n\n4\n\n6\n\n8\n\n10\n\n12\n\n14\n\n16\n\n18\n\ne\n+\nL\ncom l = 3 m\n\ne\n?\n\nL\ncom l = 3 m\n\ne\n+\nL\ncom l = 8 m\n\ne\n?\n\nL\ncom l = 8 m\n\n(b) Comprimento fixo e variando a obliqui-\ndade.\n\ne (pixels)\n0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1\n\nE\nrr\no\n(%\n\n)\n\n0\n\n5\n\n10\n\n15\n\n20\n\n25\n\n30\nl = 3 m, ? = 45?\n\ne\n+\nL\n\ne\n?\n\nL\n\n(c) Variando apenas o erro.\n\nFonte: O autor.\n\nFigura 21 \u2013 Ilustra\u00e7\u00e3o da primeira componente principal (em azul) e da segunda compo-\nnente principal (em vermelho) em dois exemplos de configura\u00e7\u00f5es de curva. As\ncomponentes foram obtidas atrav\u00e9s de uma an\u00e1lise de componentes principais\n(PCA - Principal Component Analysis).\n\nFonte: O autor.\n\n\n\nCap\u00edtulo 6. T\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares 67\n\nDesta maneira conclui-se que ser\u00e1 obtida uma menor precis\u00e3o se o duto for observado\nde pontos de vista obl\u00edquos e ao longo da segunda componente principal. Sendo assim,\nesses pontos de vista devem ser evitados. Como ilustrado na Figura 3, o trecho de duto\nanalisado tem maior comprimento na horizontal do que na vertical. Logo deve ser evitada\na visualiza\u00e7\u00e3o do duto de baixo para cima e de cima para baixo durante o processo de\nreconstru\u00e7\u00e3o. Entretanto, visualiza\u00e7\u00f5es laterais n\u00e3o devem impactar muito a acur\u00e1cia\nsegundo o gr\u00e1fico da Figura 20a.\n\nAl\u00e9m do erro inerente ao rastreamento dos pontos, deve-se tamb\u00e9m considerar\noutras fontes de erro. Um exemplo \u00e9 a imprecis\u00e3o da calibra\u00e7\u00e3o das c\u00e2meras. Quanto\nmaior for a obliquidade, maior ser\u00e1 o erro da reconstru\u00e7\u00e3o devido ao esticamento do plano.\n\n6.8 CONSIDERA\u00c7\u00d5ES FINAIS\nNeste cap\u00edtulo foi apresentado o algoritmo utilizado para reconstruir a curva\n\nanal\u00edtica que representa o EMD. Os pontos de controle obtidos representam analiticamente\na curva reconstru\u00edda que consiste no produto final dos algoritmos propostos. A partir dessa\ncurva ser\u00e3o realizadas as compara\u00e7\u00f5es com os modelos f\u00edsicos para verificar a seguran\u00e7a\nda opera\u00e7\u00e3o de instala\u00e7\u00e3o de dutos. No pr\u00f3ximo cap\u00edtulo ser\u00e3o relatados os experimentos\nque visam avaliar a acur\u00e1cia da curva reconstru\u00edda e o comportamento dos algoritmos\npropostos para verificar se eles atendem aos requisitos do cen\u00e1rio do problema.\n\n\n\n68\n\n7 RESULTADOS\n\nEste cap\u00edtulo relata os experimentos realizados com objetivo de validar os algoritmos\nde rastreamento e reconstru\u00e7\u00e3o do Eixo Medial do Duto (EMD). A Se\u00e7\u00e3o 7.1 descreve\naspectos gerais dos experimentos, como o hardware e a implementa\u00e7\u00e3o. Na Se\u00e7\u00e3o 7.2 \u00e9\ndetalhada a metodologia empregada para avalia\u00e7\u00e3o dos algoritmos.\n\nNa Se\u00e7\u00e3o 7.3 s\u00e3o relatados os experimentos realizados em laborat\u00f3rio. Estes experi-\nmentos permitiram a avalia\u00e7\u00e3o da geometria da curva reconstru\u00edda em ambiente controlado.\nA Se\u00e7\u00e3o 7.4 detalha os testes realizados em um cen\u00e1rio real da opera\u00e7\u00e3o. Embora a geo-\nmetria da curva n\u00e3o seja conhecida, foi poss\u00edvel avaliar a robustez do rastreamento. Uma\nan\u00e1lise do erro de reproje\u00e7\u00e3o, itera\u00e7\u00f5es e o tempo de execu\u00e7\u00e3o dos algoritmo \u00e9 realizada\nna Se\u00e7\u00e3o 7.5. Finalmente, a Se\u00e7\u00e3o 7.6 apresenta as considera\u00e7\u00f5es finais do cap\u00edtulo.\n\n7.1 IMPLEMENTA\u00c7\u00c3O\nA implementa\u00e7\u00e3o dos algoritmos propostos foi realizada em C++ e compilada pelo\n\nMicrosft Visual C++. Foram utilizadas as bibliotecas OpenCV (BRADSKI, 2000) para\nopera\u00e7\u00f5es b\u00e1sicas de processamento de imagem e Eigen (GUENNEBAUD; JACOB et al.,\n2010) para matrizes e rotinas de \u00e1lgebra linear. Embora paraleliz\u00e1veis, os algoritmos foram\nimplementados sequencialmente e o c\u00f3digo precisa de otimiza\u00e7\u00f5es. O hardware utilizado\npara os testes foi um notebook com processador Intel i7-4810MQ 2.80 GHz e 16 GB de\nmem\u00f3ria RAM.\n\n7.2 METODOLOGIA DOS EXPERIMENTOS\nEmbora as t\u00e9cnicas propostas sejam capazes de fornecer uma boa aproxima\u00e7\u00e3o\n\npara curvas gen\u00e9ricas, utilizou-se curvas que descrevem uma caten\u00e1ria nos testes. Medir\ncom exatid\u00e3o pontos de uma curva descrita por um duto arbitr\u00e1rio n\u00e3o \u00e9 uma tarefa\nsimples e muitas vezes \u00e9 imprecisa. Por este motivo, buscou-se modelar os dutos utilizados\nnos experimentos em laborat\u00f3rio como caten\u00e1rias (LOCKWOOD, 1971), pois essas curvas\ns\u00e3o facilmente produzidas em laborat\u00f3rio e possuem comportamento similar ao EMD real.\n\nA equa\u00e7\u00e3o de uma caten\u00e1ria no plano z = 0, parametrizada pelo comprimento s e\nque passa pela origem \u00e9 dada por\n\n?(s) =\n\n?\n????\naasenh(s/a)\n?\na2 + s2\n\n0\n\n?\n???? , (7.1)\n\n\n\nCap\u00edtulo 7. Resultados 69\n\nonde a \u00e9 uma medida chamada de amplitude e representa o raio de curvatura m\u00ednimo da\ncurva. O valor da amplitude \u00e9 facilmente obtido a partir de algumas medidas realizadas\nno duto (comprimento, dist\u00e2ncia entre extremidades, etc).\n\nSendo assim, para avaliar os resultados, ser\u00e3o utilizadas duas abordagens: a primeira\nconsiste no erro de reconstru\u00e7\u00e3o da curva, que avalia o qu\u00e3o pr\u00f3ximo a curva reconstru\u00edda\nest\u00e1 de uma caten\u00e1ria de amplitude conhecida; a segunda abordagem consiste em medir\no erro do plano reconstru\u00eddo e ser\u00e1 \u00fatil para avaliar a influ\u00eancia da obliquidade na\nreconstru\u00e7\u00e3o.\n\nPara verificar o erro de reconstru\u00e7\u00e3o da curva (ou simplesmente erro de reconstru\u00e7\u00e3o)\ns\u00e3o amostrados n pontos Xi, i = 0, . . . ,n? 1 na curva. O erro da reconstru\u00e7\u00e3o da curva \u00e9\ndefinido para cada ponto como\n\n?i = ||?(si) ? RXi + t||. (7.2)\n\nA matriz de rota\u00e7\u00e3o R e o vetor de transla\u00e7\u00e3o t localizam a posi\u00e7\u00e3o da curva em rela\u00e7\u00e3o \u00e0s\nc\u00e2meras e servem para computar a equa\u00e7\u00e3o do plano da curva. O par\u00e2metro si representa\no comprimento da curva no ponto Xi. Esses par\u00e2metros s\u00e3o calculados otimizando-se\n\narg min\nR,t,si\n\n?\ni\n\n?2i . (7.3)\n\nA Eq. 7.3 corresponde a um problema de ajuste de curva n\u00e3o linear e pode ser\nresolvida atrav\u00e9s do algoritmo de Levenberg-Marquardt que otimiza os par\u00e2metros si,\na rota\u00e7\u00e3o R e uma transla\u00e7\u00e3o t dos pontos reconstru\u00eddos. Esse processo busca ajustar\nos pontos de forma n\u00e3o linear a uma caten\u00e1ria no plano z = 0. O erro m\u00e9dio da curva\nreconstru\u00edda \u00e9 dado por\n\n?\ni |?i|/n enquanto o erro m\u00e1ximo \u00e9 dado por max(|?i|). O erro\n\nde reconstru\u00e7\u00e3o do plano \u00e9 dado pelo \u00e2ngulo entre o plano do gabarito utilizado e o plano\nestimado na reconstru\u00e7\u00e3o.\n\nPara avaliar o erro em um dado quadro, optou-se por utilizar as m\u00e9tricas de m\u00e9dia\naritm\u00e9tica e valor m\u00e1ximo. Para uma sequ\u00eancia de v\u00eddeo, utilizou-se a m\u00e9dia, o desvio\npadr\u00e3o, o valor m\u00e1ximo e uma m\u00e9dia aritm\u00e9tica do valor m\u00e1ximo em todos os quadros.\nTais m\u00e9tricas foram utilizadas porque atrav\u00e9s da m\u00e9dia \u00e9 poss\u00edvel estimar o comportamento\ndo erro. Os valores m\u00e1ximos permitem analisar o comportamento do erro nos piores casos.\n\n7.3 EXPERIMENTOS EM LABORAT\u00d3RIO\nEssa se\u00e7\u00e3o descreve dois conjuntos de experimentos realizados em laborat\u00f3rio. Como\n\nsimular o ambiente real n\u00e3o \u00e9 trivial devido \u00e0s dimens\u00f5es dos equipamentos envolvidos,\noptou-se pela cria\u00e7\u00e3o de um cen\u00e1rio com escala reduzida em 8.88 vezes. Os experimentos\nforam conduzidos em duas etapas: a primeira dentro d\u2019\u00e1gua e a segunda no ar. Embora\n\n\n\nCap\u00edtulo 7. Resultados 70\n\nFigura 22 \u2013 Suporte utilizado para movimenta\u00e7\u00e3o das c\u00e2meras.\n\nFonte: O autor.\n\nFigura 23 \u2013 Cen\u00e1rio criado para os experimentos em laborat\u00f3rio. A figura ilustra o par de\nc\u00e2meras est\u00e9reo fixados no suporte, o corpo de prova suspenso formando uma\ncaten\u00e1ria e o anteparo escuro para simular um fundo escuro.\n\nFonte: O autor.\n\nrealizadas em ambientes distintos, as duas etapas utilizaram o mesmo cen\u00e1rio como descrito\na seguir.\n\nDuas c\u00e2meras Kongsberg OE-15-101c foram usadas nos experimentos, sendo essas\ndo mesmo modelo e fabricante das que s\u00e3o utilizadas em opera\u00e7\u00f5es reais. As c\u00e2meras\nforam fixadas em um suporte, ilustrado na Figura 22, e ficaram afastadas 9 cent\u00edmetros\n(no cen\u00e1rio real as c\u00e2meras s\u00e3o afastadas 80 cent\u00edmetros). A calibra\u00e7\u00e3o intr\u00ednseca e do par\nest\u00e9reo foram realizadas antes dos testes.\n\nSeguindo a metodologia do experimento, o corpo de prova que representa o duto\ndeve ter seu eixo medial descrito por uma curva caten\u00e1ria. Portanto, a elabora\u00e7\u00e3o do\ncorpo de prova n\u00e3o foi uma tarefa simples. Dutos comuns apresentam certa rigidez \u00e0\nflex\u00e3o, impedindo assim que eles respeitem a forma de uma caten\u00e1ria. Para contornar esse\nproblema, o duto foi confeccionado utilizando uma corrente met\u00e1lica e espuma. A corrente\nde dois metros conferiu peso ao duto impondo a forma de uma caten\u00e1ria. A espuma branca\n\n\n\nCap\u00edtulo 7. Resultados 71\n\nde densidade muito baixa e perme\u00e1vel proporcionou a forma cil\u00edndrica de um duto de\n5.4 cent\u00edmetros de di\u00e2metro. Sec\u00e7\u00f5es cobertas com fita isolante permitiram a marca\u00e7\u00e3o\ndo padr\u00e3o de pintura com regi\u00f5es intercaladas de cores brancas e pretas ao longo de 1.6\nmetros de duto.\n\nPara simular as condi\u00e7\u00f5es de ilumina\u00e7\u00e3o submarinas, cujo background \u00e9 escuro,\nutilizou-se um anteparo de cor preto fosco atr\u00e1s do duto. Embora tenha-se utilizado a\nilumina\u00e7\u00e3o ambiente, foram obtidas imagens com caracter\u00edsticas similares \u00e0s reais, pois a\nregi\u00e3o em que estava o duto possuiu maior intensidade do que o background. O cen\u00e1rio\ndo experimento est\u00e1 ilustrado na Figura 23, onde pode-se observar as c\u00e2meras fixadas no\nsuporte, o duto e o anteparo de cor preta.\n\n7.3.1 Ambiente aqu\u00e1tico\n\nOs resultados foram obtidos atrav\u00e9s de experimentos realizados no tanque do\nlaborat\u00f3rio TES do Cenpes1. Todo o cen\u00e1rio (c\u00e2meras, duto e anteparo) foi mergulhado\nnesse tanque para realizar a captura de v\u00eddeos. A movimenta\u00e7\u00e3o das c\u00e2meras foi realizada\natrav\u00e9s de cabos e o posicionamento entre duto e c\u00e2mera n\u00e3o foi monitorado. Logo, apenas\na geometria da curva foi avaliada atrav\u00e9s das aferi\u00e7\u00f5es da amplitude da caten\u00e1ria.\n\nForam analisados quatro v\u00eddeos e os resultados s\u00e3o descritos nos pr\u00f3ximos t\u00f3picos\ne resumidos na Tabela 1.\n\n7.3.1.1 V\u00eddeo 1\n\nNo primeiro v\u00eddeo foi capturado um duto em forma de caten\u00e1ria com amplitude\nigual a 44.75 cent\u00edmetros. Um movimento vertical de subida e descida do duto foi realizado\ntr\u00eas vezes, enquanto a c\u00e2mera, posicionada a uma dist\u00e2ncia de 2.25 metros, permaneceu\nim\u00f3vel. Nesse v\u00eddeo foram capturados 1500 quadros e o resultado do rastreamento est\u00e1\nilustrado na Figura 24. O movimento realizado pelo duto \u00e9 pertinente para avalia\u00e7\u00e3o\ndada sua recorr\u00eancia em opera\u00e7\u00f5es de instala\u00e7\u00e3o. Devido \u00e0s ondas do mar, o barco sofre\ndeslocamentos verticais (heave) constantes que s\u00e3o propagados para o duto.\n\nO erro de reconstru\u00e7\u00e3o, apresentado no gr\u00e1fico da Figura 25, apresentou o resultado\nmais est\u00e1vel dentre os casos avaliados na \u00e1gua. O erro m\u00e1ximo foi inferior a 2 cent\u00edmetros\ne o erro m\u00e9dio de toda a filmagem foi igual a 2.1 mil\u00edmetros. O movimento suave do duto,\na \u00e1gua transparente e a baixa obliquidade (inferior a 5 graus) favoreceram a obten\u00e7\u00e3o de\num resultado acurado.\n1 O Cenpes (Centro de Pesquisa Leopoldo Am\u00e9rico de Mello) \u00e9 unidade da Petrobras respons\u00e1vel pelas\n\natividades de pesquisa e desenvolvimento.\n\n\n\nCap\u00edtulo 7. Resultados 72\n\nFigura 24 \u2013 Resultado do rastreamento em amostra de quadros do V\u00eddeo 1 capturado em\nambiente aqu\u00e1tico. O movimento suave do duto e a \u00e1gua limpa favoreceram\npara o correto rastreamento do EMD.\n\nQuadro 450 (Esquerda)\n\nQuadro 450 (Direita)\n\nQuadro 1 (Esquerda)\n\nQuadro 1 (Direita)\n\nQuadro 200 (Esquerda)\n\nQuadro 200 (Direita)\n\nFonte: O autor.\n\nFigura 25 \u2013 Gr\u00e1fico de erro da reconstru\u00e7\u00e3o obtido no V\u00eddeo 1 nos experimentos submersos.\nO erro m\u00e9dio ficou quase sempre abaixo de 4 mil\u00edmetros, por\u00e9m o erro m\u00e1ximo\nexcedeu 1 cent\u00edmetro em algumas ocasi\u00f5es.\n\nQuadros\n0 500 1000 1500\n\nE\nrr\n\no\n (\n\nce\nn\n\nt\u00ed\nm\n\ne\ntr\n\no\ns)\n\n0\n\n0.5\n\n1\n\n1.5\n\n2\n\nM\u00e9dio\nM\u00e1ximo\n\nFonte: O autor.\n\n\n\nCap\u00edtulo 7. Resultados 73\n\nFigura 26 \u2013 Resultado do rastreamento em amostra de quadros do V\u00eddeo 2 capturado em\nambiente aqu\u00e1tico. A \u00e1gua turva impede uma boa visualiza\u00e7\u00e3o do duto, por\u00e9m\nele ainda \u00e9 a regi\u00e3o mais clara da imagem, permitindo o correto rastreamento\nao longo do v\u00eddeo.\n\nQuadro 5 (Esquerda) Quadro 1000 (Esquerda)Quadro 500 (Esquerda)\n\nQuadro 500 (Direita) Quadro 1000 (Direita)Quadro 5 (Direita)\n\nFonte: O autor.\n\n7.3.1.2 V\u00eddeo 2\n\nNo segundo v\u00eddeo foi capturada uma sequ\u00eancia de 1000 quadros em um cen\u00e1rio de\n\u00e1gua turva (causada atrav\u00e9s da agita\u00e7\u00e3o da \u00e1gua), como ilustrado na Figura 26. O duto\napresenta a forma de uma caten\u00e1ria de 31.22 cent\u00edmetros de amplitude e esteve a uma\ndist\u00e2ncia m\u00e9dia de 95 cent\u00edmetros das c\u00e2meras. Note que o contraste na imagem \u00e9 muito\nbaixo e h\u00e1 pouca visibilidade. Por\u00e9m, a regi\u00e3o da imagem onde est\u00e1 o duto ainda possui\nmaior intensidade, permitindo assim que o algoritmo de rastreamento determine a posi\u00e7\u00e3o\ndo EMD.\n\nDevido ao ru\u00eddo presente na imagem, o rastreamento apresentou o efeito de jitter2,\nprincipalmente nas extremidades da curva. Entretanto, a por\u00e7\u00e3o do duto foi corretamente\nrastreada em toda a sequ\u00eancia. Como o duto n\u00e3o est\u00e1 completamente vis\u00edvel em ambas as\nc\u00e2meras, h\u00e1 partes que foram rastreadas em uma c\u00e2mera e n\u00e3o foram rastreadas na outra.\nPor\u00e9m, dada a restri\u00e7\u00e3o de planaridade foi poss\u00edvel reconstruir todos os pontos rastreados.\n\nO gr\u00e1fico de erro da curva \u00e9 ilustrado na Figura 27, onde \u00e9 exibido o erro m\u00e1ximo e\nm\u00e9dio por quadro. O erro m\u00e1ximo foi menor do que 5 cent\u00edmetros, por\u00e9m o erro m\u00e9dio ao\nlongo de toda a filmagem permaneceu em torno de 2.5 mil\u00edmetros. Al\u00e9m disso, observou-se\nque os pontos da extremidade possu\u00edram os maiores valores de erro em rela\u00e7\u00e3o \u00e0 curva do\n2 Movimento irregular de um ponto rastreado causado geralmente por ru\u00eddo. Seu efeito \u00e9 similar a\n\ntremor.\n\n\n\nCap\u00edtulo 7. Resultados 74\n\nFigura 27 \u2013 Gr\u00e1fico de erro da reconstru\u00e7\u00e3o obtido no V\u00eddeo 2 nos experimentos em\nambiente aqu\u00e1tico. Devido ao ru\u00eddo presente na imagem, a reconstru\u00e7\u00e3o se\nmostrou menos acurada, atingindo 4.99 cent\u00edmetros de erro. Por\u00e9m em 80%\ndos quadros o erro m\u00e1ximo foi inferior a 0.27 cent\u00edmetros (um quarto do\ndi\u00e2metro do duto).\n\nQuadros\n0 100 200 300 400 500 600 700 800 900 1000\n\nE\nrr\n\no\n (\n\nce\nn\n\nt\u00ed\nm\n\ne\ntr\n\no\ns)\n\n0\n\n1\n\n2\n\n3\n\n4\n\n5\n\nM\u00e9dio\nM\u00e1ximo\n\nFonte: O autor.\n\ngabarito.\n\nObservando o gr\u00e1fico da Figura 28, nota-se um comportamento similar entre a\nobliquidade e o erro da curva. Durante o processo de captura do v\u00eddeo, a c\u00e2mera se moveu\nmuito pouco, por\u00e9m a obliquidade apresentou varia\u00e7\u00f5es superiores a 15 graus em quadros\nconsecutivos. Portanto, podemos concluir que o ru\u00eddo no v\u00eddeo influenciou na estimava do\nplano e consequentemente na geometria da curva, como explicado na Se\u00e7\u00e3o 6.7.\n\n7.3.1.3 V\u00eddeo 3\n\nNo terceiro v\u00eddeo a \u00e1gua se encontrava menos turva. Foi capturada uma sequ\u00eancia\ncom 500 quadros em que a c\u00e2mera realizou um movimento de aproxima\u00e7\u00e3o (surge) e\nem seguida uma rota\u00e7\u00e3o em torno do eixo vertical (yaw) com desenquadramento na\nextremidade esquerda da curva. No movimento de aproxima\u00e7\u00e3o, a dist\u00e2ncia entre o duto e\na c\u00e2mera variou de 1.75 metros at\u00e9 1.35 metros e a amplitude da caten\u00e1ria foi mensurada\nem 25.04 cent\u00edmetros. Os resultados do rastreamento em alguns quadros da sequ\u00eancia s\u00e3o\nilustrados na Figura 29.\n\nDurante a aproxima\u00e7\u00e3o, a curva rastreada teve um aumento do seu comprimento\nna imagem, portanto, os passos de expans\u00e3o da curva do rastreamento funcionaram\ncorretamente.\n\nNo gr\u00e1fico de erro da curva reconstru\u00edda, ilustrado na Figura 30, o erro m\u00e1ximo\n\n\n\nCap\u00edtulo 7. Resultados 75\n\nFigura 28 \u2013 Gr\u00e1fico da obliquidade estimado no V\u00eddeo 2 do experimento em ambiente\naqu\u00e1tico. Este gr\u00e1fico apresenta um comportamento similar ao do gr\u00e1fico de\nerro da reconstru\u00e7\u00e3o, indicando que existe uma influ\u00eancia da obliquidade na\nreconstru\u00e7\u00e3o. Note que h\u00e1 grande varia\u00e7\u00e3o na obliquidade, mesmo quando a\nc\u00e2mera e o duto est\u00e3o praticamente parados.\n\nQuadros\n0 100 200 300 400 500 600 700 800 900 1000\n\nO\nb\nliq\n\nu\nid\n\na\nd\ne\n (\n\ng\nra\n\nu\ns)\n\n0\n\n5\n\n10\n\n15\n\n20\n\n25\n\nFonte: O autor.\n\nFigura 29 \u2013 Resultado do rastreamento em amostra de quadros do V\u00eddeo 3 capturada em\nambiente aqu\u00e1tico. A \u00e1gua estava um pouco turva e a c\u00e2mera realizou um\nmovimento de surge e yaw.\n\nQuadro 5 (Esquerda) Quadro 470 (Esquerda)Quadro 250 (Esquerda)\n\nQuadro 250 (Direita) Quadro 470 (Direita)Quadro 5 (Direita)\n\nFonte: O autor.\n\n\n\nCap\u00edtulo 7. Resultados 76\n\nFigura 30 \u2013 Gr\u00e1fico do erro de reconstru\u00e7\u00e3o da curva obtido no V\u00eddeo 3, nos experimentos\nrealizados em ambiente aqu\u00e1tico. O erro m\u00e1ximo se manteve menor que 1\ncent\u00edmetro em quase toda a sequ\u00eancia e em dois quadros o erro m\u00e1ximo\nultrapassou o valor de 4 cent\u00edmetros. O gr\u00e1fico de erro apresenta um com-\nportamento similar ao apresentado na varia\u00e7\u00e3o da obliquidade, ilustrada na\nFigura 31\n\nQuadros\n0 50 100 150 200 250 300 350 400 450 500\n\nE\nrr\n\no\n (\n\nce\nn\n\nt\u00ed\nm\n\ne\ntr\n\no\ns)\n\n0\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\nM\u00e9dio\nM\u00e1ximo\n\nFonte: O autor.\n\natingiu alguns picos superiores a 2 cent\u00edmetros. Entretanto, a m\u00e9dia do erro m\u00e1ximo em\ntoda sequ\u00eancia foi de 0.93 cent\u00edmetros e o erro m\u00e9dio em toda sequ\u00eancia foi igual a 0.3\ncent\u00edmetros, equivalente a aproximadamente um d\u00e9cimo do raio do duto.\n\nAssim como no caso anterior (V\u00eddeo 2), pode-se observar uma rela\u00e7\u00e3o entre o gr\u00e1fico\nde erro e de obliquidade, ilustrado pela Figura 31. Os maiores erros ocorreram quando a\nobliquidade atingiu os maiores valores. No quadro 425, por exemplo, onde ocorreu o maior\nerro, a c\u00e2mera realizou um movimento brusco de yaw.\n\n7.3.1.4 V\u00eddeo 4\n\nNo quarto e \u00faltimo caso buscou-se explorar um ponto de vista obl\u00edquo, como\nilustrado na Figura 32, atingindo-se uma obliquidade de 40?. A obliquidade foi incrementada\nno in\u00edcio do v\u00eddeo e em seguida a c\u00e2mera ficou de frente para o duto. Nos \u00faltimos quadros,\no duto n\u00e3o foi completamente rastreado devido a um desenquadramento da extremidade\ndireita do duto em ambas as c\u00e2meras. A amplitude da caten\u00e1ria foi mensurada em 61.57\ncent\u00edmetros e a dist\u00e2ncia do duto para c\u00e2mera variou de 1.4 at\u00e9 1.5 metros da c\u00e2mera.\n\nNa Figura 33 \u00e9 observado que desde o in\u00edcio da sequ\u00eancia at\u00e9 o quadro 420, o erro\nse manteve baixo e o erro m\u00e1ximo n\u00e3o superou 1 cent\u00edmetro. Por\u00e9m, ap\u00f3s o quadro 420\no erro cresceu bastante. Uma justificativa para esse comportamento provavelmente est\u00e1\nilustrada no gr\u00e1fico da Figura 34. Embora a obliquidade fosse alta no in\u00edcio do v\u00eddeo, o\n\n\n\nCap\u00edtulo 7. Resultados 77\n\nFigura 31 \u2013 Gr\u00e1fico da obliquidade estimado no V\u00eddeo 3 obtido na captura do experimento\nrealizado em ambiente aqu\u00e1tico. Embora n\u00e3o seja conhecida a obliquidade real,\no gr\u00e1fico apresentou comportamento coerente com o movimento observado\nno v\u00eddeo. A c\u00e2mera realizou movimentos de yaw ocasionando eleva\u00e7\u00f5es nos\nquadros 200 e 435.\n\nQuadros\n0 50 100 150 200 250 300 350 400 450 500\n\nO\nb\nliq\n\nu\nid\n\na\nd\ne\n (\n\ng\nra\n\nu\ns)\n\n0\n\n5\n\n10\n\n15\n\n20\n\n25\n\nFonte: O autor.\n\ncomprimento horizontal do duto e a vista lateral do duto permitiu a obten\u00e7\u00e3o de uma\nreconstru\u00e7\u00e3o acurada. O comprimento vertical do duto \u00e9 bem menor, e diminuiu ainda\nmais com o desenquadramento da extremidade direita. Isso causou uma estimativa pouco\nacurada do plano, como observado no gr\u00e1fico da obliquidade no trecho final da filmagem.\nNesses quadros o plano reconstru\u00eddo apresentou at\u00e9 50? de rota\u00e7\u00e3o em torno do eixo x,\nquando o valor esperado seria pr\u00f3ximo de 0.\n\n7.3.1.5 Principais conclus\u00f5es do experimento\n\nA Tabela 1 detalha o erro de reconstru\u00e7\u00e3o dos v\u00eddeos capturados em laborat\u00f3rio\nrelativos aos experimentos realizados em ambiente aqu\u00e1tico. Como abordado na Se\u00e7\u00e3o\n6.7, um baseline muito menor do que a dist\u00e2ncia das c\u00e2meras ao objeto tende a deixar\na reconstru\u00e7\u00e3o imprecisa, principalmente na estimativa da profundidade. Nesses experi-\nmentos, a dist\u00e2ncia entre as c\u00e2meras e o duto (1.5 metros) foi bem maior que o baseline\n(9 cent\u00edmetros). Mesmo assim, foi obtido um erro m\u00e9dio milim\u00e9trico, muito inferior ao\ndi\u00e2metro do duto. Isto se deve ao fato de que os pontos da curva n\u00e3o s\u00e3o reconstru\u00eddos\nindependentemente. Quando a restri\u00e7\u00e3o de planaridade \u00e9 imposta \u00e0 curva, o erro tende a\nse distribuir por todos os pontos para torn\u00e1-los complanares, gerando assim um resultado\nfinal mais acurado.\n\nEmbora certos quadros tenham alcan\u00e7ado valores elevados para o erro (5 cent\u00ed-\nmetros), estes foram casos isolados. O erro m\u00e9dio m\u00e1ximo ao longo de toda a sequ\u00eancia\nobteve valores menores, variando de 0.53 a 1.2 cent\u00edmetros. Portanto, o objetivo de obter\numa precis\u00e3o de 1 cent\u00e9simo do comprimento do duto (1.6 metro) foi alcan\u00e7ado, pois o\n\n\n\nCap\u00edtulo 7. Resultados 78\n\nFigura 32 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 4 capturado\nnos experimentos realizados no ambiente aqu\u00e1tico. Nos primeiros quadros foi\nrealizado um movimento em que a obliquidade aumentou, por\u00e9m ao final da\nsequ\u00eancia as c\u00e2meras estavam de frente para o duto. Um desenquadramento\nna extremidade direita impediu que o duto fosse completamente rastreado at\u00e9\no final da sequ\u00eancia.\n\nQuadro 500 (Esquerda)\n\nQuadro 500 (Direita)\n\nQuadro 1 (Esquerda)\n\nQuadro 1 (Direita)\n\nQuadro 200 (Esquerda)\n\nQuadro 200 (Direita)\n\nFonte: O autor.\n\nFigura 33 \u2013 Gr\u00e1fico de erro da reconstru\u00e7\u00e3o obtido no V\u00eddeo 4 capturado nos experimentos\nem ambiente aqu\u00e1tico. Com exce\u00e7\u00e3o do final da sequ\u00eancia, o erro se manteve\nest\u00e1vel, mesmo com o aumento da obliquidade. Por\u00e9m, devido ao desenqua-\ndramento da extremidade direita, a reconstru\u00e7\u00e3o foi menos acurada no final\ndo v\u00eddeo.\n\nQuadros\n0 50 100 150 200 250 300 350 400 450 500\n\nE\nrr\n\no\n (\n\nce\nn\n\nt\u00ed\nm\n\ne\ntr\n\no\ns)\n\n0\n\n2\n\n4\n\n6\n\n8\n\n10\n\nM\u00e9dio\nM\u00e1ximo\n\nFonte: O autor.\n\n\n\nCap\u00edtulo 7. Resultados 79\n\nFigura 34 \u2013 Gr\u00e1fico da obliquidade no V\u00eddeo 4, estimado no experimento realizado em\nambiente aqu\u00e1tico.] O comportamento do gr\u00e1fico \u00e9 coerente visualmente com\no v\u00eddeo at\u00e9 o quadro 420. Devido ao desenquadramento, o plano foi estimado\nincorretamente apresentando altos valores de obliquidade, mesmo quando a\nc\u00e2mera estava de frente para o duto.\n\nQuadros\n0 50 100 150 200 250 300 350 400 450 500\n\nO\nb\n\nliq\nu\n\nid\na\n\nd\ne\n\n (\ng\n\nra\nu\n\ns)\n\n0\n\n10\n\n20\n\n30\n\n40\n\n50\n\n60\n\nFonte: O autor.\n\nerro m\u00e1ximo foi inferior a 1.6 cent\u00edmetros na grande maioria dos casos.\n\nOutro ponto a ser considerado \u00e9 que o erro m\u00e1ximo ocorreu, na maioria das vezes,\nnas extremidades da curva. O melhor casamento entre a curva reconstru\u00edda e a curva\ndada como gabarito (encontrada otimizando-se a Eq. 7.3) tende a aumentar o erro nas\nextremidades e diminuir na por\u00e7\u00e3o central da curva, como ilustrado na Figura 35. Note\nque a curva reconstru\u00edda possui forma similar a uma caten\u00e1ria de amplitude diferente.\nSendo assim, pode-se considerar que o erro pode ser oriundo da estimativa do plano da\ncurva, pois isto provoca um esticamento da curva na dire\u00e7\u00e3o da segunda componente\nprincipal dos pontos ou na dire\u00e7\u00e3o de maior obliquidade.\n\nEntretanto, \u00e9 importante considerar outros fatores que podem influenciar os resulta-\ndos obtidos no experimento. O primeiro \u00e9 que as medi\u00e7\u00f5es realizadas no duto para estimar\na amplitude da curva do gabarito est\u00e3o sujeitas a uma imprecis\u00e3o de at\u00e9 um cent\u00edmetro.\nOutro fator a ser considerado \u00e9 que a dist\u00e2ncia entre o objeto e as c\u00e2meras no experimento\nest\u00e1 muito maior do que no cen\u00e1rio real, se for considerada a escala do experimento. Al\u00e9m\ndisso, a essa dist\u00e2ncia, um pequeno erro na calibra\u00e7\u00e3o das c\u00e2meras (1 grau na rota\u00e7\u00e3o,\npor exemplo) pode afetar significativamente a acur\u00e1cia do plano reconstru\u00eddo.\n\nNos gr\u00e1ficos de obliquidade nota-se que ocorre uma grande varia\u00e7\u00e3o mesmo em\nquadros consecutivos. Como \u00e9 sabido que o movimento entre a c\u00e2mera e o objeto \u00e9 lento,\numa abordagem que tornaria o resultado mais est\u00e1vel seria a utiliza\u00e7\u00e3o de t\u00e9cnicas de\npredi\u00e7\u00e3o, como o filtro de Kalman (KALMAN, 1960), para ajustar a estimativa do plano\nda curva. A utiliza\u00e7\u00e3o desse filtro, provavelmente, evitaria diversos picos de m\u00e1ximo no\ngr\u00e1fico de erro da reconstru\u00e7\u00e3o da curva.\n\n\n\nCap\u00edtulo 7. Resultados 80\n\nTabela 1 \u2013 Medida do erro de reconstru\u00e7\u00e3o da curva em ambiente aqu\u00e1tico. A tabela\nrelaciona os v\u00eddeos e a amplitude da caten\u00e1ria medida com os valores de erro\npara toda a sequ\u00eancia do v\u00eddeo. As m\u00e9dias e o desvios dos valores m\u00e1ximos\nde erro obtidos para cada quadro do v\u00eddeo s\u00e3o apresentados nas duas \u00faltimas\ncolunas. Todos os valores s\u00e3o expressos em cent\u00edmetros.\n\nV\u00eddeo Amplitude M\u00e9dia Desvio M\u00e1x Med M\u00e1x Desvio M\u00e1x\n1 44.75 0.21 0.11 1.93 0.53 0.28\n2 31.22 0.25 0.19 4.99 0.86 0.63\n3 25.04 0.30 0.22 5.03 0.93 0.52\n4 61.57 0.47 0.68 9.11 1.20 1.59\n\nFigura 35 \u2013 Ilustra\u00e7\u00e3o do erro entre a curva reconstru\u00edda e a curva do gabarito quando o\nerro m\u00e1ximo se localiza nas extremidades. A curva azul representa a curva do\ngabarito, os pontos vermelhos representam os pontos Xi amostrados da curva\nreconstru\u00edda. A dist\u00e2ncia m\u00ednima entre as curvas tende a maximizar o erro\nnas extremidades e minimizar o erro na parte central da curva.\n\n?0\n\n?1 ?3\n\n?2\n\n?4\n\nFonte: O autor.\n\n7.3.2 Ambiente a\u00e9reo\n\nPara avaliar a pose do duto reconstru\u00eddo (dada pela matriz R e o vetor t na Eq. 7.2)\nfoi utilizado o sistema de movimentos da Rexroth no laborat\u00f3rio LabOceano3. Consiste\nem uma plataforma suspensa por bra\u00e7os hidr\u00e1ulicos cujos movimentos s\u00e3o previamente\nprogramados por computador. Para cada um dos seis graus de liberdade (3 de rota\u00e7\u00e3o e\n3 de transla\u00e7\u00e3o) pode ser aplicado um movimento harm\u00f4nico informando-se amplitude,\nfrequ\u00eancia e defasagem. Como o equipamento utilizado n\u00e3o funciona embaixo d\u2019\u00e1gua, os\ntestes foram realizados em ambiente a\u00e9reo. Nas pr\u00f3ximas se\u00e7\u00f5es ser\u00e1 apresentada uma\ndescri\u00e7\u00e3o detalhada do experimento e dos resultados obtidos.\n\n7.3.2.1 Descri\u00e7\u00e3o do experimento\n\nO experimento consistiu em realizar filmagens com o suporte das c\u00e2meras fixado\nsobre a plataforma enquanto o duto permaneceu parado. A vantagem de fixar a c\u00e2mera\n3 O Laborat\u00f3rio de Tecnologia Oce\u00e2nica faz parte do Programa de Engenharia Naval e Oce\u00e2nica da\n\nCOPPE/UFRJ.\n\n\n\nCap\u00edtulo 7. Resultados 81\n\nsobre esta plataforma \u00e9 que o movimento \u00e9 conhecido e logo pode ser comparado com\no resultado da reconstru\u00e7\u00e3o. Admitindo que o par de c\u00e2meras esteja parado, pode-se\nconsiderar que o duto esteve em movimento e assim \u00e9 poss\u00edvel medir a pose do duto.\nConhecendo-se a pose do duto, o plano da curva tamb\u00e9m se torna conhecido e pode ser\navaliado. Como visto na Se\u00e7\u00e3o 6.7, a estimativa desse plano influencia diretamente a\ngeometria da curva reconstru\u00edda.\n\nTabela 2 \u2013 Par\u00e2metros utilizados em cada v\u00eddeo dos experimentos em ambiente a\u00e9reo.\nEm cada v\u00eddeo foi explorado um dos 6 graus de liberdade, 3 de rota\u00e7\u00e3o e\n3 de transla\u00e7\u00e3o. Para cada grau de liberdade foi utilizada duas medidas de\namplitude de caten\u00e1ria.\n\nV\u00eddeo Movimento\nAmplitude\n(Caten\u00e1ria)\n\nAmplitude\n(Movimento) Frequ\u00eancia (Hz)\n\n1 Surge 30.0 cm 0.5 m 0.05\n2 Surge 55.4 cm 0.5 m 0.05\n3 Sway 30.0 cm 0.5 m 0.1\n4 Sway 55.4 cm 0.4 m 0.1\n5 Heave 30.0 cm 0.2 m 0.05\n6 Heave 55.4 cm 0.2 m 0.05\n7 Roll 30.0 cm 25? 0.05\n8 Roll 55.4 cm 25? 0.05\n9 Pitch 30.0 cm 10? 0.05\n10 Pitch 55.4 cm 10? 0.05\n11 Yaw 30.0 cm 10? 0.05\n12 Yaw 55.4 cm 8? 0.05\n\nAo total foram gravados 12 v\u00eddeos e em cada v\u00eddeo variou-se um dos seis graus de\nliberdade. Para cada grau de liberdade foram adotadas duas configura\u00e7\u00f5es de caten\u00e1ria.\nOs par\u00e2metros utilizados em cada v\u00eddeo est\u00e3o listados na Tabela 2. As c\u00e2meras foram\nposicionadas na plataforma a 38 cent\u00edmetros \u00e0 frente e a 23 cent\u00edmetros de altura do\ncentro de rota\u00e7\u00e3o do equipamento. O duto foi posicionado a 1.5 metros de dist\u00e2ncia das\nc\u00e2meras. Cada v\u00eddeo possui aproximadamente 6500 quadros, tempo necess\u00e1rio para que\nsejam capturados 10 ciclos em cada movimento (exceto os movimentos de heave nos quais\nforam capturados 20 ciclos). Alguns quadros dos v\u00eddeos est\u00e3o ilustrados na Figura 36.\n\nCada grau de liberdade da plataforma de movimento \u00e9 programado segundo a\nfun\u00e7\u00e3o y(t) peri\u00f3dica e parametrizada pelo tempo t, onde\n\ny(t) = ? cos(ft + ?) + ?. (7.4)\n\nOs par\u00e2metros de amplitude ?, frequ\u00eancia f, defasagem ? e deslocamento ? s\u00e3o dados\npelo usu\u00e1rio. Os valores de amplitude e frequ\u00eancia utilizados no experimento est\u00e3o na\nTabela 2 e adotou-se ? = 0 e ? = 0. Os valores foram escolhidos com o intuito de tornar\nos movimentos da plataforma similares ao de um ROV durante a opera\u00e7\u00e3o real.\n\n\n\nCap\u00edtulo 7. Resultados 82\n\nFigura 36 \u2013 Quadros capturados nos experimentos no laborat\u00f3rio e em ambiente a\u00e9reo.\nEm 36a foi utilizada um amplitude menor que em 36b, onde a curva se tornou\nmaior na dire\u00e7\u00e3o horizontal.\n\n(a) Caten\u00e1ria com amplitude igual a 30 cent\u00ed-\nmetros\n\n(b) Caten\u00e1ria com amplitude igual a 55.4 cent\u00ed-\nmetros\n\nFonte: O autor.\n\nCada grau de liberdade da pose do duto (formada por R e t) ao longo do v\u00eddeo foi\najustado para a fun\u00e7\u00e3o dada na Eq. 7.4 de duas formas: na primeira otimizou-se ?, f, ? e\n?. Dessa maneira foi poss\u00edvel extrair a amplitude do movimento a partir da reconstru\u00e7\u00e3o.\nA Figura 37a ilustra a forma senoidal de um dos par\u00e2metros de transla\u00e7\u00e3o enquanto os\ndemais possuem amplitude pr\u00f3xima a zero. No gr\u00e1fico da Figura 37b verifica-se que os\ndemais par\u00e2metros sofreram influ\u00eancia do movimento principal e tamb\u00e9m apresentaram\ncomportamento peri\u00f3dico. As estimativas das amplitudes est\u00e3o presentes na Tabela 3.\n\nNa segunda forma, os valores de ? e f foram considerados constantes segundo a\nTabela 2 e foi avaliado o erro do ajuste do dado reconstru\u00eddo na fun\u00e7\u00e3o y(t). Em outras\npalavras, essa forma avalia o qu\u00e3o pr\u00f3ximo a pose da curva reconstru\u00edda est\u00e1 do movimento\nconsiderado gabarito. O erro absoluto m\u00e9dio \u00e9 dado na Tabela 4.\n\nAl\u00e9m da pose da c\u00e2mera, tamb\u00e9m foi avaliado o erro de reconstru\u00e7\u00e3o da curva,\ncujos resultados est\u00e3o apresentados na Tabela 5.\n\n7.3.2.2 An\u00e1lise dos resultados\n\nPor se tratar de um cen\u00e1rio sem desenquadramentos e movimentos suaves, o\nalgoritmo de rastreamento obteve resultados visualmente satisfat\u00f3rios e sem falhas em\ntodo o v\u00eddeo.\n\nComo a c\u00e2mera n\u00e3o estava situada na origem, movimentos puros de rota\u00e7\u00e3o\napresentaram valores de transla\u00e7\u00e3o em outros eixos, como mostrado na Tabela 3. Nesses\ncasos, com base nas medidas da posi\u00e7\u00e3o da c\u00e2mera em rela\u00e7\u00e3o ao centro de rota\u00e7\u00e3o foi\n\n\n\nCap\u00edtulo 7. Resultados 83\n\nFigura 37 \u2013 Ilustra\u00e7\u00e3o da estimativa dos graus de liberdade do movimento da c\u00e2mera nos\nexperimentos em laborat\u00f3rio e no ar. Note que os um dos par\u00e2metros apresenta\num comportamento similar a uma senoide enquanto os demais permanecem\naproximadamente constantes.\n\nQuadros\n0 1000 2000 3000 4000 5000 6000 7000\n\nIn\nte\n\nn\nsi\n\nd\na\n\nd\ne\n\n (\nm\n\ne\ntr\n\no\ns)\n\n-0.5\n\n0\n\n0.5\n\n1\n\n1.5\n\n2\n\nSurge\nSway\nHeave\n\n(a) Par\u00e2metros de transla\u00e7\u00e3o do V\u00eddeo 1\nQuadros\n\n0 1000 2000 3000 4000 5000 6000 7000\n\nIn\nte\n\nn\nsi\n\nd\na\n\nd\ne\n\n(g\nra\n\nu\ns)\n\n-25\n\n-20\n\n-15\n\n-10\n\n-5\n\n0\n\n5\n\n10\n\n15\n\n20\n\n25\n\nRoll\nPitch\nYaw\n\n(b) Par\u00e2metros de rota\u00e7\u00e3o do V\u00eddeo 7\n\nFonte: O autor.\n\nposs\u00edvel estimar o movimento nos demais graus de liberdade.\n\nNa Tabela 3 pode-se observar que a amplitude dos par\u00e2metros de transla\u00e7\u00e3o foi\nrecuperada com acur\u00e1cia em praticamente todo os casos avaliados. \u00c9 importante ressaltar\nque um erro de 2 cent\u00edmetros para um objeto que est\u00e1 a 1.5 metros de duas c\u00e2meras\n(afastadas entre si em 9 cent\u00edmetros) pode ser considerado preciso.\n\nAs estimativas do pitch e yaw obtiveram um erro maior, mesmo sendo utilizados\nvalores pequenos de obliquidade (10?). O erro tamb\u00e9m foi maior nos casos em que a\namplitude da caten\u00e1ria foi igual a 55.4 cent\u00edmetros, pois neste caso a curva apresenta\nmenor comprimento na dire\u00e7\u00e3o vertical. Por\u00e9m a estimativa do roll apresentou um erro\nmenor, possivelmente porque neste movimento n\u00e3o ocorre varia\u00e7\u00e3o da obliquidade.\n\nCorroborando o resultado anterior, a Tabela 4 mostra que o erro foi sempre maior\nquando a caten\u00e1ria apresentou amplitude igual a 55.4 cent\u00edmetros, devido ao comprimento\nda curva na dire\u00e7\u00e3o vertical (dire\u00e7\u00e3o da segunda componente principal).\n\nEntretanto, o erro de reconstru\u00e7\u00e3o da curva, apresentado na Tabela 5, apresentou\num resultado inverso, pois foram obtidos melhores resultados com a caten\u00e1ria apresentando\namplitude igual a 54.4 cent\u00edmetros. Entretanto, \u00e9 preciso ressaltar que os valores de erro\ncalculados s\u00e3o muito inferiores \u00e0 precis\u00e3o de medi\u00e7\u00e3o do gabarito: o erro m\u00e9dio ficou\naproximadamente em 1 mil\u00edmetro com desvio de no m\u00e1ximo 1.6 mil\u00edmetro. Logo, conclui-se\nque a obliquidade n\u00e3o apresentou diferen\u00e7as significativas na geometria da curva.\n\nComo mostrado no gr\u00e1fico da Figura 19c, \u00e9 esperado que uma obliquidade de 10?\n\nn\u00e3o apresente diferen\u00e7as significativas na geometria da curva. Por\u00e9m, a m\u00e1 estimativa\ndos \u00e2ngulos de pitch e yaw indicam que o erro da reconstru\u00e7\u00e3o seria muito maior caso a\nobliquidade fosse maior.\n\n\n\nCap\u00edtulo 7. Resultados 84\n\nTabela 3 \u2013 Tabela de estimativas da amplitude do movimento do duto em cada grau de\nliberdade nos experimentos realizados em ambiente a\u00e9reo. Para cada grau de\nliberdade \u00e9 informado o valor estimado a esquerda e o valor real a direita.\nComo o posicionamento do duto em rela\u00e7\u00e3o \u00e0s c\u00e2meras n\u00e3o foi mensurado,\no movimento de roll n\u00e3o teve um valor de gabarito para todos os graus de\nliberdade. Os valores s\u00e3o dados em cent\u00edmetros.\n\nV\u00eddeo Surge Sway Heave Roll Pitch Yaw\n1 47.25 50 1.75 0 -1.47 0 0.63 0 0.57 0 -3.92 0\n2 47.08 50 0.14 0 2.92 0 -0.44 0 -1.51 0 1.17 0\n3 2.52 0 49.51 50.00 -1.35 0 -0.20 0 0.27 0 0.27 0\n4 0.43 0 38.13 40.00 -0.18 0 -0.38 0 -1.23 0 1.25 0\n5 0.95 0 0.88 0 19.93 20.00 0.16 0 2.95 0 -0.66 0\n6 -0.32 0 -1.15 0 19.86 20.00 -0.25 0 -1.35 0 0.23 0\n7 1.46 0 -2.25 \u2013 1.86 \u2013 24.88 25.00 2.77 0 -0.76 0\n8 -0.57 0 -3.74 \u2013 -0.66 \u2013 24.92 25.00 -3.65 0 0.81 0\n9 -4.13 0 -0.18 0 33.67 32.65 -0.15 0 5.51 10.00 -0.49 0\n10 0.40 0 -0.52 0 33.86 32.65 -0.23 0 4.38 10.00 0.52 0\n11 1.03 0 33.46 32.65 -0.63 0 -0.33 0 0.03 0 8.55 10.00\n12 -0.02 0 26.67 26.16 -0.07 0 -0.04 0 -0.02 0 6.79 8.00\n\nTabela 4 \u2013 Tabela do erro da estimativa das amplitudes dos movimentos nos experimentos\nem laborat\u00f3rio e em ambiente a\u00e9reo. O erro \u00e9 medido utilizando os dados\nespecificados na Tabela 2. Observe que o erro obtido com amplitude igual 55.4\ncent\u00edmetros foi sempre superior devido ao fato da segunda componente principal\nser muito menor em rela\u00e7\u00e3o a segunda componente quando a amplitude \u00e9 de\n30 cent\u00edmetros. Os valores est\u00e3o dados em cent\u00edmetros\n\nVideo Surge Sway Heave Roll Pitch Yaw\n1 1.8102 1.1144 0.9646 0.4156 0.6909 2.5717\n2 1.9571 0.4208 6.5197 1.0887 1.5199 2.8120\n3 1.9894 0.4848 1.1508 0.3097 0.9459 0.8652\n4 1.1799 1.2569 0.6532 0.9717 1.6373 0.8906\n5 0.7810 0.5740 0.1692 0.1717 2.0409 0.8656\n6 0.8342 0.7970 0.2191 0.3831 2.8967 0.9221\n7 1.1373 \u2013 \u2013 0.2766 2.2083 0.6230\n8 1.3932 \u2013 \u2013 0.3851 7.6156 1.6790\n9 2.8120 0.1479 0.6986 0.1464 2.9835 0.6765\n10 1.1233 1.0210 0.7978 0.3352 3.7358 0.7490\n11 1.0437 0.5613 0.6204 0.2546 1.1215 0.9954\n12 0.9776 0.4077 0.4631 0.5049 1.3537 0.8481\n\n\n\nCap\u00edtulo 7. Resultados 85\n\nTabela 5 \u2013 Tabela de erros de reconstru\u00e7\u00e3o da curva nos experimentos em laborat\u00f3rio e\nem ambiente a\u00e9reo. O erro m\u00e9dio esteve em cerca de 0.1 mil\u00edmetro e o erro\nm\u00e1ximo m\u00e9dio permaneceu em todos os casos menor que 1 cent\u00edmetro. Os\nvalores s\u00e3o dados em cent\u00edmetros.\n\nCaso M\u00e9dio Desvio M\u00e1ximo M\u00e9d Max Desv Max\n1 0.1217 0.0462 0.8156 0.3563 0.1173\n2 0.0536 0.0268 0.6978 0.1867 0.0838\n3 0.3490 0.1673 1.8599 0.7979 0.3616\n4 0.1013 0.0651 1.0471 0.2892 0.1529\n5 0.1684 0.1248 1.0980 0.4087 0.2573\n6 0.0706 0.0519 1.2279 0.2598 0.1341\n7 0.1741 0.1113 1.3268 0.4110 0.2263\n8 0.1773 0.1036 1.9368 0.5844 0.2577\n9 0.1806 0.0843 0.9850 0.4342 0.1905\n10 0.1157 0.0587 0.9610 0.3642 0.1616\n11 0.1719 0.0979 1.5305 0.4247 0.1853\n12 0.1609 0.0764 1.1133 0.3818 0.1615\n\n7.4 EXPERIMENTOS EM AMBIENTE REAL\nSer\u00e3o apresentados nesta se\u00e7\u00e3o os resultados obtidos nos experimentos realizados\n\nem uma opera\u00e7\u00e3o real de instala\u00e7\u00e3o de dutos. A opera\u00e7\u00e3o em quest\u00e3o realizou a conex\u00e3o\nde um duto flex\u00edvel no equipamento submarino (conhecido como \u00e1rvore de natal) a uma\nprofundidade de 2130 metros. Mais detalhes do cen\u00e1rio da opera\u00e7\u00e3o encontram-se no\nCap\u00edtulo 2.\n\nDevido ao dif\u00edcil acesso ao ambiente, n\u00e3o foi poss\u00edvel realizar medi\u00e7\u00f5es precisas do\nduto para obter um gabarito para o EMD. Por\u00e9m, atrav\u00e9s do resultado do rastreamento,\n\u00e9 poss\u00edvel avaliar a estabilidade e a robustez da t\u00e9cnica aplicada no ambiente real. Estes\nresultados est\u00e3o descritos a seguir.\n\n7.4.1 V\u00eddeo 1\n\nNo primeiro v\u00eddeo foi analisada uma sequ\u00eancia com 670 quadros, ilustrados na Figura\n38. Ao longo do duto foram posicionados flutuadores (boias) cujas amarras interferiram\nno padr\u00e3o de pintura criando protuber\u00e2ncias. Al\u00e9m disso, na extremidade direita h\u00e1 uma\nvaria\u00e7\u00e3o brusca na intensidade e no di\u00e2metro do duto.\n\nVisualmente essas dificuldades foram parcialmente superadas pelo rastreamento,\nconsiderando que pequenos desvios s\u00e3o vis\u00edveis na curva. Por\u00e9m o resultado final se mostrou\nsuave com o eixo medial corretamente localizado no centro do duto. Devido ao movimento\nrealizado pelo ROV, a extremidade direita do duto foi desenquadrada e n\u00e3o foi rastreada\nat\u00e9 o final do v\u00eddeo.\n\nUma das raz\u00f5es da suavidade do resultado foi a utiliza\u00e7\u00e3o da fun\u00e7\u00e3o de pesos que\n\n\n\nCap\u00edtulo 7. Resultados 86\n\nFigura 38 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 1 capturado em\nambiente real. As amarras das boias desviaram um pouco a curva, por\u00e9m o\nresultado se manteve suave.\n\nQuadro 690 (Esquerda)\n\nQuadro 690 (Direita)\n\nQuadro 2 (Esquerda)\n\nQuadro 1 (Direita)\n\nQuadro 200 (Esquerda)\n\nQuadro 200 (Direita)\n\nFonte: Petrobras adaptada pelo autor.\n\nFigura 39 \u2013 Resultado do rastreamento em amostra de quadro do V\u00eddeo 1, capturado em\nambiente real, sem o uso da fun\u00e7\u00e3o de pesos. Note que a curva se tornou\nmenos suave, sofreu v\u00e1rios desvios e a parte do duto de menor di\u00e2metro n\u00e3o\nfoi corretamente rastreada.\n\nFonte: Petrobras adaptada pelo autor.\n\nreduz a import\u00e2ncia das regi\u00f5es de borda do duto. A Figura 39 ilustra um quadro do v\u00eddeo\nsem o uso da fun\u00e7\u00e3o de pesos: os desvios da curva se tornaram mais acentuados na regi\u00e3o\nem que o duto diminui de di\u00e2metro e nas regi\u00f5es em que h\u00e1 amarras. Al\u00e9m disso, \u00e9 clara\na presen\u00e7a de jitter ao longo dos quadros do v\u00eddeo.\n\n\n\nCap\u00edtulo 7. Resultados 87\n\nFigura 40 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 2, capturado em\nambiente real. Nesse caso o duto est\u00e1 sendo observado de um ponto de vista\nobl\u00edquo, o duto tamb\u00e9m possui protuber\u00e2ncias provenientes das amarras.\n\nQuadro 397 (Esquerda)\n\nQuadro 397 (Direita)\n\nQuadro 2 (Esquerda)\n\nQuadro 2 (Direita)\n\nQuadro 200 (Esquerda)\n\nQuadro 200 (Direita)\n\nFonte: Petrobras adaptada pelo autor.\n\n7.4.2 V\u00eddeo 2\n\nNo segundo v\u00eddeo, o duto foi capturado de um ponto de vista obl\u00edquo em rela\u00e7\u00e3o \u00e0\nc\u00e2mera, como ilustrado em alguns quadros na Figura 40. Note que as amarras e lingadas\nna borda do duto desviaram menos o EMD.\n\nA import\u00e2ncia de um resultado preciso da reconstru\u00e7\u00e3o para o algoritmo de\nrastreamento fica clara nesse v\u00eddeo. Devido \u00e0 obliquidade, a espessura do duto \u00e9 vari\u00e1vel\nao longo da imagem. Por\u00e9m ao ser considerada a posi\u00e7\u00e3o do duto no quadro anterior \u00e9\nposs\u00edvel modelar corretamente a regi\u00e3o de proje\u00e7\u00e3o do duto.\n\nA Figura 41 ilustra o resultado ap\u00f3s a transforma\u00e7\u00e3o da imagem pelo algoritmo de\nrastreamento. Note que \u00e0 medida que o duto se distancia, a imagem tende a ficar mais\nborrada. A transformada da imagem torna o di\u00e2metro do duto uniforme ocasionando uma\nupsampling nessa regi\u00e3o.\n\n7.4.3 V\u00eddeo 3\n\nO V\u00eddeo 3 foi capturado em um cen\u00e1rio cuja ilumina\u00e7\u00e3o foi sendo incrementada\ngradativamente. Nos primeiros quadros, a quantidade reduzida de luz ocasionou ru\u00eddo na\nimagem proveniente da amplifica\u00e7\u00e3o do sinal da c\u00e2mera. Alguns quadros est\u00e3o ilustrados\nna Figura 42. Esse cen\u00e1rio pode ser considerado como um caso extremo e que dificilmente\nocorrer\u00e1 em situa\u00e7\u00f5es reais, por\u00e9m serve para ilustrar a robustez da t\u00e9cnica proposta.\n\nNos primeiros quadros, o rastreamento apresentou um efeito de jitter relevante.\n\n\n\nCap\u00edtulo 7. Resultados 88\n\nFigura 41 \u2013 Imagens transformadas pelo algoritmo de rastreamento no quadro 2 do V\u00eddeo\n2. As linhas brancas delimitam a regi\u00e3o considerada como pertencente ao\nduto.\n\n(a) Imagem esquerda. (b) Imagem direita.\n\nFonte: Petrobras adaptada pelo autor.\n\nFigura 42 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 3, capturado\nem ambiente real. Devida \u00e0 baixa ilumina\u00e7\u00e3o, as imagens apresentaram muito\nru\u00eddo criando o efeito de jitter nos quadros iniciais. Contudo, \u00e0 medida que a\nilumina\u00e7\u00e3o foi sendo ajustada, o rastreamento passou a fornecer resultados\nest\u00e1veis.\n\nQuadro 1000 (Esquerda)\n\nQuadro 1000 (Direita)\n\nQuadro 2 (Esquerda)\n\nQuadro 2 (Direita)\n\nQuadro 150 (Esquerda)\n\nQuadro 150 (Direita)\n\nFonte: Petrobras adaptada pelo autor.\n\n\n\nCap\u00edtulo 7. Resultados 89\n\nFigura 43 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 4, capturado\nem ambiente real. As c\u00e2meras realizaram um movimento de aproxima\u00e7\u00e3o em\nrela\u00e7\u00e3o ao duto. A varia\u00e7\u00e3o do tamanho do duto na imagem mostra que o\nrastreamento longitudinal expandiu corretamente o duto.\n\nQuadro 1300 (Esquerda)\n\nQuadro 1300 (Direita)\n\nQuadro 2 (Esquerda)\n\nQuadro 2 (Direita)\n\nQuadro 650 (Esquerda)\n\nQuadro 650 (Direita)\n\nFonte: Petrobras adaptada pelo autor.\n\nParte da extremidade esquerda da curva n\u00e3o foi corretamente rastreada, indicando uma\ncontra\u00e7\u00e3o indevida da curva pelo rastreamento longitudinal. Por\u00e9m, \u00e0 medida que a\nilumina\u00e7\u00e3o se normalizou, o rastreamento passou a apresentar um resultado est\u00e1vel, por\u00e9m\nsem rastrear a extremidade esquerda da curva. Como o algoritmo de rastreamento n\u00e3o\nidentifica novas partes do duto que podem ser rastreadas, os \u00faltimos quadros apresentam\ntrechos de duto vis\u00edveis, mas n\u00e3o reconstru\u00eddos.\n\n7.4.4 V\u00eddeo 4\n\nNo V\u00eddeo 4 o duto realizou um movimento de aproxima\u00e7\u00e3o em dire\u00e7\u00e3o \u00e0s c\u00e2meras,\ncomo ilustrado na Figura 43. Nos primeiros quadros o duto estava longe e ocupava uma\npequena regi\u00e3o da imagem. O rastreamento longitudinal conseguiu seguir e expandir\ncorretamente as extremidades do duto, por\u00e9m verifica-se que uma marca\u00e7\u00e3o branca na\nextremidade esquerda n\u00e3o foi rastreada at\u00e9 o final do v\u00eddeo.\n\nAl\u00e9m disso, \u00e9 poss\u00edvel observar na Figura 43 que os \u00faltimos quadros da extremidade\ndireita da curva sofreram um desvio maior devido \u00e0 protuber\u00e2ncia causada pelas amarras\nda boia. Esse comportamento deve-se ao fato de que a n\u00e3o continuidade da curva nas\nextremidades permite que ela seja mais suscet\u00edvel a erros e apresente o efeito de jitter.\n\n\n\nCap\u00edtulo 7. Resultados 90\n\nFigura 44 \u2013 Resultado do rastreamento em amostras de quadros do V\u00eddeo 5, capturado em\nambiente real. Esse cen\u00e1rio pode ser considerado um dos casos mais simples\npara o algoritmo de rastreamento, pois a obliquidade \u00e9 pequena, a imagem\nest\u00e1 n\u00edtida e n\u00e3o h\u00e1 varia\u00e7\u00e3o de di\u00e2metro do duto.\n\nQuadro 350(Esquerda)\n\nQuadro 350 (Direita)\n\nQuadro 2 (Esquerda)\n\nQuadro 2 (Direita)\n\nQuadro 175 (Esquerda)\n\nQuadro 175 (Direita)\n\nFonte: Petrobras adaptada pelo autor.\n\n7.4.5 V\u00eddeo 5\n\nO \u00faltimo v\u00eddeo analisado (V\u00eddeo 5) pode ser considerado um caso simples para o\nproblema dessa proposta, conforme ilustrado na Figura 44. O duto aparece marcado de\nforma correta e regular, est\u00e1 bem vis\u00edvel e a c\u00e2mera realizou poucos movimentos.\n\nDentro do esperado, o rastreamento apresentou um resultado suave e est\u00e1vel. Devido\n\u00e0 poeira presente na extremidade esquerda do duto, a curva apresentou um pouco de\ninstabilidade nessa regi\u00e3o em alguns quadros.\n\n7.4.6 Casos de estresse\n\nNesta se\u00e7\u00e3o ser\u00e3o apresentados um conjunto de testes realizados, nos quais o\nrastreamento \u00e9 inicializado com uma curva especificada manualmente para os piores casos.\nEsses testes objetivaram explorar os limites dos algoritmos, possibilitando analisar o\ncomportamento da t\u00e9cnica em casos de estresse e avaliar sua robustez.\n\nO resultado est\u00e1 ilustrado na Figura 45. Observe que, mesmo quando a curva n\u00e3o\nest\u00e1 sobre o duto, o rastreamento consegue encontrar a parte central do duto. Como a\nregi\u00e3o de proje\u00e7\u00e3o calculada no rastreamento cont\u00e9m parte do duto, o algoritmo localiza o\nrestante do duto ao maximizar a energia nas proximidades da regi\u00e3o. Outro aspecto \u00e9 que\nas amarras, mesmo sendo regi\u00f5es de alta intensidade, n\u00e3o perturbam o algoritmo. Como a\ncurva \u00e9 modelada atrav\u00e9s de splines, o resultado tende a ser suave, impedindo que a curva\n\n\n\nCap\u00edtulo 7. Resultados 91\n\nFigura 45 \u2013 Resultados do rastreamento nos casos de estresse do algoritmo. As imagens \u00e0\nesquerda representam a curva de entrada para o algoritmo no primeiro quadro\ndo v\u00eddeo. As imagens do meio e da direita s\u00e3o, respectivamente, o primeiro\ne o segundo quadro do v\u00eddeo ap\u00f3s a execu\u00e7\u00e3o do algoritmo de rastreamento.\nS\u00e3o exibidas apenas as imagens da c\u00e2mera esquerda devido \u00e0 sua similaridade\ncom o resultado nas imagens da c\u00e2mera direita.\n\nFonte: Petrobras adaptada pelo autor.\n\n\n\nCap\u00edtulo 7. Resultados 92\n\napresente desvios bruscos.\n\nEm alguns casos, a curva no primeiro quadro n\u00e3o apresenta um bom resultado por\ndemandar mais itera\u00e7\u00f5es. Por\u00e9m ap\u00f3s um ou dois quadros, o resultado converge para uma\nposi\u00e7\u00e3o adequada.\n\n7.5 AN\u00c1LISE GERAL\nEsta se\u00e7\u00e3o apresenta uma an\u00e1lise dos algoritmos de rastreamento e reconstru\u00e7\u00e3o,\n\nabordando caracter\u00edsticas como erro de reproje\u00e7\u00e3o, desempenho e tempo de execu\u00e7\u00e3o.\nAs conclus\u00f5es apresentadas est\u00e3o baseadas no comportamento dos algoritmos nos v\u00eddeos\ncapturados e analisados.\n\n7.5.1 Erro de reproje\u00e7\u00e3o\n\nO algoritmo de reconstru\u00e7\u00e3o da curva obteve um RMS (Root Mean Square - raiz\nda m\u00e9dia quadrada) do erro de reproje\u00e7\u00e3o (HARTLEY; ZISSERMAN, 2004) entre 0.05\ne 0.25 pixel nos v\u00eddeos realizados em laborat\u00f3rio. Nos v\u00eddeos capturados em ambientes\nreais o RMS obtido estava entre 0.3 e 0.4 pixel. O desvio padr\u00e3o do RMS foi menor que\n0.1 pixel em todos os casos analisados, portanto o erro se manteve est\u00e1vel ao longo do\nv\u00eddeo. Esse valor de desvio padr\u00e3o \u00e9 considerado bom, pois significa que o algoritmo de\nrastreamento alcan\u00e7ou uma precis\u00e3o de subpixel.\n\nUma poss\u00edvel explica\u00e7\u00e3o para a varia\u00e7\u00e3o do erro no laborat\u00f3rio e no ambiente\nreal pode ser dada pelos par\u00e2metros das c\u00e2meras (par\u00e2metros intr\u00ednsecos e pose), que\npodem estar refletindo o erro da calibra\u00e7\u00e3o realizada no fundo do mar. A calibra\u00e7\u00e3o nesse\nambiente \u00e9 mais suscet\u00edvel a falhas (devido \u00e0 varia\u00e7\u00e3o do \u00edndice de refra\u00e7\u00e3o, temperatura,\nambiente n\u00e3o controlado, etc.) quando comparada com a realizada em laborat\u00f3rio. Outra\npossibilidade, \u00e9 o fato do duto nas imagens reais aparecer em uma regi\u00e3o mais espessa\ndo que nos v\u00eddeos realizados no laborat\u00f3rio. Esse fato pode ter aumentado a regi\u00e3o de\nincerteza da posi\u00e7\u00e3o do EMD na imagem.\n\nObservou-se tamb\u00e9m que a regi\u00e3o das extremidades do duto obteve o maior erro de\nreproje\u00e7\u00e3o na maioria dos casos analisados. Devido \u00e0 aus\u00eancia de continuidade da curva,\nas extremidades s\u00e3o mais suscet\u00edveis a efeitos de jitter do que a por\u00e7\u00e3o central do duto.\n\n7.5.2 Itera\u00e7\u00f5es\n\nOs crit\u00e9rios de parada utilizados para o Gauss-Newton no algoritmo de rastreamento\nforam: o n\u00famero m\u00e1ximo de 15 itera\u00e7\u00f5es ou o deslocamento m\u00e1ximo de cada ponto do\nEMD menor que 0.05 pixel. A converg\u00eancia obteve a m\u00e9dia de 5 itera\u00e7\u00f5es no segundo\nn\u00edvel da pir\u00e2mide e 4 no primeiro n\u00edvel (imagem em tamanho original), tanto nas imagens\n\n\n\nCap\u00edtulo 7. Resultados 93\n\nda c\u00e2mera esquerda, como nas da direita. O desvio padr\u00e3o do n\u00famero de itera\u00e7\u00f5es foi\naproximadamente 1 para o segundo n\u00edvel da pir\u00e2mide e 3 para o primeiro. Dentre os v\u00eddeos\nanalisados, aquele que obteve o maior n\u00famero de itera\u00e7\u00f5es foi o V\u00eddeo 2 dos experimentos\nem ambiente submerso (Se\u00e7\u00e3o 7.3.1.2). A \u00e1gua turva introduziu ru\u00eddos na imagem e a\ndeixou com pouco contraste, fazendo com que o algoritmo necessitasse de mais itera\u00e7\u00f5es\npara convergir.\n\nNo algoritmo de reconstru\u00e7\u00e3o foi utilizado como crit\u00e9rio de parada um valor m\u00e1ximo\nde itera\u00e7\u00f5es igual a 50 ou quando a varia\u00e7\u00e3o do RMS fosse igual ou menor do que 10?4 pixel.\nSegundo (WANG; POTTMANN; LIU, 2006), a otimiza\u00e7\u00e3o simult\u00e2nea da parametriza\u00e7\u00e3o\ndos pontos amostrais e dos pontos de controle apresenta converg\u00eancia linear, e logo precisa\nde muitas itera\u00e7\u00f5es para convergir. Entretanto, devido \u00e0 suavidade da curva, a aproxima\u00e7\u00e3o\nlinear da Hessiana ficou mais precisa, tornando os passos iterativos do algoritmo mais\neficientes.\n\nO n\u00famero de itera\u00e7\u00f5es m\u00e9dio por v\u00eddeo ficou no intervalo entre 3 e 29. No caso\nem que foram necess\u00e1rias 29 itera\u00e7\u00f5es, o desvio padr\u00e3o atingiu um valor igual a 17. Os\nV\u00eddeos 2 e 3 do experimento em ambiente aqu\u00e1tico (Se\u00e7\u00e3o 7.3.1.2 e Se\u00e7\u00e3o 7.3.1.3) foram\nos que apresentaram maior n\u00famero de itera\u00e7\u00f5es, devido ao ru\u00eddo presente na imagem.\nNesses casos, a proje\u00e7\u00e3o do EMD rastreado apresentou um comportamento menos suave,\ntornando a converg\u00eancia mais lenta.\n\nO crit\u00e9rio de converg\u00eancia com base no RMS igual a 10?4 pixel pode ser considerado\num crit\u00e9rio de parada prematuro, pois \u00e9 comum algoritmos apresentarem limiares iguais a\n10?8. Por\u00e9m, observou-se que, devido \u00e0 converg\u00eancia linear do m\u00e9todo, para atingir esses\nvalores o algoritmo iria demandar muitas itera\u00e7\u00f5es. Utilizando um limiar igual a 10?4, os\npontos de controle no momento da converg\u00eancia apresentam uma evolu\u00e7\u00e3o entre 0.01 e\n0.03 pixel. Trata-se de uma evolu\u00e7\u00e3o pequena e que n\u00e3o deve influenciar na acur\u00e1cia do\nresultado final, de acordo com alguns experimentos realizados, por\u00e9m n\u00e3o relatados neste\ndocumento.\n\n7.5.3 Tempo\n\nO tempo de execu\u00e7\u00e3o do algoritmo de rastreamento \u00e9 dependente, principalmente,\nde dois fatores: o n\u00famero de itera\u00e7\u00f5es e a \u00e1rea vis\u00edvel do duto na imagem. O rastreamento\nde cada imagem leva em m\u00e9dia 10 milissegundos e apresenta um desvio padr\u00e3o de 3\nmilissegundos. O tempo de execu\u00e7\u00e3o da t\u00e9cnica de reconstru\u00e7\u00e3o da curva \u00e9 dependente do\nn\u00famero de itera\u00e7\u00f5es e do comprimento do EMD na imagem.\n\nOs V\u00eddeos 2 e 3 do experimento em ambiente aqu\u00e1tico (Se\u00e7\u00e3o 7.3.1.2 e Se\u00e7\u00e3o\n7.3.1.3) demandaram de 10 a 12 milissegundos por quadro para reconstruir a curva. Esses\nforam os maiores tempos encontrados entre todos os v\u00eddeo avaliados. Os demais v\u00eddeos\n\n\n\nCap\u00edtulo 7. Resultados 94\n\napresentaram tempo inferior a 6 milissegundos por quadro para reconstruir a curva.\n\nA execu\u00e7\u00e3o em s\u00e9rie do rastreamento de duas imagens e a reconstru\u00e7\u00e3o da curva\nconsomem um tempo menor que 34 milissegundos. Logo, os algoritmos apresentam uma\nfrequ\u00eancia maior do que a transmiss\u00e3o do v\u00eddeo, que \u00e9 no m\u00e1ximo de 30 hertz.\n\n7.6 CONSIDERA\u00c7\u00d5ES FINAIS\nEste cap\u00edtulo apresentou os resultados obtidos a partir de experimentos realizados\n\ntanto em laborat\u00f3rio como em ambiente real, cujo objetivo foi avaliar os algoritmos\npropostos. A partir dos resultados da reconstru\u00e7\u00e3o da curva em laborat\u00f3rio, pode-se\nobservar que uma precis\u00e3o milim\u00e9trica foi alcan\u00e7ada na maioria dos casos. Estes testes\ntamb\u00e9m mostraram que a obliquidade e a distribui\u00e7\u00e3o dos pontos da curva influenciam\ndiretamente a estimativa do plano. Os testes em imagens capturadas de uma opera\u00e7\u00e3o\nreal ilustraram a acur\u00e1cia visual dos resultados obtidos pelo rastreamento.\n\nComo a precis\u00e3o obtida em laborat\u00f3rio foi superior \u00e0quela requisitada na opera\u00e7\u00e3o,\n\u00e9 esperado que os algoritmos propostos apresentem resultados aceit\u00e1veis no cen\u00e1rio real.\n\n\n\n95\n\n8 CONCLUS\u00c3O\n\nAtualmente, a compara\u00e7\u00e3o entre as imagens do duto e dos modelos f\u00edsicos simulados\n\u00e9 feita de forma manual e baseada na experi\u00eancia do engenheiro. A utiliza\u00e7\u00e3o de m\u00e9todos de\nvis\u00e3o computacional pode permitir que esse procedimento seja feito de forma autom\u00e1tica e\nsimultaneamente a captura das imagens. Al\u00e9m disso, \u00e9 poss\u00edvel obter uma an\u00e1lise de mais\nconfi\u00e1vel do que o procedimento atual, uma vez que n\u00e3o \u00e9 baseada na opini\u00e3o subjetiva do\nengenheiro.\n\nNo escopo de oferecer uma solu\u00e7\u00e3o autom\u00e1tica para a instala\u00e7\u00e3o de dutos \u00e9\nnecess\u00e1rio atender, resumidamente, a dois requisitos:\n\n1. O resultado da geometria da curva deve ser estimado em tempo real, ou seja, a uma\nfrequ\u00eancia igual ou maior do que a frequ\u00eancia de captura das c\u00e2meras;\n\n2. Apresentar uma acur\u00e1cia na estimativa da curva de pelo menos um cent\u00e9simo do\ncomprimento da curva rastreada.\n\nDiante dos requisitos apresentados acima, esta disserta\u00e7\u00e3o de mestrado prop\u00f4s e\nvalidou dois algoritmos (um para rastreamento e outro para reconstru\u00e7\u00e3o) para auxiliar a\ntomada de decis\u00e3o dos engenheiros durante as opera\u00e7\u00f5es de instala\u00e7\u00f5es de dutos.\n\n8.1 PRINCIPAIS CONCLUS\u00d5ES\nA seguir est\u00e3o enumeradas as principais conclus\u00f5es derivadas das an\u00e1lises dos\n\nresultados obtidos:\n\n1. Os algoritmos atenderam aos requisitos de performance, obtendo uma taxa superior\na 31 quadros por segundo. Provavelmente, a paraleliza\u00e7\u00e3o da implementa\u00e7\u00e3o pode\npermitir obter taxas mais altas;\n\n2. Os experimentos em laborat\u00f3rio demonstraram que a precis\u00e3o requisitada foi al-\ncan\u00e7ada. Nos casos analisados o erro m\u00e1ximo m\u00e9dio ficou muito abaixo de 1.6\ncent\u00edmetros, que corresponde a 1 cent\u00e9simo do comprimento rastre\u00e1vel do duto. Com\nexce\u00e7\u00e3o do V\u00eddeo 4 em ambiente aqu\u00e1tico, que obteve erro de 1.2 cent\u00edmetro, os\ndemais v\u00eddeos apresentaram erro inferior a 1 cent\u00edmetro;\n\n3. Testes utilizando imagens reais indicam que o algoritmo de rastreamento apresen-\ntou um resultado satisfat\u00f3rio na estimativa da proje\u00e7\u00e3o do EMD. Foram obtidos\nresultados robustos em v\u00eddeos com baixo contraste e capturado de pontos de vista\n\n\n\nCap\u00edtulo 8. Conclus\u00e3o 96\n\nobl\u00edquos. A fun\u00e7\u00e3o de pesos (Se\u00e7\u00e3o 5.5.1) conseguiu minimizar na maioria dos casos\nimperfei\u00e7\u00f5es na borda do duto;\n\n4. O ponto de vista das c\u00e2meras em rela\u00e7\u00e3o ao duto, assim como a disposi\u00e7\u00e3o dos\npontos da curva no espa\u00e7o influenciam a precis\u00e3o do resultado. Portanto, deve ser\nevitada a captura de imagens em pontos de vistas obl\u00edquos em rela\u00e7\u00e3o \u00e0 segunda\ncomponente principal dos pontos.\n\n8.2 PRINCIPAIS CONTRIBUI\u00c7\u00d5ES\nComo contribui\u00e7\u00f5es desta disserta\u00e7\u00e3o de mestrado, podemos citar a investiga\u00e7\u00e3o\n\ndo cen\u00e1rio de instala\u00e7\u00e3o de dutos sob a \u00f3ptica de vis\u00e3o computacional, explorando fatores\ncomo ilumina\u00e7\u00e3o, c\u00e2meras, caracter\u00edsticas da imagem, etc. Este estudo pode ser expandido\nou reaproveitado em outras solu\u00e7\u00f5es de vis\u00e3o computacional neste mesmo cen\u00e1rio.\n\nO algoritmo para rastreamento est\u00e9reo de dutos contribuiu com o estado da arte de\nrastreamento e detec\u00e7\u00e3o de dutos em ambiente submarino. Embora trate-se de uma t\u00e9cnica\nespec\u00edfica para o cen\u00e1rio do problema, a abordagem estratificada nas dire\u00e7\u00f5es longitudinal\ne transversal pode ser adaptada para resolver outros problemas de rastreamento.\n\nA adapta\u00e7\u00e3o do algoritmo de Xiao e Li (XIAO; LI, 2005) tamb\u00e9m \u00e9 considerada\numa contribui\u00e7\u00e3o. A restri\u00e7\u00e3o de planaridade da curva pode existir em outros problemas\nde reconstru\u00e7\u00e3o 3D de curvas, podendo assim ser aplicada a t\u00e9cnica proposta.\n\nEste trabalho tamb\u00e9m originou um contribui\u00e7\u00e3o cient\u00edfica atrav\u00e9s da publica\u00e7\u00e3o\ndo artigo intitulado \"Stereo Tracking and 3D Reconstruction of Underwater Pipes\" na\nconfer\u00eancia internacional BMVC 2015.\n\nPor fim, podemos citar as seguintes publica\u00e7\u00f5es como contribui\u00e7\u00f5es cient\u00edficas\nindiretas:\n\n1. Saulo Pessoa, Vinicius Cesar, Bernardo Reis, Judith Kelner and Ismael Santos.\nA Segmentation Technique for Flexible Pipes in Deep Underwater Environments.\nProceedings of the British Machine Vision Conference (BMVC), September 2015;\n\n2. Vin\u00edcius Cesar, Thiago Farias, Saulo Pessoa, Samuel Macedo, Judith Kelner, Ismael\nSantos.\"Uncalibrated Image Rectification for Coplanar Stereo Cameras\". International\nJoint Conference on Computer Vision, Imaging and Computer Graphics Theory\n(VISAPP), January 2014;\n\n3. Samuel Macedo, Luis Vasconcelos, Vinicius Cesar, Saulo Pessoa, Judith Kelner.\n\"SKen: A Statistical Test for Removing Outliers in Optical Flow - A 3D Recons-\ntruction Case\". International Joint Conference on Computer Vision, Imaging and\nComputer Graphics Theory (VISAPP), January 2014.\n\n\n\nCap\u00edtulo 8. Conclus\u00e3o 97\n\n8.3 TRABALHOS FUTUROS\nEmbora o objetivo desta disserta\u00e7\u00e3o tenha sido alcan\u00e7ado, ainda h\u00e1 contribui\u00e7\u00f5es\n\nque podem ser realizadas para estender e aperfei\u00e7oar a pesquisa.\n\nDentre uma das modifica\u00e7\u00f5es que podem tornar os resultados mais precisos seria\nincorporar t\u00e9cnicas de filtragem na estimativa do plano. Observou-se nos resultados que o\nplano da curva \u00e9 estimado com um jitter relevante e que muitas vezes este efeito provocou\npicos de erro m\u00e1ximo. Eliminando o jitter com base na premissa de que o movimento\nentre o duto e c\u00e2mera \u00e9 lento ir\u00e1 permitir que uma curva reconstru\u00edda mais precisa seja\nestimada.\n\nOutra melhoria \u00e9 fornecer ao algoritmo de rastreamento a capacidade de adicionar\ntrechos de dutos que surjam na imagem. Na proposta atual, \u00e9 rastreado apenas o trecho\nde duto dado na inicializa\u00e7\u00e3o. Por\u00e9m, se o algoritmo for combinado com alguma t\u00e9cnica\nde detec\u00e7\u00e3o do duto, novos trechos podem ser incorporados ao mesmo tempo em que o\nduto \u00e9 rastreado.\n\nPor fim, este trabalho pode ser estendido para generalizar a t\u00e9cnica de rastrea-\nmento proposta para dutos em cen\u00e1rios arbitr\u00e1rios. A partir da abordagem estratificada\n(rastreamento longitudinal e transversal) pode-se definir outros crit\u00e9rios que definem a\nprobabilidade de um pixel da imagem pertencer ao duto para permitir o uso em imagens\ngen\u00e9ricas.\n\n\n\n98\n\nREFER\u00caNCIAS\n\nABBENA, E.; SALAMON, S.; GRAY, A. Modern differential geometry of curves and\nsurfaces with Mathematica. [S.l.]: CRC press, 2006. 45\n\nAHMED, M. et al. A hybrid parameterization method for nurbs. In: IEEE. Computer\nGraphics, Imaging and Visualization, 2004. CGIV 2004. Proceedings. International\nConference on. [S.l.], 2004. p. 15\u201320. 41\n\nAN, M.; LEE, C. Stereo vision based on algebraic curves. In: IEEE. Pattern Recognition,\n1996., Proceedings of the 13th International Conference on. [S.l.], 1996. v. 1, p. 476\u2013482.\n28\n\nANANDAN, P. A computational framework and an algorithm for the measurement of\nvisual motion. International Journal of Computer Vision, Springer, v. 2, n. 3, p. 283\u2013310,\n1989. 52\n\nANCUTI, C. et al. Enhancing underwater images and videos by fusion. In: IEEE.\nComputer Vision and Pattern Recognition (CVPR), 2012 IEEE Conference on. [S.l.],\n2012. p. 81\u201388. 23\n\nANTICH, J.; ORTIZ, A. Underwater cable tracking by visual feedback. In: Pattern\nRecognition and Image Analysis. [S.l.]: Springer, 2003. p. 53\u201361. 27\n\nASIF, M.; ARSHAD, M. R. An active contour and kalman filter for underwater target\ntracking and navigation. [S.l.]: INTECH Open Access Publisher, 2006. 26, 27\n\nBALASURIYA, A.; URA, T. Multi-sensor fusion for autonomous underwater cable\ntracking. In: IEEE. OCEANS\u201999 MTS/IEEE. Riding the Crest into the 21st Century.\n[S.l.], 1999. v. 1, p. 209\u2013215. 26, 27\n\nBALASURIYA, B. et al. Vision based autonomous underwater vehicle navigation:\nunderwater cable tracking. In: IEEE. OCEANS\u201997. MTS/IEEE Conference Proceedings.\n[S.l.], 1997. v. 2, p. 1418\u20131424. 26, 27\n\nBENHIMANE, S.; MALIS, E. Real-time image-based tracking of planes using efficient\nsecond-order minimization. In: IEEE. Intelligent Robots and Systems, 2004.(IROS 2004).\nProceedings. 2004 IEEE/RSJ International Conference on. [S.l.], 2004. v. 1, p. 943\u2013948. 36\n\nBERTHILSSON, R.; ASTROM, K.; HEYDEN, A. Reconstruction of curves in r 3, using\nfactorization and bundle adjustment. In: IEEE. Computer Vision, 1999. The Proceedings\nof the Seventh IEEE International Conference on. [S.l.], 1999. v. 1, p. 674\u2013679. 29\n\nBERTHILSSON, R.; \u00c5STR\u00d6M, K.; HEYDEN, A. Reconstruction of general curves, using\nfactorization and bundle adjustment. International Journal of Computer Vision, Springer,\nv. 41, n. 3, p. 171\u2013182, 2001. 29\n\nBONIN, F.; BURGUERA, A.; OLIVER, G. Imaging systems for advanced underwater\nvehicles. Journal of Maritime Research, v. 8, n. 1, p. 65\u201386, 2014. 15\n\nBOOR, C. D. A practical guide to splines. Mathematics of Computation, 1978. 41\n\n\n\nRefer\u00eancias 99\n\nBRADSKI, G. Opencv. Dr. Dobb\u2019s Journal of Software Tools, 2000. 68\n\nBRINT, A.; BRADY, M. Stereo matching of curves by least deformation. In: Intelligent\nRobots and Systems \u201989. The Autonomous Mobile Robots and Its Applications. IROS \u201989.\nProceedings., IEEE/RSJ International Workshop on. [S.l.: s.n.], 1989. p. 163\u2013170. 29\n\nBURDINSKY, I.; MYAGOTIN, A. Navigation of autonomous underwater vehicles using\nacoustic and visual data processing. In: Computer Vision in Control Systems-2. [S.l.]:\nSpringer, 2015. p. 231\u2013250. 15\n\nCHEN, H. et al. Exploring robotic applications in offshore oil&amp;gas industry. In: IEEE.\nCyber Technology in Automation, Control, and Intelligent Systems (CYBER), 2014 IEEE\n4th Annual International Conference on. [S.l.], 2014. p. 563\u2013568. 15\n\nDAME, A.; MARCHAND, E. Accurate real-time tracking using mutual information. In:\nIEEE. Mixed and Augmented Reality (ISMAR), 2010 9th IEEE International Symposium\non. [S.l.], 2010. p. 47\u201356. 36\n\nDAVID, A.; JEAN, P. Computer vision: a modern approach. [S.l.]: Prentice-Hall\nEnglewood Cliffs, 2002. 15\n\nDERICHE, R.; FAUGERAS, O. 2-d curve matching using high curvature points:\napplication to stereo vision. In: Pattern Recognition, 1990. Proceedings., 10th International\nConference on. [S.l.: s.n.], 1990. i, p. 240\u2013242 vol.1. 29\n\nDRAP, P. et al. The rov 3d project: Deep-sea underwater survey using photogrammetry:\nApplications for underwater archaeology. Journal on Computing and Cultural Heritage\n(JOCCH), ACM, v. 8, n. 4, p. 21, 2015. 15\n\nFARIN, G. Curves and surfaces for computer-aided geometric design: a practical guide.\n[S.l.]: Elsevier, 2014. 31, 41\n\nFAUGERAS, O.; PAPADOPOULO, T. A theory of the motion fields of curves.\nInternational Journal of Computer Vision, Springer, v. 10, n. 2, p. 125\u2013156, 1993. 29\n\nFLETCHER, R. Practical methods of optimization. [S.l.]: John Wiley &amp; Sons, 2013. 31\n\nFORESTI, G. L.; GENTILI, S. A vision based system for object detection in underwater\nimages. International Journal of Pattern Recognition and Artificial Intelligence, v. 14,\nn. 02, p. 167\u2013188, 2000. 26, 27\n\nFRITZKOWSKI, P.; KAMINSKI, H. Dynamics of a rope modeled as a multi-body system\nwith elastic joints. Computational Mechanics, Springer-Verlag, v. 46, n. 6, p. 901\u2013909,\n2010. ISSN 0178-7675. 21\n\nFUSIELLO, A.; IRSARA, L. Quasi-euclidean uncalibrated epipolar rectification. In:\nPattern Recognition, 2008. ICPR 2008. 19th International Conference on. [S.l.: s.n.], 2008.\np. 1\u20134. ISSN 1051-4651. 35\n\nFUSIELLO, A.; TRUCCO, E.; VERRI, A. A compact algorithm for rectification of stereo\npairs. Mach. Vision Appl., Springer-Verlag New York, Inc., Secaucus, NJ, USA, v. 12,\nn. 1, p. 16\u201322, jul. 2000. ISSN 0932-8092. 35, 55\n\n\n\nRefer\u00eancias 100\n\nGARCIA, R. et al. Positioning an underwater vehicle through image mosaicking. In:\nIEEE. Robotics and Automation, 2001. Proceedings 2001 ICRA. IEEE International\nConference on. [S.l.], 2001. v. 3, p. 2779\u20132784. 15\n\nGRAU, A.; CLIMENT, J.; ARANDA, J. Real-time architecture for cable tracking using\ntexture descriptors. In: IEEE. OCEANS\u201998 Conference Proceedings. [S.l.], 1998. v. 3, p.\n1496\u20131500. 27\n\nGUENNEBAUD, G.; JACOB, B. et al. Eigen v3. 2010. Http://eigen.tuxfamily.org. 68\n\nHANSEN, P. et al. Stereo visual odometry for pipe mapping. In: Intelligent Robots\nand Systems (IROS), 2011 IEEE/RSJ International Conference on. [S.l.: s.n.], 2011. p.\n4020\u20134025. ISSN 2153-0858. 25\n\nHANSEN, P. et al. Pipe mapping with monocular fisheye imagery. In: Intelligent Robots\nand Systems (IROS), 2013 IEEE/RSJ International Conference on. [S.l.: s.n.], 2013. p.\n5180\u20135185. ISSN 2153-0858. 25\n\nHARON, H. et al. Parameterization method on b-spline curve. Mathematical Problems in\nEngineering, Hindawi Publishing Corporation, v. 2012, 2012. 31, 41\n\nHARTLEY, R. I. Theory and Practice of Projective Rectification. 1998. 35\n\nHARTLEY, R. I.; ZISSERMAN, A. Multiple View Geometry in Computer Vision. Second.\n[S.l.]: Cambridge University Press, ISBN: 0521540518, 2004. 31, 92\n\nHONG, W.; MA, Y.; YU, Y. Reconstruction of 3-d symmetric curves from perspective\nimages without discrete features. In: Computer Vision-ECCV 2004. [S.l.]: Springer, 2004.\np. 533\u2013545. 29\n\nHORGAN, J.; TOAL, D. Review of machine vision applications in unmanned underwater\nvehicles. In: Control, Automation, Robotics and Vision, 9th International Conference on.\n[S.l.: s.n.], 2006. p. 1\u20136. 23\n\nHORGAN, J.; TOAL, D. Computer Vision Applications in the Navigation of Unmanned\nUnderwater Vehicles. [S.l.]: INTECH Open Access Publisher, 2009. 15\n\nHOSCHEK, J.; LASSER, D.; SCHUMAKER, L. L. Fundamentals of computer aided\ngeometric design. [S.l.]: AK Peters, Ltd., 1993. 41\n\nIQBAL, K. et al. Underwater image enhancement using an integrated colour model.\nIAENG International Journal of Computer Science, International Association of\nEngineers., v. 32, n. 2, p. 239\u2013244, 2007. 23\n\nJIAN-DONG, Z. et al. 3d curve structure reconstruction from a sparse set of unordered\nimages. Computers in industry, Elsevier, v. 60, n. 2, p. 126\u2013134, 2009. 29\n\nJOLLIFFE, I. Principal component analysis. [S.l.]: Wiley Online Library, 2002. 65\n\nKALMAN, R. E. A new approach to linear filtering and prediction problems. Journal of\nFluids Engineering, American Society of Mechanical Engineers, v. 82, n. 1, p. 35\u201345, 1960.\n79\n\n\n\nRefer\u00eancias 101\n\nKAMINSKI, J. Y. et al. Multiple view geometry of non-planar algebraic curves. In: IEEE.\nComputer Vision, 2001. ICCV 2001. Proceedings. Eighth IEEE International Conference\non. [S.l.], 2001. v. 2, p. 181\u2013186. 28, 29\n\nKAMINSKI, J. Y.; SHASHUA, A. On calibration and reconstruction from planar curves.\nIn: Computer Vision-ECCV 2000. [S.l.]: Springer, 2000. p. 678\u2013694. 28\n\nKEDEM, K.; YARMOVSKI, Y. Curve based stereo matching using the minimum hausdorff\ndistance. In: ACM. Proceedings of the twelfth annual symposium on Computational\ngeometry. [S.l.], 1996. p. 415\u2013418. 29\n\nKIA, C.; ARSHAD, M. R. Robotics vision-based heuristic reasoning for underwater target\ntracking and navigation. arXiv preprint cs/0601064, 2006. 26, 27\n\nLEE, E. T. Choosing nodes in parametric curve interpolation. Computer-Aided Design,\nElsevier, v. 21, n. 6, p. 363\u2013370, 1989. 41\n\nLEVENBERG, K. A method for the solution of certain non\u2013linear problems in least\nsquares. Quarterly of Applied Mathematics, 1944. 40\n\nLI, G.; ZUCKER, S. W. Contextual inference in contour-based stereo correspondence.\nInternational Journal of Computer Vision, Springer, v. 69, n. 1, p. 59\u201375, 2006. 29\n\nLI, L.; MA, S. D. 3d pose estimation from an n-degree planar curved feature in\ntwo perspective views. In: IEEE. Pattern Recognition, 1996., Proceedings of the 13th\nInternational Conference on. [S.l.], 1996. v. 1, p. 374\u2013377. 28\n\nLIM, C.-G. A universal parametrization in b-spline curve and surface interpolation.\nComputer Aided Geometric Design, Elsevier, v. 16, n. 5, p. 407\u2013422, 1999. 41\n\nLOCKWOOD, E. H. A book of curves. [S.l.]: Cambridge University Press, 1971. 21, 68\n\nLOOP, C.; ZHANG, Z. Computing rectifying homographies for stereo vision. In: IEEE.\nComputer Vision and Pattern Recognition, 1999. IEEE Computer Society Conference on.\n[S.l.], 1999. v. 1. 35\n\nL\u00dc, W. Curves with chord length parameterization. Computer Aided Geometric Design,\nElsevier, v. 26, n. 3, p. 342\u2013350, 2009. 41\n\nMA, S. D. Conics-based stereo, motion estimation, and pose determination. International\njournal of computer vision, Springer, v. 10, n. 1, p. 7\u201325, 1993. 28\n\nMAI, F.; HUNG, Y. 3d curves reconstruction from multiple images. In: IEEE. Digital\nImage Computing: Techniques and Applications (DICTA), 2010 International Conference\non. [S.l.], 2010. p. 462\u2013467. 29\n\nMARQUARDT, D. W. An algorithm for least-squares estimation of nonlinear parameters.\nJournal of the Society for Industrial &amp; Applied Mathematics, SIAM, v. 11, n. 2, p. 431\u2013441,\n1963. 40\n\nMATSUMOTO, S.; ITO, Y. Real-time vision-based tracking of submarine-cables for\nauv/rov. In: IEEE. OCEANS\u201995. MTS/IEEE. Challenges of Our Changing Global\nEnvironment. Conference Proceedings. [S.l.], 1995. v. 3, p. 1997\u20132002. 26, 27\n\n\n\nRefer\u00eancias 102\n\nNAGLE, F. et al. Vertical connection system for flexible pipes: Offshore tests and pioneer\ninstallation. In: Offshore Technology Conference. [S.l.: s.n.], 1993. 15\n\nNARIMANI, M.; NAZEM, S.; LOUEIPOUR, M. Robotics vision-based system for an\nunderwater pipeline and cable tracker. In: OCEANS 2009 - EUROPE. [S.l.: s.n.], 2009.\np. 1\u20136. 27\n\nNASRABADI, N.; LIU, Y.; CHIANG, J. Stereo vision correspondence using a multichannel\ngraph matching technique. In: Robotics and Automation, 1988. Proceedings., 1988 IEEE\nInternational Conference on. [S.l.: s.n.], 1988. p. 1804\u20131809 vol.3. 29\n\nNGUYEN, H. G.; KAOMEA, P. K.; JR, P. J. H. Machine visual guidance for an\nautonomous undersea submersible. In: INTERNATIONAL SOCIETY FOR OPTICS\nAND PHOTONICS. 32nd Annual Technical Symposium. [S.l.], 1988. p. 82\u201389. 26\n\nORTIZ, A.; OLIVER, G.; FRAU, J. A vision system for underwater real-time control\ntasks. In: IEEE. OCEANS\u201997. MTS/IEEE Conference Proceedings. [S.l.], 1997. v. 2, p.\n1425\u20131430. 26, 27\n\nORTIZ, A.; SIM\u00d3, M.; OLIVER, G. A vision system for an underwater cable tracker.\nMachine vision and applications, Springer, v. 13, n. 3, p. 129\u2013140, 2002. 14, 27\n\nPAJARES, G.; CRUZ, J. M. de la; L\u00d3PEZ-OROZCO, J. A. Relaxation labeling in stereo\nimage matching. Pattern Recognition, Elsevier, v. 33, n. 1, p. 53\u201368, 2000. 29\n\nPAPADOPOULO, T.; FAUGERAS, O. Computing structure and motion of general 3d\ncurves from monocular sequences of perspective images. In: Computer Vision\u2014ECCV\u201996.\n[S.l.]: Springer, 1996. p. 696\u2013708. 29\n\nPESSOA, S. et al. A segmentation technique for flexible pipes in deep underwater\nenvironments. In: JONES, X. X. M. W.; TAM, G. K. L. (Ed.). Proceedings of the British\nMachine Vision Conference (BMVC). [S.l.]: BMVA Press, 2015. p. 135.1\u2013135.12. ISBN\n1-901725-53-7. 17\n\nPIEGL, L.; TILLER, W. The NURBS book. [S.l.]: Springer Science &amp; Business Media,\n2012. 31\n\nPORRILL, J.; POLLARD, S. Curve matching and stereo calibration. Image and Vision\nComputing, Elsevier, v. 9, n. 1, p. 45\u201350, 1991. 29\n\nQUAN, L. Conic reconstruction and correspondence from two views. Pattern Analysis\nand Machine Intelligence, IEEE Transactions on, IEEE, v. 18, n. 2, p. 151\u2013160, 1996. 28\n\nRIPLEY, B. D. Pattern recognition and neural networks. [S.l.]: Cambridge university\npress, 1996. 27\n\nROBERT, L.; FAUGERAS, O. D. Curve-based stereo: Figural continuity and curvature.\nIn: IEEE. Computer Vision and Pattern Recognition, 1991. Proceedings CVPR\u201991., IEEE\nComputer Society Conference on. [S.l.], 1991. p. 57\u201362. 29\n\nROH, S. et al. Actively steerable in-pipe inspection robots for underground urban gas\npipelines. In: Robotics and Automation, 2001. Proceedings 2001 ICRA. IEEE International\nConference on. [S.l.: s.n.], 2001. v. 1, p. 761\u2013766 vol.1. ISSN 1050-4729. 25\n\n\n\nRefer\u00eancias 103\n\nSATO, J.; CIPOLLA, R. Quasi-invariant parameterisations and matching of curves in\nimages. International Journal of Computer Vision, Springer, v. 28, n. 2, p. 117\u2013136, 1998.\n29\n\nSCHMID, C.; ZISSERMAN, A. The geometry and matching of lines and curves over\nmultiple views. International Journal of Computer Vision, Springer, v. 40, n. 3, p.\n199\u2013233, 2000. 29\n\nSHAN, Y.; ZHANG, Z. New measurements and corner-guidance for curve matching with\nprobabilistic relaxation. International Journal of Computer Vision, Springer, v. 46, n. 2, p.\n157\u2013171, 2002. 29\n\nSUN, F.; YU, J.; XU, D. Visual measurement and control for underwater robots: A survey.\nIn: IEEE. Control and Decision Conference (CCDC), 2013 25th Chinese. [S.l.], 2013. p.\n333\u2013338. 15\n\nSZELISKI, R. Computer vision: algorithms and applications. [S.l.]: Springer Science &amp;\nBusiness Media, 2010. 22, 31, 34\n\nTHIRION, B. et al. Fusion of color, shading and boundary information for factory pipe\nsegmentation. In: Computer Vision and Pattern Recognition, 2000. Proceedings. IEEE\nConference on. [S.l.: s.n.], 2000. v. 2, p. 349\u2013356 vol.2. ISSN 1063-6919. 27\n\nTRIGGS, B. et al. Bundle adjustment\u2014a modern synthesis. In: Vision algorithms: theory\nand practice. [S.l.]: Springer, 2000. p. 298\u2013372. 54\n\nWANG, W.; POTTMANN, H.; LIU, Y. Fitting b-spline curves to point clouds by\ncurvature-based squared distance minimization. ACM Transactions on Graphics (ToG),\nACM, v. 25, n. 2, p. 214\u2013238, 2006. 31, 41, 56, 63, 93\n\nWHITCOMB, L. L. Underwater robotics: Out of the research laboratory and into the field.\nIn: IEEE. Robotics and Automation, 2000. Proceedings. ICRA\u201900. IEEE International\nConference on. [S.l.], 2000. v. 1, p. 709\u2013716. 14\n\nWU, H.; YU, Y. Photogrammetric reconstruction of free-form objects with curvilinear\nstructures. The Visual Computer, Springer, v. 21, n. 4, p. 203\u2013216, 2005. 29\n\nXAVIER, M. Instala\u00e7\u00e3o de dutos flex\u00edveis em \u00e1guas ultraprofundas. Disserta\u00e7\u00e3o (Mestrado)\n\u2014 COPPE/UFRJ, Rio de Janeiro, 2006. 15\n\nXIAO, Y.; DING, M.; PENG, J. B-spline based stereo for 3d reconstruction of line-like\nobjects using affine camera model. International journal of pattern recognition and\nartificial intelligence, World Scientific, v. 15, n. 02, p. 347\u2013358, 2001. 29\n\nXIAO, Y. J.; LI, Y. Optimized stereo reconstruction of free-form space curves based on a\nnonuniform rational b-spline model. JOSA A, Optical Society of America, v. 22, n. 9, p.\n1746\u20131762, 2005. 16, 17, 29, 30, 54, 55, 96\n\nZHANG, T.-d. et al. Vision-based system of auv for an underwater pipeline tracker. China\nOcean Engineering, Springer, v. 26, p. 547\u2013554, 2012. 15, 27\n\nZINGARETTI, P. et al. Imaging approach to real-time tracking of submarine pipeline. In:\nINTERNATIONAL SOCIETY FOR OPTICS AND PHOTONICS. Electronic Imaging:\nScience &amp; Technology. [S.l.], 1996. p. 129\u2013137. 27\n\n\n\nRefer\u00eancias 104\n\nZINGARETTI, P.; ZANOLI, S. M. Robust real-time detection of an underwater pipeline.\nEngineering Applications of Artificial Intelligence, Elsevier, v. 11, n. 2, p. 257\u2013268, 1998.\n27\n\n\n\tAgradecimentos\n\tEp\u00edgrafe\n\tResumo\n\tAbstract\n\tLista de ilustra\u00e7\u00f5es\n\tLista de tabelas\n\tSum\u00e1rio\n\tIntrodu\u00e7\u00e3o\n\tMotiva\u00e7\u00e3o\n\tObjetivo\n\tVis\u00e3o geral dos algoritmos propostos\n\tRastreamento\n\tReconstru\u00e7\u00e3o\n\n\tPrincipais desafios\n\tContribui\u00e7\u00f5es\n\tEstrutura do documento\n\n\tCen\u00e1rio\n\tPosicionamento\n\tDuto\n\tSistema de c\u00e2meras\n\tC\u00e2meras\n\tIlumina\u00e7\u00e3o\n\tImagens\n\tConsidera\u00e7\u00f5es finais\n\n\tTrabalhos relacionados\n\tMapeamento interno de dutos\n\tRastreamento e detec\u00e7\u00e3o de dutos e cabos\n\tReconstru\u00e7\u00e3o de curvas\n\tConsidera\u00e7\u00f5es finais\n\n\tFundamentos\n\tNota\u00e7\u00e3o\n\tVis\u00e3o computacional\n\tGeometria Projetiva\n\tCoordenadas homog\u00eaneas\n\tTransforma\u00e7\u00f5es projetivas\n\n\tModelo de c\u00e2mera pinhole\n\tGeometria epipolar\n\tRetifica\u00e7\u00e3o est\u00e9reo\n\tRela\u00e7\u00e3o entre proje\u00e7\u00f5es de pontos coplanares\n\n\tNURBS\n\tDefini\u00e7\u00e3o\n\tInvari\u00e2ncia a transforma\u00e7\u00f5es projetivas\n\n\tM\u00ednimos quadrados\n\tAjuste de curva\n\tConsidera\u00e7\u00f5es finais\n\n\tT\u00e9cnica proposta de rastreamento de dutos\n\tFormula\u00e7\u00e3o\n\tRegi\u00e3o de proje\u00e7\u00e3o do duto\n\tTransforma\u00e7\u00e3o da imagem\n\tRastreamento longitudinal\n\tRastreamento transversal\n\tFun\u00e7\u00e3o de pesos\n\tSolu\u00e7\u00e3o utilizando m\u00ednimos quadrados\n\n\tAproxima\u00e7\u00f5es\n\tImplementa\u00e7\u00e3o\n\tConsidera\u00e7\u00f5es finais\n\n\tT\u00e9cnica proposta para reconstru\u00e7\u00e3o de curvas planares\n\tReconstru\u00e7\u00e3o est\u00e9reo de NURBS\n\tRestri\u00e7\u00e3o de planaridade da curva\n\tImpondo a restri\u00e7\u00e3o de planaridade\n\tParametriza\u00e7\u00e3o da curva\n\tN\u00famero de pontos de controle\n\tAlgoritmo\n\tFatores que influenciam a acur\u00e1cia da curva reconstru\u00edda\n\tConsidera\u00e7\u00f5es finais\n\n\tResultados\n\tImplementa\u00e7\u00e3o\n\tMetodologia dos experimentos\n\tExperimentos em laborat\u00f3rio\n\tAmbiente aqu\u00e1tico\n\tV\u00eddeo 1\n\tV\u00eddeo 2\n\tV\u00eddeo 3\n\tV\u00eddeo 4\n\tPrincipais conclus\u00f5es do experimento\n\n\tAmbiente a\u00e9reo\n\tDescri\u00e7\u00e3o do experimento\n\tAn\u00e1lise dos resultados\n\n\n\tExperimentos em ambiente real\n\tV\u00eddeo 1\n\tV\u00eddeo 2\n\tV\u00eddeo 3\n\tV\u00eddeo 4\n\tV\u00eddeo 5\n\tCasos de estresse\n\n\tAn\u00e1lise geral\n\tErro de reproje\u00e7\u00e3o\n\tItera\u00e7\u00f5es\n\tTempo\n\n\tConsidera\u00e7\u00f5es finais\n\n\tConclus\u00e3o\n\tPrincipais conclus\u00f5es\n\tPrincipais contribui\u00e7\u00f5es\n\tTrabalhos futuros\n\n\tRefer\u00eancias"}]}}}