{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.19414"}, {"@name": "filename", "#text": "2765_000976241.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "UNIVERSIDADE FEDERAL DO RIO GRANDE DO SUL \n\nESCOLA DE ENGENHARIA \n\nTRABALHO DE DIPLOMA\u00c7\u00c3O EM ENGENHARIA DE \nCONTROLE E AUTOMA\u00c7\u00c3O \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nControle antigolfadas na produ\u00e7\u00e3o \nde petr\u00f3leo por gas-lift \n\n \n\n \n\n \n\n \n\nAutor: Leonardo de Mattos Rolim \n\nOrientador: Prof. Dr. Marcelo Farenzena \n\n \n\n \n\n \n\nPorto Alegre, 8 de dezembro de 2014 \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift ii \n\nSu m\u00e1 r i o  \n\n \n\nSum\u00e1rio ii \n\nAgradecimentos iv \n\nResumo v \n\nAbstract vi \n\nLista de Figuras vii \n\nLista de Tabelas ix \n\nLista de S\u00edmbolos x \n\nLista de Abreviaturas e Siglas xi \n\n1 Introdu\u00e7\u00e3o 1 \n\n1.1 Objetivos 1 \n\n1.2 Estrutura do Trabalho 1 \n\n2 Revis\u00e3o Bibliogr\u00e1fica 2 \n\n2.1 Extra\u00e7\u00e3o e produ\u00e7\u00e3o de petr\u00f3leo 2 \n\n2.1.1 Sistemas para extra\u00e7\u00e3o 2 \n\n2.2 Escoamento multif\u00e1sico e golfadas 2 \n\n2.2.1 Caracter\u00edsticas de bifurca\u00e7\u00e3o e ciclo limite 4 \n2.2.2 Modelagem matem\u00e1tica 4 \n\n2.3 Otimiza\u00e7\u00e3o da aloca\u00e7\u00e3o de gas-lift 5 \n\n2.4 Controle regulat\u00f3rio e garantia de escoamento 6 \n\n2.4.1 Instrumenta\u00e7\u00e3o dificultada 6 \n2.4.2 Estrat\u00e9gias cl\u00e1ssicas e pr\u00e1tica de controle 7 \n2.4.3 Controle n\u00e3o linear e controle robusto 7 \n2.4.4 Infer\u00eancia das press\u00f5es utilizando observadores lineares e n\u00e3o-lineares 8 \n2.4.5 Terminologia da Instrumenta\u00e7\u00e3o 9 \n\n3 Materiais e M\u00e9todos 10 \n\n3.1 Modelo do processo 10 \n\n3.2 Metodologia computacional de resolu\u00e7\u00e3o 14 \n\n3.3 Formula\u00e7\u00e3o do Problema 16 \n\n3.3.1 Acoplamento dos sistemas 16 \n3.3.2 Sele\u00e7\u00e3o da estrutura para controle regulat\u00f3rio 16 \n3.3.3 Denomina\u00e7\u00e3o dos controladores 16 \n\n4 Resultados e discuss\u00f5es 17 \n\n4.1 Modelo com vaz\u00f5es de \u00f3leo e g\u00e1s dependente das press\u00f5es no po\u00e7o 17 \n\n4.1.1 Acoplamento dos sistemas 17 \n\n4.2 Bifurca\u00e7\u00e3o do modelo proposto 17 \n\n4.2.1 Discuss\u00f5es 18 \n\n4.3 Controladores utilizando os sensores no fundo do mar 18 \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim iii \n\n4.3.1 Experimento 1: Controladores com ??? (TPT) e ??? (PDG-TPT) como CVs 18 \n4.3.2 Satura\u00e7\u00e3o da a\u00e7\u00e3o de controle e perda de controlabilidade 20 \n4.3.3 Compara\u00e7\u00e3o dos controladores do po\u00e7o 22 \n\n4.4 Controladores utilizando os sensores na plataforma 23 \n\n4.4.1 Limites de estabilidade para ??? (Pmon) e (??? ? ???) (TPT-Pmon) 23 \n\n4.5 Limita\u00e7\u00f5es de instrumenta\u00e7\u00e3o: atuadores e sensores 24 \n\n4.5.1 Resultados dos degraus em malha fechada. 25 \n\n4.6 Converg\u00eancia do observador n\u00e3o linear simplificado 26 \n\n4.6.1 Discuss\u00e3o 26 \n\n5 Conclus\u00f5es e Trabalhos Futuros 27 \n\n5.1 Trabalhos futuros 27 \n\n5.1.1 An\u00e1lise de robustez 27 \n5.1.2 Conex\u00e3o com camada supervis\u00f3ria 27 \n\n6 Refer\u00eancias 28 \n\n7 Ap\u00eandices 31 \n\n7.1 Modelo em diagrama de blocos do Simulink 31 \n\n7.2 S-functions utilizadas no MATLAB 32 \n\n7.2.1 Modelo flowline-riser 32 \n7.2.2 Modelo po\u00e7o com eleva\u00e7\u00e3o por gas-lift 36 \n7.2.3 Observador de estados 39 \n\n \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift iv \n\nA gra d e c i me nto s  \n\n \n\nDedico este trabalho aos meus pais, Ana Elisa e Otavio, por todo o suporte que sempre me \nderam ao longo desta trajet\u00f3ria de vida. Minha fam\u00edlia \u00e9 o mais importante para mim, e \ntenho certeza de que eles me moldaram em como sou hoje e devo tudo a eles e a minhas \nduas irm\u00e3s, Rafaela e Fabiane. Agrade\u00e7o tamb\u00e9m a minha parceira Miroo e sua fam\u00edlia, por \ntodo o suporte e companheirismo nestes \u00faltimos anos.  \n\nAgrade\u00e7o tamb\u00e9m a meus orientadores e professores com quem tive contato nesta \ntrajet\u00f3ria, em especial aos meus professores orientadores Bor-chin Chang, Marcelo \nFarenzena, e Harry Kwatny, com os quais aprendi muito mais que conceitos e abordagens \nde engenharia. \n\nA meus colegas de universidade na UFRGS e na Drexel e aos engenheiros que trabalham \ncomigo todos os dias na TriSolutions, meu sincero agradecimento por todos os \nensinamentos e momentos passados juntos nesta trajet\u00f3ria na engenharia.  \n\n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim v \n\nRe s u mo  \n\nNeste trabalho, uma estrutura de controle antigolfadas em sistemas de extra\u00e7\u00e3o e \nprodu\u00e7\u00e3o de petr\u00f3leo com eleva\u00e7\u00e3o artificial \u00e9 apresentada, levando em conta diferentes \ncasos de disponibilidade de instrumenta\u00e7\u00e3o. O principal objetivo \u00e9 a maximiza\u00e7\u00e3o da \nprodu\u00e7\u00e3o e a supress\u00e3o do regime de escoamento em golfadas, focando na robustez a \nfalhas, ru\u00eddo ou indisponibilidade da instrumenta\u00e7\u00e3o submarina, que possui dif\u00edcil \nmanuten\u00e7\u00e3o.  \n\nA escolha de uma estrutura de controle \u00e9 realizada, com o uso das melhores vari\u00e1veis \ncontroladas dispon\u00edveis segundo os crit\u00e9rios de estabiliza\u00e7\u00e3o e produ\u00e7\u00e3o, tendo como base \nsimula\u00e7\u00f5es din\u00e2micas realizadas com modelos n\u00e3o lineares simplificados. Como estrat\u00e9gia \npara casos em que falhas na instrumenta\u00e7\u00e3o ocorrem, uma infer\u00eancia de vari\u00e1veis de \ninteresse \u00e9 tamb\u00e9m proposta e sua converg\u00eancia testada de maneira superficial atrav\u00e9s de \nsimula\u00e7\u00f5es.  \n\nUtilizando os resultados do trabalho, \u00e9 poss\u00edvel verificar que a utiliza\u00e7\u00e3o de vari\u00e1veis no \npo\u00e7o \u00e9 essencial para o melhor controle desse sistema. Ressalvas no entanto devem ser \nfeitas com rela\u00e7\u00e3o \u00e0 simplicidade dos modelos utilizados, e trabalhos futuros s\u00e3o sugeridos \npara continuidade da pesquisa em sistemas experimentais ou modelos mais rigorosos. \n\nPALAVRAS-CHAVE: Explora\u00e7\u00e3o offshore de petr\u00f3leo, eleva\u00e7\u00e3o artificial por gas-lift, \ncontrole antigolfadas, ciclos limites, observadores n\u00e3o lineares.  \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift vi \n\nA bst ra c t  \n\nThis paper explores an antislugging control structure for oil production and extraction \nsystems with artificial lift, taking into account different cases of availability of \ninstrumentation. The main objective is the maximization of production and the abolition of \nthe flow regime in gulps, focusing on robustness to failure, noise or unavailability of \nunderwater instrumentation, which has difficult to maintain. \n\nThis work presents methods and results for the choice of a control structure with the \nusage of the best available controlled variables according to the criteria of stabilization of \npressures and flows and maximum production. The evaluation is based on dynamic \nsimulations performed with simplified nonlinear models. As a strategy for cases where \nfailures occur in the instrumentation, an inference of variables of interest is also proposed \nand superficially tested for convergence through simulations. \n\nUsing the results of the work, we can see that the use of variables in the well is essential \nfor better control of this system. However, reservations must be made with respect to the \nsimplicity of the models used, and future work is suggested for continued research with \nexperimental systems or commercial rigorous models for multiphase flow. \n\nKEYWORDS Offshore oil production, artificial lifting by gas-lift, antislugging control, \nlimit cycles, nonlinear observer.  \n\n \n\n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim vii \n\nLi sta  d e  F i gu ra s  \n\n \n\nFigura 2.1 - Vis\u00e3o esquem\u00e1tica de um campo de extra\u00e7\u00e3o. .................................................. 2 \n\nFigura 2.2 \u2013 Equipamentos para extra\u00e7\u00e3o e eleva\u00e7\u00e3o de petr\u00f3leo no fundo do mar........... 2 \n\nFigura 2.3 \u2013 Regimes de escoamento bif\u00e1sico em dutos verticais. ....................................... 3 \n\nFigura 2.4 \u2013 Diagrama de bifurca\u00e7\u00e3o e ciclo limite em fun\u00e7\u00e3o da abertura da v\u00e1lvula choke \nde produ\u00e7\u00e3o. .......................................................................................................................... 3 \n\nFigura 2.5 - Diagrama de bifurca\u00e7\u00e3o em fun\u00e7\u00e3o da abertura da v\u00e1lvula choke. ................... 4 \n\nFigura 2.6 \u2013 Produ\u00e7\u00e3o de petr\u00f3leo como fun\u00e7\u00e3o da vaz\u00e3o de gas-lift. ................................. 4 \n\nFigura 2.7 - Compara\u00e7\u00e3o de diagramas de bifurca\u00e7\u00e3o das press\u00f5es do topo e do fundo de \num riser entre modelo mecanicista aproximado e valores obtidos experimentalmente. ... 5 \n\nFigura 2.8 - Distribui\u00e7\u00e3o de g\u00e1s natural para \u00e1rvores de natal na eleva\u00e7\u00e3o artificial. .......... 5 \n\nFigura 2.9 - Diagrama esquem\u00e1tico de po\u00e7o com eleva\u00e7\u00e3o por gas-lift. .............................. 5 \n\nFigura 2.10 \u2013 Lugar das ra\u00edzes de lineariza\u00e7\u00e3o com sensor de press\u00e3o no topo do riser. .... 6 \n\nFigura 2.11 \u2013 Malha de override de com controlador PIC em cascata. ................................. 7 \n\nFigura 2.12 - Controle em cascata utilizando sensores na plataforma. ................................ 7 \n\nFigura 2.13 \u2013 Comparativo de robustez de controladores lineares antigolfadas. ................ 8 \n\nFigura 3.1 - Generaliza\u00e7\u00e3o do modelo proposto por Storkaas com uma \u201cv\u00e1lvula virtual\u201d. 11 \n\nFigura 3.2 - Modelo em espa\u00e7o de estados do subsistema po\u00e7o por gas-lift. .................... 14 \n\nFigura 3.3 - Modelo em espa\u00e7o de estados do sistema pipeline-riser ................................ 15 \n\nFigura 3.4 \u2013 Modelo completo com ambos os sistemas acoplados. ................................... 15 \n\nFigura 4.1- Diagrama de bifurca\u00e7\u00e3o da produ\u00e7\u00e3o m\u00e1ssica de l\u00edquido com ??????=20%. .. 17 \n\nFigura 4.2 - Bifurca\u00e7\u00e3o das press\u00f5es no fundo do riser e do po\u00e7o para ??????=20%. ...... 18 \n\nFigura 4.3 \u2013 Gr\u00e1ficos CV/MV do Controlador 1 na compara\u00e7\u00e3o do Experimento 1. .......... 19 \n\nFigura 4.4 Vaz\u00f5es m\u00e1ssicas de g\u00e1s e \u00f3leo no Experimento 1 (CVs no po\u00e7o). ..................... 19 \n\nFigura 4.5 Vaz\u00f5es m\u00e1ssicas de g\u00e1s e \u00f3leo no Experimento 1 (CVs no po\u00e7o). ..................... 20 \n\nFigura 4.6 - Diferen\u00e7a de press\u00e3o no po\u00e7o (???-???) com a satura\u00e7\u00e3o da choke. ........... 20 \n\nFigura 4.7 - Perda de controlabilidade do sistema devido \u00e0 satura\u00e7\u00e3o da choke ............... 20 \n\nFigura 4.8 - Oscila\u00e7\u00f5es nas vaz\u00f5es m\u00e1ssicas de produ\u00e7\u00e3o ap\u00f3s satura\u00e7\u00e3o da choke. ........ 21 \n\nFigura 4.9 - Diferen\u00e7a de press\u00e3o no po\u00e7o (???-???) com anti-reset limitado. ............... 21 \n\nFigura 4.10 - Abertura da v\u00e1lvula choke de produ\u00e7\u00e3o com anti-reset limitado. ................. 21 \n\nFigura 4.11 - Vaz\u00f5es de produ\u00e7\u00e3o de g\u00e1s e l\u00edquido com anti-reset modificado. ................ 22 \n\nFigura 4.12 - Compara\u00e7\u00e3o do uso de medidas de press\u00e3o na flowline e na plataforma. ... 23 \n\nFigura 4.13 \u2013 Seguimento de trajet\u00f3ria utilizando medi\u00e7\u00f5es no po\u00e7o e limita\u00e7\u00f5es de \ninstrumenta\u00e7\u00e3o e de din\u00e2mica do atuador. ........................................................................ 24 \n\nFigura 4.14 \u2013 Press\u00f5es no do po\u00e7o com estima\u00e7\u00e3o de estados a partir de sinal ruidoso. .. 24 \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift viii \n\nFigura 4.15 \u2013 Degraus em malha fechada com controladores proporcionais. ................... 25 \n\nFigura 4.16 \u2013 Testes de degrau em malha fechada utilizados na sintonia. ......................... 26 \n\nFigura 4.17 - Estima\u00e7\u00e3o da press\u00e3o no fundo do po\u00e7o ....................................................... 26 \n\n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim ix \n\nLi sta  d e  Ta b e l a s  \n\n \n\nTabela 2.1 \u2013 Terminologia da instrumenta\u00e7\u00e3o nos sistemas para extra\u00e7\u00e3o offshore .......... 9 \n\nTabela 4.1 - Compara\u00e7\u00e3o da utiliza\u00e7\u00e3o de sensores no po\u00e7o para ???????? = 40%. ...... 22 \n\nTabela 4.2: Compara\u00e7\u00e3o do uso de sensores na plataforma para ???????? =  40%. ...... 23 \n\n \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift x \n\nLi sta  d e  S\u00ed mb o l o s  \n\n \n\nSistema linha de produ\u00e7\u00e3o-riser \n \n???- Diferen\u00e7a de press\u00e3o entre o fundo e o topo do riser;  \n???  \u2013 Constante multiplicativa para equa\u00e7\u00e3o de perda de carga na linha de produ\u00e7\u00e3o. \n\n?geb \u2013 Massa de g\u00e1s na bolha alongada (estado do sistema linha de produ\u00e7\u00e3o-riser;) \n\n?gr\u2013 Massa de g\u00e1s no interior do riser (estado do sistema linha de produ\u00e7\u00e3o-riser); \n\n?lr\u2013 Massa de l\u00edquido no interior do riser (estado do sistema linha de produ\u00e7\u00e3o-riser);  \n??? \u2013 Press\u00e3o na bolha alongada no interior da linha de produ\u00e7\u00e3o (flowline); \n??? \u2013 Press\u00e3o no topo do riser (medida com o sensor Pmon); \n??? \u2013 Press\u00e3o no fundo do riser;  \n???  \u2013 Press\u00e3o na linha de produ\u00e7\u00e3o, a jusante da v\u00e1lvula on-off de fechamento do po\u00e7o. \n\n?? \u2013 Massa espec\u00edfica m\u00e9dia da fase l\u00edquida.  \n?prod \u2013 Abertura da v\u00e1lvula choke de produ\u00e7\u00e3o \n\n?gout  \u2013 Vaz\u00e3o de sa\u00edda de g\u00e1s do sistema linha de produ\u00e7\u00e3o-riser; \n\n?gv,riser\u2013 Vaz\u00e3o de l\u00edquido atrav\u00e9s da v\u00e1lvula virtual no sistema linha de produ\u00e7\u00e3o-riser; \n\n?lout \u2013 Vaz\u00e3o de sa\u00edda de l\u00edquido (\u00e1gua e \u00f3leo) do sistema linha de produ\u00e7\u00e3o-riser;  \n \n\nSistema po\u00e7o de eleva\u00e7\u00e3o por gas-lift \n \n???- Diferen\u00e7a de press\u00e3o entre o fundo e o topo do tubo de produ\u00e7\u00e3o do po\u00e7o; \n?gc\u2013 Massa de g\u00e1s no interior do casing do po\u00e7o (estado do sistema po\u00e7o por gas-lift); \n\n?gw \u2013 Massa de g\u00e1s no tubo de produ\u00e7\u00e3o (estado do sistema po\u00e7o por gas-lift); \n\n?lw \u2013 Massa de l\u00edquido no tubo de produ\u00e7\u00e3o (estado do sistema po\u00e7o por gas-lift); \n??? \u2013 Press\u00e3o no anular do po\u00e7o; \n??? \u2013 Press\u00e3o no topo do po\u00e7o (medida com o sensor TPT); \n??? \u2013 Press\u00e3o no fundo do po\u00e7o (medida com o sensor PDG); \n\n?well \u2013 Abertura da v\u00e1lvula de produ\u00e7\u00e3o entre o po\u00e7o e a linha de produ\u00e7\u00e3o (on-\noff)  \n?gLift \u2013 Abertura da v\u00e1lvula choke de aloca\u00e7\u00e3o de g\u00e1s para eleva\u00e7\u00e3o \n\n?gGLM \u2013 Vaz\u00e3o de g\u00e1s para eleva\u00e7\u00e3o entre o gas-lift manifold e o casing do po\u00e7o; \n\n?ginRes\u2013 Vaz\u00e3o de g\u00e1s entre o reservat\u00f3rio e o po\u00e7o de extra\u00e7\u00e3o de petr\u00f3leo;  \n\n?gout,well  \u2013 Vaz\u00e3o de sa\u00edda de g\u00e1s do sistema po\u00e7o por gas-lift; \n\n?gv,well\u2013 Vaz\u00e3o de l\u00edquido atrav\u00e9s da v\u00e1lvula unidirecional de gas-lift, no fundo do po\u00e7o; \n\n?linRes\u2013 Vaz\u00e3o de l\u00edquido entre o reservat\u00f3rio e o po\u00e7o de extra\u00e7\u00e3o de petr\u00f3leo;  \n?lout,well  \u2013 Vaz\u00e3o de sa\u00edda de l\u00edquido (\u00e1gua e \u00f3leo) do sistema po\u00e7o por gas-lift; \n \n \n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim xi \n\nLi sta  d e  A b re vi at u ra s  e  Si gl a s  \n\n \n\nANM \u2013 \u00c1rvore de Natal Molhada; \n\nCV \u2013 Vari\u00e1vel Controlada (do ingl\u00eas, Controlled Variable); \n\nEKF \u2013 Filtro de Kalman Estendido (do ingl\u00eas, Extended Kalman Filter); \n\nIMC \u2013 Controle Baseado em Modelo Interno (do ingl\u00eas, Internal Model Control); \n\nMPC \u2013 Controlador Preditivo baseado em Modelo (do ingl\u00eas, Model Predictive Controller); \n\nMV \u2013 Vari\u00e1vel Manipulada (do ingl\u00eas, Manipulated Variable); \n\nNTNU \u2013 Universidade Norueguesa de Ci\u00eancia e Tecnologia; \n\nOLGA \u2013 Software para simula\u00e7\u00e3o de escoamento multif\u00e1sico OLGA 2000\u00ae; \n\nPIC \u2013 Controlador de press\u00e3o na terminologia de instrumenta\u00e7\u00e3o de processos. \n\nPDG \u2013 Sensor de press\u00e3o no fundo do po\u00e7o (do ingl\u00eas, Pressure Downhole Gauge);  \n\nTPT \u2013 Transmissor de press\u00e3o e temperatura no topo do po\u00e7o (do ingl\u00eas, Temperature and \nPressure Transmitter); \n\nUFSC \u2013 Universidade Federal de Santa Catarina; \n\nUKF \u2013 Filtro de Kalman Inodoro (do ingl\u00eas, Unscented Kalman Filter); \n\n \n\n \n\n\n\n\n\n1 Int ro d u \u00e7\u00e3 o  \n\nNo processamento prim\u00e1rio de petr\u00f3leo, o desempenho da separa\u00e7\u00e3o da mistura de \n\u00f3leo, g\u00e1s e \u00e1gua nos separadores trif\u00e1sicos afeta todos equipamentos a jusante na \nplataforma de petr\u00f3leo. A efici\u00eancia da separa\u00e7\u00e3o e a integridade dos equipamentos (como \npr\u00e9-aquecedores de placas da unidade) s\u00e3o fortemente afetadas pelo regime de fluxo de \nchegada do petr\u00f3leo na plataforma (Campos, 2013).  \n\nO regime de golfadas severas, caracterizado por grandes varia\u00e7\u00f5es das vaz\u00f5es e \npress\u00f5es na produ\u00e7\u00e3o nas tubula\u00e7\u00f5es e nos po\u00e7os de petr\u00f3leo s\u00e3o as principais \nperturba\u00e7\u00f5es nesses sistemas, e a garantia de escoamento tem como principal objetivo a \nredu\u00e7\u00e3o ou a elimina\u00e7\u00e3o deste fen\u00f4meno. Para garantir uma opera\u00e7\u00e3o segura e m\u00e1xima \nprodutividade, estas perturba\u00e7\u00f5es devem ser mitigadas. Uma das maneiras de alcan\u00e7ar um \nregime est\u00e1vel \u00e9 com o uso de controle autom\u00e1tico (Storkaas, 2005). \n\nUm dos grandes desafios, do ponto de vista de controle, da produ\u00e7\u00e3o de petr\u00f3leo em \n\u00e1guas profundas decorre da exist\u00eancia dessas instabilidades severas devido ao regime de \nescoamento em golfadas. A estrat\u00e9gia utilizada industrialmente \u00e9 inferir a forma\u00e7\u00e3o da \ngolfada pela press\u00e3o de fundo do po\u00e7o (ou em outros pontos da linha de produ\u00e7\u00e3o ou at\u00e9 \nna plataforma) e atuar nas v\u00e1lvulas de controle para estrangulamento da produ\u00e7\u00e3o para \nevitar a forma\u00e7\u00e3o de golfadas severas. Neste trabalho, \u00e9 estudado o controle do regime de \nescoamento de \u00f3leo e g\u00e1s na eleva\u00e7\u00e3o de petr\u00f3leo em sistemas de extra\u00e7\u00e3o offshore.  \n\n1.1 Objetivos \n\nA defini\u00e7\u00e3o de uma estrutura de controle pr\u00e1tica, capaz de suprimir golfadas, \nestabilizando o escoamento e permitindo a m\u00e1xima produ\u00e7\u00e3o de petr\u00f3leo, tendo em vista \nas restri\u00e7\u00f5es operacionais e recursos de instrumenta\u00e7\u00e3o dispon\u00edveis \u00e9 o objetivo principal \ndeste trabalho. Isso deve ser alcan\u00e7ado com o comando das v\u00e1lvulas de controle de \nprodu\u00e7\u00e3o dos po\u00e7os de maneira robusta, evitando danos aos equipamentos e assegurando \na seguran\u00e7a da equipe operacional. \n\n1.2 Estrutura do Trabalho \n\nO trabalho est\u00e1 organizado da seguinte maneira:  \n\nNo Cap\u00edtulo 2 \u00e9 apresentada uma breve revis\u00e3o bibliogr\u00e1fica sobre a extra\u00e7\u00e3o e \nprodu\u00e7\u00e3o de petr\u00f3leo, escoamento de misturas multif\u00e1sicas, t\u00e9cnicas de supress\u00e3o dos \ndanos causados pelo regime de golfadas e sobre estrat\u00e9gias de controle autom\u00e1tico para \nesses sistemas. \n\nNo Cap\u00edtulo 3 \u00e9 apresentado o desenvolvimento dos modelos, observadores e \nnomenclatura da instrumenta\u00e7\u00e3o para os controladores utilizados na elabora\u00e7\u00e3o dos \nalgoritmos de controle, infer\u00eancia. A formula\u00e7\u00e3o do problema \u00e9 tamb\u00e9m apresentada, \nmostrando a proposta do emprego das t\u00e9cnicas descritas anteriormente para atingir os \nobjetivos do trabalho. \n\nNo Cap\u00edtulo 4, s\u00e3o apresentados resultados das simula\u00e7\u00f5es de malhas de controle do \ntrabalho.  \n\nFinalmente, no Capitulo 5 ser\u00e3o apresentadas as principais conclus\u00f5es do trabalho e \nperspectivas futuras.  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 2 \n\n2 Revi s \u00e3 o  B i b l i o g r\u00e1f i ca  \n\n2.1 Extra\u00e7\u00e3o e produ\u00e7\u00e3o de petr\u00f3leo \n\n2.1.1 Sistemas para extra\u00e7\u00e3o \n\nO petr\u00f3leo \u00e9 extra\u00eddo de reservat\u00f3rios atrav\u00e9s de po\u00e7os at\u00e9 uma estrutura na cabe\u00e7a de \ncada po\u00e7o chamada de \u00e1rvore de natal molhada (ANM). Essas estruturas ficam localizadas \nna \u201ccabe\u00e7a do po\u00e7o\u201d, onde ficam as conex\u00f5es para instrumenta\u00e7\u00e3o e v\u00e1lvulas no fundo do \nmar. Estas \u00e1rvores s\u00e3o utilizadas para conectar as colunas de produ\u00e7\u00e3o dentro dos po\u00e7os \ncom as tubula\u00e7\u00f5es horizontais no fundo do mar denominadas linhas de produ\u00e7\u00e3o \n(flowlines), como mostrado na Figura 2.1.  \n\n A eleva\u00e7\u00e3o do petr\u00f3leo at\u00e9 a plataforma \u00e9 realizada atrav\u00e9s de dutos verticais \ndenominados risers. A mistura multif\u00e1sica de \u00f3leo, g\u00e1s e \u00e1gua \u00e9 extra\u00edda e ent\u00e3o separada \nem um separador trif\u00e1sico antes de seguir para os outros est\u00e1gios prim\u00e1rios de produ\u00e7\u00e3o \nna pr\u00f3pria plataforma. Em po\u00e7os maduros, com baixas press\u00f5es de reservat\u00f3rios e vaz\u00f5es \nde produ\u00e7\u00e3o, estrat\u00e9gias para eleva\u00e7\u00e3o artificial s\u00e3o utilizadas para permitir um aumento \nda produtividade da extra\u00e7\u00e3o (Campos, 2013). Esta t\u00e9cnica de eleva\u00e7\u00e3o \u00e9 respons\u00e1vel por \nmais de 70% do volume de extra\u00e7\u00e3o de petr\u00f3leo no Brasil (Teixeira, 2013). \n\n \n\n \nFigura 2.1 - Vis\u00e3o esquem\u00e1tica de um \n\ncampo de extra\u00e7\u00e3o. \nFonte: (Di Meglio, F. et al., 2012) \n\n  \nFigura 2.2 \u2013 Equipamentos para extra\u00e7\u00e3o e \n\neleva\u00e7\u00e3o de petr\u00f3leo no fundo do mar. \nFonte: (Kammerzell, 2014) \n\n2.2 Escoamento multif\u00e1sico e golfadas \n\nO escoamento multif\u00e1sico de fluidos em um duto pode apresentar distintos regimes \nde escoamento em cada fase, e assim o regime de escoamento multif\u00e1sico \u00e9 classificado \nde maneira emp\u00edrica, baseado em interpreta\u00e7\u00e3o visual (Stasiak, Pagano e Plucenio, 2012). \nFerramentas usais para descrever o comportamento desses sistemas s\u00e3o os mapas de \nregime de escoamento.  \n\nAs classifica\u00e7\u00f5es de escoamento, no entanto, s\u00e3o mais gerais e apresentam caracter\u00edsticas \ncompar\u00e1veis em misturas diferentes (apesar de ocorrerem em diferentes pontos de \nopera\u00e7\u00e3o). Na Figura 2.3, diferentes regimes de escoamento em dutos verticais s\u00e3o \nilustrados. A complexidade da din\u00e2mica em dutos submarinos na extra\u00e7\u00e3o de petr\u00f3leo \u00e9 \nocasionado principalmente por esses regimes de escoamento indesej\u00e1veis da mistura \nextra\u00edda (composta principalmente por g\u00e1s, \u00f3leo e \u00e1gua), como o regime em golfadas. \n\nNa ind\u00fastria de petr\u00f3leo, o escoamento em golfadas se refere a um escoamento n\u00e3o \nhomog\u00eaneo de uma mistura bif\u00e1sica. Apesar de tratar-se geralmente do escoamento de \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 3 \n\nmisturas predominantemente compostas por g\u00e1s, \u00f3leo e \u00e1gua, o escoamento \u00e9 geralmente \naproximado por um escoamento de uma fase l\u00edquida e outra gasosa.  \n\nO regime inst\u00e1vel denominado \u201cgolfadas severas\u201d \u00e9 uma condi\u00e7\u00e3o comum em risers e que \npode causar danos \u00e0s instala\u00e7\u00f5es e redu\u00e7\u00e3o na produ\u00e7\u00e3o de petr\u00f3leo devido ao fluxo \nintermitente. Os impeditivos mais importantes para o aumento da produtividade em \nreservat\u00f3rios offshore s\u00e3o essas instabilidades din\u00e2micas, que impactam diretamente na \nprodu\u00e7\u00e3o m\u00e9dia de petr\u00f3leo (Sinegre, 2006). \n\nDiferentemente dos escoamentos em bolhas dispersas, agitado e anular, a distribui\u00e7\u00e3o \nespacial das fases l\u00edquida e gasosa n\u00e3o s\u00e3o invariantes ao longo do eixo principal das \ntubula\u00e7\u00f5es. Este regime \u00e9 caracterizado pela forma\u00e7\u00e3o de bolhas alongadas de g\u00e1s \nseparadas periodicamente pela fase l\u00edquida (Di Meglio, 2011).  \n\nA principal estrat\u00e9gia utilizada para proteger os equipamentos de superf\u00edcie, que \napresentam limita\u00e7\u00f5es de press\u00e3o e/ou vaz\u00e3o, como separadores gravitacionais, \u00e9 a \nrestri\u00e7\u00e3o de fluxo (ou estrangulamento, em tradu\u00e7\u00e3o livre do ingl\u00eas choking).  \n\nO choking \u00e9 geralmente realizado com o uso de restri\u00e7\u00f5es denominadas v\u00e1lvulas para \nchoke, que ainda podem evitar forma\u00e7\u00e3o de cones de g\u00e1s ou \u00e1gua no reservat\u00f3rio. Estas \nv\u00e1lvulas podem ser instaladas em diferentes pontos do sistema, como na cabe\u00e7a do po\u00e7o \nde produ\u00e7\u00e3o ou na entrada da esta\u00e7\u00e3o de produ\u00e7\u00e3o (Jahanshahi, Skogestad e Lieungh, \n2013). \n\n \n\nFigura 2.3 \u2013 Regimes de escoamento \nbif\u00e1sico em dutos verticais.  \n\nFonte: (Stasiak, Pagano e Plucenio, \n2012) \n\n \nFigura 2.4 \u2013 Diagrama de bifurca\u00e7\u00e3o e ciclo limite \n\nem fun\u00e7\u00e3o da abertura da v\u00e1lvula choke de \nprodu\u00e7\u00e3o. \n\nAdaptado de:(Stasiak, Pagano e Plucenio, 2012). \n\nA instala\u00e7\u00e3o de v\u00e1lvula de controle para choking na \u00e1rvore de natal molhada (ANM) permite \nque a linha de produ\u00e7\u00e3o (flowline) seja sujeita a menor fadiga devido \u00e0s menores press\u00f5es.  \n\nA utiliza\u00e7\u00e3o da v\u00e1lvula choke na esta\u00e7\u00e3o de produ\u00e7\u00e3o (na plataforma) permite uma maior \nfacilidade de controle de press\u00e3o e mudan\u00e7a de abertura da v\u00e1lvula. Em campos de \nextra\u00e7\u00e3o offshore, as limita\u00e7\u00f5es de confiabilidade e manuten\u00e7\u00e3o a centenas ou milhares de \nmetros de profundidade limitam a utiliza\u00e7\u00e3o cont\u00ednua de v\u00e1lvulas no fundo do mar, e assim \nmuitos autores desconsideram o uso destas para controle (Campos, 2013). \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 4 \n\n2.2.1 Caracter\u00edsticas de bifurca\u00e7\u00e3o e ciclo limite \n\nAs transi\u00e7\u00f5es para regimes inst\u00e1veis (ciclos limites) ocorrem em uma superf\u00edcie do \nplano descrito pela abertura da v\u00e1lvula choke de produ\u00e7\u00e3o, como mostrado na Figura 2.4.  \n\nEm sistemas em regimes de escoamento por golfadas, como risers com bloqueio de \ng\u00e1s devido ao terreno ou po\u00e7os de eleva\u00e7\u00e3o por gas-lift ligados a po\u00e7os maduros, um \ndiagrama simplificado de bifurca\u00e7\u00e3o pode ser tra\u00e7ado como uma fun\u00e7\u00e3o da abertura da \nv\u00e1lvula choke de produ\u00e7\u00e3o pode ser tra\u00e7ado como mostrado na Figura 2.5.  \n\n \n\nFigura 2.5 - Diagrama de bifurca\u00e7\u00e3o em \nfun\u00e7\u00e3o da abertura da v\u00e1lvula choke. \n\n(Fonte: Di Meglio et alli, 2012a) \n\n \n\nFigura 2.6 \u2013 Produ\u00e7\u00e3o de petr\u00f3leo como \nfun\u00e7\u00e3o da vaz\u00e3o de gas-lift. \nFonte: (Aamo et al., 2005) \n\nNos sistemas de extra\u00e7\u00e3o de petr\u00f3leo por eleva\u00e7\u00e3o artificial, o tipo de regime de \nescoamento depende tamb\u00e9m do ponto de opera\u00e7\u00e3o em fun\u00e7\u00e3o da inje\u00e7\u00e3o de g\u00e1s natural \na alta press\u00e3o, como mostrado na Figura 2.6. \n\n2.2.2 Modelagem matem\u00e1tica \n\nDevido \u00e0 natureza distribu\u00edda nas longas tubula\u00e7\u00f5es submarinas, modelos \nfenomenol\u00f3gicos rigorosos s\u00e3o adequados para a representa\u00e7\u00e3o da distribui\u00e7\u00e3o das \npress\u00f5es. Exemplos de simuladores comerciais rigorosos deste tipo de escoamento s\u00e3o as \nferramentas computacionais FMC FlowManager\u00ae e OLGA 2000\u00ae (Di Meglio, 2011). \n\nPara fins de controle, diversos modelos foram propostos na literatura visando \ncapturar as instabilidades por cabeceio de anular (fen\u00f4meno provocador de regimes \ninst\u00e1veis de escoamento em po\u00e7os) ou as golfadas ocasionadas devido ao relevo mas \nmantendo uma relativa simplicidade (Jahanshahi e Skogestad, 2011). Modelos emp\u00edricos \ndo comportamento do sistema, foram tamb\u00e9m propostos para estudar diferentes \nestrat\u00e9gias de controle (Stasiak, Pagano e Plucenio, 2012; Kaasa et al., 2008). \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 5 \n\n  \n\nFigura 2.7 - Compara\u00e7\u00e3o de diagramas de bifurca\u00e7\u00e3o das press\u00f5es do topo e do fundo de \num riser entre modelo mecanicista aproximado e valores obtidos experimentalmente.  \n\nFonte: (Jahanshahi, Skogestad e Grotli, 2013)  \n\n2.3 Otimiza\u00e7\u00e3o da aloca\u00e7\u00e3o de gas-lift \n\nDevido \u00e0 natureza de capital parado do petr\u00f3leo na extra\u00e7\u00e3o, quanto maior a \nprodutividade de campos de petr\u00f3leo, melhor a rentabilidade e a velocidade de retorno \ndos investimentos. Assim, economicamente \u00e9 interessante que os po\u00e7os produzam a maior \nquantidade de \u00f3leo, e a eleva\u00e7\u00e3o artificial por g\u00e1s natural \u00e9 uma das estrat\u00e9gias para atingir \neste fim. No entanto, a eleva\u00e7\u00e3o artificial por inje\u00e7\u00e3o de g\u00e1s custa energia, pois uma parte \ndo g\u00e1s extra\u00eddo dos reservat\u00f3rios deve desidratado e comprimido, o que tamb\u00e9m \u00e9 custoso \n(Teixeira, 2013).  \n\nA Figura 2.8 mostra um sistema de distribui\u00e7\u00e3o de g\u00e1s para uma s\u00e9rie de po\u00e7os de \nextra\u00e7\u00e3o. Nestes sistemas, a press\u00e3o no interior de uma tubula\u00e7\u00e3o que liga os \ncompressores a todos os po\u00e7os, chamada de gas lift manifold, \u00e9 regulada pelos sistemas de \ncontrole da plataforma (Camponogara et al., 2010). Como existe um custo para processar \ne comprimir o g\u00e1s (e at\u00e9 mesmo uma invers\u00e3o de ganho quanto \u00e0 inje\u00e7\u00e3o de g\u00e1s, como \npode ser visto na Figura 2.6), um ponto \u00f3timo de aloca\u00e7\u00e3o da g\u00e1s para eleva\u00e7\u00e3o geralmente \npode ser encontrado para cada po\u00e7o utilizando rotinas de otimiza\u00e7\u00e3o (Campos, 2013).  \n\nEstes sistemas afetam a estabilidade do regime de escoamento do sistema de \nextra\u00e7\u00e3o, e dependendo das vaz\u00f5es de inje\u00e7\u00e3o podem tamb\u00e9m ocasionar golfadas. \n\n \n\nFigura 2.8 - Distribui\u00e7\u00e3o de g\u00e1s natural para \n\u00e1rvores de natal na eleva\u00e7\u00e3o artificial. \n\nFonte: (Camponogara et al., 2010). \n\n \n\nFigura 2.9 - Diagrama esquem\u00e1tico de \npo\u00e7o com eleva\u00e7\u00e3o por gas-lift.  \n\nFonte: (Sinegre, Petit e Menegatti, 2006). \n\nDe acordo com Aamo (Aamo et al., 2005), existem duas abordagens principais para eliminar \nessas fortes oscila\u00e7\u00f5es ocasionadas por cabeceio de anular em po\u00e7os com eleva\u00e7\u00e3o por \ngas-lift: \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 6 \n\nI. Aumento da queda de press\u00e3o causada pela fric\u00e7\u00e3o. As op\u00e7\u00f5es geralmente \nutilizadas s\u00e3o a redu\u00e7\u00e3o da abertura na v\u00e1lvula choke de produ\u00e7\u00e3o do po\u00e7o, a \nredu\u00e7\u00e3o do tamanho da v\u00e1lvula de inje\u00e7\u00e3o de gas-lift ou o aumento da vaz\u00e3o de g\u00e1s \npara eleva\u00e7\u00e3o  \n\nII. O desacoplamento da din\u00e2mica do anular com a din\u00e2mica da coluna de produ\u00e7\u00e3o \n(com opera\u00e7\u00e3o de fluxo supercr\u00edtico do g\u00e1s para eleva\u00e7\u00e3o), como por exemplo com \no uso de v\u00e1lvulas de inje\u00e7\u00e3o especiais. \n\nNeste trabalho, a primeira alternativa \u00e9 explorada, utilizando controle autom\u00e1tico para \nregular a queda de press\u00e3o nas v\u00e1lvulas do sistema. \n\n2.4 Controle regulat\u00f3rio e garantia de escoamento  \n\n2.4.1 Instrumenta\u00e7\u00e3o dificultada \n\nDevido \u00e0 localiza\u00e7\u00e3o e \u00e0s condi\u00e7\u00f5es de trabalho, a manuten\u00e7\u00e3o da instrumenta\u00e7\u00e3o \nsubmarina em sistemas de extra\u00e7\u00e3o offshore \u00e9 geralmente impratic\u00e1vel. Como existe a \npossibilidade de falhas para cada um destes equipamentos submarinos, v\u00e1lvulas de \ncontrole e outros atuadores submarinos em geral n\u00e3o s\u00e3o utilizados continuamente \n(Campos, 2013). Sensores e transmissores de sinais tamb\u00e9m podem falhar, o que limita as \nop\u00e7\u00f5es de informa\u00e7\u00e3o em tempo real sobre o po\u00e7o. \n\nA utiliza\u00e7\u00e3o de sensores na plataforma em uma estrat\u00e9gia de controle geralmente \nlimita o desempenho do sistema devido \u00e0 caracter\u00edstica de fase n\u00e3o-m\u00ednima destas \nmedi\u00e7\u00f5es (Jahanshahi, 2013). Assim, a utiliza\u00e7\u00e3o de outras medidas submarinas quando \ndispon\u00edveis ou observadores para infer\u00eancia de vari\u00e1veis de processo \u00e9 recomendada \n(Jahanshahi, Skogestad e Grotli, 2013). Baseado nisso, este trabalho utiliza tamb\u00e9m um \nalgoritmo para infer\u00eancia da press\u00e3o de fundo para valida\u00e7\u00e3o de uma poss\u00edvel estrutura \npara controle caso ocorra falha nos sensores submarinos. \n\n \n\nFigura 2.10 \u2013 Lugar das ra\u00edzes de lineariza\u00e7\u00e3o com sensor de press\u00e3o no topo do riser. \nFonte: (Jahanshahi, Skogestad e Grotli, 2013) \n\nA Figura 2.10 apresenta um gr\u00e1fico do plano complexo de lugar das ra\u00edzes (p\u00f3los e \nzeros) de um sistema linearizado para v\u00e1rias diferentes aberturas da v\u00e1lvula de produ\u00e7\u00e3o \ne estrangulamento do po\u00e7o (v\u00e1lvula choke, representada na Figura pela letra Z).   \n\n-0.1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9\n-0.2\n\n-0.15\n\n-0.1\n\n-0.05\n\n0\n\n0.05\n\n0.1\n\n0.15\n\nReal axis\n\nIm\na\ng\nin\n\na\nry\n\n a\nx\nis\n\n \n\n \n\nZ=5% Z=95%Z=5% Z=95%\n\nZ=15%\n\nZ=20%\n\nZ=30%\n\nZ=45%\n\nZ=60% Z=95%\n\nZ=15%\n\nZ=20%\n\nZ=30%\n\nZ=45%\n\nZ=60%Z=95%\n\nRHP-Zeros\n\nRHP-poles\n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 7 \n\n2.4.2 Estrat\u00e9gias cl\u00e1ssicas e pr\u00e1tica de controle \n\nA estrat\u00e9gia de controle usual \u00e9 inferir a forma\u00e7\u00e3o da golfada utilizando sensores de \npress\u00e3o no po\u00e7o ou na plataforma e atuar na choke de produ\u00e7\u00e3o para evitar a forma\u00e7\u00e3o de \ngolfadas severas. Quando medi\u00e7\u00f5es no po\u00e7o est\u00e3o dispon\u00edveis, estas s\u00e3o geralmente \nutilizadas devido ao melhor desempenho observado com os controladores com acesso a \nelas.  \n\nUm exemplo de uma estrat\u00e9gia com acesso a essas vari\u00e1veis controladas pode ser \nobservado na Figura 2.11. Quando estas medi\u00e7\u00f5es n\u00e3o est\u00e3o dispon\u00edveis, diferentes \nsensores na plataforma podem ser utilizados visando obter mais informa\u00e7\u00f5es para \ncontrolar as golfadas, como mostrado na Figura 2.12. \n\n \nFigura 2.11 \u2013 Malha de override de com \n\ncontrolador PIC em cascata. \n(Fonte: Campos et alli, 2013) \n\n \nFigura 2.12 - Controle em cascata \n\nutilizando sensores na plataforma.  \nFonte: (Godhavn, Fard e Fuchs, 2005) \n\n \n\n2.4.3 Controle n\u00e3o linear e controle robusto \n\nAlguns controladores n\u00e3o lineares apresentados na literatura apresentam bom \ndesempenho em rela\u00e7\u00e3o a varia\u00e7\u00f5es estruturais e parametrais das plantas. Lineariza\u00e7\u00e3o \nparcial por feedback tamb\u00e9m foi estudada (Jahanshahi, Skogestad e Gr\u00f8tli, 2013); (Di \nMeglio, F et al., 2012), mas n\u00e3o apresentaram robustez em experimentos.  \n\nUm trabalho na \u00e1rea de controle antigolfadas desenvolvido na Universidade Federal \nde Santa Catarina (UFSC) apresenta um controlador baseado em um modelo n\u00e3o linear \nsimplificado e que calcula um valor num\u00e9rico \u00f3timo para o setpoint da diferen\u00e7a de press\u00e3o \nao longo do riser (em vez da abertura da v\u00e1lvula choke de produ\u00e7\u00e3o). Apesar da \naplicabilidade de um controlador discreto como na solu\u00e7\u00e3o apresentada, esta solu\u00e7\u00e3o n\u00e3o \nfoi estudada neste trabalho devido ao requerimento da derivada da press\u00e3o no fundo do \nriser (Stasiak, Pagano e Plucenio, 2012). \n\nOutros controladores n\u00e3o lineares com estrat\u00e9gias menos pr\u00e1ticas foram propostos, \ncomo controladores de estrutura vari\u00e1vel por modos deslizantes (em tradu\u00e7\u00e3o livre do \ningl\u00eas sliding mode control). Inicialmente, a proposta deste trabalho era a utiliza\u00e7\u00e3o de \ncontroladores deste tipo, devido \u00e0 robustez frente \u00e0 incerteza de par\u00e2metros e din\u00e2micas \nda planta e simplicidade. A implementa\u00e7\u00e3o apresentada na disserta\u00e7\u00e3o de Reinsnes (2009) \nrequer uma medi\u00e7\u00e3o precisa da press\u00e3o no fundo do po\u00e7o ou de um riser de maneira que \na derivada desta possa ser calculada, e sofre com a din\u00e2mica do atuador na v\u00e1lvula de \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 8 \n\nprodu\u00e7\u00e3o. Os resultados da abordagem n\u00e3o foram satisfat\u00f3rios em simula\u00e7\u00f5es devido \nprincipalmente \u00e0 necessidade de altas taxas e baixo ru\u00eddo na medi\u00e7\u00e3o de press\u00e3o.  \n\nDe acordo com trabalhos realizados pelo grupo de pesquisa da Universidade \nNorueguesa de Ci\u00eancia e Tecnologia (NTNU, do noruegu\u00eas Norges teknisk-\nnaturvitenskapelige universitet i Trondheim), sistemas de controle robusto por s\u00edntese pela \nnorma H? e controle PID utilizando a estrat\u00e9gia de Controle por Modelo Interno (IMC, do \ningl\u00eas Internal Model Control) com um modelo Hammerstein (modelo linear com n\u00e3o \nlinearidade est\u00e1tica s\u00e3o estrat\u00e9gias compar\u00e1veis em termos de robustez (Jahanshahi et al., \n2014). Estas duas estrat\u00e9gias s\u00e3o ainda mais robustas experimentalmente que \ncontroladores baseados em modelos mecanicistas (Jahanshahi, E. e Skogestad, S., 2013).  \n\n \nFigura 2.13 \u2013 Comparativo de robustez de controladores lineares antigolfadas.  \n\nFonte: (Jahanshahi et al., 2014) \n\nDe acordo com os crit\u00e9rios apresentados (normas H? das fun\u00e7\u00f5es caracter\u00edsticas do \nsistema, margens de ganho e de atraso), verifica-se que controladores PID, apesar de sua \nsimplicidade (e linearidade), foram avaliados teoricamente segundo crit\u00e9rios de robustez e \nexperimentalmente, e obtiveram bom desempenho mesmo sem a utiliza\u00e7\u00e3o de gain-\nscheduling. Devido a isso, uma estrat\u00e9gia utilizando simples controladores PI \n(proporcionais integrais) \u00e9 utilizada neste trabalho.  \n\nUma identifica\u00e7\u00e3o em malha fechada de uma planta linear inst\u00e1vel realimentada com \num controlador proporcional foi proposta para sintonizar o controlador IMC, e \nposteriormente implement\u00e1-lo como um PIDF (controlador PID com filtro na a\u00e7\u00e3o \nderivativa). A partir das ass\u00edntotas deste controlador PIDF, \u00e9 poss\u00edvel encontrar uma \naproxima\u00e7\u00e3o das caracter\u00edsticas de resposta em frequ\u00eancia utilizando um PI (Jahanshahi, \nEsmaeil e Skogestad, Sigurd, 2013).  \n\nPara simplificar o presente trabalho, a sintonia dos controladores ser\u00e1 realizada de \nmaneira heur\u00edstica, mas os resultados para um teste de degrau em malha fechada ser\u00e3o \napresentados para fins comparativos. \n\n2.4.4 Infer\u00eancia das press\u00f5es utilizando observadores lineares e n\u00e3o-lineares \n\nApesar de o princ\u00edpio da separa\u00e7\u00e3o (que prega que controlador e estimador de \nestados possam ser projetados de maneira separada, para ent\u00e3o funcionarem juntos) n\u00e3o \nser garantido para sistemas n\u00e3o lineares em geral, estudos pr\u00e1ticos foram realizados com \no uso de observadores para realimenta\u00e7\u00e3o do sistema (Jahanshahi, Skogestad e Grotli, \n2013) e controle autom\u00e1tico antigolfadas.  \n\nDiversos observadores n\u00e3o-lineares foram propostos para estimar as press\u00f5es \ninacess\u00edveis devido a problemas de instrumenta\u00e7\u00e3o, em geral baseados em modelos \nsimplificados (modelos caixa-cinza).  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 9 \n\nEm trabalho da NTNU por Eikrem (Imsland, Foss e Eikrem, 2003), um estimador \nbaseado no Filtro de Kalman Extendido (EKF) foi proposto. Uma compara\u00e7\u00e3o do Filtro de \nKalman Inodoro e R\u00e1pido (Fast UKF, do ingl\u00eas Unscented Kalman Filter) com um observador \nde alto ganho foi realizada em outro trabalho da NTNU. Os maiores problemas detectados \nforam a robustez devido a diferen\u00e7as estruturais e varia\u00e7\u00f5es parametrais da planta (Syre, \n2012).  \n\nUma descri\u00e7\u00e3o resumida de observadores por caixa cinza apresentados na literatura \nest\u00e1 apresentada abaixo: \n\n? Observadores de Gr\u00f8tli (Jahanshahi, Skogestad e Grotli, 2013) Observador \nLuemberger de alto ganho, UKF e UKF r\u00e1pido utilizando press\u00f5es de fundo ou topo \nde um riser. \n\n? Observadores de Aamo (Aamo et al., 2005) \u2013 para o po\u00e7o por eleva\u00e7\u00e3o artificial, n\u00e3o \nutiliza vaz\u00e3o de gas-lift (do \u00e2nulo para o tubo de produ\u00e7\u00e3o do po\u00e7o) no observador \ne assume massa no \u00e2nulo conhecida (e assim, apresenta um estado a menos no \nobservador). Pode usar densidade ou vaz\u00e3o de \u00f3leo no topo como medi\u00e7\u00f5es \nauxiliares. \n\n? Observador de Di Meglio (Di Meglio et al., 2012)\u2013 tanto para po\u00e7o com eleva\u00e7\u00e3o \nartificial quanto para o sistema linha de produ\u00e7\u00e3o-riser, utiliza a vaz\u00e3o de gas-lift \n(pois \u00e9 de ordem completa) mas possui um modelo mais simples.  \n\nNeste trabalho, o observador do tipo Tau de Di Meglio (2012) \u00e9 implementado e utilizado. \n\n2.4.5 Terminologia da Instrumenta\u00e7\u00e3o \n\nPara manter o trabalho de acordo com a terminologia geralmente utilizada nestes sistemas, \numa nomenclatura da Petrobras \u00e9 utilizada, de acordo com o trabalho apresentado por \nCampos (2013). \n\nTabela 2.1 \u2013 Terminologia da instrumenta\u00e7\u00e3o nos sistemas para extra\u00e7\u00e3o offshore \n\nTerminologia Modelo Descri\u00e7\u00e3o \n\nSDV \u2013 Shut-Down Valve ?well V\u00e1lvula on-off na cabe\u00e7a do po\u00e7o \nutilizada para fech\u00e1-lo, caso \nnecess\u00e1rio, mas n\u00e3o para controle. \n\nProduction Choke ?prod V\u00e1lvula de controle para choking do \nfluido, localizada no topo do riser \n\nTPT \u2013 Temperature Pressure \nTransmitter \n\n?wt Sensor de temperatura e press\u00e3o na \ncabe\u00e7a do po\u00e7o, ap\u00f3s a primeira \nv\u00e1lvula da \u00e1rvore de natal molhada \n\nPDG \u2013 Pressure Down-Gauge ?wb Sensor de press\u00e3o no fundo do po\u00e7o. \nDif\u00edcil acesso para manuten\u00e7\u00e3o e \nincerteza alta de medi\u00e7\u00e3o. \n\nPmon \u2013 Press\u00e3o a montante da \nchoke \n\n?rt Transmissor de press\u00e3o a montante da \nv\u00e1lvula choke \n\n \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 10 \n\n3 Mate r i a i s  e  M\u00e9to d o s  \n\n3.1 Modelo do processo \n\nPara simular o comportamento din\u00e2mico do escoamento de petr\u00f3leo, um modelo \nsimplificado \u00e9 utilizado. Este modelo est\u00e1 baseado do trabalho de Esmaeil Jahanshahi \n(Jahanshahi, Skogestad e Helgesen, 2012), que utilizou primeiros princ\u00edpios para modelar a \nintera\u00e7\u00e3o entre a tubula\u00e7\u00e3o e o riser e o po\u00e7o a montante destes. Esta abordagem permite \numa an\u00e1lise quantitativa da produ\u00e7\u00e3o de \u00f3leo e g\u00e1s em sistemas em golfadas, de maneira \nsimilar ao modelo de Imsland (Imsland, 2002). \n\nO modelo matem\u00e1tico utilizado neste trabalho para representar o comportamento \ndos subsistemas linha de produ\u00e7\u00e3o-riser e po\u00e7o gas-lift \u00e9 um modelo de equa\u00e7\u00f5es \ndiferenciais ordin\u00e1rias adaptadas do modelo por balan\u00e7o de massa criado por Di Meglio \n(2009). \n\n \n?\n\n??\n[?geb]  =   ?gineb  ? ?gv                            [\n\n??\n\n?\n] ( 3.1 ) \n\n   \n?\n\n??\n[?gr]   =   ?ginr    + ?gv         ? ?gout    [\n\n??\n\n?\n] ( 3.2 ) \n\n    \n?\n\n??\n[?lr]   =     ?lin                         ? ?lout     [\n\n??\n\n?\n] ( 3.3 ) \n\nAs equa\u00e7\u00f5es (3.1) \u2013 (3.3) s\u00e3o as equa\u00e7\u00f5es de estado do subsistema, de acordo com a \nconserva\u00e7\u00e3o de massa para cada uma das fases. A fase l\u00edquida \u00e9 composta por \u00e1gua e \u00f3leo, \ncom a massa espec\u00edfica ?? ajustada para diferentes raz\u00f5es de \u00e1gua e \u00f3leo, e a fase gasosa \n\u00e9 composta por g\u00e1s natural. Explica\u00e7\u00f5es mais detalhadas sobre a deriva\u00e7\u00e3o por primeiros \nprinc\u00edpios e rela\u00e7\u00f5es constitutivas do modelo podem ser encontradas em Di Meglio \n(2012a). \n\nSistemas de ordem 3 representados por essas equa\u00e7\u00f5es referentes \u00e0 massa de cada \numa das fases s\u00e3o utilizadas nos modelos de Storkaas (2005), Eikrem (Aamo et al., 2005) e \nDi Meglio (Di Meglio, Kaasa e Petit, 2009), e apesar da simplicidade do modelo, foram \nvalidadas com dados de simuladores rigorosos comerciais (em alguns pontos de opera\u00e7\u00e3o) \ne tamb\u00e9m utilizadas para fins de controle com resultados satisfat\u00f3rios (Storkaas e \nSkogestad, 2007). \n\nDe maneira similar ao proposto na literatura (Storkaas, 2005); (Di Meglio et al., 2010), \na modelagem \u00e9 feita neste trabalho com o balan\u00e7o de massa simplificado, levando em \nconta a separa\u00e7\u00e3o em dois volumes distintos: um volume composto por uma massa de g\u00e1s \n?gr e outra de l\u00edquido ?lr, separadas de outro volume repleto de g\u00e1s (?geb) por uma \n\n\u201cv\u00e1lvula virtual\u201d A pr\u00f3pria natureza de ambos os subsistemas, onde existe uma estrutura \nque eventualmente bloqueia a passagem de g\u00e1s em alta press\u00e3o, induz essa separa\u00e7\u00e3o em \ndois volumes (Di Meglio, Florent et al., 2012).  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 11 \n\n  \n\nFigura 3.1 - Generaliza\u00e7\u00e3o do modelo proposto por Storkaas com uma \u201cv\u00e1lvula virtual\u201d. \nFonte: (Di Meglio, 2011) \n\nA vaz\u00e3o m\u00e1ssica ?gv \u00e9 aproximada por uma equa\u00e7\u00e3o linear de v\u00e1lvula unidirecional \n\n(diferente do modelo de Eikrem (Aamo et al., 2005), que assume escoamento turbulento). \nSegundo Di Meglio (2009), o ajuste do coeficiente ?? permite aproximar de maneira \n\nsatisfat\u00f3ria o formato das oscila\u00e7\u00f5es. \n\n ?gv,riser = ?? \u00d7 Max[0, (?eb ? ?rb)] ( 3.4 ) \n\nAs press\u00f5es ?eb e ?rb referem-se \u00e0s press\u00f5es no volume de g\u00e1s a montante da v\u00e1lvula \nvirtual (chamada de bolha alongada, ou elongated bubble, por Di Meglio) e no fundo do \nriser (ou do po\u00e7o), respectivamente. A defini\u00e7\u00e3o de cada uma das vaz\u00f5es m\u00e1ssicas e os \npar\u00e2metros no equacionamento diferenciam o subsistema riser do subsistema po\u00e7o por \ngas-lift, como pode ser visto na Figura 3.2 e na Figura 3.3. \n\nNo caso das golfadas induzidas pelo terreno (golfadas na conex\u00e3o linha de produ\u00e7\u00e3o-\nriser), a separa\u00e7\u00e3o pela \u201cv\u00e1lvula virtual\u201d ocorre devido \u00e0 geometria do local que provoca a \nacumula\u00e7\u00e3o de l\u00edquido bloqueando a passagem de g\u00e1s. No caso do po\u00e7o com eleva\u00e7\u00e3o por \ngas-lift, a separa\u00e7\u00e3o ocorre na v\u00e1lvula de inje\u00e7\u00e3o de g\u00e1s, que permite a vaz\u00e3o apenas no \nsentido de entrada na tubula\u00e7\u00e3o de produ\u00e7\u00e3o. Em terminologia de engenharia de petr\u00f3leo, \no fen\u00f4meno que representa golfadas no po\u00e7o modelado \u00e9 denominado cabeceio de anular \n(Jahanshahi, Skogestad e Hansen, 2012). \n\nAs vaz\u00f5es de sa\u00edda ?gout e ?lout s\u00e3o dadas atrav\u00e9s de uma rela\u00e7\u00e3o direta entre a fra\u00e7\u00e3o \n\nm\u00e1ssica de cada fase na coluna de produ\u00e7\u00e3o (riser ou tubo de produ\u00e7\u00e3o do po\u00e7o) e uma \nequa\u00e7\u00e3o da v\u00e1lvula para escoamento turbulento.  \n\n ?lout =\n(?lr)\n\n(?lr) + ?gr\n?out ( 3.5 ) \n\n ?gout =\n(?gr)\n\n?lr + (?gr)\n?out ( 3.6 ) \n\nNo caso do riser, essas vaz\u00f5es de sa\u00edda do sistema dependem das press\u00f5es a jusante do \nsistema (??, que \u00e9 a press\u00e3o no separador na plataforma) e no topo do riser (?rt). \n\n ?out,riser = ?out \u00d7 ?Max[0, ?? (?rt ? ?? )]?prod ( 3.7 ) \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 12 \n\nO formato escolhido para diferenciar as press\u00f5es e massas \u00e9 o da utiliza\u00e7\u00e3o das \nsubscritos mantendo o padr\u00e3o de denomina\u00e7\u00f5es em ingl\u00eas, com w (de well, referindo-se \nao po\u00e7o) junto \u00e0 especifica\u00e7\u00e3o da localidade (wa para o anular, wb para o fundo do po\u00e7o e \nwt para o topo do tubo de produ\u00e7\u00e3o do po\u00e7o). \n\nNo modelo de Di Meglio, as vaz\u00f5es de entrada de g\u00e1s e l\u00edquido s\u00e3o assumidas \nconstantes. Para permitir estudar a produ\u00e7\u00e3o de sa\u00edda como fun\u00e7\u00e3o das press\u00f5es do \nsistema (assim como o acoplamento das din\u00e2micas de cabeceio de anular e golfadas \nseveras devido ao terreno), aqui as vaz\u00f5es de entrada no riser dependem da interface entre \na tubula\u00e7\u00e3o a jusante do po\u00e7o (flowline) e o pr\u00f3prio po\u00e7o, assim como as vaz\u00f5es de entrada \nno po\u00e7o dependem da interface do po\u00e7o com o reservat\u00f3rio e com o anular de gas-lift.  \n\nEste acoplamento foi realizado com a utiliza\u00e7\u00e3o da press\u00e3o na linha de produ\u00e7\u00e3o \n(flowline) como a press\u00e3o ?? (separator pressure) do subsistema po\u00e7o. Assim, sem modelar \na perda de carga devido ao atrito na tubula\u00e7\u00e3o entre o po\u00e7o e o riser, o coeficiente da \nv\u00e1lvula de sa\u00edda do po\u00e7o (?out,well) poderia ser ajustado apropriadamente. No entanto, \npara permitir uma an\u00e1lise da controlabilidade com o uso da press\u00e3o na cabe\u00e7a do po\u00e7o \n(??? ) para controlar o sistema completo, uma equa\u00e7\u00e3o de perda de carga no pipeline \u00e9 \nutilizada.  \n\nConsiderando apenas a perda de carga da fase l\u00edquida, como utilizado no modelo de \nJahanshahi (2012), uma simplifica\u00e7\u00e3o da equa\u00e7\u00e3o para escoamento turbulento em \ntubula\u00e7\u00f5es, conforme recomenda\u00e7\u00f5es na literatura com uma equa\u00e7\u00e3o proporcional ao \nquadrado da vaz\u00e3o de sa\u00edda do po\u00e7o (?lout,well).  \n\n ?fl = ?rb + ??? (?lout,well\n2) ( 3.8 ) \n\nA abertura da v\u00e1lvula na cabe\u00e7a do po\u00e7o geralmente n\u00e3o se trata de uma v\u00e1lvula de \ncontrole, e sim uma v\u00e1lvula on-off (chamada de SDV, ou shut-down valve). \n\n ?out,well = ?out,well \u00d7\n?Max[0, ??,???? (?wt ? ?fl)]?well ( 3.9 ) \n\nNo caso do subsistema gas-lift, as vaz\u00f5es de entrada dependem da intera\u00e7\u00e3o entre o po\u00e7o \ne o reservat\u00f3rio. Para fins de valida\u00e7\u00e3o do modelo e do observador de estados utilizado, \nexperimentos preliminares ser\u00e3o realizados utilizando uma vaz\u00e3o constante de entrada \nvinda do reservat\u00f3rio. No desenvolvimento dos resultados, no entanto, uma rela\u00e7\u00e3o linear \nsimples \u00e9 proposta com rela\u00e7\u00e3o \u00e0 diferen\u00e7a de press\u00e3o entre o fundo do po\u00e7o e o \nreservat\u00f3rio, utilizando como base valores m\u00e9dios de um ponto de opera\u00e7\u00e3o intermedi\u00e1rio. \n\n ?ginr,well =\n??????? ?? ?? ?\n\n??????\n(???? ? ??? ) ( 3.10 ) \n\n ?linr,well =\n??????? ?? ?? ?\n\n??????\n(???? ? ??? ) ( 3.11 ) \n\nOnde ??????? ?? ?? ? \u00e9 a vaz\u00e3o m\u00e9dia de g\u00e1s entre o reservat\u00f3rio e o po\u00e7o, ??????? ?? ?? ? \u00e9 a vaz\u00e3o m\u00e9dia de \n\nl\u00edquido e ??????  \u00e9 a diferen\u00e7a m\u00e9dia de press\u00e3o entre o reservat\u00f3rio e o po\u00e7o. Esta rela\u00e7\u00e3o est\u00e1 \nde acordo com o apresentado em  (Imsland, 2002), com a rela\u00e7\u00e3o linear diretamente \nrelacionado com o \u00cdndice de Produtividade do po\u00e7o (definido como a vaz\u00e3o m\u00e1ssica total \ndividida pela diferen\u00e7a de press\u00e3o m\u00e9dia entre reservat\u00f3rio e po\u00e7o).  \n\n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 13 \n\nO subscrito r \u00e9 utilizado para especificar a vaz\u00e3o de entrada diretamente na coluna de \nprodu\u00e7\u00e3o (riser ou tubo de produ\u00e7\u00e3o do po\u00e7o), como apresentado na Equa\u00e7\u00e3o (3.12), \nenquanto o subscrito eb \u00e9 utilizado para mostrar a vaz\u00e3o de g\u00e1s bloqueado na bolha \nalongada, como apresentado na Equa\u00e7\u00e3o (3.13). \n\n ?ginr,riser = (1 ? ?)?gout,well ( 3.12 ) \n\n ?gineb,riser = (?)?gout,well ( 3.13 ) \n\nA vaz\u00e3o de entrada na Bolha alongada \u00e9 modelada por Di Meglio com a utiliza\u00e7\u00e3o de um \npar\u00e2metro de ajuste (1-?) para indicar a fra\u00e7\u00e3o que acumula na bolha em vez de entrar \ndiretamente na coluna de produ\u00e7\u00e3o, de maneira que a fra\u00e7\u00e3o ? da vaz\u00e3o de entrada de g\u00e1s \npassa diretamente para o riser (sem acumular na bolha). No caso do po\u00e7o, em vez de utilizar \no par\u00e2metro ?, a vaz\u00e3o de entrada na bolha alongada (correspondente ao anular) \u00e9 \nmodelada com uma equa\u00e7\u00e3o da v\u00e1lvula de controle de inje\u00e7\u00e3o de g\u00e1s para eleva\u00e7\u00e3o entre \no compartimento Gas Lift Manifold (?glm) e o anular para eleva\u00e7\u00e3o artificial do po\u00e7o (?wa), \n\ncomo mostrado na Figura 2.8.  \n\n \n?ginLift = ?Max[0, ?glm ? ?wa]?glift?glift ( 3.14 ) \n\nAssim, devido ao uso de dois subsistemas acoplados, a vaz\u00e3o atrav\u00e9s da v\u00e1lvula \nvirtual no caso do po\u00e7o de gas-lift ?gv,well \u00e9 vinculada \u00e0s press\u00f5es no anular do po\u00e7o ?wa \n\n(well annulus) e no fundo do po\u00e7o, ?wb (well tubing bottom). Essas s\u00e3o as press\u00f5es no \ninterior do anular (entre a v\u00e1lvula de controle de inje\u00e7\u00e3o de g\u00e1s, fora do po\u00e7o, e a v\u00e1lvula \nunidirecional de gas-lift no fundo do po\u00e7o) e no ponto de inje\u00e7\u00e3o de gas-lift no interior da \ntubula\u00e7\u00e3o de produ\u00e7\u00e3o, respectivamente. \n\n ?gv,well = ?? \u00d7 Max[0, (?wa ? ?wb)] ( 3.15 ) \n\nCasos em que o escoamento na v\u00e1lvula da inje\u00e7\u00e3o \u00e9 supercr\u00edtico (com v\u00e1lvulas especiais), \no que evitaria o fen\u00f4meno de cabeceio de anular (Aamo et al., 2005), n\u00e3o s\u00e3o modelados \nneste trabalho. \n\nAs outras press\u00f5es do subsistema flowline-riser s\u00e3o definidas como a press\u00e3o no interior \nda Bolha Alongada (?eb), a montante da v\u00e1lvula choke de produ\u00e7\u00e3o (?rt) e no fundo do riser \n(?rb). \n\n ?eb = ?geb \u00d7 a ( 3.16 ) \n\n ?rt =\n?gr\n\n?l? ? ?lr\nb ( 3.17 ) \n\n ?rb = ?rt + (?lr + ?lstill) \u00d7 c ( 3.18 ) \n\nOnde a, b, c, ?l? e ?lstill s\u00e3o outros par\u00e2metros do modelo calibrados de acordo com o \ndiagrama de bifurca\u00e7\u00e3o do sistema estudado. De maneira an\u00e1loga, as equa\u00e7\u00f5es das \npress\u00f5es no po\u00e7o s\u00e3o dadas pelas equa\u00e7\u00f5es 3.16 a 3.18, com a substitui\u00e7\u00e3o de ?eb por ?wa, \nde ?rt por ?wt, de ?rb por ?wb, ?geb por ?gc e do subscrito r pelo subscrito w nas outras \n\nvari\u00e1veis de estado (massas de g\u00e1s e l\u00edquido na coluna de produ\u00e7\u00e3o do sistema).  \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 14 \n\nUm procedimento para ajuste dos coeficientes do modelo caixa-cinza de Di Meglio \u00e9 \ndescrito em (Di Meglio et al., 2010). \n\n ? ?\n??\n\n??eb\n ( 3.19 ) \n\n ? ?  \n?? \u00d7 ? \u00d7 ?\n\n?\n ( 3.20 ) \n\n ? ?  \n(g \u00d7 Sin[?])\n\n?\n ( 3.21 ) \n\n ?l?: = ?? ?? ? ?lstill  ( 3.22 ) \n\nOs par\u00e2metros R (constante universal dos gases) e M (massa molecular da mistura gasosa) \ns\u00e3o utilizados assumindo que os gases no sistema se comportam como gases ideais. A \ntemperatura do sistema T \u00e9 assumida constante e igual nos tr\u00eas volumes do modelo. A \nse\u00e7\u00e3o transversal e o volume da tubula\u00e7\u00e3o de produ\u00e7\u00e3o aparecem nos par\u00e2metros ? e ??, \nrespectivamente. A inclina\u00e7\u00e3o da coluna de produ\u00e7\u00e3o em rela\u00e7\u00e3o ao plano normal \u00e0 \nacelera\u00e7\u00e3o da gravidade (g) \u00e9 aproximada como um \u00fanico valor (tubula\u00e7\u00e3o reta) com o \npar\u00e2metro ?.  \n\nOs outros par\u00e2metros podem ser obtidos para aproximar um dado sistema de golfadas, \nconforme os procedimentos descritos em (Di Meglio et al., 2010). Apesar das modifica\u00e7\u00f5es \ndo modelo, as vaz\u00f5es dependentes das press\u00f5es, os acoplamentos e a vaz\u00e3o atrav\u00e9s da \nv\u00e1lvula de gas-lift ( 3.14 ) ser\u00e3o aproximadas por constantes e um processo iterativo de \najuste dos modelos ser\u00e1 realizado no trabalho. \n\n3.2 Metodologia computacional de resolu\u00e7\u00e3o  \n\nAs simula\u00e7\u00f5es s\u00e3o realizadas utilizando a ferramenta de programa\u00e7\u00e3o gr\u00e1fica Simulink\u00ae, \ndentro do ambiente do MATLAB\u00ae, da MathWorks. Os sistemas din\u00e2micos ser\u00e3o constru\u00eddos \nutilizando S-Functions, e as conex\u00f5es alg\u00e9bricas entre eles gerenciada pelo Simulink. Os \ndiagramas de blocos s\u00e3o apresentados no Ap\u00eandice 8.1 e as S-Functions no Ap\u00eandice 8.2. \n\nA vers\u00e3o para estudantes do software Wolfram Mathematica 10\u00ae \u00e9 utilizada para o \nequacionamento do modelo, ajuste dos par\u00e2metros e valida\u00e7\u00e3o das altera\u00e7\u00f5es relevantes, \nassim como na solu\u00e7\u00e3o simb\u00f3lica de equa\u00e7\u00f5es e transforma\u00e7\u00f5es das equa\u00e7\u00f5es em espa\u00e7o \nde estados, defini\u00e7\u00e3o dos par\u00e2metros e acoplamentos do modelo ao longo do \ndesenvolvimento. As equa\u00e7\u00f5es dos submodelos e do modelo final est\u00e3o apresentadas na \nFigura 3.2 e na Figura 3.3.  \n\n \nFigura 3.2 - Modelo em espa\u00e7o de estados do subsistema po\u00e7o por gas-lift. \n\nFonte: Autor \n\nuGasLift wlin wgin\n\nmgwc mgc Max eps, wA mgc\nwB mgw\n\nMax eps, mlw wml\nwC mlw wmlstill wcg Max eps, wA mgc pglm kglift 0 0\n\nmgw mgw Max eps, wA mgc\nwB mgw\n\nMax eps, mlw wml\nwC mlw wmlstill wcg\n\nMax eps,\nwB mgw\n\nMax eps, mlw wml\npfl w m mgw wCout\n\nmgw mlw\n0 0 1\n\nmlw mlw\n\nMax eps,\nwB mgw\n\nMax eps, mlw wml\npfl w m mlw wCout\n\nmgw mlw\n0 1 0\n\np wt\nwB mgw\n\nMax eps, mlw wml\n0 0 0\n\np wb\nwB mgw\n\nMax eps, mlw wml\nwC mlw wmlstill 0 0 0\n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 15 \n\n \nFigura 3.3 - Modelo em espa\u00e7o de estados do sistema pipeline-riser  \n\nFonte: Autor. \n\n \nFigura 3.4 \u2013 Modelo completo com ambos os sistemas acoplados.  \n\nFonte: Autor. \n\nO observador de Di Meglio (2009) \u00e9 empregado para infer\u00eancia da press\u00e3o de fundo do \npo\u00e7o, com as pequenas modifica\u00e7\u00f5es apresentadas nesta se\u00e7\u00e3o. O estimador utiliza como \nvari\u00e1veis de estado as mesmas vari\u00e1veis propostas originalmente: a massa de g\u00e1s no anular, \na massa de l\u00edquido no riser e a press\u00e3o no topo do riser.  \n\nA infer\u00eancia utiliza para corre\u00e7\u00e3o do modelo interno as medi\u00e7\u00f5es de press\u00e3o no topo do \npo\u00e7o, a abertura da v\u00e1lvula de inje\u00e7\u00e3o de gas-lift, e estimativas para a press\u00e3o m\u00e9dia e \nvaz\u00f5es de entrada de g\u00e1s e l\u00edquidas m\u00e9dias (vindas do reservat\u00f3rio). Estes dados podem, \nna pr\u00e1tica, ser obtidos com estudos das caracter\u00edsticas dos reservat\u00f3rios (com ferramentas \ncomputacionais de engenharia), com dados dos separadores de teste utilizados \nperiodicamente nas plataformas e nos sensores on-line. \n\nA formula\u00e7\u00e3o \u00e9 a mesma que nas equa\u00e7\u00f5es 3.1 e 3.3 (como mostrado na primeira e segunda \nlinha da Figura 3.2), com a adi\u00e7\u00e3o de uma terceira equa\u00e7\u00e3o de estado dependente da \npress\u00e3o medida. Esta equa\u00e7\u00e3o pode ser obtida derivando a Equa\u00e7\u00e3o 3.16 em rela\u00e7\u00e3o ao \ntempo e adicionando um termo de inje\u00e7\u00e3o da sa\u00edda medida atrav\u00e9s de um ganho \nmultiplicado pelo erro entre o valor estimado pelo modelo e lido no processo, como \nmostrado na Equa\u00e7\u00e3o 3.23. \n\n \nd\n\ndx\n[pwt]: = b\n\n(?l? ? ?lw)?gw\n.\n\n+ ?gw?lw?\n\n(?l? ? ?lw)\n2\n\n? ?(pwt ? pwt?? ?? ?) ( 3.23 ) \n\nAssim, o modelo do observador \u00e9 dado pelas equa\u00e7\u00f5es 3.1, 3.3 e 3.23, com par\u00e2metros \najustados para o po\u00e7o do estudo de caso.  \n\nuprod wlinRiser wginRiser\n\nmgeb mgeb Max eps, rA mgeb\nrB mgr\n\nMax eps, mlr rml\nrC mlr rmlstill rcg\n\n0 0 1\n\nmgr mgr Max eps, rA mgeb\nrB mgr\n\nMax eps, mlr rml\nrC mlr rmlstill rcg\n\nMax 0, pfl ps r m mgr rCout\nmgr mlr\n\n0\n\nmlr mlr 0\nMax 0, pfl ps r m mlr rCout\n\nmgr mlr\n1 0\n\nPeb\nrB mgr\n\nMax eps, mlr rml\n0 0 0\n\nPrt\nrB mgr\n\nMax eps, mlr rml\nrC mlr rmlstill 0 0 0\n\n\" up rod \" \" uglift \"\n\n\" \" mgeb Max eps, riserAa mgeb\nriserBb mgr\n\nMax eps, mlr riserml\nriserCc mlr riserm lstill riserc g 1 wginRiser 0 0\n\n\" \" mgr Max eps, riserAa mgeb\nriserBb mgr\n\nMax eps, mlr riserml\nriserCc mlr riserm lstill riserc g wginRiser\n\nMax 0,\nriserBb mgr\n\nMax eps, mlr riserml\nps riserCc mlr risermlstill riser m mgr riserCout\n\nmgr mlr\n0\n\n\" \" mlr\n\nMax eps,\nriserBb mgr\n\nMax eps, mlr riserml\n\nwellBb mgw\n\nMax eps, mlw wellml\nriserCc mlr risermlstill well m mlw wellCout\n\nmgw mlw\n\nMax 0,\nriserBb mgr\n\nMax eps, mlr riserml\nps riserCc mlr risermlstill riser m mlr riserCout\n\nmgr mlr\n0\n\n\" \" mgc Max eps, wellAa mgc\nwellBb mgw\n\nMax eps, mlw wellml\nwellCc mlw wellm lstill wellc g 0 Max eps, wellAa mgc pglm kglift\n\n\" \" mgw wginReservoir Max eps, wellAa mgc\nwellBb mgw\n\nMax eps, mlw wellml\nwellCc mlw wellm lstill wellc g\n\nMax eps,\nriserBb mgr\n\nMax eps, mlr riserml\n\nwellBb mgw\n\nMax eps, mlw wellml\nriserCc mlr risermlstill well m mgw wellCout\n\nmgw mlw\n\n0 0\n\n\" \" mlw wlinReservoir\n\nMax eps,\nriserBb mgr\n\nMax eps, mlr riserml\n\nwellBb mgw\n\nMax eps, mlw wellml\nriserCc mlr risermlstill well m mlw wellCout\n\nmgw mlw\n0 0\n\n\" Pmon \"\nriserBb mgr\n\nMax eps, mlr riserml\n0 0\n\n\" TPT\"\nwellBb mgw\n\nMax eps, mlw wellml\n0 0\n\n\" PDG\"\nwellBb mgw\n\nMax eps, mlw wellml\nwellCc mlw wellm lstill 0 0\n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 16 \n\n3.3 Formula\u00e7\u00e3o do Problema  \n\nUtilizando simula\u00e7\u00f5es no modelo completo, com as vaz\u00f5es de produ\u00e7\u00e3o dependentes \ndas press\u00f5es no sistema e o acoplamento entre o po\u00e7o por eleva\u00e7\u00e3o artificial, a linha de \nprodu\u00e7\u00e3o e o riser, estudar o desempenho de controladores para regular a planta sob duas \nfontes de instabilidade: por cabeceio de anular no po\u00e7o de eleva\u00e7\u00e3o por gas-lift e no \nsistema linha de produ\u00e7\u00e3o-riser devido a irregularidades no terreno. O objetivo \u00e9 a \nmaximiza\u00e7\u00e3o da produ\u00e7\u00e3o de \u00f3leo com garantia de escoamento est\u00e1vel, e a escolha da \nestrutura ser\u00e1 realizada utilizando diferentes vari\u00e1veis controladas.  \n\n3.3.1 Acoplamento dos sistemas \n\nComo as press\u00f5es no separador gravitacional s\u00e3o especificadas constantes neste \nmodelo, n\u00e3o existe diferen\u00e7a entre utilizar somente a press\u00e3o a montante ou a diferen\u00e7a \nde press\u00e3o ao longo da v\u00e1lvula choke na plataforma em controladores lineares, al\u00e9m da \ncombina\u00e7\u00e3o das incertezas de ambas as medidas.  \n\nModelar as varia\u00e7\u00f5es de press\u00e3o no separador gravitacional (a jusante da choke) \u00e9 \nfora do escopo do trabalho, mas a influ\u00eancia deste no sistema din\u00e2mico \u00e9 semelhante ao \nque ocorre no po\u00e7o com press\u00e3o na flowline especificada. \n\n3.3.2 Sele\u00e7\u00e3o da estrutura para controle regulat\u00f3rio \n\nEssa se\u00e7\u00e3o versar\u00e1 sobre a estrat\u00e9gia de controle proposta:  \n\n? Utilizar a press\u00e3o no fundo do po\u00e7o (PDG) quando dispon\u00edvel, possivelmente em \ncombina\u00e7\u00e3o com outra vari\u00e1vel. A utiliza\u00e7\u00e3o apenas da press\u00e3o de fundo n\u00e3o \u00e9 \nrecomendada na literatura devido \u00e0 depend\u00eancia dos controladores de uma liga\u00e7\u00e3o \nem uma janela de tempo (dependendo da fase do ciclo limite das press\u00f5es) para \nque a estabiliza\u00e7\u00e3o seja poss\u00edvel(Di Meglio, F et al., 2012). \n\n? Utilizar a medi\u00e7\u00e3o de press\u00e3o (e temperatura) no TPT na \u00e1rvore de natal molhada, \nse dispon\u00edvel (??? ), o que permite um sistema de fase m\u00ednima (Jahanshahi, \nSkogestad e Helgesen, 2012) no caso de golfadas severas (devido ao terreno), mas \nvari\u00e1veis do fundo do po\u00e7o apenas utilizando observadores.  \n\n? Identificar e ajustar modelo caixa cinza do observador simplificado escolhido em \nsimula\u00e7\u00e3o, que deve ser ajustado para vaz\u00f5es de entrada constantes, para permitir \num ajuste pr\u00e1tico dos par\u00e2metros do mesmo (Di Meglio, F. et al., 2012). \n\n3.3.3 Denomina\u00e7\u00e3o dos controladores \n\nOs controladores utilizados neste trabalho foram numerados para facilitar a discuss\u00e3o e \ncompara\u00e7\u00e3o entre eles. O crit\u00e9rio para numera\u00e7\u00e3o utilizado \u00e9 em rela\u00e7\u00e3o \u00e0s vari\u00e1veis \ncontroladas (CVs) de cada controlador. \n\n? Controlador 1. Diferen\u00e7a de press\u00e3o entre o fundo e o topo do po\u00e7o; \n\n? Controlador 2. Press\u00e3o medida no topo do po\u00e7o; \n\n? Controlador 3. Press\u00e3o medida na plataforma, no topo do riser; \n\n? Controlador 4. Diferen\u00e7a de press\u00e3o entre o topo do po\u00e7o e do riser.  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 17 \n\n4 Re s u l ta d o s  e  d i s c u s s \u00f5 e s  \n\n4.1 Modelo com vaz\u00f5es de \u00f3leo e g\u00e1s dependente das press\u00f5es no po\u00e7o  \n\n4.1.1 Acoplamento dos sistemas \n\nInicialmente, a simula\u00e7\u00e3o apenas do subsistema po\u00e7o (com press\u00e3o da flowline \nespecificada) foi realizada para definir os par\u00e2metros do sistema. Para simular o \nacoplamento, uma condi\u00e7\u00e3o de contorno peri\u00f3dica foi aplicada \u00e0 press\u00e3o da linha de \nprodu\u00e7\u00e3o (flowline). Ap\u00f3s a obten\u00e7\u00e3o de par\u00e2metros que permitissem a ocorr\u00eancia de \ngolfadas, com a estabiliza\u00e7\u00e3o do escoamento para baixas aberturas da v\u00e1lvula choke de \nprodu\u00e7\u00e3o ou altas vaz\u00f5es de g\u00e1s para eleva\u00e7\u00e3o, o acoplamento com o sistema do riser e da \nplataforma foi realizado. Iterativamente, novos ajustes de par\u00e2metros dimensionais foram \nrealizados para determinar uma frequ\u00eancia para as oscila\u00e7\u00f5es de cada ciclo limite (no po\u00e7o \ne no riser).  \n\nDe maneira similar ao proposto por Gr\u00f8tli (Jahanshahi, Skogestad e Gr\u00f8tli, 2013), o \nacoplamento dos sistemas para an\u00e1lise da influ\u00eancia das press\u00f5es foi analisado como uma \ninterconex\u00e3o entre sistemas: o acoplamento do subsistema riser com os sistemas a \nmontante dele pode ser observado como uma conex\u00e3o em s\u00e9rie com a abertura da v\u00e1lvula \nchoke de produ\u00e7\u00e3o (?prod) como entrada do subsistema riser, e a press\u00e3o no fundo do riser \n\n(?rb) \u00e9 a entrada do subsistema linha de produ\u00e7\u00e3o-po\u00e7o-reservat\u00f3rio.  \n\nNo caso estudado neste trabalho, no entanto, o subsistema ap\u00f3s o Riser pode \napresentar instabilidade (ciclo-limite) para algumas condi\u00e7\u00f5es das press\u00f5es e vaz\u00f5es nas \nconex\u00f5es com o reservat\u00f3rio e/ou com o sistema de eleva\u00e7\u00e3o artificial devido ao cabeceio \nde anular (que ocasiona as golfadas no po\u00e7o). Assim, a realimenta\u00e7\u00e3o (atrav\u00e9s das vaz\u00f5es \nentre po\u00e7o e linha de produ\u00e7\u00e3o e das press\u00f5es na cabe\u00e7a do po\u00e7o e no flowline) n\u00e3o pode \nser negligenciada em uma an\u00e1lise da estabilidade din\u00e2mica do riser.  \n\n \n4.2 Bifurca\u00e7\u00e3o do modelo proposto \n\nPara determinar as caracter\u00edsticas de bifurca\u00e7\u00e3o do sistema acoplado em fun\u00e7\u00e3o da \nabertura da choke, uma simula\u00e7\u00e3o em malha aberta foi realizada para diferentes condi\u00e7\u00f5es \nde abertura da v\u00e1lvula de gas-lift. De maneira sequencial, o sinal para abertura da v\u00e1lvula \nchoke foi reduzida em degraus de 10% partindo de 90%. Apenas uma se\u00e7\u00e3o plana do espa\u00e7o \nde bifurca\u00e7\u00e3o do sistema (para condi\u00e7\u00e3o de abertura da v\u00e1lvula de inje\u00e7\u00e3o de gas-lift em \n20%) \u00e9 apresentada por restri\u00e7\u00f5es de espa\u00e7o. \n\n \n\nFigura 4.1- Diagrama de bifurca\u00e7\u00e3o da produ\u00e7\u00e3o m\u00e1ssica de l\u00edquido com ??????=20%. \n\n0\n5\n\n10\n15\n20\n25\n30\n35\n\n15% 20% 25% 30% 35% 40% 45% 50% 55% 60% 65% 70% 75% 80% 85% 90% 95%\n\nVaz\u00e3o de produ\u00e7\u00e3o de l\u00edquido: wlout [kg/s]\n\nM\u00e9dia M\u00e1ximo Series3M\u00ednimo \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 18 \n\n  \n\nFigura 4.2 - Bifurca\u00e7\u00e3o das press\u00f5es no fundo do riser e do po\u00e7o para ??????=20%. \n\n4.2.1 Discuss\u00f5es \n\nFoi verificado que o aumento da vaz\u00e3o de gas-lift, al\u00e9m do aumento da zona de \nestabilidade, tamb\u00e9m aumenta a vaz\u00e3o de sa\u00edda de l\u00edquido (e g\u00e1s). Na realidade, o g\u00e1s \u00e9 \ninjetado em reciclo, e portanto deve ser desconsiderado no c\u00e1lculo de produ\u00e7\u00e3o. A redu\u00e7\u00e3o \nda produ\u00e7\u00e3o de \u00f3leo devido \u00e0 caracter\u00edstica de invers\u00e3o de ganho mostrada na Figura 2.6 \nentre a vaz\u00e3o de entrada de g\u00e1s para eleva\u00e7\u00e3o (entrada) e vaz\u00e3o de produ\u00e7\u00e3o de \u00f3leo \n(sa\u00edda) n\u00e3o foi observada neste modelo simplificado, no entanto. Esta caracter\u00edstica adv\u00e9m \ndo fato de o modelo n\u00e3o contemplar a perda de carga por fric\u00e7\u00e3o no interior do po\u00e7o. \n\n4.3 Controladores utilizando os sensores no fundo do mar  \n\nUtilizando a estrat\u00e9gia usual para controle desses sistemas, semelhante ao empregado \nidustrialmente, os experimentos s\u00e3o realizados com um controlador proporcional integral \n(PI). Neste primeiro experimento, ap\u00f3s um per\u00edodo em que o controle da v\u00e1lvula choke \u00e9 \nmantido em manual, o sistema \u00e9 colocado em autom\u00e1tico utilizando um controlador \n(Controlador 1). Posteriormente, um segundo controlador PI (Controlador 2, utilizando \noutra vari\u00e1vel controlada) \u00e9 acionado, para comparar o desempenho dos mesmos sob \ncondi\u00e7\u00f5es semelhantes.  \n\nSegundo Di Meglio (2009a), a vari\u00e1vel controlada que permite a estabiliza\u00e7\u00e3o para as \nmaiores aberturas da v\u00e1lvula choke \u00e9 a diferen\u00e7a de press\u00e3o na coluna de produ\u00e7\u00e3o (seja \ndo riser ou do po\u00e7o, dependendo da utiliza\u00e7\u00e3o do modelo), devido \u00e0 correla\u00e7\u00e3o desta \nvari\u00e1vel com a massa de l\u00edquido (um dos estados do modelo). Assim, o primeiro controlador \nutilizado  \n\n4.3.1 Experimento 1: Controladores com ???  (TPT) e ??? (PDG-TPT) como CVs \n\nPara analisar o desempenho dos controladores, os resultados dos experimentos com \nos valores de setpoint correspondentes \u00e0s maiores aberturas da v\u00e1lvula choke s\u00e3o \napresentados na Figura 4.3 e na Figura 4.5. \u00c9 importante observar que valores absolutos \nmenores de press\u00e3o no interior do po\u00e7o (ou do riser) implicam em uma maior produ\u00e7\u00e3o \n(para mesmas condi\u00e7\u00f5es do reservat\u00f3rio). Valores mais afastados do ponto de bifurca\u00e7\u00e3o \nde cada vari\u00e1vel controlada dentro da regi\u00e3o inst\u00e1vel em malha aberta representam um \nmelhor desempenho do controlador. \n\n60\n\n65\n\n70\n\n75\n\n80\n\n85\n\n90\n\n15% 25% 35% 45% 55% 65% 75% 85% 95%\n\nPress\u00e3o no fundo do riser: \nprb [bar]\n\nM\u00e9dia M\u00e1ximo M\u00ednimo\n\n150\n\n160\n\n170\n\n180\n\n190\n\n15% 25% 35% 45% 55% 65% 75% 85% 95%\n\nPress\u00e3o no fundo do po\u00e7o: \npwb [bar]\n\nM\u00e9dia M\u00e1ximo M\u00ednimo\n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 19 \n\n  \n\n \n\nFigura 4.3 \u2013 Gr\u00e1ficos SP-CV/MV do Controlador 1 na compara\u00e7\u00e3o do Experimento 1.  \nFonte: Autor. \n\nNa Figura 4.3 \u00e9 poss\u00edvel verificar que a vari\u00e1vel controlada do controlador 1 apresenta \num offset, apesar do bom desempenho do mesmo em rela\u00e7\u00e3o \u00e0 abertura da v\u00e1lvula e \nestabilidade do sistema. Isto se deve ao fato da perda de carga por fric\u00e7\u00e3o no interior do \npo\u00e7o ser desconsiderada no modelo (em compara\u00e7\u00e3o com a diferen\u00e7a de press\u00e3o est\u00e1tica, \ndependente das fra\u00e7\u00f5es de g\u00e1s e \u00f3leo no tubo de produ\u00e7\u00e3o do po\u00e7o), como mostrado na \nEqua\u00e7\u00e3o 3.18.  \n\nComo a massa de l\u00edquido no po\u00e7o no interior da tubula\u00e7\u00e3o (e a fra\u00e7\u00e3o m\u00e1ssica) \napresentam um valor de equil\u00edbrio para cada abertura da choke no modelo de Di Meglio \n(2012), enquanto o sistema est\u00e1 est\u00e1vel em uma dada abertura, a diferen\u00e7a de press\u00e3o \npouco varia (ocasionando o offset observado no desempenho do Controlador 1). \n\n \n\n  \nFigura 4.4 Gr\u00e1ficos SP-CV/MV do Controlador 2 na compara\u00e7\u00e3o do Experimento 1.  \n\nFonte: Autor. \n \n \n \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 20 \n\n \n\nFigura 4.5 Vaz\u00f5es m\u00e1ssicas de g\u00e1s e \u00f3leo no Experimento 1 (CVs no po\u00e7o).  \nFonte: Autor. \n\n4.3.2 Satura\u00e7\u00e3o da a\u00e7\u00e3o de controle e perda de controlabilidade \n\nUm segundo experimento foi realizado para verificar se a estrat\u00e9gia para o anti-reset \nwindup do controlador 1 estava adequada, devido principalmente \u00e0 presen\u00e7a de um offset \nem regime permanente entre o setpoint e a vari\u00e1vel controlada no Experimento 1. \n \n\n \n\nFigura 4.6 - Diferen\u00e7a de press\u00e3o no po\u00e7o ???  com a satura\u00e7\u00e3o da choke.  \nFonte: Autor. \n\n \n\nFigura 4.7 - Perda de controlabilidade do sistema devido \u00e0 satura\u00e7\u00e3o da choke  \nFonte: Autor. \n\nComo mostrado na Figura 4.6, em no Experimento 2 o setpoint da diferen\u00e7a de \npress\u00e3o na coluna de produ\u00e7\u00e3o do po\u00e7o foi alterado de 90bar para 88bar, da mesma \nmaneira que no experimento da Se\u00e7\u00e3o 4.3.1. Para aumentar o erro e permitir resultados \ndentro do tempo de simula\u00e7\u00e3o, o setpoint foi em seguida reduzido para 87 e 86bar.  \n\nDevido ao termo integral e \u00e0 redu\u00e7\u00e3o caracter\u00edstica do ganho est\u00e1tico da planta na \nregi\u00e3o de maior abertura da v\u00e1lvula (Jahanshahi, Esmaeil e Skogestad, Sigurd, 2013), o \ncontrolador PI aumenta sua sa\u00edda visando aproximar-se do setpoint at\u00e9 a satura\u00e7\u00e3o, como \npode ser visto na Figura 4.7. Isso ocasionou grandes varia\u00e7\u00f5es nas vaz\u00f5es (maiores que em \nmalha aberta com a abertura de 35% da v\u00e1lvula choke), como pode ser visto na Figura 4.8. \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 21 \n\n \n\nFigura 4.8 - Oscila\u00e7\u00f5es nas vaz\u00f5es m\u00e1ssicas de produ\u00e7\u00e3o ap\u00f3s satura\u00e7\u00e3o da choke.  \nFonte: Autor. \n\nApesar da estrat\u00e9gia anti-reset windup, o sistema perde a estabilidade quando o \ncontrolador para de compensar a din\u00e2mica respons\u00e1vel pelo ciclo limite. Para contornar o \nproblema, uma estrat\u00e9gia de limita\u00e7\u00e3o do termo integral para manter a vari\u00e1vel fora dos \nlimites de satura\u00e7\u00e3o foi implementada, como pode ser visto na Figura 4.9 e na Figura 4.10. \n\n \n\nFigura 4.9 - Diferen\u00e7a de press\u00e3o no po\u00e7o (???-??? ) com anti-reset limitado.  \nFonte: Autor. \n\n \n\nFigura 4.10 - Abertura da v\u00e1lvula choke de produ\u00e7\u00e3o com anti-reset limitado.  \nFonte: Autor. \n\nUtilizando esta modifica\u00e7\u00e3o, o po\u00e7o e o riser foram estabilizados com uma abertura da \nv\u00e1lvula de produ\u00e7\u00e3o de 97%. Este resultado permitiu que as vaz\u00f5es de sa\u00edda fossem \nestabilizadas em 13.3 \u00b10.4 kg/s como pode ser observado na Figura 4.11, o maior valor \nest\u00e1vel obtido at\u00e9 aqui.  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 22 \n\n \n\nFigura 4.11 - Vaz\u00f5es de produ\u00e7\u00e3o de g\u00e1s e l\u00edquido com anti-reset windup limitado.  \nFonte: Autor. \n\nO bom desempenho se deu devido \u00e0 utiliza\u00e7\u00e3o de um limite apropriado para a regi\u00e3o da \na\u00e7\u00e3o integral, evitando a satura\u00e7\u00e3o da vari\u00e1vel manipulada e a redu\u00e7\u00e3o da regi\u00e3o de atra\u00e7\u00e3o \ndo controlador, e a um setpoint inalcan\u00e7\u00e1vel apropriado (que manteve o sistema est\u00e1vel \npara aquelas condi\u00e7\u00f5es).  \n\nEste mecanismo \u00e9 semelhante ao utilizado em controladores preditivos para otimizar \nprocessos, inclusive na extra\u00e7\u00e3o de \u00f3leo e g\u00e1s offshore (Willersrud et al., 2013).  \n\n4.3.3 Compara\u00e7\u00e3o dos controladores do po\u00e7o \n\nA compara\u00e7\u00e3o das duas vari\u00e1veis controladas do po\u00e7o e das estrat\u00e9gias para o anti-reset \nwindup \u00e9 apresentado na Tabela 4.1.  \n\nTabela 4.1 - Compara\u00e7\u00e3o da utiliza\u00e7\u00e3o de sensores no po\u00e7o para ???????? = 40%. \n CV = ??? ? ???  CV = ??? CV = ??? ? ??? \n\n????? : Abertura m\u00e9dia da v\u00e1lvula choke  60 [%] 50 [%] 97 [%] \n\n?????: Setpoint para controlador 90 [bar] 67 [bar] 88 [bar] \n\n?????: Press\u00e3o m\u00e1xima no fundo do riser 65,2 [bar] 69 [bar] 64,0 [bar] \n\n????? ?? : Press\u00e3o m\u00e9dia no fundo do riser 64,1 [bar] 67 [bar] 63,8 [bar] \n\n?????: Press\u00e3o m\u00ednima no fundo do riser 64 [bar] 66 [bar] 63,7 [bar] \n\n??: Ganho proporcional  -0,09 [\n%\n\n???\n] -0,07 [\n\n%\n\n???\n] -0,09 [\n\n%\n\n???\n] \n\n?? : Tempo integral do controlador  2. 10\n4 [s]  2. 104 [s] 2. 104 [s] \n\n?????: Satura\u00e7\u00e3o superior do anti-windup  100 [%] 100 [%] 90 [%] \n\n?????: Satura\u00e7\u00e3o inferior do anti-windup 10 [%] 10 [%] 20 [%] \n\n \n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 23 \n\n4.4 Controladores utilizando os sensores na plataforma  \n\nA utiliza\u00e7\u00e3o apenas com medi\u00e7\u00f5es na plataforma dificulta seriamente o controle devido \u00e0 \nnatureza inst\u00e1vel da din\u00e2mica de zeros do sistema para esta medi\u00e7\u00e3o. Ainda assim, os \nresultados do sistema com o uso do sensor de press\u00e3o a montante da v\u00e1lvula choke Pmon  \n(sensor de ???) s\u00e3o tamb\u00e9m apresentados para fins comparativos. \n\n4.4.1 Limites de estabilidade para ??? (Pmon) e (??? ? ??? ) (TPT-Pmon) \n\n \n\n \n\n \n\nFigura 4.12 - Compara\u00e7\u00e3o do uso de medidas de press\u00e3o na plataforma.  \nFonte: Autor. \n\nAinda que n\u00e3o existam grandes varia\u00e7\u00f5es nas fra\u00e7\u00f5es m\u00e1ssicas (que provocariam \nvaria\u00e7\u00f5es na diferen\u00e7a de press\u00e3o m\u00e9dia dentro da coluna de produ\u00e7\u00e3o), esta vari\u00e1vel est\u00e1 \nintimamente ligada \u00e0 massa de l\u00edquido do sistema, que por sua vez est\u00e1 diretamente ligada \n\u00e0 estabilidade do sistema (Di Meglio, F et al., 2012). \n\nTabela 4.2: Compara\u00e7\u00e3o do uso de sensores na plataforma para ???????? =  40%. \n\n CV = ??? CV = ??? ? ??? \n\n????? : Abertura m\u00e9dia da v\u00e1lvula choke  20 [%] 50  [%] \n\n?????: Setpoint para controlador 11 [bar] 88 [bar] \n\n?????: Press\u00e3o m\u00e1xima no fundo do riser 86 [bar] 67,5 [bar] \n\n????? ?? : Press\u00e3o m\u00e9dia no fundo do riser 74 [bar] 67 [bar] \n\n?????: Press\u00e3o m\u00ednima no fundo do riser 66 [bar] 66 [bar] \n\n??: Ganho proporcional  -0,1; -0,2; -0,35; +0,1 [\n%\n\n???\n] -0,09 [\n\n%\n\n???\n] \n\n?? : Tempo integral do controlador 10\n3;  5.103; 104; 102 [s] 1. 104 [s] \n\n?????: Satura\u00e7\u00e3o superior do anti-windup  90 [%] 90 [%] \n\n?????: Satura\u00e7\u00e3o inferior do anti-windup 20 [%] 20 [%] \n\nComo a estabilidade n\u00e3o foi alcan\u00e7ada com o primeiro controlador inicialmente, diversos \nvalores para sua sintonia foram testados, sem sucesso. \n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 24 \n\n4.5 Limita\u00e7\u00f5es de instrumenta\u00e7\u00e3o: atuadores e sensores  \n\nComo em sistemas reais os valores medidos pelos sensores apresenta incertezas, alguns \nexperimentos foram realizados para verificar o funcionamento das estrat\u00e9gias \napresentadas nas se\u00e7\u00e3o 4.3 em cen\u00e1rios n\u00e3o ideais. O atuador foi tamb\u00e9m alterado, de \nmodo a apresentar uma din\u00e2mica de primeira ordem (com constante de tempo de 1.5min) \n\n \n\n \n\n \n\nFigura 4.13 \u2013 Seguimento de trajet\u00f3ria utilizando medi\u00e7\u00f5es no po\u00e7o e limita\u00e7\u00f5es de \ninstrumenta\u00e7\u00e3o e de din\u00e2mica do atuador.  \n\nFonte: Autor. \n\nDa mesma maneira, o ru\u00eddo presente nos sensores afetou as estimativas da press\u00e3o \nde fundo do po\u00e7o do observador Tau utilizado, como pode ser visto na Figura 4.14. \n\n \n\nFigura 4.14 \u2013 Press\u00f5es no do po\u00e7o com estima\u00e7\u00e3o de estados a partir de sinal ruidoso.  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 25 \n\n4.5.1 Resultados dos degraus em malha fechada.  \n\nComo mencionado na se\u00e7\u00e3o 2.4.3, testes em degrau em malha fechada para \nverifica\u00e7\u00e3o do modelo para reprodu\u00e7\u00e3o das golfadas. No sistema apresentado neste \ntrabalho, o ciclo limite caracter\u00edstico do escoamento em golfadas foi modelado com um \nsistema de extra\u00e7\u00e3o completo composto por um reservat\u00f3rio est\u00e1tico, um po\u00e7o de \nextra\u00e7\u00e3o por eleva\u00e7\u00e3o artificial, um sistema de linha de produ\u00e7\u00e3o, um riser e um separador \nna plataforma est\u00e1tico.  \n\nEste sistema, apesar de ligeiramente mais complexo, deve apresentar caracter\u00edsticas \nsemelhantes \u00e0s encontradas experimentalmente e em simuladores rigorosos, como \nobservado no trabalho proposto por Jahanshahi (Jahanshahi, Esmaeil e Skogestad, Sigurd, \n2013) para identifica\u00e7\u00e3o e sintonia de controladores. Assim, para fins comparativos, um \nsimples teste para identifica\u00e7\u00e3o foi realizado aproximando os controladores apresentados \nanteriormente por controladores puramente proporcionais, ap\u00f3s ajuste do valor de bias.  \n\nO termo integral dos controladores foi aumentado at\u00e9 que a a\u00e7\u00e3o integral ficasse \ninsignificativa, para assim aproxim\u00e1-los do controlador proporcional utilizado por \nJahanshahi. Os resultados deste experimento s\u00e3o apresentados na Figura 4.15, assim como \na compara\u00e7\u00e3o com a figura do artigo de sintonia por identifica\u00e7\u00e3o, apresentada na Figura \n4.16 para a press\u00e3o no topo do po\u00e7o (TPT). \n\n \n\n \n\n \nFigura 4.15 \u2013 Degraus em malha fechada com controladores proporcionais.  \n\nFonte: Autor \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 26 \n\n  \nFigura 4.16 \u2013 Testes de degrau em malha fechada utilizados na sintonia.  \n\nFonte: Autor \n\n4.6 Converg\u00eancia do observador n\u00e3o linear simp lificado \n\nComo visto na se\u00e7\u00e3o 4.5, apesar da din\u00e2mica n\u00e3o modeladas do acoplamento dos sistemas, \ne da suposi\u00e7\u00e3o de vaz\u00f5es de entrada no po\u00e7o constantes, o observador proposto \napresentou converg\u00eancia em todas os pontos de opera\u00e7\u00e3o e situa\u00e7\u00f5es testadas. Estes \nresultados s\u00e3o semelhantes a outros na literatura (Di Meglio, F. et al., 2012), (Jahanshahi, \nSkogestad e Grotli, 2013), (Aamo et al., 2005), (Syre, 2012).  \n\n \n\n \nFigura 4.17 - Estima\u00e7\u00e3o da press\u00e3o no fundo do po\u00e7o.  \n\nFonte: Autor \n\n4.6.1 Discuss\u00e3o \n\nComo o modelo para o observador do po\u00e7o especificamente apresenta o mesmo \nn\u00famero de estados e caracter\u00edsticas estruturais semelhantes, era de se esperar que a \nconverg\u00eancia fosse atingida com uma sintonia do modelo.  \n\nN\u00e3o foram aplicados dist\u00farbios nas press\u00f5es do reservat\u00f3rio, mas testes com \ndiferentes valores da inje\u00e7\u00e3o de g\u00e1s (que altera a frequ\u00eancia das oscila\u00e7\u00f5es em malha \naberta devido a golfadas no po\u00e7o) foram realizados. A robustez com rela\u00e7\u00e3o a \nespecifica\u00e7\u00f5es n\u00e3o foi avaliada exaustivamente, mas a utiliza\u00e7\u00e3o de uma planta real ou \nsimulador rigoroso ser\u00e1 interessante para mais desenvolvimentos neste t\u00f3pico.  \n\n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 27 \n\n5 C o n c l u s \u00f5 e s  e  Tra b a l h o s  F u t u ro s  \n\n \n\nDe acordo com os resultados das simula\u00e7\u00f5es, foi poss\u00edvel verificar que as medi\u00e7\u00f5es no po\u00e7o \ns\u00e3o fundamentais para efetivo controle autom\u00e1tico e estabiliza\u00e7\u00e3o do regime de \nescoamento em sistemas com eleva\u00e7\u00e3o por gas-lift. Ainda que sensores no fundo do po\u00e7o \napresentem ru\u00eddo consider\u00e1vel e apresentem dif\u00edcil manuten\u00e7\u00e3o, a utiliza\u00e7\u00e3o desta vari\u00e1vel \nfoi verificada como a melhor para estabiliza\u00e7\u00e3o do sistema com controladores PI.  \n\nBaseado nas simula\u00e7\u00f5es utilizando os modelos n\u00e3o lineares, a estrat\u00e9gia definida \u00e9 a \nutiliza\u00e7\u00e3o da press\u00e3o no fundo do po\u00e7o caso este sensor esteja dispon\u00edvel, e de uma \nestimativa para esta press\u00e3o utilizando um observador n\u00e3o linear com par\u00e2metros \najustados utilizando medidas hist\u00f3ricas do sensor de fundo quando ocorrer a falha do \nmesmo. \n\nExperimentos superficiais utilizando uma infer\u00eancia que utiliza como medi\u00e7\u00f5es a press\u00e3o \nno topo do po\u00e7o, a abertura da v\u00e1lvula de gas-lift, a press\u00e3o na linha de inje\u00e7\u00e3o de ar (gas-\nlift manifold) e a press\u00e3o no topo do po\u00e7o (TPT, na \u00e1rvore de natal molhada) foram tamb\u00e9m \nrealizados, e o estimador de press\u00e3o de fundo apresentou converg\u00eancia, mesmo com sinais \nruidosos. \n\n5.1 Trabalhos futuros \n\nAlgumas propostas para continuidade do trabalho \n\n5.1.1 An\u00e1lise de robustez \n\nSimula\u00e7\u00f5es com varia\u00e7\u00f5es de par\u00e2metros e dist\u00farbios, como: \n\n? Varia\u00e7\u00f5es nas press\u00f5es, raz\u00e3o g\u00e1s/\u00f3leo e percentual de \u00e1gua no reservat\u00f3rio \n\n? Varia\u00e7\u00f5es nas press\u00f5es no reservat\u00f3rio e no Gas Lift Manifold. \n\n? Atua\u00e7\u00f5es na v\u00e1lvula para inje\u00e7\u00e3o de gas-lift.  \n\n5.1.2 Conex\u00e3o com camada supervis\u00f3ria \n\nIntegra\u00e7\u00e3o do sistema de controle proposto utilizando um MPC com estrat\u00e9gias da camada \nde otimiza\u00e7\u00e3o da literatura  \n\nUtiliza\u00e7\u00e3o de controlador preditivo baseado em modelo, utilizando: \n\n? Restri\u00e7\u00f5es por faixas na utiliza\u00e7\u00e3o do compressor p/ gas-lift. \n\n? Vari\u00e1veis manipuladas: setpoints de press\u00e3o para a camada regulat\u00f3ria, targets. \n\n? Vari\u00e1veis controladas: press\u00e3o a montante da v\u00e1lvula choke de produ\u00e7\u00e3o, press\u00e3o \nna \u00e1rvore de natal molhada, press\u00e3o de fundo do po\u00e7o, vaz\u00e3o m\u00e1ssica de gas-lift.  \n\n? Objetivo da otimiza\u00e7\u00e3o: maximizar produ\u00e7\u00e3o, utilizando faixas p/ seguimento de \ntarget para a vaz\u00e3o de gas-lift. \n\n? Restri\u00e7\u00f5es: manter press\u00f5es em faixas determinadas,  \n\n? Override na v\u00e1lvula de controle de gas-lift quando o sistema de controle da press\u00e3o \npela esta\u00e7\u00e3o de compressores apresenta press\u00e3o muito baixa no gas-lift manifold \n(estrat\u00e9gias para atenuar posterior dist\u00farbio no po\u00e7o).  \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 28 \n\n6 Refe r\u00ea n c i a s  \n\nAAMO, O. M.  et al. Observer design for multiphase flow in vertical pipes with gas-\nlift\u2013\u2013theory and experiments. Journal of process control, v. 15, n. 3, p. 247-257,  \n2005. ISSN 0959-1524.   \n \nCAMPONOGARA, E.  et al. An automation system for gas-lifted oil wells: Model \nidentification, control, and optimization. Journal of Petroleum Science and \nEngineering, v. 70, n. 3-4, p. 157-167,  2010. ISSN 09204105.   \n \nCAMPOS, M. C. M. M. G., MARCOS VINICIUS DE CARVALHOPEREZ,JOS\u00c9 MANUEL \nGONZALEZ TUBIO. Controle Avan\u00e7ado e Otimiza\u00e7\u00e3o na Ind\u00fastria do Petr\u00f3leo.   \nINTERCI\u00caNCIA, 2013. \n \nDI MEGLIO, F. Production de p\u00e9trole: \u00e9tude dynamique et contr\u00f4le des \n\u00e9coulements \u00e0 bouchons. 2011.   Paris, ENMP \n \nDI MEGLIO, F.; KAASA, G.-O.; PETIT, N. A first principle model for multiphase slugging \nflow in vertical risers. Decision and Control, 2009 held jointly with the 2009 28th \nChinese Control Conference. CDC/CCC 2009. Proceedings of the 48th IEEE \nConference on, 2009,   IEEE. p.8244-8251. \n \nDI MEGLIO, F.  et al. Reproducing slugging oscillations of a real oil well. Decision and \nControl (CDC), 2010 49th IEEE Conference on, 2010,   IEEE. p.4473-4479. \n \nDI MEGLIO, F. Model-based control of slugging: advances and challenges. IFAC \nWorkshop on Automatic Control in Offshore Oil and Gas Production 2012, 2012. \n \nDI MEGLIO, F. Stabilization of slugging in oil production facilities with or without \nupstream pressure sensors. Journal of Process Control, v. 22, n. 4, p. 809-822,  2012. \nISSN 0959-1524.   \n \nGODHAVN, J. M.; FARD, M. P.; FUCHS, P. H. New slug control strategies, tuning rules \nand experimental results. J. Process Control, v. 15, n. 5, p. 547-557,  2005. ISSN \n0959-1524.   \n \nIMSLAND, L. Topics in nonlinear control.: Output Feedback Stabilization and Control \nof Positive Systems.  2002.    \n \nIMSLAND, L.; FOSS, B. A.; EIKREM, G. O. State feedback control of a class of positive \nsystems: application to gas lift stabilization. Proc. of the 7th European Control Conf, \n2003. \n \nJAHANSHAHI, E.  et al. A comparison between Internal Model Control, optimal PIDF \nand robust controllers for unstable flow in risers.  2014.    \n \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 29 \n\nJAHANSHAHI, E.; SKOGESTAD, S. Simplified dynamical models for control of severe \nslugging in multiphase risers. World Congress, 2011. p.1634-1639. \n \nJAHANSHAHI, E. Closed-loop model identification and pid/pi tuning for robust anti-\nslug control. 10th IFAC International Symposium on Dynamics and Control of Process \nSystems. Mumbai, India, 2013. \n \nJAHANSHAHI, E. Comparison between nonlinear model-based controllers and gain-\nscheduling Internal Model Control based on identified model. Decision and Control \n(CDC), 2013 IEEE 52nd Annual Conference on, 2013, 10-13 Dec. 2013. p.853-860. \n \nJAHANSHAHI, E.; SKOGESTAD, S.; GROTLI, E. I. Anti-slug control experiments using \nnonlinear observers. American Control Conference (ACC), 2013, 2013, 17-19 June \n2013. p.1056-1062. \n \nJAHANSHAHI, E.; SKOGESTAD, S.; GR\u00d8TLI, E. I. Nonlinear model-based control of \ntwo-phase flow in risers by feedback linearization. 9th IFAC Symposium on \nNonlinear Control Systems, 2013. \n \nJAHANSHAHI, E.; SKOGESTAD, S.; HANSEN, H. Control structure design for stabilizing \nunstable gas-lift oil wells. Advanced Control of Chemical Processes, v. 8, n. part 1, \np. 93-100,  2012.    \n \nJAHANSHAHI, E.; SKOGESTAD, S.; HELGESEN, A. H. Controllability analysis of severe \nslugging in well-pipeline-riser systems. IFAC Workshop-Automatic Control in \nOffshore Oil and Gas Production, 2012. p.101-108. \n \nJAHANSHAHI, E.; SKOGESTAD, S.; LIEUNGH, M. Subsea solution for anti-slug control \nof multiphase risers. Control Conference (ECC), 2013 European, 2013, 17-19 July \n2013. p.4094-4099. \n \nKAASA, G.-O.  et al. Attenuation of slugging in unstable oil wells by nonlinear control. \n17th IFAC World Congress, 2008. \n \nKAMMERZELL, J. Long subsea lines, vertical risers and in offshore oil production in \nWest Africa.  2014.  Dispon\u00edvel em: &lt;\nhttp://oilpro.com/img/usermedia/0nBbvrbxIU6Lfc2TvCCV4g/original.png >.  \n \nREINSNES, S. E. Stabilization of slugging by sliding mode control.  2009.    \n \nSINEGRE, L. Etude des instabilit\u00e9s dans les puits activ\u00e9s par gas-lift. 2006.   \u00c9cole \nNationale Sup\u00e9rieure des Mines de Paris \n \nSINEGRE, L.; PETIT, N.; MENEGATTI, P. Predicting instabilities in gas-lifted wells \nsimulation. American Control Conference, 2006, 2006, 14-16 June 2006. p.8 pp. \n \n\nhttp://oilpro.com/img/usermedia/0nBbvrbxIU6Lfc2TvCCV4g/original.png\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 30 \n\nSTASIAK, M.; PAGANO, D.; PLUCENIO, A. A new discrete slug-flow controller for \nproduction pipeline risers. IFAC Workshop on Automatic Control in Offshore Oil and \nGas Production-ACOOG, 2012. \n \nSTORKAAS, E. Stabilizing control and controllability: Control solutions to avoid slug \nflow in pipeline. 2005.   Ph. D. thesis, Norwegian University of Science and \nTechnology \n \nSTORKAAS, E.; SKOGESTAD, S. Controllability analysis of two-phase pipeline-riser \nsystems at riser slugging conditions. Control Engineering Practice, v. 15, n. 5, p. 567-\n581,  2007. ISSN 0967-0661.   \n \nSYRE, T. V. Anti-Slug Control with Non-Linear State Estimation.  2012.    \n \nTEIXEIRA, A. F. Otimiza\u00e7\u00e3o da Produ\u00e7\u00e3o de Po\u00e7os de Petr\u00f3leo com Gas Lift \nCont\u00ednuo. 2013.   Universidade Federal do Rio de Janeiro \n \nWILLERSRUD, A.  et al. Short-term production optimization of offshore oil and gas \nproduction using nonlinear model predictive control. 23: 215-223 p. 2013. \n \n \n\n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 31 \n\n7 A p \u00ea n d i c e s   \n\n7.1  Modelo em diagrama de blocos do Simulink  \n\nBloco principal, mostrando o acoplamento dos sistemas. \n\n \n\n \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 32 \n\n7.2 S-functions utilizadas no MATLAB  \n\n7.2.1 Modelo flowline-riser \n\nfunction [sys,x0,str,ts,simStateCompliance] = sFunDiMeglio_riser(t,x,u,flag,statesIC,p) \n \nswitch flag, \n  case 0, \n    [sys,x0,str,ts,simStateCompliance]=mdlInitializeSizes(statesIC); \n  case 1, \n    sys=mdlDerivatives(t,x,u,p); \n  case 2, \n    sys=mdlUpdate(t,x,u); \n  case 3, \n    sys=mdlOutputs(t,x,u,p); \n  case 4, \n    sys=mdlGetTimeOfNextVarHit(t,x,u); \n  case 9, \n    sys=mdlTerminate(t,x,u); \n  otherwise \n    DAStudio.error('Simulink:blocks:unhandledFlag', num2str(flag)); \n\n  \nend \n\n  \n% end sfuntmpl \n%============================================================================= \n% mdlInitializeSizes \n% Return the sizes, initial conditions, and sample times for the S-function. \n%============================================================================= \n% \nfunction [sys,x0,str,ts,simStateCompliance]=mdlInitializeSizes(statesIC) \nsizes = simsizes; \n\n  \nsizes.NumContStates  = 3; \nsizes.NumDiscStates  = 0; \nsizes.NumOutputs     = 8; % 3;  \nsizes.NumInputs      = 4; \nsizes.DirFeedthrough = 1; \nsizes.NumSampleTimes = 1;   % at least one sample time is needed \n\n  \nsys = simsizes(sizes); \n\n  \n% \n% initialize the initial conditions \n% \nx0 = statesIC; \n\n  \n% \n% str is always an empty matrix \n% \nstr = []; \n\n  \n% \n% initialize the array of sample times \n% \nts  = [0 0]; \n\n  \n% Specify the block simStateComliance. The allowed values are: \n%    'UnknownSimState', &lt;The default setting; warn and assume DefaultSimState \n%    'DefaultSimState', &lt;Same sim state as a built-in block \n%    'HasNoSimState',   &lt;No sim state \n%    'DisallowSimState' &lt;Error out when saving or restoring the model sim state \nsimStateCompliance = 'UnknownSimState'; \n\n  \n% end mdlInitializeSizes \n\n  \n% \n%============================================================================= \n% mdlDerivatives \n% Return the derivatives for the continuous states. \n%============================================================================= \n% \n\n  \nfunction sys=mdlDerivatives(t,x,u,p) \n\n  \n% Vari\u00e1veis manipuladas \nuProd = u(1); \n% Press\u00f5es de conex\u00e3o \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 33 \n\nps     = u(2); \n\n  \n% Vaz\u00f5es m\u00e1ssicas de conex\u00e3o com reservat\u00f3rio \nwgin   = u(3); \nwlin   = u(4); \n\n  \n% Par\u00e2metros de entrada \n% T      = u(7); \n\n  \n% Par\u00e2metros fixos \n\n  \n% aa = p(1); \n% bb = p(2); \n\n  \n% Vari\u00e1veis de estado do modelo \nmgeb = x(1); \nmgr  = x(2); \nmlr  = x(3); \n\n  \n%------------------- \n% Par\u00e2metros do modelo \n\n  \nrhom = p(1);    % 900; \nmlstill = p(2); % 3.73*10^4; \nmldelta = p(3); % 45402.4; \n\n  \naa   = p(4);    % 2857.94; \nbb   = p(5);    % 1.23463*10^8; \n% cc   = 1576.53;             % Para A = 4.4e-3 \ncc   = p(6);    % 391.905;    % Para A = 1.77e-2 \n\n  \n% Constantes das v\u00e1lvulas \ncout = p(7);    % 2.8*10^-3;  % Coeficiente da v\u00e1lvula de produ\u00e7\u00e3o \ncg   = p(8);    % 10^-4;      % Coeficiente da v\u00e1lvula virtual \n\n  \nepsilon = p(9); \n\n  \neps=1e-15; \n%------------------- \n% Press\u00f5es \npeb = aa*mgeb; \nprt = bb*mgr/max(eps,(mldelta-mlr)); \nprb = prt + (mlr + mlstill)*cc; \n\n  \n%----  \nf1 = -max(0, peb-prb)*cg; \nf2 =  max(0, peb-prb)*cg; \n\n  \n%---- uProd \nwout_mult=sqrt( max( 0,(prt-ps)*rhom ) )*cout; \nmass_riser=mgr+mlr; \nriser_gasFraction=mgr/mass_riser; \nriser_liqFraction=mlr/mass_riser; \n\n  \n% if riser_gasFraction>0.3 \n%    display(strcat('riser_gasFraction =',num2str(riser_gasFraction))); \n% end \ng21 = -wout_mult*riser_gasFraction; % g31*mgr/mlr \ng31 = -wout_mult*riser_liqFraction; \n\n  \n% epsilon = 0.78; % 0.78; \nwgin_eb= (1-epsilon)*wgin; \nwgin_r = epsilon*wgin; \n\n  \n%----- \n\n  \n% Equa\u00e7\u00f5es de estado na forma AffineStateSpace \n\n  \ndx1dt = f1 + 0         + 1*wgin_eb + 0         + 0      ; \ndx2dt = f2 + g21*uProd + 0         + 1*wgin_r  + 0      ; \ndx3dt = 0  + g31*uProd + 0         + 0         + 1*wlin ; \n\n  \n% dx1dt = (1-epsilon)*wgin + 0         + g12*uGLift ; \n% dx2dt = (epsilon)*wgin + g21*uProd + g22*uGLift ; \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 34 \n\n  \nsys=[ dx1dt \n      dx2dt \n      dx3dt ]; \n\n  \n% end mdlDerivatives \n\n  \n% \n%============================================================================= \n% mdlUpdate \n% Handle discrete state updates, sample time hits, and major time step \n% requirements. \n%============================================================================= \n% \nfunction sys=mdlUpdate(t,x,u) \n\n  \nsys = []; \n\n  \n% end mdlUpdate \n\n  \n% \n%============================================================================= \n% mdlOutputs \n% Return the block outputs. \n%============================================================================= \n% \nfunction sys=mdlOutputs(t,x,u,p) \n\n  \n% sys = x; \n\n  \n% Vari\u00e1veis de estado do modelo \nmgeb = x(1); \nmgr  = x(2); \nmlr  = x(3); \n\n  \n% Entradas do modelo \nuProd  = u(1); \nps     = u(2); \n\n  \n%------------------- \n% Par\u00e2metros do modelo \n\n  \nrhom = p(1);    % 900; \nmlstill = p(2); % 3.73*10^4; \nmldelta = p(3); % 45402.4; \n\n  \naa   = p(4);    % 2857.94; \nbb   = p(5);    % 1.23463*10^8; \n% cc   = 1576.53;             % Para A = 4.4e-3 \ncc   = p(6);    % 391.905;    % Para A = 1.77e-2 \n\n  \n% Constantes das v\u00e1lvulas \ncout = p(7);    % 2.8*10^-3;  % Coeficiente da v\u00e1lvula de produ\u00e7\u00e3o \n\n  \n%------------------- \n\n  \n\n  \npeb = aa*mgeb; \nprt = bb*mgr/(mldelta-mlr); \nprb = prt + (mlr + mlstill)*cc; \n\n  \n% if isnan(ps) || isnan(uProd) \n%     wout=0; \n% else \n%     wout  = cout* sqrt(max(0,rhom*(prt-ps)))*uProd; \n% end \n% wlout = wout; \n% wgout = (mgr/mlr)*wout; \n\n  \nwout_mult=sqrt( max( 0,(prt-ps)*rhom ) )*cout*uProd; \nmass_riser=mgr+mlr; \nfraction_gr=mgr/mass_riser; \nfraction_lr=mlr/mass_riser; \nwgout = wout_mult*fraction_gr; % g31*mgr/mlr \nwlout = wout_mult*fraction_lr; \n\n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 35 \n\nsys = [ wgout \n        wlout \n        prt \n        prb \n        peb \n        x(1) \n        x(2) \n        x(3) ]; \n\n  \n\n  \n% end mdlOutputs \n\n  \n% \n%============================================================================= \n% mdlGetTimeOfNextVarHit \n% Return the time of the next hit for this block.  Note that the result is \n% absolute time.  Note that this function is only used when you specify a \n% variable discrete-time sample time [-2 0] in the sample time array in \n% mdlInitializeSizes. \n%============================================================================= \n% \nfunction sys=mdlGetTimeOfNextVarHit(t,x,u) \n\n  \nsampleTime = 1;    %  Example, set the next hit to be one second later. \nsys = t + sampleTime; \n\n  \n% end mdlGetTimeOfNextVarHit \n\n  \n% \n%============================================================================= \n% mdlTerminate \n% Perform any end of simulation tasks. \n%============================================================================= \n% \nfunction sys=mdlTerminate(t,x,u) \n\n  \nsys = []; \n\n \n\n  \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 36 \n\n7.2.2 Modelo po\u00e7o com eleva\u00e7\u00e3o por gas-lift \n\nfunction [sys,x0,str,ts,simStateCompliance] = sFunDiMeglio_mod(t,x,u,flag,statesIC,p) \n\n  \nswitch flag, \n  case 0, \n    [sys,x0,str,ts,simStateCompliance]=mdlInitializeSizes(statesIC); \n  case 1, \n    sys=mdlDerivatives(t,x,u,p); \n  case 2, \n    sys=mdlUpdate(t,x,u); \n  case 3, \n    sys=mdlOutputs(t,x,u,p); \n  case 4, \n    sys=mdlGetTimeOfNextVarHit(t,x,u); \n  case 9, \n    sys=mdlTerminate(t,x,u); \n  otherwise \n    DAStudio.error('Simulink:blocks:unhandledFlag', num2str(flag)); \n\n  \nend \n\n  \n% end sfuntmpl \n% \n%============================================================================= \n% mdlInitializeSizes \n% Return the sizes, initial conditions, and sample times for the S-function. \n%============================================================================= \n% \nfunction [sys,x0,str,ts,simStateCompliance]=mdlInitializeSizes(statesIC) \n\n  \nsizes = simsizes; \n\n  \nsizes.NumContStates  = 3; \nsizes.NumDiscStates  = 0; \nsizes.NumOutputs     = 8; % 3;  \nsizes.NumInputs      = 7; \nsizes.DirFeedthrough = 1; \nsizes.NumSampleTimes = 1;   % at least one sample time is needed \n\n  \nsys = simsizes(sizes); \n\n  \n% \n% initialize the initial conditions \n% \nx0 = statesIC; \n\n  \n% \n% str is always an empty matrix \n% \nstr = []; \n\n  \n% \n% initialize the array of sample times \n% \nts  = [0 0]; \n\n  \nsimStateCompliance = 'UnknownSimState'; \n\n  \n% end mdlInitializeSizes \n\n  \n%============================================================================= \n% mdlDerivatives \n% Return the derivatives for the continuous states. \n%============================================================================= \n% \n\n  \nfunction sys=mdlDerivatives(t,x,u,p) \n\n  \n% Vari\u00e1veis manipuladas \nuProd = u(1); \nuGLift = u(3); \n\n  \n% Press\u00f5es de conex\u00e3o \nps     = u(2); \npglm   = u(4); \n\n  \n% Vaz\u00f5es m\u00e1ssicas de conex\u00e3o com reservat\u00f3rio \nwgin_r = u(5); \nwlin   = u(6); \n\n  \n% Par\u00e2metros de entrada \n% T      = u(7); \npres    = u(7); % 320e5; \n\n  \n% Par\u00e2metros fixos \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 37 \n\n  \n% aa = p(1); \n% bb = p(2); \n\n  \n% Vari\u00e1veis de estado do modelo \nmgeb = x(1); \nmgr  = x(2); \nmlr  = x(3); \n\n  \n%------------------- \n% Par\u00e2metros do modelo \n\n  \nrhom = p(1);    % 900; \nmlstill = p(2); % 3.73*10^4; \nmldelta = p(3); % 45402.4; \n\n  \naa   = p(4);    % 2857.94; \nbb   = p(5);    % 1.23463*10^8; \n% cc   = 1576.53;             % Para A = 4.4e-3 \ncc   = p(6);    % 391.905;    % Para A = 1.77e-2 \n\n  \n% Constantes das v\u00e1lvulas \ncout = p(7);    % 2.8*10^-3;  % Coeficiente da v\u00e1lvula de produ\u00e7\u00e3o \ncg   = p(8);    % 10^-4;      % Coeficiente da v\u00e1lvula virtual \n\n  \nkgl  = p(9);    % (1/2)*1.73948*10^-4;   % Coeficiente da v\u00e1lvula de entrada de gas-lift \n\n  \neps=1e-15; \n%------------------- \n% Press\u00f5es \npeb = aa*mgeb; \nprt = bb*mgr/max(eps,(mldelta-mlr)); \nprb = prt + (mlr + mlstill)*cc; \n\n  \n\n  \n%--- \navg_prb = 220e5; \n\n  \nif size(p,2) > 9 \n    avg_prb = p(10); \nend \n\n  \navg_dp  = pres - avg_prb; \nif pres > 0 \n    wlin   = (pres-prb)*(wlin/avg_dp); %/(11.5144e5); \n    wgin_r = (pres-prb)*(wgin_r/avg_dp); %/(182.0773e5); \nend \n%----  \nf1 = -max(0, peb-prb)*cg; \nf2 =  max(0, peb-prb)*cg; \n\n  \n%---- uProd \nwout_mult=sqrt( max( 0,(prt-ps)*rhom ) )*cout; \nwell_mass=mgr+mlr; \nwell_gasFraction=mgr/well_mass; \nwell_liqFraction=mlr/well_mass; \n\n  \ng21 = -wout_mult*well_gasFraction; % g31*mgr/mlr \ng31 = -wout_mult*well_liqFraction; \n\n  \n%----- uGasLift \nusePglm = pglm~=0 &amp;&amp; uGLift ~= 0; \nif usePglm \n    g12 = sqrt( max( 0,pglm-peb ) )*kgl; \n    wgin_eb = g12*uGLift; \nelse \n    epsilon = 0.78; % 0.78; \n    wgin    = wgin_r/epsilon; \n    wgin_eb = (1-epsilon)*wgin; \nend \n\n  \n%----- \n\n  \n% Equa\u00e7\u00f5es de estado na forma AffineStateSpace \n\n  \ndx1dt = f1 + 0         + 1*wgin_eb + 0         + 0      ; \ndx2dt = f2 + g21*uProd + 0         + 1*wgin_r  + 0      ; \ndx3dt = 0  + g31*uProd + 0         + 0         + 1*wlin ; \n\n  \nsys=[ dx1dt \n      dx2dt \n      dx3dt ]; \n\n  \n% end mdlDerivatives \n\n  \n% \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 38 \n\n%============================================================================= \n% mdlUpdate \n% Handle discrete state updates, sample time hits, and major time step \n% requirements. \n%============================================================================= \n% \nfunction sys=mdlUpdate(t,x,u) \n\n  \nsys = []; \n\n  \n% end mdlUpdate \n\n  \n% \n%============================================================================= \n% mdlOutputs \n% Return the block outputs. \n%============================================================================= \n% \nfunction sys=mdlOutputs(t,x,u,p) \n\n  \n% sys = x; \n\n  \n% Vari\u00e1veis de estado do modelo \nmgeb = x(1); \nmgr  = x(2); \nmlr  = x(3); \n\n  \n% Entradas do modelo \nuProd  = u(1); \nps     = u(2); \n\n  \n%------------------- \n% Par\u00e2metros do modelo \n\n  \nrhom = p(1);    % 900; \nmlstill = p(2); % 3.73*10^4; \nmldelta = p(3); % 45402.4; \n\n  \naa   = p(4);    % 2857.94; \nbb   = p(5);    % 1.23463*10^8; \ncc   = p(6);    % 391.905;    % Para A = 1.77e-2 \n\n  \n% Constantes das v\u00e1lvulas \ncout = p(7);    % 2.8*10^-3;  % Coeficiente da v\u00e1lvula de produ\u00e7\u00e3o \n%------------------- \n\n  \n\n  \npeb = aa*mgeb; \nprt = bb*mgr/(mldelta-mlr); \nprb = prt + (mlr + mlstill)*cc; \n\n  \nif isnan(ps) || isnan(uProd) \n    wout=0; \nelse \n    wout  = cout* sqrt(max(0,rhom*(prt-ps)))*uProd; \nend \n\n  \nwlout = wout; \nwgout = (mgr/mlr)*wout; \n\n  \nsys = [ wgout \n        wlout \n        prt \n        prb \n        peb \n        x(1) \n        x(2) \n        x(3) ]; \n\n  \n\n  \n% end mdlOutputs \n\n  \nfunction sys=mdlGetTimeOfNextVarHit(t,x,u) \n\n  \nsampleTime = 1;    %  Example, set the next hit to be one second later. \nsys = t + sampleTime; \n\n  \n% end mdlGetTimeOfNextVarHit \n\n  \n% \n%============================================================================= \n% mdlTerminate \n% Perform any end of simulation tasks. \n%============================================================================= \n% \nfunction sys=mdlTerminate(t,x,u) \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 39 \n\n  \nsys = []; \n\n  \n% end mdlTerminate \n\n7.2.3 Observador de estados  \n\nfunction [sys,x0,str,ts,simStateCompliance] = sFunObserver_DiMeglio(t,x,u,flag,statesIC,p) \n\n  \nswitch flag, \n  case 0, \n    [sys,x0,str,ts,simStateCompliance]=mdlInitializeSizes(statesIC,p); \n  case 1, \n    sys=mdlDerivatives(t,x,u,p); \n  case 2, \n    sys=mdlUpdate(t,x,u); \n  case 3, \n    sys=mdlOutputs(t,x,u,p); \n  case 4, \n    sys=mdlGetTimeOfNextVarHit(t,x,u); \n  case 9, \n    sys=mdlTerminate(t,x,u); \n  otherwise \n    DAStudio.error('Simulink:blocks:unhandledFlag', num2str(flag)); \nend \n% \n%============================================================================= \n% mdlInitializeSizes \n% Return the sizes, initial conditions, and sample times for the S-function. \n%============================================================================= \nfunction [sys,x0,str,ts,simStateCompliance]=mdlInitializeSizes(statesIC,p) \n\n  \n% \n% call simsizes for a sizes structure, fill it in and convert it to a \n% sizes array. \n% \n% Note that in this example, the values are hard coded.  This is not a \n% recommended practice as the characteristics of the block are typically \n% defined by the S-function parameters. \n% \nsizes = simsizes; \n\n  \nsizes.NumContStates  = 3; \nsizes.NumDiscStates  = 0; \nsizes.NumOutputs     = 4; % 3;  \nsizes.NumInputs      = 8; \nsizes.DirFeedthrough = 0; \nsizes.NumSampleTimes = 1;   % at least one sample time is needed \n\n  \nsys = simsizes(sizes); \n\n  \nmldelta = p(3); \nbb = p(5); \n\n  \nmgeb_0 = statesIC(1); \nmgr_0 = statesIC(2); \nmlr_0 = statesIC(3); \n\n  \nprt_0 = mgr_0/(mldelta-mlr_0)*bb; \n\n  \n\n  \nx0 = [ mgeb_0 \n       prt_0 \n       mlr_0  ]; \n\n  \n% str is always an empty matrix \n% \nstr = []; \n\n  \n% \n% initialize the array of sample times \n% \nts  = [0 0]; \n\n  \n% Specify the block simStateComliance. The allowed values are: \nsimStateCompliance = 'UnknownSimState'; \n\n  \n% end mdlInitializeSizes \n\n  \n%============================================================================= \n% mdlDerivatives \n% Return the derivatives for the continuous states. \n%============================================================================= \nfunction sys=mdlDerivatives(t,x,u,p) \n\n  \n% Vari\u00e1veis manipuladas \n\n\n\nControle antigolfadas na produ\u00e7\u00e3o de petr\u00f3leo por gas-lift 40 \n\nuProd = u(1); \nuGLift = u(3); \n\n  \n% Press\u00f5es de conex\u00e3o \nps     = u(2); \npglm   = u(4); \n\n  \n% Vaz\u00f5es m\u00e1ssicas de conex\u00e3o com reservat\u00f3rio \nwginr  = u(5); \nwlin   = u(6); \n\n  \n% Par\u00e2metros de entrada \n% T      = u(7); \npres   = u(7); \n\n  \n% Sa\u00eddas lidas \nprt_measured = u(8); \n\n  \n% Par\u00e2metros fixos \n\n  \n% aa = p(1); \n% bb = p(2); \n\n  \n% Vari\u00e1veis de estado do modelo \nx1  = x(1); \nx2  = x(2); \nx3  = x(3); \n\n  \nmgeb = x1; \nprt = x2; \nmlr = x3; \n\n  \n%------------------- \n% Par\u00e2metros do modelo \n\n  \nrhom = p(1);    % 900; \nmlstill = p(2); % 3.73*10^4; \nmldelta = p(3); % 45402.4; \n\n  \naa   = p(4);    % 2857.94; \nbb   = p(5);    % 1.23463*10^8; \n% cc   = 1576.53;             % Para A = 4.4e-3 \ncc   = p(6);    % 391.905;    % Para A = 1.77e-2 \n\n  \n% Constantes das v\u00e1lvulas \ncout = p(7);    % 2.8*10^-3;  % Coeficiente da v\u00e1lvula de produ\u00e7\u00e3o \ncg   = p(8);    % 10^-4;      % Coeficiente da v\u00e1lvula virtual \n\n  \nkgl  = p(9);    % (1/2)*1.73948*10^-4;   % Coeficiente da v\u00e1lvula de entrada de gas-lift \n\n  \nkObserver = p(10);  \n\n  \npeb = mgeb*aa; \n\n  \n% Vaz\u00f5es do sistema \nwout = sqrt(max(0, prt - ps)*rhom)*cout*uProd; \n\n  \nwglift = kgl*uGLift*sqrt(max(0, pglm - peb)); \n\n  \nwvirtual = cg*max(0, peb - prt -cc*(mlr + mlstill)); \n\n  \nx1Dot = wglift - wvirtual; \n\n  \n% Como o modelo do Di Meglio foi alterado, a altera\u00e7\u00e3o deve ser passada p/ \n% a press\u00e3o: \nx2Dot = (bb/(mldelta - mlr))*... \n        (wginr + wvirtual + wlin*(prt/bb)-(mldelta/mlr)*(prt/bb)*wout); \nx3Dot = wlin - wout; \n\n  \nsys = [ x1Dot \n        x2Dot - kObserver*(prt - prt_measured) \n        x3Dot         ]; \n% end mdlDerivatives \n\n  \n% \n%============================================================================= \n% mdlUpdate \n% Handle discrete state updates, sample time hits, and major time step \n% requirements. \n%============================================================================= \n% \nfunction sys=mdlUpdate(t,x,u) \n\n  \nsys = []; \n\n  \n\n\n\nDEQUI / UFRGS \u2013 Leonardo de Mattos Rolim 41 \n\n% end mdlUpdate \n\n  \n% \n%============================================================================= \n% mdlOutputs \n% Return the block outputs. \n%============================================================================= \n% \nfunction sys=mdlOutputs(t,x,u,p) \n\n  \n%  \nmlstill = p(2); \naa =  p(4); \ncc = p(6); \n\n  \npwc = ( x(1)*aa ); \npwt = x(2); \nmlr  = x(3); \n\n  \npwb_est = pwt + (mlr + mlstill)*cc; \n\n  \nsys = [ pwc \n        pwt \n        mlr  \n        pwb_est]; \n\n  \n\n  \n% end mdlOutputs \n\n  \n% \n%============================================================================= \n% mdlGetTimeOfNextVarHit \n% Return the time of the next hit for this block.  Note that the result is \n% absolute time.  Note that this function is only used when you specify a \n% variable discrete-time sample time [-2 0] in the sample time array in \n% mdlInitializeSizes. \n%============================================================================= \n% \nfunction sys=mdlGetTimeOfNextVarHit(t,x,u) \n\n  \nsampleTime = 1;    %  Example, set the next hit to be one second later. \nsys = t + sampleTime; \n\n  \n% end mdlGetTimeOfNextVarHit \n\n  \n%============================================================================= \n% mdlTerminate \n% Perform any end of simulation tasks. \n%============================================================================= \n% \nfunction sys=mdlTerminate(t,x,u) \n\n  \nsys = []; \n\n  \n% end mdlTerminate"}]}}}