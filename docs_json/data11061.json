{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.14368"}, {"@name": "filename", "#text": "20682_thesis.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "Universidade de Aveiro\nDepartamento de\nElectr\u00f3nica, Telecomunica\u00e7\u00f5es e Inform\u00e1tica,\n\n2016\n\nAlison Willian Pereira Sistema Autom\u00e1tico de 'Load-Pull' com Base\n\nnum Sintonizador de Imped\u00e2ncia Eletromec\u00e2nico\n\nFully-Automated Load-Pull System based on\n\nMechanical Tuners\n\n\n\nUniversidade de Aveiro\nDepartamento de\nElectr\u00f3nica, Telecomunica\u00e7\u00f5es e Inform\u00e1tica,\n\n2016\n\nAlison Willian Pereira Sistema Autom\u00e1tico de 'Load-Pull' com Base\n\nnum Sintonizador de Imped\u00e2ncia Eletromec\u00e2nico\n\nFully-Automated Load-Pull System based on\n\nMechanical Tuners\n\nDisserta\u00e7\u00e3o apresentada \u00e0 Universidade de Aveiro para cumprimento dos\nrequesitos necess\u00e1rios \u00e0 obten\u00e7\u00e3o do grau de Mestre em Engenharia Elec-\ntronica e Telecomunica\u00e7\u00f5es, realizada sob a orienta\u00e7\u00e3o cient\u00ed?ca de Jos\u00e9\nCarlos Esteves Duarte Pedro, Pedro Miguel da Silva Cabral, Professores do\nDepartamento de Electr\u00f3nica da Universidade de Aveiro e Dr. Francesc\nMartin Purroy l\u00edder de grupo na \u00e1rea de ampli?cadores de pot\u00eancia em r\u00e1dio\nfrequ\u00eancia (RF) na empresa Huawei Tecnologies Su\u00e9cia.\n\nDissertation presented to the University of Aveiro for the ful?lment of the req-\nuisites necessary to obtain the degree of Master In electronics and Telecom-\nmunication Engineering, developed under the scienti?c guidance of Jos\u00e9 Car-\nlos Esteves Duarte Pedro, Pedro Miguel da Silva Cabral, Professors in the\nDepartment of Electronics, Telecommunication and Informatics of the Uni-\nveristy of Aveiro, and Dr. Francesc Martin Purroy the team leader of radio-\nfrequency (RF) power ampli?er (PA) in HUAWEI Tecnologies Sweden.\n\n\n\nO J\u00fari / The Jury\n\nPresidente / President Prof. Doutor Nuno Miguel Borges de Carvalho\nProfessor Catedr\u00e1tico da Universidade de Aveiro\n\nArguente Principal / Main\nExaminer\n\nProf. Doutor Jo\u00e3o Manuel Torres Caldinhas Sim\u00f5es Vaz\nProfessor Auxiliar do Instituto Superior T\u00e9cnico da Universidade de Lisboa\n\nOrientador / Advisor Prof. Doutor Jos\u00e9 Carlos Esteves Duarte Pedro\nProfessor Catedr\u00e1tico da Universidade de Aveiro\n\nCo-Orientador / Co-Advisor Prof. Doutor Pedro Miguel da Silva Cabral\nProfessor Auxiliar Convidado da Universidade de Aveiro\n\n\n\nAgradecimentos /\nAcknowledgments\n\n\u00c9 com muita satisfa\u00e7\u00e3o que expresso a minha gratid\u00e3o aos meus orientadores\nProf. Dr. Jos\u00e9 Carlos Esteves Duarte Pedro e Prof. Dr. Pedro Miguel\nda Silva Cabral pela ajuda fornecida, conhecimento transmitido e tempo\ndisponibilizado.\n\nAgrade\u00e7o ao meu co-orientador, Dr. Francesc Purroy pela sua disponibili-\ndade, aten\u00e7\u00e3o dispensada, paci\u00eancia, dedica\u00e7\u00e3o e pro?ssionalismo em todas\nas fases que levaram \u00e0 concretiza\u00e7\u00e3o deste trabalho.\n\nO meu profundo agradecimento a todos os colegas que contribu\u00edram para\na concretiza\u00e7\u00e3o desta disserta\u00e7\u00e3o, estimulando-me intelectual e emocional-\nmente. Em particular, agrade\u00e7o o Dr. Eng. Lu\u00eds C\u00f3timos por me ter ajudado\nin\u00fameras vezes.\n\n\u00c0 Universidade de Aveiro e o Instituto de telecomunica\u00e7\u00f5es de Aveiro pela\naprendizagem transmitida, assim como o acesso as suas facilidades.\n\nEst\u00e1 disserta\u00e7\u00e3o foi realizada com o apoio e colabora\u00e7\u00e3o da empresa\nHUAWEI Technologies AB - Su\u00e9cia. Agrade\u00e7o esta institui\u00e7\u00e3o pelo interesse\nno trabalho desenvolvido.\n\nPor \u00faltimo, tendo plena consci\u00eancia que sem ela nada disso seria poss\u00edvel,\ndirijo-me a minha m\u00e3e, pelo incentivo, compreens\u00e3o e encorajamento ao\nlongo de todos os anos da minha vida. A ela dedico este trabalho!\n\n\n\npalavras-chave carga virtual, calibra\u00e7\u00e3o absoluta de pot\u00eancia, malha-fechada, malha-aberta,\nrealimenta\u00e7\u00e3o para frente, sintonizador de imped\u00e2ncia eletromec\u00e2nico, sin-\ntonizador de imped\u00e2ncia eletr\u00f4nico\n\nResumo Por raz\u00f5es de pot\u00eancia, linearidade e e?ci\u00eancia o ampli?cador \u00e9 um compo-\nnente limitador de performance em qualquer tipo de aplica\u00e7\u00f5es relacionadas\ncom esta\u00e7\u00f5es base de voz e dados, motivando a ind\u00fastria das telecomuni-\nca\u00e7\u00f5es a investir em sistemas capazes de ajudar o projetista de Ampli?cador\nde Pot\u00eancia (AP) a obter o m\u00e1ximo deste elemento ativo.\n\nO sistema de 'load-pull' \u00e9 uma ferramenta essencial para auxiliar o projeto\nde ampli?cadores de pot\u00eancia, permitindo determinar as condi\u00e7\u00f5es ideais de\nimped\u00e2ncia que maximizam a sua performance.\n\nEsta disserta\u00e7\u00e3o insere-se na \u00e1rea de caracteriza\u00e7\u00e3o e projeto de AP, em r\u00e1dio\nfrequ\u00eancia e visa a concep\u00e7\u00e3o, implementa\u00e7\u00e3o e valida\u00e7\u00e3o de um sitema\nautom\u00e1tico de 'load-pull' passivo.\n\nNeste trabalho, realizou-se um estudo sobre os mais diversos tipos de sis-\ntemas de 'load-pull' utilizados na caracteriza\u00e7\u00e3o de transistores de alta\npot\u00eancia.\n\nDe modo a cumprir a ?nalidade desta disserta\u00e7\u00e3o, constru\u00ed-se um sistema\npassivo automatizado de 'load-pull' capaz de lidar com pot\u00eancia 250W forma\nde onda cont\u00ednua (CW) e 2.5 kW de pot\u00eancia de pico em rela\u00e7\u00e3o a envolvente\nde modula\u00e7\u00e3o (PEP), onde a repetibilidade da malha de sa\u00edda deste sistema\n\u00e9 -60dB a uma frequ\u00eancia correspondente de 1.8GHz, garantindo uma boa\nprecis\u00e3o das imped\u00e2ncias apresentadas ao trans\u00edstor de microondas.\n\n\n\nKeywords active injection, absolute power calibration, closed-loop, load-pull character-\nization, electromechanical tuner, electronic tuners, feed-forward, harmonic\nimpedance synthesis, load-pull, open-loop, virtual load\n\nAbstract Due to power, linearity and e?ciency reasons the PA is the performance lim-\niting component in any state-of-the-art mobile voice and data base station,\nmotivating the telecommunications industry to invest in systems capable of\nhelping the designer of PA to get the most of the active devices.\n\nThe load-pull system is an essential tool to assist the design of PA, allow-\ning to determine the optimum matching conditions that maximizes the PA\nperformance parameters.\n\nThis dissertation ?ts in the area of radio frequency characterization and PA\ndesign, aiming the artful conception, implementation and validation of an\nautomated passive load-pull system.\n\nIn this work a study was also performed on the most diverse types of load-pull\nsystems that are used in the characterization of high power transistors.\n\nIn order to ful?ll the purpose of this dissertation, an automated load-pull\nsystem was built, being capable to handle 250W of power in continuous wave\n(CW) and 2.5kW in peak-to-envelope (PEP), where the system repeatability\nof its output network is -60dB at a frequency of 1.8GHz, granting a good\naccuracy of impedances presented to the microwave transistor.\n\n\n\nContents\n\nContents i\n\nList of Figures iii\n\nList of Tables v\n\nAcronyms vi\n\n1 Introduction 1\n1.1 Motivation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1\n\n1.2 Objectives . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2\n\n1.3 Organization and structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2\n\n2 Load-Pull Systems 3\n2.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3\n\n2.2 Figures of Merit (FoM) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4\n\n2.3 Load-pull measurements: Traditional, VNA and Six-Port. . . . . . . . . . . . . 5\n\n2.4 Load-pull techniques: Passive, Active and Hybrid . . . . . . . . . . . . . . . . . 10\n\n2.5 Comparison of the di?erent kinds of load-pull setups . . . . . . . . . . . . . . . 25\n\n2.6 Re?ection coe?cient enhancement techniques . . . . . . . . . . . . . . . . . . . 26\n\n3 Design and implementation of an automated tuner-based load-pull system 31\n3.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31\n\n3.2 Diagram of the automated load-pull system . . . . . . . . . . . . . . . . . . . . 32\n\n3.3 System description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33\n\n3.4 Characterization of the load-pull system . . . . . . . . . . . . . . . . . . . . . . 37\n\n3.5 Characterization of the system components . . . . . . . . . . . . . . . . . . . . 37\n\n3.6 Characterization of tuner . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38\n\n3.7 MATLAB routines . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40\n\n3.8 Automated load-pull system veri?cation . . . . . . . . . . . . . . . . . . . . . . 43\n\n4 Conclusion and Future Work 51\n4.1 Conclusion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51\n\n4.2 Future work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\n\nBibliography 53\n\ni\n\n\n\nA MATLAB Routines 57\nA.1 Pre-Characterization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57\nA.2 Power Calibration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61\nA.3 Load-Pull Measurements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65\n\nB MT981EU10_Setup - HUAWEI 73\n\nC GaN Load-Pull - Target impedances 76\n\nD 3-port to 2-port network conversion 77\nD.1 LPS - Output Network . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77\nD.2 LPS - Input Network . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78\n\nii\n\n\n\nList of Figures\n\n2.1 Representative diagram of load-pull and its applications. . . . . . . . . . . . . . 3\n\n2.2 Representative diagram of the load-pull measurement capabilities. . . . . . . . . 5\n\n2.3 Representative schematic of a traditional automated load-pull measurement [5]. 6\n\n2.4 Generic block diagram of a real-time passive load-pull setup based on [6]. . . . 7\n\n2.5 Simpli?ed automated load-pull setup based on SP re?ectometer technique. . . . 8\n\n2.6 Representation of a passive load-pull system, copied from [5]. . . . . . . . . . . 10\n\n2.7 Example of an electromecanical tuner (EMT) with 2 RF probes. . . . . . . . . 11\n\n2.8 (a) Tuner RF probe. (b) Impact of parallel susceptance in the magnitude of |?|\nre?ection coe?cient. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11\n\n2.9 A Solid-state electronic tuner, copied from [15]. . . . . . . . . . . . . . . . . . . 12\n\n2.10 Example of an ETS assisting noise parameters in on-wa?er measurements. . . . 12\n\n2.11 Shows the tuner distribution of ETS vs EMT. Copied from [18] . . . . . . . . . 13\n\n2.12 This architecture was on of the ?rst passive harmonic load-pull setups. . . . . . 15\n\n2.13 The harmonic rejection tuner based three-harmonic load-pull architecture. . . . 16\n\n2.14 Tuning coverage at f0, 2f0 and 3f0 using the triplexer method. [23] . . . . . . . 16\n\n2.15 The harmonic rejection tuner based three-harmonic load-pull architecture. . . . 17\n\n2.16 Tuning coverage at f0, 2f0 and 3f0 using a PHT and fundamental tuner.[23] . . 17\n\n2.17 The multipurpose single tuner based harmonic load-pull architecture. . . . . . . 18\n\n2.18 Tuning coverage at f0, 2f0 and 3f0 using the multi purpose single tuner. . . . . 18\n\n2.19 Representative loop of an ideal active closed-loop LPS. system. . . . . . . . . . 20\n\n2.20 Block diagram of a realizable active closed-loop LPS. . . . . . . . . . . . . . . . 21\n\n2.21 A generic schematic of feed-forward active load-pull architecture [5] . . . . . . . 22\n\n2.22 Functional diagram of an active open-loop load-pull system. . . . . . . . . . . . 23\n\n2.23 Hybrid-Active fo load-pull system copied from [28] . . . . . . . . . . . . . . . . 24\n\n2.24 Circuit model of a mechanical tuner with pre-match and tuning probe. . . . . . 26\n\n2.25 Functional diagram (a) and the signal ?ow of an enhaced load-pull setup (b)\ncopied from [29]. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27\n\n2.26 Comparison of the maximum achievable re?ection coe?cient between a com-\nmercial pre-matched tuner and a loop enhanced tuner at 1.8 GHz base on [29]. 27\n\n2.27 Illustration of the quarter-wave transformer technique in (c). The Z?T represents\nthe synthesizable loads that are inside of the light blue circles. Moreover, the ZL\nare the loads presented after the quarter-wave transformation that are inside of\nthe light purple circles. Those ones that possess a characteristic line impedance\nof 50 ? are depicted in (a) and those ones that possess a characteristic line\nimpedance of 20 ? are represented in (b). . . . . . . . . . . . . . . . . . . . . . 28\n\niii\n\n\n\n2.28 Fixtures with ?/4 - transformers for load-pull measurements (a) no-bias (b)\nbias. Copied from [30]. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28\n\n2.29 Maury load pull low-loss test ?xture. [32] . . . . . . . . . . . . . . . . . . . . . 29\n\n3.1 Automated load-pull system implementation ?ow chart. . . . . . . . . . . . . . 32\n3.2 Scheme of the built automated load-pull system. . . . . . . . . . . . . . . . . . 33\n3.3 Functional diagram of the system source block. . . . . . . . . . . . . . . . . . . 34\n3.4 Functional diagram of the system load block. . . . . . . . . . . . . . . . . . . . 35\n3.5 Illustrate how the re?ection coe?cient of a slide screw tuner change, with a\n\nconductive probe moving in two directions within a slabe line, being represented\non the admittance smith chart. . . . . . . . . . . . . . . . . . . . . . . . . . . . 36\n\n3.6 Equivantel 2-port of the input network of the LPS. . . . . . . . . . . . . . . . . 37\n3.7 Interpolation result based on the pre-characterized load impedances. . . . . . . 38\n3.8 Representation of the output network of the developed load-pull system. . . . . 41\n3.9 Normalized load-pull results obtained in the characterization of one load impedance,\n\ndisplaying the achieved gain(dB) and e?ciency as function of output power (Pout). 42\n3.10 Obtained results of the repeatability check test at 1.8 GHz. . . . . . . . . . . . 43\n3.11 Characterization and tuner repeatability setup. . . . . . . . . . . . . . . . . . . 44\n3.12 Displayed repeatability test over the Smith chart. . . . . . . . . . . . . . . . . . 44\n3.13 Scheme of the outputnetwork repeatability test. . . . . . . . . . . . . . . . . . . 45\n3.14 Pre-characterization magnitude and phase error results. . . . . . . . . . . . . . 46\n3.15 Precision of poorly calibrated prediction loads. . . . . . . . . . . . . . . . . . . 47\n3.16 Precision of the well performed prediction loads. . . . . . . . . . . . . . . . . . 47\n3.17 Estimated tuner impedances based on target impedances for the DUT charac-\n\nterization. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48\n3.18 Load-Pull contours at the Z-plane. . . . . . . . . . . . . . . . . . . . . . . . . . 49\n3.19 Load-Pull contour at 3dB gain compression point. . . . . . . . . . . . . . . . . . 49\n3.20 Load-Pull contour at 3dB gain compression point where Z0 = 10 ?. . . . . . . 50\n3.21 Final bench at Huawei Sweden of an automated tuner based load-pull system. . 50\n\nD.1 Conversion of a 3-port network to 2-port network. . . . . . . . . . . . . . . . . . 77\nD.2 Conversion from 3-port to 2-port s-parameters of the input network. . . . . . . 78\n\niv\n\n\n\nList of Tables\n\n2.1 Comparison of the load-pull measurement capabilities. Modi?ed from [11] . . . 9\n2.2 Pros and Cons of ETS and EMT. Copied from [8] . . . . . . . . . . . . . . . . 14\n2.3 Characteristic of harmonic tuning methods. Copied from [23] . . . . . . . . . . 19\n2.4 Comparison between the passive and active techniques. Based on [5]. . . . . . . 25\n\nC.1 Target impedances of the used microwave transistor. . . . . . . . . . . . . . . . 76\n\nv\n\n\n\nAcronyms\n\nACPR Adjacent-channel power ratio\n\nALC Automatic leveling control\n\nAWR Applied wave research\n\nCAD Computer aided design\n\nCW Continuous wave\n\n?D Drain e?ciency\n\nDLL Dynamic-link library\n\nDUT Device under test\n\nEMT Electromechanical tuner\n\nETS Electronic tuners\n\nFoM Figures of merit\n\nGaN Gallium nitride\n\nGPIB General purpose interface bus\n\nHRT Harmonic rejection tuner\n\nIF Intermediate frequency\n\nIMD Intermodulation distortion\n\nLNA Low Noise Ampli?er\n\nLPS Load-pull system\n\nLUT Look up table\n\nMPST Multi-purpose single tuner\n\nMWO Microwave o?ce\n\nNVNA Nonlinear vector network analyzer\n\nPA Power ampli?er\n\nvi\n\n\n\nPAE Power-added e?ciency\n\nPAPR Peak-to-average power ratio\n\nPDC DC power supply\n\nPdel Power delivered\n\nPEP Peak-to-envelope\n\nPin Input power\n\nPLP Load-pull power\n\nPout Output power\n\nRF Radio-frequency\n\nRMS Root mean square\n\nSA Spectrum analyzer\n\nSMA SubMiniature version A\n\nSNR Signal-to-noise ratio\n\nSOLT Short-open-load-thru\n\nSP Six-port\n\nTRL Thru-re?ect-line\n\nVNA Vector network analyzer\n\nVSG Vector signal generator\n\nVSWR Voltage standing wave ratio\n\nvii\n\n\n\nviii\n\n\n\nChapter 1\n\nIntroduction\n\n1.1 Motivation\n\nIn the last decades the radio communications industry and academic researchers have been\nlooking for the increase of PA's output power and e?ciency while maintaining linearity and\nbroadening the operating bandwidth. The PA is the limiting performance component at any\nstate-of-the-art mobile voice and data base-stations, which justi?es the high investments in\npowerful systems capable of aiding the designer to get the most out of the active devices [1].\n\nThe most commonly used method in PA artful conception is the computer aided design\n(CAD) that provides faster and reliable simulations, which usually meet the experimentally\nobtained results. In some cases, the lack or inaccuracy of non-linear models makes the method\nunusable. Alternatively, a very attractive measurement-based method, known as load pull is\ntypically employed, being a powerful tool in the microwave transistor and power ampli?ers\ncharacterization world [1].\n\nThe term load-pull refers to the characterization of microwave transistors as a function of\nre?ection coe?cient that is seen by the device under test (DUT) at its output terminal. The\ntraditional load-pull system is a passive technique that utilizes two mechanical tuners, one\nto vary the gate (input) impedance and another to vary the drain (output) impedance for a\ncommon source device [2], while accessing the DUT performance parameters.\n\nThe active technique is also commonly used in load-pull applications. It is based on signal\ninjection, emulating the re?ected travelling wave seen by the DUT. This overcomes the is-\nsues associated with the passive technique due to its inherent losses that limits the maximum\nachievable re?ection coe?cients, being capable to synthesize unit amplitude or even greater\nre?ection coe?cients. The disadvantage associated with the active technique relies on the cost\nof very expensive ampli?ers beyond being prone to oscillations.\n\nThe hybrid load-pull system results from the combination of passive and active techniques.\nAlthough it reduces the cost of additional RF power sources or loop ampli?ers, it is very\nexpensive and hard to implement [1].\n\nAnother commonly used passive technique is the harmonic load-pull system (LPS) required\nto perform the characterization at the fundamental and the harmonic frequencies of a DUT.\nAs a result of harmonic characterization through load-pull measurements, the information of\nthe device can then be utilized for a more complex design PA architecture where e?ciency\nand linearity are the key elements.\n\n1\n\n\n\n1.2 Objectives\n\nThe main objective of this work is to build a LPS based on already available mechanical\ntuners. Nowadays, di?erent strategies for LPS are being employed and, because of that, it is\nnecessary to introduce load-pull architectures applied in high-power devices characterization,\nallowing to understand the most suitable setup for the practical implementation of this work.\nThat is the reason to establish the following objectives:\n\n? Understand the LPS operation principles, measurements and techniques.\n\n? Develop MATLAB control routines for the available tuners and system equipment.\n\n? Test the developed routines and optimize overall performance.\n\n? Validate the automated LPS assessing the accuracy of the characterization.\n\n1.3 Organization and structure\n\nThis dissertation is organized into four chapters and have the following structure:\n\n? Chapter 1: explains the context and motivation of load-pull measurements regarding\nthe design and characterization of RF power ampli?ers utilized by the radio communi-\ncations industry.\n\n? Chapter 2: introduces the load-pull state-of-art, addressing the main features of each\ntopology and technique. Additionally, strategies and fundamental concepts regarding\nhigh power device characterization is given.\n\n? Chapter 3: presents a concise description regarding the design, implementation and\nvalidation of the built automated tuner based load-pull system.\n\n? Chapter 4: highlights the main aspects, comments the overall work and gives hints\nfor future improvements of the developed load-pull system.\n\nAppendices\n\n? Appendix A: MATLAB Routines conceived to enable characterization of load tuner,\nLPS calibration and automated load-pull measurements.\n\n? Appendix B: MT981EU10_Setup - MATLAB routine developed for the control of\nthe tuner.\n\n? Appendix C: GaN Load-Pull - List of the target impedances used in the device\ncharacterization.\n\n2\n\n\n\nChapter 2\n\nLoad-Pull Systems\n\nThis chapter introduces the load-pull state-of-art explaining the most important features,\nmeasurements topologies and techniques applied to high power device characterization.\n\n2.1 Introduction\n\nThe PA is designed in terms of output power, e?ciency and gain. Its optimum perfor-\nmance is achieved when an appropriate source and load impedance are placed at its input\nand output terminals, respectively. Since PAs usually operate at large-signal, for exhibiting\nhigher e?ciency, linearity breaks and the microwave transistor cannot be accurately repre-\nsented through linear s-parameters, justifying the usage of load-pull techniques in order to\ndetermine its optimum matching conditions [3].\n\nFigure 2.1 shows the most commonly used techniques and applications of automated load-\npull systems and the red path indicates the goal of this work.\n\nFigure 2.1: Representative diagram of load-pull and its applications.\n\n3\n\n\n\n2.2 Figures of Merit (FoM)\n\nRepeatability - is one of the key features of an automated tuner, indicating how precisely\na tuner can repeat an impedance state. The repeatability consists in the di?erence of s-\nparameters between two or more repeated mechanical positions that are measured through a\ncalibrated vector network analyzer (VNA). The following procedure exempli?es how it can\nbe quanti?ed: Firstly, the measurement of the s-parameters is done for a respective chosen\nmechanical position and are stored in memory. Next, the tuner probe is moved to a dissimilar\nposition, then moved back and the s-parameters are measured again. The repeatability test\nresults are obtained by the following equations:\n\n(S11)repeatability = 20.log10|(S11)measured ? (S11)memory| (2.1)\n\nTuning Range - speci?es the tuners maximum achievable re?ection coe?cient over the\nwhole Smith chart. Usually, high power microwave transistors possess their optimum load\nimpedances for gain, e?ciency or output power at a region close to the border of the Smith\nchart. In addition, Tuning Range Distribution de?nes how the impedance points are covering\nthe smith chart regions [4].\n\nTuner Resolution - de?nes how many impedances state the tuner is capable to syn-\nthesize. It is an important requisite to avoid small variations of the seen impedance by the\nmicrowave transistor that might cause signi?cant changes in power-added e?ciency (PAE)\nor Pout. Usually an impedance tuner is able to synthesize around 10.000 impedances states,\nwhich can be increased by cascading two or more tuners.\n\nPower Handling Capability - describes the maximum root mean square (RMS) and the\npeak powers supported by the tuner without causing any signi?cant change of the calibrated\nimpedances. This information is speci?ed by the manufacturer of the tuners, de?ning the\nsafety limits in which it can operate without getting damaged or presenting a risk to the\nload-pull system.\n\nSome tuners that in the past were poorly designed, presented large values of insertion\nlosses, causing heat of the tuner and contributing to the corona e?ect. This e?ect causes\nelectric discharge due to the air ionization that is surrounding the tuner conductor, damaging\nthe DUT and system equipment.\n\nTuning Speed - is seen as the time that the tuner requires to move the probe from one\nposition to another. Moreover, the Total time takes in consideration the tuning speed and\nspent time of the measurements, which is extremely important to have a fast load-pull char-\nacterization in particular, when dealing with the passive technique principle.\n\nTuner Bandwidth - is classi?ed by the frequency range of the tuner and its instantaneous\nbandwidth where the speci?ed impedances are synthesizable and the modulated bandwidth\nhas a speci?ed constant group delay [1].\n\nTuner Size - refers to the tuner mechanical dimensions being especially important for\non-wafer applications where possible vibrations should be avoided, reducing the impact of\nprobe movements and acoustic vibrations, as these increase the insertion losses and change\nthe predicted impedances.\n\n4\n\n\n\n2.3 Load-pull measurements: Traditional, VNA and Six-Port.\n\nThe load-pull measurements are classi?ed according to the capability of the system to\ndetermine the re?ection coe?cient seen by the DUT, while accessing the injected input power\n(Pin) and the power delivered (Pdel) to the load. The ?rst step in setting up a functional\nload-pull system is the VNA calibration performed through a standard calibration kit. This\nprocess is necessary to remove the systematic errors caused by directivity, mismatch, isolation,\nand cross-coupling that are associated with the VNA.\n\nNot all load-pull systems are able to monitor in real-time the impedances seen by the DUT,\nunless the used topology possess waveform or vectorial capabilities such as the nonlinear vector\nnetwork analyzer (NVNA). In addition, the components attached between the NVNA and\nthe DUT reference plane must to be embedded on the calibration in order to directly measure\nthe impedances.\n\nMost passive setups are characterized beforehand through s-parameters measurements of\ntuner mechanical positions and system components. After the information of each system\nblock is assembled and mathematically cascaded, it allows the system to predict the impedance\nstate that is seen by the DUT based on the time-domain waveform, vectorial or scalar measure-\nments. In case of a scalar measurements, the characterization through s-parameters provides\nthe relation of phase and magnitude that exists between ports of the characterized network,\nwhich allows the estimation of power at the DUT reference plane as well as the seen impedance.\n\nThe power meter is never directly plugged to the DUT output terminals and because of\nthat, the information about power is 'uncorrected', requiring a characterization of the system\nto mathematically remove the inherent losses of the input and output network, resulting in\nthe e?ective Pin and Pout.\n\nBecause, in the passive load-pull, a2 is generated from b2 in a linear passive network (the\ntuner and its associated resistor termination), the synthesized re?ection coe?cient, ??L =\na?2/b\n\n?\n2, is independent from the absolute value of b2. This means that, with a proper char-\n\nacterization of the load block, we can predict the re?ection coe?cient actually applied to\nthe DUT, ?L = a2/b2, independently from the knowledge of b2. Consequently, the passive\nload-pull technique is suitable for any of the discussed measurement topologies (Traditional,\nVNA Based and Six-port re?ectometer). This can also be said to the closed-loop active, or\nhybrid closed-loop, technique, as long as all loop blocks, namely the loop ampli?er, can be\nconsidered linear and perfectly characterized. This is not the case of the open-loop technique\nsince a2 is independently generated from b2. In such a case, ?\n\n?\nL or ?L can only be known after\n\nknowing b2, and that can be obtained from its direct measurement (via a VNA or Six-port\nre?ectometer). Otherwise, it would require the knowledge of the DUT's s-matrix and the (non\nassured) assumption that the DUT is linear.\n\nFigure 2.2: Representative diagram of the load-pull measurement capabilities.\n\nThe following subsections explains how the impedance can be predicted or measured ac-\ncording to the chosen topology for the passive load-pull measurements.\n\n5\n\n\n\n2.3.1 Traditional load-pull measurements\n\nThe traditional load-pull is based on power meter or scalar analyzer measurements, giving\nonly the scalar information of the DUT performance. The example shown in Fig. 2.3, contains\na DC power supply, an signal generator, an power meter and at least two tuners intended to\ncontrol and recon?gure the input and output network through a source tuner and load tuner,\nrespectively.\n\nThe tuner pre-characterization is a process required to determine which s-parameters cor-\nresponds to a certain mechanical position. This process plays a major role in system char-\nacterization, accounting for the s-parameters of the tuner in every used mechanical position\ntogether with the system components to properly shift the reference plane and mathemat-\nically remove the losses present at the output network of the DUT. As such, it is usually\ncreated a look up table (LUT) containing the s-parameters versus tuner mechanical position\nand frequency, saving time and eliminating the usage of an additional system component on\nthe presented topology.\n\nIn order to mathematically remove the system losses from the measurements and prop-\nerly assist the power at the DUT reference plane, the so-called absolute power calibration\nis normally used and it is well treated in Section 3.5.2. When used in passive systems, this\nprocedure is normally followed by a ?Gt system veri?cation that compares the measured\ntransducer gain, Gt, to the one predicted through the characterization of the whole LPS.\n\nFigure 2.3: Representative schematic of a traditional automated load-pull measurement [5].\n\nThe re?ection coe?cients depicted in Fig.2.4, are de?ned by the ratio of incident travelling\nwaves, a1, a2 and the re?ected travelling waves, b1, b2, and it is calculated by the following\nequations:\n\n?S =\na1\nb1\n\n=\nZSource ?Z0\nZSource + Z0\n\n(2.2)\n\n?L =\na2\nb2\n\n=\nZLoad ?Z0\nZLoad + Z0\n\n(2.3)\n\n,where ?S is the input re?ection coe?cient, ?L is the output re?ection coe?cient, ZS is the\nsource impedance, ZL is the load impedance and Z0 represents the characteristic impedance\nof the system.\n\n6\n\n\n\n2.3.2 VNA based load-pull measurements\n\nThe real-time VNA-based load-pull system shown in Fig. 2.4 is capable to monitor the\nfour travelling waves at the DUT planes a1, a2, b1 and b2. The VNA calibration will shift the\nVNA Ref and Test ports that are monitoring a0 and b0 to the DUT input plane allowing the\ncalculation of ?S while a3 and b3 allows the access of the presented ?L at the DUT output\nport. The re?ection coe?cients ?S and ?L are de?ned as the previous equations 2.2 and 2.3,\nrespectively. The system characterization is also required to assist the measurement of Pin\nand Pout, obtained by a proper de-embedding of the system components.\n\nFigure 2.4: Generic block diagram of a real-time passive load-pull setup based on [6].\n\nIn VNA-based load-pull setups, the usage of attenuators are justi?ed due to potential\noscillations of the DUT that can exceed the operating power levels causing damage to the\nsystem equipment. In addition, the attenuator maintains the generated harmonic compo-\nnents above the levels that might interfere signi?cantly on the measurements. Moreover, only\none power sensor at each power divider termination is required. Assuming a performed pre-\ncharacterization, the tuner re?ection coe?cient is known and the VNA allows to check this\ncondition [7]. The power being injected and delivered by the DUT is mathematically calcu-\nlated at post processing levels, removing the losses caused by probe movements and central\nconductor of the tuners and the connectors. The pre-characterization of the tuners speeds up\nthe measurement process and allows the interpolation of impedances in order to synthesize a\ndesired re?ection coe?cient present in the DUT reference plane [8].\n\nAs it is known, power sensors are wide band, measuring all power including the funda-\nmental and harmonic frequencies, which is the reason to utilize ?lters before the measurement\nreference plane to ensure that only the fundamental frequency is being monitored and no\npower at harmonic components is interfering on the measurements.\n\nThe presented measure topology only provides the information at real-time of the seen\nimpedance by the DUT, it requires, in addition, an absolute power calibration in order to\nproper and accurately assists the power at the device input and output terminals which is a\nsimilar process utilized in the traditional technique.\n\n7\n\n\n\n2.3.3 Six-port based load-pull measurements\n\nThe load-pull measurement based on six-port (SP) re?ectometer technique scheme is de-\npicted in Fig. 2.5. It includes two six-port junctions, SP1 and SP2, two automated tuners,\nsource tuner and load tuner. The SP re?ectometer is a low-cost technique realized in microstrip\ntechnology, which acts as network analyser for absolute power and re?ection coe?cient mea-\nsurement at the desired frequency [9].\n\nThis measurement topology is capable to obtain the re?ection coe?cient based on a circuit\nthat possess N-port network, requiring 4N power readings [1, 10]. The information of re?ection\ncoe?cient phase is directly obtained from RF signals through a proper calibration of the SP\nre?ectormeters.\n\nFigure 2.5: Simpli?ed automated load-pull setup based on SP re?ectometer technique.\n\nThe re?ection coe?cient and power that is obtained with SP re?ectometer measurements\nis calculated the following equations:\n\n?DUT (f) =\nw(f) ?e(f)\n\n?c(f)w(f) + d(f)\n(2.4)\n\nPDUT (f) =\nk(f)PRef (f)\n\n|1 + c(f)?DUT (f)|2\n(2.5)\n\n,where c(f), d(f) and e(f) are the error box parameters, obtained through a proper calibra-\ntion of SP junction, w(f) is the embedded re?ection coe?cient, k(f) is the power calibration\nparameter determined at each measurement frequency, PRef (f) is the power reading measure-\nment at reference port of the SP junction and ?DUT (f) is the re?ection coe?cient measured\nby the SP re?ectometer.\n\n?S(f) = S22(f) +\nS12(f)S21(f)?st\n1 ?S11(f)?st\n\n=\n?(f)?st + ?(f)\n\n\u00b5(f)?st + 1\n(2.6)\n\n, where ?(f) ,?(f) and \u00b5(f) are directly related to the two-port network delimited by\nthe input and output reference planes of SP junctions and ?st is the source tuner re?ection\ncoe?cient. In a similar manner the calibration of the SP is performed at the load side of the\nDUT.\n\n8\n\n\n\n2.3.4 Comparison of the load pull measurement techniques\n\nThe major di?erence between the di?erent measurement techniques is the utilized pro-\ncedure for the inspection of the impedance seen by the DUT at its reference plane. The\ntraditional method is unable to monitor, in real-time, the re?ection coe?cient at the DUT\nreference plane. On the other hand, the VNA-based technique allows the measurement of that\ntermination at CW and multi-tones, while the six-port techniques only gives information at\nthe fundamental frequency due to the narrowed bandwidth of the six-port ?xture, which is\nbuilt on microstrip lines. Modulated impedances require a more complex measurement system\nwith time domain waveform capabilities which is not discussed in this work.\n\nBesides the short introduction of this subsection, the main features of each system are\nrevised in the following Table 2.1 where it is shown the main important measurements required\nfor the characterization of microwave transistor using a load-pull application.\n\nTable 2.1: Comparison of the load-pull measurement capabilities. Modi?ed from [11]\n\n9\n\n\n\n2.4 Load-pull techniques: Passive, Active and Hybrid\n\nThe load-pull techniques have been evolving in the last decades, but its classi?cation\nremains organized into two categories: active and passive. These techniques of load-pull refer\nto how fashion impedances are synthesized, while the load-pull measurement are classi?ed\naccordingly to the system capability in perform scalar, vectorial or time domain measurements.\n\nThis section explains the state-of-art of the load-pull techniques focusing on fundamental\nfrequency characterization. In addition, it is brie?y reviewed the passive harmonic load-pull\ntechniques that might be used as future work. Moreover, due to the inherent losses exis-\ntent in passive load-pull systems, it was found interesting to present some strategies adopted\nto increase the maximum achievable re?ection coe?cient in high-power microwave devices\ncharacterization.\n\n2.4.1 Passive load-pull system\n\nThe traditional load-pull system is generally built around its main element, the tuner,\nwhich is usually placed between the DUT and the power meter, as shown in Fig. 2.6. The\nmajor challenge in setting up this type of load-pull system involves its characterization and\ncalibration, required to de-embed the losses and shift reference plane from the peripheral\nequipment to the DUT plane, allowing to assist in measuring its performance parameters [5].\n\nFigure 2.6: Representation of a passive load-pull system, copied from [5].\n\nThe optimum load impedance is determined by the inspection of the DUT performance\nparameters under di?erent impedance states while the measurement of Pin and Pout is done\nthrough a power meter. The correct reading of Pin, Pout and output re?ection coe?cient,\n?OUT is obtained by the following equations:\n\n?OUT =\na2\nb2\n\n(2.7)\n\nPin = |a1|2 ?|b1|2 = |a1|2(1 ?|?in|2) (2.8)\n\nPout = |b2|2 ?|a2|2 = |a1|2(1 ?|?out|2) (2.9)\n\nwhere, an represents the incident travelling waves and bn, the re?ected travelling waves, where\nn corresponds to ports 1 and 2; There are two kinds of passive tuners: electromechanical\ntuner (EMT) and the electronic tuners (ETS) as is explained as follows.\n\n10\n\n\n\nElectromechanical tuner (EMT)\n\nThe EMT is a physical mechanical structure that can be recon?gured to set some s-\nparameters at its ports. Generally, it is composed by probes/slug/stubs in a slotted trans-\nmission line. Figure 2.7 shows an automated EMT, composed by a slab line, two RF probes,\n3 stepper motors and an electronic control board utilized to precisely control the mechanical\nposition of the probes along the x and y axis. The precision of the motors allows the correla-\ntion between its s-parameters and respective mechanical positions, being a crucial feature of\nan automated load-pull system.\n\nFigure 2.7: Example of an electromecanical tuner (EMT) with 2 RF probes, based on [12].\n\nThe tuner probes depicted in Fig. 2.8 illustrate the main engine utilized in the syntheses of\ndi?erent re?ection coe?cients. The probe is usually called the mismatched element, because its\nvertical movement over Y axis and movement along horizontal X axis, modi?es the magnitude\nand phase of the re?ection coe?cient, respectively. This resonator element is speci?ed by the\nmanufacturer in order to cover a certain range of frequencies, which typically goes from RF\nup to millimeter waves [8, 13, 14].\n\nFigure 2.8: (a) Tuner RF probe. (b) Impact of parallel susceptance in the magnitude of |?|\nre?ection coe?cient.\n\nThe EMT is capable to synthesize re?ection coe?cients, ?, normally as the order of 0.9-\n0.95. When it is pre-matched by the ?xture or cascaded with another tuner, this range can\nbe increased up to 0.98.\n\n11\n\n\n\nElectronic tuners (ETS)\n\nThe ETS is a faster device fabricated with ON/OFF PIN diodes or varicators, both\nmounted in microstrip circuit and digitally controlled. The distribution of re?ection factors\nover the smith chart are typically irregular due to the physical distribution of circuit elements\nalong the microstrip line. Normally, the maximum achievable re?ection coe?cient of an ETS\nis about 0.8 enclosed in a certain range of frequencies.\n\nA possible con?guration of an ETS is depicted in Fig. 2.9, which is regularly controlling\ndi?erent possible ON/OFF states, through a control unit that allows the syntheses of many\nhigh-ly repeatable re?ection coe?cients. However, this tuner possesses a lower tuning reso-\nlution compared with the EMT, being usually cascaded with additional tuners, generating\nmillions of impedance states, which hopefully will correspond to the desired impedance states.\n\nFigure 2.9: A Solid-state electronic tuner, copied from [15].\n\nThe ETS possesses higher values of loss, diminishing the maximum achievable re?ection\ncoe?cient, when compared with the EMT [16]. This makes this tuner more attractive for\nan on-wafer characterization due to its associate smaller size and light weight, as shown in\nFig.2.10.\n\nFigure 2.10: Example of an ETS assisting noise parameters in on-wa?er measurements. Copied\nfrom [17].\n\n12\n\n\n\nComparison between EMT and ETS\n\nThe most suitable tuner for a certain load-pull application depends on its requisites. Table\n2.2 shows a comparison of the main aspects of EMT and ETS utilized in designs of PAs, Low\nNoise Ampli?er (LNA), oscillators, mixers and on-wafer tests [8].\n\nThe ETS exhibits great values of repeatability, typically -70dB, which apparently shows\nthat the ETS is better than the EMT, which commonly presents only -60dB of repeatability.\nHowever, the EMT o?ers low insertion loss on the order of tenths of dB even when gamma\npossess high values, becoming a more attractive solution for systems requiring synthesizable\nload impedances near the border of the smith chart. On the other hand, the ETS operating\nlosses can go up to 12 dB while presenting a high re?ection coe?cient such as ?L = 0.8, which\nis also one of the reasons to reduce the maximum achievable re?ection coe?cient once the\nlosses can be even further making this technique inappropriate for the characterization of high\npower ampli?ers, because of its optimum load condition of the microwave transistor is found\non the edge of the smith chart.\n\nThe EMT's are relatively slower due to the time required for the measurement using\ngeneral purpose interface bus (GPIB), taking a few seconds to move from one impedance\nstate to another. On the other hand, the ETS is able to swap the impedance states faster\nthan the EMT, which usually seems instantaneous, needing only a few milliseconds.\n\nIn case of an on-wafer device characterization, the ETS is the most suitable approach,\ncovering a vast range of frequencies, but at low frequencies the EMT's are also used, when an\nappropriate vibration test is performed.\n\nFigure 2.11 shows the comparison between the ETS and EMT , where the ETS has a\n?xed load distribution while ETS presents a non-uniform distribution. Due to the fact that\nthe EMT produces a uniform distribution of generated loads, interpolation algorithms can be\nused to synthesize a desired re?ection coe?cient, while the ETS can only cascade another\ntuners in order to increase the number of impedances states.\n\nFigure 2.11: Shows the tuner distribution of ETS vs EMT. Copied from [18]\n\n13\n\n\n\nTable 2.2: Pros and Cons of ETS and EMT. Copied from [8]\n\n2.4.2 Passive harmonic load-pull system\n\nThe harmonic load-pull technique is an essential tool to assist the microwave characteri-\nzation and to determine the optimum fundamental and harmonic load conditions for a cer-\ntain ?gures of merit (FoM) such as intermodulation distortion (IMD), linearity or e?ciency.\nThis information plays a major role in the design of switch-mode PAs that require speci?c\nimpedances at the fundamental and the harmonic frequencies placed at DUT input and output\nterminal as reported in [19]. It is known that optimization of DUT harmonic impedances can\nimprove the e?ciency more 15% than a basic PA design at fundamental frequency [20].\n\nFigure 2.12, illustrates an example of a simple harmonic load-pull system. It possesses\na circulator, a low pass ?lter, high pass ?lter, and pairs of tuners, attenuators and power\nmeters. The variable, b2 represents the total transmitted wave composed by a fundamental\nand harmonic travelling waves, the circulator acts as node forwarding waves from port one\nto port two, two to three and three to one, inde?nitely. The ?rst branch has a low pass\n\n14\n\n\n\n?lter placed at port 2 of the circulator used to forward only fundamental travelling wave,\nb2(f0) , whereas at port 3 a high pass ?lter is forwarding the second harmonic travelling wave,\nb2(2f0). For each of the branches a tuner is placed right after the ?lter allowing the control\nof fundamental and second harmonic components independently, ?L(f0) and ?L(2f0). Thus\na2(f0) and a2(2f0) are added and re?ected, resulting in a a2 total re?ected travelling wave\nseen by the DUT.\n\nFigure 2.12: This architecture was on of the ?rst passive harmonic load-pull setups. Copied\nfrom [22].\n\nThe re?ection coe?cient at fundamental and harmonic components are calculated as fol-\nlowing equations:\n\n?L(f0) =\na2(f0)\n\nb2(f0)\n(2.10)\n\n?L(2f0) =\na2(2f0)\n\nb2(2f0)\n(2.11)\n\nThe total re?ected travelling waves is obtained by the following equations:\n\na2(f0) = ?L(f0)b2(f0) (2.12)\n\na2(2f0) = ?L(2f0)b2(2f0) (2.13)\n\na2 = a2(f0) + a2(2f0) = ?L(f0)b2(f0) + ?L(2f0)b2(2f0) (2.14)\n\nIn principle this technique can be extended to a n-port wideband circulator in order to\ncontrol n-1 harmonic components, requiring additionally n-2 band-pass ?lters for the harmonic\ncomponents, a low pass ?lter at fundamental frequency and a high pass ?lter to the n-1 highest\nharmonic. However, this is not practicable due to reduction in the tuning range caused by the\nnumber of circulators used to deal with a vast number of harmonic frequencies.\n\nAlong the years, several variations of the presented technique were developed being nowa-\ndays classi?ed as harmonic rejection tuner, triplex based harmonic and multi-purpose single\ntuner harmonic load-pull [22].\n\n15\n\n\n\nTriplexer based harmonic load-pull setup\n\nThe triplexer based three-harmonic load-pull setup is shown in Fig. 2.13. It uses a triplexer\nthat acts as a selective ?lter for the fundamental, second and third harmonic component at its\nrespective ports, which is attached a low pass ?lter, a band pass ?lter and a high pass ?lter,\nincreasing the out-of-band rejection for the undesired frequency components. As a result, the\nharmonic components of the incident and re?ected travelling waves, b2 and a2, are described\nin equations 2.12 and 2.13.\n\nFigure 2.13: The harmonic rejection tuner based three-harmonic load-pull architecture.\nCopied from [5].\n\nThis setup is normally implemented with a VNA measurement system, being attached to\nthe coupling N/W depicted in Fig. 2.13. Moreover, the input and output biasing is used to\nprovide the gate/base bias of the transistor and feed the drain/collector power. In addition,\nthe coupling is required to monitor the incident and re?ected travelling waves at the input\nand output ports of the DUT, allowing to inspect which impedance is being presented at its\nfundamental and harmonic components. The power meter is used to access the absolute values\nof the output power at the carrier frequency band under di?erent fundamental, second and\nharmonic load impedances.\n\nThe re?ection coe?cient at each respective frequency is obtained by the following eq 2.14:\n\nb2 = b2(f0) + b2(2f0) + b3(ef0) + ... + b2(nf0) (2.15)\n\na2 = a2(f0) + a2(2f0) + a3(3f0) + ... + a2(nf0) (2.16)\n\n?Load(nf0) =\na2(nf0)\n\nb2(nf0)\n(2.17)\n\nwhere, n = 1,2,3, ... c\n\nFigure 2.14: Tuning coverage at f0, 2f0 and 3f0 using the triplexer method. [23]\n\n16\n\n\n\nHarmonic rejection tuner\n\nThe harmonic rejection tuner (HRT) is composed by a pre-match tuner cascade with a\nfundamental tuner. The pre-match and fundamental tuner are placed in the following manner\nas shown in Fig. 2.15. That is necessary to ful?ll the requirements of maximum re?ection\ncoe?cient at fundamental and harmonic components presented at the DUT output port due\nto the inherent losses of a passive system, which limits the maximum achievable re?ection\ncoe?cient.\n\nThe optimum re?ection coe?cient at harmonic components is usually higher than fun-\ndamental. Thus, a pre-match tuner is placed as close as possible to the DUT output port,\nincreasing the maximum achievable re?ection coe?cients at the harmonic components.\n\nFigure 2.15: The harmonic rejection tuner based three-harmonic load-pull architecture.\nCopied from [5].\n\nThe setup presented in Fig. 2.15, overcomes the problem associated with the losses of\nthe previous triplexer based technique that is shown in Fig. 2.13. The harmonic rejection\ntechnique utilizes a low loss tuner, helping the synthesis of high re?ection coe?cients. The\nmajor limitation of this method is that, in some applications, the DUT loads are too close to\nthe Smith chart border aggravating the impact of even the smallest losses.\n\nFigure 2.16: Tuning coverage at f0, 2f0 and 3f0 using a PHT and fundamental tuner.[23]\n\n17\n\n\n\nMulti-purpose single tuner based harmonic load-pull setup\n\nThe multi-purpose single tuner (MPST) is commonly used harmonic load-pull setup, as\nthe one depicted in Fig. 2.17, it utilizes a tuner that is capable to control fundamental and\nharmonic impedances at f0, 2f0 and 3f0 frequencies. This single tuner has three independent\nprobes, which are free to move in the horizontal and vertical directions. As refer, it is a\nmulti-purpose tuner, which drastically reduces the losses introduced by connectors and cables,\nachieving a greater re?ection coe?cient for the fundamental and harmonic components when\ncompared with the previous techniques.\n\nAs a drawback, this technique requires an algorithm with larger computational e?ort to\nprecisely monitor and control the 3 independent probes for the synthesis of fundamental and\nharmonic impedances due to the poor isolation.\n\nFigure 2.17: The multipurpose-single tuner based harmonic load-pull architecture. Copied\nfrom [5]\n\nFigure 2.18 illustrates the synthesizable re?ection coe?cient range that is possible to obtain\nwith the MPST technique at fundamental and harmonic components. This technique is not\nsuitable for a applications that involves high values of voltage standing wave ratio (VSWR)\nat harmonic components such as power ampli?ers.\n\nFigure 2.18: Tuning coverage at f0, 2f0 and 3f0 using the multi purpose single tuner. Based\non [23]\n\n18\n\n\n\nComparison between the passive harmonic load-pull methods\n\nThe two main di?erences between the presented techniques consists in the tuning isola-\ntion and the tuning range. The isolation will directly interfere on the impedance control at\nfundamental and harmonic components. In HRT, the poor isolation between the rejection\nand fundamental tuner is around 30dB, making the fundamental and harmonic components\nno longer independent and requires from the system designer an additional e?ort to account\nthis e?ect in the determination of the mechanical positions to satisfy the desired re?ection\ncoe?cient synthesis [22].\n\nOn the other hand, the multi-purpose tuner possess a system that takes the e?ect of poor\nisolation repositioning the probe automatically to set the desired impedance at fundamental\nand harmonic components. The major drawback is the time needed to move the probes to\nthe respective mechanical positions.\n\nThe triplex-based is the only technique that is considered to perform independent control\nof the fundamental and harmonic components due to the triplex isolation that is usually\nbetween 50-60dB at the fundamental and harmonic components.\n\nThe following Table 2.3 summarizes the most relevant features of the explained harmonic\nload-pull techniques.\n\nTable 2.3: Characteristic of harmonic tuning methods. Copied from [23]\n\n19\n\n\n\n2.4.3 Active load-pull system\n\nThe active load-pull technique is based on the principle of an active load modulation or of\na split signal method, which is also known as the 'Takayama' technique [23]. In the split signal\nmethod, a signal with the same frequency of the one being injected at the DUT is created or\nreused. This signal acts as a re?ected travelling wave and, by modifying its the magnitude\nand phase, results in a new re?ection coe?cient seen by DUT.\n\nThe active load-pull monitors, in real-time, the re?ection coe?cient seen at the DUT\nports through a proper VNA calibration, helping to determine the forward and travelling\nwaves, which is required by the control algorithm. The major advantage of this technique\nis the capability to synthesize any re?ection coe?cient on the smith chart, overcoming the\ninherent losses of the passive system.\n\nTypically, there exists three categories of active load-pull: closed-loop, feed-forward and\nopen-loop.\n\nClosed-loop load-pull system\n\nThe closed-loop constitute the output network of this active load-pull technique, it is\nsimilar to the conventional passive LPS, where ideally the a2 is a direct function of b2 and the\ncomplex gain can modi?ed directly the magnitude and phase of the seen re?ection coe?cient.\nIf all the elements of the output network are well characterized, including the loop ampli?er,\nthis technique becomes suitable to perform the traditional measurement, which drastically\nreduces cost of the implemented system.\n\nFigure 2.19 illustrates part of the block diagram that composes an ideal closed-loop active\nload-pull system. As it can be observed, the setup uses three-port component, e.g. circulator,\nfor forwarding the incident travelling wave, b2, and re?ect the travelling wave, a2. In addition,\na complex variable ?.ej? is used to modify the magnitude, by ?, and the phase, by ?, of the\nincident wave, b2, before injecting it back at the DUT reference plane as a re?ected travelling\nwave, a2. The re?ection coe?cient is synthesize as in the following equation:\n\n?LOAD =\na2\nb2\n\n=\nb2?.e\n\nj?\n\nb2\n= ?.ej? (2.18)\n\n,where ?LOAD represents the presented re?ection coe?cient at the DUT plane.\n\nFigure 2.19: Representative loop of an ideal active closed-loop LPS. Copied from [5]\n\n20\n\n\n\nA realistic approach of a closed-loop technique requires attenuators, phase shifters, and\nloop ampli?ers to properly control the magnitude and phase of the re?ected travelling wave,\nas shown in Fig. 2.20\n\nFigure 2.20: Block diagram of a realizable active closed-loop LPS. Copied from [5]\n\nThe attenuator and loop ampli?er enable the changes in magnitude of the re?ected travel-\nling wave, a2, while the phase shifter modi?es the phase of ?. As a result, the desired re?ection\nfactor, ?LOAD, can be synthesizable.\n\nThe presented closed loop shown in Fig. 2.19, assumes an ideal circulator and ignores\nthe system losses. As a result, the travelling wave obtained at the feedback loop is given by\nfollowing equation 2.19 and the ?LOAD at the DUT reference plane is given by equation 2.20:\n\na2 = Gb2 (2.19)\n\n?LOAD =\na2\nb2\n\n= G (2.20)\n\n, where G is the complex gain of the feedback loop controlling the magnitude and phase of the\nsynthesized re?ection coe?cient. Notice that G can assume any value and can be even greater\nthan one causing unwanted oscillations due to the closed-loop network, which can possibly\ndamage the DUT and the system equipment.\n\nThe closed-loop technique is a more attractive solution for the on-wa?er devices charac-\nterization, excluding the unavoidable mechanical movements of the EMT that reduces the\nneeded tuning range of impedances. Despite the ETS also avoid the movements on the mea-\nsure system, it possess a limited tuning range of re?ection coe?cient that can be overcome\nwith the closed-loop technique. On the other hand, this technique is prone to oscillates due to\nthe leakage existent in the passive components, which can be reduces with the usage of ?lters\nthat consequently makes this approach narrow band.\n\n21\n\n\n\nFeed-forward load-pull system\n\nThe active feed-forward load-pull system is considered to be stable contrary to what hap-\npens in the closed-loop technique. In Fig. 2.21 it is shown an example of this setup that is\ncomposed by a simple active tuning chain, a signal source, a variable phase shifter, an atten-\nuator, a variable gain stage and one isolator. The incident travelling wave at the output port\nof DUT, b2, is typically given by following equation:\n\nb2 = S21a1 + S22a2 (2.21)\n\nIf we assume that the components are ideal, a2, the re?ected travelling wave presented at\nthe output port of the DUT is obtained with the following equation:\n\na2 = Ga1 (2.22)\n\nThe ?Load represents the ratio of a2 over b2, where the a2 is generated from the incom-\ning wave, a1, an then adjusted by the phase shifter, attenuator, loop ampli?er and isolator.\nConsequently, the ?Load results from the combination of Eq. 2.21 and Eq. 2.22 yielding the\nfollowing equation:\n\n?Load =\na2\nb2\n\n=\n1\n\nS21\nG\n\n+ S22\n(2.23)\n\n,where G represents the complex gain introduced by the loop ampli?er of the feed-forward\nload-pull network and S21 and S22 represents the unknown DUT large signal s-parameters.\n\nFigure 2.21: A generic schematic of feed-forward active load-pull architecture [5]\n\nAccordingly to Eq. 2.23, it is important to notice the dependence of the re?ection co-\ne?cient with the complex gain G and the DUT large signal s-parameters S21 and S22.\nConsequently, the synthesize of ?Load becomes unpredictable due to unknown large-signal\ns-parameters exhibited by the DUT. In order to obtain a desired re?ection coe?cient, it is\nnecessary to use convergence techniques to get a certain re?ection coe?cient. Moreover the\ncomplex loop gain, G, must to be bounded between G = 0, and G = 1/S22. Corresponding\nto no operating feed-forward load and the case where it presents the maximum re?ection co-\ne?cient, ?Load, at DUT plane. Thus, if the G is bounded, the attenuator and isolator will\nprevent the loop ampli?er to oscillate. Moreover, while the DUT operates at its stable region\nthe S22 ? 1 and the Eq. 2.23 keeps its usefulness for the calculation of ?Load.\n\n22\n\n\n\nOpen-loop load-pull system\n\nThe open-loop is very similar to the feed-forward technique, its di?erence consists basically\nin the addition of external sources utilized in the creation of the re?ected travelling wave, a2,\nas shown in Fig. 2.22. The loop ampli?er and phase shifter will control the magnitude and\nphase of the re?ected travelling wave, a2. In addition, the isolator will guarantee safe operation\nrange of the loop ampli?er preventing it to get damaged.\n\nThe two sources 1 and 2, shown in Fig. 2.22, are responsible for the incident travelling\nwaves injected at the DUT reference planes, namely a1 and a2. Being the re?ected travelling\nwave b1 caused by the ?IN of the DUT and the feed-back of the device, b2 as shown in\nthe denominator of Eq. 2.24. Consequently, the usage of an external signal of 10 MHz will\nmaintain the phase coherence between the incident and re?ected waves a2 and b2, once b2 a\ncreated as a function of the source 1, and a2, as a function of source 2.\n\nFigure 2.22: Functional diagram of an active open-loop load-pull system.\n\nThe load re?ection coe?cient synthesized with the open-loop technique is given by the\nfollowing equation:\n\n?Load =\na2\nb2\n\n=\na2\n\nS21a1 + S22a2\n=\n\n1\n\nS21\na1\na2\n\n+ S22\n(2.24)\n\n,where S21 and S22 are the large-signal s-parameters of the DUT at the fundamental frequency.\nAn notable point in equation (2.24) is that the value of the load re?ection coe?cient, ?L,\n\ncan vary from 0 to ? , only by modifying the magnitude of the re?ected travelling wave, a2.\nThe major drawback of this technique is the necessity of an expensive external source. In the\ncase of active harmonic load-pull applications, a power divider with frequency multiplier can\nbe used with additional loop ampli?ers and phase shifters, or adding an external source at\neach harmonic component.\n\nThe equation 2.23 and 2.24 presents a theoretical point of view for the feed-forward and\nopen-loop, respectively. In both cases it is assumed that s-matrix of the DUT is known, al-\nthough it still valid only if the DUT operates in small signal where its behaviour is linear.\nAlternatively, for the large-signal characterization the information of the unknown b2 is nec-\nessarily obtained through a measure equipment, helping in the determination of the re?ection\ncoe?cient based on the characterization of the system. Moreover, helping in this task, it is\nalso used a convergence algorithm such as Newton-Raphson [5] to properly set the desired\nre?ection coe?cient at the DUT's port, which is usually achieved with 5-10 iteration.\n\nFor a more detailed information about the open-load pull technique the reader is referred\nto [24, 25, 26].\n\n23\n\n\n\n2.4.4 Hybrid load-pull system\n\nThe hybrid load-pull system is normally recommended for highly re?ective load-pull ap-\nplications, it combines the passive and active techniques in order to overcome the associated\nproblems of both, despite increasing its complexity.\n\nIn Fig. 2.23, it is shown an example of the hybrid load-pull application that combines\nthe passive tuners with active open-loop load-pull setup, the VNA based approach allows\nto monitor not only the fundamental but also the harmonic components of the microwave\ntransistor if the case.\n\nMoreover, the passive part of the system is composed by a source and load impedance tuner\nthat is normally used to re?ect the high power at the fundamental frequency and therefore\nrequires a smaller signal to be injected, i.e, it acts as pre-match network of the DUT. In\naddition, the active part, in this particular case, is composed by an additional signal source\nand ampli?er which is placed at the tuner output port, supporting the needed amount of\npower that is necessary to overcome the inherent losses of the passive network and synthesize\nthe desired load impedance.\n\nFigure 2.23: Hybrid-Active fo load-pull system copied from [28]\n\n? | 1 - ampli?er | 2 - isolator | 3 - bias tee | 4 - dual coupler | 5 - ?xture | 6 - attenuator|\n\nIn the hybrid technique, the passive and fundamental load tuner is augmented by an\nactive source, while the mechanical positions of the tuner are used as a pre-match decreasing\nthe required load-pull power (PLP). The requisite of an external high-power ampli?er is\ndiminished, maintaining the needed high re?ection coe?cient.\n\nThis setup is cheaper than an active open-loop load-pull system, once it requires less PLP\nto be injected at the DUT output port in order to emulate the desired load impedance, while\naccessing the DUT performance parameters.\n\n24\n\n\n\n2.5 Comparison of the di?erent kinds of load-pull setups\n\nTable 2.4, summarizes the main characteristics of the active and passive method, not\ncovering the hybrid load-pull due to the vast possible sets that can be obtained with this\ntechnique.\n\nThe closed-loop technique possess the lowest re?ection coe?cient range, when compared\nwith any active technique, as it requires a ?at gain of the loop ampli?er to avoid oscillations.\nOn the other hand, the feed-forward and the open-loop techniques are not restricted to a ?at\ngain condition, however the feed-forward technique might oscillates under some conditions,\nwhich makes the open-loop the most robust active technique in terms of oscillation.\n\nTable 2.4: Comparison between the passive and active techniques. Based on [5].\n\n25\n\n\n\n2.6 Re?ection coe?cient enhancement techniques\n\nThe traditional LPS is a reliable and low cost setup that uses mechanical tuners for the\nhigh-power device characterization. However, it typically possess a limited range of re?ection\ncoe?cient due to the inherent losses of the system caused by the couplers, cables and ?xture\nthat exists between the DUT and tuners. It delimits the maximum achievable VSWR requiring\nlarge amounts of power to properly characterize the DUT.\n\nThis section presents the most common techniques used to overcome the already mentioned\nproblems associated with the passive load-pull system. A short description of the pre-matched\ntuning enhancement, the enhanced loop, the quarter-wave impedance transformation and\nthe broadband impedance transformation is presented, allowing to increase the maximum\nachievable re?ection coe?cient at the same time that it reduces the needed PLP to assist the\nDUT performance parameters [5].\n\n2.6.1 Pre-matched\n\nThe pre-matching technique utilizes two independent RF probes that are inside of the\nsame tuner, being usually called the pre-matching and tuning probes. The probes are placed\nside-by-side on a central conductor as the equivalent representation shown in Fig. 2.24.\n\nFigure 2.24: Circuit model of a mechanical tuner with pre-match and tuning probe.\n\nIn this type of tuner to enhance the tuning range, the two RF probes are combined to\nproduce high levels of re?ection coe?cients, when compared with a single tuner. Its mathe-\nmatical formulation of how the re?ection coe?cients are normally synthesized is shown in the\nfollowing equations.\n\n?total = S\nB\n11 +\n\nSB21S\nB\n12?pre?match\n\n1 ?SB22?pre?match\n(2.25)\n\n?pre?match =\nY0 ?Ypre?match\nY0 + Ypre?match\n\n(2.26)\n\nYpre?match = Yprobe + Y0\n\n(\n1 ? ?1\n1 + ?1\n\n)\n(2.27)\n\n?1 = S\nA\n11 +\n\nSA21S\nA\n12?probe\n\n1 ?SA22?probe\n(2.28)\n\n?probe =\nY0 ? (Yprobe + Y0)\nY0 + (Yprobe + Y0)\n\n=\n?Yprobe\n\nYprobe + 2Y0\n(2.29)\n\n26\n\n\n\n2.6.2 Enhanced loop\n\nThe enhanced loop setup is a simple passive load-pull system that additionally possess a\ncirculator and an cable with a certain length L2, as shown in the example presented in Fig.\n2.25 (a).\n\nThe loop is attached to a low-loss impedance tuner and the re?ection coe?cient present\nat the DUT plane, can be obtained from simpli?cation of the signal ?ow graph shown in Fig.\n2.25 (b), which results in Eq. 2.27 [28].\n\nFigure 2.25: Functional diagram (a) and the signal ?ow of an enhaced load-pull setup (b)\ncopied from [29].\n\n?Total =\na2\nb2\n\n= S22Tuner +\nS23TunerS32Tuner?Loop\n\n1 ?S33Tuner?Loop\n(2.30)\n\nwhere\n\n?Loop =\na3\nb3\n\n= |?Loop|e?2j?L2 (2.31)\n\nThe ?Loop is the re?ection coe?cient generated by the passive loop presented at the output\nport of the tuner that is successively transformed in the ?Total, being this the impedance seen\nby the DUT at its output port. Figure 2.6 shows a comparison between an pre-matched\ntuner, as blue circles, and the low loss tuner using the tuning enhanced loop, represented as\na the red circles. Notice that the maximum re?ection coe?cient is increased with the tuning\nenhancement technique.\n\nFigure 2.26: Comparison of the maximum achievable re?ection coe?cient between a commer-\ncial pre-matched tuner and a loop enhanced tuner at 1.8 GHz base on [29].\n\n27\n\n\n\n2.6.3 Quater-wave impedance transformation\n\nThe quarter-wave impedance transformation is a technique used to increase the accuracy\nand the maximum achievable re?ection coe?cient, as shown in Fig. 2.27. The enhanced loop\nand pre-match techniques are limited in terms of accuracy due to its reference characteristic\nimpedance that is typically 50 Ohms. In addition, the employment of this technique allows to\ndiminish the uncertainty on VNA measurements performed at the border of the Smith chart.\n\nFigure 2.27: Illustration of the quarter-wave transformer technique in (c). The Z?T represents\nthe synthesizable loads that are inside of the light blue circles. Moreover, the ZL are the loads\npresented after the quarter-wave transformation that are inside of the light purple circles.\nThose ones that possess a characteristic line impedance of 50 ? are depicted in (a) and those\nones that possess a characteristic line impedance of 20 ? are represented in (b).\n\nThe major bene?t of the quarter-waver transformation technique is the modi?cation of\nthe reference impedance, which consequently reduces VSWR for the synthesis of a desired\nre?ection coe?cient. In addition, the chances of potential damage to the DUT, tuner and\nmeasurement equipment are diminished, since the required PLP to operate the load pull system\nfor the same target impedance have also been reduced.\n\nFigure 2.28 shows two ?xtures with ?/4 transformers, the (a) without biasing and (b) with\nthe drain biasing. The purpose of (b) is to accelerate the design process.\n\nFigure 2.28: Fixtures with ?/4 - transformers for load-pull measurements (a) no-bias (b) bias.\nCopied from [30].\n\n28\n\n\n\n2.6.4 Broadband impedance transformer\n\nThe broadband impedance transformation overcomes the very narrow bandwidth charac-\nteristic associated with the quarter-wave transformer which is only 5 to 10 percent of the carrier\nfrequency. Consequently, the quarter-wave transformer technique is unusable in applications\nthat involve harmonic characterization.\n\nThe also called multi-section impedance transformation allows the synthesis of fundamental\nand harmonic impedances with an appropriated tuning range that also reduces PLP required\nfor the high re?ective load-pull applications.\n\nThe tapers are multi-section transformers, which possess di?erent characteristic impedance\nin each section. In theory, the in?nite series of sections form a continuously tapered line, being\nthe most commonly used linear, triangular, exponential and Klopfenstein. The criterion of\nchoice manly depends on the impedance transformation, which, for some applications, cannot\nexceed an established length of the transformer [30].\n\nThe linear taper is the simplest one and its design is rapidly obtained but its disadvantage is\nthe required length for its implementation. The triangular and exponential taper are slightly\ncomplex but present a better response in impedance transformation, being the presented\nre?ection coe?cient lower than the one of the linear transformer, for the same correspondent\nlength.\n\nThe best taper is undoubtedly the Klopfenstein once it possess the shortest taper length\nfor the maximum re?ection coe?cient speci?cation, presenting the lowest in band re?ection\ncoe?cient. However, its formulation and design relies on the more complex Bessel functions.\nFigure 2.29 shows an example from Maury microwave test ?xture that utilizes Klopfeinsten\n\nFigure 2.29: Maury load pull low-loss test ?xture. [32]\n\ntaper, using APC 7 mm connector, which presents a good repeatability. In addition, coolers\nare used to stabilize the DUT temperature. More information about this type of structures\nand related theory about multi-section transformers can be found in the Pozar book [33].\n\n29\n\n\n\n30\n\n\n\nChapter 3\n\nDesign and implementation of an\n\nautomated tuner-based load-pull\n\nsystem\n\nThis chapter presents a concise description of the built setup and all steps regarding the\ndesign, implementation and validation of the automated load-pull system.\n\n3.1 Introduction\n\nThe load-pull system is an essential tool utilized to assist power ampli?er design, in par-\nticular to determine the ideal matching impedance for gain, e?ciency or power.\n\nThe built passive tuner-based setup consists of one fundamental load tuner, one signal\nsource, a test ?xture, a dual channel power meter, a power supply, a spectrum analyzer, a RF\ntest set (including cables, attenuator, ?lter, couplers and power dividers) and a VNA.\n\nThe tuner is selected based on its FoM such as repeatability, resolution and tuning range\nand distribution of the synthesizable re?ection coe?cients. This helps to achieve high levels of\nimpedance accuracy, to obtain a vast number of impedances states and synthesize high levels\nof re?ection coe?cients covering, in this way, the whole Smith chart.\n\nThe implementation of this load-pull system involved 4-four steps described as follows:\n\n? Characterization - to ?nd out the s-parameters of each system component, including the\ntuner for a wide range of mechanical positions.\n\n? Assembly of the system components - to establish a load-pull measurement setup.\n\n? Calibration of the load-pull measurement setup - to ?nd out, based on the characteriza-\ntion ?les, the inherent losses of the system and to shift the reference plane to the device\npackaging ports.\n\n? Measurement of relevant data at the calibrated reference planes - gives us the Pin and\nPout after de-embedding the losses that are associated to the measured data.\n\nThen, knowing the DC supplied (PDC), Pin and Pout the PA FoM such as gain, PAE and\ndrain e?ciency (?D) can be easily calculated.\n\n31\n\n\n\n3.2 Diagram of the automated load-pull system\n\nFigure 3.1 presents a diagram of the whole implementation process of the automated load-\npull setup. First, a calibration of the VNA is performed and then a characterization of each\npassive system component is done. This procedure is treated in the upcoming subsections,\nspeci?cally 3.3 and 3.4.\n\nFurthermore, it is necessary to check the repeatability of the automated load-pull system\nunder two di?erent scenarios to prove its accuracy and viability. The ?rst test is necessary\nto verify the tuner repeatability, where the results should correspond to the data sheet of the\ntuners manufacturer, which states that the tuner should present at least a repeatability of -50\ndB at a certain range of frequencies. Afterwards, in the second test a ?xture and a load block\nare attached to the port 1 and 2 of the tuner, respectively, as it can be seen in Subsection 3.6\nand in Fig. 3.12.\n\nThe used methodology allows to systematically track and identify the sources of error,\nalong each step of the system characterization that is indicated in the diagram of Fig. 3.1.\nA more detailed information regarding the load-pull system veri?cation will be given in the\nfollowing sections.\n\nThe last routine is responsible to perform the measurements and store all the relevant\ninformation. This load-pull data is saved in three di?erent directories and forms. The ?rst\ndirectory contains the ?gures of each load characterization, the second is a ?le that contains\nall the relevant data regarding the measurements. Finally, the third directory stores a ?le with\nthe AWR/MWO ?le format containing the DUT load-pull characterization which includes all\nthe tested load impedances.\n\nFigure 3.1: Automated load-pull system implementation ?ow chart.\n\n32\n\n\n\n3.3 System description\n\nThe built load-pull system is composed by 3 fundamental blocks: Source Block, Load\nTuner, and Output Block. Moreover, four additional instruments are required: power meter,\nDC power analyzer, PC control and the VNA.\n\nA block diagram of the automated load-pull system is shown in Fig. 3.2. The DUT is fed\nfrom a high-power microwave source, which is achieved combining the signal generator and\ndriver ampli?er. The load impedance is controlled by an automated mechanical tuner and the\nmeasurement data is generated by using a dual channel power meter. The DC power supply\nis necessary to provide the gate/base bias of the transistor and feed the drain/collector power.\n\nFigure 3.2: Scheme of the built automated load-pull system.\n\nAn additional external trigger connection, not displayed on the Fig. 3.2, guarantees a\nsynchronous measurement.\n\n? The black dotted lines denote the calibrated VNA characterized blocks.\n\n? The green dashed lines indicate the LAN connection utilized to remotely control the\nde-vices.\n\n? The red full lines are the illustrative ?ow of DC and RF power.\n\n? The blue full lines are used to represent the physical interconnection of the power sensor\nand power meter.\n\nIt is important to notice that the power meter is only monitoring the (uncorrected) power\nat each system block where it is placed. The s-parameters obtained from the characterization\nare then used to determine and correct the measured power of the ampli?er, via the available,\nabsolute power calibration and transducer gain formula to e?ectively measure the power being\ninjected and delivered by the DUT.\n\n33\n\n\n\n3.3.1 Source block\n\nThe source block is composed by a vector signal generator (VSG) used for generating\nthe signal and driver for adjusting the power level. This input network is composed by the\nfollowing instruments and components:\n\n? Signal Generator enables the performance assessment of the ampli?er under a speci?c\ntype of stimuli.\n\n? Driver Ampli?er is utilized to boost the RF signal, once it is necessary to supply the\nneeded amount of power that leads the DUT to the desired compression gain.\n\n? Isolator at port 1 is used to guarantee that the driver right after the VSG sees a matched\nload, regardless on the input impedance of the DUT.\n\n? Coupler allows to sample part of the incident wave that is travelling into the DUT.\n\n? Power sensor A is part of the measurement system that provides the uncorrected infor-\nmation about the Pin magnitude.\n\nFigure 3.3: Functional diagram of the system source block.\n\nThis kind of application dissipates a lot of heat, which justi?es the usage of cooler units\nto maintain an average temperature of the DUT and driver.\n\n34\n\n\n\n3.3.2 Load block\n\nThe load block is composed by an attenuator, a coupler, a low pass ?lter and a power sensor\nB. Additionally, a spectrum and time domain analyzer allows to visually inspect the waveform\nof the incoming signal. The output network is placed after the tuner and is comprised by:\n\n? Attenuator is used to ensure that less power ?ows to the power sensor preventing the\ninstrument from being damaged and allowing the performance assessment of the ampli-\n?er.\n\n? Coupler is an additional component, utilized to sample part of the signal that is going\nto be measured by the power meter at the same time the waveform is being monitored.\n\n? Low pass ?lter is here used to ensure that only the fundamental component is being\nmeasured by the power sensor.\n\n? Spectrum and time domain analyzer is used to check if the desired stimuli of the DUT\nhas the correct waveform, guaranteeing that no waveform distortion is caused by the\nautomatic leveling control (ALC) of the Signal Generator.\n\n? Power sensor B is part of the measurement system that provides the uncorrected infor-\nmation about the Pout, magnitude.\n\nFigure 3.4: Functional diagram of the system load block.\n\n35\n\n\n\n3.3.3 Load tuner\n\nThe passive tuners are typically of the slide screw type. They are usually composed by\na slab line enclosed by two parallel ground planes with a centred main line and a re?ective\nelement (a conductive 'probe') [32]. When this probe is fully retracted the tuner presents an\nline impedance of approximately 50 ?.\n\nLikewise a stub, when the probe moves closer to the line, a capacitive e?ect is inserted.\nAs a result the impedance presented by the tuner is modi?ed, corresponding to the length of\nline between the probe and the tuner input.\n\nAs the probe position changes along the vertical direction, it modi?es the presented re?ec-\ntion coe?cient magnitude. Alternatively, any movement along the longitudinal axis modi?es\nthe presented phase of the re?ection coe?cient.\n\nThe load tuner is the element present in the output matching network that is responsible to\nits recon?guration. This makes the ?L controllable, only by setting the tuning probe position\nalong the longitudinal and vertical axes of the slab line.\n\nThe tuner model MT981EU has a carriage structure that supports 2 probes, allowing a\nvertical movement of this re?ective element along the line, which is automatically controlled\nby precise stepper motors.\n\nFigure 3.5: Illustrate how the re?ection coe?cient of a slide screw tuner change, with a conduc-\ntive probe moving in two directions within a slabe line, being represented on the admittance\nsmith chart.\n\n36\n\n\n\n3.4 Characterization of the load-pull system\n\nThe characterization of the load-pull system consists in creating one-port or two-port s-\nparameter ?les of each passive element presented in the source and load blocks. As a results,\na ?le with .tun extension, is created. This ?le contain the tuner characterization, which is\ncomposed by the set of s-parameters for each of the tuner mechanical positions and frequencies,\nrespectively.\n\nDuring the measurements it is known that information about the power is 'uncorrected',\nrequiring a characterization of the system to mathematically remove the inherent losses of the\ninput and output network. As result the e?ective Pin and Pout are achieved. For such purpose,\na proper calibration of the VNA is required before any system component characterization. It\nremoves all systematic errors arising from the inherent directivity, mismatch and cross-coupling\nof the measurement equipment.\n\nFor this reason, I decided to explain how the s-parameters of system components, tuner and\n?xture are obtained. In conclusion, the VNA calibration and system veri?cation are described,\nwhere all the passive elements indicated by the dotted arrow in Fig. 3.2 were characterized\nby the short-open-load-thru (SOLT) VNA Calibration method.\n\n3.5 Characterization of the system components\n\nThe reference planes of the characterized source block are shown in Fig. 3.3, by the ports\n1, 2 and 3. The reference planes of the load block are the input port of the attenuator, output\nport of the coupler and the output ?lter port, shown in Fig. 3.4.\n\nEach passive element of the source and load blocks were individually characterized, allowing\nthem to be integrated in their respective blocks. As an implementation tool, the microwave\no?ce (MWO) was utilized to cascade the obtained s-parameter blocks, resulting in a new\nblock for the input network and another for the output network.\n\nThe s-parameters shown in Fig. 3.6 are the result of a 3-port conversion into a 2-port\nof the input network characterization, which the conversion of output and input network are\nexplained in Appendix D.1 and D.2, respectively.\n\nFigure 3.6: Equivantel 2-port of the input network of the LPS.\n\n37\n\n\n\n3.6 Characterization of tuner\n\nThe tuner characterization is performed to determine a set of s-parameters, respectively\nto each of its mechanical positions at each particular frequency. This information is later on\nutilized by interpolation routines in order to synthesize the desired new re?ection coe?cient.\n\nWhen a certain target impedance is chosen to characterize the ampli?er, it might happen\nthat this load the impedance falls between pre-calibrated states, as shown in Fig. 3.7. In order\nto achieve such level of accuracy, a dynamic-link library (DLL) function is used to interpolate\nbetween the closest pre-characterized impedances and determine the new physical X and Y\nmechanical position of the desired impedance and its respective s-parameters. In order to\nimprove the accuracy, it is necessary to increase the numbers of pre-characterized positions.\n\nFigure 3.7: Interpolation result based on the pre-characterized load impedances.\n\nThe replacement of any adapter will require a new tuner characterization. Thus, it is\nhighly recommended to characterize the tuner without any additional component attached,\nsuch as any bias tee, giving more ?exibility for future changes on the system topology.\n\nFurthermore, the characterization precision is veri?ed by setting the tuner for an arbitrary\nimpedance near to the centre and then near to edge of the Smith chart over the whole range\nof 2? radians phase. This procedure must satisfy the condition in which the error is less\nthan 0.2% in the magnitude and 0.1 deg in the phase. Any value worse than that indicates a\nproblem in the calibration and the characterization procedure must be repeated. The goal of\nthis requirement is to ensure a level of precision around -50dB, which corresponds to a worst\ncase deviation in the real and/or imaginary part of the re?ection coe?cient of less than 0.003.\n\n38\n\n\n\n3.6.1 Characterization of the ?xture\n\nWhen dealing with high-power device characterization the load-pull system must possess\na mechanism that minimizes the VSWR and, at the same time, enables to synthesize high\nre?ection coe?cients, without any risk of damage for the instruments or even the DUT. The\nused quarter-wave transformer technique satis?es these requirements allowing to 'pre-match'\nthe device nearly to its optimum impedance region over the Smith chart.\n\nThe thru-re?ect-line (TRL) method of VNA calibration is used for non-coaxial reference\nplanes such as the DUT microstrip test ?xture. This method presents a better e?ective\ndirectivity, source match and load match compared with the SOLT calibration and helps to\nacquire the needed information about s-parameters of each ?xture halves.\n\nThe TRL standards are generally easy to fabricate requiring only to know the impedance,\napproximately the electrical length of the line standard and the re?ect standard that can be\nany high re?ection devices like shorts or opens [33].\n\n3.6.2 VNA calibration and veri?cation\n\nThe VNA calibration is a procedure necessary to remove errors presented on the measure-\nment system which are repeatable and usually predictable over time and temperature.\n\nThe standard calibration kit utilized in this work, the Agilent 85031B 7mm and the E-Cal\nN4431-60008, are only responsible to remove the systematic errors. They allow to perform a\ncomplete SOLT calibration when they are combined with the Unknown-thru calibration, since\nsome connectors might di?er from each other, as is the case, for example, of the APC 7 mm\nand a TYPE(N) 50 connector types. There are three types of measurement errors:\n\n? The systematic errors occur due to imperfections of the test equipment, those er-\nrors are caused by directivity, crosstalk, source and load impedance mismatches and\nfrequency response. The directivity and crosstalk exist due to signal leakage. The\nsource and load impedance mismatches are directly related with the unavoidable\nre?ections in the test set.In addition the frequency response is caused by the de?cient\nre?ection and transmission tracking of the test receivers over frequency.\n\n? The random errors presented in the measurement system are usually generated by\nthe instrument noise (e.g. intermediate frequency (IF) noise ?oor, and the sampler\nnoise), connector and switch repeatability. The presented noise errors can be reduced\nby narrowing the IF bandwidth, increasing source power, or even using trace averaging.\n\n? The drift errors are not removable but still possible to minimize, only by setting a\nstable ambient temperature for the test environment.\n\nThe veri?cation is performed after the calibration is done, in order to observe if the s-\nparameters correspond to the expected ones. As a practical rule, a good calibration holds the\nfollowing condition: when a thru connection is tested, the measured magnitude of S21 and\nS12 must to be as close as possible to 0 dB and the phase of S11 should be at a mili-degree of\nresolution, meaning that the ports 1 and 2 are matched to 50 Ohms.\n\nThe S21 isolation is obtained by connecting two loads, one on port 1 and one on port 2.\nNext, it is measured the magnitude of S21 and check if it is less than the speci?ed isolation\n(typically less than ?80 dB). Another typical procedure is to leave the source port 1 open and\nverify if the S11 magnitude is near to 0 dB (within about +-1dB) [34].\n\n39\n\n\n\n3.7 MATLAB routines\n\nIn this section I will explain the main details regarding the MATLAB routines implemen-\ntation. The source code developed in this work can be found in the Appendix A.\n\n3.7.1 Pre-characterization\n\nThis routine is responsible to store in memory the s-parameters, X and Y mechanical\npositions and frequency at a user-de?ned number of points. Another important requisite for\nthis routine is to have an even distribution of characterized impedances over the Smith chart,\nso that the future interpolated impedances exhibit similar accuracies.\n\n3.7.2 Absolute power calibration\n\nThe absolute power calibration routine is mainly used to correct the removal of the inherent\nlosses of the LPS from the measured data, but it is also used as a resource to determine the\ndriver gain and, thus, control the available source power.\n\nThe so-called ?Gt factor is utilized to account for the error in the predicted losses, con-\nsisting in the comparison between measured and predicted transducer gain, Gt. This method\ninvolves measuring the gain of our system with all LPS components including the DUT mi-\ncrostrip ?xture as thru connection, where the centre of the ?xture is used as reference plane\nwhile the tuner is swept through a load-pull [35].\n\nThe prediction of Gt is based on the s-parameters that constitute the input and output\nnetwork of the load-pull system characterization, including the DUT test ?xture, and is given\nby the following equation [36].\n\nGt =\nPL\nPavs\n\n=\n1 ?|?S|2\n\n|1 ? ?IN ?S|2\n|S21|2\n\n|?L|2\n\n|1 ?S22?L|2\n(3.1)\n\nwhere, the ?S and ?L are the respectively source and load blocks that are seen by the DUT\nmicrostrip ?xture at its centre. The shown s-parameters belongs to the DUT ?xture, and the\n?IN input re?ection coe?cient is obtained with the following equation:\n\n?IN = S11 +\nS21S12?L\n1 ?S22?L\n\n(3.2)\n\nThe used DUT test ?xture for the absolute power calibration is a thru connection and its\ns-parameters are represented by the following expression.\n\nSTHRU =\n\n(\nS11 S12\nS21 S22\n\n)\n=\n\n(\n0 1\n1 0\n\n)\n(3.3)\n\nby replacing the terms of the equation 3.3 into 3.2 results in\n\n?IN = ?L (3.4)\n\nand consequently it simpli?es the equation 3.1, where Gt becomes\n\nGt =\n(1 ?|?S|2)(1 ?|?L|2)\n\n|1 ? ?L?S|2\n(3.5)\n\n40\n\n\n\nFurthermore, the Pout is determined through a proper calculation of the incident and\nre?ected travelling waves at the DUT reference plane that is obtained through a proper char-\nacterization of each of the shown blocks represented in Fig. 3.8. In addition, ?pwr represents\nthe re?ection coe?cient imposed by the power meter B, acting as a load termination of the\ntotal two-port network. This network and its characterized s-parameters provide the relation\nbetween the power that is being read by the power meter and the Pout of the device as shown\nin the following equations.\n\nFigure 3.8: Representation of the output network of the developed load-pull system.\n\nThe power meter readings correspond to the re?ected travelling wave seen by the output\nnetwork, b2. ?\n\n???\nS11total S12total ?1 0\nS21total S22total 0 ?1\n\n0 ?1\n?pwr\n\n0 1\n\n0 0 0 1\n\n?\n???\n?\n???\na1\na2\nb1\nb2\n\n?\n??? =\n\n?\n???\n\n0\n0\n0\nK\n\n?\n??? (3.6)\n\n?\n???\nS21total S22total 0 ?1\n\n0 ?1\n?pwr\n\n0 1\n\nS11total S12total ?1 0\n0 0 0 1\n\n?\n???\n\n? ?? ?\nA\n\n?\n???\na1\na2\nb1\nb2\n\n?\n???\n\n? ?? ?\n?\n\n=\n\n?\n???\n\n0\n0\n0\nK\n\n?\n???\n\n????\nB\n\n(3.7)\n\nThe coe?cients represented by ? are obtained by the ratio of A/B, which is presented by\nthe following equations:\n\na1 = K\n1 ?S22total ?pwr\n\nS21total\n(3.8)\n\na2 = K?pwr (3.9)\n\nb1 = K\n(S11total ? ?pwr?)\n\nS21total\nwhere, ? = S11totalS22total ?S21totalS12total (3.10)\n\nb2 = K =\n\n?\n20\n\npwrmeas?30\n10 ,where? = 0. (3.11)\n\nThus, the Pout at the output of the DUT reference plane is given by following equation :\n\nPout(dBm) = |a1|2 ?|b1|2 = 10log10\n(\n\n1\n\n2\n|a1|2(1 ?|?L|2)\n\n)\n+ 30 (3.12)\n\n,where ?L is given by Eq. 2.16 and its deduction is presented in the next section as well.\n\n41\n\n\n\n3.7.3 Load-pull measurements\n\nFirstly, the tuner moves to the desired impedance, next the power supply is switched on\nfeeding the DUT. Soon after, the RF output power of the VSG is turned on and, ?nally, the\nmeasurements are performed.\n\nIn the load-pull measurements, it was extracted absolute values of gain and e?ciency,\nbut it is simply presented its normalized values, because the absolute values are con?dential.\nMoreover, the type of stimuli is classi?ed, highlighting that is not the conventional CW.\n\nBefore the gallium nitride (GaN) microwave transistor characterization no matter which\ntarget impedance is chosen, a Pin, that conducts the device to its compression region is\nunknown. For this reason, it is necessary to utilize a safe level of Pin, commonly known as\ninput back-o?, in order to guarantee that the device does not go directly to its compression\nregion, which can damage the DUT instantaneously.\n\nOne of the 114 loads utilized in the DUT characterization is the ZL = 6.8895+j2.8285 ?.\nA VGS = -2.66 V, VDS = 50 V, IDS = 1.395 mA at the frequency of 1800 MHz gives the result\nshown in Fig. 3.9 that is normalized by its maximum gain and drain e?ciency.\n\nMoreover, the RF output power is swept, step-by-step, recording a user-de?ned number of\ndata points at each iteration. The routine is responsible to change the maximum peak power\nof the signal until the device meets a gain compression value of 3dB. In case this desired gain\ncompression is not achieved, the MATLAB routine is prepared to store null values for the FoM\nwhere the desired compression is not achieved. Next, the tuner moves to another mechanical\nposition and this same measurement procedure is repeated.\n\nFigure 3.9: Normalized load-pull results obtained in the characterization of one load\nimpedance, displaying the achieved gain(dB) and e?ciency as function of Pout.\n\nThe other loads utilized in the DUT measurements can be found in Appendix C.\n\n42\n\n\n\n3.8 Automated load-pull system veri?cation\n\nThe system veri?cation is systematically performed and repeated, until the desired preci-\nsion is achieved. The ?ow-chart in Fig. 3.1 illustrates how the tuning setup must be done.\nThis section is dedicated to prove the reliability of this setup and present the achieved results.\n\nThe veri?cation process starts with the tuner repeatability check, whose achieved results\ngo down to around -50dB, which guarantees a precision of at least 3 decimal places.\n\nMoreover, the system components were assembled and tested in two steps. First, only the\ntuner and then the load block and test ?xture were tested. In addition, a prediction test is\nperformed, which is similar to the repeatability test. This process consist in cascading the\nsystem s-parameter blocks and calculating what is going to be the ?L seen by the DUT.\n\nFor the prediction check, a test ?xture was designed and created using a SubMiniature ver-\nsion A (SMA) connector at the input and the output. The ?xture is composed by a 50 ? line\nwith a capacitor placed in middle of the line. This ?xture will cause an impedance transfor-\nmation, shifting the reference plane, which allows to understand and verify how precisely the\nimpedance transformation can be done and how well the impedances can be measured by the\nVNA. In order to prove the reliability of this system, the impact of precision measurements\nand load-pull data results are also shown.\n\n3.8.1 Repeatability test\n\nAs mentioned before in this work, the repeatability test is performed under two di?erent\nscenarios. The ?rst one is only intended for the tuner alone and its results can be seen in\nFig. 3.10. The last repeatability test, which has all the output network elements assembled, is\nalready a prediction test. The ?Total is the input impedance present at the transistor output\nterminal and results from the cascaded test ?xture, tuner and load block. For the device\ncharacterization and prediction test the selected frequency was 1.8GHz.\n\nFigure 3.10: Obtained results of the repeatability check test at 1.8 GHz.\n\n43\n\n\n\n? ?TUN Repeatability - Tuner\n\nThe calculation of ?TUN is equal to the ?IN of equation 3.2, it is veri?ed that ?TUN ?\nS11 when the VNA is calibrated. The VNA ports placed at the tuner reference plane acts\nas 50? source and load impedances, respectively. Thus, the ?loadblock shown in Fig. 3.11 is\napproximately zero, ?loadblock ? 0 .\n\nFigure 3.11: Characterization and tuner repeatability setup.\n\nThe high density of impedance states is required to achieve a good accuracy level, when\nusing the impedance interpolation functions.\n\nFigure 3.12: Displayed repeatability test over the Smith chart.\n\nFigure 3.12 shows the repeatability results displayed over the Smith chart, where the red\nsymbol '*' indicates the second measurement and the blue 'o' indicates the ?rst measurements.\nAs can be observed, both symbols overlap, which graphically represent an achieved accuracy\nof at least -50dB, using 50 ? as reference impedance.\n\n44\n\n\n\n? ?TUN Repeatability - Output Network\n\nFor the prediction test it is necessary beforehand to cascade all the s-parameters of the output\nnetwork. As such, the following steps are described.\n\nFigure 3.13: Scheme of the outputnetwork repeatability test.\n\nFirst, the S-matrix of each element of the output network is transformed to a ABCD-\nmatrix, as shown below:[\n\nA D\nB C\n\n]\n=\n\n[\n(1+S11)(1?S22)+S12S21\n\n2S21\nZO\n\n(1+S11)(1+S22)?S12S21\n2S21\n\n1\nZO\n\n(1?S11)(1?S22)?S12S21\n2S21\n\n(1?S11)(1+S22)+S12S21\n2S21\n\n]\n(3.13)\n\nThen, the DUT test ?xture, the tuner and load block are cascaded by a simple matrix\nmultiplication, resulting in a new ABCD-matrix.[\n\nAtotal Dtotal\nBtotal Ctotal\n\n]\n=\n\n[\nAfix Dfix\nBfix Cfix\n\n]\n.\n\n[\nAtuner Dtuner\nBtuner Ctuner\n\n]\n.\n\n[\nAloadblock Dloadblock\nBloadblock Cloadblock\n\n]\n(3.14)\n\nNext, this ABCD-matrix is converted back to an S-matrix that contains the whole output\nnetwork, as shown in the example below.[\n\nS11total S12total\nS21total S22total\n\n]\n=\n\n[\nAtotal+Btotal/ZO?CtotalZO?D\n\nAtotal+Btotal/ZO+CtotalZO+Dtotal\n\n2(AtotalDtotal?BtotalCtotal)\nAtotal+Btotal/ZO+CtotalZO+Dtotal\n\n2\nAtotal+Btotal/ZO+CtotalZO+Dtotal\n\n?Atotal+Btotal/ZO?CtotalZO+Dtotal\nAtotal+Btotal/ZO+CtotalZO+Dtotal\n\n]\n(3.15)\n\nAs a result, a new 2 port s-parameters block is obtained and by using it in the ?IN formula,\nthe presented ?L at the output terminal of the ampli?er can be properly calculated as follows.\n\n?L = S11total +\nS12totalS21total ?pwr\n\n1 ?S22total ?pwr\n(3.16)\n\nThis ?tun is the required ? at the tuner reference plane as shown in Fig. 3.8. It is typically\nused by the MLibTuners library functions in order to predict the Stun-parameters and estimate\nthe new mechanical positions required to synthesize a certain target impedance.\n\nThe STotal parameters are utilized to de-embed the output network from the measurements.\nA given example is shown in Fig. 3.17 where the red '*' represents ?tun and the blue 'o' circles\nthe ?L, in this case, the target impedances.\n\n45\n\n\n\n3.8.2 Impact of precision measurements\n\nThis section reveals the matter of a pre-matching technique and how it contributes to the\nmaximum achievable re?ection coe?cient. As it can be seen in Fig. 3.12, the tuner exhibits\na good repeatability for the ?rst 3000 load impedances, once the VSWR > 1.5:1.\n\nFor the loads closer to 50 ?, the presented signal-to-noise ratio (SNR) required to a proper\nmeasurement of the re?ected power wave is diminished, due to the match conditions, existing\nbetween the VNA ports and DUT. Both the noise ?oor and the sampler noise contribute to\nthis degradation. In order to diminish, or possible overcome, this problem, it is normal to use\na lower IF, to use averaging or to increase the VNA source power.\n\nAnother important constraint regarding the imprecision of the VNA measurements is due\nto the very low-loss reactive elements, such as the tuner, being less accurate for the load which\nexhibits a maximum re?ection coe?cient greater than 0.8. These problems can be overcome\nby using some impedance technique transformation that enables the synthesis of the same\ndesired impedance requiring a low VSWR.\n\nFigure 3.14: Pre-characterization magnitude and phase error results.\n\nThe next two ?gures reveal how important it is the VNA calibration performance. As it can\nbe seen in Fig. 3.15, the black dotted loads exhibit low values of repeatability approximately\n-45dB. Since these loads at the tuner reference plane are mostly closer to 50 ?, this usually\noccurs when the calibration is not properly performed and becomes even worst after usage of\na test ?xture. As such the capability to predict load impedances is lost, and the corresponding\nload-pull results become meaningless.\n\n46\n\n\n\nAnother important aspect related to the non-uniform repeatability distribution is that the\ninterpolation algorithm will not preserve the same performance as the repeatability, even if\nthe number of pre-characterized states increases, as the example shown in Fig. 3.15.\n\nFigure 3.15: Precision of poorly calibrated prediction loads.\n\nFor the second test displayed in Fig. 3.15, the required corrections on the VNA cali-\nbration process were applied and the target loads exhibit almost the same accuracy as the\ntuner repeatability, which is around -50 dB. This result will guarantee a correct and precise\nimpedance seen by the DUT, and so it is the one that I decided to use in the load-pull mea-\nsurements, which shows a uniformly accurate load characterization that provides meaningfully\ninterpolated target results with a desired ?delity.\n\nFigure 3.16: Precision of the well performed prediction loads.\n\n47\n\n\n\n3.8.3 Target impedances\n\nFor a chosen set of target load impedances, the interpolation algorithm determines a new\nset of mechanical positions and their respective s-parameters based on already characterized\noutput network shown in Fig. 3.8, taking also into account half of the test ?xture of the DUT\nand output block. In the Fig. 3.17, target loads at the ?xture ?ange plane are represented\nby blue 'o' points while the red '*' ones represent the required impedances at the tuner ?ange\nplane.\n\nFigure 3.17: Estimated tuner impedances based on target impedances for the DUT charac-\nterization.\n\nThe new mechanical positions are obtained by inverting the similar input re?ection coef-\n?cient formula shown in equation 3.16 so that ?tun becomes a function of ?L:\n\n?tun =\n?L ?S11fix\n\n?LS22fix ?S11fixS22fix + S12fixS21fix\n(3.17)\n\nIt is important to notice that ?IN corresponds to the ? at the DUT output, the s-\nparameters are the test ?xture ones and the ?L is the equivalent ?IN at the tuner reference\nplane which is attached to the ?xture.\n\n48\n\n\n\n3.8.4 Load-pull results\n\nAfter the proper absolute power calibration and system characterization are discussed, the\nachieved results of the load-pull measurements of a certain GaN microwave transistor is shown\nin Fig. 3.18. They contain the contours of load-pull displayed over the Cartesian plane, also\ncalled Z-plane, in Fig. 3.18 and Fig. 3.19 presents these same results on the Smith chart.\n\nFigure 3.18: Load-Pull contours at the Z-plane.\n\nThe obtained load-pull contours are displayed over the Smith chart, where the black sym-\nbols 'x' indicate the target impedances, the blue contours denote Pout, at 3dB gain compression\npoint and the red curves ?D. The information presented in Fig. 3.16 shows the load-pull am-\npli?er characterization at the 50? reference plane.\n\nFigure 3.19: Load-Pull contour at 3dB gain compression point.\n\n49\n\n\n\nBy inspecting the load-pull results the optimum load impedances in terms of e?ciency and\npower at 3dB of gain compression are the following:\n\nZL = 4.1459 + j1.0265?,Pout3dB (3.18)\n\nZL = 3.299 + j6.270?,Draineff3dB (3.19)\n\nFigure 3.20: Load-Pull contour at 3dB gain compression point where Z0 = 10 ?.\n\nFigure 3.21: Final bench at Huawei Sweden of an automated tuner based load-pull system.\n\n50\n\n\n\nChapter 4\n\nConclusion and Future Work\n\nThis chapter presents the main important aspects of this dissertation as well as its con-\nclusions. In addition, some ideas are given that might be used as future work.\n\n4.1 Conclusion\n\nThe strong motivation of this dissertation consists in the fact that, along the years, the\nindustry of telecommunications has found the necessity to optimize the time spent in the\nmicrowave transistor characterization process in order to quickly and accurately design a\nPA that meets the next generation requirements of power, linearity and e?ciency. That\nis required due to the data tra?c, user capacity and base station covering range, which is\nintensively increasing from one generation of a cellular base station to another. Thus, the\nmain objective of this dissertation was to build an automated load-pull systems at HUAWEI\nTechnologies AB, similar to the one that was previously manually performed. In this sense,\na concise study about the load-pull methods and techniques was given, which was further\nutilized in the system design.\n\nAfter getting the knowledge about the most important concepts, regarding load-pull the-\nory, an automated load-pull system was built, implemented and validated. The design allows\nto understand the role played by each component of the load-pull system and how to proceed\nthe characterization and integration of the whole system. Therefore, a systematic proce-\ndure was established using applied wave research (AWR)/MWO to support the developed\nMATLAB routines utilized in the characterization, absolute power calibration and load pull\nmeasurements.\n\nThe traditional load-pull technique implemented in this work utilizes a routine for the tuner\ncharacterization, besides of dedicated DLL for the control of the step motors and interpolation\nalgorithms of the MT981EU. This makes possible to recon?gure the output network based\non the characterization beforehand of the system, which enables the prediction of the seen\nimpedance by the DUT and to accurately read the power at the DUT input and output ports.\n\nDuring the practical tests, it was found that the presented repeatability of the MT981EU\nwas about - 60dB and even when attached with the rest of the system components it was\nmaintained. This ?lls the requirement of accuracy to reproduce precisely a certain impedance\nstate at the DUT reference plane, while assisting its performance assessment [37].\n\nIt was understood that a proper absolute power calibration and system veri?cation ensure\nthat most of the loss deviation on the predicted network losses is ?xed, avoiding possible\n\n51\n\n\n\ndiscrepancies in the presented drain e?ciency.\nAs a ?nal result, the load-pull measurements of the developed systems needs only 2 hours\n\nto measure 114 loads of a certain transistor, being not even comparable to the manual system\nthat was built in Aveiro Univeristy which needs about 14 hours of handwork to measure a\nsimilar device with the same quantity of target impedances.\n\nThe main goal of this work was successfully achieved where a well-de?ned procedure for\na system characterization and calibration was done, as well as the load-pull measurement\nroutines. Once all calibrations were ?nished, it was only necessary to introduce the target\nparameters for a certain DUT such as VGS, VDS, frequency, desired compression and a set\nof target re?ection coe?cients that should be used for its characterization. The routine per-\nforms the measurements automatically saving the results in a proper manner for a future post\nprocessing, PA design and non-linear model validation.\n\n4.2 Future work\n\nAs a future work, it is recommended to utilize a source tuner in addition to the already\npresented topology that was developed in this work. It has the purpose to optimize the\noverall performance of the implemented traditional load-pull system allowing a proper power\ngain veri?cation that is increased due to the connectors and tuner repeatability.\n\nAnother advice would be the change from the traditional to the VNA measurement based\ntopology granting the correct reading of the presented impedance and Pin being injected at\nthe DUT input, enhancing the accuracy of the obtained results in terms of PAE and Power\nGain.\n\nMoreover, the harmonic characterization can be added to the system in two di?erent forms\nusing additional tuners for the second and third harmonics as needed, or through the active\ninjection of the signal that is going to emulate the harmonic re?ection coe?cient. This active\ninjection might require less power at the harmonic than at the fundamental, which reduces\nthe cost of power ampli?ers with high power capabilities.\n\nIn addition, the strategy to record the generated data can be optimized, providing an\neasier access to the result and it can be integrated in the MWO/AWR scripts speeding up\nthe process of the artful conception of a PA, reducing the time to design an PA and avoiding\nextensive search of the recorded data.\n\n52\n\n\n\nBibliography\n\n[1] G. Simpson, A Beginner's Guide To All Things Load Pull or Impedance Tuning 101\n(5A-062). Maury Microwave Corporation, March, 2015.\n\n[2] J. Hoversten, M. Roberg, and Z. Popovi\u00a2, ?Harmonic load pull of high-power microwave\ndevices using fundamental-only load pull tuners,? in Microwave Measurements Conference\n(ARFTG), 2010 75th ARFTG. IEEE, 2010, pp. 1?4.\n\n[3] Z. Wang, Envelope Tracking Power Ampli?ers for Wireless Communications. Artech\nHouse, 2014.\n\n[4] J. Sevic, ?Introduction to tuner-based measurement and characterization,? Maury Tech-\nnical Data 5C-054, 2004.\n\n[5] F. M. Ghannouchi and M. S. Hashmi, Load-pull techniques with applications to power\nampli?er design. Springer Science &amp; Business Media, 2012, vol. 32.\n\n[6] R. S. Tucker and P. D. Bradley, ?Computer-aided error correction of large-signal load-pull\nmeasurements,? IEEE transactions on microwave theory and techniques, vol. 32, no. 3,\npp. 296?300, 1984.\n\n[7] P. D. Bradley and R. Tucker, ?Computer-corrected load-pull characterisation of power\nmesfet's,? in 1983 IEEE MTT-S International Microwave Symposium Digest, 1983, pp.\n224?226.\n\n[8] F. Microwave, ?Computer controlled microwave tuner,? - CCMT, Product Note 41, Jan,\n1998.\n\n[9] S. Bensmida, E. Bergeault, G. I. Abib, and B. Huyart, ?Power ampli?er characterization:\nAn active load-pull system based on six-port re?ectometer using complex modulated\ncarrier,? Microwave Theory and Techniques, IEEE Transactions on, vol. 54, no. 6, pp.\n2707?2712, 2006.\n\n[10] D.-L. L\u00ea and F. M. Ghannouchi, ?Source-pull measurements using reverse six-port re?ec-\ntometers with application to mesfet mixer design,? Microwave Theory and Techniques,\nIEEE Transactions on, vol. 42, no. 9, pp. 1589?1595, 1994.\n\n[11] R. Tuijtelaars, H. Westra, and G. Sutorius, ?Power ampli?er design and load-pull mea-\nsurements in practice.? in Agilent technologies and BSW, 2013.\n\n[12] F. Microwave, ?Tuner operation basics,? Dec. 23 2010. [Online]. Available:\nhttp://www.focus-microwaves.com/sites/default/?les/TunerOperationBasics.pdf\n\n53\n\nhttp://www.focus-microwaves.com/sites/default/files/TunerOperationBasics.pdf\n\n\n[13] M. M. Corporations, ?Slide screw tuner,? Technical Data, 2G-035A, Feb, 1998.\n\n[14] F. Microwaves, ?Electronic tuners (ets) and electromechanical tuner (emt) ? a critical\ncomparison,? Technical Note, Aug, 1998.\n\n[15] C. Woodin and D. Wandrei, ?High power solid state programmable load,? Jan. 4 1994, uS\nPatent 5,276,411. [Online]. Available: https://www.google.com.ar/patents/US5276411\n\n[16] R. Tuijtelaars, ?Overview of device noise parameter measurement systemse.? in BSW\nTestSystems &amp; Consulting bv. VDE/ITG, Dec, 2001.\n\n[17] M. Microwave, ?Measurement and modeling device characterization solu-\ntions,? Dec. 23 2015. [Online]. Available: https://www.maurymw.com/pdf/\nMAURY-CATALOG-COMPONENTS.pdf\n\n[18] P. Colantonio, F. Giannini, and E. Limiti, ?High e?ciency rf and microwave solid state\npower ampli?ers,? 2009.\n\n[19] R. Hajji, F. M. Ghannouchi, and R. G. Bosisio, ?Large-signal microwave transistor mod-\neling using multiharmonic load-pull measurements,? Microwave and Optical Technology\nLetters, vol. 5, no. 11, pp. 580?585, 1992.\n\n[20] S. C. Cripps, Advanced techniques in RF power ampli?er design. Artech House, 2002.\n\n[21] R. B. Stancli? and D. Poulin, ?Harmonic load-pull,? in 1979 IEEE MTT-S International\nMicrowave Symposium Digest, 1979, pp. 185?187.\n\n[22] F. Microwave, ?Comparing harmonic load-pull techniques with regards to power-added\ne?ciency (pae),? Application Note 58, May, Tech. Rep., 2007.\n\n[23] B. Hughes, A. Ferrero, and A. Cognata, ?Accurate on-wafer power and harmonic mea-\nsurements of mm-wave ampli?ers and devices,? in Microwave Symposium Digest, 1992.,\nIEEE MTT-S International. IEEE, 1992, pp. 1019?1022.\n\n[24] C. Arnaud, J.-L. Carbonero, J.-M. Nebus, and J.-P. Teyssier, ?Comparison of active\nand passive load-pull test benches,? in ARFTG Conference Digest-Spring, 57th, vol. 39.\nIEEE, 2001, pp. 1?4.\n\n[25] M. S. Hashmi, A. L. Clarke, S. P. Woodington, J. Lees, J. Benedikt, and P. J. Tasker,\n?An accurate calibrate-able multiharmonic active load?pull system based on the envelope\nload?pull concept,? Microwave Theory and Techniques, IEEE Transactions on, vol. 58,\nno. 3, pp. 656?664, 2010.\n\n[26] A. P. Ferrero and V. Teppati, ?Experimental comparison of active and passive load-pull\nmeasurement technologies,? -, 2000.\n\n[27] S. Dudkiewicz, ?Hybrid-active load pull with pna-x and maury microwave,? Agilent Tech-\nnologies, Inc 2012.\n\n[28] F. M. Ghannouchi, M. S. Hashmi, S. Bensmida, and M. Helaoui, ?Loop enhanced passive\nsource-and load-pull technique for high re?ection factor synthesis,? Microwave Theory\nand Techniques, IEEE Transactions on, vol. 58, no. 11, pp. 2952?2959, 2010.\n\n54\n\nhttps://www.google.com.ar/patents/US5276411\nhttps://www.maurymw.com/pdf/MAURY-CATALOG-COMPONENTS.pdf\nhttps://www.maurymw.com/pdf/MAURY-CATALOG-COMPONENTS.pdf\n\n\n[29] J. Flucke, P. Heymann, A. Liero, and W. Heinrich, ?Rf-measurements of packaged broad-\nband power transistors,? ITG-Fachbericht-GeMIC 2008, 2008.\n\n[30] W. Sha, W. Xianliang, H. Zhixiang, C. Mingsheng, and V. Zhurbenko, ?The high-order\nsymplectic ?nite-di?erence time-domain scheme: Passive microwave components and an-\ntennas,? 2010.\n\n[31] M. Microwave, ?Mt964 load pull test ?xtures,? [Accessed 23 12 2015]. [Online]. Available:\nhttps://www.maurymw.com/pdf/datasheets/4T-005.pdf\n\n[32] V. Teppati, A. Ferrero, and M. Sayed, Modern RF and microwave measurement tech-\nniques. Cambridge University Press, 2013.\n\n[33] J. Fleury and O. Bernard, ?Designing and characterizing trl ?xture calibration standards\nfor device modeling,? Applied Microwave and Wireless, vol. 13, no. 10, pp. 26?55, 2001.\n\n[34] A. technologies, ?Agilent 10 hints for making better network analyzer measurements,? 25\nOct 2001. [Online]. Available: http://cp.literature.agilent.com/litweb/pdf/5965-8166E.\npdf\n\n[35] B. D. Huebschman, ?Calibration and veri?cation procedures at army research laboratory\n(arl) for the focus microwaves load pull system,? ARL-TR-3985, Nov 2006.\n\n[36] M. Microwave, ?Theory of load and source pull measurement,? Maury Microwave Corpo-\nration, vol. 27, 1999.\n\n[37] J. Sevic, ?Basic veri?cation of power load-pull systems,? Maury Microwave Corp., Appli-\ncation Note 5C-055, Ontario, CA, 2004.\n\n55\n\nhttps://www.maurymw.com/pdf/datasheets/4T-005.pdf\nhttp://cp.literature.agilent.com/litweb/pdf/5965-8166E.pdf\nhttp://cp.literature.agilent.com/litweb/pdf/5965-8166E.pdf\n\n\n56\n\n\n\nAppendix A\n\nMATLAB Routines\n\nA.1 Pre-Characterization\n\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%% Thesis: \"Fully?Automated Load?Pull System Based on Mechanical Tuners\" %%\n% HUAWEI / IT / University of Aveiro %\n%??????????????????????????????????????????????????????????????????????????????%\n% Description : Main script of tuner characterization %\n% Tuner Model : MT981EU10:3170 (Maury) %\n%??????????????????????????????????????????????????????????????????????????????%\n% Creator : Alison Willian Pereira (awx281679) %\n%??????????????????????????????????????????????????????????????????????????????%\n% Revision History: %\n% Name Date Description %\n% awx281679 20150412 Created and initial Revision. %\n% awx281679 20150521 Version 2.0 %\n%??????????????????????????????????????????????????????????????????????????????%\n% Freq_start: 1.8 GHZ Freq_stop: 1.8 GHZ N_points 3000 Cal_set: 1 %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\nmain_dir = 'D:\\ALPS\\Routines\\' ;\ncd( strcat(main_dir,'MT981EU10_characterization\\')) ;\nlp_func = strcat('D:\\ALPS\\Routines\\','aux_tun_charac\\') ;\naddpath(genpath( lp_func )) ;\naddpath(genpath( strcat(main_dir,'\\Driversdir_drivers\\'))) ;\nconfig = fg_getconfig_v3 ;\nhandle_pna = config.Instruments.Vector_Analyzer.handle ;\n\n%% Calibration setup\nAgN5230C_Setup( handle_pna,'system','delete_all_measurements' ,' ') ;\nAgN5230C_Setup( handle_pna,'system','preset',' ') ;\nclrdevice( handle_pna) ;\nfg_pna_user_setup( handle_pna) ;\nocs_callset = 'cset1.cst' ;\nAgN5230C_Setup( handle_pna,'memory','load',ocs_callset) ;\npause(3) ;\nAgN5230C_conf_read_maury(handle_pna) ;\n\n%% Set the storage directory folder\nis_filename_tun = strcat(lp_func,'\\dir_tun\\8CELL_Last_shot.tun') ;\nshare_path = strcat('.\\dir_load_pull\\dir_measurements',...\n\n'\\AWPTST5152015_tun\\HUAWEI_MT981EU10_CAL_MEAS\\') ;\n\n57\n\n\n\nis_fname_vna = '\\dir_load_pull\\dir_measurements\\AWPTST5152015_tun\\' ;\ni_call_set = 1 ;\n\n%% Tuner initialization ? MT981EU10\nMT981EU10_Setup('MLibTuners','load_libraries','') ;\nMT981EU10_Setup('MLibTuners','init_setup','') ;\nMT981EU10_Setup('MLibTuners','init','') ;\n\n%% Load?Tun File\noct_tunf = tun_to_mat(is_filename_tun) ;\nfreqs = oct_tunf.data.freq ;\n\n%% Set Paths\nshareDay_path = strcat(share_path,datestr(now,'yyyy_mm_dd')) ;\nfile_out = strcat(shareDay_path,'\\',datestr(now,'yy_mm_dd'),...\n\n'?',datestr(now,'HH_MM'),'_TChar_OUT') ;\n%% Create Paths\nif(~exist(shareDay_path,'dir'))\nmkdir(shareDay_path);\n\nend\n%% Short test of single frequency characterization\n.\nfor freq_sel = 1:size(freqs,2)\n[oct_measured_data] = ... % OUTPUT: pre_characterization tun structure .\nf_tun_characterization_v2( ... % FUNCTION NAME .\nhandle_pna ,... % INPUT: ih_vna object used during the process .\nis_filename_tun ,... % INPUT: fullpath and name of the tun file .\nfreqs(freq_sel) ,... % INPUT: target frequency for characterization .\nfreq_sel ) ;\n\nfreq = freqs(1,freq_sel) ;\nline = sprintf('%1gMHz_ws.mat',round(1000*freq)) ;\nsave( strcat(file_out,line)) ;\ndisp( 'Pre?Characterization complete! saving ...') ;\nf_write_tun_file( strcat(main_dir,...\n\nstrcat(file_out(3:end),line(1:end?4),'.tun')),...\noct_measured_data) ;\n\nend\n%???????????????????Auxiliar pre?characterization function?????????????????????%\n\nfunction ...\n[oct_tunfile] = ... % OUTPUT: pre_characterization tun structure.\nf_tun_characterization_v2( ... % FUNCTION NAME.\nhandle_pna ,... % INPUT: ih_vna object used during the process.\nis_filename_tun ,... % INPUT: fullpath and name of the tun file.\nic_sel_freq ,... % INPUT: target frequency for characterization.\nfreq_sel )\n\n%% 1\u00c2\u017e? Load .tun file with the mechanical position data.\nfct_tundemo = tun_to_mat(is_filename_tun) ;\n\n%% 2\u00c2\u017e ? Load the mech_pos of the frequency to be pre?characterized.\ncrv_mechpos = fct_tundemo.data.mec_pos(1,freq_sel).data(:,1:3) ;\n\n%?????????????????????????????????????????????????????????????????????????\nSmithChart(0); hold on;\n\n%?????????????????????????????????????????????????????????????????????????\nset(gcf,'units','normalized','outerposition',[0 0 1 1]) ;\n\noct_tunfile.info.Method = fct_tundemo.info.Method ;\n\n58\n\n\n\noct_tunfile.info.Name = fct_tundemo.info.Name ;\noct_tunfile.info.Model = fct_tundemo.info.Model ;\noct_tunfile.info.Date_Time = strcat('Date: ',sprintf(date),...\n\n'Time: ',datestr(now,'HH:MM:SS')) ;\noct_tunfile.info.Embedding = fct_tundemo.info.Embedding ;\noct_tunfile.info.start = fct_tundemo.data.freq(1,freq_sel) ;\noct_tunfile.info.stop = fct_tundemo.data.freq(1,freq_sel) ;\noct_tunfile.info.numfreq = 1 ;\n\n%% Creates xxx.Data branch of the structure\noct_tunfile.data.freq = ic_sel_freq ;\noct_tunfile.data.def_gamma = fct_tundemo.data.def_gamma ;\noct_tunfile.data.positions = fct_tundemo.data.positions(freq_sel) ;\nAgN5230C_Setup(handle_pna,'system','delete_all_measurements',' ') ;\nAgN5230C_Setup(handle_pna,'system','preset',' ') ;\npause(3) ;\n\n%% Load call set of the VNA calibration.\nocs_callset = 'cset1.cst' ;\nAgN5230C_Setup( handle_pna,memory','load',ocs_callset) ;\nAgN5230C_conf_read_maury(handle_pna) ;\n\n%% Set a desired frequency\nAgN5230C_Setup( handle_pna,'user','f_sel_freq',ic_sel_freq) ;\n\n%% 3\u00c2\u017e ? Wait the VNA be read\nfor ind = 1:oct_tunfile.data.positions\nMT981EU10_Setup('MLibTuners','move_tuner' ,crv_mechpos(ind,1:3)) ;\nSPM = AgN5230C_s2p_read(handle_pna) ;\ns11_cp = SPM(1)+1i.*SPM(2) ;\nplot(s11_cp ,'*r') ;\nlegend( sprintf('s11: %1.4g j%1.4g ',SPM(1),SPM(2)) ,...\n\nsprintf('s21: %1.4g j%1.4g ',SPM(3),SPM(4)) ,...\nsprintf('s12: %1.4g j%1.4g ',SPM(5),SPM(6)) ,...\nsprintf('s22: %1.4g j%1.4g ',SPM(7),SPM(8))) ;\n\ndrawnow ;\ncrv_spm_total(ind,:) = SPM ;\nend\n\n%% Creates xxx.Info branch of the structure\noct_tunfile.data.mp_sparam = [crv_mechpos(:,:) crv_spm_total] ;\n\n%% End\ndisp('Measurement finished !!!') ;\nfigure(1) ;\npause(2) ;\nclose(figure(1)) ;\nend\n%??????????????????????????????????????????????????????????????????????????????%\n\n59\n\n\n\n60\n\n\n\nA.2 Power Calibration\n\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%% Thesis: \"Fully?Automated Load?Pull System Based on Mechanical Tuners\" %%\n% HUAWEI / IT / University of Aveiro %\n%??????????????????????????????????????????????????????????????????????????????%\n% Description: wb_pwr_calibration v1.0 ? Power Calibration %\n%??????????????????????????????????????????????????????????????????????????????%\n% Revision History: %\n% Name Date Description %\n% awx281679 2015\\06\\25 First run. %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\nmain_dir = 'D:\\ALPS\\Routines\\' ;\ncd( strcat(main_dir,'MT981EU10_pwr_cal\\')) ;\naddpath(genpath( strcat(main_dir,'MT981EU10_pwr_cal\\')) ;\n\n%% ?????????????????????????????????????????????????????????????????????????????\n% Loading all the instruments %%\n% ??????????????????????????????????????????????????????????????????????????????\nconfig = fg_getconfig_v4 ;\ntpwm = config.Instruments.Power_Meter.handle ;\ntdca = config.Instruments.Power_Supply.handle ;\ntmxg = config.Instruments.Signal_Generator.handle ;\nhandle_pna = config.Instruments.Vector_Analyzer.handle ;\n\nAgN5230C_Setup( handle_pna,'system','delete_all_measurements' ,' ') ;\nAgN5230C_Setup( handle_pna,'system','preset',' ') ;\nclrdevice( handle_pna) ;\nocs_callset = 'cset1.cst' ;\nAgN5230C_Setup( handle_pna,'memory','load',ocs_callset) ;\npause(3);\nAgN5230C_conf_read_maury( handle_pna ) ;\nic_sel_freq = 1.8 ;\nAgN5230C_Setup( handle_pna,'user','f_sel_freq',ic_sel_freq) ;\n\n%% ?????????????????????????????????????????????????????????????????????????????\n% Tuner initialization setup %%\n% ??????????????????????????????????????????????????????????????????????????????\nMT981EU10_Setup( 'MLibTuners','load_libraries','') ;\nMT981EU10_Setup( 'MLibTuners','init_setup','' ) ;\nMT981EU10_Setup( 'MLibTuners','init','' ) ;\n\n% ??????????????????????????????????????????????????????????????????????????????\n% Loading characterization and system s?parameters\n% ??????????????????????????????????????????????????????????????????????????????\nfilename = strcat(main_dir,'dir_load_pull\\dir_loads\\8cell_eff.txt') ;\ndata = f_read_load_awr_11param(filename) ;\nZLoad = data.R + 1i.*data.jX ;\nsloads = z_to_s(ZLoad,50) ;\nfix_fname = 'fixture_8cells.s2p' ;\n[~,X.sfix] = f_awr_get_s2p_at_freq_sel( fix_fname,ic_sel_freq ) ;\nX.sfix_11 = X.sfix(1,1) ;\nX.sfix_21 = X.sfix(1,2) ;\nX.sfix_12 = X.sfix(1,3) ;\nX.sfix_22 = X.sfix(1,4) ;\ngin_fix_to_tun =(?X.sfix_11 + sloads)./ ...\n\n((?X.sfix_11.*X.sfix_22)+sloads.*X.sfix_22+X.sfix_12.*X.sfix_21);\nsbfix_s2p = 'sma_male_emb_p1.s2p' ;\n[~,X.sbfix ] = f_awr_get_s2p_at_freq_sel( sbfix_s2p ,ic_sel_freq ) ;\n\n61\n\n\n\nX.sbfix_11 = X.sbfix(1,1) ;\nX.sbfix_21 = X.sbfix(1,2) ;\nX.sbfix_12 = X.sbfix(1,3) ;\nX.sbfix_22 = X.sbfix(1,4) ;\nsloads = gamma_x + 1i.*gamma_y ;\ngin_f_fix_2_tun = (?X.sbfix_11 + sloads)./ ...\n\n((?X.sbfix_11.*X.sbfix_22)+sloads.*X.sbfix_22+X.sbfix_12.*X.sbfix_21);\ngin_dut = X.sbfix_11 + ((X.sbfix_21*X.sbfix_12.*gin_f_fix_2_tun )./ ...\n\n(1?X.sbfix_11.*gin_f_fix_2_tun)) ;\ngamma_x = real(gin_f_fix_2_tun) ;\ngamma_y = imag(gin_f_fix_2_tun) ;\nfilename = '15_06_28?18_50_TChar_OUT1800MHz_ws.tun' ;\nmeas_dir = '...\\ AWPTST5152015_tun\\HUAWEI_MT981EU10_CAL_MEAS' ;\nMT.tuner_number = 0 ;\nMT.fname = strcat(main_dir,meas_dir,'\\2015_06_28\\',filename) ;\nMT.tuner_model = 'MT981EU10' ;\nMT.freq = ic_sel_freq ;\nMT.mec(1:3) = 9500 ;\nMT.interp_mode = 1 ; KEY is required.\ngamma_out_s1p = 'gamma_out_s1p.s1p' ;\n[~,X.gamma_out_s1p] = f_awr_get_s1p_at_freq_sel( gamma_out_s1p , ic_sel_freq ;\nMT.gamma_x_termination = (16.4*10^?3) ;\nMT.gamma_y_termination = (?5.23*10^?3) ;\nMT981EU10_Setup( 'MLibTuners','free_tuner_data' ,MT) ;\nMT981EU10_Setup( 'MLibTuners','read_tuner_data_file',MT) ;\n\n% ??????????????????????????????????????????????????????????????????????????????\n% Estimating the Mechanical position and s2p for the sloads\n% ??????????????????????????????????????????????????????????????????????????????\n\nSmithChart(2);hold on;\nfor k = 1:size(sloads,1)\nMT.gamma_x = gamma_x(k) ;\nMT.gamma_y = gamma_y(k) ;\nmpos = MT981EU10_Setup('MLibTuners', 'get_tuner_refl_posn',MT) ;\nmp(k,1:3) = [mpos.carr mpos.p1 mpos.p2] ;\n\n%plot target imp\nplot( gin_fix_to_tun(k),'o');\n\n%plot(tst.data.mec_pos.data(k,4) +1i.*tst.data.mec_pos.data(k,5),'o');\nMT981EU10_Setup( 'MLibTuners','move_tuner',[ mp(k,1) mp(k,2) mp(k,3)]) ;\ns_aux = AgN5230C_s_read(handle_pna) ;\ns_pchar_11(k) = s_aux(1)+1i.*s_aux(2) ;\ns_pchar_21(k) = s_aux(3)+1i.*s_aux(4) ;\ns_pchar_12(k) = s_aux(5)+1i.*s_aux(6) ;\ns_pchar_22(k) = s_aux(7)+1i.*s_aux(8) ;\n\nplot( s_pchar_11(1,k) ,'r*' ); drawnow ;\nerr(k) = 20.*log10(abs(( gin_fix_to_tun(k)) ...\n\n? s_pchar_11(1,k))) ;\ngin(k) = X.sfix_11 + (X.sfix_21.*X.sfix_12.*s_pchar_11(1,k))./ ...\n\n(1 ? X.sfix_22.*s_pchar_11(1,k)) ;\nplot(sloads(k),'bo');\nplot(gin(k),'r*');\n\nend\nerr2 = err ;\nsgoal = [ s_pchar_11' s_pchar_21' s_pchar_12' s_pchar_22'] ;\n% ?????????????????????????????????????????????????????????????????????????????\n% Power Calibtraion %%\n% ?????????????????????????????????????????????????????????????????????????????\n\n62\n\n\n\naddpath( 'D:\\ALPS\\fpwr_swp_signals' );\nfps_lps_signal_fname = 'fps_15_p_30dB' ;\not_cal = fpwr_swp_pwr_cal_ldmos_config_v4(config,ic_sel_freq,fps_lps_signal_fname);\n\n% ?????????????????????????????????????????????????????????????????????????????\n% s?parameters of system components %%\n% ?????????????????????????????????????????????????????????????????????????????\ngspec_out_s1p = 'gspec_out.s1p' ;\n[~,X.gspec_out]= f_awr_get_s1p_at_freq_sel( gspec_out_s1p , ic_sel_freq);\ngpwr_b_s1p = 'gpwr_b.s1p' ;\n\n%Power_meter\n[~,X.gpwr_b] = f_awr_get_s1p_at_freq_sel( gpwr_b_s1p , ic_sel_freq);\ngamma_out_s2p = 'gamma_out_s2p.s2p' ;\n[~,X.gamma_out_s2p ]= f_awr_get_s2p_at_freq_sel( gamma_out_s2p , ic_sel_freq);\ngamma_c_pwrc_f_t_tun = 'conector_pwr_cal_b_fix_tuner.s2p' ;\n\n[~,X.gamma_c_pwrc_f_t_tun ] = f_awr_get_s2p_at_freq_sel(gamma_c_pwrc_f_t_tun,...\nic_sel_freq);\n\nX.abcd_gamma_c_pwrc_f_t_tun = s_to_abcd([X.gamma_out_s2p(1,1) X.gamma_out_s2p(1,3);\nX.gamma_out_s2p(1,2) X.gamma_out_s2p(1,4)],50);\n\nX.abcd_gamma_out = s_to_abcd([X.gamma_c_pwrc_f_t_tun(1,1) X.gamma_c_pwrc_f_t_tun(1,3);\nX.gamma_c_pwrc_f_t_tun(1,2) X.gamma_c_pwrc_f_t_tun(1,4)],50);\n\nMT_pcharc = tun_to_mat(MT.fname) ;\nX.mp = MT_pcharc.data.mec_pos.data(:,1:3) ;\n\nfor k = 1:size(X.s11_t,1)\nX.abcd_t(:,:,k) = s_to_abcd([X.s11_t(k,1) X.s21_t(k,1) ;\n\nX.s12_t(k,1) X.s22_t(k,1)],50) ;\nX.abcd_gamma_out_total(:,:,k) = X.abcd_gamma_c_pwrc_f_t_tun * X.abcd_t(:,:,k)*...\n\nX.abcd_gamma_out ;\nX.gamma_out_total(:,:,k) = abcd_to_s(X.abcd_gamma_out_total(:,:,k),50) ;\n\nX.gin(k) = X.gamma_out_total(1,1,k) +(( X.gamma_out_total(1,2,k).* ...\nX.gamma_out_total(2,1,k).*X.gpwr_b)...\n./(1? X.gamma_out_total(2,2,k).*X.gpwr_b)) ;\n\nGp_lin(k) = (1/(1?(abs(X.gin(k))^2))) .* ...\n(abs(X.gamma_out_total(2,1,k).^2) .* ...\n(( 1? abs(X.gpwr_b).^2) ./ ...\n(abs(1?X.gamma_out_total(2,2,k).*X.gpwr_b).^2))) ;\n\nGp_dB(k) = 10.*log10(Gp_lin(k)) ;\n\nend\nfigure(2); plot(Gp_dB,'?o');grid on;\nSmithChart(0); plot(X.gin,'o');\nclose all ;\n\n% ??????????????????????????????????????????????????????????????????????????????\n% ?????????????? WARNING THIS UPPER IS USED ONLY TO POWER CAL ??????????????????\n% ??????????????????????????????????????????????????????????????????????????????\n\not_cal.max = 10.1 ;\nPAInputLoss = 31.33 ;\nOutputLosses_array = ?Gp_dB ; %G21_dB_out;% ?41.5702 ;\n\n% ??????????????????????????????????????????????????????????????????????????????\n% Freescale driver\n% ??????????????????????????????????????????????????????????????????????????????\n\n63\n\n\n\nGain_driver_offset = 5.67;\nPeakPower = 42;\nsteps = [PeakPower?15:15/2:PeakPower]?36.251496748344728?0.35 ;\nOBO_in_pts = 11 ;\ndB_comp = 1 ;\nmax_peak_after_backoff = 0.01 ;\n\nfor k = 72:10\n\nOutputLosses = OutputLosses_array(k) ;\nMT981EU10_Setup( 'MLibTuners','move_tuner',[ mp(k,1),mp(k,2),mp(k,3)]) ;\nMT981EU10_Setup( 'MLibTuners','move_tuner',[ 100 ,9500,9500]) ;\n\n% ?????????????????????????????????????????????????????????????????????????????\naux = 1;\nfor j = 1:size(steps,2)\n\not_cal.AvgPower = steps(j) ;\not_flps_pcal = fpwr_swp_ldmos_fetch_load( con?fig,ot_cal,PAInputLoss,OutputLosses);\nPout_peak(:,aux)= ot_flps_pcal.PoutdBm ;\nA(j) = max(Pout_peak(:,j))\naux = aux +1 ;\ns = input('Next','s') ;\n\nend\nend\n%??????????????????????????????????????????????????????????????????????????????%\n\n64\n\n\n\nA.3 Load-Pull Measurements\n\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%% Thesis: \"Fully?Automated Load?Pull System Based on Mechanical Tuners\" %%\n% HUAWEI / IT / University of Aveiro %\n%??????????????????????????????????????????????????????????????????????????????%\n% Description: wb_alps.m ? Automated Load?Pull System ? PA Measurements %\n%??????????????????????????????????????????????????????????????????????????????%\n% Revision History: %\n%??????????????????????????????????????????????????????????????????????????????%\n% Name Date %\n% awx281679 2015\\04\\25 First run. %\n% awx281679 2015\\06\\18 Updated. %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n\nclear all; close all; clc;\n%% ?????????????????????????????????????????????????????????????????????????????\n% set main path %%\n% ??????????????????????????????????????????????????????????????????????????????\nconfig = fg_getconfig_v4 ;\nmain_dir = 'D:\\Tese\\Desktop\\Msc_LPS\\MATLAB_V2\\' ;\ncd( main_dir );\naddpath( strcat(main_dir,'\\wb_flps') );\naddpath( '.\\workbenchs' );\naddpath(genpath('D:\\Tese\\Desktop\\Msc_LPS\\MATLAB_V2\\wb_pwr_calibration\\' ));\naddpath('D:\\Tese\\Desktop\\Msc_LPS\\MATLAB_V2\\dir_load_pull\\dir_func\\f_flps\\' );\naddpath('D:\\Tese\\Desktop\\Msc_LPS\\MATLAB_V2\\dir_load_pull\\dir_func\\f_r_awr\\' );\naddpath('D:\\Tese\\Desktop\\Msc_LPS\\MATLAB_V2\\dir_load_pull\\dir_func\\AgN5230C\\',...\n\n'D:\\Tese\\Desktop\\Msc_LPS\\MATLAB_V2\\dir_load_pull\\dir_func\\',...\n'D:\\Tese\\Desktop\\Msc_LPS\\MATLAB_V2\\dir_load_pull\\dir_tun\\',...\n'D:\\Tese\\Desktop\\Msc_LPS\\MATLAB_V2\\dir_load_pull\\dir_drivers\\' );\n\n%% ?????????????????????????????????????????????????????????????????????????????\n% LPS User Setup %%\n% ??????????????????????????????????????????????????????????????????????????????\n% filename of the setup. ex: target is the load's to be measured\ndut_loads_fname = strcat(main_dir,'dir_load_pull\\dir_loads\\8cell_eff.txt' );\nfixture_fname = 'fixture_8cells.s2p' ;\nsignal_fname = '1800MHz_ws_v2' ;\nfps_lps_signal_fname = 'fps_15_p_30dB' ;\n\n% Folder of the fpwr_swp_directory:\ntrans = 'G068_8Cell' ;\n\n%% Dut Bias\nVds = 50 ;\nVgs = ?2.66 ;\nIds = 1.395 ;\nImax = 2 ;\nic_sel_freq = 1.8 ;\n\n%% ?????????????????????????????????????????????????????????????????????????????\n% Loading all the instruments %%\n% ??????????????????????????????????????????????????????????????????????????????\n% Init. instr. &amp; load libraries\nconfig = fg_getconfig_v4 ;\ntpwm = config.Instruments.Power_Meter.handle ;\n\n65\n\n\n\ntdca = config.Instruments.Power_Supply.handle ;\ntmxg = config.Instruments.Signal_Generator.handle ;\n\n%% Tuner initialization setup\nMT981EU10_Setup( 'MLibTuners','load_libraries','') ;\nMT981EU10_Setup( 'MLibTuners','init_setup','') ;\nMT981EU10_Setup( 'MLibTuners','init','') ;\n\n%% ?????????????????????????????????????????????????????????????????????????????\n% Creating file directories to save data %%\n% ??????????????????????????????????????????????????????????????????????????????\n\ndir = 'flps_data\\' ;\npath = main_dir ;\nshare_path = strcat(path,dir) ;\nshareDay_path = strcat(share_path,trans,'\\',...\n\nstrcat(datestr(now,'yyyy_mm_dd')) );\n\nfile_out = strcat(shareDay_path,'\\', datestr(now,'yy_mm_dd'),'\\',...\ndatestr(now,'HH_MM'),trans,'_lpfs_','\\' );\n\nfile_out2 = strcat(file_out,trans,'_figures\\' );\nfile_out3 = strcat(file_out,trans,'_swp_load_data\\' );\n\nif(~exist(file_out,'dir'))\nmkdir(file_out) ;\n\nend\n\nif(~exist(file_out2,'dir'))\nmkdir(file_out2) ;\n\nend\n\nif(~exist(file_out3,'dir'))\nmkdir(file_out3) ;\n\nend\n%%?????????????????????????????????????????????????????????????????????????????\n% Estimating the Mechanical position and s2p for the sloads %\n% ?????????????????????????????????????????????????????????????????????????????\ndata = f_read_load_awr_11param(dut_loads_fname) ;\nZLoad = data.R + 1i.*data.jX ;\nsloads = z_to_s(ZLoad,50) ;\n[~,X.sfix] = f_awr_get_s2p_at_freq_sel(fixture_fname,...\n\nic_sel_freq );\nX.sfix_11 = X.sfix(1,1) ;\nX.sfix_21 = X.sfix(1,2) ;\nX.sfix_12 = X.sfix(1,3) ;\nX.sfix_22 = X.sfix(1,4) ;\n\ngin_f_fix_to_tun1 = (?X.sfix_11 + sloads)./((?X.sfix_11.*X.sfix_22) ...\n+sloads.*X.sfix_22+X.sfix_12.*X.sfix_21) ;\n\nfix_conec_s2p = 'fix_and_connector.s2p' ;\n[~,X.sfix_conec] = f_awr_get_s2p_at_freq_sel( fix_conec_s2p , ic_sel_freq );\n\nX.sfix_conec_11 = X.sfix_conec(1,1) ;\nX.sfix_conec_21 = X.sfix_conec(1,2) ;\nX.sfix_conec_12 = X.sfix_conec(1,3) ;\n\n66\n\n\n\nX.sfix_conec_22 = X.sfix_conec(1,4) ;\n\ngin_f_fix_to_tun = (?X.sfix_conec_11 + sloads)./ ...\n((?X.sfix_conec_11 .* X.sfix_conec_22) ...\n\n+sloads.*X.sfix_conec_22+ X.sfix_conec_12 .* X.sfix_conec_21 );\n\nX.gamma_x = real(gin_f_fix_to_tun) ;\nX.gamma_y = imag(gin_f_fix_to_tun) ;\n\n%% ????????????????????????????????????????????????????????????????????????????\n% Tuner pre?characterization setup %\n% ?????????????????????????????????????????????????????????????????????????????\nMT.tuner_number = 0 ;\nfilename = '15_06_28?18_50_TChar_OUT1800MHz_ws.tun' ;\nmeas_dir = 'dir_load_pull\\dir_measurements' ;\nmeas_dir2 = '\\AWPTST5152015_tun\\HUAWEI_MT981EU10_CAL_MEAS' ;\nMT.tuner_number = 0 ;\nMT.fname = strcat(main_dir,meas_dir,meas_dir2,'\\2015_06_28\\',filename);\nMT.tuner_model = 'MT981EU10' ;\nMT.freq = ic_sel_freq ;\nMT.mec(1) = 9500 ;\nMT.mec(2) = 9500 ;\nMT.mec(3) = 9500 ;\nMT.interp_mode = 1 ;\nMT.gamma_x_term = 0 ;\nMT.gamma_y_term = 0 ;\nMT981EU10_Setup( 'MLibTuners','free_tuner_data' , MT );\nMT981EU10_Setup( 'MLibTuners','read_tuner_data_file', MT );\n\n%% ?????????????????????????????????????????????????????????????????????????????\n% Load?Pull full characterization %%\n% ??????????????????????????????????????????????????????????????????????????????\n% ??????????????????????????????????????????????????????????????????????????????\n% Gamma_out %\n% ??????????????????????????????????????????????????????????????????????????????\n\nfix_and_connec = 'fix_and_connector.s2p' ;\n[~,X.fix_and_connec]= f_awr_get_s2p_at_freq_sel( fix_and_connec, ic_sel_freq );\ngamma_out_s2p = 'gamma_out_s2p.s2p' ;\n[~,X.gamma_out_s2p ]= f_awr_get_s2p_at_freq_sel( gamma_out_s2p,ic_sel_freq );\ngspec_out_s1p = 'gspec_out.s1p' ;\n[~,X.gspec_out] = f_awr_get_s1p_at_freq_sel( gspec_out_s1p,ic_sel_freq );\ngpwr_b_s1p = 'gpwr_b.s1p' ;\n[~,X.gpwr_b] = f_awr_get_s1p_at_freq_sel( gpwr_b_s1p,ic_sel_freq );\n\n% ??????????????????????????????????????????????????????????????????????????????\n% ABCD ?MATRIX %\n% ??????????????????????????????????????????????????????????????????????????????\nX.abcd_fix_and_connec = s_to_abcd([X.fix_and_connec(1,1) X.fix_and_connec(1,3);\n\nX.fix_and_connec(1,2) X.fix_and_connec(1,4)],50) ;\n\nX.abcd_gamma_out = s_to_abcd([X.gamma_out_s2p(1,1) X.gamma_out_s2p(1,3) ;\nX.gamma_out_s2p(1,2) X.gamma_out_s2p(1,4)],50) ;\n\nMT_pcharc = tun_to_mat(MT.fname) ;\nX.mp = MT_pcharc.data.mec_pos.data(:,1:3) ;\n\n67\n\n\n\nX.s11 = MT_pcharc.data.mec_pos.data(:,4) + ...\n1i.*MT_pcharc.data.mec_pos.data(:,5) ;\n\nX.s21 = MT_pcharc.data.mec_pos.data(:,6) + ...\n1i.*MT_pcharc.data.mec_pos.data(:,7) ;\n\nX.s12 = MT_pcharc.data.mec_pos.data(:,8) + ...\n1i.*MT_pcharc.data.mec_pos.data(:,9) ;\n\nX.s22 = MT_pcharc.data.mec_pos.data(:,10) + ...\n1i.*MT_pcharc.data.mec_pos.data(:,11) ;\n\n% ??????????????????????????????????????????????????????????????????????????????\n% Remove the losses and shift the reference plane to properly read out_pwr_b\n% ??????????????????????????????????????????????????????????????????????????????\n\nidx = NaN.*ones(size(gin_f_fix_to_tun,1),1) ;\nfor k = 1:size(gin_f_fix_to_tun,1)\n[~,idx(k)] = min(20.*log10(abs( gin_f_fix_to_tun(k)?X.s11))) ;\n\nend\n\nX.s11_t = X.s11(idx) ;\nX.s21_t = X.s21(idx) ;\nX.s12_t = X.s12(idx) ;\nX.s22_t = X.s22(idx) ;\n\n% ??????????????????????????????????????????????????????????????????????????????\n% Post processing awr s2p files\n% ??????????????????????????????????????????????????????????????????????????????\n\nMT.gamma_x_term = (16.4*10^?3) ;\nMT.gamma_y_term = (?5.23*10^?3) ;\nMT981EU10_Setup( 'MLibTuners','free_tuner_data' ,MT );\nMT981EU10_Setup( MLibTuners','read_tuner_data_file',MT );\n\n%% Generating mechanical positions\nSmithChart(0);hold on;\n\nfor k = 1:size(X.gamma_x,1)\nMT.gamma_x = X.gamma_x(k) ;\nMT.gamma_y = X.gamma_y(k) ;\nmpos = MT981EU10_Setup('MLibTuners', 'get_tuner_refl_posn',MT) ;\nmp_t(k,1:3) = [mpos.carr mpos.p1 mpos.p2] ;\nplot( gin_f_fix_to_tun(k),'o') ;\ndrawnow ;\nplot( sloads(k),'bo' );\nend\n\nfor k = 1:size(X.s11_t,1)\nX.abcd_t(:,:,k) = s_to_abcd([X.s11_t(k,1) X.s21_t(k,1) ;\n\nX.s12_t(k,1) X.s22_t(k,1)],50) ;\n\nX.abcd_gamma_out_total(:,:,k) = X.abcd_fix_and_connec * X.abcd_t(:,:,k)* X.abcd_gamma_out\n;\nX.gamma_out_total(:,:,k) = abcd_to_s(X.abcd_gamma_out_total(:,:,k),50) ;\n\nX.gin(k) = X.gamma_out_total(1,1,k) + (( X.gamma_out_total(1,2,k).* ...\n\n68\n\n\n\nX.gamma_out_total(2,1,k).*X.gpwr_b)...\n./(1? X.gamma_out_total(2,2,k).*X.gpwr_b)) ;\n\nGp_lin(k) = (1/(1?(abs(X.gin(k))^2))).*(abs(X.gamma_out_total(2,1,k).^2).*...\n(( 1? abs(X.gpwr_b).^2) ./ ...\n(abs(1?X.gamma_out_total(2,2,k).*X.gpwr_b).^2))) ;\n\nGp_dB(k) = 10.*log10(Gp_lin(k)) ;\n\nend\n\nclose all ;\nSmithChart(0); plot(sloads,'o'); hold on; plot(X.gin,'*r') ; pause(1) ;\nclose all ;\n\n%% ??????????????????????????????????????????????????????????????????????????????\n% Fast power sweep config %%\n% ???????????????????????????????????????????????????????????????????????????????\ndos( 'start http://10.202.8.222/web.exe?file=FrontPanel.html' );\npause(2) ;\naddpath( '.\\wb_fast_pwr_swp_lps\\' );\n\n%% ??????????????????????????????????????????????????????????????????????????????\n% function fpwr_swp_gan_config_v4 confidential\n% ???????????????????????????????????????????????????????????????????????????????\not_flps = fpwr_swp_gan_config_v4( config,ic_sel_freq,...\n\nfps_lps_signal_fname,Vds,Imax );\n% ???????????????????????????????????????????????????????????????????????????????\n\n%% ??????????????????????????????????????????????????????????????????????????????\n% FPSWP measurements %%\n% ????????????????????????????????????????????????????????????????????????????close all\n;???\n% Header\n\nfilename = strcat(file_out,sprintf('f_%dMHz_GO68.txt',ic_sel_freq*1000) );\nfid = fopen(filename,'w','n','US?ASCII');\nfprintf(fid,'! Load Pull Measurement Data\\n');\nfprintf(fid,'!????????????????????????????????????????????????????????\\n' );\nfprintf(fid,(sprintf('! Frequency = %.3f GHz \\n',ic_sel_freq)) );\nfprintf(fid,'! Char.Impedances = Source: 1 + 0j Ohm Load: 1 + 0j Ohm \\n' );\nfprintf(fid,(sprintf('! Source Frequencies = %.3f GHz \\n',ic_sel_freq)));\nfprintf(fid,'! Source Impedances F0: 1 ? 0j Ohm \\n' );\nfprintf(fid,'!???????????????????????????????????????????????????????? \\n' );\nfprintf(fid,'Point \\t R \\t\\t jX \\t Gain[dB] \\t EffP3dB[%%] \\t' );\nfprintf(fid,'P3dB[dBm] \\t EffP1dB[%%] \\t' );\nfprintf(fid,'P1dB[dBm] \\t Eff47R0dBm[%%]\\t' );\nfprintf(fid,'Eff49R0dBm[%%] \\t Eff50R0dBm[%%]\\n' );\nfprintf(fid,'!????????????????????????????????????????????????????????' );\n\n% ???????????????????????????????????????????????????????????????????????????????\n% Generating the Look?up table for the at the plan of the device power levels %%\n% ???????????????????????????????????????????????????????????????????????????????\nPAInputLoss = 31.33 ;\n\n% ?????????? WARNING THIS UPPER VALUE WAS USED ONLY FOR THE POWER CAL ???????????\not_flps.max = 6.1 ;\n\n% ???????????????????????????????????????????????????????????????????????????????\n\n69\n\n\n\n% Freescale driver\n\nPeakPower = 38.2?3 ;\nSigPAR = 12.27 ;\nPower_cal_corrections = ?36.251496748344728?0.35+5.6 ;\nsteps = [PeakPower?SigPAR]+Power_cal_corrections ;\nOBO_in_pts = 11 ;\n\n% It's a index that decide from10 points\ndB_comp = 3 ;\n\n% use the 10 pts to start the calculation.\nX.Zloads = s_to_z(sloads,50) ;\n\nfor k =1:size(mp_t,1)\not_flps.AvgPower = steps ;\nOutputLosses = ?Gp_dB(k) ;\nMT981EU10_Setup( 'MLibTuners','move_tuner', [ mp_t(k,1) mp_t(k,2) mp_t(k,3)]) ;\npause(0.3) ;\nj = 1 ;\naux_max = 0 ;\nfilename = strcat(file_out3,sprintf(...\n\n'_%.2dMHz_Vgs_%.3fV_Ids_%.3fmA_ZL_%.4f+j_%.4f_Ohm.txt',...\nic_sel_freq*1000,Vgs,Ids,real(X.Zloads(k)),imag(X.Zloads(k))));\n\nmdat_file = fopen(filename,'wt') ;\n\nfprintf(mdat_file, '! FPS Load Pull Measurement Data\\n' );\nfprintf(mdat_file, '!??????????????????????????????????????????????????????\\n');\nfprintf(mdat_file,sprintf('! OutputLosses: %.3d dB \\t PAInputLoss: %.3d dB \\n',...\n\nOutputLosses,PAInputLoss));\nfprintf(mdat_file,'!Efficieny\\tGain[dB]\\tPoutdBm\\tPdc\\tPindBm\\tPinW\\t PoutW\\n');\nfprintf(mdat_file, '!??????????????????????????????????????????????????????\\n');\n\nwhile (aux_max &lt;dB_comp)\not_flps.k = k;\n\n%% ??????????????????????????????????????????????????????????????????????????????\n% function fpwr_swp_gan_fetch_loadconfidential\n% ???????????????????????????????????????????????????????????????????????????????\not_flps_pswp = fpwr_swp_gan_fetch_load(config,ot_flps,PAInputLoss,OutputLosses);\n\n% ???????????????????????????????????????????????????????????????????????????????\nminv = min(ot_flps_pswp.PoutdBm) ;\nmaxv = max(ot_flps_pswp.PoutdBm) ;\n\npout_x = ot_flps_pswp.PoutdBm ;\ngain_y = ot_flps_pswp.Gain_data ;\neff_y = ot_flps_pswp.Eff_data ;\n\npout_xx = minv:0.1:maxv ;\ngain_yy = pchip(pout_x,gain_y,pout_xx) ;\neff_yy = pchip(pout_x,eff_y ,pout_xx) ;\n\nfigure(k); hold on; subplot(2,1,1) ;\nplot( pout_x,gain_y,'?ro' ,pout_xx,gain_yy); grid on ;\n\nsubplot(2,1,2)\nplot( pout_x,eff_y,'?ro' ,pout_xx,eff_yy ); grid on ;\n\nGmax = max(gain_yy) ;\nidx = find( gain_yy == max(gain_yy)) ;\n\n70\n\n\n\nPoutdBm_at_Gmax = pout_xx(idx) ;\nRT.Avgpower = ot_flps.AvgPower ;\nj = j+1 ;\n\nPmin_after_pk = min(gain_yy(idx:end)) ;\ncomp_meas = Gmax ? Pmin_after_pk ;\nRT.Point = k ;\n\nRT.comp_meas = comp_meas ;\nif ot_flps.AvgPower > 5.67\naux_max = 100 ;\n\nend\n\nif comp_meas > dB_comp\naux_max = comp_meas ;\n\nend\n\nif comp_meas&lt;1 &amp;&amp; comp_meas<(dB_comp* 0.8)\not_flps.AvgPower = ot_flps.AvgPower + 1 ;\nRT.inc_step = '+1' ;\n\nend\n\nif comp_meas > (dB_comp* 0.8)\not_flps.AvgPower = ot_flps.AvgPower + 0.1 ;\nRT.inc_step = '+0.1' ;\n\nend\n\nif comp_meas >1 &amp;&amp; comp_meas<(dB_comp* 0.8)\not_flps.AvgPower = ot_flps.AvgPower + 0.5 ;\nRT.inc_step ='+0.5';\n\nend\n\n% ???????????????????????????????????????????????????????????????????????????????\n% Write the file with the load?pull data\n% ???????????????????????????????????????????????????????????????????????????????\nif aux_max > dB_comp\nwr_awr.point = k ;\nwr_awr.R = real(X.Zloads(k) );\nwr_awr.jX = imag(X.Zloads(k) );\n\ndBcomp_find = 1 ;\nidx_1dB_comp = idx + find( (abs(Gmax?gain_yy(idx:end)? dBcomp_find )) ...\n\n== min((abs(Gmax?gain_yy(idx:end)? dBcomp_find ))) ) ?1 ;\n\ndBcomp_find = 3 ;\nidx_3dB_comp = idx + find( (abs(Gmax?gain_yy(idx:end)? dBcomp_find )) ...\n\n== min((abs(Gmax?gain_yy(idx:end)? dBcomp_find ))) ) ?1 ;\n\nwr_awr.gain = pchip(pout_x,gain_y,45) ;\nwr_awr.gain_1dB = gain_yy(idx_1dB_comp) ;\nwr_awr.gain_3dB = gain_yy(idx_3dB_comp) ;\n\nwr_awr.eff_1dB = eff_yy(idx_1dB_comp) ;\nwr_awr.eff_3dB = eff_yy(idx_3dB_comp) ;\n\nwr_awr.P1dB = pout_xx(idx_1dB_comp) ;\nwr_awr.P3dB = pout_xx(idx_3dB_comp) ;\not_flps = f ;\n\n71\n\n\n\n% Set condition around 1dB for extrapolate if the max pout measure goes behond so it' set 0.\nif maxv &lt;47\nwr_awr.eff47ro = 0 ;\nwr_awr.eff49ro = 0 ;\nwr_awr.eff50ro = 0 ;\n\nend\nif maxv > 47\nwr_awr.eff47ro = pchip(pout_x,eff_y,47) ;\nwr_awr.eff49ro = 0 ;\nwr_awr.eff50ro = 0 ;\n\nend\nif maxv > 49\nwr_awr.eff47ro = pchip(pout_x,eff_y,47) ;\nwr_awr.eff49ro = pchip(pout_x,eff_y,49) ;\nwr_awr.eff50ro = 0 ;\n\nend\nif maxv > 50\nwr_awr.eff47ro = pchip(pout_x,eff_y,47) ;\nwr_awr.eff49ro = pchip(pout_x,eff_y,49) ;\nwr_awr.eff50r = pchip(pout_x,eff_y,50) ;\n\nend\nif k&lt;9\nfprintf(fid_awr,sprintf('\\n%i\\t\\t%.4f\\t%.4f\\t%.1f\\t%.1f\\t%.1f\\t%.1f\\t%.1f\\t%.1f\\t%.1f\\t%.1f',...\n\nk,wr_awr.R,wr_awr.jX,wr_awr.gain,wr_awr.eff_3dB,wr_awr.P3dB, ...\nwr_awr.eff_1dB,wr_awr.P1dB,wr_awr.eff47ro,wr_awr.eff49ro,...\nwr_awr.eff50ro ));\n\nelse\nfprintf(fid_awr,sprintf('\\n%i\\t%.4f\\t%.4f\\t%.1f\\t%.1f\\t%.1f\\t%.1f\\t%.1f\\t%.1f\\t%.1f\\t%.1f',...\n\nk,wr_awr.R,wr_awr.jX,wr_awr.gain,wr_awr.eff_3dB,wr_awr.P3dB, ...\nwr_awr.eff_1dB,wr_awr.P1dB,wr_awr.eff47ro,wr_awr.eff49ro,...\nwr_awr.eff50ro ));\n\nend\nend\n% ????????????????????????????????????????????????????????????????????????????????\n% Saving alldata_pts\n%% ???????????????????????????????????????????????????????????????????????????????\nfetch_m = [ot_flps_pswp.Eff ot_flps_pswp.Gain_data ot_flps_pswp.PoutdBm ot_flps_pswp.Pdc' ...\n\not_flps_pswp.PindBm ot_flps_pswp.PinW ot_flps_pswp.PoutW ] ;\nfor idx_w_file=1:size(fetch_m,1)\nfprintf(mdat_file, '%.5f\\t%.5f\\t %.5f\\t %.5f\\t %.5f\\t %.5f\\t %.5f\\n',...\n\nfetch_m(idx_w_file,:) );\nend\nfprintf(mdat_file, '!????????????????????????????????????????????????????????\\n');\nend\nfclose(mdat_file);\n\n%% ??????????????????????????????????????????????????????????????????????????????\n% Saving figures\n%% ??????????????????????????????????????????????????????????????????????????????\nplot = figure(k) ;\nfigure_name = strcat(file_out2,...\n\nprintf('GO68_%.2dMHz_Vgs_%.3fV_Ids_%.3fmA_ZL_%.4f+j%.4f_Ohm.fig',...\nic_sel_freq*1000,Vgs,Ids,real(X.Zloads(k)),imag(X.Zloads(k))));\n\nsaveas(plot,figure_name); clearvars plot; clear 1; close all; clc ;\nend\n%% ???????????????????????????????????????????????????????????????????????????????\n\n72\n\n\n\nAppendix B\n\nMT981EU10_Setup - HUAWEI\n\nThe MATLAB requires an lcc or a equivalent c++ compiler in order to enable the commu-\nnication with the Maury tuner (MT981EU) performed through a DLL. In addition, it is also\nnecessary to add a piece of code to the ?le named 'MLibTuners.h',as shown in the following:\n\n// At the begin\n#ifdef __cplusplus\nextern \"C\" {\n\n#endif\n\n...\n\n// At the end\n#ifdef __cplusplus\n}\n\n#endif\n\nfunction [ocr_data] = MT981EU10_Setup(current,cmd,val)\n%MT981EU10_SETUP Control routine\nswitch lower(cmd)\n%% ????????????????????? First step load tuner library ??????????????????????????\ncase 'load_libraries'\nflag = libisloaded('MLibTuners' );\n\nif flag == 0\naddpath('C:\\Program Files (x86)\\Maury\\MLibV04\\' );\nloadlibrary('MLibTuners','MLibTuners.h' );\n\nocr_data = 1;\nend\n\ncase 'show_functions'\nlibfuncions('MLibTuners');\nocr_data = 1 ;\n\ncase 'view_all_func'\nlibfunctions('MLibTuners);\nocr_data = 1 ;\n\n%???????????????????????????????????????????????????????????????????????????????\n[current,ctrl_exe,model,error] = calllib('MLibTuners','add_controller',0,...\n\nTunHubMech','MT981EU10',250,11,0,3170,...\n\n73\n\n\n\n'error' );\n[current,model,num_axis,tun_step_limits,...\nfmin,fmax,freq_to_change_probe] = calllib('MLibTuners','add_tuner',0,'MT981EU10',...\n\n3170,0,1,3,[0 0 0],0,0,0,...\n'error' );\n\nocr_data = [current,ctrl_exe,model,error,...\ncurrent,model,num_axis,tun_step_limits,fmin,fmax,...\nfreq_to_change_probe] ;\n\ncase 'init'\nocr_data = calllib('MLibTuners','init_tuners','error' );\n\ncase 'get_tuner_pos'\n[flag,carr,p1,p2,error] = calllib(current,'get_tuner_position',0,0,0,0,'error');\n\nocr_data.flag = flag ;\nocr_data.carr = carr ;\nocr_data.p1 = p1 ;\nocr_data.p2 = p2 ;\nocr_data.error = error ;\n\ncase 'get_tuner_refl_data'\n\ns11_x = 0; s21_x = 0; s12_x = 0; s22_x = 0 ;\ns11_y = 0; s21_y = 0; s12_y = 0; s22_y = 0 ;\n\n[tuner_number,carr,p1,p2,s11_x, ...\ns11_y,s21_x,s21_y,s12_x,s12_y, ...\ns22_x,s22_y,error] = calllib(current,'get_tuner_refl_data',\n\nval.tuner_number,val.interp_mode,\nval.freq,\nval.gamma_x_termination,\nval.gamma_y_termination, ...\n\nval.gamma_x,val.gamma_y,9500,9500,9500,\ns11_x,s11_y,\ns21_x,s21_y,\ns12_x,s12_y,\ns22_x,s22_y, 'error' );\n\nocr_data.tuner_number = tuner_number ;\nocr_data.carr = carr ;\nocr_data.p1 = p1 ;\nocr_data.p2 = p2 ;\nocr_data.error = error ;\nocr_data.s11 = s11_x + 1i.*s11_y ;\nocr_data.s21 = s21_x + 1i.*s21_y ;\nocr_data.s12 = s12_x + 1i.*s12_y ;\nocr_data.s22 = s22_x + 1i.*s22_y ;\n\ncase 'free_tuner_data'\n[ocr_data.error] = calllib(current,'free_tuner_data',val.tuner_number) ;\n\ncase 'move_tuner'\n[flag,error] = calllib(current,'move_tuner',0,.val(1),val(2),val(3),...\n\n'error' );\nocr_data = [flag,error] ;\n\ncase 'get_tuner_refl_posn'\n[tuner_number,carr,p1,p2,error] = calllib(current,'get_tuner_refl_posn',\n\nval.tuner_number, val.interp_mode,val.freq,...\nval.gamma_x_termination,...\n\nval.gamma_y_termination,\n\n74\n\n\n\nval.gamma_x,val.gamma_y, 9500,9500,9500,\n'error' );\n\nocr_data.tuner_number = tuner_number ;\nocr_data.carr = carr ;\nocr_data.p1 = p1 ;\nocr_data.p2 = p2 ;\nocr_data.error = error ;\n\ncase 'read_tuner_data_file'\n[tuner_number,fname,tuner_model,error] = calllib(current,'read_tuner_data_file',\n\nval.tuner_number,val.fname,\nval.tuner_model,'error' );\n\nocr_data.tuner_number= tuner_number ;\nocr_data.tuner_model = tuner_model ;\nocr_data.fname = fname ;\nocr_data.error = error ;\n\ncase 'get_tuner_position_mode'\n[tuner_number,mode,error] = calllib(current,'get_tuner_position_mode',\n\nval.tuner_number,val.freq, val.mec(1),...\nval.mec(2),val.mec(3),val.interp_mode,...\n'error' );\n\nocr_data.tuner_number = tuner_number ;\nocr_data.mode = mode ;\nocr_data.error = error ;\n\nend\n\n75\n\n\n\nAppendix C\n\nGaN Load-Pull - Target impedances\n\nThe following table C.1 shows the used target impedances in the characterization of the\nGaN microwave transistor.\n\nTable C.1: Target impedances of the used microwave transistor.\n\n76\n\n\n\nAppendix D\n\n3-port to 2-port network conversion\n\nD.1 LPS - Output Network\n\nIn this work the placed spectrum/time-domain analyzer at output network of the built\nload-pull system is only used to monitor the waveform of the incoming signal read by the\npower meter. For the absolute power calibration, only a 2-port network between the DUT\nand the power sensor is necessary to determine the Pout at the microwave transistor reference\nplane.\n\nFigure D.1: Conversion of a 3-port network to 2-port network.\n\nTo convert a 3-port into a 2-port network, it is only necessary to known the s3p-parameters\nof the output network and the re?ection coe?cient, ?3, of time-domain/spectrum analyzer,\nthat is given by the following equations:?\n\n?b1b2\nb3\n\n?\n? =\n\n?\n?S11 S12 S13S21 S22 S23\nS31 S32 S33\n\n?\n?\n?\n?a1a2\na3\n\n?\n? (D.1)\n\nand\n\n?3 =\na3\nb3\n\n(D.2)\n\nAs a result of the 3-port simpli?cation, the 2-port network is given by:\n\n[\nb1\nb2\n\n]\n=\n\n?\n?S11 + S13S31?31?S33?3 S12 + S13S32?31?S33?3\nS21 +\n\nS31S23?3\n1?S33?3 S22 +\n\nS23S32?3\n1?S33?3\n\n?\n?\n?\n?a1\na2\n\n?\n? (D.3)\n\n77\n\n\n\nD.2 LPS - Input Network\n\nTo convert a 3-port into a 2-port network, it is only necessary to know the s3p-parameters\nof the input network and the re?ection coe?cient of the power sensor A. Thus based on the\ndiagram of the Fig. D.2 and the following equations a new s2p-parameters are obtained.\n\nFigure D.2: Conversion from 3-port to 2-port s-parameters of the input network.\n\n?\n?b1b2\nb3\n\n?\n? =\n\n?\n?S11 S12 S13S21 S22 S23\nS31 S32 S33\n\n?\n?\n?\n?a1a2\na3\n\n?\n? (D.4)\n\nand\n\n?pwrA =\na3\nb3\n\n(D.5)\n\n,where ?pwrA represents the power sensor A placed at the input network used to assists the\ncharacterization of the device measuring the uncorrected power that is being injected to the\nDUT.\n\n[\nb2\nb3\n\n]\n=\n\n?\n??S22 + S21S12?pwrA1?S11?pwrA S23 + S21S13?pwrA1?S11?pwrA\nS32 +\n\nS12S31?pwrA\n1?S11?pwrA\n\nS33 +\nS31S13?pwrA\n1?S11?pwrA\n\n?\n??\n?\n??a1\na2\n\n?\n?? (D.6)\n\n78\n\n\n\nCopyright ? 2012 Maury Microwave Inc., all rights reserved.\n\n2900 Inland Empire Blvd.  \u2022  Ontario, California  91764-4804\nTel:  909-987-4715  \u2022  Fax: 909-987-1112  \u2022    http://www.maurymw.com\n\nC O R P O R A T I O N\n\nM A U R Y  M I C R O W AV E\n\nSPECIFICATIONS SUBJECT TO CHANGE WITHOUT NOTICE\n\nHIGH-POWER AUTOMATED TUNERS\n0.25 TO 8.0 GHz\n\nt e c h n i c a l  d a t a   \n\nPage 1 of 2\n\nSeries\nMT981xU\n\nJanuary 2012\n\nFeatures\n\u2022  Optimized for GSM/EDGE, WCDMA, WiFi, and \n\nWiMax In-Fixture and On-Wafer Applications\n\n\u2022  High Matching Range for GaN, GaAs,   \nLDMOS, and Si Characterization\n\n\u2022  Simultaneous High-Matching and Low Vibration \nfor On-Wafer Applications\n\n\u2022 USB Interface for Simple, Fast and Reliable \nControl\n\n\u2022  DLL Environment for Automated Applications\n\n\u2022  Industry's Highest Accuracy Means Your Designs \nWork Right the First Time\n\n\u2022  Industry's Best Calibration Frees Your Time for \nDesign\n\n4 T- 0 7 1 A\n\nApplications and Benefits Overview\nThe MT981 series automated tuners are optimized for \nhigh power in-fixture and on-wafer applications requiring \nlow impedance and low vibration simultaneously. Based \non Maury's proven non-contacting probe technology, \nthese high-performance tuners evolve beyond outdated \ncontacting probe technology to deliver high VSWR with \nsuperb accuracy and reliability. \n\nAn integral component of Maury Device Characterization \nSolutions, these USB-interfaced automated tuners are \ncontrolled using one of three Maury Software Solutions; \nMaury\u2019s MT930 series IVCAD Advanced Measurement \nand Modeling Software; Maury\u2019s Device Characterization \nSoftware suite (ATS version 5 or later); or Maury\u2019s DLL \nenvironment.\n\nThe MT930 IVCAD software suite is the most advanced \nmeasurement and modeling software in the industry, \nwith support for multiple load pull techniques including \ntraditional load pull using external instrumentation, VNA-\nbased load pull, active load pull and hybrid load pull.\n\nThe ATS software is an integrated device character-\nization suite providing front-end and back-end \n\nTrademarks shown above are the property of their respective owners.\n\ndevice characterization tools for power and noise \ncharacterization.\n\nThe DLL environment enables direct interface with common \nprogramming tools such as Agilent VEE\u2122, NI LabVIEW\u2122, \nMS Visual Basic &amp; C/C++, and Mathworks MATLAB\u2122.\n\nWith a tuning resolution in excess of a million impedance \npoints and accuracy better than -50 dB over the entire \nSmith chart, Maury automated tuners give you the device \ncharacterization answers you need with the accuracy \nnecessary to make engineering decisions with confidence. \nTypical applications include load pull using CW, GSM/\nEDGE, CDMA, WCDMA, WiMax, and WiFi stimulus for \nmobile and infrastructure terminal design, RADAR design, \nand Sat-Com design.\n\nController\nFor optimum performance, the MT1020B ATS Power \nDistribution Hub can be used to control up to four (4) \nMT981xU series tuners. Additionally, the MT1020D \nDesktop Switching Power Supply can be used to provide \npower to a single MT981xU series tuner.  \n\nMT981BU10\n7mm High-Power Automated Tuner\n\n\n\nSPECIFICATIONS SUBJECT TO CHANGE WITHOUT NOTICE \n\n2900 Inland Empire Blvd.  \u2022  Ontario, California  91764-4804\nTel:  909-987-4715  \u2022  Fax: 909-987-1112  \u2022    http://www.maurymw.com\n\nt e c h n i c a l  d a t a   4 T- 0 7 1 A\n\nPage 2 of 2\n\nJanuary 2012\n\nDimensions \u2013 Inches and [cm]\n\nSpecifications\nFrequency Range  .............. See Available Models Table\n\nVSWR Matching Range ....  See Available Models Table\n\nStep Size (Probes)  ..............................62.5 microinches1\n\nStep Size (Carriage)   ........................... 786 microinches1\n\nConnectors:  .......................................... Precision 7mm2\n\n1 Based on 1/2 stepping the drive motors.\n2 Precision 7mm per Maury data sheet 5E-060.\n3 Defined as the minimum VSWR within 70% of the frequency range.\n\n4 Power rated at maximum VSWR.\n5 With probes fully retracted.\n\nAccessories Provided\nOne (1) MT1020D controller, one (1) USB cable and one \n(1) operating manual.\n\nAvailable Models\n\nRecommended Accessories\n2698C2 7mm (3/4-in. hex) torque wrench\n\nA028D 7mm connector gage kit\n\n8022S 7mm to 3.5mm (female) precision adapter\n\n8022T 7mm to 3.5mm (male) precision adapter\n\nModel\nFrequency \n\nRange\n(GHz)\n\nMatching Range Power\nCapability4\n\nVector\nRepeatability\n(Minimum)\n\nVSWR5\nInsertion\n\nLoss5\n\nDimensions\n12.0\" [30.5 cm]\n10.0\" [25.4 cm]Minimum Typical\n\n3\n\nMT981AU11 0.25 \u2013 2.5 15:1 25:1\n\n250 W CW\n2.5 kW PEP\n\n\u201350 dB\n\n1.05:1 0.3 dB\n\n36.9\" [93.5 cm]\n\nMT981BU15 0.40 \u2013 2.5 30:1 45:1\n\n23.0\" [58.6 cm]\nMT981BU10 0.40 \u2013 4.0 15:1 25:1\n\nMT981BU18 0.40 \u2013 8.0 10:1 25:1 \u201340 dB\n\nMT981WU10 0.60 \u2013 6.0 15:1 25:1\n\u201350 dB\n\nMT981EU10 0.80 \u2013 8.0 15:1 30:1 15.9\" [40.3 cm]\n\nDUT Port\n\n10.25 [26.04]\n\n7.14 [18.13] 0.58 [1.47]7.61 [19.34]\n\n12.14 [30.83]\nMax\n\nMating Surfaces\n(See Available Models Table)\n\n 4.8 [12.19]\n 2.9 [  7.30]\n\n9.37 [23.79]\n\n2.00 [5.08]\n\nFront View Side View\n\n\n\tContents\n\tList of Figures\n\tList of Tables\n\tAcronyms\n\tIntroduction\n\tMotivation\n\tObjectives\n\tOrganization and structure\n\n\tLoad-Pull Systems\n\tIntroduction\n\tFigures of Merit (FoM)\n\tLoad-pull measurements: Traditional, VNA and Six-Port.\n\tLoad-pull techniques: Passive, Active and Hybrid\n\tComparison of the different kinds of load-pull setups\n\tReflection coefficient enhancement techniques\n\n\tDesign and implementation of an automated tuner-based load-pull system\n\tIntroduction\n\tDiagram of the automated load-pull system\n\tSystem description\n\tCharacterization of the load-pull system\n\tCharacterization of the system components\n\tCharacterization of tuner\n\tMATLAB routines\n\tAutomated load-pull system verification\n\n\tConclusion and Future Work\n\tConclusion\n\tFuture work\n\n\tBibliography\n\tMATLAB Routines\n\tPre-Characterization\n\tPower Calibration\n\tLoad-Pull Measurements\n\n\tMT981EU10_Setup - HUAWEI\n\tGaN Load-Pull - Target impedances\n\t3-port to 2-port network conversion\n\tLPS - Output Network\n\tLPS - Input Network"}]}}}