{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.06119"}, {"@name": "filename", "#text": "10631_7500.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "Departamento de\nUniversidade de Aveiro Electr\u00f3nica, Telecomunica\u00e7\u00f5es e Inform\u00e1tica\nDiogo Rafael Castanheira Santos Soares\nUm ambiente para a integra\u00e7\u00e3o de dados de prescri\u00e7\u00e3o eletr\u00f3nica\nDepartamento de\nli! Universidade de Aveiro Electr\u00f3nica, Telecomunica\u00e7\u00f5es e Inform\u00e1tica\n\u25a1 2012\nDiogo Rafael Castanheira Santos Soares\nUm ambiente para a integra\u00e7\u00e3o de dados de prescri\u00e7\u00e3o eletr\u00f3nica\nDisserta\u00e7\u00e3o apresentada \u00e0 Universidade de Aveiro para cumprimento dos requisitos necess\u00e1rios \u00e0 obten\u00e7\u00e3o do grau de Mestre em Engenharia de Computadores e Telem\u00e1tica (M.I.E.C.T.), realizada sob a orienta\u00e7\u00e3o cient\u00edfica do Professor Doutor Jo\u00e3o Paulo Trigueiros da Silva Cunha, Professor Associado com Agrega\u00e7\u00e3o do Departamento de Engenharia Eletrot\u00e9cnica e de Computadores da Faculdade de Engenharia da Universidade do Porto e do Mestre Il\u00eddio Fernando de Castro Oliveira, Professor Assistente Convidado do Departamento de Eletr\u00f3nica, Telecomunica\u00e7\u00f5es e Inform\u00e1tica da Universidade de Aveiro\no j\u00fari/thejury\npresidente / president\tProfessora Doutora Maria Beatriz Alves de Sousa Santos Professora Associada com Agrega\u00e7\u00e3o da Universidade de Aveiro\nvogais / examiners committee\tDoutora Liliana da Silva Ferreira Investigadora S\u00e9nior, Instituto Fraunhofer - Portugal (Arguente Principal) Prof. Doutor Jo\u00e3o Paulo Trigueiros da Silva Cunha Professor Associado com Agrega\u00e7\u00e3o do Departamento de Engenharia Eletrot\u00e9cnica e de Computadores da Faculdade de Engenharia da Universidade do Porto (orientador) Mestre Il\u00eddio Fernando de Castro Oliveira Professor Assistente Convidado do Departamento de Eletr\u00f3nica, Telecomunica\u00e7\u00f5es e Inform\u00e1tica da Universidade de Aveiro (co-orientador)\nagradecimentos / acknowledgements\tAgrade\u00e7o \u00e0 minha fam\u00edlia pelo apoio que sempre me deram, por me terem proporcionado todas as condi\u00e7\u00f5es que me possibilitaram a obten\u00e7\u00e3o de uma forma\u00e7\u00e3o acad\u00e9mica. \u00c0 Mestre L\u00facia Mota, pelo apoio e disponibilidade ao longo de todo o projeto. Ao Prof. Il\u00eddio Oliveira e ao Prof. Jo\u00e3o Paulo Cunha, pelo apoio e disponibilidade fulcrais \u00e0 elabora\u00e7\u00e3o deste trabalho.\nPalavras-chave\tEngenharia de software, sistemas de informa\u00e7\u00e3o, portais web, e-Sa\u00fade, prescri\u00e7\u00e3o eletr\u00f3nica, resumo cl\u00ednico do utente\nResumo\tHoje em dia n\u00e3o \u00e9 poss\u00edvel, no sistema de sa\u00fade portugu\u00eas, ter uma vis\u00e3o integrada da prescri\u00e7\u00e3o de medicamentos de um utente. O hist\u00f3rico da medica\u00e7\u00e3o, por si s\u00f3, pode dar a um profissional cl\u00ednico as pistas suficientes para aferir o contexto cl\u00ednico de um utente que observa pela primeira vez ou num contacto de emerg\u00eancia, por exemplo. Este tipo de informa\u00e7\u00e3o \u00e9 frequentemente inclu\u00eddo em iniciativas de redes de partilha de sum\u00e1rios cl\u00ednicos, como \u00e9 o caso do projeto epSOS, visando a transmiss\u00e3o transfronteiri\u00e7a de informa\u00e7\u00e3o cl\u00ednica essencial dos utentes, atendidos num pa\u00eds diferente daquele em que recebem cuidados habitualmente. A Rede Telem\u00e1tica da Sa\u00fade (RTS) \u00e9 uma plataforma eletr\u00f3nica que permite a agrega\u00e7\u00e3o de informa\u00e7\u00e3o cl\u00ednica dos utentes, de forma controlada. \u00c9 poss\u00edvel, nesta plataforma, obter uma lista de epis\u00f3dios de tratamento para um utente e, a partir de cada um, procurar informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos. Paralelamente, no contexto da iniciativa nacional para prescri\u00e7\u00e3o eletr\u00f3nica, existe j\u00e1 um reposit\u00f3rio de prescri\u00e7\u00f5es (mais especificamente, receitas aviadas) de \u00e2mbito nacional. Este reposit\u00f3rio n\u00e3o inclui, contudo, algumas prescri\u00e7\u00f5es resultantes de epis\u00f3dios de tratamento de agudos. No \u00e2mbito deste trabalho, propomos uma extens\u00e3o \u00e0 RTS, proporcionando uma vista orientada \u00e0s prescri\u00e7\u00f5es. O profissional cl\u00ednico tem, nesta vista, uma agrega\u00e7\u00e3o das prescri\u00e7\u00f5es encontradas em v\u00e1rias institui\u00e7\u00f5es (que participam na RTS) e no reposit\u00f3rio nacional (cuja integra\u00e7\u00e3o foi simulada). Adicionalmente, implementamos os m\u00e9todos necess\u00e1rios para exportar a vista agregada de prescri\u00e7\u00f5es no formato esperado na rede de interoperabilidade do epSOS, segundo as especifica\u00e7\u00f5es p\u00fablicas dispon\u00edveis.\nKeywords\tSoftware engineering, information systems, web portals, e-Health, eprescribing, clinical summary\nAbstract\tNowadays, in the Portuguese health care system, it is not possible to have an integrated view of drugs prescribed to a patient. The history of the medication, by itself, can provide to a health care professional enough clues to evaluate the clinical context of a patient who is observed in a first emergency contact, for example. This type of information is often included in networking initiatives for clinical summary sharing, as in the epSOS project, aiming at crossborder transmission of patient's essential clinical information, receiving care in a country other than the one where he/she usually receives care. The Health Telematic Network RTS is an electronic platform that allows the aggregation of patient clinical information in a controlled manner. It is possible, in this platform, to obtain a list of episodes of treatment to a patient and, from each episode search prescribed medication. Meanwhile, in the context of the portuguese national initiative for electronic prescribing, there is already a repository of prescriptions (more specifically, prescriptions dispensed) nationwide. This repository does not include, however, some prescriptions resulting from treatment of acute episodes. In this work, we propose an extension to the RTS, providing a view oriented to the medication. The medical professional has, in this view, an aggregation of the prescriptions found in several institutions (involved in RTS) and the national repository (which integration was simulated). Additionally, we have implemented the necessary methods to export the aggregated view of prescriptions in the expected format of the epSOS interoperability network, according to public available specifications.\nConte\u00fados\n1\tIntrodu\u00e7\u00e3o...................................................................1\n1.1\tMotiva\u00e7\u00e3o e contextualiza\u00e7\u00e3o......................................1\n1.2\tObjetivos.........................................................2\n1.3\tEstrutura da Disserta\u00e7\u00e3o..........................................3\n2\tRevis\u00e3o do Estado da Arte....................................................5\n2.1\tUtiliza\u00e7\u00e3o das tecnologias de informa\u00e7\u00e3o em\tsa\u00fade.................5\n2.2\tImplementa\u00e7\u00e3o da prescri\u00e7\u00e3o eletr\u00f3nica\tem Portugal................6\n2.2.1\tCarateriza\u00e7\u00e3o funcional de um sistema de prescri\u00e7\u00e3o eletr\u00f3nica 7\n2.2.2\tVis\u00e3o geral do processo de prescri\u00e7\u00e3o eletr\u00f3nica...............8\n2.2.3\tA Base de Dados Nacional de Prescri\u00e7\u00f5es.......................9\n2.3\tRedes e tecnologias para a troca de informa\u00e7\u00e3o em sa\u00fade..........10\n2.3.1\tO projeto RTS (Rede Telem\u00e1tica de Sa\u00fade).....................10\n2.3.2\tO projeto epSOS..............................................11\n2.3.3\tO papel do HL7 na comunica\u00e7\u00e3o cl\u00ednica........................12\n2.3.4\tBibliotecas para o tratamento de informa\u00e7\u00e3o de sa\u00fade.........13\n2.4\tTecnologias para o desenvolvimento de portais....................14\n2.4.1\tO modelo J2EE................................................14\n2.4.2\tTransporte baseado em XML....................................16\n3\tCasos de utiliza\u00e7\u00e3o suportados na agrega\u00e7\u00e3o de informa\u00e7\u00e3o de prescri\u00e7\u00e3o de\nmedicamentos ....................................................................19\n4\tArquitetura de Sistema......................................................23\n4.1\tVis\u00e3o geral da solu\u00e7\u00e3o ..........................................23\n4.2\tSem\u00e2ntica da informa\u00e7\u00e3o..........................................26\n4.3\tIntegra\u00e7\u00e3o com a RTS.............................................29\n4.4\tIntegra\u00e7\u00e3o com a BDNP (simulador)................................30\n5\tImplementa\u00e7\u00e3o...............................................................33\n5.1\tServi\u00e7os implementados............................................33\n5.1.1\tWS Prescriptions.............................................33\n5.1.2\tBDNP (Base de Dados Nacional de Prescri\u00e7\u00f5es) simulador.......35\n5.2\tIncrementos \u00e0 RTS.................................................37\n5.3\tExporta\u00e7\u00e3o de prescri\u00e7\u00f5es no formato epSOS........................40\n6\tConclus\u00f5es.................................................................45\n6.1\tResultados........................................................45\n6.2\tTrabalho Futuro...................................................46\n7\tRefer\u00eancias................................................................47\nLista de Figuras\nFigura 1 - Ciclo da Prescri\u00e7\u00e3o Eletr\u00f3nica e M\u00e9todos Complementares de Diagn\u00f3stico e Terap\u00eauticas [11]...................................................................7\nFigura 2 - Fluxo de informa\u00e7\u00e3o orientada ao projeto MDHT [30]......................13\nFigura 3 - Modelo J2EE [32]........................................................15\nFigura 4 - RTS a agregar informa\u00e7\u00e3o das unidades de sa\u00fade que a comp\u00f5e mais o reposit\u00f3rio nacional de prescri\u00e7\u00f5es................................................19\nFigura 5 - Casos de uso............................................................20\nFigura 6 - Entidades envolvidas na obten\u00e7\u00e3o de informa\u00e7\u00e3o de pacientes e epis\u00f3dios no atual modelo da RTS................................................................25\nFigura 7 - Vis\u00e3o geral da solu\u00e7\u00e3o apresentada......................................25\nFigura 8 - Troca de Mensagens entre o WS Prescriptions e o simulador da BDNP.......26\nFigura 9 - Estruturas de dados a retornar pelo servidor............................26\nFigura 10 - Estrutura de uma Receita...............................................27\nFigura 11 - Modelo de dados que representa um epis\u00f3dio na\tRTS...................28\nFigura 12 - Modelo de dados que representa uma carta de alta de um epis\u00f3dio........28\nFigura 13 - Modelo de dados de uma Prescri\u00e7\u00e3o na RTS...............................29\nFigura 14 - Diagrama de Sequencia que ilustra a obten\u00e7\u00e3o de dados por parte do WS Prescriptions......................................................................31\nFigura 15 - Pesquisar um utente no servidor na interface Web da BDNP...............36\nFigura 16 - P\u00e1gina com todas as prescri\u00e7\u00f5es associadas ao utente...................36\nFigura 17 - P\u00e1gina para adicionar prescri\u00e7\u00f5es......................................37\nFigura 18 - Novo campo para aceder ao historial de medica\u00e7\u00e3o do utente.............38\nFigura 19 - Vista de medicamentos prescritos em grelha (grid)......................38\nFigura 20 - Janela do prontu\u00e1rio terap\u00eautico, aberta ap\u00f3s clique no nome do medicamento........................................................................39\nFigura 21 - Bot\u00f5es para alternar entre as vistas de grid e timeline................39\nFigura 22 - Vista em cronologia de medicamentos prescritos.........................40\nFigura 23 - Informa\u00e7\u00e3o de um medicamento no documento cl\u00ednico......................41\nFigura 24 - Exportar medicamentos no formato epSOS, exemplifica\u00e7\u00e3o.................41\nFigura 25 - Receita no formato epSOS...............................................42\nFigura 26 - Valida\u00e7\u00e3o do CDA com o epSOS - ePrescription - Friendly Schematron.....43\nFigura 27 - Valida\u00e7\u00e3o do CDA com o epSOS - ePrescription - Pivot Schematron........43\niv\nLista de Tabelas\nTabela 1 - Servi\u00e7os Desenvolvidos...........................................33\nTabela 2 - M\u00e9todos implementados pelo WS das prescri\u00e7\u00f5es....................34\nTabela 3 - M\u00e9todos implementados pelo WebService da BDNP....................35\nvi\nLista de Acr\u00f3nimos\nACSS\tAdministra\u00e7\u00e3o Central do Sistema de Sa\u00fade\nANSI\tAmerican National Standards Institute\nAPI\tAplication Programming Interface\nATC\tAnatomical Therapeutic Chemical\nBDNP\tBase de Dados Nacional de Prescri\u00e7\u00f5es\nCCF\tCentro de Confer\u00eancia de Faturas\nCDA\tClinical Document Architecture\nDOM\tDocument Object Model\nEHR\tElectronic Health Record\nEJB\tEnterprise java Beans\nepSOS\tSmart Open Services for European Patients\nHL7\tHealth Level 7\nHTML\tHyperText Markup Language\nHTTP\tHypertext Transfer Protocol\nIEETA\tInstituto de Engenharia Eletr\u00f3nica e Telem\u00e1tica de Aveiro\nIHE\tIntegrating the Healthcare Enterprise\nIIOP\tInternet Inter-Orb Protocol\nJAXP\tJava API for XML Processing\nJ2EE\tJava Enterprise Edition\nJ2SE\tJava Platform Standard Edition\nJDBC\tJava Database Connectivity\nJMS\tJava Message Service\nJNDI\tJava Naming and Directory Interface\nJPA\tJava Persistence API\nJSP\tJava Server Pages\nJTA\tJava Transaction\nOHT\tOpen-Health-Tools\nPCER\tProcesso Cl\u00ednico Eletr\u00f3nico Resumido\nPEM\tPrescri\u00e7\u00e3o Eletr\u00f3nica de Medicamentos\nMCDT\tMeio Complementar de Diagn\u00f3stico Terap\u00eautico\nMDHT\tModel-Driven Health Tools\nNCP\tNational Contact Point\nRIM\tReference Information Model\nRMI\tRemote Method Invocation\nRNIS\tRede Nacional de Informa\u00e7\u00e3o de Sa\u00fade\nRSE\tRegisto de Sa\u00fade Eletr\u00f3nico\nRTS\tRede Telem\u00e1tica de Sa\u00fade\nSNS\tServi\u00e7o Nacional de Sa\u00fade\nTIC\tTecnologias de Informa\u00e7\u00e3o e Comunica\u00e7\u00e3o\nSOA\tService-Oriented Architecture\nSOAP\tSimple Object Access Protocol\nSSL\tSecure Shell\nUML\tUnified Modeling Language\nW3C\tWorld Wide Web Consortium\nWS\tWeb Service\nWSDL\tWeb Service Definition Language\nXML\teXtensible Markup Language\n1\tIntrodu\u00e7\u00e3o\n1.1\tMotiva\u00e7\u00e3o e contextual iza\u00e7\u00e3o\nHoje em dia, \u00e9 importante que um profissional de sa\u00fade possa em qualquer lugar onde se encontre ter a possibilidade de aceder ao processo cl\u00ednico de um determinado paciente. Esta necessidade de ter acesso a informa\u00e7\u00e3o de qualidade disponibilizada de forma simples, uniforme e segura, vem revelar a import\u00e2ncia da exist\u00eancia de um sistema eletr\u00f3nico de acesso a dados de sa\u00fade, dispon\u00edvel a profissionais e entidades do sistema de sa\u00fade.\nA aplica\u00e7\u00e3o de Tecnologia de Informa\u00e7\u00e3o em Sa\u00fade, genericamente designada por e-Sa\u00fade, tem como por finalidade tornar os sistemas de sa\u00fade mais eficientes. A ado\u00e7\u00e3o de um Electronic Health Record (EHR) ou Registo de Sa\u00fade Eletr\u00f3nico (RSE), seria desej\u00e1vel com o intuito de melhorar o acesso dos utentes aos servi\u00e7os de sa\u00fade e elevar os n\u00edveis de qualidade e a celeridade dos servi\u00e7os prestados, assim como reduzir significativamente o risco de erros advindos da falta da informa\u00e7\u00e3o indispens\u00e1vel ao profissional no momento e no local da decis\u00e3o cl\u00ednica, bem como diminuir o tempo necess\u00e1rio \u00e0 disponibiliza\u00e7\u00e3o de relat\u00f3rios cl\u00ednicos e laboratoriais com a integra\u00e7\u00e3o no sistema das entidades produtoras de Meios Complementares de Diagn\u00f3stico e Terap\u00eauticas (MCDT), tamb\u00e9m promoveria uma redu\u00e7\u00e3o de custos, evitando a replica\u00e7\u00e3o de esfor\u00e7os e recursos, e melhorar de forma significativa os indicadores de gest\u00e3o [1].\nOutra das express\u00f5es desta digitaliza\u00e7\u00e3o da sa\u00fade foi a Prescri\u00e7\u00e3o de Medicamentos, que tamb\u00e9m passou a ser digital. A Prescri\u00e7\u00e3o Eletr\u00f3nica de Medicamentos (PEM) \u00e9 vista como um est\u00edmulo \u00e0 comunica\u00e7\u00e3o entre os profissionais das diferentes institui\u00e7\u00f5es. Diminui o risco de erro ou confus\u00e3o na prescri\u00e7\u00e3o, facilita a auditoria da venda de medicamentos e refor\u00e7a a capacidade do Minist\u00e9rio da Sa\u00fade de combater a fraude no circuito do medicamento [2].\nNo entanto, em Portugal, at\u00e9 ao momento, \u00e9 apenas poss\u00edvel a profissionais de sa\u00fade submeter a prescri\u00e7\u00e3o eletronicamente, e consultar alguma informa\u00e7\u00e3o de prescri\u00e7\u00e3o medicamentos prescritos para um utente, contudo essa informa\u00e7\u00e3o \u00e9 incompleta n\u00e3o existe uma interface que permita ao utilizador consultar informa\u00e7\u00e3o agregada de prescri\u00e7\u00e3o de medicamentos a partir de diferentes fontes. Nesta disserta\u00e7\u00e3o\nabordaremos esse cen\u00e1rio, pois um diagn\u00f3stico m\u00e9dico correto implica que o m\u00e9dico tenha em conta o hist\u00f3rico de f\u00e1rmacos prescritos ao utente.\nOs dados utilizados na presta\u00e7\u00e3o de servi\u00e7os de cuidados de sa\u00fade est\u00e3o dispersos nos mais variados recursos de informa\u00e7\u00e3o (Bases de Dados e outro tipo de documentos). Os sistemas modernos s\u00e3o distribu\u00eddos e altamente heterog\u00e9neos, isto implica que cada vez que sempre que houver integra\u00e7\u00e3o dados de diferentes fontes seja necess\u00e1rio aplicar procedimentos de compatibiliza\u00e7\u00e3o desses mesmos dados [3].\nNeste trabalho vamos ter como base a Rede Telem\u00e1tica de Sa\u00fade [4] [5], uma plataforma de agrega\u00e7\u00e3o e uniformiza\u00e7\u00e3o de dados cl\u00ednicos e implementar nessa plataforma um cen\u00e1rio de extra\u00e7\u00e3o e agrega\u00e7\u00e3o de informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos, assim como o tratamento desses mesmos dados para que possam ser trocados com outras entidades de presta\u00e7\u00e3o de cuidados de sa\u00fade. At\u00e9 ao momento, n\u00e3o existe nenhuma aplica\u00e7\u00e3o ou sistema que disponibilize uma vista agregada de informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos de forma generalizada e, nesse contexto, propomos um sistema que contemple essa utilidade de forma a permitir uma melhor presta\u00e7\u00e3o de cuidados de sa\u00fade a um utente num primeiro contacto.\n1.2\tObjetivos\nEsta disserta\u00e7\u00e3o tem como objetivo o desenvolvimento de servi\u00e7os de extra\u00e7\u00e3o e agrega\u00e7\u00e3o de informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos dispon\u00edvel em sistemas de informa\u00e7\u00e3o cl\u00ednicos e a sua apresenta\u00e7\u00e3o consolidada aos profissionais. Para isso, pretende-se utilizar a Rede Telem\u00e1tica da Sa\u00fade (RTS) como caso de estudo, suplementando os processos existentes com novas capacidades para obter e apresentar a informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos.\nAdicionalmente pretende-se a implementa\u00e7\u00e3o de m\u00e9todos de transforma\u00e7\u00e3o de dados de prescri\u00e7\u00e3o para o formato de dados da rede epSOS de acordo com as especifica\u00e7\u00f5es p\u00fablicas dispon\u00edveis [6].\nO principal resultado ser\u00e1 uma extens\u00e3o do ambiente de explora\u00e7\u00e3o da RTS, apresentando uma nova perspetiva que permita aos profissionais de sa\u00fade, aquando da presta\u00e7\u00e3o de cuidados m\u00e9dicos a um utente, ter acesso a informa\u00e7\u00e3o de medicamentos prescritos a esse mesmo utente.\n1.3\tEstrutura da Disserta\u00e7\u00e3o\nEste documento encontra-se dividido nos seguintes cap\u00edtulos:\nCap\u00edtulo 1 - Introdu\u00e7\u00e3o, onde se apresenta e contextualiza a tem\u00e1tica do projeto, assim como os principais objetivos.\nCap\u00edtulo 2 - Estado de Arte, que apresenta uma vista das tecnologias existentes e solu\u00e7\u00f5es no \u00e2mbito desta disserta\u00e7\u00e3o, numa tentativa de reunir informa\u00e7\u00e3o relevante ao desenho e implementa\u00e7\u00e3o do projeto.\nCap\u00edtulo 3 - Casos de utiliza\u00e7\u00e3o suportados na agrega\u00e7\u00e3o de informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos.\nCap\u00edtulo 4 - Arquitetura de sistema, descreve a arquitetura do projeto e seus m\u00f3dulos.\nCap\u00edtulo 5 - Implementa\u00e7\u00e3o, descri\u00e7\u00e3o da implementa\u00e7\u00e3o do sistema.\nCap\u00edtulo 6 - Conclus\u00f5es e Resultados, nesta sec\u00e7\u00e3o apresentamos as conclus\u00f5es sobre o trabalho realizado. Apresentamos tamb\u00e9m, linhas para eventual trabalho futuro.\n4\n2\tRevis\u00e3o do Estado da Arte\nNeste cap\u00edtulo abordaremos algumas \u00e1reas e conceitos relevantes \u00e0 elabora\u00e7\u00e3o desta disserta\u00e7\u00e3o, assim como tecnologias e ferramentas a usar.\n2.1\tUtiliza\u00e7\u00e3o das tecnologias de informa\u00e7\u00e3o em sa\u00fade\nQuase todos os sectores p\u00fablicos hoje em dia dependem de dados informatizados que correm sobre sistemas de informa\u00e7\u00e3o e plataformas de comunica\u00e7\u00e3o, a sa\u00fade n\u00e3o \u00e9 exce\u00e7\u00e3o, pois esta \u00e9 uma \u00e1rea em que a tecnologia desempenha um papel mais cr\u00edtico.\nO termo e-Healh, eHealth, e-Sa\u00fade, ou at\u00e9 Sa\u00fade Digital, \u00e9 vulgarmente utilizado para o para o uso de tecnologias de comunica\u00e7\u00e3o e informa\u00e7\u00e3o como suporte para a sa\u00fade [7], e aponta para um novo modo de relacionamento entre o paciente e o profissional de sa\u00fade assente na partilha de decis\u00f5es e de informa\u00e7\u00e3o. O conceito eHealth [8] engloba o potencial de criar:\n\u2022\tMaior efici\u00eancia nos cuidados de sa\u00fade.\n\u2022\tMelhoria na qualidade do servi\u00e7o prestado.\n\u2022\tMaior autonomia por parte dos utentes.\n\u2022\tMelhorar a rela\u00e7\u00e3o paciente/profissional de sa\u00fade.\n\u2022\tPadroniza\u00e7\u00e3o da informa\u00e7\u00e3o dispon\u00edvel.\nA e-Health promete obter ganhos e reduzir custos, contudo, tamb\u00e9m levanta alguns riscos e desafios, no que diz respeito aos limites da informa\u00e7\u00e3o a disponibilizar aos utentes, o que sugere uma reflex\u00e3o em torno da privacidade de cada um.\nEnt\u00e3o, sistemas de informa\u00e7\u00e3o em sa\u00fade s\u00e3o ferramentas para as autoridades e profissionais de sa\u00fade, assim como sistemas de sa\u00fade personalizados para os utentes, tais como:\n\u2022\tRegisto eletr\u00f3nico dos utentes.\n\u2022\tTelemedicina.\n\u2022\tTodo um conjunto de instrumentos de base tecnol\u00f3gica desenhada para a preven\u00e7\u00e3o, diagn\u00f3stico, tratamento, monitoriza\u00e7\u00e3o e gest\u00e3o da sa\u00fade do utente.\n\u2022\tPrescri\u00e7\u00e3o Eletr\u00f3nica.\nEstes sistemas s\u00e3o sistemas de informa\u00e7\u00e3o destinados a institui\u00e7\u00f5es na \u00e1rea da sa\u00fade com o intuito de presta\u00e7\u00e3o de cuidados de sa\u00fade, fins administrativos ou at\u00e9 de gest\u00e3o de unidades m\u00e9dicas (hospitais, cl\u00ednicas, consult\u00f3rios, farm\u00e1cias, m\u00e9todos auxiliares de diagn\u00f3stico, servi\u00e7os de enfermagem e de terapias de apoio aos tratamentos, etc...). O utente pode, opcionalmente ser ou n\u00e3o ser, utilizador desses sistemas [8].\nEm Portugal, j\u00e1 existem v\u00e1rias aplica\u00e7\u00f5es de tecnologias de informa\u00e7\u00e3o na sa\u00fade, portais de sa\u00fade disponibilizados por organiza\u00e7\u00f5es p\u00fablicas e privadas com o objetivo de informar a popula\u00e7\u00e3o, como s\u00e3o os casos do portal do Minist\u00e9rio da Sa\u00fade e da Dire\u00e7\u00e3o Geral da Sa\u00fade. Ambos fornecem informa\u00e7\u00e3o sobre hospitais, centros de sa\u00fade, direitos dos pacientes, plano nacional de sa\u00fade, diagn\u00f3sticos, preven\u00e7\u00e3o de doen\u00e7as, tratamentos, nutri\u00e7\u00e3o e bem-estar. Existem linhas telef\u00f3nicas informativas no sentido de aconselhar e orientar os utentes, como a \u201cSa\u00fade 24\u201d [9]. A maior parte dos hospitais j\u00e1 contam com aplica\u00e7\u00f5es para suporte m\u00e9dico, assim como v\u00e1rias aplica\u00e7\u00f5es da telem\u00e1tica, telediagn\u00f3stico, telemedicina e teleconfer\u00eancia, principalmente nas \u00e1reas da cardiologia e neurologia. Tamb\u00e9m est\u00e3o a ser desenvolvidas redes de comunica\u00e7\u00e3o entre institui\u00e7\u00f5es de sa\u00fade como por exemplo a RTS na regi\u00e3o de Aveiro. A implementa\u00e7\u00e3o do circuito de Prescri\u00e7\u00e3o Eletr\u00f3nica de Medicamentos est\u00e1 a ser implementada assim como o desenvolvimento de Centro de Dados Nacional que inclui a base de dados do Servi\u00e7o Nacional de Sa\u00fade (SNS) que cont\u00e9m a informa\u00e7\u00e3o de dados pessoais e cl\u00ednicos dos utentes e a Base de Dados Nacional de Prescri\u00e7\u00f5es (BDNP) que vai agregar informa\u00e7\u00e3o de bases de dados distribu\u00eddas a n\u00edvel local, regional e nacional. Existe uma preocupa\u00e7\u00e3o em estender a banda larga a todas as regi\u00f5es do pa\u00eds, para prestar cuidados m\u00e9dicos a popula\u00e7\u00f5es mais remotas com o uso da Telemedicina [10].\n2.2\tImplementa\u00e7\u00e3o da prescri\u00e7\u00e3o eletr\u00f3nica em Portugal\nA prescri\u00e7\u00e3o eletr\u00f3nica de medicamentos, e-Prescribing, ou at\u00e9 e-Rx \u00e9 um procedimento efetuado com recurso \u00e0s Tecnologias de Informa\u00e7\u00e3o e Comunica\u00e7\u00e3o (TIC). O papel \u00e9 substitu\u00eddo por um formul\u00e1rio digital. Trata-se de uma forma de e-Sa\u00fade a emergir em Portugal. A prescri\u00e7\u00e3o eletr\u00f3nica promove uma diminui\u00e7\u00e3o de erros inerentes \u00e0 leitura incorreta da escrita nas receitas manuscritas, assim como a informa\u00e7\u00e3o dirigida ao paciente a quem \u00e9 prescrita a receita, \u00e9 mais completa.\n2.2.1\tCarateriza\u00e7\u00e3o funcional de um sistema de prescri\u00e7\u00e3o eletr\u00f3nica\nUm sistema de prescri\u00e7\u00e3o eletr\u00f3nica completamente implementado consistiria num sistema sem recurso a papel. O profissional de sa\u00fade preenchia a prescri\u00e7\u00e3o num formul\u00e1rio digital com suporte \u00e0 decis\u00e3o cl\u00ednica e financeira sobre a escolha do medicamento. Assim que preenchido o formul\u00e1rio com a prescri\u00e7\u00e3o seria enviado para a Rede Nacional de Informa\u00e7\u00e3o de Sa\u00fade (RNIS) - Passo 1 figura 1. O utente ficaria na posse de um token (um identificador da receita) que posteriormente seria usado na farm\u00e1cia como identificador da receita. No sistema da farm\u00e1cia, com o token a dar pelo utente, o farmac\u00eautico lia a receita da RNIS. Ap\u00f3s dispensar a receita o farmac\u00eautico informaria a RNIS da dispensa da mesma - Passo 2 figura 1.\nA PEM, tamb\u00e9m permite melhorar a efic\u00e1cia do Centro de Confer\u00eancia de Faturas (CCF) e reduzir a vulnerabilidade a falsifica\u00e7\u00f5es e fraudes assim como uma melhor gest\u00e3o financeira da despesa do medicamento. \u00c9 tamb\u00e9m um incremento da capacidade de interven\u00e7\u00e3o no ciclo de vida do medicamento [11] - Passo 3, figura 1 - em que o CCF acede \u00e1 RNIS e verifica se as dispensas de medicamentos correspondem \u00e0s prescri\u00e7\u00f5es efetuadas e - Passo 4, figura 1 - a Administra\u00e7\u00e3o Regional de Sa\u00fade (ARS) informa a RNIS do pagamento das faturas.\nw\n- Consulta do Utente com M\u00e9dico (SNS/privado)\n-Receita / Requisi\u00e7\u00e3o tem associado um token para garantir a \u201cassinatura\" do utente na dispensa/realiza\u00e7\u00e3o\nEnvia dispensa\nC. Confer\u00eancia de Factu\n\tr RNIS - Rede Nacional de Informa\u00e7\u00e3o da Sa\u00fade\t\nL\u00e9 Requisi\u00e7\u00e3o MCDT\nLe Prescri\u00e7\u00f5es L\u00e9 Dispensas\nEnvia Realiza\u00e7\u00e3o MCDTi Envia Resultados MCDT:\nFigura 1 - Ciclo da Prescri\u00e7\u00e3o Eletr\u00f3nica e M\u00e9todos Complementares de Diagn\u00f3stico e Terap\u00eauticas [11]\nAinda na figura 1, todo este processo de desmaterializa\u00e7\u00e3o da prescri\u00e7\u00e3o eletr\u00f3nica, ocorre em simult\u00e2neo o processo de desmaterializa\u00e7\u00e3o de MCDTs outra medida adotada para digitalizar o Sistema de Sa\u00fade em Portugal.\n2.2.2\tVis\u00e3o geral do processo de prescri\u00e7\u00e3o eletr\u00f3nica em Portugal\nEm Portugal, desde 2004 (altura em que se iniciou eHealth Action Plan na Uni\u00e3o Europeia), que Hospitais P\u00fablicos e centros de Sa\u00fade e outros adotaram sistemas inform\u00e1ticos de suporte cl\u00ednico [10]. Foram estabelecidos protocolos entre institui\u00e7\u00f5es para permitir o acesso direto \u00e0 informa\u00e7\u00e3o do paciente entre institui\u00e7\u00f5es.\nEm 2006, foi iniciado um processo de certifica\u00e7\u00e3o para aplica\u00e7\u00f5es de prescri\u00e7\u00e3o eletr\u00f3nica e a 1 de Outubro de 2010 [12], o Minist\u00e9rio da Sa\u00fade, em Di\u00e1rio da Rep\u00fablica, estabeleceu um conjunto de novas medidas no acesso aos medicamentos, consagrando o princ\u00edpio da obrigatoriedade da prescri\u00e7\u00e3o eletr\u00f3nica de medicamentos, para efeitos de comparticipa\u00e7\u00e3o.\nA 17 de Maio de 2011, \u00e9 assinado o memorando com a troika [13] no qual \u00e9 definida a obrigatoriedade da prescri\u00e7\u00e3o eletr\u00f3nica de medicamentos e meios de diagn\u00f3stico abrangidos por sistemas de comparticipa\u00e7\u00e3o p\u00fablica, para todos os m\u00e9dicos tanto no sector p\u00fablico como no sector privado. Nesse mesmo documento, tamb\u00e9m se pretende melhorar o sistema de monitoriza\u00e7\u00e3o da prescri\u00e7\u00e3o de medicamentos e meios de diagn\u00f3stico assim como p\u00f4r em pr\u00e1tica uma avalia\u00e7\u00e3o sistem\u00e1tica de cada m\u00e9dico em termos de volume e valor, em compara\u00e7\u00e3o com normas de orienta\u00e7\u00e3o de prescri\u00e7\u00e3o e de outros profissionais da \u00e1rea de especializa\u00e7\u00e3o.\nA PEM de medicamentos em Portugal foi declarada obrigat\u00f3ria em Agosto de 2011 [14] e desde ent\u00e3o tem crescido at\u00e9 n\u00fameros muito muito satisfat\u00f3rios, superiores a 90% [15]. O facto da prescri\u00e7\u00e3o eletr\u00f3nica n\u00e3o se generalizar a 100% das receitas deve-se a exce\u00e7\u00f5es contempladas pelo Minist\u00e9rio da Sa\u00fade:\n\u2022\tInadapta\u00e7\u00e3o comprovada do prescritor para a utiliza\u00e7\u00e3o de meios eletr\u00f3nicos.\n\u2022\tPrescri\u00e7\u00f5es realizadas no domic\u00edlio do paciente.\n\u2022\tA profissionais com volume de prescri\u00e7\u00e3o igual ou inferior a 50 receitas por m\u00eas.\n\u2022\tFal\u00eancia do sistema eletr\u00f3nico.\nNo entanto, a prescri\u00e7\u00e3o eletr\u00f3nica ainda n\u00e3o \u00e9 totalmente \u201celetr\u00f3nica\u201d: a prescri\u00e7\u00e3o \u00e9 preenchida digitalmente e enviada para a Base de Dados Nacional de Prescri\u00e7\u00f5es mas \u00e9 impressa e assinada pelo m\u00e9dico, para posteriormente ser entregue na farm\u00e1cia pelo paciente. Contudo o utente ainda tem que se deslocar \u00e0 farm\u00e1cia com uma receita f\u00edsica. E para proceder \u00e0 sua renova\u00e7\u00e3o, ainda tem que consultar um m\u00e9dico,\nisto porque o processo de desmaterializa\u00e7\u00e3o da prescri\u00e7\u00e3o [11] ainda est\u00e1 em curso, apenas estando prevista a sua total implementa\u00e7\u00e3o em meados de 2013, segundo o Plano Tecnol\u00f3gico [16], aprovado em finais de 2010.\nEm Portugal, a PEM, j\u00e1 \u00e9 um neg\u00f3cio e existem v\u00e1rias empresas a disponibilizar sistemas de prescri\u00e7\u00e3o eletr\u00f3nica [17].\n2.2.3\tA Base de Dados Nacional de Prescri\u00e7\u00f5es\nPara que haja uma Rede Nacional de Informa\u00e7\u00e3o de Sa\u00fade com suporte a PEM, \u00e9 necess\u00e1rio um reposit\u00f3rio de informa\u00e7\u00e3o, para que o papel seja totalmente dispensado. A Base de Dados Nacional de Prescri\u00e7\u00f5es (BDNP) \u00e9 uma base de dados para onde s\u00e3o submetidas todas as prescri\u00e7\u00f5es eletr\u00f3nicas no nosso pa\u00eds.\nA BDNP \u00e9 uma das bases de dados integradas no Centro de Dados Nacional, que cont\u00e9m as receitas prescritas a um qualquer utente do SNS, \u00e0 exce\u00e7\u00e3o da medica\u00e7\u00e3o administrada em epis\u00f3dios de urg\u00eancia.\n\u00c9 um centro de confer\u00eancia de receitas m\u00e9dicas. A partir da BDNP, \u00e9 poss\u00edvel controlar o ciclo da receita m\u00e9dica, se foi aviada ou n\u00e3o e se foi anulada. \u00c9 portanto uma pe\u00e7a chave no combate \u00e0 fraude no ciclo dos medicamentos.\nUma interface de prescri\u00e7\u00e3o eletr\u00f3nica que esteja de acordo com as especifica\u00e7\u00f5es da Administra\u00e7\u00e3o Central do Sistema de Sa\u00fade (ACSS) [18] ao efetuar a prescri\u00e7\u00e3o ao utente j\u00e1 envia a prescri\u00e7\u00e3o para a BDNP. Nesse contexto, a BDNP n\u00e3o s\u00f3 \u00e9 importante para completar o processo de prescri\u00e7\u00e3o eletr\u00f3nica de medicamentos, mas tamb\u00e9m poder constituir uma fonte de informa\u00e7\u00e3o que pode vir a ser usada como meio auxiliar de diagn\u00f3stico, com a obten\u00e7\u00e3o do historial de f\u00e1rmacos prescritos ao utente por parte do profissional de sa\u00fade. H\u00e1 que ter em conta o regime de comparticipa\u00e7\u00e3o de medicamentos em Portugal, em que uma receita titulada a um utente benefici\u00e1rio de um regime de comparticipa\u00e7\u00e3o (uma parte do medicamento \u00e9 suportada pela entidade beneficente) de medicamentos avie os medicamentos para estes serem administrados a uma terceira pessoa.\nA BDNP, segundo o plano tecnol\u00f3gico, est\u00e1 conclu\u00edda desde o final do primeiro semestre de 2011.\n2.3\tRedes e tecnologias para a troca de informa\u00e7\u00e3o em sa\u00fade\nPodemos definir uma rede para troca de informa\u00e7\u00e3o em sa\u00fade como um conjunto de entidades ou institui\u00e7\u00f5es de sa\u00fade que estabelecem canais de comunica\u00e7\u00e3o entre elas e efetuam trocas de informa\u00e7\u00e3o cl\u00ednica. As redes para troca de informa\u00e7\u00e3o em sa\u00fade t\u00eam como objetivo melhorar a comunica\u00e7\u00e3o entre institui\u00e7\u00f5es, a principal finalidade \u00e9 a troca de informa\u00e7\u00e3o cl\u00ednica entre profissionais de Sa\u00fade de diferentes unidades de sa\u00fade. A ado\u00e7\u00e3o destas redes vem permitir a um utente ser assistido fora da sua entidade de sa\u00fade local e o profissional que lhe presta de cuidados de sa\u00fade ter acesso \u00e0 informa\u00e7\u00e3o cl\u00ednica do paciente. Tamb\u00e9m evitam a replica\u00e7\u00e3o desnecess\u00e1ria de exames m\u00e9dicos [1].\n2.3.1\tO projeto RTS (Rede Telem\u00e1tica de Sa\u00fade)\nA RTS [4] [5] foi um projeto iniciado em 2004, desenvolvido pelo Instituto de Engenharia Eletr\u00f3nica e Telem\u00e1tica de Aveiro (IEETA), da Universidade de Aveiro, no \u00e2mbito do programa Aveiro Digital. A RTS foi inspirada em algumas implementa\u00e7\u00f5es mundiais de redes regionais de comunica\u00e7\u00e3o cl\u00ednica, como a MedCom [19].\nA RTS integra um conjunto de institui\u00e7\u00f5es m\u00e9dicas formado pelo Hospital Infante D.Pedro (Aveiro), Hospital Distrital de \u00c1gueda e a Sub-Regi\u00e3o de Sa\u00fade de Aveiro.\nA principal ideia da RTS est\u00e1 explicita no slogan \u201cLigados por uma sa\u00fade melhor\u201d, ou seja, melhorar o acesso a informa\u00e7\u00e3o cl\u00ednica e promover a comunica\u00e7\u00e3o entre profissionais de sa\u00fade credenciados, tamb\u00e9m permite o envolvimento do cidad\u00e3o na gest\u00e3o da sua sa\u00fade.\nDesenvolvida com recurso a tecnologias abertas e baseadas em standards do W3C, a RTS implementa um \"Processo Cl\u00ednico Eletr\u00f3nico Regional\" resumido (PCER), que agrega informa\u00e7\u00e3o cl\u00ednica do utente, proveniente de v\u00e1rias fontes de informa\u00e7\u00e3o cl\u00ednica geograficamente distribu\u00eddas pelas v\u00e1rias institui\u00e7\u00f5es de sa\u00fade regionais que constituem a RTS [20]. A RTS disponibiliza acesso a:\n\u2022\tCartas de alta de epis\u00f3dios;\n\u2022\tBoletins de an\u00e1lises cl\u00ednicas;\n\u2022\tRelat\u00f3rios de exames de imagiologia;\n\u2022\tBoletins de vacinas;\nAtualmente apenas \u00e9 poss\u00edvel ao profissional de sa\u00fade consultar informa\u00e7\u00e3o de medicamentos prescritos, na sec\u00e7\u00e3o das cartas de alta dos epis\u00f3dios. A comunica\u00e7\u00e3o entre as v\u00e1rias institui\u00e7\u00f5es da rede, devido ao cariz sens\u00edvel da informa\u00e7\u00e3o, decorre de forma segura, como tal o profissional de sa\u00fade necessita de ter credenciais para aceder \u00e0 plataforma.\n2.3.2\tO projeto epSOS\nA mobilidade das pessoas, entre o seu pa\u00eds de origem e um outro qualquer pa\u00eds, \u00e9 uma realidade desde h\u00e1 muito. Muitas vezes uma determinada pessoa d\u00e1 entrada numa unidade m\u00e9dica fora do seu pa\u00eds de origem, e como tal, s\u00e3o-lhe prestados cuidados m\u00e9dicos sem que o profissional de sa\u00fade tenha acesso ao historial m\u00e9dico do paciente. Esse fator desencadeou uma necessidade de implementar uma plataforma europeia para troca de informa\u00e7\u00e3o cl\u00ednica. Em Julho de 2008 a Comunidade Europeia emitiu recomenda\u00e7\u00f5es referentes \u00e0 interoperabilidade entre sistemas de registo eletr\u00f3nico de dados cl\u00ednicos de v\u00e1rios pa\u00edses [21]. Ainda em 2008 foi iniciado o projeto Smart Open Services for European Patients (epSOS), que tem a finalidade de projetar, construir e avaliar uma infraestrutura de servi\u00e7o que demonstra a interoperabilidade transfronteiri\u00e7a para a troca de informa\u00e7\u00e3o entre sistemas EHR de diferentes pa\u00edses europeus [22].\nO epSOS tem em vista uma melhoria na presta\u00e7\u00e3o de cuidados m\u00e9dicos com a troca de informa\u00e7\u00e3o cl\u00ednica transfronteiri\u00e7a. Os principais documentos usados na troca de informa\u00e7\u00e3o s\u00e3o os seguintes:\n\u2022\tPatient Summary [23];\n\u2022\te-Prescription [24];\nO epSOS tem uma arquitetura em que cada pa\u00eds implementa um componente de comunica\u00e7\u00e3o, National Contact Poin (NCP); este componente serve como uma esp\u00e9cie de proxy da informa\u00e7\u00e3o cl\u00ednica de cada pa\u00eds e a restante rede, \u00e9 aqui efetuada toda a transforma\u00e7\u00e3o de dados num standard que possa ser transmitido no epSOS. O NCP tamb\u00e9m assegura que a comunica\u00e7\u00e3o \u00e9 feita de forma segura.\n2.3.3\tO papel do HL7 na comunica\u00e7\u00e3o cl\u00ednica\nO Health Level 7 International (HL7) foi fundado em 1987. \u00c9 uma organiza\u00e7\u00e3o sem fins lucrativos, creditada pela American National Standards Institute (ANSI), dedicase a fornecer um quadro global e padr\u00f5es relacionados para o interc\u00e2mbio, integra\u00e7\u00e3o, partilha e recupera\u00e7\u00e3o de EHRs que suporta a pr\u00e1tica cl\u00ednica e da gest\u00e3o, execu\u00e7\u00e3o e avalia\u00e7\u00e3o dos servi\u00e7os de sa\u00fade [25].\nO HL7 fornece padr\u00f5es de interoperabilidade que visam melhorar a presta\u00e7\u00e3o de cuidados cl\u00ednicos, otimizar fluxo de trabalho, reduzir a ambiguidade e melhorar a transfer\u00eancia de conhecimento entre prestadores de cuidados de sa\u00fade de diferentes organiza\u00e7\u00f5es e pacientes [25].\nNo dom\u00ednio da e-Health, a norma Clinical Document Architecture (CDA) do HL7 foi introduzido para fornecer um modelo de troca de documentos cl\u00ednicos. O CDA ao fazer uso do Reference Information Model (RIM) do HL7 e vocabul\u00e1rio codificados fornece documentos cl\u00ednicos que possam ser facilmente analisados e processados eletronicamente, recuperados e usados por pessoas que deles necessitem [26]. O RIM da vers\u00e3o 3 do HL7 \u00e9 a base de informa\u00e7\u00e3o utilizada nas especifica\u00e7\u00f5es HL7. Foi criado para responder \u00e0 necessidade de garantir a interoperabilidade entre os sistemas utilizados em diferentes entidades prestadoras de cuidados de sa\u00fade. \u00c9 um modelo de informa\u00e7\u00e3o de refer\u00eancia, baseado num modelo orientado a objetos, que representa de uma forma gen\u00e9rica e l\u00f3gica os dados que s\u00e3o trocados entre sistemas de diferentes entidades prestadores de cuidados de sa\u00fade, assim como os fluxos de informa\u00e7\u00e3o estabelecidos, atrav\u00e9s de mensagens HL7. Os documentos especificados pelo epSOS para troca de informa\u00e7\u00e3o usam o RIM do HL7v3 [27].\nOs documentos CDA s\u00e3o codificados em XML e derivam do HL7v3 RIM, como tal, usam os modelos de dados HL7v3. O CDA especifica a estrutura e a sem\u00e2ntica de documentos cl\u00ednicos, para posteriormente estes serem trocados entre aplica\u00e7\u00f5es. A complexidade de cada documento representado num CDA depende da complexidade de informa\u00e7\u00e3o tratada.\n2.3.4\tBibliotecas para o tratamento de informa\u00e7\u00e3o de sa\u00fade\nNo processo de troca documentos cl\u00ednicos digitais entre institui\u00e7\u00f5es de diferentes pa\u00edses \u00e9 necess\u00e1rio que a informa\u00e7\u00e3o trocada respeite os standards internacionais de modo a que os dados trocados possam ser percet\u00edveis por ambos os interlocutores.\nA Open Health Tools (OHT) [28] \u00e9 uma organiza\u00e7\u00e3o que desenvolve ferramentas open source para fornecer suporte para a modela\u00e7\u00e3o de mensagens HL7v3. A OHT tem como objetivos ao disponibilizar as suas ferramentas, promover uma melhoria na qualidade do atendimento ao utente, uma melhoria qualidade da informa\u00e7\u00e3o trocada entre sistemas e promover a interoperabilidade transfronteiri\u00e7a [29]. Todo o processo de modela\u00e7\u00e3o de documentos cl\u00ednicos com especifica\u00e7\u00f5es longas e complexas \u00e9 precedido por uma curva de aprendizagem que representa toda a familiariza\u00e7\u00e3o com documentos cl\u00ednicos, foi assim que surgiu o projeto Model-Driven Health Tools (MDHT) [30], um projeto open source que fornece ferramentas de apoio \u00e0 conce\u00e7\u00e3o e implementa\u00e7\u00e3o de modelos cl\u00ednicos. Este modelo engloba uma s\u00e9rie de bibliotecas baseadas em Java, para gerar e validar documentos.\nNa figura 2, \u00e9 ilustrado o projeto MDHT, em que o programador disp\u00f5e de um conjunto de requisitos e ao fazer uso das boas pr\u00e1ticas HL7 CDA modela um documento cl\u00ednico que pode ser usado por pessoas e usado por aplica\u00e7\u00f5es.\n/eb Content\nSoftware\nJava API\nBusiness Analyst\nRequirements\ngner\nImplementation\nGt ide\nDes\nHL7 CDA Best Practices\nCDA Runtime Application\nDeveloper\nCDA Web-Based Validation\nDeveloper \\ Documentation\nOnline Help\nJ Publication\nCDA Model\nFigura 2 - Fluxo de informa\u00e7\u00e3o orientada ao projeto MDHT [30]\n2.4\tTecnologias para o desenvolvimento de portais\nNeste subcap\u00edtulo abordaremos algumas das tecnologias e modelos usados para o desenvolvimento de portais.\n2.4.1\tO modelo J2EE\nO modelo J2EE [31], ou Java Platform Enterprise Edition, \u00e9 uma plataforma que representa um standard para implementar e desenvolver aplica\u00e7\u00f5es empresariais. O modelo J2EE apresenta-se como uma boa solu\u00e7\u00e3o para o programador face ao facto de muitas complica\u00e7\u00f5es inerentes ao desenvolvimento de aplica\u00e7\u00f5es empresariais serem geridas pela pr\u00f3pria plataforma, o que simplifica todo o processo de implementa\u00e7\u00e3o, libertando o programador para se focar nas especifica\u00e7\u00f5es do projeto.\nUma aplica\u00e7\u00e3o empresarial necessita de implementar servi\u00e7os complexos para ser bem-sucedida, e a implementa\u00e7\u00e3o de servi\u00e7os de baixo n\u00edvel iria representar uma infinidade de tempo extra para o desenvolvimento do projeto. No J2EE, esses servi\u00e7os de baixo n\u00edvel j\u00e1 est\u00e3o implementados e documentados, ou seja, o programador s\u00f3 tem de invocar esses servi\u00e7os, o que se traduz numa redu\u00e7\u00e3o de tempo.\nO modelo J2EE \u00e9 um modelo que decomp\u00f5e a aplica\u00e7\u00e3o em camadas, como \u00e9 poss\u00edvel constatar na figura 3, o modelo \u00e9 constitu\u00eddo por 3 camadas. A camada, Enterprise Information System (EIS), \u00e9 a que cont\u00e9m as bases de dados da aplica\u00e7\u00e3o. A camada do meio, business layer, \u00e9 onde est\u00e1 contida toda a l\u00f3gica da aplica\u00e7\u00e3o, os Enterprise Java Beans (EJB), esta camada pode conter subcamadas. E por fim camada mais alta, a camada Cliente, onde \u00e9 estabelecida a intera\u00e7\u00e3o com o cliente.\nA camada mais baixa, a das bases de dados que cont\u00eam a informa\u00e7\u00e3o da aplica\u00e7\u00e3o corre no respetivo servidor EIS. A business layer, assim como os componentes Web da aplica\u00e7\u00e3o que interagem com o cliente (Java Servlets e Java Server Pages (JSP)), est\u00e3o contidas no servidor J2EE. A camada Cliente (Web Browsers, Applets, aplica\u00e7\u00f5es cliente) corre na m\u00e1quina do cliente. A informa\u00e7\u00e3o trocada entre as v\u00e1rias camadas pode ser efetuada com recurso a HTML, XML, HTTP, SOAP, SSL etc...\nClient-Side Presentation\nEnterprise Information System\nServer-Side Business Logic\nEJB\nContainer\nJava Application\nDesktop\nJ2EE Client\t\n\t\nFigura 3 - Modelo J2EE [32]\nEsta decomposi\u00e7\u00e3o em\ncamadas est\u00e1 associada a\numa melhor qualidade do\nsoftware desenvolvido, a uma melhor estrat\u00e9gia para o desenvolvimento do software e um aumento da produtividade do programador. \u00c9 tamb\u00e9m mais f\u00e1cil todo o processo de\nmanuten\u00e7\u00e3o do software, assim como a possibilidade de interoperabilidade com outros\nsistemas.\nExistem muitas APIs e tecnologias que comp\u00f5em o J2EE. Essas APIs e tecnologias s\u00e3o sucintamente descritas abaixo:\n\u2022\tJava Database Connectivity (JDBC) API: O JDBC \u00e9 um conjunto de interfaces que permite a aplica\u00e7\u00f5es Java aceder a qualquer base de dados. Semelhante \u00e0 Microsoft ODBC.\n\u2022\tRemote Method Invocation (RMI): O RMI \u00e9 uma API que permite a um objeto Java comunicar remotamente com outros objetos. Semelhante ao CORBA da OMG.\n\u2022\tJava IDL: O IDL \u00e9 um standard de plataforma independente, que permite que um objeto Java comunique com outro objeto de qualquer linguagem por IDL.\n\u2022\tEntreprise Java Beans: O EJB \u00e9 uma estrutura padr\u00e3o de objetos distribu\u00eddos e modelo de componentes para o Java. S\u00e3o componentes usados na camada de neg\u00f3cio do J2EE.\n\u2022\tServlets e Java Server Pages (JSP): Servlets s\u00e3o programas Java a correr num Web Server que processa pedidos dinamicamente e respostas. Um Servlet \u00e9 um m\u00f3dulo que estende a funcionalidade de um servidor Web, atrav\u00e9s de m\u00f3dulos de aplica\u00e7\u00e3o implementados em Java.\n\u2022\tJava Message Service (JMS): A API JMS \u00e9 standard de mensagens que permite aos componentes do J2EE criar, enviar, receber e ler mensagens. Permite a comunica\u00e7\u00e3o distribu\u00edda entre componentes.\n\u2022\tJava Transaction(JTA): O JTA permite aos componentes J2EE realizar transa\u00e7\u00f5es distribu\u00eddas.\n\u2022\tJava Mail: O JavaMail permite aos componentes Java enviar e receber e-mails numa forma plataforma-independente.\n\u2022\tJava API para processamento XML (JAXP): JAXP permite manipular documentos XML. O XML \u00e9 muito utilizado em J2EE como formato de dados.\n\u2022\tJava Naming and Directory Interface (JNDI): O JNDI \u00e9 um protocolo que permite a aplica\u00e7\u00f5es Java descobrir e procurar dados e objetos atrav\u00e9s de um nome.\n2.4.2\tTransporte baseado em XML\nO eXtensible Markup Language (XML), \u00e9 uma linguagem standard para especifica\u00e7\u00e3o de dados Web. Permite que os dados sejam envolvidos por tags que e consequentemente ser ao mesmo tempo percet\u00edvel por maquinas e humanos. Tags XML podem ter qualquer termo definido pelo utilizador, \u00e9 uma linguagem extens\u00edvel e n\u00e3o requer qualquer significado (sem\u00e2ntica) associado aos termos / tags [33].\nO XML tem um vasto uso na programa\u00e7\u00e3o Web, por dispor de uma enorme variedade de ferramentas para a sua edi\u00e7\u00e3o. O XML permite estruturar dados altamente complexos num documento simples. Como o XML \u00e9 um documento de texto e facilmente transport\u00e1vel por HTTP ou HTTPS tem sido adotado como uma forma de transportar dados estruturados pela Internet. No entanto, o uso de XML traz algumas desvantagens associadas ao formato das mensagens, ao facto de estas se poderem tornar demasiado pesadas para a rede e dispendiosas em recursos para o seu processamento.\nA necessidade da troca de documentos em formato padr\u00e3o estruturado tem vindo a ganhar import\u00e2ncia ao longo dos anos, e a sa\u00fade n\u00e3o \u00e9 alheia a essa necessidade. A troca digital de dados cl\u00ednicos requer um documento estruturado e que possa ser lido por pessoas e ao mesmo tempo process\u00e1vel por m\u00e1quinas, tudo isto foi facilitado com o desenvolvimento de linguagens de especifica\u00e7\u00e3o de dados como o XML. Os documentos cl\u00ednicos HL7v3 s\u00e3o definidos em XML [34].\n18\n3\tCasos de utiliza\u00e7\u00e3o suportados na agrega\u00e7\u00e3o de informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos\nO cen\u00e1rio de agrega\u00e7\u00e3o de informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos \u00e9 uma das dimens\u00f5es de grande utilidade aos profissionais de sa\u00fade.\nConstatamos que atualmente j\u00e1 existe informa\u00e7\u00e3o relativamente a prescri\u00e7\u00e3o de medicamentos dentro da RTS. No entanto, essa informa\u00e7\u00e3o apenas poder\u00e1 ser encontrada dentro de cartas de alta por epis\u00f3dio cl\u00ednico. Contudo, s\u00f3 com esse acesso indireto, \u00e9 mais complicado ao m\u00e9dico tirar ila\u00e7\u00f5es na altura do diagn\u00f3stico do paciente.\nA solu\u00e7\u00e3o passa por, para cada paciente, extrair toda a medica\u00e7\u00e3o existente dentro do sum\u00e1rio dos v\u00e1rios epis\u00f3dios cl\u00ednicos e agregar essa informa\u00e7\u00e3o, numa s\u00f3 vista. Ainda assim, apesar de ser informa\u00e7\u00e3o relevante para o profissional de sa\u00fade, n\u00e3o basta restringir essa informa\u00e7\u00e3o \u00e0 existente na RTS, \u00e9 conveniente adicionar a informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos da rede nacional. Como tal, \u00e9 necess\u00e1rio utilizar a informa\u00e7\u00e3o da BDNP. Muito embora se possa questionar o motivo de agregar duas fontes RTS e BDNP, se o segundo caso engloba o primeiro. A explica\u00e7\u00e3o \u00e9 simples, a RTS cont\u00e9m epis\u00f3dios de urg\u00eancia, ou seja, quando um utente d\u00e1 entrada no hospital, e s\u00e3o lhe administrados medicamentos, essa medica\u00e7\u00e3o, n\u00e3o requer uma receita, nem vai ser submetida para a base de dados nacional de prescri\u00e7\u00f5es, v\u00e3o unicamente ficar registadas no sum\u00e1rio do epis\u00f3dio, e faz todo o sentido ser integrada na solu\u00e7\u00e3o.\nLogicamente que a RTS tamb\u00e9m cont\u00e9m medicamentos que foram submetidos para a base de dados nacional de prescri\u00e7\u00f5es, o que levaria a uma replica\u00e7\u00e3o de dados, situa\u00e7\u00e3o que dever\u00e1 ser tratada.\nFigura 4 - RTS a agregar informa\u00e7\u00e3o das unidades de sa\u00fade que a comp\u00f5e mais o reposit\u00f3rio nacional de prescri\u00e7\u00f5es\nA figura 4 ilustra a agrega\u00e7\u00e3o de informa\u00e7\u00e3o que a RTS passar\u00e1 a ter no final desta disserta\u00e7\u00e3o. A RTS j\u00e1 agrega a informa\u00e7\u00e3o dos Hospitais (HIP - Hospital Infante D.Pedro e HDA - Hospital Distrital de \u00c1gueda) e Centros de Sa\u00fade (CSA - Centro de Sa\u00fade de Aveiro, CSV - Centro de Sa\u00fade de Vagos, etc...) pertencentes ao cons\u00f3rcio RTS e passa a agregar informa\u00e7\u00e3o da Base de Dados Nacional de Prescri\u00e7\u00f5es (BDNP).\nA informa\u00e7\u00e3o dentro da RTS \u00e9 orientada \u00e0 partilha de informa\u00e7\u00e3o a n\u00edvel regional, contudo n\u00e3o est\u00e1 orientada a sistemas baseados em Health Level Seven International (HL7) Clinical Document Architecture (CDA). Um utente proveniente da regi\u00e3o abrangida pelo cons\u00f3rcio RTS, que se desloque a um pa\u00eds estrangeiro e necessite de cuidados m\u00e9dicos nesse mesmo pa\u00eds, o m\u00e9dico que lhe vai prestar cuidados de sa\u00fade, n\u00e3o tem acesso ao historial m\u00e9dico do utente, exatamente pelo facto de os dados da RTS n\u00e3o estarem orientados \u00e0 partilha de dados transfronteiri\u00e7a e consequentemente e consequentemente n\u00e3o integrarem a rede de partilha de informa\u00e7\u00e3o cl\u00ednica epSOS. A RTS deve ter a possibilidade de exportar os dados de informa\u00e7\u00e3o de prescri\u00e7\u00f5es de medicamentos em formato epSOS, podendo futuramente ser ligada com o National Contact Point (NCP), e exportar informa\u00e7\u00e3o al\u00e9m-fronteiras.\nCom os requisitos apresentados, foram definidos os seguintes casos de utiliza\u00e7\u00e3o para o projeto a desenvolver:\n\u2022\tConsultar Prescri\u00e7\u00f5es - A RTS passa a disponibilizar m\u00e9todos que permitem a obten\u00e7\u00e3o de informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos agregada das v\u00e1rias fontes (RTS+BDNP) por utente e consultar detalhes dos medicamentos prescritos. O Profissional de Sa\u00fade acede a essa informa\u00e7\u00e3o atrav\u00e9s do Portal dos Profissionais. Esta informa\u00e7\u00e3o \u00e9 tamb\u00e9m acess\u00edvel a sistemas externos que fa\u00e7am a invoca\u00e7\u00e3o de um servi\u00e7o a desenvolver.\n\u2022\tExportar Prescri\u00e7\u00f5es - Tamb\u00e9m a rede epSOS tem a possibilidade de exportar os dados de prescri\u00e7\u00e3o de medicamentos disponibilizado pela RTS (RTS+BDNP) num formato de dados orientado \u00e0 troca de dados transfronteiri\u00e7a.\n22\n4\tArquitetura de Sistema\nNeste cap\u00edtulo descreveremos detalhadamente a solu\u00e7\u00e3o a adotar, a arquitetura e as tecnologias escolhidas para a sua implementa\u00e7\u00e3o.\n4.1\tVis\u00e3o geral da solu\u00e7\u00e3o\nEsta disserta\u00e7\u00e3o prop\u00f5e uma extens\u00e3o \u00e0 Rede Telem\u00e1tica de Sa\u00fade (RTS), que em rela\u00e7\u00e3o \u00e0 sua vers\u00e3o atual disponibiliza duas novas funcionalidades a desenvolver:\n\u2022\tExtra\u00e7\u00e3o e agrega\u00e7\u00e3o de informa\u00e7\u00e3o de Prescri\u00e7\u00e3o eletr\u00f3nica de v\u00e1rias fontes.\n\u2022\tExportar informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos em formato epSOS.\nA solu\u00e7\u00e3o a implementar passa por dotar a RTS de uma vista para consulta de prescri\u00e7\u00e3o de medicamentos, assim como o uso da sua atual estrutura para a obten\u00e7\u00e3o de dados de prescri\u00e7\u00e3o de medicamentos. Passa tamb\u00e9m, por integrar a base de dados nacional de prescri\u00e7\u00f5es. No entanto, a BDNP n\u00e3o foi disponibilizada para a realiza\u00e7\u00e3o deste projeto, foi necess\u00e1rio implementar um servi\u00e7o extra para simular. O simulador dever\u00e1 ser implementado com base nas especifica\u00e7\u00f5es de receitas m\u00e9dicas descrito pela ACSS [18], dever\u00e1 ser orientado a servi\u00e7o, a fim de emular o reposit\u00f3rio nacional de prescri\u00e7\u00f5es de receitas m\u00e9dicas.\nPor fim, \u00e9 necess\u00e1rio permitir ao utilizador selecionar um conjunto de prescri\u00e7\u00f5es por forma a exportar essas mesmas prescri\u00e7\u00f5es para o formato epSOS. \u00c9 necess\u00e1rio desenvolver um m\u00f3dulo dentro da RTS que permita transformar os atuais formatos de dados da RTS, que n\u00e3o est\u00e3o orientados ao Reference Information Model do epSOS, para que estes possam vir a ser exportados para o epSOS.\nPara alcan\u00e7ar as novas funcionalidades a RTS requer que a sua atual camada Web seja alterada/incrementada. Para construir a informa\u00e7\u00e3o de prescri\u00e7\u00f5es de medicamentos, \u00e9 necess\u00e1rio recorrer aos WebServices da RTS, nomeadamente aos que cont\u00eam a informa\u00e7\u00e3o dos pacientes e dos epis\u00f3dios, esta etapa passa por se construir um servi\u00e7o (WebService) interno \u00e0 RTS que fa\u00e7a a extra\u00e7\u00e3o e agrega\u00e7\u00e3o de dados de prescri\u00e7\u00e3o de medicamentos internos \u00e0 RTS e tamb\u00e9m que inclua o reposit\u00f3rio nacional, no nosso caso, o simulador da BDNP.\nTamb\u00e9m se pretende disponibilizar o acesso aos detalhes dos medicamentos conforme a informa\u00e7\u00e3o j\u00e1 dispon\u00edvel (base de dados pr\u00f3pria, n\u00e3o investigada) nas institui\u00e7\u00f5es cl\u00ednicas, por forma a enriquecer a vista a desenvolver que vai mostrar a informa\u00e7\u00e3o no Portal dos Profissionais.\nComo a RTS foi desenvolvida em J2EE, todo o projeto ser\u00e1 igualmente desenvolvido em J2EE, por forma a homogeneizar o projeto no que toca a tecnologias. A camada Web ser\u00e1 for\u00e7osamente desenvolvida em Apache Struts [35] e JSP com recurso a JavaScript [36]. Para a manipula\u00e7\u00e3o dos modelos de dados, ser\u00e3o usadas as bibliotecas da Open-Health-Tools (OHT) [28].\nPodemos dividir a implementa\u00e7\u00e3o de todo o projeto em v\u00e1rias etapas:\n1.\tProjetar e desenvolver o simulador da Base de Dados Nacional de Prescri\u00e7\u00f5es (BDNP).\n2.\tCriar um m\u00f3dulo dentro da RTS, que fa\u00e7a a invoca\u00e7\u00e3o do WebService dos Pacientes e do WebService dos Epis\u00f3dios, por forma a obter informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos dentro da RTS.\n3.\tIntegrar nesse novo m\u00f3dulo, o simulador da Base de Dados Nacional de Prescri\u00e7\u00f5es.\n4.\tCriar no Portal dos Profissionais uma sec\u00e7\u00e3o para consulta de informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos e consequentemente integrar o m\u00f3dulo desenvolvido que retornar\u00e1 os dados a apresentar.\n5.\tCriar um m\u00f3dulo que permita exportar os formatos de dados atuais da RTS em formato epSOS.\n\u00c9 importante garantir que a comunica\u00e7\u00e3o entre estes servi\u00e7os decorra de forma segura. O conte\u00fado das mensagens tem que estar cifrado e estas t\u00eam de estar assinadas. Como j\u00e1 existe um mecanismo implementado na RTS para garantir a seguran\u00e7a das mensagens trocadas, o modelo, Mutual Certificate Autentication, ser\u00e1 este o mecanismo a implementar. Este mecanismo contempla o uso de um certificado X.509 para identifica\u00e7\u00e3o do cliente [37]. A utiliza\u00e7\u00e3o de um certificado por parte de uma aplica\u00e7\u00e3o cliente n\u00e3o se restringe apenas \u00e0 sua identifica\u00e7\u00e3o, cont\u00eam tamb\u00e9m um par de chaves assim\u00e9tricas. Estas chaves s\u00e3o utilizadas para cifar e assinar as mensagens trocadas. As mensagens ser\u00e3o cifradas com recurso a chaves assim\u00e9tricas, existentes nos certificados de cada interveniente.\nNa RTS existem v\u00e1rios M\u00f3dulos Internos, desses m\u00f3dulos iremos recorrer a dois, nomeadamente aos WebServices WS Patient, que cont\u00e9m informa\u00e7\u00e3o relativamente aos utentes e WS Episode, que cont\u00e9m a informa\u00e7\u00e3o relativamente aos epis\u00f3dios cl\u00ednicos.\nFigura 6 - Entidades envolvidas na obten\u00e7\u00e3o de informa\u00e7\u00e3o de pacientes e episodios no atual modelo da RTS\nA figura 6 representa parte da arquitetura atual da RTS. Na camada mais abaixo (HIP - Hospital Infante D.Pedro, HDA - Hospital Distrital de \u00c1gueda, CSA - Centro de Sa\u00fade de Aveiro etc...), est\u00e3o representadas as entidades que comp\u00f5em o cons\u00f3rcio RTS. Na camada do meio, est\u00e3o representados os WebServices dos Pacientes e dos Epis\u00f3dios e, na camada mais acima, o Portal dos Profissionais. Os WSs obt\u00eam os dados de pacientes e epis\u00f3dios das v\u00e1rias institui\u00e7\u00f5es da RTS, posteriormente estes WS s\u00e3o invocados pelo Portal dos profissionais de modo a construir o processo cl\u00ednico do paciente.\nFigura 7 - Vis\u00e3o geral da solu\u00e7\u00e3o apresentada\nA figura 7 representa a arquitetura da solu\u00e7\u00e3o apresentada, com a cria\u00e7\u00e3o de um novo WebService, o WS Prescriptions, que vai consumir os dados de outros dois\nWebServices j\u00e1 existentes na RTS, mais os dados provenientes do simulador da BDNP. Este WS Prescriptions, disponibiliza uma estrutura de dados que representam prescri\u00e7\u00f5es, dispon\u00edvel \u00e0 rede epSOS e ao Portal dos Profissionais da RTS.\n4.2\tSem\u00e2ntica da informa\u00e7\u00e3o\nA tecnologia usada para a troca de mensagens entre os servi\u00e7os \u00e9 SOAP (Simple Object Access Protocol), que \u00e9 um protocolo que descreve uma norma para troca de mensagens em WebServices. O SOAP \u00e9 uma recomenda\u00e7\u00e3o do W3C (World Wide Web Consortium) para a implementa\u00e7\u00e3o de WS. \u00c9 baseado em mensagens XML, \u00e9 protocolo simples e altamente expans\u00edvel.\nWS Prescription\nBDNP\nSimulador\nFigura 8 - Troca de Mensagens entre o WS Prescriptions e o simulador da BDNP\nAs mensagens trocadas entre a BDNP e o WS Prescriptions s\u00e3o mensagens SOAP (figura 8) que encapsulam objetos estruturados em XML. Esses objetos podem ser uma \u00fanica receita acompanhada pelo c\u00f3digo obtida atrav\u00e9s do identificador dela pr\u00f3pria, ou podem ser um conjunto de receitas (Figura 9 e Figura 10), obtidas atrav\u00e9s de um identificador do utente, neste caso retorna todas as receitas associadas ao utente.\nListaReceitasBodyOutput\nReceitaBodyOutput\nFigura 9 - Estruturas de dados a retornar pelo servidor\nf ReceHaiype \u2014<***}-*\u2022\nHUttlCIOLIKll-J type \u00fcd ihi\nMedicamento tpe ar Wedi\u00e7arnentoTvpe\nl>as cr tc aoDta pnn s j \u2666\u00abse red: string\nCabecalhoRecelta\t\u00a1\nType erCabecalhoReceitaType\n' Lista LinhasReceita\t\u00a1\n\u00a1type erUstaUnhasReceitaType\nB nitrosPesquis-a\tI\n\u25a0 type erF\u00edltrcsPesqu\u00edsaType\nFigura 10 - Estrutura de uma Receita\nO WS Prescriptions recorre ao WS Patients para procurar o utente, e caso o utente exista, obter a lista de epis\u00f3dios cl\u00ednicos associados ao paciente. Com essa informa\u00e7\u00e3o o WS Prescriptions acede ao WS Episodes para obter epis\u00f3dios associados ao utente, dentro dos epis\u00f3dios \u00e9 poss\u00edvel obter as cartas de alta dos mesmos e consequentemente obter a medica\u00e7\u00e3o prescrita que a\u00ed consta. As figuras 11 e 12 representam os dados trocados entre WS Prescriptions com os outros dois WSs (Epis\u00f3dios e Pacientes), ao pedir a lista de epis\u00f3dios associados a um utente, ao WebService dos utentes, obt\u00e9m uma lista de Epis\u00f3dios. E posteriormente pelo id do Epis\u00f3dio obt\u00e9m a respetiva carta de alta do mesmo do WS dos Epis\u00f3dios, esta carta de alta tem informa\u00e7\u00e3o de medicamentos prescritos ao utente.\nFigura 11 - Modelo de dados que representa um epis\u00f3dio na RTS\nFigura 12 - Modelo de dados que representa uma carta de alta de um epis\u00f3dio\nFigura 13 - Modelo de dados adotado para representar uma Prescri\u00e7\u00e3o na RTS\nA figura 13 ilustra o modelo de dados a usar para construir a prescri\u00e7\u00e3o ap\u00f3s recebida a informa\u00e7\u00e3o proveniente da BDNP. \u00c9 tamb\u00e9m este o modelo de dados que ser\u00e1 adotado para representar as prescri\u00e7\u00f5es internamente \u00e0 RTS, por abranger a informa\u00e7\u00e3o relevante de uma prescri\u00e7\u00e3o. Os dados provenientes dos WS dos Pacientes e Epis\u00f3dios ser\u00e3o convertidos para este modelo de dados no WS Prescriptions. O modelo de dados interno \u00e0 RTS (Figura 11 e Figura 12) abrange aspetos essenciais de uma prescri\u00e7\u00e3o, no entanto h\u00e1 aspetos relevantes que n\u00e3o s\u00e3o especificados.\n4.3\tIntegra\u00e7\u00e3o com a RTS\nO bVS Prescriptions \u00e9 um novo servi\u00e7o para extrair e agregar informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos por utente e normalizar essa informa\u00e7\u00e3o num formato que\npermita interoperabilidade sem\u00e2ntica. Este WS ser\u00e1 um servi\u00e7o, que disponibiliza dados para a RTS e epSOS, pode tamb\u00e9m vir no futuro a disponibilizar informa\u00e7\u00e3o a outras aplica\u00e7\u00f5es. No entanto como \u00e9 um servi\u00e7o que essencialmente afeta utentes da rede RTS faz todo o sentido ser implementado dentro da RTS. Como tal, ser\u00e1 desenvolvido na camada de servi\u00e7os da RTS, RTS.WS, \u00e0 semelhan\u00e7a daquilo que j\u00e1 acontece com o WS dos Pacientes e com o WS dos Epis\u00f3dios. Posteriormente no portal dos profissionais \u00e9 somente necess\u00e1rio fazer a sua invoca\u00e7\u00e3o.\nO mecanismo para o tratamento de dados de prescri\u00e7\u00e3o de medicamentos com o intuito de tornas esses mesmos dados export\u00e1veis para a rede epSOS ser\u00e1 implementado no WS Prescriptions, tamb\u00e9m ser\u00e1 um m\u00f3dulo interno \u00e0 RTS. Este WS implementar\u00e1 m\u00e9todos acess\u00edveis via WSDL, que retornam um conjunto de prescri\u00e7\u00f5es no formato CDA HL7v3, que \u00e9 um ficheiro XML usado para especificar dados cl\u00ednicos na rede de epSOS, por um identificador do utente, ou uma \u00fanica prescri\u00e7\u00e3o, com base no ID da mesma. Estes dados destinam-se ao epSOS.\n4.4\tIntegra\u00e7\u00e3o com a BDNP (simulador)\nNo in\u00edcio desta disserta\u00e7\u00e3o, t\u00ednhamos como objetivo criar uma vista de informa\u00e7\u00e3o agregada de prescri\u00e7\u00e3o de medicamentos, pretendia-se obter medica\u00e7\u00e3o administrada ao utente em epis\u00f3dios de urg\u00eancia da RTS, que n\u00e3o s\u00e3o submetidos para BDNP, mais a informa\u00e7\u00e3o da BDNP. No entanto, o reposit\u00f3rio nacional de prescri\u00e7\u00f5es n\u00e3o foi disponibilizado para este projeto, pelo fato de conter informa\u00e7\u00e3o que \u00e9 considerada privada. A disponibiliza\u00e7\u00e3o desse servi\u00e7o para uma disserta\u00e7\u00e3o podia levantar uma s\u00e9rie de quest\u00f5es \u00e9ticas. Ent\u00e3o, foi decidido implementar um simulador que emulasse o efeito pretendido. Para tal foram consultadas as especifica\u00e7\u00f5es p\u00fablicas da ACSS, com o formato de uma receita e foi \u00e0 volta desse formato que se projetou o simulador da BDNP.\nO simulador da BDNP \u00e9 um projeto orientado a servi\u00e7o. Como contextualmente representa a base de dados nacional de prescri\u00e7\u00f5es e, um servi\u00e7o externo \u00e0 RTS, ser\u00e1 implementado fora da RTS, acess\u00edvel via SOAP. A sua integra\u00e7\u00e3o com RTS \u00e9 atrav\u00e9s do m\u00f3dulo WS Prescriptions, que implementar\u00e1 o cliente do simulador da BDNP, e posteriormente s\u00f3 tem que invocar os m\u00e9todos disponibilizados por ele. A comunica\u00e7\u00e3o como j\u00e1 referimos \u00e9 via SOAP e a seguran\u00e7a das mensagens \u00e9 assegurada por um\nprotocolo de Certifica\u00e7\u00e3o Mutua, \u00e9 necess\u00e1rio fazer a configura\u00e7\u00e3o de seguran\u00e7a entre ambos os servi\u00e7os por forma a garantir a comunica\u00e7\u00e3o.\nComo os dados trocados s\u00e3o XML, o bVS Prescriptions tem que dispor de ferramentas para extra\u00e7\u00e3o do XML e posteriormente usar um tipo de dados de acordo com o formato das receitas exportadas pelo BDNP.\n\t W S P r e s c r i p t i o n\t\t\t WS Patient\t\t\t WS Episode\t\tB DNP s iiciu 1 ato r^j\nloop\t\tqetEpisodesbyPatientw r-L-,\tI * 1&lt;\t 1 returns an array\tLrJ\t( of of episodes\t( I\t1 for each episode request the summary discharge letter 1\t\t1 1 1 1 1 1 1\t\n\t\t1 qetSummaryDischanqeUetter\t\t\t1 1 1 1 1\n\t\treturns a aischarqe letter\t\t\t\n\t\t&lt;1\t\t\t\n\t\tgetPrescriptionsBySNS\t\t\t_ A\n\t\ti\t1\t i returns an xml with prescription^\t\t\t\n\t\t<\t\u00a1\t=\t-\tLI 1\t1\ti\t\t\t\nFigura 14 - Diagrama de Sequencia que ilustra a obten\u00e7\u00e3o de dados por parte do WS Prescriptions\nNa figura 14, \u00e9 poss\u00edvel constatar que h\u00e1 dados distintos oriundos de diferentes plataformas\nNeste caso, a informa\u00e7\u00e3o proveniente da BDNP, apresenta-se mais completa, e na quest\u00e3o da eventual replica\u00e7\u00e3o de informa\u00e7\u00e3o, ao ter que se eliminar informa\u00e7\u00e3o duplicada, a informa\u00e7\u00e3o proveniente da RTS ser\u00e1 preterida. A informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos ser\u00e1 duplicada quando a data da prescri\u00e7\u00e3o, o c\u00f3digo identificador do medicamento e o respons\u00e1vel pela prescri\u00e7\u00e3o forem iguais, e nessa circunst\u00e2ncia a prescri\u00e7\u00e3o proveniente da BDNP ser\u00e1 aquela que prevalece.\n32\n5\tImplementa\u00e7\u00e3o\nNeste cap\u00edtulo descreveremos os servi\u00e7os implementados, e a camada de interface desenvolvida no portal dos profissionais da RTS.\nAs ilustra\u00e7\u00f5es fornecidas com captura de ecr\u00e3 utilizaram dados fict\u00edcios, em ambiente de laborat\u00f3rio.\n5.1\tServi\u00e7os implementados\nTal como especificado, foram implementados dois servi\u00e7os:\nTabela 1 - Servi\u00e7os Desenvolvidos\nServi\u00e7o\tDescri\u00e7\u00e3o\nWS Prescriptions\tExtens\u00e3o \u00e0 plataforma RTS M\u00f3dulo respons\u00e1vel por efetuar extra\u00e7\u00e3o e agrega\u00e7\u00e3o de informa\u00e7\u00e3o de prescri\u00e7\u00e3o eletr\u00f3nica e transformar essa informa\u00e7\u00e3o para ser export\u00e1vel para a rede epSOS\nBDNP\tM\u00f3dulo respons\u00e1vel por simular o reposit\u00f3rio nacional de prescri\u00e7\u00f5es de receitas m\u00e9dicas\n5.1.1\tWS Prescriptions\nO primeiro m\u00f3dulo que temos referido como WS Prescriptions, foi implementado dentro da RTS na sua camada de servi\u00e7os, RTS.WS.\nEste servi\u00e7o foi implementado segundo o protocolo SOAP, permitindo a sua invoca\u00e7\u00e3o pelo Portal dos Profissionais, como a tamb\u00e9m permitir a sua invoca\u00e7\u00e3o por servi\u00e7os externos \u00e0 RTS (por exemplo: epSOS). O WS Prescriptions faz a invoca\u00e7\u00e3o de outros servi\u00e7os que integram a RTS, presentes na mesma camada, o WS dos Pacientes e o WS dos Epis\u00f3dios. A comunica\u00e7\u00e3o com estes \u00e9 feita atrav\u00e9s do RTS.IENGINE que \u00e9 um middleware que permite a invoca\u00e7\u00e3o de outros servi\u00e7os, disponibilizando a informa\u00e7\u00e3o no modelo de dados da RTS. O WS Prescriptions pede ao WS dos Pacientes todos os epis\u00f3dios para um dado paciente. Este retorna uma lista de epis\u00f3dios (Figura\n11)\t. Para cada epis\u00f3dio, pelo atributo \u201cepisodeSummaryld\u201d, \u00e9 feito um novo pedido ao WS mas dos Epis\u00f3dios, para obter a carta de alta do epis\u00f3dio, DischargeResume (Figura\n12)\t.\nPara a intera\u00e7\u00e3o com servi\u00e7os externos, como o caso do projeto europeu, epSOS, e com o reposit\u00f3rio nacional de prescri\u00e7\u00f5es de receitas m\u00e9dicas, a BDNP, foram utilizados modelos de dados espec\u00edficos de acordo com as especifica\u00e7\u00f5es de interoperabilidade de cada projeto.\nTabela 2 - M\u00e9todos implementados pelo WS das prescri\u00e7\u00f5es\nM\u00e9todo\tDescri\u00e7\u00e3o\tParametro(s) de entrada\tRetorno\ngetPrescriptionsBySNS\tRetorna uma lista de prescri\u00e7\u00f5es por utente\tIdentificador do utente (SNS - ID do Servi\u00e7o Nacional de Sa\u00fade)\tRetorna uma lista de prescri\u00e7\u00f5es (Prescription)\ngetPrescriptionByID\tRetorna uma prescri\u00e7\u00e3o pelo seu identificador\tIdentificador da receita\tRetorna uma prescri\u00e7\u00e3o (Prescription)\ngetEPSOSPrescription\tRetorna uma prescri\u00e7\u00e3o no formato epSOS\tIdentificador da receita\tRetorna um XML, (Prescri\u00e7\u00e3o em CDA HL7v3)\nA intera\u00e7\u00e3o com o simulador da BDNP foi feita atrav\u00e9s de um cliente criado a partir do WSDL desse mesmo servi\u00e7o. Posteriormente foi somente invocar os seus m\u00e9todos.\nA comunica\u00e7\u00e3o segura entre o bVS Prescriptions e o simulador da BDNP, foi assegurada por um protocolo de Mutual Certif\u00edcate. Foram gerados certificados com recurso ao OpenSSL [38] para a RTS e aplica\u00e7\u00f5es clientes, neste caso para o simulador da BDNP. O processo de cifra de mensagens decorre com recurso a chaves assim\u00e9tricas, apoiado nos certificados configurados nas entidades intervenientes. Como a BDNP retorna mensagens XML, para a extra\u00e7\u00e3o da informa\u00e7\u00e3o obtida, foi usado o DOM [39].\nPara a cria\u00e7\u00e3o de documentos cl\u00ednicos orientados a opera\u00e7\u00f5es de interoperabilidade transfronteiri\u00e7a, foi necess\u00e1rio recorrer \u00e0s bibliotecas Model-Driven Health Tools da Open Health Tools [35]. Estas bibliotecas permitem a representa\u00e7\u00e3o dos dados de prescri\u00e7\u00e3o de medicamentos em documentos cl\u00ednicos de acordo com as\nespecifica\u00e7\u00f5es do reference model HL7v3. Estas bibliotecas possuem uma estrutura que vai sendo preenchida com os dados da prescri\u00e7\u00e3o. Contudo nem sempre os dados podem estar na mesma nota\u00e7\u00e3o da rede epSOS, estas bibliotecas possuem tamb\u00e9m um conjunto m\u00e9todos, c\u00f3digos e terminologias para efetuar essa tradu\u00e7\u00e3o. Foi no entanto necess\u00e1rio criar um conjunto de terminologias extra, que n\u00e3o tinham suporte nessas ferramentas, para especificar alguns dados relevantes da prescri\u00e7\u00e3o, para que todos os campos do documento ficassem preenchidos corretamente no formato epSOS [6].\n5.1.2\tBDNP (Base de Dados Nacional de Prescri\u00e7\u00f5es) simulador\nEste segundo m\u00f3dulo implementado, a BDNP, foi um servi\u00e7o implementado por forma a recriar o reposit\u00f3rio nacional de prescri\u00e7\u00f5es de receitas m\u00e9dicas. Este servi\u00e7o foi criado externamente \u00e0 RTS como um servi\u00e7o independente. Foi orientado a servi\u00e7o e implementado segundo o protocolo SOAP, por forma a ser reutiliz\u00e1vel e acess\u00edvel a terceiros.\nFoi criada uma base de dados PostgreSQL [40] num servidor do IEETA, com o intuito de armazenar informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos. A base de dados foi desenvolvida com base no modelo de dados descrito no modelo de refer\u00eancia da ACSS\n[18]. A gera\u00e7\u00e3o da base de dados e manipula\u00e7\u00e3o dos mesmos foi conseguido, com recurso a Java Persistence API (JPA).\nFoi criado um WebService que implementa os m\u00e9todos descritos abaixo:\nTabela 3 - M\u00e9todos implementados pelo WebService da BDNP\nM\u00e9todo\tDescri\u00e7\u00e3o\tParametro(s) de entrada\tRetorno\ngetReceitasBySNS\tRetorna uma lista de receitas por utente\tIdentificador do utente (SNS - ID do Servi\u00e7o Nacional de Sa\u00fade)\tRetorna um XML que cont\u00e9m uma lista de receitas\ngetReceitaBylD\tRetorna uma receita pelo ID da mesma\tIdentificador da Receita\tRetorna uma receita codificada em XML\nO primeiro m\u00e9todo, obten\u00e7\u00e3o de receitas por utente, destina-se a aplica\u00e7\u00f5es como a RTS, que pretendam obter todas as receitas de medicamentos por utente. O segundo m\u00e9todo, obter uma receita com base no seu identificador, destina-se a aplica\u00e7\u00f5es como a RTS, mas tamb\u00e9m, a farm\u00e1cias para poderem dispensar o medicamento de uma\ndeterminada receita, como descrito num processo de prescri\u00e7\u00e3o eletr\u00f3nica. A constru\u00e7\u00e3o dos documentos XML que representam a(s) receita(s), foi efetuada atrav\u00e9s das bibliotecas DOM [39].\nFoi desenvolvida uma camada Web, para funcionar como uma esp\u00e9cie de interface minimalista de prescri\u00e7\u00e3o eletr\u00f3nica de medicamentos, por forma a facilitar a escrita na base de dados. A informa\u00e7\u00e3o relativa a medicamentos foi obtida com recurso a uma base de dados Oracle [41], base de dados dos medicamentos dispon\u00edvel. A camada de interface foi desenvolvida em JSP com recurso a JavaScript, fazendo uso do jQuery [42] para pesquisa de medicamentos. As seguintes figuras ilustram o processo de adi\u00e7\u00e3o de uma prescri\u00e7\u00e3o \u00e0 BDNP.\nFigura 15 - Pesquisar um utente no servidor na interface Web da BDNP\nNa figura 15, o utilizador introduz o n\u00famero do servi\u00e7o nacional de sa\u00fade do utente numa SearchBox e posteriormente \u00e9 redirecionado para uma p\u00e1gina com todas prescri\u00e7\u00f5es associadas ao utente, de real\u00e7ar que isto \u00e9 um ambiente simulado da\u00ed, existirem poucas prescri\u00e7\u00f5es (Figura 16).\nBase de Dados Nacional de Prescri\u00e7\u00f5es ieeta\nHome Prescri\u00e7\u00f5es Administradores About Contacts\nPresotoes\nUtente: 200000777\nA prescri\u00e7\u00e3o foi inserida com sucesso!\n902\nRemover Detalhes\n952\nRemover Detalhes\nAdicionar Prescri\u00e7\u00e3o\nDesigned by\nFigura 16 - P\u00e1gina com todas as prescri\u00e7\u00f5es associadas ao utente\nAo clicar no bot\u00e3o \u201cAdicionar Prescri\u00e7\u00e3o\u201d somos redirecionados para uma nova p\u00e1gina, para adicionar uma prescri\u00e7\u00e3o.\nHenovavei: N\u00famero de Vias:\nbim ;\nObserva\u00e7\u00f5es: Nenhuma\nLinhas da Receita\nMedicamento:\n[Tromalyt- 5091400- 300 mg- e|\nQuantidade:\nDiploma:\nPosologia:\n1 cp 12/12h\nDescri\u00e7\u00e3o Dispensa:\nDCI t Remover Linha\nMedicamento:\nZovirax - 4641981 - 200 mg - Blil\nQuantidade:\nDiploma:\nPosologia:\n[lcp12/12h|\t\u2014\nDescri\u00e7\u00e3o Dispensa:\nDCI Z Remover Linha\nAdicionar Linha Adicionar Prescri\u00e7\u00e3o\nFigura 17 - P\u00e1gina para adicionar prescri\u00e7\u00f5es\nTodas estas p\u00e1ginas foram criadas somente para facilitar o processo de adi\u00e7\u00e3o de prescri\u00e7\u00f5es \u00e0 BDNP. Para o preenchimento dos dados do medicamento como \u00e9 poss\u00edvel verificar na figura 17, o mesmo n\u00e3o \u00e9 preenchido manualmente, o utilizador escreve o nome do medicamento na TextBox, que faz uso do jQuery para autocomplete com a informa\u00e7\u00e3o proveniente da base de dados dos medicamentos, os par\u00e2metros retornados s\u00e3o os suficientes, para preencher a tabela com a informa\u00e7\u00e3o do medicamento.\n5.2\tIncrementos \u00e0 RTS\nOs incrementos efetuados sobre a RTS, para al\u00e9m do servi\u00e7o desenvolvido na sua camada de servi\u00e7os, o WS Prescriptions, foram sobretudo na sua camada Web, no Portal dos Profissionais.\nAp\u00f3s o utilizador concluir o processo de autentica\u00e7\u00e3o, tem a possibilidade de procurar um utente. Ap\u00f3s pesquisar o utente, o utilizador tem a possibilidade consultar algumas informa\u00e7\u00f5es relevantes ao utente, assim como o seu processo clinico, boletins de vacinas e agora, passa a ter a possibilidade de poder aceder ao historial de medica\u00e7\u00e3o prescrita ao utente (Figura 18).\nFigura 18 - Novo campo para aceder ao historial de prescri\u00e7\u00f5es na informa\u00e7\u00e3o do utente\nAo selecionar essa op\u00e7\u00e3o, o utilizador \u00e9 remetido para uma nova p\u00e1gina. Nesta nova p\u00e1gina, \u00e9 mostrada uma tabela com informa\u00e7\u00e3o de medicamentos prescritos. A informa\u00e7\u00e3o disposta nesta p\u00e1gina s\u00e3o medicamentos obtidos atrav\u00e9s da invoca\u00e7\u00e3o do m\u00f3dulo desenvolvido, o bVS Prescriptions.\n@ Aplica\u00e7\u00f5es Locais Sistema \u00abO\nV - a Prescri\u00e7\u00f5es - Mozilla Firefox\nFicheiro Editar Ver Hist\u00f3rico Marcadores Ferramentas Ajuda \u2019\t\u2019\t\u2019 ' lfiL_ \u2019\t\u2019\nI \u00a1si Prescri\u00e7\u00f5es\nI gg) http://localho5t:8080/rts/m_prescricoes/prescricao.jsp?d-16544-s=1&amp;d-16544-0=1 &amp;d-16544-px1&amp;rtsid=824\u00a3.Ci\t\u25bc G\tGoogle\n&amp;\t&amp;\nDralWs\tEstado\n\t\tI Respons\u00e1vel\t\t\tI Forma Farmac\u00eautica\tPosologia\t\t\t\t\t\n\u25a1\t2012-10-11\tDrDIogo Soares\t\t1\tComprimido de liberta\u00e7\u00e3o prolongada\t1 cp ao jantar\t225 mg\tfalse\t\t\tBDNP\n\u25a1\t2012-10-04\tDrDIogo Soares\tTromalyt 150 mg\t2\tC\u00e1psula de liberta\u00e7\u00e3o modificada\t1 comprimido de 12 em 120\t150 mg\tfalse\tnld\tN\u00e3o-dispon\u00edvel\tBDNP\nr\t2012-10-02\tDrDIogo Soares\tFilotempo\t1\tComprimido de liberta\u00e7\u00e3o prolongada\t1 cp 12/1211\t225 mg\tfalse\ts\tN\u00e3od.spon\u00edvel\tBDNP\n\u25a1\t2006-12-16\tDR SU SANA COSTA\tFilotempo\t2\tComprimido de liberta\u00e7\u00e3o prolongada\t1 cp de 12/120\t\tfalse\t\t\tRTS\n\u25a1\t2006-12-16\tDR SU SANA COSTA\tTromalyt\t2\tC\u00e1psula de liberta\u00e7\u00e3o modificada\t1 cp de 12/120\t\tfalse\t[U +(i)\ty Consultar\tRTS\n\u25a1\t2006-12-16\tDR SUSANA COSTA\ts\t2\tComprimido\t1 cp de 12/120\t\tfalse\t|fcS *(1>\t\tRTS\n\u25a1\t2006-06-19\tDR MARIA CARMO\tcover syl\t2\tComprimido\t1 cp de 12/12h\t\tfalse\ts\ty Consultar\tRTS\n\u25a1\t2005-11-13\tDR AM\u00c9RICO SANTOS\tLasl\u00bb\t1\tComprimido\t1 cp de 12/120\t\tfalse\tnld\ty Consultar\tRTS\n\u25a1\t2005-11-13\tDR AM\u00c9RICO SANTOS\t[Eig\t1\tComprimido\t1 cp de 12/120\t\tfalse\t\tpig Consultar\tRTS\n\u25a1\t2005-11-13\tDR AM\u00c9RICO SANTOS\tcover syl\t1\tComprimido\t1 cp de 12/120\t\tfalse\tnld\ty consultar\tRTS\n\u25a1\t2004-12-21\tDR DANIEL PINTO\tI\u2122\"*1!\t1\tC\u00e1psula de liberta\u00e7\u00e3o modificada\t1 cp de 12/120\t\tfalse\t[U -\u00bb(3>\tJ consultar\tRTS\n\u25a1\t2004-12-16\tDR MARIA CARMO\t\t2\tComprimido\t1 cp de 12/120\t\tfalse\tnld\ty consultar\tRTS\nn\t2004-12-16\tDR MAR IA CARMO\t\t1\tComprimido de liberta\u00e7\u00e3o prolongada\t1 cp de 12/120\t\tfalse\t\ty consultar\tRTS\n\u25a1\t2004-10-14\tDR DANIEL PINTO\tLasix)\t1\tComprimido\t1 cp de 12/120\t\tfalse\tnld\ty consultar\tRTS\n\u25a1\t2004-02-17\tDR MAR IA CARMO\t\t1\tComprimido\t1 cp de 12/120\t\tfalse\t[tS~Tw1\ty consultar\tRTS\nFigura 19 - Vista de medicamentos prescritos em grelha (grid)\nOs medicamentos prescritos s\u00e3o dispostos por ordem cronol\u00f3gica (Figura 19). Informa\u00e7\u00f5es como o nome comercial do medicamento prescrito, o prescritor, a quantidade prescrita, forma farmac\u00eautica do medicamento, posologia, dosagem, entre outras informa\u00e7\u00f5es s\u00e3o aqui dispostas. Optou-se por utilizar o nome comercial do medicamento em detrimento da subst\u00e2ncia ativa, pois atrav\u00e9s do nome comercial \u00e9 poss\u00edvel obter a subst\u00e2ncia ativa j\u00e1 o inverso n\u00e3o se verifica pois diferentes medicamentos podem ter a mesma subst\u00e2ncia ativa. \u00c9 tamb\u00e9m poss\u00edvel determinar o tipo de fonte da prescri\u00e7\u00e3o, RTS, no caso de ser um medicamento prescrito num epis\u00f3dio de contacto da RTS ou BDNP, no caso de ser um medicamento de uma prescri\u00e7\u00e3o do reposit\u00f3rio nacional. No caso de ser um medicamento oriundo da RTS, \u00e9 poss\u00edvel ainda relacionar esse medicamento, com o epis\u00f3dio cl\u00ednico onde foi feita a sua administra\u00e7\u00e3o ao paciente, da\u00ed existir a op\u00e7\u00e3o de consulta do resumo do epis\u00f3dio, assim como eventuais detalhes do epis\u00f3dio.\nTamb\u00e9m \u00e9 permitido ao utilizador obter detalhes sobre o medicamento, ao clicar sobre o nome comercial do mesmo. \u00c9 aberta uma janela com informa\u00e7\u00f5es do prontu\u00e1rio terap\u00eautico do medicamento (Figura 20).\nFigura 20 - Janela do prontu\u00e1rio terap\u00eautico, aberta ap\u00f3s clique no nome do medicamento\nNo canto superior direito, \u00e9 poss\u00edvel verificar que existe dois tipos de vista (Figura\n21). Neste caso \u00e9 a vista em grelha que est\u00e1 selecionada, vista selecionada por omiss\u00e3o.\nFigura 21 - Bot\u00f5es para alternar entre as vistas de grid e timeline\nAo selecionar a outra vista, a vista em cronologia (timeline), o utilizador pode agora consultar a informa\u00e7\u00e3o de medicamentos prescritos e os seus detalhes numa perspetiva temporal.\nM\u00e9dico: Dr.Diogo Soares\nNome comercial: Tromalyt 150 mg\nPosologia: 1 comprimido de 12 em 12h\nDosagem: 150 mg\nForma Farmac\u00eautica: C\u00e1psula de liberta\u00e7\u00e3o modificada\nQuantidade: 2\n&amp;\tft,\nDetalhes\tEstado\n\u00ae Prescri\u00e7\u00f5es - Mozilla F... '\nFigura 22 - Vista em cronologia de medicamentos prescritos\nNesta vista (Figura 22), os medicamentos s\u00e3o distribu\u00eddos numa barra temporal de acordo com a sua data de prescri\u00e7\u00e3o. Esta vista \u00e9 uma p\u00e1gina JSP implementada com recurso a c\u00f3digo ativo, JavaScript. A informa\u00e7\u00e3o dos medicamentos \u00e9 obtida atrav\u00e9s do m\u00f3dulo implementado bVS Prescriptions.\n5.3\tExporta\u00e7\u00e3o de prescri\u00e7\u00f5es no formato epSOS\nUma prescri\u00e7\u00e3o para ser exportada para a rede epSOS tem que estar orientada a um modelo de refer\u00eancia de troca de documentos cl\u00ednicos. Como tal, foi necess\u00e1rio identificar o formato do documento, e desenvolver uma funcionalidade para executar essa convers\u00e3o. No m\u00f3dulo bVS Prescriptions foi desenvolvido um m\u00e9todo denominado \u201cgetEPSOSPrescription\u201d, em que lhe \u00e9 passado como par\u00e2metro o identificador da receita a converter, e \u00e9 retornado um ficheiro XML v\u00e1lido na rede epSOS. Ao receber o identificador da receita, o m\u00f3dulo constr\u00f3i a respetiva Prescri\u00e7\u00e3o e faz a sua convers\u00e3o. No processo de convers\u00e3o, s\u00e3o usadas as bibliotecas da Open-Health-Tools. \u00c9 criado um\ndocumento cl\u00ednico orientado \u00e0 arquitetura HL7, posteriormente convertido para XML. O documento \u00e9 preenchido com os respetivos c\u00f3digos, que o identificam como um documento cl\u00ednico de prescri\u00e7\u00e3o de medicamentos. S\u00e3o tamb\u00e9m preenchidos os campos com a informa\u00e7\u00e3o do utente, e de o autor da prescri\u00e7\u00e3o. Posteriormente \u00e9 criada uma sec\u00e7\u00e3o para inserir a informa\u00e7\u00e3o de medicamentos prescritos (Figura 23).\nLUU<- X.O.U.X.-X.X.XX.OOC.XX.XU.X.O.X.O.X\ncmanufacturedM aterial >\n-<code code=\"R03DA05\" codeSystem=\"2.16.840.1.113883.6.73\" codeSystemName=''ATC\" displayName=\"ammophylline\">\n-\t<originalText>\n\u00ab^reference value=\"#med.0\"/> c/originalText>\n</code>\ncname>Filotempo&lt;/name >\ncepsos:formCode code=\"10227000\" codeSystem=\"l.3.6.1.4.1.12559.11.10.1.3.1.44.1\" codeSystemName=\"EDQM\" displayName=\"Modified-release tablet\"/>\n-\tceps os: as Content classCode=\"CONT\">\n-\t<epsos:containerPackagedMedicine classCode=\"CONT\" determinerCode=\"INSTANCE\">\nceps os: n ame >Filotempo&lt;/eps os: n ame > ceps os: f ormC o de nullFlavor=\" NI\"/> cepsos:capacityQuantity value=\"l cp 12/12h\" unit=\"l\"/>\n</epsos:containerPackagedMedicine>\nc/epsos:asContent>\n\u2014\tcepsos:ingredient classCode=\"ACTI\">\n-\tcepsos:quantity>\n<epsos:numerator value=\"225 \" unit=\"mg\"/> cepsos: denominator nullFlavor=\"UNK\"/>\n</epsos :quantity>\n-cepsosdngredient classCode=\"MMAT\" detennineiCode=\"KIND\">\n<epsos:code xsi:type=\"CE\" code=\"R03DA05\" codeSystem=\"2.16.840.1.113883.6.73\" codeSystemName=\"ATC\" displayName=\"a minophylline\"/>\nceps os: n ame >aminophyllin.e</eps os: n ame >\nc/epsos:ingredient>\nc/epsos:ingredient> c/manufacturedMaterial>\nFigura 23 - Informa\u00e7\u00e3o de um medicamento no documento cl\u00ednico\nPara preencher corretamente os campos do medicamento \u00e9 necess\u00e1rio fazer algumas normaliza\u00e7\u00f5es aos seus dados. Para isso recorreu-se \u00e0 c\u00f3pia base de dados dos medicamentos, para se obter o c\u00f3digo Anathomical Therapeutical Chemical (ATC) [43] do medicamento, assim como o nome da respetiva subst\u00e2ncia ativa.\nVoltando \u00e0 vista em grelha, foi adicionada uma funcionalidade, com o intuito de demonstrar a constru\u00e7\u00e3o de um documento cl\u00ednico orientado ao formato epSOS, com base no modelo de dados usados. A funcionalidade consiste, em selecionar um conjunto de medicamentos, e carregar no bot\u00e3o \u201cExportar Prescri\u00e7\u00f5es\".\n\t\t* I Respons\u00e1vel\tCH Al<\n\u25a1\t2012-10-11\tDrDiogo Soares\t\n\u25a0\t2012-10-04\tDr.Diogo Soares\tTto\n\u25a1\t2012-10-02\tDr.Diogo Soares\t\n\u25a1\t2006-12-16\tDR SUSANA COSTA\t\n0\t2006-12-16\tDR SUSANA COSTA\t12\u00b0\n\u25a1\t2006-12-16\tDR SUSANA COSTA\tLa;\n0\t2006-06-19\tDR MARIA CARMO\t\n\u25a1\t2005-11-13\tDR AM\u00c9RICO SANTOS\tLa!\n\u25a1\t2005-11-13\tDR AM ER ICO SANTOS\t\n\u25a1\t2005-11-13\tDR AMERICO SANTOS\t\n\u25a0\t2004-12-21\tDR DANIEL PINTO\t\n\u25a1\t2004-12-16\tDR MARIA CARMO\tLas\no\t2004-12-16\tDR MARIA CARMO\tPih\n\u25a1\t2004-10-14\tDR DANIEL PINTO\tLa,\n\u25a1\t2004-02-17\tDR MARIA CARMO\tLa,\nExportar Prescri\u00e7\u00e3o(\u00f5es) |\nFigura 24 - Exportar medicamentos no formato epSOS, exemplifica\u00e7\u00e3o\nSelecionamos um conjunto de medicamentos, e carregamos no bot\u00e3o para exportar os mesmos (Figura 24). Posteriormente, a RTS re\u00fane as receitas onde esses medicamentos foram prescritos e, s\u00e3o essas receitas que v\u00e3o ser exportadas para CDA Hl7v3 (Figura 25), uma vez que estamos a exportar receitas e n\u00e3o medicamentos.\n|B http://localhost:8080/rts/Ret:urnEpsosDocumentXML?receitalD=BDNP:1002&amp;sns=200000777&amp;rtsicl=824\tv|e| Google\t<\u00c7|\t\u2019\n-&lt;ClinicalDocument xsi:schemaLocation=\"urn:hl7-org:v3 ..\\schema\\CDA_extended.xsd\">\ndypeldroot=\"2.16.840.1.113883.1.3\" extension=\"P0CDHD000040\u20197>\ndemplateld root=\" 1.3.6.1.4.1.12559.11.10.1.3.1.1. l'/>\nddroot=\"2.16.840.1.113883.19.4\" extension= 'epSOS.EPrescription.PT.1002.200000777\u20197>\nccode code=\"57833-6\" codeSystem=\"2.16.840.1.113883.6.1\" codeSystemName=\"LOINC\" displayName=\"ePrescription\"/>\n<title>epSOS Receita Electronica - epSOS ePrescription</titIe>\n<effectiveTime value=\u201d20121024\"/>\ncconfidentialityCode code=\"N\" code System=\"2.16.840.1.113883.5.25\" codeSystemName= \"HL7 Confidentiality\" displayName=\"normal7> danguageCode code=\"pt-PT\u20197>\n<versionNumber value=\" 17>\n\u2014&lt;recordTarget>\n-\t<patientRole>\ndd root=\"2.16.840.1.113883.19.4\" extension=\"200000777\u20197>\n<addr null Flavor = \"NI />\n<telecom nullFIavor=\"NI'7>\n-\t<patient>\n\u2014\t<name>\n&lt;given> MARTIN</given>\n<family>CUNHA</family>\n</name>\n<administrativeGenderCode code=\"M\" codeSystem=\"2.16.840.1.113883.5.1\" codeSystemName=\"HL7 AdministrativeGender\" displayName=\"Male\u20197> cbirthTime value=\u201d19650407\"/>\n</patient>\n</patientRole>\nc/recordTarget>\n-<author>\tn\ndime value=\"2D1210247>\tW\n-\t-cassignedAuthor classCode=\"ASSIGNED\">\n-\t<assignedAuthoringDevice>\n<\tm anuf actur erMo delN am e> EpS OS. PT. NationalC onne ctor</m anuf actur erMo delN am e>\n<\tsoftwdreName>Portuguese National Connectorc/softwareNamea-\n</assignedAuthoringDevice>\n-\t<representedOrganization>\ndd nullFlavor=\"NA\u20197>\n<name>IEETA-UA</name>\n-\t<addr>\n\u00dc [RTS.PRO-NetBeans I...\t\u00ae Mozilla Firefox\nFigura 25 - Receita no formato epSOS\nFinalmente para garantir a integridade do mesmo foram feitos testes de valida\u00e7\u00e3o sobre o documento gerado com o intuito de garantir a conformidade do mesmo com as \u201cregras\u201d de interoperabilidade entre sistemas de sa\u00fade. A valida\u00e7\u00e3o de CDAs \u00e9 feita atrav\u00e9s de Schematrons, um Schematron \u00e9 uma linguagem baseada em regras de valida\u00e7\u00e3o para fazer asser\u00e7\u00f5es sobre a presen\u00e7a ou aus\u00eancia de padr\u00f5es em documentos XML. Neste caso o Schematron define os requisitos a testar num CDA com base nos Schemas do epSOS. S\u00e3o validadas, a estrutura e os campos do XML produzido. Foi utilizado a p\u00e1gina da IHE - Integrating the Healthcare Enterprise [44] para efetuar a verifica\u00e7\u00e3o [45].\nExistem dois tipos de Schematrons para efectuar a verifica\u00e7\u00e3o de CDAs de prescri\u00e7\u00f5es:\n\u2022\tepSOS ePrescription Friendly\n\u2022\tepSOS ePrescription Pivot\nNo primeiro caso (Figura 26), \u00e9 validado somente a arquitetura do documento, no segundo (Figura 27) \u00e9 feita a valida\u00e7\u00e3o da arquitetura do documento assim como os c\u00f3digos. Muito embora o segundo Schematron seja mais completo que o primeiro, foram ambos usados para validar os CDAs produzidos.\nFigura 26 - Valida\u00e7\u00e3o do CDA com o epSOS - ePrescription - Friendly Schematron\nFigura 27 - Valida\u00e7\u00e3o do CDA com o epSOS - ePrescription - Pivot Schematron\n44\n6\tConclus\u00f5es\nA proposta de trabalho visava o desenvolvimento de servi\u00e7os de extra\u00e7\u00e3o e agrega\u00e7\u00e3o de informa\u00e7\u00e3o de prescri\u00e7\u00e3o dispon\u00edvel em sistemas de informa\u00e7\u00e3o cl\u00ednicos e a sua apresenta\u00e7\u00e3o consolidada a profissionais de sa\u00fade, estendendo a RTS com novas capacidades para obter e apresentar a informa\u00e7\u00e3o de prescri\u00e7\u00e3o. Assim como o desenvolvimento de uma fonte de dados que representasse a base de dados nacional de prescri\u00e7\u00f5es de medicamentos, e por fim desenvolvimento de m\u00e9todos necess\u00e1rios para exportar informa\u00e7\u00e3o de prescri\u00e7\u00e3o de medicamentos para a rede epSOS.\n6.1 Resultados\nPrimeiro, face ao fato de n\u00e3o estar dispon\u00edvel o acesso \u00e0 base de dados nacional de prescri\u00e7\u00f5es, foi implementado um servi\u00e7o que emulasse o efeito, ou seja, que retornasse prescri\u00e7\u00f5es de medicamentos por utente. Posteriormente foi criado um m\u00f3dulo interno \u00e0 RTS para fazer a extra\u00e7\u00e3o, agrega\u00e7\u00e3o e transforma\u00e7\u00e3o da informa\u00e7\u00e3o de prescri\u00e7\u00e3o, e finalmente estendemos o Portal dos Profissionais da RTS para a apresenta\u00e7\u00e3o das mesmas.\nAssim a RTS passa a dispor de mecanismos que permitam a consulta de informa\u00e7\u00e3o agregada de prescri\u00e7\u00e3o de medicamentos. O Profissional de Sa\u00fade ao aceder ao Portal dos Profissionais da RTS passa a dispor de uma sec\u00e7\u00e3o onde poder\u00e1 consultar o historial de medicamentos prescritos ao utente no momento da avalia\u00e7\u00e3o do contexto cl\u00ednico do utente, assim como poder\u00e1 consultar informa\u00e7\u00f5es sobre o medicamento tais como a sua subst\u00e2ncia ativa e eventuais contraindica\u00e7\u00f5es.\nNo entanto, faltou testar a interface desenvolvida junto de profissionais cl\u00ednicos. A aprecia\u00e7\u00e3o de profissionais de sa\u00fade seria importante para eventuais melhorias a efetuar sobre o trabalho desenvolvido.\n6.2\tTrabalho Futuro\nApesar dos objetivos da disserta\u00e7\u00e3o terem sido alcan\u00e7ados, h\u00e1 sempre melhorias a fazer. A melhoria que salta mais \u00e0 vista, \u00e9 a substitui\u00e7\u00e3o da fonte de dados que simula o reposit\u00f3rio nacional de prescri\u00e7\u00f5es, pelo reposit\u00f3rio real. Contudo n\u00e3o \u00e9 a \u00fanica modifica\u00e7\u00e3o a fazer. A RTS cont\u00e9m modelos de dados orientados \u00e0 interoperabilidade cl\u00ednica, no entanto as interfaces dos centros de sa\u00fade e hospitais da RTS usam outros modelos de dados para submeter dados para a rede. Um caso concreto \u00e9 por exemplo a descri\u00e7\u00e3o dos medicamentos prescritos, encontrados no sum\u00e1rio de um epis\u00f3dio cl\u00ednico. Estes dados n\u00e3o contemplam toda a informa\u00e7\u00e3o relevante a uma prescri\u00e7\u00e3o. Uma melhoria significativa passaria por adicionar mais campos a esses modelos de dados e logicamente estender as interfaces j\u00e1 existentes nos centros de sa\u00fade e hospitais da RTS, a suportar opera\u00e7\u00f5es que preencham esses mesmos campos.\n7\tRefer\u00eancias\n[1]\tMinist\u00e9rio da Sa\u00fade. RSE - Registo de Sa\u00fade Electr\u00f3nico, R1: Documento do Estado de arte. [Online]. Available: http://www.portaldasaude.pt/NR/rdonlyres/4156EEEF-E601-4ADA-AEB7-14E01F5F52FC/0/RSE R1 Estado da Arte V3.pdf Accessed Oct, 2012.\n[2]\tAna Jorge. Comiss\u00e3o Parlamentar da Sa\u00fade, Audi\u00e7\u00e3o na Comiss\u00e3o Parlamentar da Sa\u00fade, interven\u00e7\u00e3o da Ministra da Sa\u00fade. [Online]. Available: http://www.portaldasaude.pt/Portal/Templates/Generic.aspx?NRMODE=Published &amp;NRNODEGUID={4BF5E1E0-67FE-49CF-84A5-1466A46E9141}&amp;NRORIGINALURL=%2Fportal%2Fconteudos%2Fa%2Bsaude% 2Bem%2Bportugal%2Fministerio%2Fcomunicacao%2Fdiscursos%2Be%2Binterve ncoes%2Fcomiss Accessed Oct, 2012.\n[3]\tA. Hasman, Ubiquity: Technologies for Better Health in Aging Societies, Proceedings of Mie2006 vol. 124. Amsterdam: IOS Press, 2006, pp. 57-71.\n[4]\tRede Telem\u00e1tica de Sa\u00fade. http://rtsaude.pt Accessed Oct, 2012.\n[5]\tIC Oliveira and JP Cunha. \u201cIntegration Services to Enable Regional Shared Electronic Health Records\u201d in User Centred Networked Health Care - Proceedings of MIE 2011, Oslo, Norway, 2011, pp. 310-314.\n[6]\tepSOS. Smart Open Services for European Patients - Semantic Services - Pivot Document Specifications. [Online]. Available:\nhttp://www.epsos.eu/uploads/tx epsosfileshare/D3.5.2 Appendix C Pivot Docum ent Specifications 01.pdf Accessed Oct, 2012.\n[7]\tWorld Health Organization. Building Foundations in Europe. Report of the WHO Global Observatory for eHealth. [Online]. Available: http://www.who.int/goe/BFeuroFull.pdf Accessed Oct, 2012.\n[8]\tAlto Comissariado da Sa\u00fade. Plano Nacional de Sa\u00fade 2011-2016 \u201cTecnologias de Informa\u00e7\u00e3o e Comunica\u00e7\u00e3o\u201d. [Online]. Available: http://ser.cies.iscte.pt/index ficheiros/TIC.pdf Acessed Oct, 2012.\n[9]\tSa\u00fade 24. http://www.saude24.pt Accessed Oct, 2012.\n[10]\tJL Monteagudo and O Moreno. eHealth Strategy and implementation activities in Portugal. Report in the framework of the eHealth ERA Project, 2011.\n[11]\tAdministra\u00e7\u00e3o Central do Sistema de Sa\u00fade. Desmaterializa\u00e7\u00e3o da Receita de Medicamentos e da Requisi\u00e7\u00e3o de MCDTs. [Online]. Available:\nhttp://www.acss.min-saude.pt/Portals/O/Desmaterializacao MM.pdf Accessed Oct,\n2012.\n[12]\tGoverno da Republica Portuguesa, Decreto de Lei n.\u00b0 106A/2010. 2010\n[13]\tGoverno da Republica Portuguesa. Memorando de entendimento sobre as condicionalidades de pol\u00edtica econ\u00f3mica. [Online]. Available: http://www.portugal.gov.pt/media/371372/mou pt 20110517.pdf Accessed Oct, 2012.\n[14]\tMinist\u00e9rio da Sa\u00fade. Despacho n.\u00b0 9186/2011. 2011.\n[15]\tMinist\u00e9rio da Sa\u00fade. Monotoriza\u00e7\u00e3o da Prescri\u00e7\u00e3o de Medicamentos de Ambulat\u00f3rio. [Online]. Available: http://www.portaldasaude.pt/NR/rdonlyres/C1FC69DF-4E63-486C-B726-A6E15ACF7DAE/0/RelatMonitPrescripMedsIndNacionaisLocaisJAN2012.pdf Accessed Oct, 2012.\n[16]\tPlano Tecnol\u00f3gico. Agenda Digital: Desmaterializa\u00e7\u00e3o da Prescri\u00e7\u00e3o de Medicamentos e dos MCDTS. [Online]. Available: http://www.planotecnologico.pt/en/lisbon-strategy/priority-lines/4.%20proximity%20healthcare/paper-free-prescriptions/innerpage.aspx?idcat=756&amp;idmastercat=738&amp;idlang=1 Accessed Oct, 2012.\n[17]\tAdministra\u00e7\u00e3o Central do Sistema de Sa\u00fade. (2012). Software para Meios Complementares de Diagn\u00f3stico e Terap\u00eautica. Lista de Fornecedores de MCDT ao abrigo da Declara\u00e7\u00e3o de Conformidade do Fabricante. [Online]. Available: http://www.acss.min-saude.pt/Portals/0/Fornecedores%20MCDT 21nov2012.pdf Accessed Oct, 2012.\n[18]\tAdministra\u00e7\u00e3o Central do Sistema de Sa\u00fade. Base de Dados Nacional de Prescri\u00e7\u00f5es, Interface para recep\u00e7\u00e3o de receitas m\u00e9dicas. [Online]. Available: http://www.acss.min-saude.pt/Portals/0/ET ACSS 20 2011 REV2.pdf Acessed Oct, 2012.\n[19]\tMedCom. http://www.medcom.dk Accessed Oct, 2012.\n[20]\tJP Cunha, I Cruz, IC Oliveira, AS Pereira, CT Costa, AM Oliveira and A Pereira, \u201cThe RTS Project: Promoting Secure and Effective Clinical Telematic Communication within Aveiro Region\u201d in eHealth 2006 High Level Confer\u00eance, M\u00e1laga, 2006.\n[21]\tComission of The European Communities. European Commission Recommendation on cross-border interoperability of eletronic health record\nsystems. [Online]. Available:\nhttp://ec.europa.eu/information society/newsroom/cf/document.cfm?action=display &amp;doc id=513 Accessed Oct, 2012.\n[22]\tSmart Open Services for European Patients (epSOS). http://www.epsos.eu Accessed Oct, 2012.\n[23]\tepSOS. Final definition of functional service requirements - Patient Summary. [Online]. Available:\nhttp://www.epsos.eu/uploads/tx epsosfileshare/D3.2.2 Final Definition Functional Service Req Patient Summary.pdf Accessed Oct, 2012.\n[24]\tepSOS. Final definition of functional service requirements - ePrescription. [Online]. Available:\nhttp://www.epsos.eu/uploads/tx epsosfileshare/D3.1.2 Final Definition of Functio nal Service Requirements ePrescription 01.pdf Accessed Oct, 2012.\n[25]\tHealth Level 7. http://www.hl7.org/ Accessed Oct, 2012.\n[26]\tF Amato, AR Fasolino, A Mazzeo, V Moscato, A Picariello, S Romano and P Tramontana, \u201cEnsuring Semantic Interoperability for e-Health Applications\u201d in International Conference on Complex, Intelligent and Software Intensive Systems, CISIS 2011, Seoul, 2011.\n[27]\tepSOS. epSOS: eDispensation Service. [Online]. Available: http://www.epsos.eu/technical-background/systems-standards/edispensation-service.html Accessed Oct, 2012.\n[28]\tOpen Health Tools (OHT). http://www.openhealthtools.org/ Acessed Oct, 2012.\n[29]\tM Skip and R.Ken, \u201cOpen Health Tools: Tooling for Interoperable Healthcare\u201d in Talent First Network, Ottawa, 2008\n[30]\tModel Driven Health Tools. https://www.projects.openhealthtools.org/sf/projects/mdht/ Accessed on Oct 2012.\n[31]\tW Crawford and J Kaplan, J2EE Design Patterns, Sebastopol, CA: O'Reilly Media,\n2003.\n[32]\tOracle. Java 2 Platform, Entreprise Edition (J2EE) Overview. [Online] Available: http://www.oracleimg.com/technetwork/java/javaee/appmodel-135059.html Accessed Oct, 2012.\n[33]\textensible Markup Language (XML). http://www.w3.org.org/standards/xml/ Accessed Oct, 2012.\n[34]\tGI Paterson, M Shepherd, X Wang, C Watters and D Zitner, \u201cUsing the XML-based Clinical Document Architecture for Exchange Structured Discharge Summaries\u201d in 35th Hawaii International Conference on System Sciences, Island of Hawaii, 2002.\n[35]\tApache Struts. http://struts.apache.org/ Accessed Oct, 2012.\n[36]\tJavaScript. https://developer.mozilla.org/en-US/docs/JavaScript Accessed Oct, 2012.\n[37]\tR. Housley, W. Polk, W. Ford, and D. Solo, Internet x.509 public key infrastructure certificate and certificate revocation list (crl) profile. RFC3280, 66, 2002.\n[38]\tOpenSSL. www.openssl.org Accessed Oct, 2012.\n[39]\tWC3 DOM. www.w3.org/dom/ Accessed Oct, 2012.\n[40]\tPostgreSQL. www.postgresql.org/ Accessed Oct, 2012.\n[41]\tOracle SQL. www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html/ Accessed Oct, 2012.\n[42]\tjQuery. http://jquery.com/ Accessed Oct, 2012.\n[43]\tWorld Health Organization Collaborating Centre for Drug Statistics Methodology. ATC, Structure and Principles. [Online]. Available: http://www.whocc.no/atc/structure and principles/ Accessed Oct, 2012.\n[44]\tIHE. www.ihe.net/ Accessed Oct, 2012.\n[45]\tGazelle IHE. External Validation Service Front-End. [Online]. Available: http://gazelle.ihe.net/EVSClient/cda/validator.seam?cid=467 Accessed Oct, 2012.\n51"}]}}}