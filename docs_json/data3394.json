{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.08476"}, {"@name": "filename", "#text": "13313_Diss_Glenan.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "GLENAN ASSIS DO LAGO \n \n \n \n \n \n \n \n \n \n \n \n \n \n\nEletr\u00f4nica Embarcada para Ensaios de Posicionamento \nDin\u00e2mico em Tanque de Provas \n\n \n \n \n \n \n \n \n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\nS\u00e3o Paulo, 2008 \n\n\n\nGLENAN ASSIS DO LAGO \n \n \n \n \n \n \n \n \n \n \n \n \n \n\nEletr\u00f4nica Embarcada para Ensaios de Posicionamento \nDin\u00e2mico em Tanque de Provas \n\n \n \n \n \n \n \n \n \n\nDisserta\u00e7\u00e3o apresentada \u00e0 Escola Polit\u00e9cnica \nda Universidade de S\u00e3o Paulo para obten\u00e7\u00e3o \ndo T\u00edtulo de Mestre em Engenharia Naval. \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\nS\u00e3o Paulo, 2008 \n\n\n\nGLENAN ASSIS DO LAGO \n \n \n \n \n \n \n \n \n \n \n \n \n \n\nEletr\u00f4nica Embarcada para Ensaios de Posicionamento \nDin\u00e2mico em Tanque de Provas \n\n \n \n \n \n \n \n \n \n\nDisserta\u00e7\u00e3o apresentada \u00e0 Escola Polit\u00e9cnica \nda Universidade de S\u00e3o Paulo para obten\u00e7\u00e3o \ndo T\u00edtulo de Mestre em Engenharia Naval. \n \n \n\u00c1rea de Concentra\u00e7\u00e3o: \nEngenharia Naval e Oce\u00e2nica \n \nOrientador: \nProf. Dr. Helio Mitio Morishita \n \n \n \n \n \n \n \n\nS\u00e3o Paulo, 2008 \n\n\n\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n\nEste trabalho \u00e9 dedicado \u00e0 minha m\u00e3e,  \n\nIara R. Assis Lago e ao meu pai, Paulo L. \n\nLago que, se estivesse aqui, certamente teria \n\nme apoiado em todos os passos dados. \n\n\n\nAgradecimentos \n \n\nAo meu orientador, Professor Doutor Helio Mitio Morishita, pelo fundamental apoio \n\ne tempo despendido na condu\u00e7\u00e3o deste trabalho. \n\n\u00c0 Escola Polit\u00e9cnica da Universidade de S\u00e3o Paulo, pela oportunidade deste \n\ncurso de mestrado e pelos recursos humanos e f\u00edsicos disponibilizados. \n\n\u00c0 Ana Paula Brambila, pela compreens\u00e3o e incentivo no decorrer deste trabalho. \n\nAo mestrando L\u00e1zaro Moratelli Jr, pelo constante apoio t\u00e9cnico e pelas valiosas \n\nhoras despendidas nos ensaios em laborat\u00f3rio.  \n\nAo Professor Doutor Eduardo Aoun Tannuri, pelas importantes dicas nos ensaios \n\nexperimentais. \n\nA Diego Garcia Lopes e aos demais alunos do Departamento de Engenharia \n\nNaval e Oce\u00e2nica da USP que de alguma forma contribu\u00edram para o andamento \n\ndas atividades deste trabalho. \n\n\u00c0 Petrobr\u00e1s, pelo incentivo t\u00e9cnico e pelo apoio financeiro para a confec\u00e7\u00e3o de \n\ntodo o material utilizado nos estudos. \n\n\n\nSum\u00e1rio \n\n \nLista de Figuras.................................................................................................................... 7 \nLista de Tabelas ................................................................................................................... 8 \nResumo ................................................................................................................................ 9 \nAbstract .............................................................................................................................. 10 \n1. Introdu\u00e7\u00e3o .................................................................................................................. 11 \n\n1.1. Considera\u00e7\u00f5es gerais ......................................................................................... 11 \n1.2. Descri\u00e7\u00e3o de um SPD ........................................................................................ 15 \n1.3. Revis\u00e3o Bibliogr\u00e1fica .......................................................................................... 19 \n1.4. Objetivos............................................................................................................. 22 \n\n2. Modelagem Matem\u00e1tica ............................................................................................. 23 \n2.1. Modelagem do ve\u00edculo ....................................................................................... 23 \n\n2.1.1. Movimentos de baixa freq\u00fc\u00eancia ................................................................ 23 \n2.1.2. Movimentos de alta freq\u00fc\u00eancia ................................................................... 24 \n2.1.3. Modelo completo ........................................................................................ 25 \n2.1.4. Modelo para filtro de Kalman ...................................................................... 25 \n2.1.5. Modelo completo e o sistema de medi\u00e7\u00e3o ................................................. 27 \n2.1.6. Modelo completo discretizado .................................................................... 29 \n\n2.2. Filtro de Kalman ................................................................................................. 29 \n2.2.1. Teoria.......................................................................................................... 29 \n\n2.3. Controle .............................................................................................................. 32 \n2.4. Aloca\u00e7\u00e3o de empuxos ........................................................................................ 34 \n\n3. Aparato experimental ................................................................................................. 36 \n3.1. Aparato eletr\u00f4nico .............................................................................................. 38 \n\n3.1.1. Comunica\u00e7\u00e3o embarcada ........................................................................... 39 \n3.1.2. M\u00f3dulos de r\u00e1dio ........................................................................................ 40 \n3.1.3. M\u00f3dulos de motor DC e de passo .............................................................. 41 \n3.1.4. M\u00f3dulo central ............................................................................................ 42 \n\n3.2. Sistema de aquisi\u00e7\u00e3o da posi\u00e7\u00e3o do modelo no tanque de provas ................... 44 \n3.3. Console central................................................................................................... 48 \n3.4. Modelo em escala .............................................................................................. 53 \n\n3.4.1. Aparato mec\u00e2nico....................................................................................... 54 \n3.4.2. Propulsores (motores el\u00e9tricos).................................................................. 55 \n\n4. Ensaios....................................................................................................................... 57 \n4.1. Motores dos propulsores .................................................................................... 57 \n4.2. Ensaios de empuxos .......................................................................................... 61 \n4.3. Ensaios com o modelo ....................................................................................... 63 \n\n4.3.1. Estabiliza\u00e7\u00e3o do Filtro de Kalman .............................................................. 64 \n4.3.2. Ensaios com modelo vazio ......................................................................... 65 \n\n4.3.2.1. Ensaio 1: \u00e1guas paradas, posi\u00e7\u00e3o fixa ............................................... 67 \n4.3.2.2. Ensaio 2: \u00e1guas paradas, posi\u00e7\u00e3o vari\u00e1vel ........................................ 71 \n\n4.3.3. Ensaios com modelo cheio......................................................................... 73 \n4.3.3.1. Ensaio 3: \u00e1guas paradas, posi\u00e7\u00e3o fixa ............................................... 74 \n4.3.3.2. Ensaio 4: \u00e1guas paradas, posi\u00e7\u00e3o vari\u00e1vel ........................................ 75 \n4.3.3.3. Ensaio 5: incid\u00eancia de vento ............................................................. 77 \n4.3.3.4. Ensaio 7: incid\u00eancia de onda .............................................................. 81 \n\n5. Conclus\u00f5es e sugest\u00f5es ............................................................................................ 86 \n6. Refer\u00eancias Bibliogr\u00e1ficas .......................................................................................... 88 \n\n\n\n7 \n\nLista de Figuras \n\n \nFigura 1.1 - Primeiras instala\u00e7\u00f5es para explora\u00e7\u00e3o mar\u00edtima .................................................................................................. 12 \nFigura 1.2 - Opera\u00e7\u00e3o de al\u00edvio. Navio aliviador conecta-se pr\u00f3ximo ao FPSO [1] ................................................................. 13 \nFigura 1.3 - Diagrama de blocos de um SPD ........................................................................................................................... 15 \nFigura 1.4 - Graus de liberdade num navio [13] ....................................................................................................................... 16 \nFigura 1.5 - Propulsores num navio com SPD ......................................................................................................................... 17 \nFigura 2.1 - Sistemas de coordenadas ..................................................................................................................................... 23 \nFigura 2.2 - Diagrama do bloco de estima\u00e7\u00e3o e controle ......................................................................................................... 32 \nFigura 2.3 - Realimenta\u00e7\u00e3o para cada movimento................................................................................................................... 33 \nFigura 2.4 - Modelo com 3 propulsores: 1 principal e 2 em t\u00fanel ............................................................................................. 35 \nFigura 3.1 \u2013 Topologia utilizada nos experimentos de Hamamatsu [3] .................................................................................... 36 \nFigura 3.2 - Topologia utilizada nos experimentos deste trabalho. .......................................................................................... 37 \nFigura 3.3 - Arquitetura embarcada .......................................................................................................................................... 39 \nFigura 3.4 - M\u00f3dulos de comunica\u00e7\u00e3o sem fio ......................................................................................................................... 40 \nFigura 3.5 - M\u00f3dulo transceptor Radiotronix ............................................................................................................................ 41 \nFigura 3.6 - M\u00f3dulo acionador de motores (DC e passo)......................................................................................................... 42 \nFigura 3.7 - Diagrama de blocos interno do m\u00f3dulo central ..................................................................................................... 42 \nFigura 3.8 - Esquema de alimenta\u00e7\u00f5es no m\u00f3dulo de acionamento de motores .................................................................... 44 \nFigura 3.9 \u2013 Imagem da tela mostrando a localiza\u00e7\u00e3o dos pontos luminosos no modelo ....................................................... 45 \nFigura 3.10 - Varredura do algoritmo de localiza\u00e7\u00e3o ................................................................................................................ 46 \nFigura 3.11 - Evid\u00eancias da distor\u00e7\u00e3o conhecida como \u201cbarril\u201d provocada pela lente da c\u00e2mera. .......................................... 46 \nFigura 3.12 \u2013 Fluxograma dos dados em Visual Basic ............................................................................................................ 48 \nFigura 3.13 - Tela principal do programa em Visual Basic. ...................................................................................................... 49 \nFigura 3.14 - Fluxograma das fun\u00e7\u00f5es em Matlab / Simulink................................................................................................... 50 \nFigura 3.15 - Estrutura  do sistema com filtro de Kalman e bloco de controle. ........................................................................ 51 \nFigura 3.16 - M\u00f3dulo de leitura da refer\u00eancia e posi\u00e7\u00e3o real do modelo. ................................................................................ 51 \nFigura 3.17 - Bloco de controle e aloca\u00e7\u00e3o de empuxos. ........................................................................................................ 52 \nFigura 3.18 - Bloco de escrita das rota\u00e7\u00f5es dos motores para o Visual Basic. ....................................................................... 52 \nFigura 3.19 - Bloco do filtro de Kalman implementado............................................................................................................. 53 \nFigura 3.20 - Algumas vistas do casco do modelo ................................................................................................................... 54 \nFigura 3.21 - Desenho mec\u00e2nico de um propulsor em t\u00fanel [4] ............................................................................................... 55 \nFigura 3.22 - Conjunto do propulsor em t\u00fanel montado ........................................................................................................... 56 \nFigura 4.1 - Arquitetura de cada propulsor de um SPD (real ou experimental) ....................................................................... 58 \nFigura 4.2 - Controles superior e inferior (localizado)............................................................................................................... 58 \nFigura 4.3 - Diagrama de malha fechada para o controle de motor DC ................................................................................... 59 \nFigura 4.4 - Ensaio de implementa\u00e7\u00e3o do controlador de rota\u00e7\u00e3o de um motor DC ............................................................... 61 \nFigura 4.5 - Bloco de aloca\u00e7\u00e3o de empuxos com destaque para os movimentos do propulsor principal ................................ 63 \nFigura 4.6 - Inicializa\u00e7\u00e3o do posicionamento din\u00e2mico ............................................................................................................ 64 \nFigura 4.7 - Estabiliza\u00e7\u00e3o do filtro de Kalman .......................................................................................................................... 65 \nFigura 4.8 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) ...................................................... 68 \nFigura 4.9 - Erros (X,Y, ?) obtidos num ensaio de posicionamento ........................................................................................ 69 \nFigura 4.10 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos ...................................................................................... 70 \nFigura 4.11 - Comparativo entre a solicita\u00e7\u00e3o de rota\u00e7\u00e3o do controlador e a curva fitrada. .................................................... 70 \nFigura 4.12 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) .................................................... 71 \nFigura 4.13 - Trecho em detalhe do movimento em X. A oscila\u00e7\u00e3o observada \u00e9 amortecida ................................................. 72 \nFigura 4.14 - Empuxos resultantes em X, Y e Yaw .................................................................................................................. 72 \nFigura 4.15 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos ...................................................................................... 73 \nFigura 4.16 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) .................................................... 75 \nFigura 4.17 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) .................................................... 76 \nFigura 4.18 - Empuxos resultantes em X, Y e Yaw .................................................................................................................. 76 \nFigura 4.19 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos ...................................................................................... 77 \nFigura 4.20 - Incid\u00eancia de vento a 45\u00ba .................................................................................................................................... 78 \nFigura 4.21 - Incid\u00eancia de vento a 90\u00ba .................................................................................................................................... 78 \nFigura 4.22 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) .................................................... 79 \nFigura 4.23 - Desvios em ? para os dois casos de incid\u00eancia de vento .................................................................................. 80 \nFigura 4.24 - Empuxos resultantes em X, Y e Yaw .................................................................................................................. 81 \nFigura 4.25 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos ...................................................................................... 81 \nFigura 4.26 - Ensaio com ondas. Posi\u00e7\u00e3o inicial do modelo e sentido do deslocamento da refer\u00eancia .................................. 82 \nFigura 4.27 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) .................................................... 83 \nFigura 4.28 - Empuxos resultantes em X, Y e Yaw .................................................................................................................. 84 \nFigura 4.29 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos ...................................................................................... 85 \n\n \n\n\n\n8 \n\nLista de Tabelas \n\n \nTabela 3.1 - Itens do projeto eletr\u00f4nico .................................................................................................................................... 38 \nTabela 3.2 - Dimens\u00f5es do navio t\u00edpico e do modelo em estudo ............................................................................................. 53 \nTabela 3.3 - Posi\u00e7\u00f5es dos motores no modelo. ....................................................................................................................... 54 \nTabela 4.1 - Resultados dos ensaios com propulsores............................................................................................................ 62 \n\n \n\n\n\n9 \n\nResumo \n \n\nNo Brasil a explora\u00e7\u00e3o do petr\u00f3leo est\u00e1 crescendo cada vez mais principalmente \n\ncom as atividades offshore devido \u00e0s constantes descobertas de novas jazidas em \n\nalto mar. Isto cria a necessidade de embarca\u00e7\u00f5es que garantam opera\u00e7\u00f5es mais \n\nseguras o que pode ser obtido com aquelas dotadas de sistemas de \n\nposicionamento din\u00e2mico. \n\nO projeto de um sistema de posicionamento din\u00e2mico n\u00e3o \u00e9 simples sob o ponto \n\nde vista de controle j\u00e1 que \u00e9 um sistema n\u00e3o-linear multivari\u00e1vel sobreatuado; e \n\nn\u00e3o \u00e9 barato devido aos elevados custos de implementa\u00e7\u00e3o. Portanto, para se \n\nprojetar adequadamente este tipo de sistema \u00e9 imprescind\u00edvel a elabora\u00e7\u00e3o de \n\nmeios para ensaiar toda a estrutura real em desenvolvimento num tanque de \n\nprovas utilizando modelos em escala. \n\nNeste trabalho \u00e9 mostrado o projeto, constru\u00e7\u00e3o e testes da eletr\u00f4nica embarcada \n\nde um aparato experimental para ensaios de ve\u00edculos oce\u00e2nicos em tanque de \n\nprovas, cujo projeto baseou-se em aspectos t\u00e9cnicos importantes para seu bom \n\nfuncionamento como a descentraliza\u00e7\u00e3o dos processamentos necess\u00e1rios, a \n\ncomunica\u00e7\u00e3o sem fio robusta com um console central respons\u00e1vel pelo \n\nprocessamento de todos os algoritmos do controlador superior e a preocupa\u00e7\u00e3o \n\ncom a compatibilidade eletromagn\u00e9tica do sistema. \n\nO console central consiste de uma interface de comunica\u00e7\u00e3o com o usu\u00e1rio e dos \n\nblocos de controle que s\u00e3o o filtro de Kalman, o controlador e o alocador de \n\nempuxos. \n\nNos ensaios o desempenho da eletr\u00f4nica \u00e9 averiguado experimentalmente e os \n\nexcelentes resultados obtidos mostram que o modelo responde de acordo com os \n\ncomandos do controlador, principalmente com rela\u00e7\u00e3o aos controles localizados \n\npara cada motor de propulsor contribuindo assim para o bom comportamento do \n\nconjunto. \n\n\n\n10 \n\nAbstract \n \n\nIn Brazil the explotation of oil is increasing mainly with the offshore activities due to \n\nthe new found deposits. This situation requires more safety vessels which can be \n\nachieved using dynamic positioning systems.  \n\nAs a dynamic positioning system is a multivarible non linear and overactuated \n\nsystem, its design is not simple;  and it is also not cheap due to high \n\nimplementation costs. Therefore,  the development of experimental environments \n\nto adequately study and design this type of system is essential.  \n\nThis work shows the embeded electronic project and assembly of an experimental \n\nsetup in order to test floating vessel models. The project was developed based on \n\nimportant technical aspects to guarantee a good performance like processing \n\ndecentralization, robust wireless communication with a central console responsible \n\nby the all control algorithms and the concern with eletromagnetic compatibility of \n\nthe system. \n\nThe central console is composed by a human interface, control and Kalman filter \n\nstructures and a thruster alocation algorithm.  \n\nThe performance of the electronic structure is verified experimentally during the \n\ntests and the excelent results show that the model works in accordance to the \n\ncontroller commands, mainly related to local thruster control which contributes to \n\nthe good system behavior.  \n\n\n\n11 \n\n1. Introdu\u00e7\u00e3o \n \n\n1.1. Considera\u00e7\u00f5es gerais \n\nEsfor\u00e7os para avan\u00e7os tecnol\u00f3gicos no \u00e2mbito de recursos energ\u00e9ticos t\u00eam sido \n\ncada vez maiores como aproveitamento de energias renov\u00e1veis, aumento na \n\nvariedade e quantidade de biocombust\u00edveis e at\u00e9 mesmo recursos h\u00edbridos, ou \n\nseja, a possibilidade de utiliza\u00e7\u00e3o de dois ou mais combust\u00edveis num mesmo ponto \n\nde consumo. \n\nDentre todos os recursos energ\u00e9ticos dispon\u00edveis, o petr\u00f3leo ainda \u00e9 a principal \n\nfonte energ\u00e9tica que move ind\u00fastrias, autom\u00f3veis e um grande mercado de \n\nderivados do dia a dia e ainda ter\u00e1 vida longa j\u00e1 que a substitui\u00e7\u00e3o do petr\u00f3leo por \n\noutras fontes alternativas mais limpas n\u00e3o \u00e9 uma a\u00e7\u00e3o imediata e demanda \n\ngrandes negocia\u00e7\u00f5es pol\u00edticas e avan\u00e7os tecnol\u00f3gicos muito maiores dos que \n\nest\u00e3o sendo investidos ultimamente.  \n\nNo Brasil as principais fontes de petr\u00f3leo se localizam em alto mar e recentemente \n\nnovas jazidas foram descobertas pela Petrobr\u00e1s em \u00e1guas profundas onde a sua \n\nexplora\u00e7\u00e3o se torna mais dif\u00edcil e os custos se elevam bastante. Com base nisso a \n\ntecnologia vem tentando acompanhar essas necessidades e novas alternativas \n\nsurgem ao longo do tempo. \n\n A explora\u00e7\u00e3o do petr\u00f3leo no mar teve seu in\u00edcio no final do s\u00e9culo XIX na \n\nCalif\u00f3rinia e Mar C\u00e1spio em estruturas instaladas na costa mar\u00edtima e que \n\nconseguiam explorar no m\u00e1ximo 6 metros de profundidade (Figura 1.1). [1]  \n\n\n\n12 \n\n \n\nFigura 1.1 - Primeiras instala\u00e7\u00f5es para explora\u00e7\u00e3o mar\u00edtima \n\nUm pr\u00f3ximo passo na explora\u00e7\u00e3o de petr\u00f3leo e g\u00e1s natural foi o desenvolvimento \n\nde plataformas tipo jaqueta que s\u00e3o estruturas ainda utilizadas compostas por \n\numa torre de sustenta\u00e7\u00e3o presa ao fundo do mar com tubula\u00e7\u00f5es que levam o \n\npetr\u00f3leo \u00e0 superf\u00edcie sendo este tipo de estrutura vi\u00e1vel t\u00e9cnica e economicamente \n\nsomente para profundidades de at\u00e9 500m. Com as limita\u00e7\u00f5es de explora\u00e7\u00e3o \n\nencontradas at\u00e9 este momento, foram necess\u00e1rios os desenvolvimentos de outras \n\nestruturas como os sistemas de amarra\u00e7\u00e3o utilizados em navios de perfura\u00e7\u00e3o e \n\nplataformas submers\u00edveis. Na d\u00e9cada de 90 surgiram os FPSO (Floating, \n\nProduction, Storage and Offloading Systems), que s\u00e3o navios petroleiros \n\namarrados. Eles exploram, armazenam e processam o petr\u00f3leo e s\u00e3o largamente \n\nutilizados at\u00e9 hoje.  \n\nPara os FPSO\u2019s s\u00e3o necess\u00e1rias opera\u00e7\u00f5es de al\u00edvio para transportar o petr\u00f3leo \n\nda plataforma para uma unidade de armazenamento em terra, no entanto, \n\ncuidados devem ser tomados com rela\u00e7\u00e3o aos movimentos dos navios aliviadores \n\nnas proximidades das plataformas para evitar colis\u00f5es pela deriva da embarca\u00e7\u00e3o \n\nou por agentes ambientais agindo sobre o navio j\u00e1 que durante a opera\u00e7\u00e3o o \n\naliviador fica conectado muito pr\u00f3ximo ao FPSO por dutos para a passagem do \n\nmaterial (Figura 1.2). \n\n\n\n13 \n\n \n\nFigura 1.2 - Opera\u00e7\u00e3o de al\u00edvio. Navio aliviador conecta-se pr\u00f3ximo ao FPSO [1] \n\nOs cuidados com os movimentos do navio aliviador pr\u00f3ximo a um FPSO resumem \n\nem ajustar constantemente sua posi\u00e7\u00e3o mantendo a dist\u00e2ncia de seguran\u00e7a \n\ndesejada para evitar colis\u00f5es. A melhor maneira de ajustar constantemente a \n\nposi\u00e7\u00e3o do navio durante uma opera\u00e7\u00e3o de al\u00edvio \u00e9 atrav\u00e9s de um sistema de \n\nposicionamento din\u00e2mico com m\u00ednima interfer\u00eancia humana. \n\nOs primeiros estudos de implementa\u00e7\u00e3o de um sistema de controle e \n\nposicionamento autom\u00e1ticos da embarca\u00e7\u00e3o em alto mar foram iniciados em 1961 \n\ncom o \u201cEureka\u201d, primeiro navio cuja posi\u00e7\u00e3o era controlada automaticamente \n\natrav\u00e9s de controladores anal\u00f3gicos bastante simples utilizando como refer\u00eancia \n\num sistema de amarra\u00e7\u00e3o. No final da d\u00e9cada de 70 o conceito do SPD, ou \n\nSistema de Posicionamento Din\u00e2mico (Dynamic Positioning, ou somente DP, em \n\ningl\u00eas) estava bem estabelecido e de l\u00e1 para c\u00e1 v\u00e1rios seguimentos da ind\u00fastria \n\noffshore passaram a utilizar estes sistemas [2]. A utiliza\u00e7\u00e3o de SPDs cresceu \n\nsignificativamente ao serem empregados nas opera\u00e7\u00f5es de al\u00edvio para explora\u00e7\u00e3o \n\nde petr\u00f3leo. \n\n\n\n14 \n\nA constru\u00e7\u00e3o de um navio equipado com um sistema de posicionamento din\u00e2mico \n\ntem custo bastante elevado dada a complexidade da estrutura envolvida. A \n\nnecessidade de ajustar todos os par\u00e2metros do controle autom\u00e1tico do SPD com a \n\nembarca\u00e7\u00e3o em alto mar para que se obtenha a melhor resposta \u00e0s diversas \n\nsitua\u00e7\u00f5es ambientais \u00e9 fundamental para que todas as opera\u00e7\u00f5es ocorram de \n\nforma segura, no entanto, tamb\u00e9m h\u00e1 um custo bastante elevado e dificilmente \u00e9 \n\nposs\u00edvel ensaiar o comportamento do SPD frente aos diversos cen\u00e1rios \n\nencontrados em alto mar. Dessa forma, torna-se necess\u00e1rio criar ambientes de \n\nsimula\u00e7\u00e3o para o sistema projetado, seja um ambiente de simula\u00e7\u00e3o \n\ncomputacional ou um ambiente experimental com modelos em escala. O fato de \n\nestudar o comportamento de um navio real atrav\u00e9s de simula\u00e7\u00f5es computacionais \n\nou ensaios experimentais faz com que os custos de preparo de uma embarca\u00e7\u00e3o \n\nsejam menores e os ajustes se tornem mais seguros, j\u00e1 que todos os par\u00e2metros \n\ndo SPD podem ser projetados em laborat\u00f3rio. \n\nUm ambiente de simula\u00e7\u00e3o computacional cont\u00e9m modelos do navio em estudo e, \n\nde uma forma geral, permite r\u00e1pidos resultados em quaisquer situa\u00e7\u00f5es, no \n\nentanto, esses modelos obtidos na teoria podem conter distor\u00e7\u00f5es da realidade \n\npodendo levar a resultados equivocados, prejudicando os resultados finais. J\u00e1 um \n\nambiente de ensaios experimentais cont\u00e9m um modelo em escala da embarca\u00e7\u00e3o \n\ne instrumentos para fazer com que se movimente num tanque de provas e \n\nresponda aos comandos de um SPD. Aliando-se os resultados de uma simula\u00e7\u00e3o \n\ncomputacional com os ensaios em tanque de provas, \u00e9 poss\u00edvel fazer itera\u00e7\u00f5es \n\nentre as simula\u00e7\u00f5es e os ensaios para ajustar os modelos te\u00f3ricos envolvidos e \n\nmelhor definir par\u00e2metros de controle para um SPD real. \n\nO dom\u00ednio de uma tecnologia nacional para a realiza\u00e7\u00e3o de ensaios com sistemas \n\nde posicionamento din\u00e2mico \u00e9 preocupa\u00e7\u00e3o dos pesquisadores nacionais, e \n\natualmente est\u00e1 sendo realizado um esfor\u00e7o conjunto entre a Universidade de S\u00e3o \n\nPaulo, Universidade Federal do Rio de Janeiro e a Petrobr\u00e1s para realizar \n\nexperimentos nos tanques de provas existentes no Brasil. \n\n\n\n15 \n\n1.2. Descri\u00e7\u00e3o de um SPD \n\nSistema de posicionamento din\u00e2mico pode ser descrito como um sistema capaz \n\nde manter o posicionamento de uma embarca\u00e7\u00e3o em alto mar utilizando para isso \n\nsomente os motores e atuadores integrados ao barco, sem que seja necess\u00e1rio o \n\naux\u00edlio de algum tipo de amarra\u00e7\u00e3o, como \u00e2ncoras. [2]. \n\nA manuten\u00e7\u00e3o de um comportamento em alto mar pode ser vista como a n\u00e3o \n\naltera\u00e7\u00e3o de uma posi\u00e7\u00e3o desejada fixa ou de uma certa dist\u00e2ncia a partir de uma \n\nrefer\u00eancia, por exemplo, o movimento relativo a uma plataforma. \n\nA Figura 1.3 mostra um diagrama de blocos de um SPD com filtro de Kalman em \n\nque o sistema basicamente l\u00ea a posi\u00e7\u00e3o e aproamento da embarca\u00e7\u00e3o, realiza a \n\nestima\u00e7\u00e3o dos estados do navio, compara com uma refer\u00eancia e realiza a \n\ncorre\u00e7\u00e3o atuando nos motores dispon\u00edveis, ou seja, o controle de um SPD \u00e9 um \n\nsistema de malha fechada. \n\n \n\nFigura 1.3 - Diagrama de blocos de um SPD \n\nAl\u00e9m do controle da posi\u00e7\u00e3o e aproamento, alguns sistemas tamb\u00e9m fazem o \n\ncontrole de trajet\u00f3ria e at\u00e9 mesmo o posicionamento da embarca\u00e7\u00e3o baseado nas \n\ncondi\u00e7\u00f5es ambientais em que a embarca\u00e7\u00e3o \u00e9 automaticamente alinhada de \n\nforma a minimizar os esfor\u00e7os ambientais sobre ela e minimizar o consumo de \n\ncombust\u00edvel. \n\n\n\n16 \n\nUma embarca\u00e7\u00e3o (ou qualquer outro corpo) pode realizar movimentos em seis \n\ngraus de liberdade, sendo tr\u00eas de rota\u00e7\u00e3o e tr\u00eas de transla\u00e7\u00e3o. A Figura 1.4 \n\nmostra esses movimentos num navio.  \n\n \n\nFigura 1.4 - Graus de liberdade num navio [13] \n\nPara o seu posicionamento \u00e9 suficiente controlar apenas movimentos realizados \n\nno plano horizontal, ou seja, o avan\u00e7o (surge) e a deriva (sway), os quais \n\ncaracterizam a posi\u00e7\u00e3o do navio, e o aproamento (yaw). Os demais movimentos \n\nn\u00e3o influenciam e n\u00e3o s\u00e3o controlados durante uma opera\u00e7\u00e3o. Os tr\u00eas \n\nmovimentos de interesse s\u00e3o medidos e comparados com uma situa\u00e7\u00e3o desejada, \n\nou seja, a refer\u00eancia (set-point). O sistema de posicionamento trabalha no sentido \n\nde minimizar o erro da compara\u00e7\u00e3o efetuada. \n\nUm sistema de posicionamento din\u00e2mico \u00e9 constitu\u00eddo por um conjunto de sub-\n\nsistemas integrados que executam cada um uma tarefa distinta num SPD. \n\nSub-sistema de energia: \u00e9 respons\u00e1vel por gerar, a partir de alternadores \n\nacoplados aos motores diesel, energia el\u00e9trica para toda a embarca\u00e7\u00e3o e, por \n\nconseguinte, para o sistema de posicionamento din\u00e2mico.  \n\nSub-sistema de atua\u00e7\u00e3o: os propulsores da embarca\u00e7\u00e3o fazem parte desse sub \n\nsistema. S\u00e3o respons\u00e1veis por fazer a embarca\u00e7\u00e3o se movimentar fora de uma \n\n\n\n17 \n\nopera\u00e7\u00e3o de posicionamento din\u00e2mico utilizando normalmente os motores \n\nprincipais e o leme e por funcionarem como elementos atuadores finais numa \n\nopera\u00e7\u00e3o de posicionamento em conjunto com os motores configurados em t\u00fanel, \n\nos quais s\u00e3o instalados transversalmente no casco bem como os azimutais, que \n\nt\u00eam a vantagem de girar 360\u00ba e assim direcionar o empuxo gerado (Figura 1.5) . O \n\nn\u00famero de atuadores num barco depende do seu tamanho, pot\u00eancia e \n\nredund\u00e2ncia requeridas nas opera\u00e7\u00f5es.  \n\n \n\nFigura 1.5 - Propulsores num navio com SPD \n \n\nSub-sistema de sensoriamento: \u00e9 respons\u00e1vel por localizar a embarca\u00e7\u00e3o no \n\nplano horizontal e informar esta posi\u00e7\u00e3o ao SPD para que os c\u00e1lculos de poss\u00edveis \n\ncorre\u00e7\u00f5es possam ser feitos. O n\u00famero de sensores e tipos de sensores \n\ninstalados depende da precis\u00e3o desejada na opera\u00e7\u00e3o de posicionamento e na \n\nredund\u00e2ncia requerida para a aplica\u00e7\u00e3o.  \n\nAlgumas informa\u00e7\u00f5es de condi\u00e7\u00f5es ambientais s\u00e3o utilizadas pelo SPD a fim de \n\nrealizar o controle por pr\u00e9-alimenta\u00e7\u00e3o (ou feedforward) atrav\u00e9s de sensores \n\ninstalados por toda a embarca\u00e7\u00e3o. Esse tipo de controle compensa as \n\nperturba\u00e7\u00f5es de baixa freq\u00fc\u00eancia como, por exemplo, as perturba\u00e7\u00f5es causadas \n\npelo vento. J\u00e1 a considera\u00e7\u00e3o das for\u00e7as provenientes de ondas e correntezas \n\ntem seu estudo intensificado apenas recentemente. A inclus\u00e3o dessas medidas na \n\nmalha de pr\u00e9-alimenta\u00e7\u00e3o melhoraria bastante a performance do SPD, j\u00e1 que tais \n\n\n\n18 \n\ncorre\u00e7\u00f5es s\u00e3o feitas apenas quando a perturba\u00e7\u00e3o \u00e9 medida pelo deslocamento \n\nda embarca\u00e7\u00e3o [1].  \n\nSub-sistema de controle superior: \u00e9 composto pela interface direta com os \n\noperadores atrav\u00e9s de computadores, consoles e telas de informa\u00e7\u00e3o e por \n\nsistemas de aquisi\u00e7\u00e3o e comunica\u00e7\u00e3o para realizar a interface com os diversos \n\nsensores instalados na embarca\u00e7\u00e3o. \u00c9 respons\u00e1vel por executar todos os \n\nalgoritmos que recebem as posi\u00e7\u00f5es dos sensores e calculam as corre\u00e7\u00f5es a \n\nserem feitas baseadas numa refer\u00eancia (ou set-point). Esses algoritmos podem \n\nser desde os cl\u00e1ssicos PIDs com movimentos desacoplados (um controlador para \n\ncada movimento: sway, surge e yaw) at\u00e9 os controladores baseados em modelos, \n\nos quais consideram as modelagens da embarca\u00e7\u00e3o e das for\u00e7as ambientais. \n\nEste sub-sistema \u00e9 tamb\u00e9m respons\u00e1vel por realizar a aloca\u00e7\u00e3o de empuxos. O \n\nresultado de um algoritmo de controle de SPD \u00e9 um conjunto de for\u00e7as e torques \n\nnecess\u00e1rios para a execu\u00e7\u00e3o da corre\u00e7\u00e3o necess\u00e1ria, no entanto, este conjunto \n\nde for\u00e7as e momentos precisa ser transferido para cada atuador da embarca\u00e7\u00e3o. \n\nEste \u00e9 o processo de aloca\u00e7\u00e3o de empuxos (ou TAL \u2013 Thruster Allocation Logic). \n\nSub-sistema de controle inferior: este sub-sistema \u00e9 encontrado em cada atuador \n\nda embarca\u00e7\u00e3o (propulsores, azimutais e leme) e \u00e9 respons\u00e1vel por garantir a \n\nrota\u00e7\u00e3o ou posi\u00e7\u00e3o informadas pelo algoritmo de aloca\u00e7\u00e3o de empuxos integrado \n\nao sub-sistema de controle superior. Cada atuador tem seu pr\u00f3prio modo de \n\ncontrole (PID, robusto etc) e seu pr\u00f3prio conjunto de sensores. \n\nO desenvolvimento dos mais modernos sistemas de posicionamento din\u00e2mico \u00e9 \n\ngeralmente precedido de ensaios com modelos em escala reduzida em tanques \n\nde prova com a finalidade de se estudar as caracter\u00edsticas dos propulsores e \n\natuadores, dos algoritmos de controle e obter informa\u00e7\u00f5es com rela\u00e7\u00e3o a margens \n\nde seguran\u00e7a e, com isso, aperfei\u00e7oar o projeto e deix\u00e1-lo mais robusto. Os \n\nresultados experimentais obtidos em ambientes de estudo de SPD podem ser \n\nextrapolados para aplica\u00e7\u00f5es reais auxiliando dessa forma o desenvolvimento de \n\n\n\n19 \n\nnovas tecnologias e o aprimoramento das existentes nesse importante ramo de \n\nexplora\u00e7\u00e3o de petr\u00f3leo em \u00e1guas profundas. \n\n \n\n1.3. Revis\u00e3o Bibliogr\u00e1fica \n\nUm sistema de posicionamento din\u00e2mico integra conhecimentos de diversas \u00e1reas \n\nda engenharia, como naval, mec\u00e2nica, matem\u00e1tica, el\u00e9trica e eletr\u00f4nica, no \n\nentanto, neste trabalho ser\u00e1 dada \u00eanfase no desenvolvimento de um aparato \n\nexperimental capaz de auxiliar nos estudos de controle de um SPD e realiza\u00e7\u00e3o \n\nde experimentos em laborat\u00f3rio. \n\nOs controladores utilizados nesses sistemas evolu\u00edram bastante ao longo de sua \n\nhist\u00f3ria, a saber: \n\nControladores de primeira gera\u00e7\u00e3o: baseados no filtro cunha para eliminar os \n\nmovimentos de alta freq\u00fc\u00eancia da embarca\u00e7\u00e3o e utilizavam-se de leis de controle \n\ncl\u00e1ssico.  \n\nControladores de segunda gera\u00e7\u00e3o: utilizam filtro de Kalman embora a lei de \n\ncontrole seja a cl\u00e1ssica. A utiliza\u00e7\u00e3o do filtro de Kalman foi proposta inicialmente \n\npor Balchen et al. [19] e desde ent\u00e3o diversas propostas t\u00eam sido publicadas para \n\na lei de controle. Ainda s\u00e3o largamente utilizados em muitos sistemas comerciais e \n\ns\u00e3o baseados em controladores PID multivari\u00e1veis com relaimenta\u00e7\u00e3o das \n\nvari\u00e1veis de estado do modelo da embarca\u00e7\u00e3o. \n\nDemais controladores: controladores \u00f3timo tipo H? foram t\u00e3o importantes para os \n\navan\u00e7os dos SPDs quanto o filtro de Kalman [2], no entanto filtro de Kalman ainda \n\n\u00e9 muito mais utilizado. H? robusto foi desenvolvido para atender a casos de \n\nsistemas incertos e, de forma mais robusta, contemplar os erros de modelagem \n\ninerentes a qualquer modelagem te\u00f3rica. Controladores Fuzzy foram tamb\u00e9m \n\nestudados para SPDs e, apesar de permitir que o projeto de controle seja mais \n\nrapidamente elaborado que nos demais tipos de controladores, podem apresentar \n\n\n\n20 \n\nproblemas para algum cen\u00e1rio n\u00e3o previsto no mapeamento de casos da l\u00f3gica \n\nfuzzy. \n\nOutro t\u00f3pico que merece igual n\u00edvel de profundidade nos estudos e que no entanto \n\nn\u00e3o recebe grande destaque na literatura \u00e9 a aloca\u00e7\u00e3o de empuxos. H\u00e1 que se \n\npensar tamb\u00e9m em algoritmos para a aloca\u00e7\u00e3o do empuxo entre os propulsores \n\nde uma embarca\u00e7\u00e3o visando otimizar a utiliza\u00e7\u00e3o dos mesmos, redu\u00e7\u00e3o de \n\nconsumo de combust\u00edvel e efici\u00eancia nos movimentos j\u00e1 que um navio com SPD \u00e9 \n\nem geral sobreatuado, ou seja, o controlador fornece componentes de for\u00e7a em \n\nsurge, sway e momento em yaw e o navio n\u00e3o tem apenas um motor para cada \n\nmovimento, mas pode ter v\u00e1rios motores inclusive azimutais operando em \n\nconjunto.  \n\nOs controladores atuais baseados em filtro de Kalman, embora operem \n\nsatisfatoriamente na maioria das situa\u00e7\u00f5es, exigem um ajuste grande de \n\npar\u00e2metros e o seu desempenho \u00e9 degradado quando as condi\u00e7\u00f5es ambientais se \n\ntornam severas. Em vista disto tem havido diversas propostas para garantir um \n\nbom desempenho do sistema em diversos estados de mar, por exemplo, o \n\ncontrole baseado em observadores n\u00e3o lineares [20]. Este controlador \u00e9 baseado \n\nna teoria da passividade onde, segundo seus autores, \u00e9 reduzido o n\u00famero de \n\npar\u00e2metros a serem estimados. J\u00e1 um controle baseado em backstepping foi \n\nproposto por Fossen [21] e Mesquita [22]. \n\nEstudos de desempenho de um SPD com controladores deslizantes e robustos \n\nbaseado na norma ?H s\u00e3o apresentados em Tannuri [1] e [11]. \n\nOs trabalhos de car\u00e1ter experimental s\u00e3o encontrados em Santos [14] e Lago e \n\nVeras [7] onde os autores desenvolveram um ambiente para o estudo de sistemas \n\nde posicionamento din\u00e2mico em tanque de provas. Para isso foram desenvolvidos \n\ndois sistemas de localiza\u00e7\u00e3o da embarca\u00e7\u00e3o no tanque: o primeiro baseado em \n\nsensores de ultra-som e o segundo baseado em vis\u00e3o artificial. Um modelo \n\nsimples em escala foi confeccionado e uma eletr\u00f4nica em car\u00e1ter experimental foi \n\ndesenvolvida para o acionamento dos motores de pot\u00eancia.  \n\n\n\n21 \n\nEm Hamamatsu [3] foi realizado controle n\u00e3o linear em tempo real para o controle \n\nde trajet\u00f3rias de embarca\u00e7\u00f5es. Mostra tamb\u00e9m um algoritmo \u00f3timo para a \n\naloca\u00e7\u00e3o de empuxos dos atuadores e o tratamento do problema de aloca\u00e7\u00e3o de \n\nempuxos em caso de falha de um atuador. O estudo \u00e9 simulado \n\ncomputacionalmente e ensaiado com modelos em tanque de provas.  \n\nO sistema de vis\u00e3o artificial desenvolvido por Lago e Veras [7] e utilizado como \n\nimportante ferramenta em ensaios reais foi bastante aperfei\u00e7oado no decorrer do \n\npresente trabalho como, por exemplo, a inclus\u00e3o de equa\u00e7\u00f5es de corre\u00e7\u00e3o da \n\ndistor\u00e7\u00e3o da imagem e melhorias no rastreamento da embarca\u00e7\u00e3o no tanque de \n\nprovas. Outros trabalhos correlatos [8] e [9] foram desenvolvidos no mesmo \n\nper\u00edodo. \n\nNo trabalho de Lago et al. [5], resultados de simula\u00e7\u00f5es computacionais foram \n\ncomparados com ensaios experimentais num tanque de provas utilizando para \n\nisso um modelo em escala reduzida contendo apenas dois motores configurados \n\nem t\u00fanel e um motor principal. Mesmo utilizando um modelo com configura\u00e7\u00f5es \n\nbastante simples, os resultados ensaiados ficaram bastante pr\u00f3ximos daqueles \n\nsimulados no tanque num\u00e9rico da USP (ambiente dedicado para a simula\u00e7\u00e3o de \n\nestruturas navais da Universidade de S\u00e3o Paulo). \n\nEm outro trabalho de Lago et al. [6] os autores fazem uma an\u00e1lise de algoritmos \n\nde filtragem baseado em filtro de Kalman. Simula\u00e7\u00f5es s\u00e3o realizadas no tanque \n\nnum\u00e9rico da USP e tr\u00eas m\u00e9todos de detec\u00e7\u00e3o da freq\u00fc\u00eancia de onda s\u00e3o \n\nestudados e comparados: o primeiro e o segundo s\u00e3o m\u00e9todos que utilizam a \n\nt\u00e9cnica RPEM (Recursive Prediction Error Method) juntamente com o filtro de \n\nKalman; j\u00e1 o terceiro m\u00e9todo, proposto pelos autores, considera uma freq\u00fc\u00eancia \n\nde onda para cada movimento da embarca\u00e7\u00e3o, resultando em tr\u00eas vari\u00e1veis \n\nadicionais para a estima\u00e7\u00e3o do filtro de Kalman. \n\n \n\n\n\n22 \n\n1.4. Objetivos \n\nAtualmente o Departamento de Engenharia Naval e Oce\u00e2nica da USP, al\u00e9m de \n\ninvestigar novas abordagens de controle, est\u00e1 construindo um modelo em escala \n\nreduzida para a realiza\u00e7\u00e3o de ensaios de posicionamento din\u00e2mico. Esse modelo \n\ntem uma estrutura mec\u00e2nica confeccionada pelo pr\u00f3prio Departamento e uma \n\nestrutura eletr\u00f4nica, composta por m\u00f3dulos de pot\u00eancia para o acionamento dos \n\ndiversos atuadores presentes na embarca\u00e7\u00e3o, m\u00f3dulos de comunica\u00e7\u00e3o via r\u00e1dio \n\ne por fim, um m\u00f3dulo central respons\u00e1vel por gerenciar o funcionamento do \n\nmodelo. \n\nOs objetivos deste trabalho s\u00e3o: \n\n\u2022 O desenvolvimento e implementa\u00e7\u00e3o de toda a eletr\u00f4nica que ser\u00e1 \n\nembarcada no modelo; \n\n\u2022 Implementa\u00e7\u00e3o de controles localizados em cada propulsor do modelo; \n\n\u2022 Integra\u00e7\u00e3o da eletr\u00f4nica com os componentes eletromec\u00e2nicos \n\nembarcados; \n\n\u2022 Ensaios com o modelo reduzido em tanque de provas empregando o \n\nmaterial desenvolvido para verifica\u00e7\u00e3o do funcionamento de toda a \n\nestrutura. \n\n \n\n\n\n23 \n\n2. Modelagem Matem\u00e1tica \n \n\n2.1. Modelagem do ve\u00edculo \n\nEste cap\u00edtulo cont\u00e9m as modelagens necess\u00e1rias para o entendimento do \n\nmovimento de um corpo r\u00edgido em meio fluido no plano horizontal e o \n\ndirecionamento da abordagem para a organiza\u00e7\u00e3o dos experimentos propostos. O \n\nmovimento no plano horizontal tem parcelas de baixa freq\u00fc\u00eancia provocadas por \n\nagentes ambientais (corrente, vento e onda) e de alta freq\u00fc\u00eancia provocadas pelas \n\nfor\u00e7as de primeira ordem das ondas. Os sistemas de posicionamento din\u00e2mico \n\ncontrolam somente os movimentos de baixa freq\u00fc\u00eancia, j\u00e1 que para controlar as \n\nperturba\u00e7\u00f5es de alta freq\u00fc\u00eancia seria necess\u00e1rio um montante de energia muito \n\nalto, al\u00e9m de provocar respostas bruscas dos atuadores do navio. \n\n2.1.1. Movimentos de baixa freq\u00fc\u00eancia \n\nOs movimentos de uma embarca\u00e7\u00e3o s\u00e3o tradicionalmente escritos em dois \n\nsistemas de coordenadas distintos (Figura 2.1): o primeiro \u00e9 um sistema fixo \u00e0 \n\nTerra, OXYZ, e o outro \u00e9 fixo ao navio [12].  \n\n \n\nFigura 2.1 - Sistemas de coordenadas \n\nA origem do sistema G1 \u00e9 na intersec\u00e7\u00e3o da sec\u00e7\u00e3o m\u00e9dia do navio com o plano \n\nlongitudinal de simetria do mesmo. As equa\u00e7\u00f5es resultantes, em rela\u00e7\u00e3o ao \n\nsistema de coordenadas solid\u00e1rio \u00e0 embarca\u00e7\u00e3o, s\u00e3o: \n\n\n\n24 \n\n( ) ( )\n( ) ( )\n( ) TotalLLLLLLZ\n\ntotalLLLLLL\n\nTotalLLLLL\n\nFxBxBxxMxMxMI\nFxBxBxxMmxMxMm\n\nFxBxMxxMmxMm\n\n62266666126226666\n\n26262226111626222\n\n1111\n2\n6266222111\n\n=+++++\n=++++++\n\n=+?+?+\n\n        \n\n        \n\n      \n\n  2.1 \n\nonde Iz \u00e9 o momento de in\u00e9rcia com rela\u00e7\u00e3o ao eixo vertical; m \u00e9 a massa da \n\nembarca\u00e7\u00e3o, Bij s\u00e3o coeficientes de amortecimento, Mij s\u00e3o termos de massa \n\nadicional e a for\u00e7a total dada por iMiTiEiTotal FFFF ++=  onde F1E, F2E, F6E  s\u00e3o as \n\nfor\u00e7as ambientais (corrente, vento e onda) de surge, sway e yaw; TTT FFF 621 ,,  as \n\nfor\u00e7as e o momento gerados pelo sistema de propuls\u00e3o e MMM FFF 621 ,,  as for\u00e7as e \n\nmomento gerados por linhas de amarra\u00e7\u00e3o caso existam. As vari\u00e1veis 1x  e 2x  s\u00e3o \n\nas velocidades de baixa freq\u00fc\u00eancia de surge e sway e 6x  a velocidade angular do \n\nmovimento de yaw. \n\nJ\u00e1 a posi\u00e7\u00e3o e o aproamento da embarca\u00e7\u00e3o com rela\u00e7\u00e3o ao sistema fixo \u00e0 Terra \n\ns\u00e3o obtidos da seguinte rela\u00e7\u00e3o, onde L \u00e9 o \u00edndice que indica movimentos de \n\nbaixa freq\u00fc\u00eancia. \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\n??\n?\n?\n\n?\n\n?\n\n??\n?\n?\n\n?\n\n?\n\n6\n\n2\n\n1\n\n)(\nx\nx\nx\n\nTY\nX\n\nL\n\nL\n\nL\n\nL\n\n \n\n \n\n \n\n \n\n \n\n \n\n?\n?\n\n; \n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n? ?\n=\n\n100\n0)cos()sin(\n0)sin()cos(\n\n)( LL\nLL\n\nLT ??\n??\n\n?         2.2 \n\n2.1.2. Movimentos de alta freq\u00fc\u00eancia \n\nOs movimento de alta freq\u00fc\u00eancia s\u00e3o decorrentes das for\u00e7as de onda de primeira \n\nordem, e s\u00e3o modelados segundo os Operadores de Amplitude de Resposta \n\n(RAOs), que representam as fun\u00e7\u00f5es de transfer\u00eancia entre o movimento e a onda \n\nincidente [1]. A abordagem baseia-se na linearidade da resposta dos movimentos \n\nde alta freq\u00fc\u00eancia e no desacoplamento com rela\u00e7\u00e3o aos movimentos de baixa \n\nfreq\u00fc\u00eancia.  \n\nAs ondas do mar s\u00e3o descritas pelo espectro de pot\u00eancia da eleva\u00e7\u00e3o da \n\nsuperf\u00edcie livre ( )?S . O espectro de pot\u00eancia iiP  do movimento de alta freq\u00fc\u00eancia \n\niHx  do navio \u00e9, portanto dado por: \n\n\n\n25 \n\n)(),(2)( 2 ????? SRAOP iii =            2.3 \n\nonde ?  \u00e9 o \u00e2ngulo de incid\u00eancia da onda.  \n\nAtrav\u00e9s da realiza\u00e7\u00e3o temporal do espectro 2.3 \u00e9 poss\u00edvel determinar um modelo \n\nlinear para os movimentos de alta freq\u00fc\u00eancia da embarca\u00e7\u00e3o. \n\n \n\n2.1.3. Modelo completo \n\nO modelo linear completo da embarca\u00e7\u00e3o re\u00fane os modelos de baixa freq\u00fc\u00eancia e \n\nalta freq\u00fc\u00eancia anteriormente discutidos. Neste caso, tem-se: \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n+\n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\nH\n\nH\n\nH\n\nL\n\nL\n\nL\n\nY\nX\n\nY\nX\n\nY\nX\n\n???\n         2.4 \n\n2.1.4. Modelo para filtro de Kalman \n\nPara fins de controle utilizando o filtro de Kalman \u00e9 conveniente expressar a \n\ndin\u00e2mica da unidade flutuante de modo alternativo para os movimentos de baixas \n\ne altas freq\u00fc\u00eancias. \n\nPara movimentos em baixas freq\u00fc\u00eancias vale a express\u00e3o \n\nLLELELTLLLL EFAFBxAx ?+++=          2.5 \n\nsendo \n\n?\n?\n\n?\n?\n?\n\n?\n?\n\n= ? DM\nT\n\nA\nx\n\nLx\nL 1\n\n33\n\n33\n\n0\n)(0 ?\n\n ;  \n\n?\n?\n\n?\n?\n?\n\n?\n===\n\n?1\n330\n\nM\nEBA xLLEL\n\n   \n\n\n\n26 \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n++\n++\n\n+\n=\n\n6626\n\n6622\n\n11\n\n0\n0\n\n00\n\nMIMMx\nMMxMm\n\nMm\nM\n\nZG\n\nG  ;  \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\n6626\n\n2622\n\n11\n\n0\n0\n\n00\n\nBB\nBB\n\nB\nD   \n\nO vetor de estados, neste caso, fica ( )TLLL xxxYX 621    ?=Lx . 2.6 \n\nFT \u00e9 um vetor composto pelas for\u00e7as e momentos dos propulsores, FE \u00e9 outro \n\nvetor formado por for\u00e7as externas de baixa freq\u00fc\u00eancia e pelo momento associado \n\n(incluindo for\u00e7as ambientais e de eventuais amarra\u00e7\u00f5es existentes). M \u00e9 a matriz \n\nde massas (incluindo massas adicionais) e D \u00e9 uma matriz de amortecimentos. J\u00e1 \n\nL?  \u00e9 um vetor contendo ru\u00eddo branco Gaussiano de m\u00e9dia zero com covari\u00e2ncia \n\nQL ( ),0(~ LL Q? N ). \n\nAs for\u00e7as FE s\u00e3o for\u00e7as ambientais cujo comportamento tem varia\u00e7\u00e3o lenta e \n\ndesconhecida, e podem ser modeladas por: \n\nFLE ?F =           2.7 \n\nonde FL?  \u00e9 um vetor contendo ru\u00eddo branco Gaussiano de m\u00e9dia zero e matriz de \n\ncovari\u00e2ncia dada por QFL ( FL?  ),0(~ FLQN ). \n\nPara o equacionamento dos movimentos em altas freq\u00fc\u00eancias considere iHx  a \n\nsa\u00edda de um sistema linear com fun\u00e7\u00e3o de transfer\u00eancia )(sh  e excita\u00e7\u00e3o )(sH?  \n\n(ru\u00eddo branco gaussiano com pot\u00eancia espectral unit\u00e1ria )1)(( =??? HHP ). Saelid et \n\nal. [23] propuseram a seguinte fun\u00e7\u00e3o de transfer\u00eancia: \n\n2\n00\n\n2\n0\n\n2\n2\n\n)(\n???\n\n??? ?\n++\n\n=\nss\n\ns\nsh             2.8 \n\n\n\n27 \n\nsendo ?  um fator de amortecimento e 0?  a freq\u00fc\u00eancia de pico do espectro )(?iiP . \n\nReescrevendo o modelo em vari\u00e1veis de estado (e para o \u00edndice H representando \n\nmovimento de alta freq\u00fc\u00eancia), t\u00eam-se: \n\niHxiHiH\n\niHx\n\ni\n\ni\n\nxx\n\nx\n\n?????\n\n?\n\n+??=\n\n=\n2\n002 \n\n \n\n, para os tr\u00eas graus de liberdade i = 1, 2 ou 6       2.9 \n\nObserva-se que as freq\u00fc\u00eancias de pico para os tr\u00eas graus de liberdade s\u00e3o iguais, \n\npressupondo-se que s\u00e3o pr\u00f3ximas \u00e0 freq\u00fc\u00eancia de pico da onda. \n\nPara o vetor de estado dado por THHHxxxH xxxx )( 621621 ???= , o modelo \n\ncompleto de alta freq\u00fc\u00eancia fica: \n\nHHHHH ExAx ?+=                          2.10 \n\npara \n\n??\n?\n\n?\n??\n?\n\n?\n??\n\n=\n33033\n\n2\n0\n\n3333\n\n2\n0\n\nxx\n\nxx\nH II\n\nI\nA\n\n???\n ;  \n\n??\n?\n\n?\n??\n?\n\n?\n=\n\n33\n\n330\n\nx\n\nx\nH I\n\nE  \n\ne vetor H?  composto por ru\u00eddos brancos gaussianos de m\u00e9dia zero e matriz de \n\ncovari\u00e2ncia )),0(~( HHH QNQ ? . \n\n \n\n2.1.5. Modelo completo e o sistema de medi\u00e7\u00e3o \n\nNum sistema de posicionamento din\u00e2mico o sistema de medi\u00e7\u00e3o realiza a \n\nlocaliza\u00e7\u00e3o da embarca\u00e7\u00e3o no ambiente medindo tr\u00eas componentes somadas: \n\n\u2022 Movimento de baixa freq\u00fc\u00eancia; \n\n\n\n28 \n\n\u2022 Movimento de alta freq\u00fc\u00eancia; \n\n\u2022 Ru\u00eddos inerentes ao sistema de medi\u00e7\u00e3o. \n\nDessa forma, reescrevendo o modelo completo obtido, tem-se: \n\nvHxz\nE?BFxxAx T\n\n+=\n++= )( \n\n        2.11 \n\nou seja, o sinal medido (z) por um sistema de localiza\u00e7\u00e3o da embarca\u00e7\u00e3o \n\nfornecer\u00e1: \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n++\n++\n++\n\n=\n\n??? v\nvYY\nvXX\n\nHL\n\nYHL\n\nXHL\n\nz         2.12 \n\nonde v [ ]TYX vvv ?=  \u00e9 um vetor contendo ru\u00eddo branco de m\u00e9dia zero R \n( ),0(~ Rv N ) que representa um erro adicional do sistema de localiza\u00e7\u00e3o. \n\nAs matrizes A, B, E e H s\u00e3o dadas pela associa\u00e7\u00e3o \u00f3bvia das equa\u00e7\u00f5es 2.5, 2.7, \n\n2.10 e 2.12. \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\nEL\n\nH\n\nL\n\nF\nx\nx\n\nx ;  \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n=\n336363\n\n366666\n\n366666\n\n000\n00\n\n0\n\nxxx\n\nxx\nH\n\nx\n\nx\nEL\n\nxx\nL\n\nA\nAA\n\nA ;  \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n=\n33\n\n36\n\n36\n\n0\n0\n\nx\n\nx\n\nx\nLB\n\nB ;  \n\n\n\n29 \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n=\n333333\n\n363636\n\n363636\n\n00\n00\n00\n\nxxx\n\nxx\nH\n\nx\n\nxxx\nL\n\nI\nE\n\nE\nE ;  \n\n( )3333333333 000 xxxxx IIH = . \n\n \n\n2.1.6. Modelo completo discretizado \n\nComo mencionado anteriormente, a abordagem da modelagem visa chegar numa \n\nforma mais adequada para aplica\u00e7\u00e3o em experimentos em laborat\u00f3rio, ou seja, de \n\nmodo que possa ser executado num ambiente computacional. Dessa forma, o \n\nmodelo composto pelos movimentos de alta freq\u00fc\u00eancia e baixa freq\u00fc\u00eancia e pelo \n\nsistema de refer\u00eancia deve estar na forma discreta, para posterior aplica\u00e7\u00e3o no \n\nFiltro de Kalman. \n\nUma forma simples de discretizar o modelo \u00e9 considerar a seguinte aproxima\u00e7\u00e3o \n\npor \u201cbackward difference\u201d \nt\n\nkxkx\nkx\n\n?\n??\n\n?\n]1[][\n\n][ , sendo t?  o intervalo de \n\namostragem. Obt\u00e9m-se, por conseguinte, o modelo completo discretizado: \n\n]1[]1[]1[))((),,(\n][][][\n\n])1[],1[],1[(][\n\n??+??+?+?=???\n+=\n\n???=\n\nktEktFBkxItxAf\nkvkHxkz\n\nkkFkxfkx\n\nT\n\nT\n\n?\n\n?\n          2.13 \n\n \n\n2.2. Filtro de Kalman \n \n\n2.2.1. Teoria \n\nO filtro de Kalman fora introduzido em sistemas de posicionamento din\u00e2mico na \n\nsegunda gera\u00e7\u00e3o de controladores e permitiu avan\u00e7os significativos nesta \u00e1rea. \u00c9 \n\nrespons\u00e1vel por estimar os estados do modelo da embarca\u00e7\u00e3o e fornecer tais \n\nestimativas para que o controlador possa calcular os erros de posi\u00e7\u00e3o e \n\n\n\n30 \n\naproamento e gerar as for\u00e7as para cada dire\u00e7\u00e3o. Essa estima\u00e7\u00e3o \u00e9 capaz de \n\ndistinguir os movimentos de baixa e alta freq\u00fc\u00eancia, al\u00e9m dos esfor\u00e7os ambientais \n\nincidentes sobre a embarca\u00e7\u00e3o. Deve-se ressaltar que o filtro de Kalman deve ser \n\nprojetado levando-se em conta o modelo da embarca\u00e7\u00e3o e sistema de medi\u00e7\u00e3o \n\nincluindo os ru\u00eddos de medi\u00e7\u00e3o. \n\nH\u00e1 dois est\u00e1gios no algoritmo do Filtro de Kalman: predi\u00e7\u00e3o e corre\u00e7\u00e3o. O primeiro \n\nestima quais s\u00e3o os pr\u00f3ximos valores das vari\u00e1veis de estado do modelo, e o \n\nsegundo leva em conta a medida do sistema de refer\u00eancia e corrige os ganhos \n\ninternos do preditor para que possa realizar predi\u00e7\u00f5es subseq\u00fcentes mais \n\nacuradas. Essa capacidade de corrigir seus ganhos internos de forma a melhorar \n\nas predi\u00e7\u00f5es \u00e9 uma grande vantagem do Filtro de Kalman, pois os erros de \n\nmodelagem e at\u00e9 mesmo do sistema de refer\u00eancia acabam sendo minimizados \n\nnessas opera\u00e7\u00f5es. \n\nPara a constru\u00e7\u00e3o do filtro de Kalman, considerar: \n\n x  a estimativa a priori, \n\nx?  a estimativa a posteriori, \n\nX  a matriz de covari\u00e2ncia do erro de estima\u00e7\u00e3o a priori, \n\nX?  a matriz de covari\u00e2ncia do erro de estima\u00e7\u00e3o a posteriori, \n\nK  a matriz de ganhos de Kalman, \n\ne incorporando o modelo discretizado da equa\u00e7\u00e3o 2.13, o equacionamento do filtro \n\nde Kalman discreto fica [1]: \n\nPredi\u00e7\u00e3o: \n\nTT\n\nT\n\nQkXkX\n\nkFkxfkx\n\n??+??=+\n\n=+\n\n][?]1[\n\n)0],[],[?(]1[\n                       2.14 \n\n\n\n31 \n\ncom \n][? kxxx\n\nf\n=?\n\n?\n=? ;  \n\ntE?=? ; \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n=\n\nELF\n\nH\n\nL\n\nQ\nQ\n\nQ\nQ\n\n00\n00\n00\n\n \n\nCorre\u00e7\u00e3o: \n\n][)][(][?\n])[][]([][][?\n)][(][][ 1\n\nkXHkKIkX\n\nkxHkzkKkxkx\nRHkXHHkXkK TT\n\n?=\n\n?+=\n+= ?\n\n       2.15 \n\nO termo ])[][( kxHkz ?  recebe o nome de inova\u00e7\u00e3o e representa o erro entre a \n\nmedida e a previs\u00e3o feita no intervalo anterior. \n\nUma forma de melhor visualizar as influ\u00eancias dos termos nas equa\u00e7\u00f5es do Filtro \n\nde Kalman \u00e9 trabalhar com dois extremos. Considera-se o caso em que o modelo \n\napresenta bastante fidelidade com a realidade e um sistema de medi\u00e7\u00e3o bastante \n\nruim. Esta situa\u00e7\u00e3o equivale, portanto, a considerar uma norma da matriz de \n\ncovari\u00e2ncia Q pequena e uma norma da matriz R elevada. Analisando tais efeitos \n\nnas equa\u00e7\u00f5es de corre\u00e7\u00e3o, verifica-se que a norma da matriz de ganhos K ser\u00e1 \n\npequena e, conseq\u00fcentemente, o vetor de estados corrigido se aproxima do valor \n\nprevisto na itera\u00e7\u00e3o anterior. Com isso, o filtro passa a desprezar as medidas ruins \n\ndo sistema de refer\u00eancia dando mais peso para os valores previstos pelo seu \n\nmodelo interno. \n\nA outra situa\u00e7\u00e3o \u00e9 quando o modelo n\u00e3o \u00e9 bom, com muitas imprecis\u00f5es e o \n\nsistema de refer\u00eancia fornece medidas bastante acuradas. Isto equivale a dizer \n\nque a norma de Q \u00e9 elevada e a norma de R \u00e9 pequena. Neste caso, o filtro de \n\nKalman teria as estima\u00e7\u00f5es de estados baseadas fortemente nas medi\u00e7\u00f5es do \n\nsistema de refer\u00eancia, desprezando, portanto, as previs\u00f5es do modelo interno. \n\n\n\n32 \n\nEm casos intermedi\u00e1rios, o filtro de Kalman tende a corrigir seus vetores de \n\nganhos de forma a encontrar um melhor peso para as medidas do sistema de \n\nrefer\u00eancia e para as previs\u00f5es do modelo interno. \n\n \n\n2.3. Controle \n\nEsta se\u00e7\u00e3o ir\u00e1 descrever como ser\u00e3o implementadas as malhas de realimenta\u00e7\u00e3o \n\npara o controle do SPD \n\nO objetivo \u00e9 corrigir a posi\u00e7\u00e3o da embarca\u00e7\u00e3o utilizando-se da estrutura interna \n\nmostrada na Figura 2.2. \n\n \n\nFigura 2.2 - Diagrama do bloco de estima\u00e7\u00e3o e controle \n\nPara obter a for\u00e7a de comando para os atuadores, o controlador compara as \n\nposi\u00e7\u00f5es estimadas pelo filtro de Kalman para cada grau de liberdade com a \n\nrefer\u00eancia desejada gerando um sinal de erro ao qual posteriormente s\u00e3o \n\naplicados os ganhos proporcional e derivativo (PD) e somadas as for\u00e7as \n\nambientais estimadas pelo Filtro de Kalman. Como resultado obt\u00e9m-se as for\u00e7as \n\nde comando tamb\u00e9m para cada dire\u00e7\u00e3o de movimento. \n\nA lei de controle considerada nos ensaios deste trabalho \u00e9 dada por: \n\neRDPRP FKKTKF +?+?=\n? )?()?)((1 ?????      2.16 \n\n\n\n33 \n\nonde: \n\nF  \u00e9 a for\u00e7a de comando resultante; \n\nPK  e DK  s\u00e3o respectivamente ganhos proporcional e derivativo; \n\n)(1 ??T  \u00e9 a matriz de transforma\u00e7\u00e3o do sistema de refer\u00eancia fixo para o solid\u00e1rio \u00e0 \n\nembarca\u00e7\u00e3o; \n\nR?  e ??  s\u00e3o respectivamente as posi\u00e7\u00f5es de refer\u00eancia e estimada; \n\nR? e ??   s\u00e3o respectivamente as velocidades de refer\u00eancia e estimada; \n\neF  \u00e9 a estimativa das for\u00e7as ambientais. \n\nO bloco do controlador PD pode ter seus par\u00e2metros estimados atrav\u00e9s de \n\nt\u00e9cnicas de controle cl\u00e1ssico, como por exemplo, aloca\u00e7\u00e3o de p\u00f3los. \n\nDesconsiderando o amortecimento e o acoplamento entre os movimentos da \n\nembarca\u00e7\u00e3o no plano, pode-se escrever: \n\niELiTiLii FFxMM +=+   )( , para i = 1, 2 ou 6     2.17 \n\nPara os tr\u00eas movimentos (i) da embarca\u00e7\u00e3o, tem-se o diagrama de blocos da \n\nFigura 2.3: \n\n \n\nFigura 2.3 - Realimenta\u00e7\u00e3o para cada movimento \n\nResolvendo-se, por \u00e1lgebra elementar de blocos, obt\u00e9m-se a seguinte fun\u00e7\u00e3o de \n\ntransfer\u00eancia em malha fechada: \n\n\n\n34 \n\niiii\n\nii\n\nidesejado\n\nireal\n\nPsDsMM\nPsD\n\nsX\nsX\n\n+++\n+\n\n=\n2)()(\n\n)(\n      2.18 \n\nPara alocar os p\u00f3los de forma conveniente, pode-se escolh\u00ea-los da forma \n\njnn ??? \u00b1? , permitindo escrever: \n\n?? n\nii\n\ni\n\nMM\nD\n\n2=\n+\n\n; 2n\nii\n\ni\n\nMM\nP\n\n?=\n+\n\n       2.19 \n\nO ajuste da freq\u00fc\u00eancia natural n?  e do fator de amortecimento ?  pode ent\u00e3o ser \n\nfeito. Geralmente esses valores s\u00e3o escolhidos de forma a ter 03,001,0 ?? n?  e \n\n0,17,0 ?? ?  e podem ainda sofrer alguns ajustes quando o sistema for instalado \n\nna embarca\u00e7\u00e3o, baseado em provas em alto mar. \n\n \n\n2.4. Aloca\u00e7\u00e3o de empuxos \n\nA l\u00f3gica de aloca\u00e7\u00e3o de empuxos \u00e9 respons\u00e1vel por entregar para cada atuador \n\nda embarca\u00e7\u00e3o o empuxo ou momento necess\u00e1rios para que a for\u00e7a resultante, \n\nsolicitada pelo controlador, seja obtida. Uma caracter\u00edstica interessante \u00e9 que as \n\nl\u00f3gicas de aloca\u00e7\u00e3o de empuxos geralmente s\u00e3o feitas no sentido de minimizar o \n\nconsumo de combust\u00edvel da embarca\u00e7\u00e3o. \n\nNeste trabalho ser\u00e1 implementada a l\u00f3gica conhecida por \u201cmatriz da pseudo - \n\ninversa\u201d, que minimiza a somat\u00f3ria quadr\u00e1tica dos empuxos a serem entregues \n\npara cada atuador. \n\nA aloca\u00e7\u00e3o resultante \u00e9 dada por \n\nT\nTT FAAAT 1)( ?= ,                 2.20 \n\nonde TTTTT FFFF )( 621=  representa as for\u00e7as e momentos resultantes do \n\ncontrolador do SPD. J\u00e1 a matriz A \u00e9 definida como: \n\n\n\n35 \n\n??\n?\n?\n\n?\n\n?\n\n??\n?\n?\n\n?\n\n?\n\n+?+???\n\n=\n\n++++\n\n+\n\n+\n\nPnnPnnPnnPnnPnPPnP\n\nnn\n\nnn\n\nproppropproppropazimazimazimazimazimazim\n\npropazim\n\npropazim\n\nxsxcxsxcxxxx\nss\ncc\n\n,1,2)1(,11)1(,21,11,1,21,2\n\n1\n\n1\n\n.......\n.1.10.0\n.0.01.1\n\nA\n\n 2.21 \n\nsendo )cos( iPic ?=  e )sen( iPis ?= . iP?  \u00e9 o \u00e2ngulo azimute quando um propulsor \n\ntipo azimutal se encontra em opera\u00e7\u00e3o e xi \u00e9 a posi\u00e7\u00e3o do propulsor em rela\u00e7\u00e3o \u00e0 \n\nsec\u00e7\u00e3o m\u00e9dia da embarca\u00e7\u00e3o. \n\nDa equa\u00e7\u00e3o 2.20 a parcela TT AAA 1)( ?  \u00e9 a pseudo \u2013 inversa que \u00e9 um modo \n\nmatem\u00e1tico para se realizar a inversa de uma matriz n\u00e3o quadrada, j\u00e1 que num \n\nSPD a sa\u00edda do controlador fornece uma for\u00e7a em Surge, outra em Sway e um \n\nmomento em Yaw, e a embarca\u00e7\u00e3o geralmente tem mais de tr\u00eas atuadores. \n\nO modelo a ser ensaiado (Figura 2.4) tem tr\u00eas atuadores: dois propulsores \n\nconfigurados em t\u00fanel (for\u00e7as F2 e F3) e um propulsor principal (for\u00e7a F1). \n\n \n\nFigura 2.4 - Modelo com 3 propulsores: 1 principal e 2 em t\u00fanel \n\nSendo Fx, Fy as for\u00e7as surge e sway e Fz igual ao momento de yaw, a seguinte \n\nrela\u00e7\u00e3o se aplica: \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n?=\n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\nz\n\ny\n\nx\n\nF\nF\nF\n\nF\nF\nF\n\n15.00\n15.00\n\n001\n\n3\n\n2\n\n1\n\n        2.22 \n\n\n\n36 \n\n3. Aparato experimental \n\nComo j\u00e1 mencionado, um sistema de posicionamento din\u00e2mico \u00e9 bastante \n\ncomplexo dado a modelagem nada trivial de uma embarca\u00e7\u00e3o, os recursos de \n\nestima\u00e7\u00e3o de estados do modelo realizada pelo filtro de Kalman e o complexo \n\ntratamento da aloca\u00e7\u00e3o de empuxos quando se t\u00eam muitos atuadores. Somando \n\nesses fatores \u00e0 implementa\u00e7\u00e3o de um SPD numa embarca\u00e7\u00e3o real (adapta\u00e7\u00e3o de \n\natuadores quando o navio n\u00e3o os tiver) e a inerente necessidade de diversos \n\najustes dos par\u00e2metros dos controladores, torna-se de grande valia o pr\u00e9vio \n\nestudo do comportamento de um SPD em ambientes de simula\u00e7\u00e3o computacional \n\ne de ensaios com modelos em escala reduzida. \n\nNesse sentido, um aparato experimental foi preparado para a realiza\u00e7\u00e3o de \n\nensaios no tanque de provas do Departamento de Engenharia Naval e Oce\u00e2nica \n\nda USP e \u00e9 bastante semelhante ao aparato desenvolvido para os ensaios em [3]. \n\nA Figura 3.1 mostra o aparato experimental utilizado nos ensaios e pode-se dizer \n\nque o que foi desenvolvido neste trabalho \u00e9 parecido, mas com algumas \n\naltera\u00e7\u00f5es de topologia, como por exemplo, a utiliza\u00e7\u00e3o de links de r\u00e1dio no lugar \n\nde rede wireless; de c\u00e2mera no lugar do conjunto de feixe lazer e prisma e de \n\nm\u00f3dulos microcontrolados no lugar de um computador embarcado. \n\n \n\nFigura 3.1 \u2013 Topologia utilizada nos experimentos de Hamamatsu [3] \n\n\n\n37 \n\nO aparato experimental desenvolvido neste trabalho consiste basicamente nos \n\nm\u00f3dulos mostrados na Figura 3.2. \n\n \n\nFigura 3.2 - Topologia utilizada nos experimentos deste trabalho. \n\n\u2022 C\u00e2mera (sistema de aquisi\u00e7\u00e3o da posi\u00e7\u00e3o): consiste numa c\u00e2mera de v\u00eddeo \n\nsobre o tanque e um algoritmo de localiza\u00e7\u00e3o executado no console central; \n\n\u2022 Console central: respons\u00e1vel por executar os algoritmos de localiza\u00e7\u00e3o do \n\nmodelo, algoritmos de controle e por comunicar com a embarca\u00e7\u00e3o via \n\nr\u00e1dio freq\u00fc\u00eancia; \n\n\u2022 RF (M\u00f3dulos de r\u00e1dio): realizam a comunica\u00e7\u00e3o sem fios entre o console \n\ncentral e os m\u00f3dulos embarcados; \n\n\u2022 M\u00f3dulo central: consiste no m\u00f3dulo principal embarcado e \u00e9 respons\u00e1vel \n\npor gerenciar a comunica\u00e7\u00e3o com o console em terra e com os demais \n\nm\u00f3dulos embarcados; \n\n\u2022 M\u00f3dulos de controle localizados: s\u00e3o respons\u00e1veis por realizar um controle \n\nde rota\u00e7\u00e3o ou posi\u00e7\u00e3o localizado em cada atuador instalado. \n\nOs itens subseq\u00fcentes descrevem em detalhes os m\u00f3dulos desenvolvidos e \n\nmostra tamb\u00e9m todo o aparato mec\u00e2nico preparado (casco, propulsores). \n\n\n\n38 \n\n \n\n3.1. Aparato eletr\u00f4nico \n\n\u00c9 respons\u00e1vel por controlar todos os atuadores da embarca\u00e7\u00e3o como controle de \n\nrota\u00e7\u00e3o dos motores principal e t\u00fanel, e controle da posi\u00e7\u00e3o do leme e motor \n\nazimutal. Realiza tamb\u00e9m a comunica\u00e7\u00e3o necess\u00e1ria via r\u00e1dio com o console \n\ncentral. \n\nO projeto eletr\u00f4nico poderia ter sido concebido de diversas formas, no entanto, \n\ndurante seu desenvolvimento os principais itens a seguir passaram a compor a \n\narquitetura do sistema: \n\nTabela 3.1 - Itens do projeto eletr\u00f4nico \n\nItem do projeto eletr\u00f4nico Justificativa para compor a arquitetura \n\nM\u00f3dulos de controle de motores \n\nlocalizados \n\nDescentraliza o processamento embarcado, pois h\u00e1 \n\num microcontrolador para comandar cada motor de \n\npropulsor \n\nRede de comunica\u00e7\u00e3o embarcada \n\nPadr\u00e3o RS485. Garante a comunica\u00e7\u00e3o entre os \n\nmicrocontroladores de todos os m\u00f3dulos do modelo \n\nminimizando a interfer\u00eancia de ru\u00eddos \n\neletromagn\u00e9ticos externos \n\nM\u00f3dulo embarcado central \n\nProcessa a comunica\u00e7\u00e3o com o console central em \n\nterra e com todos os demais m\u00f3dulos embarcados \n\ngerenciando poss\u00edveis falhas do sistema como \n\nfalhas em propulsores e falta de comunica\u00e7\u00e3o \n\nexterna \n\nUm conceito impl\u00edcito e bastante importante que foi considerado no projeto foi \n\nelaborar uma arquitetura com pouca emiss\u00e3o de ru\u00eddos eletromagn\u00e9ticos e \n\nbastante imunidade a este tipo de interfer\u00eancia. Este conceito \u00e9 muito importante \n\n\n\n39 \n\npara garantir o bom funcionamento do aparato eletr\u00f4nico em qualquer ambiente \n\nsem que sofra interfer\u00eancias ou interfira em outros equipamentos. \n\nComo resultado, a arquitetura do sistema embarcado ficou bastante simples, \n\npor\u00e9m eficiente e robusta j\u00e1 que conta com um sistema de comunica\u00e7\u00e3o entre \n\nm\u00f3dulos via rede RS485 e com itens de seguran\u00e7a como desligamento de \n\nmotores caso haja falta de comunica\u00e7\u00e3o com o console em terra. \n\nA Figura 3.3 mostra os m\u00f3dulos que comp\u00f5em a arquitetura embarcada. \n\n \n\nFigura 3.3 - Arquitetura embarcada \n \n\n3.1.1. Comunica\u00e7\u00e3o embarcada \n\nA configura\u00e7\u00e3o de rede padr\u00e3o RS485 \u00e9 utilizada. Este tipo de comunica\u00e7\u00e3o \u00e9 \n\nlargamente utilizado no meio industrial por garantir robustez na comunica\u00e7\u00e3o entre \n\ndois ou mais pontos por dist\u00e2ncias que podem chegar a centenas de metros. Esta \n\nrobustez se d\u00e1 pela comunica\u00e7\u00e3o por um par de fios em modo diferencial, ou seja, \n\nos demais pontos que est\u00e3o recebendo os dados de um transmissor, conseguem \n\nl\u00ea-los via diferen\u00e7a de tens\u00e3o entre esses dois fios da rede. Se uma perturba\u00e7\u00e3o \n\nexterna atinge a rede e as tens\u00f5es desses fios \u00e9 afetada, os ru\u00eddos aparecem \n\n\n\n40 \n\nigualmente nesses fios e os receptores continuam lendo os dados enviados pois \n\nsempre o fazem pela diferen\u00e7a entre os fios fazendo com que a perturba\u00e7\u00e3o n\u00e3o \n\nseja sentida. \n\nOutro fator importante na escolha dessa rede de comunica\u00e7\u00e3o \u00e9 o fato de que, se \n\nsomente um m\u00f3dulo fosse usado para acionar os diversos motores do modelo, \n\nalguns fios com aproximadamente 2m de comprimento seriam usados nas \n\ninterconex\u00f5es criando assim um sistema com forte emiss\u00e3o de ru\u00eddo eletro-\n\nmagn\u00e9tico no ambiente em que est\u00e1. A explica\u00e7\u00e3o para isso s\u00e3o as correntes \n\nrelativamente altas e sujeitas \u00e0 freq\u00fc\u00eancias resultantes do controle de velocidade \n\ndos motores resultando em antenas emissoras de ru\u00eddos podendo, com isso, \n\ninterferir negativamente em outros equipamentos pr\u00f3ximos aos locais de ensaios. \n\n3.1.2. M\u00f3dulos de r\u00e1dio  \n\nS\u00e3o respons\u00e1veis por realizar a comunica\u00e7\u00e3o via r\u00e1dio entre o console central em \n\nterra e o sistema embarcado no modelo. Foram desenvolvidos no sentido de \n\nconseguir comunica\u00e7\u00e3o confi\u00e1vel, transparente e que permita ensaios com \n\ndist\u00e2ncias de at\u00e9 400m em visada direta. A Figura 3.4 mostra um m\u00f3dulo de r\u00e1dio \n\nfechado e outro aberto para visualiza\u00e7\u00e3o da eletr\u00f4nica interna. \n\n \n\nFigura 3.4 - M\u00f3dulos de comunica\u00e7\u00e3o sem fio \n\nOs m\u00f3dulos de r\u00e1dio t\u00eam as seguintes caracter\u00edsticas: etapa conversora de n\u00edveis \n\ne m\u00f3dulo transceptor de r\u00e1dio. A etapa conversora realiza a convers\u00e3o entre os \n\nn\u00edveis de tens\u00e3o de uma rede RS232 (utilizada para interfacear com o m\u00f3dulo \n\ncentral) e os n\u00edveis de tens\u00e3o TTL, que s\u00e3o lidos e enviados pelo m\u00f3dulo \n\n\n\n41 \n\ntransceptor. Este m\u00f3dulo transceptor \u00e9 um produto da empresa Radiotronix [18] \n\n(Figura 3.5) e agrega diversas fun\u00e7\u00f5es importantes para o bom funcionamento do \n\nlink de r\u00e1dio. Tais fun\u00e7\u00f5es se resumem em: \n\n \n\nFigura 3.5 - M\u00f3dulo transceptor Radiotronix \n\n\u2022 Espalhamento espectral: evita a interfer\u00eancia de outros equipamentos \n\noperando na mesma faixa de freq\u00fc\u00eancias; \n\n\u2022 CRC: cada pacote de dados enviado recebe ao seu final mais um bloco \n\ncontendo um resultado matem\u00e1tico que \u00e9 verificado no m\u00f3dulo receptor. \n\nEsta verifica\u00e7\u00e3o, quando o resultado \u00e9 v\u00e1lido, garante que o pacote de \n\ndados foi entregue corretamente sem perda ou altera\u00e7\u00e3o de informa\u00e7\u00e3o; \n\n\u2022 Canais de opera\u00e7\u00e3o: os m\u00f3dulos transceptores podem ser configurados em \n\nat\u00e9 32 canais diferentes. Este recurso \u00e9 importante se outros sistemas \n\nestiverem operando nas proximidades. \n\n3.1.3. M\u00f3dulos de motor DC e de passo \n\nEsses m\u00f3dulos foram desenvolvidos de forma a poder controlar tanto motores de \n\ncorrente cont\u00ednua quanto motores de passo (Figura 3.6). Eles s\u00e3o formados por \n\nduas pontes H que podem ser configuradas da seguinte forma: \n\n\u2022 Uma ponte H: controla um motor de corrente cont\u00ednua com controle de \n\nvelocidade via varia\u00e7\u00e3o da largura do pulso (PWM) aplicado no motor. \n\n\u2022 Duas pontes H: controla um motor de passo independentemente do seu \n\ntipo: unipolar ou bipolar. \n\n\n\n42 \n\n \n\nFigura 3.6 - M\u00f3dulo acionador de motores (DC e passo) \n \n\n3.1.4. M\u00f3dulo central \n\nEste m\u00f3dulo \u00e9 respons\u00e1vel por gerenciar todas as tarefas da eletr\u00f4nica \n\nembarcada. A Figura 3.7 mostra sua arquitetura interna. \n\n \n\nFigura 3.7 - Diagrama de blocos interno do m\u00f3dulo central \n\n\n\n43 \n\nUm microcontrolador principal executa toda a comunica\u00e7\u00e3o via interface sem fio \n\ncom o console em terra como a forma de acionamento de todos os atuadores e \n\nenvio de status. \u00c9 respons\u00e1vel tamb\u00e9m pela coleta e grava\u00e7\u00e3o de dados em \n\nmem\u00f3ria n\u00e3o vol\u00e1til (EEPROM), leitura de eventuais entradas digitais e de \n\nsensores com sa\u00edda anal\u00f3gica que por ventura venham a ser instalados no \n\nmodelo. \n\nOutro microcontrolador, secund\u00e1rio, \u00e9 respons\u00e1vel exclusivamente por gerenciar a \n\ncomunica\u00e7\u00e3o do m\u00f3dulo central com todos os m\u00f3dulos de acionamento dos \n\natuadores. Faz a varredura de todos esses m\u00f3dulos e detecta falhas ou paradas \n\nde comunica\u00e7\u00e3o. A dedica\u00e7\u00e3o exclusiva desse microcontrolador \u00e9 importante por \n\nn\u00e3o executar outras fun\u00e7\u00f5es embarcadas e garantir o correto funcionamento dos \n\ndemais m\u00f3dulos a ele conectados. \n\nUma fonte chaveada distribui alimenta\u00e7\u00e3o para os componentes do m\u00f3dulo central \n\ne tamb\u00e9m para a interface de r\u00e1dio e os m\u00f3dulos de controle de atuadores. A \n\nisola\u00e7\u00e3o de caminhos de corrente el\u00e9trica no sistema como um todo \u00e9 importante \n\npara evitar ao m\u00e1ximo problemas com ru\u00eddos e quedas de tens\u00e3o nos \n\nbarramentos sens\u00edveis, ou seja, barramentos que alimentam outros \n\nmicrocontroladores, sensores, mem\u00f3rias etc. A Figura 3.8 mostra como essa \n\nsepara\u00e7\u00e3o foi feita. \n\n\n\n44 \n\n \n\nFigura 3.8 - Esquema de alimenta\u00e7\u00f5es no m\u00f3dulo de acionamento de motores \n\nNota-se que as alimenta\u00e7\u00f5es de pot\u00eancia e de eletr\u00f4nica sens\u00edvel v\u00eam por \n\ncaminhos diferentes e que a jun\u00e7\u00e3o dos terras (refer\u00eancias de tens\u00e3o) dos dois \n\nblocos \u00e9 feita somente num ponto, pr\u00f3ximo ao conector de pot\u00eancia. Isso evita, \n\npor exemplo, que ru\u00eddos provocados pela modula\u00e7\u00e3o em largura de pulso (PWM) \n\ndo controle de velocidade dos motores interfira no funcionamento do \n\nmicrocontrolador presente nesta placa. \n\n \n\n3.2. Sistema de aquisi\u00e7\u00e3o da posi\u00e7\u00e3o do modelo no tanque de \nprovas \n\nEste sistema de aquisi\u00e7\u00e3o consiste numa c\u00e2mera de v\u00eddeo instalada no eixo \n\nlongitudinal sobre o tanque (como na Figura 3.2 acima) cujo campo de vis\u00e3o \n\nabrange 5m x 5m do tanque de provas o que representa uma \u00e1rea suficiente para \n\nos ensaios de posicionamento din\u00e2mico j\u00e1 que o controle de posi\u00e7\u00e3o \u00e9 feito em \n\ntorno de um ponto fixo n\u00e3o necessitando de grandes \u00e1reas dispon\u00edveis; e serve \n\ntamb\u00e9m para ensaios de acompanhamento de trajet\u00f3ria para curtas dist\u00e2ncias do \n\ntanque. Este sistema de aquisi\u00e7\u00e3o fora desenvolvido em [7] e teve continuidade e \n\nalguns aperfei\u00e7oamentos em [8] e [9].  \n\n\n\n45 \n\nAs imagens da c\u00e2mera anal\u00f3gica colorida (KODO KC-512NTX) s\u00e3o enviadas com \n\nresolu\u00e7\u00e3o de 330 linhas para uma placa de aquisi\u00e7\u00e3o de v\u00eddeo instalada no \n\nconsole em terra. Uma biblioteca de aquisi\u00e7\u00e3o de imagens realiza a captura \n\nquadro a quadro dos sinais gerados e disponibiliza, a cada quadro amostrado, \n\numa matriz contendo a cor RGB (componentes Red, Green e Blue de uma \n\ndeterminada cor) de cada ponto (pixel) do quadro adquirido. \n\nPara a localiza\u00e7\u00e3o da embarca\u00e7\u00e3o no tanque, v\u00e1rios algoritmos de processamento \n\nde imagem poderiam ser desenvolvidos para este fim, no entanto, optou-se por \n\nutilizar um algoritmo simples, por\u00e9m eficiente e que n\u00e3o tomasse demasiado \n\nprocessamento do console central, a saber: \n\nNa embarca\u00e7\u00e3o em estudo s\u00e3o instalados dois LEDs (Light Emiter Diode \u2013 diodos \n\nemissores de luz) de cores distintas como vermelho e azul sendo um na proa e \n\noutro na popa. Quando um quadro da c\u00e2mera \u00e9 adquirido e a matriz de cor de \n\ncada ponto da imagem capturada, o algoritmo faz o rastreamento da figura em \n\nbusca dos dois pontos coloridos e distintos. Ao encontr\u00e1-los (e n\u00e3o ocupam \n\nsomente um ponto da imagem) o algoritmo localiza o centro desse ponto luminoso \n\n(Figura 3.9) e guarda seu valor. Como as cores s\u00e3o distintas e pr\u00e9-determinadas, \n\n\u00e9 poss\u00edvel saber qual deles \u00e9 a popa e qual \u00e9 a proa. \n\n \n\nFigura 3.9 \u2013 Imagem da tela mostrando a localiza\u00e7\u00e3o dos pontos luminosos no modelo \n\nNa amostragem seguinte, o algoritmo realiza a varredura apenas ao redor do \n\nponto localizado na amostra anterior (Figura 3.10) e localiza com isso sua atual \n\nposi\u00e7\u00e3o na amostra. Essa pequena varredura em torno do ponto anterior \u00e9 \n\n\n\n46 \n\nposs\u00edvel dado que a din\u00e2mica da embarca\u00e7\u00e3o \u00e9 lenta e o ponto n\u00e3o apresenta \n\ndeslocamento consider\u00e1vel entre amostras. \n\n \n\nFigura 3.10 - Varredura do algoritmo de localiza\u00e7\u00e3o \n\nNa c\u00e2mera utilizada foi instalada uma lente 2,5 mm cujo campo de vis\u00e3o obtido \u00e9 \n\nrelativamente grande (como dito anteriormente de 5 m X 5 m), no entanto, os \n\nquadros adquiridos apresentam uma distor\u00e7\u00e3o conhecida como tipo \u201cbarril\u201d (Figura \n\n3.11) e necessita que seja corrigida para a correta leitura da posi\u00e7\u00e3o do modelo no \n\ntanque de provas. \n\n \n\nFigura 3.11 - Evid\u00eancias da distor\u00e7\u00e3o conhecida como \u201cbarril\u201d provocada pela lente da c\u00e2mera. \n\nAs imagens adquiridas passam ent\u00e3o por um algoritmo de corre\u00e7\u00e3o da distor\u00e7\u00e3o \n\nprovocada pela lente e s\u00e3o entregues continuamente para o algoritmo de \n\nposicionamento. \n\nO m\u00e9todo de corre\u00e7\u00e3o radial proposto por Gibbon [15] reconstr\u00f3i a imagem via \n\ncorre\u00e7\u00e3o ponto a ponto da mesma atrav\u00e9s do raio entre o ponto que corresponde \n\nao centro da c\u00e2mera e o ponto a ser corrigido. A equa\u00e7\u00e3o \u00e9 dada por: \n\n)1( 2didiui krrr +=          3.1 \n\n\n\n47 \n\nonde rui \u00e9 a dist\u00e2ncia corrigida (em pixels) entre o ponto central da imagem at\u00e9 o \n\nponto em quest\u00e3o e rdi \u00e9 a dist\u00e2ncia distorcida (em pixels) lida imediatamente ap\u00f3s \n\na aquisi\u00e7\u00e3o imagem. A constante k deve ser determinada via pr\u00e9via calibra\u00e7\u00e3o que \n\nconsiste em: \n\n\u2022 Posicionar a c\u00e2mera sobre o tanque de dimens\u00f5es conhecidas; \n\n\u2022 Medir a dist\u00e2ncia rui entre o centro da imagem e um ponto (na linha \n\nhorizontal) interior aos limites do tanque.  \n\n\u2022 Calcular qual deveria ser o valor correto de rdi atrav\u00e9s de \nt\n\nrh\ndi m\n\nms\nr\n\n2\nRe\n\n= , \n\nonde Resh \u00e9 a resolu\u00e7\u00e3o (em pixels) de uma linha da c\u00e2mera; mr \u00e9 a \n\nmedida real em metros do centro da imagem at\u00e9 o ponto escolhido e mt \u00e9 a \n\nmetade da largura do tanque (em metros). \n\n\u2022 Feito isso, basta encontrar k a partir dos resultados anteriores e da equa\u00e7\u00e3o \n\n3.1. \n\nA imagem adquirida apresenta um erro entre a posi\u00e7\u00e3o real da embarca\u00e7\u00e3o e a \n\nposi\u00e7\u00e3o interpretada atrav\u00e9s dos finitos pontos da imagem. \u00c9 imediato notar que a \n\ncorre\u00e7\u00e3o da distor\u00e7\u00e3o tipo \u201cbarril\u201d leva a erros de valores diferentes ao longo do \n\nraio do quadro, j\u00e1 que os pontos precisam ser esticados ou encolhidos para a \n\nreconstru\u00e7\u00e3o do quadro correto. Nos ensaios realizados, o erro de medi\u00e7\u00e3o no \n\ncentro da imagem foi de 0,5 cm enquanto que nas bordas da imagem o erro obtido \n\nfoi de aproximadamente 2,1 cm. Num primeiro momento este aumento no erro \n\nparece ser bastante prejudicial para o sistema de localiza\u00e7\u00e3o, no entanto, n\u00e3o h\u00e1 \n\ndegrada\u00e7\u00e3o da opera\u00e7\u00e3o de posicionamento din\u00e2mico. \n\n \n\n\n\n48 \n\n3.3.  Console central \n\n\u00c9 respons\u00e1vel por executar os algoritmos necess\u00e1rios para a localiza\u00e7\u00e3o e \n\ncontrole da posi\u00e7\u00e3o da embarca\u00e7\u00e3o. Realiza tamb\u00e9m o algoritmo de aloca\u00e7\u00e3o de \n\nempuxos e a transmiss\u00e3o via r\u00e1dio para o modelo no tanque de provas. \n\nOs algoritmos de localiza\u00e7\u00e3o e controle da embarca\u00e7\u00e3o s\u00e3o implementados em \n\ndois programas: o de localiza\u00e7\u00e3o via vis\u00e3o artificial em Visual Basic, e o de \n\nfiltragem e controle em Simulink / Matlab. \n\n \n\nFigura 3.12 \u2013 Fluxograma dos dados em Visual Basic \n\nA Figura 3.12 mostra um fluxograma dos dados dentro do programa feito em \n\nVisual Basic. A imagem adquirida pela c\u00e2mera \u00e9 enviada para o programa via uma \n\nbiblioteca multim\u00eddia. Esta imagem passa pelo algoritmo de corre\u00e7\u00e3o da mesma e \n\ndetec\u00e7\u00e3o dos pontos relativos \u00e0 proa e \u00e0 popa dos quais \u00e9 poss\u00edvel inferir qual o \n\n\n\n49 \n\ncentro de massa da embarca\u00e7\u00e3o e seu respectivo aproamento. Estas posi\u00e7\u00f5es, \n\njuntamente com as refer\u00eancias definidas pelo usu\u00e1rio na tela do programa s\u00e3o \n\ncolocadas num arquivo texto que ser\u00e1 lido pelo Simulink a fim de executar as \n\nopera\u00e7\u00f5es de filtragem e controle. A Figura 3.13 mostra a tela principal do \n\nprograma em Visual Basic. \n\n \n\nFigura 3.13 - Tela principal do programa em Visual Basic. \n\nAinda na tela principal o usu\u00e1rio pode alterar as refer\u00eancias a qualquer momento \n\ndo ensaio (bot\u00e3o \u201cSet Point\u201d) bem como definir a posi\u00e7\u00e3o atual da embarca\u00e7\u00e3o \n\ncomo sendo a refer\u00eancia (bot\u00e3o \u201cSP pos. atual\u201d). \n\nA Figura 3.14 mostra um fluxograma dos dados no ambiente do Simulink / Matlab. \n\nOs dados de posi\u00e7\u00e3o do centro de gravidade e aproamento da embarca\u00e7\u00e3o s\u00e3o \n\nlidos via arquivo texto e passados para o m\u00f3dulo do Filtro de Kalman.  \n\n\n\n50 \n\n \n\nFigura 3.14 - Fluxograma das fun\u00e7\u00f5es em Matlab / Simulink \n\nNeste m\u00f3dulo o algoritmo de filtragem \u00e9 executado, as vari\u00e1veis de estado \n\nestimadas e passadas para o m\u00f3dulo de controle, onde o algoritmo de controle PD \n\n\u00e9 executado. Como resultado, obt\u00e9m-se os empuxos necess\u00e1rios para corrigir a \n\nposi\u00e7\u00e3o e aproamento da embarca\u00e7\u00e3o, no entanto, esses empuxos precisam ser \n\nalocados para cada propulsor da embarca\u00e7\u00e3o. Para tanto, o m\u00f3dulo de aloca\u00e7\u00e3o \n\nde empuxos aplica o algoritmo de aloca\u00e7\u00e3o e converte o empuxo em rota\u00e7\u00e3o, j\u00e1 \n\nque esta \u00e9 a grandeza enviada para cada propulsor e que pode ser garantida via \n\ncontrole de rota\u00e7\u00e3o localizado (vide cap\u00edtulo 4.1 do ensaio dos motores dos \n\npropulsores). As figuras a seguir (3.15, 3.16, 3.17, 3.18 e 3.19) mostram, em \n\ndiagramas de blocos, maiores detalhes da implementa\u00e7\u00e3o em Simulink. \n\n\n\n51 \n\n \n\nFigura 3.15 - Estrutura  do sistema com filtro de Kalman e bloco de controle. \n\nA Figura 3.15 acima mostra a estrutura do sistema de filtragem / controle. No \n\nbloco de leitura a posi\u00e7\u00e3o \u00e9 enviada para o filtro de Kalman juntamente com as \n\nfor\u00e7as obtidas do m\u00f3dulo controlador. Neste m\u00f3dulo entram a refer\u00eancia e o vetor \n\nde estados estimado no filtro de Kalman para a execu\u00e7\u00e3o do controle PD. \n\n \n\nFigura 3.16 - M\u00f3dulo de leitura da refer\u00eancia e posi\u00e7\u00e3o real do modelo. \n\nA Figura 3.16 acima mostra o m\u00f3dulo de leitura. S\u00e3o lidas a refer\u00eancia e a posi\u00e7\u00e3o \n\nvindas do programa de vis\u00e3o artificial em Visual Basic. \n\nA Figura 3.17 mostra o bloco contendo o controlador mais \u00e0 esquerda e a \n\naloca\u00e7\u00e3o de empuxos mais \u00e0 direita. Os empuxos entram no bloco de aloca\u00e7\u00e3o de \n\nempuxos em Newton e saem em RPM (rota\u00e7\u00f5es por minuto). \n\n\n\n52 \n\n \n\nFigura 3.17 - Bloco de controle e aloca\u00e7\u00e3o de empuxos. \n\nA Figura 3.18 mostra o bloco de escrita. A for\u00e7a e os empuxos obtidos do \n\ncontrolador s\u00e3o enviados para o programa de vis\u00e3o artificial em Visual Basic para \n\nque finalmente possam ser enviados para a embarca\u00e7\u00e3o via comunica\u00e7\u00e3o sem fio. \n\n \n\nFigura 3.18 - Bloco de escrita das rota\u00e7\u00f5es dos motores para o Visual Basic. \n\nA Figura 3.19 ilustra o bloco do filtro de Kalman implementado no console central \n\nem terra. Nota-se que h\u00e1 fun\u00e7\u00f5es separadas para a realiza\u00e7\u00e3o da predi\u00e7\u00e3o e da \n\ncorre\u00e7\u00e3o do filtro. \n\n\n\n53 \n\n \n\nFigura 3.19 - Bloco do filtro de Kalman implementado. \n\n \n\n3.4. Modelo em escala \n\nO modelo em escala preparado para os ensaios de SPD representa um petroleiro \n\nda classe Suezmas t\u00edpico em escala de 1:125. \n\nAs dimens\u00f5es do navio t\u00edpico e do modelo em escala est\u00e3o na Tabela 3.2.  \n\nTabela 3.2 - Dimens\u00f5es do navio t\u00edpico e do modelo em estudo \n\nDimens\u00f5es principais Navio t\u00edpico Modelo (escala 1:125) \n\nComprimento total (Loa) 272,75 m 2182 mm \n\nComprimento entre perp. (Lpp) 258,00 m 2064 mm \n\nBoca 46,00 m 368 mm \n\nPontal 24,40 m 195 mm \n\nCalado de projeto 16,20 m 130 mm \n\nCalado de escantilh\u00e3o 17,50 m 140 mm \n\nCalado lastreado 8,13 m 65 mm \n\nDeslocamento carregado 175181 ton 89,7 Kg \n\nDeslocamento lastreado 54194 ton 27,7 Kg \n\n \n\n\n\n54 \n\n3.4.1. Aparato mec\u00e2nico \n\nFoi constru\u00eddo pelo Departamento de Engenharia Naval e Oce\u00e2nico da USP e se \n\nresume nas partes mec\u00e2nicas, atuadores como leme, motor principal e t\u00fanel bem \n\ncomo a superestrutura do mesmo. A Figura 3.20 ilustra o casco do modelo \n\nconstru\u00eddo. \n\n \n\nFigura 3.20 - Algumas vistas do casco do modelo \n \n\nAinda na Figura 3.20 observam-se os propulsores que ser\u00e3o instalados no \n\nmodelo, e na Tabela 3.3 as suas posi\u00e7\u00f5es s\u00e3o ent\u00e3o determinadas em fun\u00e7\u00e3o da \n\nescala utilizada. \n\n \nTabela 3.3 - Posi\u00e7\u00f5es dos motores no modelo. \n\nLocaliza\u00e7\u00e3o Di\u00e2metro Empuxo \nPropulsor Navio \n\n(m) \nModelo \n(mm) \n\nNavio \n(m) \n\nModelo \n(mm) \n\nNavio \n(tonf) \n\nModelo \n(gf) \n\nT\u00fanel de popa 14,98 120 2,75 22 18,5/-18,5 9,5/-9,5 \nT\u00fanel de proa 258,27 2066 3,16 25 25/-25 12,8/-12,8 \n\nPrincipal 4,80 38 8,15 65 123/-55 63,0/-28,2 \n\n\n\n55 \n\n \n3.4.2. Propulsores (motores el\u00e9tricos) \n\nOs propulsores selecionados para ser utilizados no modelo s\u00e3o micromotores da \n\nmarca Faulhaber os quais possuem um encoder acoplado ao eixo para a medida \n\nda sua rota\u00e7\u00e3o. Os que ser\u00e3o utilizados na configura\u00e7\u00e3o em t\u00fanel foram montados \n\nnuma estrutura mec\u00e2nica mostrada na Figura 3.21 que consiste no motor \n\nFaulhaber com encoder, um sistema de transmiss\u00e3o da rota\u00e7\u00e3o via correia e uma \n\nh\u00e9lice instalada num tubo de alum\u00ednio.  \n\n \nFigura 3.21 - Desenho mec\u00e2nico de um propulsor em t\u00fanel [4] \n\nA Figura 3.22 mostra o conjunto montado e os locais de instala\u00e7\u00e3o na proa e na \n\npopa do modelo. \n\n\n\n56 \n\n \nFigura 3.22 - Conjunto do propulsor em t\u00fanel montado \n\n \n\nO modelo finalizado at\u00e9 ent\u00e3o permitir\u00e1 a realiza\u00e7\u00e3o de ensaios de \n\nposicionamento din\u00e2mico com dois motores configurados em t\u00fanel e um motor \n\nprincipal. O objetivo final da sua constru\u00e7\u00e3o \u00e9 a instala\u00e7\u00e3o de um motor azimutal, \n\nmas que n\u00e3o ser\u00e1 objeto de ensaio deste trabalho. \n\n\n\n57 \n\n4. Ensaios \n\nNeste cap\u00edtulo ser\u00e1 mostrado um ensaio realizado com o sistema de propuls\u00e3o \n\ncom a finalidade de implementar e testar o controle localizado para cada motor e \n\ntamb\u00e9m os resultados de ensaios de empuxo X rota\u00e7\u00e3o que foram feitos para o \n\nlevantamento das caracter\u00edsticas de cada propulsor. Ser\u00e3o mostrados tamb\u00e9m os \n\nensaios com o sistema completo com o intuito de comprovar o funcionamento de \n\ntodo o conjunto, principalmente da eletr\u00f4nica embarcada projetada. A \n\ncomprova\u00e7\u00e3o do correto funcionamento da eletr\u00f4nica est\u00e1 associada com as \n\nrespostas e o desempenho do modelo em opera\u00e7\u00e3o no tanque de provas, ou seja, \n\nse os ensaios apresentarem bons resultados e coer\u00eancia no comportamento, \n\npode-se concluir que a eletr\u00f4nica desenvolvida funcionou como projetado \n\natendendo aos comandos do console central em terra. \n\n \n4.1. Motores dos propulsores \n\nO conjunto de atuadores projetados para funcionar num sistema de \n\nposicionamento din\u00e2mico \u00e9 geralmente diferente dos sistemas de propuls\u00e3o \n\ncomumente usados em embarca\u00e7\u00f5es sem este tipo de sistema. Eles devem \n\npossuir caracter\u00edsticas, por exemplo, de r\u00e1pida resposta aos comandos do \n\ncomputador central para garantir que o sistema consiga colocar os propulsores \n\nnum estado desejado sem atrasos e, por conseguinte, sem instabilidades na \n\nmalha de controle. \n\nOutra caracter\u00edstica desses atuadores (de embarca\u00e7\u00f5es reais ou dos utilizados no \n\nmodelo em quest\u00e3o) \u00e9 a presen\u00e7a local de um sistema de controle a fim de \n\ngarantir o correto funcionamento desses atuadores. Se o computador central exige \n\nrota\u00e7\u00e3o de 100 RPM num motor, este deve responder rapidamente com a rota\u00e7\u00e3o \n\ndesejada; e isso s\u00f3 \u00e9 garantido com a presen\u00e7a de controle local. A Figura 4.1 \n\nilustra esta arquitetura. \n\n\n\n58 \n\n \n\nFigura 4.1 - Arquitetura de cada propulsor de um SPD (real ou experimental)  \n \n\nO sistema de controle, mostrado na figura acima, recebe qual a refer\u00eancia de \n\nrota\u00e7\u00e3o e l\u00ea a rota\u00e7\u00e3o real do motor. Atrav\u00e9s de um controle, por exemplo PI, \n\najusta a rota\u00e7\u00e3o para a desejada. \n\nO sistema eletr\u00f4nico que far\u00e1 o acionamento dos atuadores do modelo tamb\u00e9m \n\ncontar\u00e1 com um controle localizado para cada atuador (Figura 4.2). Para os \n\nmotores de corrente cont\u00ednua fora previsto um controlador PI, cujo projeto baseou-\n\nse no modelo te\u00f3rico de primeira ordem deste tipo de motor. \n\n \n\nFigura 4.2 - Controles superior e inferior (localizado) \n\nUm motor de corrente cont\u00ednua pode ser aproximado pelo seguinte modelo linear \n\n[16]: \n\n\n\n59 \n\nmsT\nK\n\nsG\n+\n\n=\n1\n\n)( ,          4.1 \n\nonde K \u00e9 um ganho relacionando a entrada (tens\u00e3o) e a sa\u00edda (rota\u00e7\u00e3o) do motor \n\nem regime permanente e Tm \u00e9 a constante de tempo do motor. \n\nO controlador PI pode ser representado por: \n\n??\n?\n\n?\n??\n?\n\n? +\n=??\n\n?\n\n?\n??\n?\n\n?\n+=\n\nI\n\nI\nPI\n\nI\nPI sT\n\nsT\nK\n\nsT\nKsH\n\n11\n1)( ;      4.2 \n\nO sistema de controle da rota\u00e7\u00e3o com a realimenta\u00e7\u00e3o \u00e9 mostrado no diagrama de \n\nblocos da Figura 4.3: \n\n \n\nFigura 4.3 - Diagrama de malha fechada para o controle de motor DC \n\nOs valores do controlador PI foram obtidos de forma a cancelar o p\u00f3lo do modelo \n\n4.1, ou seja, considerando Im TT = , e o ganho ajustado a partir de ensaios de \n\nresposta ao degrau do motor. \n\nOs c\u00e1lculos necess\u00e1rios para o controle PI ser\u00e3o realizados por um \n\nmicrocontrolador (sistema digital) que necessita, portanto, de equa\u00e7\u00f5es de \n\ndiferen\u00e7as para que o sistema possa funcionar. Dessa forma, o controlador PI no \n\ndom\u00ednio \u201cs\u201d precisa ser convertido para o dom\u00ednio discreto \u201cz\u201d considerando-se um \n\nper\u00edodo de amostragem adequado. \n\nUma transforma\u00e7\u00e3o bastante conhecida \u00e9 a de Tustin [17] e \u00e9 dada por: \n\n)1(\n)1(2\n\n+\n?\n\n=\nz\nz\n\nT\ns ,           4.3 \n\n\n\n60 \n\nonde T \u00e9 o per\u00edodo de amostragem. \n\nA fun\u00e7\u00e3o de transfer\u00eancia do controlador pode ent\u00e3o ser transformada em: \n\n??\n?\n\n?\n??\n?\n\n?\n?\n+\n\n+==\n)1(2\n)1(1\n\n1\n)(\n)(\n\n)(\nz\nzT\n\nT\nK\n\nzE\nzC\n\nzH\nI\n\nPI .       4.4 \n\nResolvendo esta equa\u00e7\u00e3o, obt\u00e9m-se: \n\n)()]1()1(2[)(2)(2 111 zEzTKzTKzzCTzCT PIIPIII\n??? ++?=?     4.5 \n\nA nota\u00e7\u00e3o 1?z  representa um atraso no tempo de uma amostra. Assim, a equa\u00e7\u00e3o \n\nde diferen\u00e7as que o microcontrolador ir\u00e1 executar fica: \n\n112\n2\n\n2\n2\n\n?? +??\n?\n\n?\n??\n?\n\n? ?\n+??\n\n?\n\n?\n??\n?\n\n? +\n= kk\n\nI\n\nIPIPI\nk\n\nI\n\nPIIPI\nk ceT\n\nTKTK\ne\n\nT\nTKTK\n\nc     4.6 \n\nA Figura 4.4 mostra um ensaio do controle de rota\u00e7\u00e3o real onde a curva azul \n\nmarinho \u00e9 a refer\u00eancia (700 pulsos do encoder) e a curva rosa \u00e9 a rota\u00e7\u00e3o \n\nadquirida atrav\u00e9s dos prot\u00f3tipos montados. Nota-se que o controlador busca \n\nrapidamente a refer\u00eancia e mant\u00e9m a rota\u00e7\u00e3o bastante pr\u00f3xima do valor desejado \n\nem regime permanente. Verifica-se, portanto, que o controle PI projetado atende \n\n\u00e0s necessidades do projeto. \n\n\n\n61 \n\nControle de rota\u00e7\u00e3o de um motor DC\n\n0\n\n100\n\n200\n\n300\n\n400\n\n500\n\n600\n\n700\n\n800\n\n0\n0,3\n\n15\n0,6\n\n3\n0,9\n\n45\n1,2\n\n6\n1,5\n\n75\n1,8\n\n9\n2,2\n\n05\n2,5\n\n2\n2,8\n\n35\n3,1\n\n5\n3,4\n\n65\n3,7\n\n8\n4,0\n\n95\n4,4\n\n1\n4,7\n\n25\n5,0\n\n4\n5,3\n\n55\n5,6\n\n7\n5,9\n\n85 6,3\n\nTempo (s)\n\nR\not\n\na\u00e7\n\u00e3o\n\n (p\nul\n\nso\ns \n\ndo\n e\n\nnc\nod\n\ner\n)\n\n \nFigura 4.4 - Ensaio de implementa\u00e7\u00e3o do controlador de rota\u00e7\u00e3o de um motor DC \n\n \n \n\n4.2. Ensaios de empuxos \n \n\nUma importante etapa do processo de ajuste dos par\u00e2metros do controlador \u00e9 a \n\nconsidera\u00e7\u00e3o, na aloca\u00e7\u00e3o de empuxos, dos par\u00e2metros de empuxo de cada \n\npropulsor instalado. Para isso, foram realizados no laborat\u00f3rio do Departamento \n\nde Engenharia Naval e Oce\u00e2nica ensaios para a correta determina\u00e7\u00e3o da rela\u00e7\u00e3o \n\nempuxo X rota\u00e7\u00e3o para cada propulsor. \n\nCom base nesses ensaios os par\u00e2metros da Tabela 4.1 foram obtidos e \n\nintroduzidos na etapa de aloca\u00e7\u00e3o de empuxos do modelo. \n\n \n\n \n\n\n\n62 \n\nTabela 4.1 - Resultados dos ensaios com propulsores. Vari\u00e1vel u \u00e9 o empuxo em gf. \n\n Movimento preferencial Movimento contr\u00e1rio \n\nPropulsor principal \n\n(RPM) \n11505\n\n60\nu\n\n \n17257\n\n60\nu\n\n \n\nProp. t\u00fanel proa \n\n(RPM) \n147764\n\n60\nu\n\n \n183707\n\n60\nu\n\n \n\nProp. t\u00fanel popa \n\n(RPM) \n147764\n\n60\nu\n\n \n183707\n\n60\nu\n\n \n\nA vari\u00e1vel u \u00e9 o empuxo em gf e a constante de valor 60 \u00e9 a convers\u00e3o da rota\u00e7\u00e3o \n\npara RPM. \n\nA Figura 4.5 abaixo destaca o diagrama do bloco de aloca\u00e7\u00e3o de empuxos. A \n\nfor\u00e7a global do controlador \u00e9 devidamente alocada para cada propulsor atrav\u00e9s \n\ndas fun\u00e7\u00f5es de aloca\u00e7\u00e3o resultantes da resolu\u00e7\u00e3o da equa\u00e7\u00e3o (equa\u00e7\u00e3o 2.22 da \n\nse\u00e7\u00e3o 2.4): \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n?=\n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n\nz\n\ny\n\nx\n\nF\nF\nF\n\nF\nF\nF\n\n15,00\n15,00\n\n001\n\n3\n\n2\n\n1\n\n        4.7 \n\n onde Fx, Fy s\u00e3o respectivamente as for\u00e7as de surge e sway e Fz \u00e9 igual ao \n\nmomento de yaw. F1 \u00e9 a for\u00e7a do propulsor principal, F2 e F3 dos propulsores \n\nconfigurados em t\u00fanel. \n\n\n\n63 \n\n \n\nFigura 4.5 - Bloco de aloca\u00e7\u00e3o de empuxos com destaque para os movimentos do propulsor principal  \n \n\n4.3. Ensaios com o modelo \n \n\nNeste trabalho alguns ensaios foram realizados com a finalidade de testar o \n\nsistema desenvolvido e implementado e comprovar o correto funcionamento de \n\ntoda a eletr\u00f4nica embarcada. Para isso, diversas situa\u00e7\u00f5es s\u00e3o propostas: \n\n\u2022 Modelo vazio, \u00e1guas paradas e posicionamento fixo. O objetivo \u00e9 \n\ncomprovar que o modelo \u00e9 capaz de manter a posi\u00e7\u00e3o desejada sem \n\nmudan\u00e7a de refer\u00eancia. \n\n\u2022 Modelo vazio, \u00e1guas paradas e posi\u00e7\u00f5es vari\u00e1veis. O objetivo \u00e9 comprovar \n\nque o modelo atende \u00e0s mudan\u00e7as de refer\u00eancia corretamente. \n\n\u2022 Modelo lastreado, \u00e1guas paradas e posicionamento fixo. O objetivo \u00e9 \n\ncomprovar que o modelo, com lastro m\u00e1ximo e massa e momento de \n\n\n\n64 \n\nin\u00e9rcia diferentes \u00e9 capaz de manter a posi\u00e7\u00e3o desejada sem mudan\u00e7a de \n\nrefer\u00eancia. \n\n\u2022 Modelo lastreado, \u00e1guas paradas e posi\u00e7\u00f5es vari\u00e1veis. O objetivo \u00e9 \n\ncomprovar que o modelo, com lastro m\u00e1ximo e massa e momento de \n\nin\u00e9rcia diferentes \u00e9 capaz de atender \u00e0s mudan\u00e7as de refer\u00eancia \n\ncorretamente. \n\n\u2022 Modelo lastreado, vento incidente. O objetivo \u00e9 comprovar que o modelo, \n\ncom lastro m\u00e1ximo e massa e momento de in\u00e9rcia diferentes \u00e9 capaz de \n\nmanter a posi\u00e7\u00e3o desejada em alguns valores de refer\u00eancia mesmo com a \n\nincid\u00eancia de vento. \n\n\u2022 Modelo lastreado, onda incidente. O objetivo \u00e9 comprovar que o modelo, \ncom lastro m\u00e1ximo e massa e momento de in\u00e9rcia diferentes \u00e9 capaz de \n\nmanter a posi\u00e7\u00e3o desejada em alguns valores de refer\u00eancia mesmo com a \n\nincid\u00eancia de onda. \n\n \n\n4.3.1. Estabiliza\u00e7\u00e3o do Filtro de Kalman \n\nNo in\u00edcio de cada opera\u00e7\u00e3o de posicionamento din\u00e2mico deve-se aguardar a \n\nconverg\u00eancia dos valores do filtro de Kalman para s\u00f3 ent\u00e3o iniciar a opera\u00e7\u00e3o de \n\ncontrole (Figura 4.6). Neste per\u00edodo inicial a estimativa de estados varia \n\nbruscamente por alguns segundos at\u00e9 que finalmente convirja. \n\n \n\nFigura 4.6 - Inicializa\u00e7\u00e3o do posicionamento din\u00e2mico \n\nA Figura 4.7 ilustra um momento de estabiliza\u00e7\u00e3o do filtro de Kalman na \n\ninicializa\u00e7\u00e3o da opera\u00e7\u00e3o de posicionamento din\u00e2mico. Nota-se que a estimativa \n\nda posi\u00e7\u00e3o X da embarca\u00e7\u00e3o leva aproximadamente 9 segundos para estabilizar. \n\n\n\n65 \n\n0 5 10 15 20\n-1\n\n0\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\nTempo (s)\n\nP\nos\n\ni\u00e7\n\u00e3o\n\n X\n (\n\nm\n)\n\nX real\n\nX ref\n\nX Kalman\n\n \n\nFigura 4.7 - Estabiliza\u00e7\u00e3o do filtro de Kalman \n \n\n4.3.2. Ensaios com modelo vazio \n\nOs primeiros ensaios foram realizados com o modelo com o m\u00ednimo de lastro para \n\nque fosse poss\u00edvel submergir todos os propulsores e permitir a correta atua\u00e7\u00e3o \n\ndos mesmos. \n\nAs vari\u00e1veis envolvidas na inicializa\u00e7\u00e3o dos par\u00e2metros de acordo com as \n\ncaracter\u00edsticas do ensaio em quest\u00e3o s\u00e3o dadas abaixo. \n\nPara o ensaio em vazio, os par\u00e2metros de interesse s\u00e3o: \n\nMassa do modelo (m): 35 Kg \n\nMomento de in\u00e9rcia (I) em rela\u00e7\u00e3o ao centro de massa: 6,52 Kg.m2 \n\nComprimento do modelo (L): 2,054 m \n\nPara as matrizes a seguir, foi utilizado um fator nos c\u00e1lculos dos valores baseado \n\nna escala do modelo para a embarca\u00e7\u00e3o real. Este fator tem valor: L/282. \n\nOs dados utilizados para o modelo s\u00e3o: \n\n\n\n66 \n\nMatriz de massas incluindo massas adicionais: \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\n8041,1900\n09226,670\n009730,36\n\nM  \n\nMatriz de amortecimentos: \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\n0025,000\n09610,90\n001811,0\n\nD  \n\nPara o filtro de Kalman, os dados s\u00e3o: \n\nMatriz de covari\u00e2ncia para os erros de medida do sistema de localiza\u00e7\u00e3o: \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n= ?\n\n1500,000\n05305,00\n005305,0\n\n0,1 4ER  \n\nMatriz de covari\u00e2ncia para os erros de modelagem: \n\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n?\n\n?\n\n?\n\n=\n\n0000000000\n00013,000000000\n000205,00000000\n0000041,0000000\n00000233,000000\n000000025,00000\n0000000025,0000\n00000000528,000\n000000000020,00\n0000000002986,0\n\nQ  \n\nDados para o controle: \n\nGanhos da parte proporcional: \n\n\n\n67 \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\n8560,3600\n08489,20\n000722,2\n\nCG  \n\nGanhos da parte derivativa: \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\n2106,1500\n09077,180\n007461,13\n\nDG  \n\n \n\n4.3.2.1. Ensaio 1: \u00e1guas paradas, posi\u00e7\u00e3o fixa \n\nNeste ensaio o modelo foi posicionado parado no tanque e o sistema ligado de \n\nforma a mant\u00ea-lo na posi\u00e7\u00e3o inicial. Nenhuma mudan\u00e7a de refer\u00eancia e nenhum \n\ndist\u00farbio foram aplicados. \n\nA Figura 4.8 mostra as posi\u00e7\u00f5es X, Y e o \u00e2ngulo de aproamento ? do modelo em \n\ncompara\u00e7\u00e3o com a refer\u00eancia. As estimativas realizadas pelo filtro de Kalman, \n\nap\u00f3s o per\u00edodo inicial de estabiliza\u00e7\u00e3o, apresentaram excelente comportamento \n\nem compara\u00e7\u00e3o com as medidas realizadas o que pode ser observado na mesma \n\nfigura; a linha azul representa a medida real enquanto que a verde \u00e9 a refer\u00eancia e \n\na vermelha \u00e9 a estimativa do filtro de Kalman.  \n\n\n\n68 \n\n100 105 110 115 120 125 130\n\n3.55\n\n3.6\n\n3.65\n\n3.7\n\n3.75\n\nTempo (s)\n\nX\n (\n\nm\n)\n\n105 110 115 120 125\n\n-3.25\n\n-3.2\n\n-3.15\n\nTempo (s)\n\nY\n (\n\nm\n)\n\n105 110 115 120 125\n\n4\n\n6\n\n8\n\n10\n\n12\n\nTempo (s)\n\nP\nhi\n\n (\n\u00ba)\n\n \n\nFigura 4.8 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) \n\nO posicionamento din\u00e2mico apresentou boa acuracidadde e os erros ficaram \n\nmuito baixos como pode ser observado na Figura 4.9. Os erros em X e Y ficaram \n\nmenores que 2 cm, e menor que 1\u00ba para o movimento em Yaw. Estas mesmas \n\ngrandezas puderam ser observadas nos demais ensaios de posicionamento. \n\nPode-se afirmar que os erros ficaram baixos j\u00e1 que est\u00e3o dentro da faixa de erro \n\ndo sistema de aquisi\u00e7\u00e3o da posi\u00e7\u00e3o via vis\u00e3o artificial como mostrado \n\nanteriormente. O erro de localiza\u00e7\u00e3o da embarca\u00e7\u00e3o no tanque de provas est\u00e1 \n\nentre 0,5 cm e 2,1 cm e \u00e9 de se esperar que os erros do sistema de \n\nposicionamento diminuam com a diminui\u00e7\u00e3o do erro de localiza\u00e7\u00e3o do modelo. \n\n\n\n69 \n\n100 105 110 115 120 125\n\n-0.05\n\n0\n\n0.05\n\nTempo (s)\n\nE\nrr\n\no \nX\n\n (\nm\n\n)\n\n100 105 110 115 120 125\n\n-0.05\n\n0\n\n0.05\n\nTempo (s)\n\nE\nrr\n\no \nY\n\n (\nm\n\n)\n\n105 110 115 120 125 130\n\n-1\n\n-0.5\n\n0\n\n0.5\n\n1\n\n1.5\n\nTempo (s)\n\nE\nrr\n\no \nP\n\nhi\n (\n\n\u00ba)\n\n \n\nFigura 4.9 - Erros (X,Y, ?) obtidos num ensaio de posicionamento \n\nA Figura 4.10 mostra os esfor\u00e7os solicitados pelo controlador (ap\u00f3s a aloca\u00e7\u00e3o de \n\nempuxos). Apesar de em alguns momentos haver bastante oscila\u00e7\u00e3o em torno do \n\nvalor zero, as amplitudes s\u00e3o baixas o que n\u00e3o causa bruscas altera\u00e7\u00f5es de \n\nsentido e rota\u00e7\u00e3o nos atuadores. Para minimizar ainda mais esse efeito de \n\npequenas oscila\u00e7\u00f5es, foi implementado em cada controlador local de cada \n\npropulsor um filtro de forma a suavizar a resposta do atuador quando a \n\nembarca\u00e7\u00e3o se encontra na refer\u00eancia desejada (Figura 4.11). Pela figura nota-se \n\nque enquanto o controlador exige bruscas mudan\u00e7as de rota\u00e7\u00e3o (derivadas \n\nelevadas), o atuador tende a suavizar a resposta (derivadas mais baixas). \n\n\n\n70 \n\n50 60 70 80 90 100 110\n-1000\n\n-500\n\n0\n\n500\n\n1000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nrin\nc.\n\n (\nR\n\nP\nM\n\n)\n\n50 60 70 80 90 100 110\n-4000\n\n-2000\n\n0\n\n2000\n\n4000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nop\na \n\n(R\nP\n\nM\n)\n\n50 60 70 80 90 100 110\n-4000\n\n-2000\n\n0\n\n2000\n\n4000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nro\na \n\n(R\nP\n\nM\n)\n\n \n\nFigura 4.10 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos \n\n-40\n\n-20\n\n0\n\n20\n\n40\n\n60\n\n80\n\n0\n\n10\n0\n\n20\n0\n\n30\n0\n\n40\n0\n\n50\n0\n\n60\n0\n\n70\n0\n\n80\n0\n\n90\n0\n\n10\n00\n\n11\n00\n\n12\n00\n\n13\n00\n\n14\n00\n\n15\n00\n\n16\n00\n\n17\n00\n\n18\n00\n\nTempo (ms)\n\nR\not\n\na\u00e7\n\u00e3o\n\n (R\nP\n\nM\n)\n\nRota\u00e7\u00e3o solicitada\nRota\u00e7\u00e3o filtrada\n\n \n\nFigura 4.11 - Comparativo entre a solicita\u00e7\u00e3o de rota\u00e7\u00e3o do controlador e a curva fitrada. \n \n\n\n\n71 \n\n4.3.2.2. Ensaio 2: \u00e1guas paradas, posi\u00e7\u00e3o vari\u00e1vel \n\nNeste ensaio o modelo foi inicialmente posicionado parado no tanque e o sistema \n\nligado de forma a mant\u00ea-lo na posi\u00e7\u00e3o inicial. Ao longo do ensaio v\u00e1rias mudan\u00e7as \n\nde refer\u00eancia foram impostas.  \n\nA Figura 4.12 mostra as posi\u00e7\u00f5es X, Y e ? do modelo em compara\u00e7\u00e3o com a \n\nrefer\u00eancia. As estimativas realizadas pelo filtro de Kalman (linha vermelha), ap\u00f3s o \n\nper\u00edodo inicial de estabiliza\u00e7\u00e3o, tamb\u00e9m apresentou excelente comportamento em \n\ncompara\u00e7\u00e3o com as medidas realizadas pelo sistema de vis\u00e3o (linha azul). Nota-\n\nse que a estimativa do filtro de Kalman \u00e9 mais suave que as ruidosas medidas \n\nreais j\u00e1 que todo esse ruido sobre a medida real \u00e9 descrita e de certa forma \n\nprevista no estimador.  \n\nOs tempos de resposta e acomoda\u00e7\u00e3o para cada mudan\u00e7a de refer\u00eancia s\u00e3o \n\nrelativamente baixos e a oscila\u00e7\u00e3o em torno da posi\u00e7\u00e3o final \u00e9 amortecida (quase \n\ncriticamente amortecida) como pode ser observado na Figura 4.13 que representa \n\num trecho em detalhes do movimento em X. \n\n0 200 400 600 800 1000 1200\n\n1\n\n2\n\n3\n\n4\n\nTempo (s)\n\nX\n (\n\nm\n)\n\n0 200 400 600 800 1000 1200\n\n-3.5\n\n-3\n\n-2.5\n\nTempo (s)\n\nY\n (\n\nm\n)\n\n0 200 400 600 800 1000 1200\n\n-20\n\n-10\n\n0\n\n10\n\n20\n\nTempo (s)\n\nP\nhi\n\n (\n\u00ba)\n\n \n\nFigura 4.12 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) \n\n\n\n72 \n\n620 640 660 680 700 720\n1.8\n\n1.9\n\n2\n\n2.1\n\n2.2\n\n2.3\n\n2.4\n\n2.5\n\nTempo (s)\n\nP\nos\n\ni\u00e7\n\u00e3o\n\n X\n (\n\nm\n)\n\nX real\n\nX ref\n\nX Kalman\n\n \n\nFigura 4.13 - Trecho em detalhe do movimento em X. A oscila\u00e7\u00e3o observada \u00e9 amortecida \n\nA Figura 4.14 mostra os empuxos resultantes do controlador antes de passar pela \n\naloca\u00e7\u00e3o de empuxos do sistema, isto \u00e9, empuxos dados em X, Y e momento em \n\nYaw. Nota-se que em cada altera\u00e7\u00e3o de refer\u00eancia ocorre a solicita\u00e7\u00e3o pertinente \n\na cada movimento. \n\n0 200 400 600 800 1000 1200\n\n-4\n\n-2\n\n0\n\n2\n\n4\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n X\n (\n\nN\n)\n\n0 200 400 600 800 1000 1200\n\n-2\n\n-1\n\n0\n\n1\n\n2\n\n3\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n Y\n (\n\nN\n)\n\n0 200 400 600 800 1000 1200\n-1\n\n-0.5\n\n0\n\n0.5\n\n1\n\n1.5\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n Y\naw\n\n (\nN\n\n)\n\n \n\nFigura 4.14 - Empuxos resultantes em X, Y e Yaw \n\n\n\n73 \n\nA Figura 4.15 mostra a rota\u00e7\u00e3o exigida em cada propulsor, ap\u00f3s a aplica\u00e7\u00e3o da \n\nl\u00f3gica de aloca\u00e7\u00e3o de empuxos. Mesmo com a presen\u00e7a de uma forte oscila\u00e7\u00e3o \n\nem torno do valor zero, os picos de rota\u00e7\u00e3o em cada movimento, os quais s\u00e3o \n\nvalores importantes para o controle da embarca\u00e7\u00e3o, podem ser observados na \n\nfigura e, como anteriormente mencionado, h\u00e1 um tratamento das mudan\u00e7as \n\nbruscas de rota\u00e7\u00e3o diminuindo assim esta oscila\u00e7\u00e3o em torno do zero. \n\nNeste sistema, a rota\u00e7\u00e3o aplicada em cada propulsor deve ser exata como \n\ncalculado ap\u00f3s o algoritmo de aloca\u00e7\u00e3o de empuxos (Figura 4.15) para que se \n\npossa garantir a resposta final esperada em cada atuador. Como cada propulsor \n\npossui uma eletr\u00f4nica dedicada com a capacidade de garantir tais rota\u00e7\u00f5es, a \n\ndin\u00e2mica do sistema controlado passa a apresentar bons resultados. \n\n0 200 400 600 800 1000 1200\n-1000\n\n-500\n\n0\n\n500\n\n1000\n\nP\nro\n\np.\n P\n\nrin\nc.\n\n (\nR\n\nP\nM\n\n)\n\nTempo (s)\n\n0 200 400 600 800 1000 1200\n-4000\n\n-2000\n\n0\n\n2000\n\n4000\n\nP\nro\n\np.\n P\n\nop\na \n\n(R\nP\n\nM\n)\n\nTempo (s)\n\n0 200 400 600 800 1000 1200\n-4000\n\n-2000\n\n0\n\n2000\n\n4000\n\nP\nro\n\np.\n P\n\nro\na \n\n(R\nP\n\nM\n)\n\nTempo (s)\n\n \n\nFigura 4.15 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos \n\n \n\n4.3.3. Ensaios com modelo cheio \n\nOs ensaios a seguir foram realizados com o modelo cheio. Para esses casos, os \n\npar\u00e2metros utilizados no controle e no filtro de Kalman foram: \n\n\n\n74 \n\nMassa do modelo (m): 80 Kg \n\nMomento de in\u00e9rcia (I) em rela\u00e7\u00e3o ao centro de massa: 28,2 Kg.m2 \n\nOs dados utilizados para o modelo s\u00e3o: \n\nMatriz de massas incluindo massas adicionais: \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\n4841,4100\n09226,1120\n009730,81\n\nM  \n\nMatriz de amortecimentos: \n\n?\n?\n?\n\n?\n\n?\n\n?\n?\n?\n\n?\n\n?\n=\n\n0025,000\n09610,90\n001811,0\n\nD  \n\nDados do filtro de Kalman: \n\nAs matrizes de covari\u00e2ncia para os erros de medida do sistema de localiza\u00e7\u00e3o e \n\npara os erros de modelagem n\u00e3o sofreram altera\u00e7\u00f5es. \n\nDados para o controle: \n\nOs dados utilizados para o controle (ganhos proporcional e derivativo) n\u00e3o \n\nsofreram altera\u00e7\u00f5es. \n\n4.3.3.1. Ensaio 3: \u00e1guas paradas, posi\u00e7\u00e3o fixa \n\nOs ensaios com modelo lastreado sem dist\u00farbios ambientais apresentaram \n\nresultados semelhantes aos ensaios com modelo vazio com estimativas do filtro \n\nde Kalman acompanhando muito bem as medidas reais do sistema de vis\u00e3o \n\nartificial e erros em X e Y da mesma ordem: 2 cm. Para o \u00e2ngulo ?, o erro em \n\ngeral ficou ligeiramente maior, 2\u00ba o que n\u00e3o deixa de ser um bom resultado. \n\nA Figura 4.16 mostra um ensaio somente de posi\u00e7\u00e3o fixa. \n\n\n\n75 \n\n950 960 970 980 990 1000 1010\n\n2.96\n\n2.98\n\n3\n\n3.02\n\n3.04\n\nTempo (s)\n\nX\n (\n\nm\n)\n\n950 960 970 980 990 1000 1010\n\n-2.72\n\n-2.7\n\n-2.68\n\n-2.66\n\nTempo (s)\n\nY\n (\n\nm\n)\n\n950 960 970 980 990 1000 1010\n-5\n\n0\n\n5\n\nTempo (s)\n\nP\nhi\n\n (\n\u00ba)\n\n \n\nFigura 4.16 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) \n \n\n4.3.3.2. Ensaio 4: \u00e1guas paradas, posi\u00e7\u00e3o vari\u00e1vel \n\nNeste ensaio, o modelo lastreado foi submetido a algumas mudan\u00e7as de \n\nrefer\u00eancia e apresentou comportamento tamb\u00e9m semelhante ao modelo vazio, \n\ncom ligeiro aumento nas oscila\u00e7\u00f5es nos pontos pr\u00f3ximos \u00e0s acomoda\u00e7\u00f5es de \n\nsinal (Figura 4.17). Esta diferen\u00e7a pode ser atribu\u00edda ao fato de que os ganhos do \n\ncontrolador n\u00e3o foram ajustados quando aplicados ao modelo cheio. \n\n\n\n76 \n\n50 100 150 200 250 300 350 400 450\n\n1\n\n2\n\n3\n\n4\n\n5\n\nTempo (s)\n\nX\n (\n\nm\n)\n\n50 100 150 200 250 300 350 400 450\n\n-2\n\n-1.5\n\n-1\n\nTempo (s)\n\nY\n (\n\nm\n)\n\n50 100 150 200 250 300 350 400 450\n-100\n\n-50\n\n0\n\n50\n\nTempo (s)\n\nP\nhi\n\n (\n\u00ba)\n\n \n\nFigura 4.17 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) \n\nA Figura 4.18 mostra as sa\u00eddas do controlador para cada movimento. Notam-se as \n\nsolicita\u00e7\u00f5es pelo controle em cada altera\u00e7\u00e3o de refer\u00eancia ou dist\u00farbio aplicados. \n\n50 100 150 200 250 300 350 400 450\n\n-2\n\n0\n\n2\n\n4\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n X\n (\n\nN\n)\n\n50 100 150 200 250 300 350 400 450\n-5\n\n0\n\n5\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n Y\n (\n\nN\n)\n\n50 100 150 200 250 300 350 400 450\n\n-2\n\n-1\n\n0\n\n1\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n Y\naw\n\n (\nN\n\n)\n\n \n\nFigura 4.18 - Empuxos resultantes em X, Y e Yaw \n\n\n\n77 \n\nA Figura 4.19 mostra as rota\u00e7\u00f5es em cada propulsor como resultado da aloca\u00e7\u00e3o \n\nde empuxos. \n\n50 100 150 200 250 300 350 400 450\n-1000\n\n-500\n\n0\n\n500\n\n1000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nrin\nc.\n\n (\nR\n\nP\nM\n\n)\n\n50 100 150 200 250 300 350 400 450\n-4000\n\n-2000\n\n0\n\n2000\n\n4000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nop\na \n\n(R\nP\n\nM\n)\n\n50 100 150 200 250 300 350 400 450\n-4000\n\n-2000\n\n0\n\n2000\n\n4000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nro\na \n\n(R\nP\n\nM\n)\n\n \n\nFigura 4.19 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos \n \n \n\n4.3.3.3. Ensaio 5: incid\u00eancia de vento \n\nO ensaio com incid\u00eancia de vento foi conduzido de forma a manter uma posi\u00e7\u00e3o \n\nfixa na maior parte do ensaio e aplicando um dist\u00farbio ambiental sobre o casco do \n\nmodelo. \n\nO ensaio representado na Figura 4.22 pode ser dividido em quatro momentos: \n\n1. De 100 s a 350 s: incid\u00eancia de vento (a 45\u00ba) como mostrado na Figura \n\n4.20; \n\n\n\n78 \n\n \n\nFigura 4.20 - Incid\u00eancia de vento a 45\u00ba \n\n2. De 350 s a 500 s: desligamento do gerador de ventos na posi\u00e7\u00e3o da Figura \n\n4.20; \n\n3. De 500 s a 800 s: nova incid\u00eancia de vento (a 90\u00ba) como mostrado na \n\nFigura 4.21; \n\n \n\nFigura 4.21 - Incid\u00eancia de vento a 90\u00ba \n\n4. De 800s a 1000 s: desligamento do gerador de ventos e mudan\u00e7a de \n\nrefer\u00eancia em Y. \n\n\n\n79 \n\n100 200 300 400 500 600 700 800 900\n\n2\n\n2.5\n\n3\n\n3.5\n\nTempo (s)\n\nX\n (\n\nm\n)\n\n100 200 300 400 500 600 700 800 900\n-3.5\n\n-3\n\n-2.5\n\n-2\n\n-1.5\n\nTempo (s)\n\nY\n (\n\nm\n)\n\n100 200 300 400 500 600 700 800 900\n-60\n\n-40\n\n-20\n\n0\n\n20\n\n40\n\nTempo (s)\n\nP\nhi\n\n (\n\u00ba)\n\n \n\nFigura 4.22 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) \n\nNo primeiro caso o modelo apresentou um bom comportamento para as posi\u00e7\u00f5es \n\nem X e Y mantendo a posi\u00e7\u00e3o inicial com m\u00ednimo erro. No entanto, o \u00e2ngulo ? \n\napresentou um desvio de aproximadamente 17\u00ba em dire\u00e7\u00e3o \u00e0 fonte de \n\nperturba\u00e7\u00e3o (Figura 4.23) o que pode ser explicado pela imprecis\u00e3o nos modelos \n\nde for\u00e7as ambientais inseridos no sistema. Outro fator que explica esse desvio \u00e9 a \n\nforma como o vento foi aplicado no modelo: em casos reais o vento ocorre em \n\nrajadas sobre uma embarca\u00e7\u00e3o, mas neste ensaio o mesmo foi aplicado de forma \n\ncont\u00ednua. \n\nApesar de n\u00e3o constar nesse ensaio, o gerador de vento foi deslocado para a \n\nposi\u00e7\u00e3o oposta \u00e0 inicial e o mesmo efeito ocorreu na outra dire\u00e7\u00e3o. Novamente a \n\nposi\u00e7\u00e3o X e Y n\u00e3o se distanciou da refer\u00eancia, mas o movimento de Yaw \n\napresentou o mesmo desvio de aproximadamente 17\u00ba. \n\n\n\n80 \n\n \n\nFigura 4.23 - Desvios em ? para os dois casos de incid\u00eancia de vento \n\nNo segundo caso o gerador de vento foi desligado e o modelo p\u00f4de voltar para a \n\nrefer\u00eancia minimizando os erros em X, Y e ?. \n\nNo terceiro caso o gerador de vento foi novamente ligado, no entanto, \n\nperpendicularmente ao modelo para comprovar o comportamento do primeiro \n\ncaso. Como esperado, entre 500 s e 800 s, o modelo se distanciou da refer\u00eancia \n\ndo movimento de Yaw tamb\u00e9m em aproximadamente 17\u00ba (Figura 4.23). \n\nNo quarto caso o gerador foi desligado e uma mudan\u00e7a em Y foi imposta. O \n\nmodelo p\u00f4de ser controlado, no entanto, apresentou uma maior oscila\u00e7\u00e3o na \n\nacomoda\u00e7\u00e3o pelo fato da mudan\u00e7a de refer\u00eancia ter ocorrido quando o controle \n\nainda estava corrigindo a posi\u00e7\u00e3o angular. \n\nA Figura 4.24 mostra os empuxos resultantes do controlador. Nota-se que a maior \n\nparte do esfor\u00e7o se concentra no movimento de Yaw, no sentido de manter o \n\ndesvio observado contra o fluxo de vento. O torque em Yaw, ap\u00f3s a aloca\u00e7\u00e3o de \n\nempuxos, se divide basicamente em esfor\u00e7os nos propulsores da proa e popa \n\ncomo mostra a Figura 4.25. \n\n\n\n81 \n\n100 200 300 400 500 600 700 800 900\n-1\n\n-0.5\n\n0\n\n0.5\n\n1\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n X\n (\n\nN\n)\n\n100 200 300 400 500 600 700 800 900\n-1\n\n-0.5\n\n0\n\n0.5\n\n1\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n Y\n (\n\nN\n)\n\n100 200 300 400 500 600 700 800 900\n-0.8\n\n-0.6\n\n-0.4\n\n-0.2\n\n0\n\n0.2\n\n0.4\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n Y\naw\n\n (\nN\n\n)\n\n \n\nFigura 4.24 - Empuxos resultantes em X, Y e Yaw \n\n100 200 300 400 500 600 700 800 900\n-1000\n\n-500\n\n0\n\n500\n\n1000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nrin\nc.\n\n (\nR\n\nP\nM\n\n)\n\n100 200 300 400 500 600 700 800 900\n-2000\n\n-1000\n\n0\n\n1000\n\n2000\n\n3000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nop\na \n\n(R\nP\n\nM\n)\n\n100 200 300 400 500 600 700 800 900\n\n-2000\n\n-1000\n\n0\n\n1000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nro\na \n\n(R\nP\n\nM\n)\n\n \n\nFigura 4.25 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos \n \n \n\n4.3.3.4. Ensaio 7: incid\u00eancia de onda \n\nNeste ensaio uma frente de ondas a 1 Hz foi aplicada como um segundo dist\u00farbio \n\nambiental sobre o modelo como mostrado na Figura 4.26. A seta azul indica o \n\n\n\n82 \n\nsentido das mudan\u00e7as de refer\u00eancia de forma a deixar a embarca\u00e7\u00e3o cada vez \n\nmais paralela \u00e0s ondas incidentes.  \n\n \n\nFigura 4.26 - Ensaio com ondas. Posi\u00e7\u00e3o inicial do modelo e sentido do deslocamento da refer\u00eancia  \n\nPara melhor entendimento, pode-se dividir os dados (Figura 4.27) em tr\u00eas \n\nmomentos: \n\n1. De 1000 s a 1300 s: O modelo inicia o ensaio perpendicularmente \u00e0s ondas \n\ne sofre altera\u00e7\u00e3o de refer\u00eancia em Yaw para -15\u00ba. \n\n2. De 1300 s a 1700 s: em 1300 s a intensidade das ondas \u00e9 elevada e antes \n\nde 1600 s a refer\u00eancia em Yaw \u00e9 alterada para -30\u00ba. \n\n3. De 1700 s a 1825 s: o gerador de ondas \u00e9 desligado. \n\n\n\n83 \n\n1100 1200 1300 1400 1500 1600 1700 1800\n-1\n\n0\n\n1\n\n2\n\n3\n\n4\n\nTempo (s)\n\nX\n (\n\nm\n)\n\n1100 1200 1300 1400 1500 1600 1700 1800\n-4\n\n-3\n\n-2\n\n-1\n\n0\n\nTempo (s)\n\nY\n (\n\nm\n)\n\n1100 1200 1300 1400 1500 1600 1700 1800\n-60\n\n-40\n\n-20\n\n0\n\n20\n\n40\n\nTempo (s)\n\nP\nhi\n\n (\n\u00ba)\n\n \n\nFigura 4.27 - Valores (X,Y, ?) medidos (azul), refer\u00eancia (verde) e estimados (vermelho) \n\nNo primeiro caso o gerador de ondas \u00e9 ligado perpendicularmente ao modelo, no \n\nentanto, nenhuma perturba\u00e7\u00e3o \u00e9 sentida j\u00e1 que o movimento de Pitch n\u00e3o causou \n\ndeslocamento na embarca\u00e7\u00e3o. Para aumentar a influ\u00eancia das ondas no \n\nmovimento do modelo, a refer\u00eancia em Yaw foi alterada para -15\u00ba, mas o modelo \n\np\u00f4de ser controlado muito bem apresentando somente um aumento no tempo de \n\nacomoda\u00e7\u00e3o da posi\u00e7\u00e3o angular. \n\nNo segundo caso a freq\u00fc\u00eancia da onda foi mantida em 1 Hz, por\u00e9m sua amplitude \n\nfoi aumentada. Em -15\u00ba o modelo p\u00f4de ser controlado muito bem mesmo com o \n\naumento do movimento de Pitch e Roll e da varia\u00e7\u00e3o das medidas no sistema de \n\nvis\u00e3o artificial. \n\nAp\u00f3s a altera\u00e7\u00e3o da refer\u00eancia para -30\u00ba a embarca\u00e7\u00e3o n\u00e3o p\u00f4de ser mantida \n\nneste valor entrando em deriva. Nota-se na Figura 4.29, da rota\u00e7\u00e3o nos \n\npropulsores, que os valores da proa e popa chegaram pr\u00f3ximos da satura\u00e7\u00e3o de \n\naproximadamente 1800 RPM n\u00e3o conseguindo, portanto, vencer os esfor\u00e7os da \n\nonda. Mesmo n\u00e3o mantendo a posi\u00e7\u00e3o em Yaw, o modelo p\u00f4de ser mantido em X \n\ne Y com erro bastante baixo. \n\n\n\n84 \n\nNo terceiro momento o gerador de ondas \u00e9 desligado para se observar o \n\ncomportamento da embarca\u00e7\u00e3o. Como esperado, o modelo corrigiu a sua posi\u00e7\u00e3o \n\nem Yaw para -30\u00ba \n\nA Figura 4.28 mostra os empuxos antes da aloca\u00e7\u00e3o e a Figura 4.29 mostra a \n\nrota\u00e7\u00e3o em cada propulsor ap\u00f3s passar pelo algoritmo de aloca\u00e7\u00e3o. \n\n1100 1200 1300 1400 1500 1600 1700 1800\n-1\n\n-0.5\n\n0\n\n0.5\n\n1\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n X\n (\n\nN\n)\n\n1100 1200 1300 1400 1500 1600 1700 1800\n-1\n\n-0.5\n\n0\n\n0.5\n\n1\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n Y\n (\n\nN\n)\n\n1100 1200 1300 1400 1500 1600 1700 1800\n-1\n\n-0.5\n\n0\n\n0.5\n\nTempo (s)\n\nE\nm\n\npu\nxo\n\n e\nm\n\n Y\naw\n\n (\nN\n\n)\n\n \n\nFigura 4.28 - Empuxos resultantes em X, Y e Yaw \n\n\n\n85 \n\n1100 1200 1300 1400 1500 1600 1700 1800\n-1000\n\n-500\n\n0\n\n500\n\n1000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nrin\nc.\n\n (\nR\n\nP\nM\n\n)\n\n1100 1200 1300 1400 1500 1600 1700 1800\n-2000\n\n-1000\n\n0\n\n1000\n\n2000\n\n3000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nop\na \n\n(R\nP\n\nM\n)\n\n1100 1200 1300 1400 1500 1600 1700 1800\n-3000\n\n-2000\n\n-1000\n\n0\n\n1000\n\n2000\n\nTempo (s)\n\nP\nro\n\np.\n P\n\nro\na \n\n(R\nP\n\nM\n)\n\n \n\nFigura 4.29 - Rota\u00e7\u00f5es nos propulsores ap\u00f3s aloca\u00e7\u00e3o de empuxos \n \n\n\n\n86 \n\n5. Conclus\u00f5es e sugest\u00f5es \n\nO principal objetivo deste trabalho foi o desenvolvimento de um aparato eletr\u00f4nico \n\npara permitir a realiza\u00e7\u00e3o de ensaios experimentais de ve\u00edculos oce\u00e2nicos com \n\nsistema de posicionamento din\u00e2mico em tanque de provas. \n\nO projeto foi totalmente idealizado no Departamento de Engenharia Naval e \n\nOce\u00e2nica da USP e pode-se afirmar que foi desenvolvida uma tecnologia \n\nbrasileira para a constru\u00e7\u00e3o da eletr\u00f4nica embarcada para ensaios com sistema \n\nde posicionamento din\u00e2mico em tanque de provas. Essa tecnologia pode ser \n\nentendida como sendo desde o conceito do projeto e utiliza\u00e7\u00e3o dos componentes \n\neletr\u00f4nicos bem como a implementa\u00e7\u00e3o dos algoritmos computacionais utilizados \n\nnos m\u00f3dulos microprocessados. \n\nA precis\u00e3o nos ensaios p\u00f4de ser verificada atrav\u00e9s dos excelentes resultados \n\nobtidos com rela\u00e7\u00e3o ao desempenho do modelo, os quais s\u00f3 puderam ser \n\nalcan\u00e7ados atrav\u00e9s do correto controle localizado de cada propulsor sob os \n\ncomandos do controlador superior, ou seja, cada controle localizado foi \n\nrespons\u00e1vel por garantir em seu propulsor a rota\u00e7\u00e3o obtida na aloca\u00e7\u00e3o de \n\nempuxos. \n\nPor ser complexo, um projeto de SPD precisa ser amplamente estudado, simulado \n\ne ensaiado em laborat\u00f3rio antes de ser implementado numa embarca\u00e7\u00e3o real \n\nreduzindo com isso o tempo de concep\u00e7\u00e3o e custos de implementa\u00e7\u00e3o e ajustes. \n\nEste trabalho finalizou a etapa de prepara\u00e7\u00e3o do aparato eletr\u00f4nico embarcado \n\nnecess\u00e1rio para garantir o funcionamento do modelo de acordo com os comandos \n\ndo controlador superior e, como sugest\u00e3o, os seguintes t\u00f3picos poderiam ser \n\nexplorados na pr\u00e1tica a partir deste trabalho: \n\n\u2022 Ensaios em tanque de provas para estudo de novas abordagens de teoria \n\nde controle para sistemas de posicionamento din\u00e2mico; \n\n\u2022 Estudos pr\u00e1ticos de novas t\u00e9cnicas de aloca\u00e7\u00e3o de empuxos; \n\n\n\n87 \n\n\u2022 Elabora\u00e7\u00e3o de sistemas de localiza\u00e7\u00e3o da embarca\u00e7\u00e3o em ambientes n\u00e3o \n\nestruturados. Neste trabalho o ambiente precisa ser estruturado, ou seja, \n\num conjunto de equipamentos devem ser previamente instalado nas \n\nproximidades do tanque para que o sistema funcione, no entanto, um \n\nsistema que independa desse pr\u00e9vio preparo poder\u00e1 ser investigado; \n\n\u2022 Aprimoramento da eletr\u00f4nica embarcada como a utiliza\u00e7\u00e3o de \n\nmicrocontroladores dotados de mais recursos perif\u00e9ricos ou implementa\u00e7\u00e3o \n\nde novas topologias de acionamento de pot\u00eancia para os motores dos \n\npropulsores; \n\n\u2022 Estudo de sistemas de sensoriamento embarcado para medida da \n\ninflu\u00eancia de agentes ambientais, como o vento, ou para localiza\u00e7\u00e3o do \n\nmodelo no tanque de provas. \n\n\n\n88 \n\n6. Refer\u00eancias Bibliogr\u00e1ficas \n \n[1] \u2013 Tannuri, E. A., \u201cDesenvolvimento de metodologia de projeto de sistema de \nposicionamento din\u00e2mico aplicado a opera\u00e7\u00f5es em alto mar\u201d. Tese de doutorado, \nEscola Polit\u00e9cnica da USP, S\u00e3o Paulo, 2001. \n \n[2] \u2013 Aranda, J., Armada, M. A., Cruz, J. M., \u201cAutomation for the maritme \nindustries\u201d - AUTOMAR. Madrid, 2004. \n \n[3] \u2013 Hamamatsu, M., \u201cNon linear DP controller\u201d. Kawasaki Heavy Industries LTDA, \nJapan, 2002. \n \n[4] \u2013 Morishita, H., M., \u201cCapacita\u00e7\u00e3o nacional para a realiza\u00e7\u00e3o de ensaios e \nsimula\u00e7\u00e3o de sistemas DP\u201d. Relat\u00f3rio de projeto, USP / Petrobr\u00e1s, 2007. \n \n[5] \u2013 Morishita, H.M., Tannuri, E.A., Lago, G.A., \u201cExperimental set-up for \nexperiments with dynamic positioning system\u201d. MCM, Lisboa, 2002. \n \n[6] - Morishita, H.M., Tannuri, E.A., Lago, G.A., Veras, V.L.M., \u201cCritical analysis of \ncontrol and filtering algorithms used in real dynamic positioning systems\u201d. 24nd \nInternational Conference on Offshore Mechanics and Arctic Engineering, June 12\u2013\n17, 2005, Halkidiki, Greece. \n \n[7] \u2013 Lago, G.A., Veras, V.L.M., \u201cProjeto e constru\u00e7\u00e3o de SPD de embarca\u00e7\u00f5es em \ntanque de provas\u201d. Trabalho de conclus\u00e3o de curso, 2004. \n \n[8] \u2013 Shimizu, D.M., Morikawa, F.A., \u201cAplica\u00e7\u00e3o de um sistema de posicionamento \ndin\u00e2mico em um modelo de unidade flutuante\u201d. Trabalho de conclus\u00e3o de curso, \nEscola Polit\u00e9cnica da USP, 2005. \n \n[9] \u2013 Kawamura, F.K., Lopes, N.F., \u201cProjeto e implementa\u00e7\u00e3o de sistema de \nposicionamento din\u00e2mico para ensaios em ve\u00edculos oce\u00e2nicos\u201d. Trabalho de \nconclus\u00e3o de curso, 2006.  \n \n[10] - Tannuri, E.A., Donha, D.C. ,Pesce, C.P., \u201cDynamic positioning of a turret \nmoored FPSO using sliding mode control\u201d \n \n[11] - - Tannuri, E.A., Donha, D.C., \u201cH ?  ?Controller design for dynamic positioning \nof a turret moored FPSO\u201d \n \n[12] \u2013 Morishita, H.M., Tannuri, E.A., \u201cExperimental and numerical evaluation of a \ntypical dynamic positioning system\u201d. Applied ocean research, ELSEVIER, 2006. \n \n[13] \u2013 The International Marine Contractors Association. \u201cDynamic positioning\u201d. \nIMCA, http://www.imca-int.com/divisions/marine/reference/intro.html. \n \n\n\n\n89 \n\n[14] \u2013 Santos, A.O., \u201cDesenvolvimento de instrumenta\u00e7\u00e3o laboratorial e \ncontroladores ativos pid para sistemas de posicionamento din\u00e2mico em tanque de \nprovas\u201d. Disserta\u00e7\u00e3o de mestrado, 2004. \n \n[15] - Gibbon, K.T.;Johnson C.T.; Bailey D.G.; A Real-time FPGA Implementation \nof a Barrel Distortion Correction Algorithm with Bilinear Interpolation, Image \nand Vision Computing NZ, p. 408-413, November 2003. \n \n[16] \u2013 Ogata, K., \u201cEngenharia de controle moderno\u201d. 3a edi\u00e7\u00e3o, LTC, 2000. \n \n[17] \u2013 Astr\u00f6m, K.J., Wittenmark, B., \u201cComputer controlled systems. Theory and \ndesign\u201d. 3th edition, Prentice Hall, 1997. \n \n[18] \u2013 Transceptores de r\u00e1dio Radiotronix. www.radiotronix.com. \n \n[19] - Balchen, J.G. et al. \u201cA dynamic positioning system based on Kalman filtering \nand optimal control, Modeling, Identification and Control\u201d. 1980. \n \n[20] - Fossen, T.I., Strand, J.P. \u201cPassive nonlinear observer design using Lyapunov \nmethods, experimental results with a supply vessel\u201d. Automatica, 1999. \n \n[21] - Fossen, T.I, Grovlen, A., \u201cNonlinear Output Feedback Control of Dynamically \nPositioned Ships Using Vectorial Observer Backstepping\u201d. IEEE Transactions on \nControl System Technology, 1998. \n \n[22] \u2013 Santos, E.M., \u201cUm simulador de manobras em tempo real com sistema de \nposicionamento din\u00e2mico para treinamento\u201d. Tese de doutorado, 2005. \n \n[23] \u2013 Saelid, S., Jensen, N.A., Balchen, J.G. \u201cDesign and analysis of a dynamic \npositioning system based on Kalman filtering and optimal control\u201d. IEEE \nTransactions on Automatic Control, 1983."}]}}}