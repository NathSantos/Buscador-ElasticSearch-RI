{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.13728"}, {"@name": "filename", "#text": "19843_Mobilidade%20el%c3%a9trica_sistema%20de%20venda%20de%20energia%20por%20sms.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "Universidade de Aveiro Departamento de Engenharia Mec\u00e2nica\n2014\n\nLu\u00edsa Manuel de\n\nSousa Pereira\n\nAzeredo\n\nMobilidade el\u00e9trica - Sistema de venda de\n\nenergia por SMS\n\n\n\n\n\nUniversidade de Aveiro Departamento de Engenharia Mec\u00e2nica\n2014\n\nLu\u00edsa Manuel de\n\nSousa Pereira\n\nAzeredo\n\nMobilidade el\u00e9trica - Sistema de venda de\n\nenergia por SMS\n\nDisserta\u00e7\u00e3o apresentada \u00e0 Universidade de Aveiro para cumprimento dos re-\nquisitos necess\u00e1rios \u00e0 obten\u00e7\u00e3o do grau de Mestre em Engenharia Mec\u00e2nica,\nrealizada sob a orienta\u00e7\u00e3o cient\u00ed?ca de Jos\u00e9 Paulo Oliveira Santos, Profes-\nsor Auxiliar do Departamento de Engenharia Mec\u00e2nica da Universidade de\nAveiro\n\n\n\n\n\nO j\u00fari / The jury\n\nPresidente / President Professora Doutora Margarida Isabel Cabrita Marques Coelho\nProfessara Auxiliar da Universidade de Aveiro\n\nVogais / Examiners committee Professor Doutor Rui Manuel Escadas Ramos Martins\nProfessor Auxiliar da Universidade de Aveiro (Arguente Principal)\n\nProfessor Doutor Jos\u00e9 Paulo Oliveira Santos\nProfessor Auxiliar da Universidade de Aveiro (Orientador)\n\n\n\n\n\nAgradecimentos /\nAcknowledgements\n\nGostaria de deixar o meu especial agradecimento a todos, que direta ou\nindiretamente, permitiram e colaboraram para o desfecho desta forma\u00e7\u00e3o\nacad\u00e9mica.\nAo meu orientador, Professor Doutor Jos\u00e9 Paulo Santos, pela con?an\u00e7a e\napoio que sempre prestou ao longo deste projeto.\n\nAos meus pais, Manelzinho e Guidinha, a oportunidade que me deram para\nprosseguir os meus estudos e apoio incondicional nos melhores e piores mo-\nmentos de todos os anos da minha vida. Um muito obrigada por tudo.\n\n\u00c0 minha irm\u00e3, Joana, o apoio e o carinho que sempre me deu ao longo\ndesta longa caminhada, permitindo desde muito cedo o sucesso em toda a\nforma\u00e7\u00e3o acad\u00e9mica.\n\nAo meu melhor amigo, Rui, por toda a aten\u00e7\u00e3o, paci\u00eancia, carinho e apoio\nque sempre demonstrou, em todos os momentos, sendo uma forte contribui-\n\u00e7\u00e3o para ultrapassar todos os obst\u00e1culos.\n\nAos meus amigos de mec\u00e2nica e aos meus colegas de laborat\u00f3rio pela ami-\nzade, companheirismo e esp\u00edrito de entreajuda ao longo de todo este tempo.\nJuntos pass\u00e1mos momentos de grande divers\u00e3o, assim como contribu\u00edmos\npara o sucesso de cada um de n\u00f3s.\n\nA todos um MUITO OBRIGADA!\n\n\n\n\n\nPalavras Chave Medi\u00e7\u00e3o, Carregamento, Ve\u00edculo El\u00e9trico, Anal\u00f3gico, PIC-GSM, Microchip\nPIC, PHP, HTML5\n\nResumo Com o constante aumento dos pre\u00e7os do petr\u00f3leo e dos seus derivados, as-\nsim como a sua crescente escassez, as solu\u00e7\u00f5es a curto prazo passam pela\nutiliza\u00e7\u00e3o de ve\u00edculos com diferentes meios de propuls\u00e3o, entre eles os mo-\ntores a hidrog\u00e9nio e os motores el\u00e9tricos. A evolu\u00e7\u00e3o tecnol\u00f3gica observada\nnos \u00faltimos anos na \u00e1rea dos ve\u00edculos el\u00e9tricos e o previs\u00edvel aumento do\nn\u00famero de ve\u00edculos, n\u00e3o foi acompanhado pelo aumento de postos de abas-\ntecimento, existindo uma importante \u00e1rea do pa\u00eds onde, ainda n\u00e3o \u00e9 poss\u00edvel\nabastecer o autom\u00f3vel. Outro obst\u00e1culo, \u00e9 o processo de compra de energia\nnos postos existentes ser demorado, uma vez que necessitam de um pr\u00e9vio\nregisto do utilizador para adquirir o cart\u00e3o para a compra de energia.\n\nO documento apresentado, cont\u00e9m os detalhes acerca de um projeto que\nconsiste na cria\u00e7\u00e3o de um prot\u00f3tipo para abastecimento de ve\u00edculos el\u00e9tri-\ncos, o qual oferece ao utilizador a possibilidade de requisitar quantidades de\nenergia atrav\u00e9s de um SMS, e consultar todos os consumos efetuados no\nposto de abastecimento atrav\u00e9s de um navegador de Internet. A utiliza\u00e7\u00e3o\nde p\u00e1gina Web possibilita a visualiza\u00e7\u00e3o de conte\u00fados referidos no navega-\ndor em quase todos os telem\u00f3veis de nova gera\u00e7\u00e3o, bem como em tablet e\ncomputadores.\n\nTendo em conta que o sistema deveria ser de baixo custo e com resultados\npr\u00e1ticos pr\u00f3ximos de alguns modelos dispendiosos existentes no mercado,\nrecorreu-se a componentes de baixo custo. Este projeto permite assim a\nrequisi\u00e7\u00e3o de energia atrav\u00e9s de uma SMS, com registo de dados numa\np\u00e1gina Web do posto de abastecimento.\n\n\n\n\n\nKeywords Measurement, Charger, Electric Vehicle, Analogic, PIC-GSM, Microchip\nPIC, PHP, HTML5\n\nAbstract With the lack and constant increasing prices of fossil fuels, short-term solu-\ntions result in the use of di?erent types of propulsion such as, hydrogen or\nelectric motors.\nThe technological evolution in electric vehicles, on the passed few years, and\nits predictable rising number, were not followed by the number of charging\nstations. Therefore, there are some important areas that do not allow an\nelectric vehicle to charge. Existing charging stations require a prior user\nregistration to get a card for energy purchase, which makes all the process\nslow.\nThe document here presented, contains details about a prototype created\nfor electric vehicles supply o?ering, the user, the possibility, to require energy\nthrough a SMS and to consult user consumptions, on every charging station,\nthrough a Internet browser. Web page usage, allows the content visualization\nin all smartphones and tablets.\n\nGiven that the system should be low-cost and with results close to some\nexisting expensive models on the market, used low-cost componentes. This\nproject allows the purchase of energy through a SMS, with data register on\na Website for the charging station.\n\n\n\n\n\nConte\u00fado\n\nConte\u00fado i\n\nLista de Figuras iii\n\nLista de Tabelas v\n\nAcr\u00f3nimos vii\n\n1 Introdu\u00e7\u00e3o 1\n\n1.1 Contexto . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1\n1.2 Problema a resolver . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2\n1.3 Objetivos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3\n1.4 Organiza\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4\n\n2 Estado de Arte 5\n\n2.1 Ve\u00edculo El\u00e9trico . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\n2.2 Legisla\u00e7\u00e3o associada \u00e0 implementa\u00e7\u00e3o do posto de abastecimento . . . . . . . . 6\n2.3 Tecnologias de abastecimento . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7\n\n2.3.1 EFACEC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7\n2.3.2 EV Solutions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8\n2.3.3 Charge Point . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9\n\n2.4 Empresas de Monitoriza\u00e7\u00e3o Gest\u00e3o de postos p\u00fablicos . . . . . . . . . . . . . . 10\n2.4.1 MOBI.E Mobilidade El\u00e9trica . . . . . . . . . . . . . . . . . . . . . . . . 10\n2.4.2 Essent . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11\n2.4.3 Wattstation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12\n\n2.5 Projetos Relacionados . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13\n2.5.1 \"Electric vehicle charging infrastructure in Poland\"\n\n[Benysek and Jarnut, 2012] . . . . . . . . . . . . . . . . . . . . . . . . . 13\n\n3 Solu\u00e7\u00e3o Proposta 15\n\n3.1 Perspetiva Geral . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n3.2 Funcionalidades do sistema . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n3.3 Restri\u00e7\u00f5es . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n3.4 Apresenta\u00e7\u00e3o da solu\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n\ni\n\n\n\n4 Implementa\u00e7\u00e3o do Posto de Abastecimento 21\n\n4.1 Arquitetura do Sistema . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n4.1.1 M\u00f3dulo 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n4.1.2 M\u00f3dulo 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22\n4.1.3 M\u00f3dulo 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23\n4.1.4 Conclus\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\n\n4.2 M\u00f3dulo 1- Controlo da passagem da corrente el\u00e9trica . . . . . . . . . . . . . . . 25\n4.3 M\u00f3dulo 2 - Medi\u00e7\u00e3o da Energia . . . . . . . . . . . . . . . . . . . . . . . . . . . 26\n\n4.3.1 Medi\u00e7\u00e3o da Corrente . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26\n4.3.2 Medi\u00e7\u00e3o da Tens\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29\n4.3.3 Microcontrolador . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31\n\n4.4 M\u00f3dulo 3 - Modem GSM/GPRS . . . . . . . . . . . . . . . . . . . . . . . . . . 36\n4.4.1 Comunica\u00e7\u00e3o RS232 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36\n4.4.2 Comunica\u00e7\u00e3o TCP/IP . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37\n\n4.5 S\u00edntese prot\u00f3tipo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40\n\n5 Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o 43\n\n5.1 Base de dados MySQL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44\n5.2 P\u00e1gina WEB . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45\n\n6 Conclus\u00f5es e Trabalho futuro 53\n\n6.1 Conclus\u00f5es . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53\n6.2 Trabalho Futuro . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\n\nBibliogra?a 55\n\nA Diagramas 59\n\nB Esquemas El\u00e9tricos 69\n\nii\n\n\n\nLista de Figuras\n\n1.1 Utiliza\u00e7\u00e3o de Ve\u00edculos El\u00e9tricos nos pa\u00edses da Europa.[Automotive] . . . . . . . 1\n1.2 Crescimento Global dos postos de abastecimento de ve\u00edculos el\u00e9tricos.[Research] 3\n\n2.1 Carregamento do ve\u00edculo el\u00e9trico.[Reis, 2010] . . . . . . . . . . . . . . . . . . . 6\n2.2 Exemplos de postos de abastecimento da EFACEC.[EFACEC] . . . . . . . . . . 8\n2.3 Exemplos de postos de abastecimento da EV Solutions.[Solutions] . . . . . . . . 9\n2.4 Aplica\u00e7\u00e3o de carregamento da Charge Point.[Point] . . . . . . . . . . . . . . . . 10\n2.5 Aplica\u00e7\u00e3o de apoio MOBIE. [Reis, 2010] . . . . . . . . . . . . . . . . . . . . . . 11\n2.6 Funcionamento do Microincasso.[Microincasso] . . . . . . . . . . . . . . . . . . 12\n2.7 Aplica\u00e7\u00e3o para Smartphone da Wattstation.[Wattstation] . . . . . . . . . . . . . 13\n2.8 Sistema de carregamento de VE na Pol\u00f3nia.[Benysek and Jarnut, 2012] . . . . . 13\n2.9 Prot\u00f3tipo desenvolvido. Legenda: D- ecr\u00e3, CM - modulo de comunica\u00e7\u00e3o\n\nbidirecional, CPU- unidade de processamento central, AC- Modulo de con-\ntrolo de acesso, P- prote\u00e7\u00e3o, M- medidor de energia, S- estado de leitura.\n[Benysek and Jarnut, 2012] . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n\n3.1 Diagrama da solu\u00e7\u00e3o proposta. . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n3.2 Fluxograma da solu\u00e7\u00e3o proposta. . . . . . . . . . . . . . . . . . . . . . . . . . . 18\n\n4.1 Propostas para o M\u00f3dulo 1. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22\n4.2 Propostas para o M\u00f3dulo 2. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23\n4.3 Proposta para o M\u00f3dulo 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\n4.4 Diagrama dos m\u00f3dulos existentes. . . . . . . . . . . . . . . . . . . . . . . . . . . 25\n4.5 M\u00f3dulo 1 - Controlo da passagem da corrente el\u00e9trica. . . . . . . . . . . . . . . 26\n4.6 Efeito de Hall.[Electronics, 2014] . . . . . . . . . . . . . . . . . . . . . . . . . . 26\n4.7 Compara\u00e7\u00e3o de transdutores . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27\n4.8 Circuito representativo do tratamento dos sinais da corrente . . . . . . . . . . . 28\n4.9 Transdutor de tens\u00e3o LV25-P da LEM [LEM, 2014b] . . . . . . . . . . . . . . . 30\n4.10 Circuito representativo do tratamento dos sinais da corrente . . . . . . . . . . . 31\n4.11 Esquema geral do microcontrolador . . . . . . . . . . . . . . . . . . . . . . . . . 32\n4.12 Pot\u00eancias. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33\n4.13 Ordem de leitura das entradas anal\u00f3gicas. . . . . . . . . . . . . . . . . . . . . . 35\n4.14 Diagrama de envio/rece\u00e7\u00e3o de SMS com carregamento. . . . . . . . . . . . . . . 37\n4.15 Diagrama do envio de dados para a p\u00e1gina web . . . . . . . . . . . . . . . . . . 39\n4.16 Diagrama do processo do carregador . . . . . . . . . . . . . . . . . . . . . . . . 40\n4.17 Prototipo - Vista exterior . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41\n4.18 Prototipo - Vista interior . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42\n\niii\n\n\n\n4.19 Teste de envio de mensagem para o prot\u00f3tipo. . . . . . . . . . . . . . . . . . . . 42\n\n5.1 M\u00f3dulo da Monitoriza\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43\n5.2 C\u00f3digo PHP para inser\u00e7\u00e3o de valores na base de dados. . . . . . . . . . . . . . 44\n5.3 Estrutura da base de dados. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44\n5.4 \u00cdcone da p\u00e1gina. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45\n5.5 P\u00e1gina principal E.Charger. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46\n5.6 Pagina para fazer registo. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48\n5.7 Caixa de aviso de registo efetuado. . . . . . . . . . . . . . . . . . . . . . . . . . 48\n5.8 Pagina do cliente . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n5.9 Pagina para fazer Login. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\n5.10 Pagina de administrador. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51\n5.11 Pesquisa por cliente. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\n5.12 Pagina Sobre o projeto criado. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\n5.13 Pagina com o Contacto do projeto. . . . . . . . . . . . . . . . . . . . . . . . . . 52\n\nA.1 Diagrama de comandos em ciclo normal. . . . . . . . . . . . . . . . . . . . . . . 61\nA.2 Diagrama de envio/recep\u00e7\u00e3o de SMS quando h\u00e1 erros. . . . . . . . . . . . . . . 63\nA.3 Vetor Interrup\u00e7\u00e3o do Pic 18f97J60 . . . . . . . . . . . . . . . . . . . . . . . . . 65\nA.4 Diagrama geral do Pic 18f97J60 . . . . . . . . . . . . . . . . . . . . . . . . . . . 67\n\nB.1 Esquema representativo de montagem m\u00f3dulo Triac . . . . . . . . . . . . . . . 71\nB.2 Esquema representativo de montagem do transdutor de tensao . . . . . . . . . . 73\nB.3 Esquema representativo de montagem do transdutor de corrente . . . . . . . . . 75\n\niv\n\n\n\nLista de Tabelas\n\n4.1 Compara\u00e7\u00e3o entre transdutores de corrente . . . . . . . . . . . . . . . . . . . . 27\n4.2 Caracter\u00edsticas do transdutor LV25-P . . . . . . . . . . . . . . . . . . . . . . . . 29\n4.3 Comandos AT para envio e rece\u00e7\u00e3o de SMS. . . . . . . . . . . . . . . . . . . . . 36\n4.4 Comandos AT para a comunica\u00e7\u00e3o TCP/IP . . . . . . . . . . . . . . . . . . . . 38\n\nv\n\n\n\nvi\n\n\n\nAcr\u00f3nimos\n\nA Ampere\n\nAPI Application Programming Interface\n\nAPN Access Point Name\n\nAC Corrente Alternada\n\nDC Corrente Cont\u00ednua\n\nEV Veiculo el\u00e9trico\n\nGPS Global Positioning System\n\nGPRS General Packet Radio Service\n\nGSM Global System for Mobile Comunications\n\nHEV Ve\u00edculo el\u00e9trico h\u00edbrido\n\nHTML Hypertext Markup Language\n\nHz Hertz\n\nIef Corrente efetiva\n\nIP Internet Protocol\n\nkwh quilo-watt-hora\n\nLCD Liquid Crystal Display\n\nQ Pot\u00eancia Reativa\n\nQR Quick Response\n\nPact Pot\u00eancia Ativa\n\nPCB Printed Circuit Board\n\nPDP Packet Data Protocol\n\nPinst Pot\u00eancia Instant\u00e2nea\n\nvii\n\n\n\nPLC Programmable logic controller\n\nS Pot\u00eancia Aparente\n\nSIM Subscriber Identity Module\n\nSMS Short Message Service\n\nTCP Transmission Control Protocol\n\nUART Universal Asynchronous Receiver/Transmitter\n\nURL Uniform Resource Locator\n\nV Volt\n\nVAR Volt - Ampere reativo\n\nVA Volt - Ampere\n\nVef Tens\u00e3o efetiva\n\nW Watt\n\nviii\n\n\n\nCap\u00edtulo 1\n\nIntrodu\u00e7\u00e3o\n\n1.1 Contexto\n\nA n\u00edvel internacional, todos os pa\u00edses t\u00eam assistido a uma revolu\u00e7\u00e3o no setor energ\u00e9tico.\nEsta revolu\u00e7\u00e3o assenta na ?utua\u00e7\u00e3o dos pre\u00e7os dos combust\u00edveis f\u00f3sseis, nas altera\u00e7\u00f5es cli-\nm\u00e1ticas, no esgotamento das fontes energ\u00e9ticas e, mais recentemente, nos impactos oriundos\nda crise ?nanceira global que obrigou a uma mudan\u00e7a de atitude perante a forma como se\nabordar\u00e3o as quest\u00f5es energ\u00e9ticas no futuro.\n\nA depend\u00eancia do petr\u00f3leo e o impacto ambiental da\u00ed resultante, conduziu a uma aposta\nnuma diversi?ca\u00e7\u00e3o energ\u00e9tica para a mobilidade que visam a melhoria da qualidade de vida\ndas popula\u00e7\u00f5es e a redu\u00e7\u00e3o da fatura energ\u00e9tica nacional. O principal objetivo passa por\ncontribuir para a mobilidade sustent\u00e1vel, maximizando as vantagens e integrando as energias\nrenov\u00e1veis como alternativa aos combust\u00edveis f\u00f3sseis. Da\u00ed, as solu\u00e7\u00f5es a curto prazo passam\npela utiliza\u00e7\u00e3o de ve\u00edculos com diferentes meios de propuls\u00e3o, entre eles os motores a hidrog\u00e9nio\ne os motores el\u00e9tricos. Na Figura 1.1, pode-se observar a percentagem de utiliza\u00e7\u00e3o de ve\u00edculos\n\nFigura 1.1: Utiliza\u00e7\u00e3o de Ve\u00edculos El\u00e9tricos nos pa\u00edses da Europa.[Automotive]\n\n1\n\n\n\n2 1.Introdu\u00e7\u00e3o\n\nel\u00e9tricos nos pa\u00edses da Europa no ano de 2013. No entanto, em Portugal essa percentagem \u00e9\nbastante reduzida.\n\nExistem dois fatores que t\u00eam vindo a limitar a massi?ca\u00e7\u00e3o dos ve\u00edculos el\u00e9tricos, a sua\nreduzida autonomia e o seu pre\u00e7o, quando comparados com a dos ve\u00edculos de combust\u00e3o in-\nterna. Como forma de compensar a reduzida autonomia, \u00e9 necess\u00e1rio continuar a progredir\nem dois n\u00edveis: ao n\u00edvel do ve\u00edculo \u00e9 necess\u00e1rio evoluir a tecnologia das baterias atuais bem\ncomo os sistemas de gest\u00e3o energ\u00e9ticos internos, ao passo que a n\u00edvel de apoio ao ve\u00edculo \u00e9 ne-\ncess\u00e1rio ampliar as redes nacionais de postos de carregamentos, bem como t\u00e9cnicas de gest\u00e3o\nque permitam aproveitar a rede el\u00e9trica. As novas tecnologias, em particular as tecnologias\nde comunica\u00e7\u00e3o, aparecem como suporte \u00e0s solu\u00e7\u00f5es que podem ser desenvolvidas para resol-\nver estes problemas na medida em que permitem uma otimiza\u00e7\u00e3o da gest\u00e3o local (e mesmo\nnacional) bem como da gest\u00e3o da produ\u00e7\u00e3o e do consumo.\n\n1.2 Problema a resolver\n\nComo foi referido anteriormente, um dos grandes obst\u00e1culos aos carros el\u00e9tricos centra-se\nna infraestrutura de carregamento bem como a escassez da sua rede. Segundo um estudo da\nPike Research realizado em 2010(Figura 1.2) os postos de abastecimento para ve\u00edculos el\u00e9-\ntricos tenderiam a aumentar na Europa, especialmente na parte Oeste. No entanto, com a\ncrise econ\u00f3mica existente, com especial destaque em Portugal, tal evolu\u00e7\u00e3o n\u00e3o se veri?cou,\ncomo se p\u00f4de veri?car na Figura 1.1. Este resultado pode ser derivado \u00e0 di?culdade que a\npopula\u00e7\u00e3o portuguesa tem em abastecer os seus ve\u00edculos el\u00e9tricos (VE). ?A disponibilidade de\ncarregamento \u00e9 um dos principais obst\u00e1culos \u00e0 difus\u00e3o do VE. Mais de 60% dos agregados da\n\u00c1rea Metropolitana de Lisboa n\u00e3o t\u00eam possibilidade de carregar o VE em casa, o que signi-\n?ca que, para terem um VE, teriam que estar dispostos a aceitar as limita\u00e7\u00f5es e a incerteza\ndecorrentes de poderem carregar o autom\u00f3vel apenas no emprego (se fosse esse o caso) ou nos\npostos de carregamento p\u00fablicos. Este obst\u00e1culo s\u00f3 poder\u00e1 ser superado quando existir uma\nrede de postos de carregamento p\u00fablicos de tal forma extensa e densa que n\u00e3o exista essa\nincerteza.? [Barbosa, 2012a]\n\nPara resolver esse paradigma, o Minist\u00e9rio do Ambiente, Ordenamento do Territ\u00f3rio e\nEnergia de Portugal, desenvolveu em Setembro de 2014 o Compromisso para o Crescimento\nVerde, que visa manter o crescimento econ\u00f3mico com menor consumo dos recursos naturais,\nmantendo a qualidade de vida da popula\u00e7\u00e3o. E no que toca ao apoio \u00e0 mobilidade el\u00e9trica, um\ndos compromissos \u00e9 \"Promover a mobilidade el\u00e9trica, alargando e introduzindo maior concor-\nr\u00eancia na rede p\u00fablica, privilegiando os modos de carregamento nas habita\u00e7\u00f5es e nos locais de\ntrabalho e concretizando programas de mobilidade sustent\u00e1vel na administra\u00e7\u00e3o publica (at\u00e9\n2020, introduzir 1250 viaturas el\u00e9tricas e h\u00edbridas plug-in nos servi\u00e7os do Estado e concretizar\nsistemas de gest\u00e3o de frotas - car pooling).\"[Portugal, 2014]\n\nPor isso, a solu\u00e7\u00e3o indicada para aumentar a rede de postos de carregamento, seria a ela-\nbora\u00e7\u00e3o de postos com um reduzido pre\u00e7o de compra e de implementa\u00e7\u00e3o, que ?zesse face\n\u00e0 reduzida rede de abastecimento em Portugal que proporcionaria o aumento da compra de\nve\u00edculos el\u00e9tricos.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n1.Introdu\u00e7\u00e3o 3\n\nFigura 1.2: Crescimento Global dos postos de abastecimento de ve\u00edculos el\u00e9tricos.[Research]\n\nOutro problema existente na rede de abastecimento de ve\u00edculos el\u00e9tricos em Portugal,\npreside particularmente de como \u00e9 efetuado o pagamento do servi\u00e7o. Atualmente, a rede\nnacional \u00e9 constitu\u00edda por postos que apenas permitem ao utilizador o pagamento com um\ncart\u00e3o pr\u00e9-pago da empresa. Esse cart\u00e3o para ser utilizado, exige necessariamente um pr\u00e9vio\nregisto na rede de abastecimentos para que seja enviado por correio o respetivo cart\u00e3o. Neste\ncaso, impossibilita um novo utilizador de um veiculo el\u00e9trico de o carregar num posto p\u00fablico\nprontamente.\n\nConclui-se assim que existe uma elevada urg\u00eancia para que seja desenvolvido um posto de\nabastecimento que fa\u00e7a frente a este paradigma.\n\n1.3 Objetivos\n\nO trabalho a realizar nesta disserta\u00e7\u00e3o tem como objetivo, como foi referido anteriormente,\naumentar a rede nacional de postos de abastecimento bem como melhorar o sistema de aqui-\nsi\u00e7\u00e3o dessa energia. Assim, torna-se necess\u00e1rio criar um modelo de f\u00e1cil implementa\u00e7\u00e3o, que\npermita a sua instala\u00e7\u00e3o e utiliza\u00e7\u00e3o em qualquer ponto do pa\u00eds de forma r\u00e1pida e segura.\n\nPretende-se que seja um modelo com um custo de implementa\u00e7\u00e3o baixo, para se poder\naumentar a rede de abastecimento, de forma f\u00e1cil com a sua implementa\u00e7\u00e3o num simples\nposte de ilumina\u00e7\u00e3o p\u00fablica, por exemplo. Outro objetivo, \u00e9 ultrapassar o problema dos pos-\ntos existentes no momento, alterando o m\u00e9todo de pagamento. Uma vez que na popula\u00e7\u00e3o\nportuguesa o uso de telem\u00f3vel \u00e9 muito frequente, uma solu\u00e7\u00e3o vi\u00e1vel seria o pagamento feito\npor uma simples SMS, facilitando o acesso do utilizador aos mesmos. Esta solu\u00e7\u00e3o permitiria\ntamb\u00e9m a que qualquer turista pudesse utilizar o posto.\n\nEspera-se que este novo equipamento venha acompanhado de um website para que o uti-\nlizador possa consultar os seus consumos mensais junto deste postos de abastecimento.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4 1.Introdu\u00e7\u00e3o\n\n1.4 Organiza\u00e7\u00e3o\n\nEm termos gerais, a estrutura da presente disserta\u00e7\u00e3o encontra-se dividida em seis cap\u00ed-\ntulos.\n\nO primeiro cap\u00edtulo \u00e9 composto pela Introdu\u00e7\u00e3o. Nesta fase inicial, apresento a tem\u00e1tica\nem estudo, os respetivos objetivos e \u00e2mbito do prot\u00f3tipo desenvolvido, e d\u00e3o-se a conhecer\nas principais motiva\u00e7\u00f5es que conduziram \u00e0 sele\u00e7\u00e3o do tema e das quest\u00f5es subordinadas ao\nmesmo. Por outro lado, procura-se enquadrar a problem\u00e1tica associada ao produto a desen-\nvolver, o problema existente atualmente no mercado portugu\u00eas e a procura de uma solu\u00e7\u00e3o\nvi\u00e1vel para este paradigma.\n\nNo segundo cap\u00edtulo, \u00e9 desenvolvido o Estado de Arte. Nesta fase, enquadro os conceitos\ninerentes a este prot\u00f3tipo, como o ve\u00edculo el\u00e9trico e o modo de abastecimento deste. \u00c9 feita\numa ligeira abordagem pela legisla\u00e7\u00e3o necess\u00e1ria para colocar um produto desenvolvido no\nmercado portugu\u00eas. Apresento as diversas tecnologias existentes j\u00e1 no mercado bem como\naquelas em estudo, tanto no meio acad\u00e9mico como no meio empresarial, bem como alguns dos\nweb sites ou aplica\u00e7\u00f5es para smartphones, desenvolvidos para apoio desses meios de abasteci-\nmentos de ve\u00edculos el\u00e9tricos por algumas empresas.\n\nO terceiro cap\u00edtulo \u00e9 constitu\u00eddo pela Solu\u00e7\u00e3o Proposta. Na primeira fase, \u00e9 procurada uma\nsolu\u00e7\u00e3o tendo em vista \u00e0 problem\u00e1tica referida na Introdu\u00e7\u00e3o bem como todas as tecnologias\nj\u00e1 existentes mencionadas no Estado de Arte. S\u00e3o abordadas as funcionalidades e restri\u00e7\u00f5es\nque o equipamento a desenvolver deve ter. Por ?m \u00e9 apresentada a solu\u00e7\u00e3o proposta, bem\ncomo a sua arquitetura.\n\nNo quarto cap\u00edtulo denominado por Implementa\u00e7\u00e3o do posto de abastecimento, como o\nnome indica s\u00e3o apresentados os m\u00f3dulos inerentes ao hardware, bem como os c\u00e1lculos e as\njusti?ca\u00e7\u00f5es das escolhas feitas.\n\nNo quinto cap\u00edtulo \u00e9 a apresentado a Implementa\u00e7\u00e3o do sistema de monitoriza\u00e7\u00e3o, onde\n\u00e9 elaborada a p\u00e1gina web e a base de dados de apoio ao prot\u00f3tipo desenvolvido, tendo em\nconsidera\u00e7\u00e3o o lado do utilizador e o lado da administra\u00e7\u00e3o do produto.\n\nNo sexto cap\u00edtulo \u00e9 feito a abordagem \u00e0 an\u00e1lise do prot\u00f3tipo bem como \u00e0s Conclus\u00f5es\ndeste. Tamb\u00e9m \u00e9 apresentado o trabalho futuro que consiste no que poder\u00e1 ser feito no\nseguimento deste projeto.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nCap\u00edtulo 2\n\nEstado de Arte\n\nNeste cap\u00edtulo \u00e9 apresentado o atual estado da arte, tendo em conta o problema apresen-\ntado no cap\u00edtulo anterior. No in\u00edcio ser\u00e3o identi?cados alguns aspetos a ter em conta relativa-\nmente aos ve\u00edculos el\u00e9tricos e a sua constitui\u00e7\u00e3o interna de forma a se obter uma perspetiva dos\nseus constituintes. Seguidamente ser\u00e1 levantado o estudo a n\u00edvel de solu\u00e7\u00f5es e caracter\u00edsticas\npara o carregamento dos ve\u00edculos el\u00e9tricos e por ?m as tecnologias e solu\u00e7\u00f5es existentes a n\u00edvel\nde comunica\u00e7\u00f5es que podem ser implementadas num sistema de carregamentos de ve\u00edculos\nel\u00e9tricos.\n\n2.1 Ve\u00edculo El\u00e9trico\n\nOs ve\u00edculos el\u00e9tricos podem ser classi?cados de acordo com as fontes de energia para mo-\nvimentar o ve\u00edculo. Basicamente, existem dois tipos: ve\u00edculo el\u00e9trico a bateria (EV), ou seja,\na \u00fanica fonte de energia \u00e9 a bateria el\u00e9trica, e o ve\u00edculo el\u00e9trico h\u00edbrido (HEV), possuindo\num motor de combust\u00e3o interna (gasolina ou diesel) e um conjunto de baterias qu\u00edmicas mais\nacionamento ou conversor de pot\u00eancia e motor el\u00e9trico.[Escola]\n\nNa arquitetura do ve\u00edculo el\u00e9trico destacam-se quatro pontos essenciais:\n\n\u2022 Motor el\u00e9trico, que se pode dividir essencialmente em dois tipos: corrente continua (DC)\ne corrente alternada (AC).\n\n\u2022 Sistema de controlo, que \u00e9 o respons\u00e1vel pela gest\u00e3o de energia entre a bateria e o\nmotor, sendo que o sistema disponibiliza a energia mediante as necessidades do motor.\nO sistema de controlo tamb\u00e9m \u00e9 respons\u00e1vel pelo funcionamento do motor durante a\ntravagem regenerativa, garantindo que o motor passa a funcionar como um gerador.\n\n\u2022 Bateria, que \u00e9 onde ?ca armazenada a energia el\u00e9trica, que \u00e9 disponibilizada ao ve\u00edculo\nconsoante as suas necessidades.\n\n\u2022 Sistema de travagem. Durante a travagem, o motor funciona como um gerador, carre-\ngando desta maneira a bateria, o que permite aumentar a autonomia. Este funciona-\nmento denomina-se a travagem regenerativa.\n\nPara carregar um ve\u00edculo el\u00e9trico \u00e9 necess\u00e1rio lig\u00e1-lo \u00e0 corrente el\u00e9trica. O tempo de carga\nvaria, dependendo do tipo de carga (r\u00e1pida/lenta) e da capacidade e tens\u00e3o/corrente do car-\nregador.\n\n5\n\n\n\n6 2.Estado de Arte\n\nO carregamento convencional dos ve\u00edculos el\u00e9tricos \u00e9 feito com recurso a um cabo, podendo\ndistinguir-se 2 tipos de carga, lenta/normal e r\u00e1pida (Figura 2.1):\n\n\u2022 Carga lenta/normal\nAtrav\u00e9s da tens\u00e3o de 220 V \u00e9 poss\u00edvel carregar totalmente as baterias de um ve\u00edculo\nel\u00e9trico entre seis a oito horas. Este m\u00e9todo \u00e9 indicado para os utilizadores carregarem\no seu ve\u00edculo durante a noite, aproveitando assim a energia proveniente de fontes de\nenergia renov\u00e1veis e o acesso a tarifas mais econ\u00f3micas, bem com em locais pr\u00f3ximos do\nemprego. Neste tipo de carga, a corrente pode variar de 16A a 32A.\n\n\u2022 Carga r\u00e1pida\nUtilizando tens\u00f5es de 400 V e uma corrente aproximada de 100A, consegue-se carregar\numa bateria de 20 kWh em vinte a trinta minutos, dependendo da corrente dispon\u00edvel.\nEste m\u00e9todo \u00e9 indicado para postos de carregamentos localizados em centros comerciais,\nparques de estacionamento e postos de carregamento r\u00e1pido espec\u00ed?cos para o efeito.\n\nFigura 2.1: Carregamento do ve\u00edculo el\u00e9trico.[Reis, 2010]\n\n2.2 Legisla\u00e7\u00e3o associada \u00e0 implementa\u00e7\u00e3o do posto de abaste-\ncimento\n\nPara a elabora\u00e7\u00e3o de postos de abastecimento de ve\u00edculos el\u00e9tricos, foram criadas legisla-\n\u00e7\u00f5es e normas que t\u00eam de ser cumpridas. A norma europeia existente para este tipo de produto\n\u00e9 a EN/NP61851 ? Sistema de carga para ve\u00edculos el\u00e9tricos, que de?ne como deve ser feito\no carregamento de um ve\u00edculo el\u00e9trico e em que condi\u00e7\u00f5es. No entanto, o governo portugu\u00eas\ncriou alguns regulamentos para al\u00e9m da norma europeia, que caso surja o interesse de comer-\ncializar este produto em Portugal, t\u00eam de ser consideradas. De seguida s\u00e3o demonstrados os\nmais relevantes para este caso:\n\n\u2022 Portaria n.o 1201/2013, de 29 de Novembro, estabelece os requisitos t\u00e9cnicos a que ?ca\nsujeita a atribui\u00e7\u00e3o de licen\u00e7a para o exerc\u00edcio da atividade de opera\u00e7\u00e3o de pontos de\ncarregamento da rede de mobilidade el\u00e9trica;\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n2.Estado de Arte 7\n\n\u2022 Portaria n.o 1202/2010 de 29 de Novembro, estabelece os termos aplic\u00e1veis \u00e0s licen\u00e7as\nde utiliza\u00e7\u00e3o privativa do dom\u00ednio p\u00fablico para a instala\u00e7\u00e3o de pontos de carregamento\nde baterias de ve\u00edculos el\u00e9tricos em local p\u00fablico de acesso publico;\n\n\u2022 Portaria n.o 1232/2010, de 9 de Dezembro, ?xa o valor das taxas devidas pela emiss\u00e3o\ndas licen\u00e7as de comercializa\u00e7\u00e3o de eletricidade para a mobilidade el\u00e9trica e de opera\u00e7\u00e3o\nde pontos de carregamento, bem como da taxa de inspe\u00e7\u00e3o devida pela realiza\u00e7\u00e3o de\ninspe\u00e7\u00f5es peri\u00f3dicas;\n\n\u2022 Portaria n.o 173/2011 de 28 de Abril, estabelece as condi\u00e7\u00f5es m\u00ednimas, os limites de\ncapital e riscos cobertos pelo seguro obrigat\u00f3rio de responsabilidade civil por danos\ncausados no exerc\u00edcio da atividade de comercializa\u00e7\u00e3o de eletricidade para a mobilidade\nel\u00e9trica;\n\n\u2022 Portaria n.o 252/2011 de 27 de Junho, estabelece as normas t\u00e9cnicas para instala\u00e7\u00e3o\ne funcionamento de pontos de carregamento normal em edif\u00edcios e outras opera\u00e7\u00f5es\nurban\u00edsticas.\n\n2.3 Tecnologias de abastecimento\n\nDe seguida s\u00e3o apresentadas as solu\u00e7\u00f5es comerciais existentes no mercado, ou seja, \u00e9 feita\numa breve descri\u00e7\u00e3o dos tipos de carregadores existentes bem como algumas das esta\u00e7\u00f5es de\ncarregamento existentes.\n\n2.3.1 EFACEC\n\nA EFACEC consiste numa empresa portuguesa que desenvolve, para al\u00e9m de outras tecno-\nlogias, postos de abastecimento para ve\u00edculos el\u00e9tricos. Atualmente, os existentes em Portugal\nna via p\u00fablica s\u00e3o produto desta empresa.\n\nPara o tipo de carregamento r\u00e1pido, a EFACEC apresenta o Quick Charger (Figura 2.2).\nConsiste num carregador de corrente cont\u00ednua que pode ser utilizado para carregar todos os\nve\u00edculos el\u00e9tricos, que permite um carregamento de 80% em 30 minutos. Este equipamento\nesta desenvolvido para corrente continua, no entanto est\u00e1 dispon\u00edvel como op\u00e7\u00e3o uma corrente\nalternada de 43kVA. As suas caracter\u00edsticas essenciais s\u00e3o:\n\n\u2022 Voltagem: 400V\n\n\u2022 Frequ\u00eancia: 50/60Hz\n\n\u2022 Corrente:73 A\n\n\u2022 Fator de pot\u00eancia: 0,98\n\nPara efetuar o pagamento do servi\u00e7o, a empresa disp\u00f5em de instala\u00e7\u00e3o de leitura para cart\u00f5es\nRFID, que necessita de um pr\u00e9vio registo na empresa para a sua aquisi\u00e7\u00e3o.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n8 2.Estado de Arte\n\n(a) Carregamento R\u00e1pido (b) Carregamento Lento\n\nFigura 2.2: Exemplos de postos de abastecimento da EFACEC.[EFACEC]\n\nPara carregamentos lentos, a EFACEC desenvolveu equipamentos para instala\u00e7\u00e3o em ha-\nbita\u00e7\u00f5es. Por esse motivo, este modelo tem as seguintes funcionalidades:\n\n\u2022 Veri?car se o ve\u00edculo se encontra corretamente ligado;\n\n\u2022 Veri?ca\u00e7\u00e3o cont\u00ednua da integridade do condutor de terra de prote\u00e7\u00e3o;\n\n\u2022 Dete\u00e7\u00e3o cont\u00ednua de corrente residual;\n\n\u2022 Ativar/ desativar a sa\u00edda do carregador;\n\nEste modelo, comparativamente ao anterior, j\u00e1 utiliza correntes mais inferiores. Neste mo-\ndelo, a corrente varia de 16A a 32A e utiliza a energia da rede com aproximadamente 230V.\nOpcionalmente, este modelo tamb\u00e9m vem equipado com acesso por RFID.\n\n2.3.2 EV Solutions\n\nA EV Solutions consiste numa empresa que comercializa carregadores para ve\u00edculos el\u00e9tri-\ncos. Para tal, desenvolveu carregadores para os dois tipos de carregamentos realizados. Para\nambos o m\u00e9todo de pagamento aplicado \u00e9 atrav\u00e9s de cart\u00e3o.\n\nNo caso do carregamento lento, um exemplo da EV Solutions para aplica\u00e7\u00e3o p\u00fablica de\ncarregamento, est\u00e1 representado do lado direito da Figura 2.3. Este equipamento possui as\nseguintes caracter\u00edsticas:\n\n\u2022 Voltagem: 208VAC a 240VAC\n\n\u2022 Frequ\u00eancia: 60/50 Hz\n\n\u2022 Corrente de sa\u00edda: m\u00e1ximo 30A\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n2.Estado de Arte 9\n\n\u2022 Corrente de entrada: m\u00e1ximo 40A\n\nEste tipo de carregador tem um pre\u00e7o comercial aproximado de 600 euros. Este modelo\ndepois pode ser adaptado com sistemas de comunica\u00e7\u00e3owi? para auxiliar as redes de distri-\nbui\u00e7\u00e3o.\n\n(a) Carregamento R\u00e1pido (b) Carregamento Lento\n\nFigura 2.3: Exemplos de postos de abastecimento da EV Solutions.[Solutions]\n\nPara o carregamento r\u00e1pido, a EV Solutions desenvolveu para a Nissan um modelo que\npermite carregar o ve\u00edculo em cerca de 80% em 30 minutos, sendo ideal para aplica\u00e7\u00f5es p\u00fablicas\ne comerciais. Este modelo tem as seguintes caracter\u00edsticas:\n\n\u2022 Voltagem: 480V\n\n\u2022 Frequ\u00eancia: 50/60Hz\n\n\u2022 Corrente: 54A\n\nEste modelo pode ainda ter a instala\u00e7\u00e3o de um LCD que permite demonstrar o consumo\nenerg\u00e9tico.\n\n2.3.3 Charge Point\n\nA Charge Point \u00e9 uma rede de postos de abastecimento de carros el\u00e9tricos distribu\u00eddos na\nEuropa, Estados Unidos da Am\u00e9rica, \u00c1sia e Austr\u00e1lia. Esta rede, apenas cont\u00e9m postos de\ncarregamento lento. O exemplo referido na Figura 2.4, tem as seguintes caracter\u00edsticas:\n\n\u2022 Voltagem: 240VAC\n\n\u2022 Corrente: 30A\n\n\u2022 Frequ\u00eancia: 60Hz\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n10 2.Estado de Arte\n\nEste modelo possui um LCD que demonstra instru\u00e7\u00f5es de como o utilizador deve usar o\ncarregador, bem como \u00e9 acompanhado de uma aplica\u00e7\u00e3o para Smartphone. Na Figura 2.4\npode-se visualizar as diversas funcionalidades dessa aplica\u00e7\u00e3o. O cliente pode monitorizar\no carregamento do veiculo \u00e0 dist\u00e2ncia, pode iniciar o carregamento atrav\u00e9s do smartphone,\nconsegue procurar atrav\u00e9s de um mapa interativo todos os postos de abastecimento existentes,\nbem como memorizar os seus favoritos numa lista.\n\nPara adquirir esta aplica\u00e7\u00e3o e aceder a todas as suas funcionalidades, o utilizador apenas\nprecisa de se registar no site da Charge Point, cedendo os seus dados pessoais, bem como\nadicionar um m\u00e9todo de pagamento, Paypal ou cart\u00e3o de cr\u00e9dito. Depois de adicionados \u00e0\naplica\u00e7\u00e3o, \u00e9 tudo autom\u00e1tico.\n\nFigura 2.4: Aplica\u00e7\u00e3o de carregamento da Charge Point.[Point]\n\n2.4 Empresas de Monitoriza\u00e7\u00e3o Gest\u00e3o de postos p\u00fablicos\n\n2.4.1 MOBI.E Mobilidade El\u00e9trica\n\nA MOBI.E surge como resposta \u00e0 necessidade de uma Rede de Mobilidade El\u00e9trica em\nPortugal, uma rede integrada de v\u00e1rios pontos no territ\u00f3rio nacional, que permitir\u00e1 o abaste-\ncimento dos ve\u00edculos el\u00e9tricos mediante um cart\u00e3o de carregamento. A eletricidade pode ser\nfornecida pelos diferentes comerciantes ou atrav\u00e9s de energias renov\u00e1veis presentes no local.\nPara efetuar o abastecimento do veiculo el\u00e9trico, no posto \u00e9 poss\u00edvel efetuar:\n\n\u2022 Autentica\u00e7\u00e3o por cart\u00e3o pr\u00e9 pago/ p\u00f3s pago;\n\n\u2022 Carregamento lento e r\u00e1pido;\n\n\u2022 Sele\u00e7\u00e3o do comerciante de eletricidade, no ponto de carregamento;\n\n\u2022 Seguran\u00e7a: autentica\u00e7\u00e3o e conex\u00e3o ou desconex\u00e3o, apenas poss\u00edveis com cart\u00e3o v\u00e1lido;\n\n\u2022 Comunica\u00e7\u00e3o remota com sistemas de gest\u00e3o da rede el\u00e9trica e da rede de carregamento\nMOBIE.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n2.Estado de Arte 11\n\nEsta rede possui uma aplica\u00e7\u00e3o para o telem\u00f3vel que permite ao cliente saber o estado\nde carga da bateria do ve\u00edculo, permite encontrar o ponto de carregamento mais pr\u00f3ximo e\npermite tamb\u00e9m obter uma fatura \u00fanica com todos os gastos efetuados ao logo do per\u00edodo\nassim contratado. Isso tamb\u00e9m \u00e9 poss\u00edvel ser efetuado atrav\u00e9s do web site da empresa (Figura\n2.5).\n\nPara a empresa, tamb\u00e9m foi criada uma gest\u00e3o interna dos postos, para que sejam con-\ntrolados e monitorizados todos eles. Essa rede,permite \u00e0 empresa ter uma transmiss\u00e3o segura\nde dados entre a infraestrutura e a entidade, bem como permite uma gest\u00e3o da informa\u00e7\u00e3o de\ncarregamento por posto.\n\nFigura 2.5: Aplica\u00e7\u00e3o de apoio MOBIE. [Reis, 2010]\n\nAtrav\u00e9s desta rede, pode-se observar que o abastecimento de ve\u00edculos el\u00e9tricos surge aliado\n\u00e0s novas tecnologias, de forma a permitir ao utilizador diversas funcionalidades em tempo real.\n\n2.4.2 Essent\n\nA Essent \u00e9 uma empresa de energia na Holanda, que associou o m\u00e9todo de pagamento\npor SMS (Short Message Service) a um posto de abastecimento de carros el\u00e9tricos, atrav\u00e9s\nda Microincasso que \u00e9 uma empresa que aplica servi\u00e7os de pagamento por SMS (Figura2.6).\nEste servi\u00e7o funciona como uma gest\u00e3o de contas previamente criadas.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n12 2.Estado de Arte\n\nO cliente que efetue carregamentos nestes postos necessita de ter uma conta associada \u00e0\nempresa. Essa conta pode ser efetuada com um cart\u00e3o de cr\u00e9dito ou com conta Paypal.\n\nA sess\u00e3o de carregamento inicia-se com o envio de uma SMS e termina do mesmo modo.\nOu seja, o utilizador envia uma SMS para o n\u00famero dispon\u00edvel no posto de abastecimento,\no servi\u00e7o envia ao utilizador uma mensagem a perguntar o n\u00famero da conta associada, para\nproceder \u00e0 cobran\u00e7a de energia e a\u00ed come\u00e7a o carregamento do carro. Se o utilizador j\u00e1 tiver\nconta no Microincasso, essa pergunta n\u00e3o \u00e9 feita. Quando este termina, o utilizador recebe\numa SMS com a informa\u00e7\u00e3o de quanto foi debitado da sua conta pelo Microincasso.\n\nA Essent assegura que o meio de pagamento utilizado \u00e9 extremamente seguro, e a conta\nda Microincasso tem um limite m\u00e1ximo de pagamento de 50 euros .\n\nFigura 2.6: Funcionamento do Microincasso.[Microincasso]\n\n2.4.3 Wattstation\n\nA Wattstation \u00e9 uma rede de postos de abastecimento predominantemente na zona do\nnorte dos Estados Unidos da Am\u00e9rica. Esta rede difere das restantes por possuir equipa-\nmentos com m\u00e9todo de pagamento diferente. Neste caso, o pagamento \u00e9 efetuado atrav\u00e9s da\nidenti?ca\u00e7\u00e3o de um QR code(Quick Response) situado em cada posto de abastecimento. Um\nQR code consiste num tipo de c\u00f3digo de barras que armazena URL capazes de serem lidos\npor um smartphone (por exemplo), atrav\u00e9s da c\u00e2mara e com a aplica\u00e7\u00e3o apropriada.\n\nDesta forma, o utilizador apenas precisa de adquirir uma aplica\u00e7\u00e3o no seu telem\u00f3vel (Figura\n2.7), fazer a identi?ca\u00e7\u00e3o do c\u00f3digo QR que se situa no posto de abastecimento, associar uma\nconta Paypal \u00e0 aplica\u00e7\u00e3o e assim torna-se poss\u00edvel o carregamento. Nesta aplica\u00e7\u00e3o tamb\u00e9m\n\u00e9 poss\u00edvel obter todos os postos dispon\u00edveis da Wattstation atrav\u00e9s de um mapa interativo,\nperto do local onde o cliente se encontra, atrav\u00e9s da localiza\u00e7\u00e3o por GPS do seu smartphone.\n\nEste tipo de pagamento tem como restri\u00e7\u00e3o a utiliza\u00e7\u00e3o de um telem\u00f3vel inteligente ou\num tablet, uma vez que apenas esses equipamentos permitem a leitura de QR code.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n2.Estado de Arte 13\n\nFigura 2.7: Aplica\u00e7\u00e3o para Smartphone da Wattstation.[Wattstation]\n\n2.5 Projetos Relacionados\n\n2.5.1 \"Electric vehicle charging infrastructure in Poland\"\n[Benysek and Jarnut, 2012]\n\nEste projeto tem como objetivo desenvolver ou melhorar as infraestruturas de carregamento\nde ve\u00edculos el\u00e9tricos na Pol\u00f3nia. Foram considerados diversos fatores, tais como a localiza\u00e7\u00e3o,\nquantidade de postos de carregamento bem como os seus diferentes tipos. Este sistema de\ncarregamento possui um centralizado sistema de acesso, que \u00e9 baseado numa troca bidirecional\nde dados entre os diferentes postos individuais do sistema de carregamento el\u00e9trico. A troca\nde dados nesta estrutura \u00e9 feita via GPRS (General Packet Radio Services) e a coordena\u00e7\u00e3o\n\u00e9 feita pela base central, tal como est\u00e1 representado na Figura 2.8.\n\nFigura 2.8: Sistema de carregamento de VE na Pol\u00f3nia.[Benysek and Jarnut, 2012]\n\nNeste projeto foram desenvolvidos dois tipos de postos: os de cidade, instalados em espa-\n\u00e7os p\u00fablicos; e os de garagem, instalados em resid\u00eancias privadas.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n14 2.Estado de Arte\n\nA maior diferen\u00e7a entre estes dois tipos de postos consiste no n\u00famero de conex\u00f5es que\npodem ser feitas. Ou seja, nos postos de cidade podem ser carregados at\u00e9 tr\u00eas ve\u00edculos ao\nmesmo tempo, enquanto que nos postos de garagem apenas pode ser carregado um ve\u00edculo.\n\nNeste projeto tamb\u00e9m prop\u00f5e dois diferentes tipos de fontes de energia. Prop\u00f5em a uti-\nliza\u00e7\u00e3o apenas da rede el\u00e9trica (230V) nos meios mais citadinos, mas nos menos citadinos\nprop\u00f5e a aplica\u00e7\u00e3o de micro gera\u00e7\u00e3o de energia, tal como energias renov\u00e1veis. No entanto,\nquando as condi\u00e7\u00f5es naturais n\u00e3o permitem a gera\u00e7\u00e3o de energia necess\u00e1ria ao funcionamento\nnormal do posto de abastecimento, \u00e9 ligada a energia da rede. A base central sabe sempre\nque isso acontece, uma vez que recebe dados deste postos, tais como a humidade, a dire\u00e7\u00e3o do\nvento e a temperatura, que s\u00e3o automaticamente inseridos numa base de dados para posteri-\normente desenvolverem os gr\u00e1?cos da aplica\u00e7\u00e3o, onde tamb\u00e9m se pode visualizar os consumos\ndos postos em quest\u00e3o.\n\nEm resumo, o utilizador aciona o posto de carregamento atrav\u00e9s da aproxima\u00e7\u00e3o de um\ncart\u00e3o RFID, reportando os seus dados \u00e0 base central, que veri?ca se tem autoriza\u00e7\u00e3o para\naceder. Ap\u00f3s esta aceitar, o utilizador pode carregar o ve\u00edculo com a energia requerida. Ap\u00f3s\nterminar, o posto de abastecimento envia uma SMS para o utilizador a informa-lo que o\ncarregamento terminou. Ao longo do carregamento, o posto envia dados para a base central,\ntais como o consumo a ser feito, identi?ca\u00e7\u00e3o do consumidor, quando inicia e quando termina\no carregamento. Pode-se visualizar a arquitetura deste prot\u00f3tipo na Figura 2.9.\n\nFigura 2.9: Prot\u00f3tipo desenvolvido. Legenda: D- ecr\u00e3, CM - modulo de comunica\u00e7\u00e3o bidireci-\nonal, CPU- unidade de processamento central, AC- Modulo de controlo de acesso, P- prote\u00e7\u00e3o,\nM- medidor de energia, S- estado de leitura.\n[Benysek and Jarnut, 2012]\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nCap\u00edtulo 3\n\nSolu\u00e7\u00e3o Proposta\n\nNeste cap\u00edtulo ser\u00e1 realizada uma an\u00e1lise dos requisitos deste projeto. Assim sendo, ser\u00e1\napresentada uma perspetiva geral do sistema, quais as suas principais funcionalidades, assim\ncomo uma no\u00e7\u00e3o de quais as restri\u00e7\u00f5es que limitam o projeto. Por ?m, ser\u00e3o listados todos\nos requisitos que permitir\u00e3o a constru\u00e7\u00e3o do sistema pretendido com o m\u00ednimo de ambiguidade.\n\nComo culminar deste estudo apresentar-se-\u00e1 a solu\u00e7\u00e3o proposta para o sistema, onde se\nde?nir\u00e1 a sua arquitetura, que levar\u00e1 \u00e0 posterior implementa\u00e7\u00e3o.\n\n3.1 Perspetiva Geral\n\nNo cap\u00edtulo anterior foram analisados diversos dispositivos existentes no mercado. No en-\ntanto, apesar do seu elevado valor comercial,na maior parte existe uma constante repeti\u00e7\u00e3o\nno meio de pagamento existente. Ou seja, na sua maioria necessitam de uma pr\u00e9-ades\u00e3o \u00e0\nrede de abastecimento para aquisi\u00e7\u00e3o do cart\u00e3o, para ser poss\u00edvel a utiliza\u00e7\u00e3o dos respetivos\npostos ou necessitam de um smartphone para proceder \u00e0 compra da energia.\n\nComo foi referido anteriormente, o objetivo desta disserta\u00e7\u00e3o \u00e9 facilitar ou agilizar todo o\nprocesso de carregamento do ve\u00edculo el\u00e9trico, e aumentar a rede de abastecimento nacional.\nPor isso, uma boa solu\u00e7\u00e3o seria excluir qualquer uma que obrigasse o utilizador a esperar\npor um cart\u00e3o ou qualquer bem material, e que permitisse a utiliza\u00e7\u00e3o imediata do posto de\ncarregamento ap\u00f3s a aquisi\u00e7\u00e3o de um ve\u00edculo el\u00e9trico.\n\nDesta forma, prop\u00f5e-se a elabora\u00e7\u00e3o de um posto de abastecimento econ\u00f3mico do ponto\nde vista de implementa\u00e7\u00e3o e com compra de energia por SMS. Assim, permite a que qualquer\nutilizador que possua um telem\u00f3vel possa efetuar carregamentos nestes postos.\n\nA SMS apenas requer a utiliza\u00e7\u00e3o de um cart\u00e3o SIM (no telem\u00f3vel do cliente) e uma vez\nque, segundo um estudo da Marktest de 2012 em m\u00e9dia 92% de pessoas em Portugal possuem\ntelem\u00f3vel [Marktest], conclui-se assim que esta seja uma boa solu\u00e7\u00e3o para este tipo de servi\u00e7o,\nem que o utilizador n\u00e3o necessita de disponibilizar os seus dados pessoas ou de se registar\nna rede de gest\u00e3o de servi\u00e7os. Este \u00e9 um servi\u00e7o que pode ser efetuado imediatamente pelo\ncliente.\n\n15\n\n\n\n16 3.Solu\u00e7\u00e3o Proposta\n\n3.2 Funcionalidades do sistema\n\nAs capacidades presentes num sistema avaliam-se pelas fun\u00e7\u00f5es que executam. Este resulta\nnum melhoramento do atual sistema de carregamento para ve\u00edculos el\u00e9tricos, tendo como\nprincipal fun\u00e7\u00e3o medir a energia consumida e efetuar a sua cobran\u00e7a da forma mais pr\u00e1tica\nposs\u00edvel.\n\nDesta forma, as principais funcionalidades do sistema s\u00e3o:\n\n\u2022 Medi\u00e7\u00e3o dos consumos de energia ativa pedidos;\n\n\u2022 Garantia de integridade dos dados adquiridos;\n\n\u2022 Cobran\u00e7a da energia requisitada de forma aut\u00f3noma e com saldo positivo no cart\u00e3o SIM;\n\n\u2022 Permiss\u00e3o de utiliza\u00e7\u00e3o de energia apenas quando o cliente possui um saldo positivo;\n\n\u2022 Disponibiliza\u00e7\u00e3o dos dados relativos aos clientes do seu consumo em kwh;\n\n\u2022 Utiliza\u00e7\u00e3o da rede GSM para a troca de mensagens.\n\n3.3 Restri\u00e7\u00f5es\n\nTrata-se de um sistema destinado para aplica\u00e7\u00e3o em espa\u00e7os p\u00fablicos com utiliza\u00e7\u00e3o da\nrede el\u00e9trica normal, de forma a aumentar a quantidade de postos de abastecimento em Por-\ntugal. Por isso, o sistema est\u00e1 sujeito \u00e0s seguintes restri\u00e7\u00f5es:\n\n\u2022 O sistema deve ser de baixo custo;\n\n\u2022 Baixo consumo;\n\n\u2022 Alimenta\u00e7\u00e3o de todo o circuito de medi\u00e7\u00e3o atrav\u00e9s da rede;\n\n\u2022 Prot\u00f3tipo desenvolvido para efetuar medi\u00e7\u00f5es de energia em circuitos de corrente alter-\nnada, cuja tens\u00e3o nominal \u00e9 230V e frequ\u00eancia nominal \u00e9 50Hz;\n\n\u2022 Prot\u00f3tipo ser\u00e1 desenvolvido utilizando as redes GSM dispon\u00edveis em Portugal;\n\n\u2022 Robustez e ?abilidade do sistema;\n\n\u2022 Dimens\u00f5es reduzidas para o sistema.\n\n3.4 Apresenta\u00e7\u00e3o da solu\u00e7\u00e3o\n\nComo foi referido anteriormente, prop\u00f5e-se um posto de abastecimento com pagamento\natrav\u00e9s de uma mensagem de texto proveniente de um telem\u00f3vel. A mensagem de texto \u00e9\nenviada para o n\u00famero contido no posto de abastecimento, que cobra o valor correspondente\nda energia gasta do cart\u00e3o de telem\u00f3vel do cliente. Usando pagamento por SMS, os utiliza-\ndores conseguem efetuar com seguran\u00e7a e rapidez o pagamento do servi\u00e7o, sem ser necess\u00e1rio\nque a empresa do posto de abastecimento tivesse acesso ao cart\u00e3o de cr\u00e9dito ou a um cart\u00e3o\npr\u00e9 pago, ou mesmo a uma conta banc\u00e1ria. Todo o processo seria con?dencial ou an\u00f3nimo,\n?cando o cliente seguro quanto \u00e0 partilha de dados pessoais. Para o investidor do produto,\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n3.Solu\u00e7\u00e3o Proposta 17\n\nter venda de energia por SMS seria uma mais valia, n\u00e3o teria a necessidade de veri?car as\nidentidades destes e n\u00e3o teria problema em enviar cart\u00f5es para todos os clientes associados.\nNo momento, a maior parte das pessoas possui um telem\u00f3vel com envio de SMS, logo seria\num bom m\u00e9todo de pagamento para este tipo de servi\u00e7o.\n\nComo se observou, na generalidade dos equipamentos, existe para este o apoio de p\u00e1gina\nweb, com o respetivo consumo do ve\u00edculo a ser abastecido. Por isso, torna-se necess\u00e1rio que\neste modelo a desenvolver possua um apoio do mesmo g\u00e9nero, para que seja competitivo no\nmercado. Pode-se observar na Figura 3.1 a solu\u00e7\u00e3o aqui referida. Esta tem como objetivo\ndesenvolver um posto de abastecimento com capacidade para receber e enviar v\u00e1rias SMS\npara o cliente, iniciar e controlar o carregamento, bem como enviar os dados de consumo para\numa base de dados para serem utilizados e manipulados por uma p\u00e1gina Web tamb\u00e9m aqui\ndesenvolvida.\n\nEsta p\u00e1gina pode assim ser consultada por qualquer dispositivo com acesso \u00e0 Internet,\ntanto pelo cliente como pelo administrador do posto.\n\nINTERNET\n\nP\u00e1gina Web\nConsumos de cliente\n\nFigura 3.1: Diagrama da solu\u00e7\u00e3o proposta.\n\nEste prot\u00f3tipo poder\u00e1 ser desenvolvido em maior escala, possuindo a multiplica\u00e7\u00e3o do\nprot\u00f3tipo, mas com n\u00fameros diferentes no posto.\n\nNa Figura 3.2, \u00e9 poss\u00edvel observar um ?uxograma do funcionamento geral do prot\u00f3tipo.\nCom foi referido anteriormente, o processo de carregamento \u00e9 desencadeado pelo envio da\nSMS pelo cliente para o n\u00famero do posto de abastecimento.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n18 3.Solu\u00e7\u00e3o Proposta\n\nIn\u00edcio\n\nEspera pelo envio \nda mensagem\npelo utilizador\n\nMensagem \nrecebida?\n\nN\u00e3o\n\nInicio do \nCarregamento \n\nEnvio de mensagem ao \ncliente de Inicio de \n\ncarregamento\n\nFim de \ncarregamento. \n\nEnvio de mensagem ao \ncliente de Fim de \n\ncarregamento\n\nEnvio de dados para \na base de dados\n\nFim de processo\n\nElabora\u00e7\u00e3o de \ngr\u00e1ficos na p\u00e1gina \n\nWeb\n\nSim\n\nEscrita Correta?\n\nSim\n\nN\u00e3o\n\nEnvio de mensagem \nao cliente que a \nescrita n\u00e3o est\u00e1 \n\ncorreta\n\nFigura 3.2: Fluxograma da solu\u00e7\u00e3o proposta.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n3.Solu\u00e7\u00e3o Proposta 19\n\nNo posto de abastecimento, \u00e9 lida a mensagem, que deve ser enviada pelo cliente conforme\nas instru\u00e7\u00f5es no posto (ordem de mensagem escrita). Ap\u00f3s veri?ca\u00e7\u00e3o da mensagem e a\ncon?rma\u00e7\u00e3o de saldo positivo no cart\u00e3o SIM do cliente, \u00e9 iniciado o carregamento do veiculo\nel\u00e9trico. O inicio e o ?m de carregamento \u00e9 noti?cado ao cliente atrav\u00e9s de uma SMS. Aquando\ndo t\u00e9rmino do carregamento, s\u00e3o enviados os dados do telem\u00f3vel e do consumo para a p\u00e1gina\nWeb, que desenvolver\u00e1 os gr\u00e1?cos dos consumos do cliente.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n20 3.Solu\u00e7\u00e3o Proposta\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nCap\u00edtulo 4\n\nImplementa\u00e7\u00e3o do Posto de\n\nAbastecimento\n\n4.1 Arquitetura do Sistema\n\nDe acordo com a solu\u00e7\u00e3o proposta, o equipamento a ser desenvolvido ter\u00e1 de possuir tr\u00eas\nm\u00f3dulos essenciais: o m\u00f3dulo de controlo da passagem da corrente el\u00e9trica (M\u00f3dulo 1), o\nm\u00f3dulo da medi\u00e7\u00e3o da energia (M\u00f3dulo 2) e o m\u00f3dulo do envio e rece\u00e7\u00e3o de mensagens e\ndados para a p\u00e1gina web (M\u00f3dulo 3).\n\nTodos os componentes a ser analisados t\u00eam em conta a exist\u00eancia destes no laborat\u00f3rio\nonde se concretiza a elabora\u00e7\u00e3o deste projeto.\n\n4.1.1 M\u00f3dulo 1\n\nPara este m\u00f3dulo surge a necessidade de procurar a melhor solu\u00e7\u00e3o para o controlo da\npassagem da corrente el\u00e9trica, uma vez que apenas se pretende que passe energia quando \u00e9\naprovado o carregamento do ve\u00edculo. Para isso, existe por exemplo o rel\u00e9 mec\u00e2nico e o triac.\n\nEm compara\u00e7\u00e3o entre os dois, \u00e9 poss\u00edvel veri?car algumas vantagens da utiliza\u00e7\u00e3o do triac\n[IXYS]:\n\n\u2022 \u00c9 normalmente mais pequeno que o rel\u00e9;\n\n\u2022 Tem mais durabilidade uma vez que n\u00e3o tem partes em contacto que se degradam;\n\n\u2022 Necessita de pouca energia para funcionar;\n\n\u2022 N\u00e3o tem intera\u00e7\u00e3o magn\u00e9tica em compara\u00e7\u00e3o com o rel\u00e9;\n\n\u2022 N\u00e3o gera ru\u00eddo;\n\n\u2022 \u00c9 mais imune aos choques f\u00edsicos e \u00e0s vibra\u00e7\u00f5es.\n\n\u2022 O rel\u00e9 n\u00e3o funciona corretamente com repetibilidades ou comuta\u00e7\u00f5es num intervalo\nreduzido de tempo;\n\n21\n\n\n\n22 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\nDesta forma, \u00e9 f\u00e1cil concluir qual a melhor solu\u00e7\u00e3o para o prot\u00f3tipo em quest\u00e3o. Uma\nvez que o triac tem um menor desgaste e funciona melhor para repeti\u00e7\u00f5es consecutivas, \u00e9 sem\nd\u00favida uma boa solu\u00e7\u00e3o para um posto de abastecimento.\n\n(a) Triac BT136 [NXP] (b) Rel\u00e9 da Omnron\n[Omron]\n\nFigura 4.1: Propostas para o M\u00f3dulo 1.\n\n4.1.2 M\u00f3dulo 2\n\nNeste m\u00f3dulo \u00e9 necess\u00e1rio encontrar uma solu\u00e7\u00e3o para o tratamento de dados para o c\u00e1lculo\nda energia. Por esse motivo, tem-se dois tipos de equipamentos que podem ser considerados\nna implementa\u00e7\u00e3o num posto de abastecimento: microcontroladores e PLC (Programmable\nlogic controller). As duas op\u00e7\u00f5es podem ser observadas na Figura 4.2.\n\nOs microcontroladores s\u00e3o bastante semelhantes aos aut\u00f3matos program\u00e1veis (PLC). Os\ndois possuem mem\u00f3ria interna para armazenarem os seus programas, ambos podem executar\nautonomamente esses programas, estes s\u00e3o escritos em computador e, depois de compilados,\ns\u00e3o transferidos para as suas mem\u00f3rias internas, ambos podem ter entradas e sa\u00eddas el\u00e9tricas:\ndigitais e anal\u00f3gicas, e os dois podem ter interfaces de comunica\u00e7\u00e3o do tipo Rs232, Rs485,\nEthernet,etc.\n\nNo entanto tamb\u00e9m existem diferen\u00e7as, o PLC foi concebido para funcionar em ambientes\nindustriais e possui por isso prote\u00e7\u00f5es mec\u00e2nicas e el\u00e9tricas que os micro-controladores n\u00e3o\npossuem. Contudo, os micro-controladores t\u00eam a seu favor um pre\u00e7o muito reduzido, uma\nreduzida dimens\u00e3o e um baixo consumo el\u00e9trico, enquanto que o PLC \u00e9 exatamente o oposto.\n\nPor esse motivo, conclui-se que o equipamento adequado para o tratamento de dados neste\nm\u00f3dulo seria o micro-controlador, uma vez que se pretende desenvolver um equipamento de\nbaixo custo de implementa\u00e7\u00e3o e de reduzidas dimens\u00f5es.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 23\n\n(a) Microcontroladores da Micro-\nchip [Microchip]\n\n(b) PLC da Fatek [FATEK]\n\nFigura 4.2: Propostas para o M\u00f3dulo 2.\n\n4.1.3 M\u00f3dulo 3\n\nPor \u00faltimo, \u00e9 necess\u00e1rio encontrar a melhor solu\u00e7\u00e3o para receber e enviar mensagens para\no telem\u00f3vel do cliente, bem como enviar os dados para a p\u00e1gina web. Para isso, a melhor so-\nlu\u00e7\u00e3o seria a implementa\u00e7\u00e3o de um sistema que pudesse desta forma realizar as duas opera\u00e7\u00f5es.\n\nUma vez que o objetivo deste projeto \u00e9 a implementa\u00e7\u00e3o de postos de abastecimento em\nqualquer parte do pa\u00eds, deve-se assim excluir qualquer hip\u00f3tese que inclua liga\u00e7\u00e3o \u00e0 Internet\npor cabos, bem como a comunica\u00e7\u00e3o wireless para um router pr\u00f3ximo. Assim, encontra-se\numa boa solu\u00e7\u00e3o a utiliza\u00e7\u00e3o da comunica\u00e7\u00e3o GPRS/GSM. \u00c9 uma tecnologia que utiliza o\ncart\u00e3o SIM do telem\u00f3vel, aumentando as taxas de transfer\u00eancia de dados nas redes GSM exis-\ntentes. O GPRS combina o acesso m\u00f3vel a servi\u00e7os baseados em Protocolo IP, que utilizam a\ntransmiss\u00e3o de pacotes de dados que faz uso altamente e?ciente do espectro e permite alta velo-\ncidade de dados. Fornece aos utilizadores maior largura de banda, tornando poss\u00edvel e rent\u00e1vel\npermanecer constantemente ligado, bem como enviar e receber dados de texto, gr\u00e1?cos e v\u00eddeo.\n\nPara este tipo de comunica\u00e7\u00e3o, existe por exemplo a placa PIC-GSM produzida pela\nOlimex (Figura4.3). Esta permite ter numa s\u00f3 placa um micro controlador e um m\u00f3dulo\nGSM/GPRS. De seguida pode-se ver as suas principais especi?ca\u00e7\u00f5es:\n\n\u2022 M\u00f3dulo GSM/GPRS de 900/1800/1900Mhz;\n\n\u2022 Bateria de Li-ion;\n\n\u2022 Microcontrolador PIC18f97J60;\n\n\u2022 Conector RS232;\n\n\u2022 Cristal de 20Mhz;\n\n\u2022 Dois relays de 10A/250VAC;\n\n\u2022 Duas entradas digitais;\n\n\u2022 Entradas Anal\u00f3gicas.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n24 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\nFigura 4.3: Proposta para o M\u00f3dulo 3\n\nDesta forma, esta placa torna-se um bom sistema para implementar neste projeto, uma\nvez que na mesma placa s\u00e3o concentrados dois m\u00f3dulos: M\u00f3dulo 2 e M\u00f3dulo 3, aproveitando\nespa\u00e7o no prot\u00f3tipo.\n\n4.1.4 Conclus\u00e3o\n\nAp\u00f3s todos os equipamentos observados e das conclus\u00f5es obtidas em cada m\u00f3dulo apre-\nsentado, pode-se concluir que ent\u00e3o se obt\u00e9m no geral tr\u00eas m\u00f3dulos essenciais: M\u00f3dulo 1\nconstitu\u00eddo pelo Triac para o controlo da passagem da energia el\u00e9trica; M\u00f3dulo 2 constitu\u00eddo\npelo microcontrolador para medi\u00e7\u00e3o da energia e controlo do seguinte m\u00f3dulo; e M\u00f3dulo 3\nconstitu\u00eddo pelo Modem PIC-GSM da Olimex, para o envio da informa\u00e7\u00e3o tanto para o tele-\nm\u00f3vel como para a Internet.\n\nNo esquema da Figura 4.4 \u00e9 poss\u00edvel visualizar os principais componentes pensados para\neste equipamento. Como foi referido anteriormente, o Modem PIC-GSM j\u00e1 cont\u00e9m um mi-\ncrocontrolador integrado, torna-se ent\u00e3o oportuno a sua utiliza\u00e7\u00e3o para o M\u00f3dulo 2, uma vez\nque seria desnecess\u00e1rio a utiliza\u00e7\u00e3o de outro microcontrolador para o efeito, permitindo assim\numa redu\u00e7\u00e3o no espa\u00e7o do produto a desenvolver.\n\nDessa forma, faz-se a medi\u00e7\u00e3o da energia e a comunica\u00e7\u00e3o por GSM/GPRS atrav\u00e9s no\nmesmo microcontrolador. Pode-se tamb\u00e9m observar no esquema da Figura 4.4, que a comu-\nnica\u00e7\u00e3o entre o microcontrolador e o modem GSM/GPRS \u00e9 efetuada atrav\u00e9s de RS232, que\npor sua vez comunica por TCP/IP para o envio de dados para a p\u00e1gina Web e para a base de\ndados, e por SMS(Comandos AT) para o telem\u00f3vel.\n\nEsta solu\u00e7\u00e3o permite, como foi referido anteriormente, ao utilizador consultar informa\u00e7\u00f5es\nrelativo \u00e0s a\u00e7\u00f5es realizadas nos postos de abastecimento, numa p\u00e1gina web dispon\u00edvel em\nqualquer equipamento com acesso \u00e0 Internet.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 25\n\nInternet\n\nBase de dados\n\nP\u00e1gina WEB\n\n           Modem GSM/GPRS\n\nGSM/SMS\n\nTCP/IP\nMicrocontroladorRS232\n\nTens\u00e3o\n\nCorrente\n\nL N\n\nM\u00f3dulo 3\nM\u00f3dulo 2\n\nM\u00f3dulo 1\n\nV\n\nA\n\nTriac\n\nM\u00f3dulo Monitoriza\u00e7\u00e3o\n\nFigura 4.4: Diagrama dos m\u00f3dulos existentes.\n\n4.2 M\u00f3dulo 1- Controlo da passagem da corrente el\u00e9trica\n\nPara que o carregamento possa ser efetuado, tem de existir uma ordem por parte do mi-\ncrocontrolador, para que haja passagem ou corte de energia para o ve\u00edculo. Para isso, foi\ndesenvolvido um pequeno m\u00f3dulo representado na Figura 4.5, que permite a passagem de\neletricidade para o equipamento a ser carregado. Essa instru\u00e7\u00e3o \u00e9 feita por parte do micro-\ncontrolador, atrav\u00e9s de uma sa\u00edda ativa. Como foi referido anteriormente, para a ?nalidade\nutilizou-se um esquema baseado num TRIAC.\n\nO microcontrolador possui apenas uma alimenta\u00e7\u00e3o de 3,3V DC, portanto este tem que\nse manter isolado do TRIAC, uma vez que este tem tens\u00f5es na ordem dos 230V AC. Para\nesta ?nalidade foi utilizado um optoacopulador MOC3021[Source and Driver, 1995], que as-\nsegura que, mesmo em caso de sobrecarga de corrente el\u00e9trica, o resto dos componentes n\u00e3o\n?quem dani?cados. Para fornecer a corrente necess\u00e1ria ao acionamento do MOC3021, \u00e9 usado\num trans\u00edstor BC547C[Semiconductors et al.] cuja base \u00e9 controlada pelo microcontrolador.\nDesta forma garante-se que chega corrente su?ciente ao optoacopulador.\n\nAssim sendo, o microcontrolador liga-se \u00e0 base do trans\u00edstor, fazendo chegar corrente ao\nd\u00edodo interno do optoacopulador. Por sua vez, este permite a passagem de energia para a\nGate do TRIAC, o qual fecha o circuito, fazendo com que a corrente chegue ao veiculo a ser\ncarregado. O TRIAC utilizado \u00e9 o BT136[NXP]. Pode ser visualizado o esquema el\u00e9trico\ndeste m\u00f3dulo no Ap\u00eandice B.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n26 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\nFigura 4.5: M\u00f3dulo 1 - Controlo da passagem da corrente el\u00e9trica.\n\n4.3 M\u00f3dulo 2 - Medi\u00e7\u00e3o da Energia\n\nComo foi referido anteriormente, neste m\u00f3dulo \u00e9 abordado a medi\u00e7\u00e3o da energia, bem\ncomo o tratamento desses dados pelo microcontrolador. O microcontrolador utilizado, como\nreferido, \u00e9 aquele que se encontra na placa PIC-GSM utilizada para o efeito.\n\nInicialmente, \u00e9 feita a abordagem dos componentes utilizados para a medi\u00e7\u00e3o da corrente\ne da tens\u00e3o, para o c\u00e1lculo da energia utilizada. Esse tratamento de dados das medi\u00e7\u00f5es \u00e9\nent\u00e3o feita \u00e0 posteriori pelo microcontrolador.\n\n4.3.1 Medi\u00e7\u00e3o da Corrente\n\nPara a medi\u00e7\u00e3o da corrente, optou-se por um transdutor de corrente. Estes funcionam\ncom base no princ\u00edpio do Efeito de Hall (Figura 4.6). Na pr\u00e1tica, a passagem de corrente num\ncondutor induz um campo magn\u00e9tico que \u00e9 captado por um anel ferromagn\u00e9tico posicionado\nem seu redor. Este mesmo anel apresenta uma interrup\u00e7\u00e3o em forma de fenda, na qual \u00e9\nevidente a passagem do campo magn\u00e9tico induzido pelo condutor. Nesta mesma fenda \u00e9\nent\u00e3o colocada uma barra de Hall, que \u00e9 sujeita ao efeito do campo referido. Como resultado,\nas suas cargas positivas e negativas posicionam-se em extremidades opostas, criando uma\ndiferen\u00e7a de potencial. [Farinha, 2009]\n\nFigura 4.6: Efeito de Hall.[Electronics, 2014]\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 27\n\nPara ser poss\u00edvel escolher o melhor transdutor de corrente para este prot\u00f3tipo, procedeu-\nse \u00e0 pesquisa de transdutores de corrente. Ap\u00f3s a procura e uma an\u00e1lise de mercado, bem\ncomo no laborat\u00f3rio, obteve-se duas solu\u00e7\u00f5es: o CSLA1CD da Honeywell(Figura 4.7(b)) e o\nLTS15NP da LEM(Figura 4.7(a)). Estes sensores s\u00e3o de baixo custo monet\u00e1rio, o fazendo a\nque o produto ?nal possa ser de baixo custo, que \u00e9 um dos objetivos deste prot\u00f3tipo a ser\ndesenvolvido.\n\n(a) Transdutor LTS15NP\n[LEM, 2014a]\n\n(b) Transdutor CSLA1CD\n[Honeywell, 2014]\n\nFigura 4.7: Compara\u00e7\u00e3o de transdutores\n\nNa Tabela 4.1, pode-se observar algumas caracter\u00edsticas de ambos os transdutores.\n\nTabela 4.1: Compara\u00e7\u00e3o entre transdutores de corrente\n\nCSLA1CD LTS15NP\n\nMedi\u00e7\u00f5es de 0 a 57A Medi\u00e7\u00f5es de 0 a 48A\nSensibilidade de 49,6mV/A Sensibilidade de 41,6mV/A\n\nMedi\u00e7\u00f5es de corrente AC ou DC\nLinearidade e precis\u00e3o\n\nCapacidade de sobrecarga de corrente\n\nOs dois transdutores s\u00e3o muito semelhantes a n\u00edvel de caracter\u00edsticas, diferenciando-se\nessencialmente no n\u00edvel da medi\u00e7\u00e3o da corrente, fonte de alimenta\u00e7\u00e3o e sensibilidade. Desta\nforma, optou-se pelo sensor CSLA1CD por ter uma sensibilidade superior. Tamb\u00e9m se teve\nem considera\u00e7\u00e3o as voltas que se podem dar em torno no sensor, uma vez que a sensibilidade\ndas suas medi\u00e7\u00f5es aumenta consoante o n\u00famero de voltas.\n\nPara que o sinal proveniente do transdutor de corrente fosse ampli?cado e ?ltrado, foi\nutilizado um ampli?cador de instrumenta\u00e7\u00e3o da Analog Devices, o AD623. Este ampli?cador\n\u00e9 de baixo consumo energ\u00e9tico, f\u00e1cil de utilizar, possui uma elevada imped\u00e2ncia de entrada,\nbaixa imped\u00e2ncia de sa\u00edda e permite ganhos de 1 a 1000. Este dispositivo tem tamb\u00e9m uma\ncaracter\u00edstica importante para esta implementa\u00e7\u00e3o, tem uma boa rela\u00e7\u00e3o de rejei\u00e7\u00e3o em modo\ncomum (CMRR - Common Mode Rejection). Esta caracter\u00edstica \u00e9 importante uma vez que\nos sinais medidos s\u00e3o de baixas tens\u00f5es e o ru\u00eddo pode afetar os resultados.[Analog, 2014].\n\nO esquema representativo desta implementa\u00e7\u00e3o pode ser observado na Figura 4.8. Relati-\nvamente ao ampli?cador foi necess\u00e1rio proceder ao dimensionamento de alguns componentes,\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n28 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\nna sua maioria resist\u00eancias, para que as tens\u00f5es \u00e0 sa\u00edda estivessem compreendidas entre os 0 e\nos 5V. Como o sinal de sa\u00edda do transdutor varia de forma sinusoidal, houve a necessidade de\ncolocar a linha dos 0V em torno dos 2,5V. Para isso introduziu-se um divisor resistivo entre o\nGND e os 5V.\n\nIP+4\n\nIP-5\nVIOUT 3\n\nVCC 1\n\nGND 2\n\nU1\n\nCSLA1CD\n\n3\n\n2\n6\n\n4\n7\n\n1 5\n8\n\nU2\n\nAD623\n\nR1\n10k\n\nR2\n10k\n\nR3\n10k\n\n5V\n\n5V\n\nR4\n10k\n\nR5\n10k\n\nL\n\nL\n\nR6\n4.7k\n\nC1\n0.68uF\n\nEXT2-10 (AN6)\n\nFigura 4.8: Circuito representativo do tratamento dos sinais da corrente\n\nO dimensionamento das resist\u00eancias para o divisor resistivo foi efetuado de acordo com a\nequa\u00e7\u00e3o 4.1, em que V5=2,5V e Vcc=5V, ou seja R2=R3=10Kohms, como mostra a Figura 4.8.\n\nV 5 = (\nR3\n\nR3 + R2\n)V cc (4.1)\n\nSendo assim, com a utiliza\u00e7\u00e3o desses valores, conseguiu-se que a sa\u00edda desse divisor resis-\ntivo ?casse em 2,5V. Este Vout foi conectado ao pino 5 do AD623, denominado por Reference\nTerminal, que tem como fun\u00e7\u00e3o de?nir a tens\u00e3o de sa\u00edda correspondente nula a fase, quando\nn\u00e3o h\u00e1 corrente.\n\nPara que o sinal fosse ampli?cado, de forma a ter uma melhor leitura das oscila\u00e7\u00f5es por\nparte da ADC, aplicou-se um ganho de 11.\n\nG =\n100k\n\nR1\n+ 1 (4.2)\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 29\n\nPor ?m, foi implementado um ?ltro passa-baixo, com o principal objetivo de eliminar\nalgum ru\u00eddo existente no sinal. Para isso foi considerada uma frequ\u00eancia de corte de 50Hz,\nresultando numa resist\u00eancia (R6) de 4,7kohms e um condensador(C1) de 0,68uF.\n\nfc =\n1\n\n2.?.R6.C1\n(4.3)\n\nO fabricante do sensor de Hall implementado, indica na sua folha de caracter\u00edsticas, qual a\ntens\u00e3o que o sensor apresenta na sua sa\u00edda em fun\u00e7\u00e3o da corrente que o percorre. No entanto\nestes valores foram obtidos enquanto o sensor de Hall era alimentado a 12V DC, com o obje-\ntivo de reduzir o n\u00famero de fontes de alimenta\u00e7\u00e3o e poupar recursos, o sensor foi alimentado\na 5V DC. Para aumentar a sensibilidade do sensor, enrolou-se o ?o em volta do sensor, com\n4 voltas. Com esta alimenta\u00e7\u00e3o \u00e9 necess\u00e1rio calibrar o sensor. Essa calibra\u00e7\u00e3o foi elaborada\nmedindo com o mult\u00edmetro em modo amper\u00edmetro, em fase, e medindo ao mesmo tempo a\ntens\u00e3o na entrada anal\u00f3gica do microcontrolador, em debug, corrigindo os seus valores. Essa\ncalibra\u00e7\u00e3o vai ser explicada mais a frente neste cap\u00edtulo.\n\n4.3.2 Medi\u00e7\u00e3o da Tens\u00e3o\n\nDe seguida \u00e9 feita a descri\u00e7\u00e3o de como foi feita a leitura da tens\u00e3o que passa para o equipa-\nmento. Uma vez que o equipamento \u00e9 alimentado a uma corrente alternada com uma tens\u00e3o\ne?caz de cerca de 230V, torna-se necess\u00e1rio converte-la para valores consideravelmente mais\nbaixos.\n\nPara isso, \u00e0 semelhan\u00e7a da medi\u00e7\u00e3o da corrente, foi utilizado um transdutor de tens\u00e3o por\nefeito de hall. O transdutor utilizado para o efeito foi o LV25-P (Figura 4.9) fabricado pela\nLEM. Na tabela s\u00e3o apresentadas as suas caracter\u00edsticas.\n\nTabela 4.2: Caracter\u00edsticas do transdutor LV25-P\n\nLV25-P\n\nExcelente precis\u00e3o\nMuito boa linearidade\n\nR\u00e1pido tempo de resposta\nGrande imunidade a interfer\u00eancias exteriores\n\nEste sensor suporta tens\u00f5es de entrada entre os 10 e os 500V, e possui isolamento galv\u00e2nico\nentre o circuito prim\u00e1rio e o secund\u00e1rio, o que se adequa para este projeto. Como este sensor\nfoi alimentado a 12V, foi necess\u00e1rio dimensionar a resist\u00eancia de medida, R1, de modo a que\na corrente no prim\u00e1rio n\u00e3o ultrapasse os 10mA (Figura 4.9(a)). Na documenta\u00e7\u00e3o do sensor\nsugerem-se valores da resist\u00eancia de sa\u00edda, Rm, entre os 30 e os 190 ?, e depois de alguns\ntestes efetuados chegou-se a um valor para a resist\u00eancia de sa\u00edda , Rm, na ordem dos 100?.\nNo que diz respeito \u00e0 resist\u00eancia do prim\u00e1rio, foram utilizadas as informa\u00e7\u00f5es presentes na\ndocumenta\u00e7\u00e3o do transdutor, onde sugerem que para uma corrente m\u00e1xima de 10mA a resis-\nt\u00eancia do prim\u00e1rio R1 dever\u00e1 ser igual a 25k?/2.5W. No entanto, depois de efetuadas algumas\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n30 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\n(a) Esquema da liga\u00e7\u00e3o (b) Transdutor\n\nFigura 4.9: Transdutor de tens\u00e3o LV25-P da LEM [LEM, 2014b]\n\nmedi\u00e7\u00f5es, concluiu-se que para a resist\u00eancia a rela\u00e7\u00e3o 27k?/2.5W seria mais adequada.\n\nNa ?gura 4.10, pode ser analisado o circuito elaborado para o tratamento de dados do\ntransdutor de tens\u00e3o. \u00c0 semelhan\u00e7a do transdutor de corrente, neste tamb\u00e9m foi imple-\nmentado um ampli?cador operacional para o tratamento de sinal. Recorreu-se a um divisor\nresistivo com V5 conectado ao pino 5 (Reference Terminal) do AD623 para que a linha dos\n0V ?casse aproximadamente nos 2.5V, pois o sinal recebido \u00e9 de forma sinusoidal.\n\nPara os c\u00e1lculos dessas resist\u00eancias utilizou-se a equa\u00e7\u00e3o 4.4, em que com um Vcc de 5V,\npode-se obter para as resist\u00eancias valores iguais, ou seja R2=R3=10k?.\n\nV 5 = (\nR2\n\nR3 + R2\n)V cc (4.4)\n\nPara este ampli?cador n\u00e3o foi necess\u00e1rio colocar qualquer tipo de resist\u00eancia de ganho\n(Rg). E como \u00e9 referido na documenta\u00e7\u00e3o do AD623, G=1 quando n\u00e3o h\u00e1 utiliza\u00e7\u00e3o de Rg.\n\nPara a redu\u00e7\u00e3o de ru\u00eddo existente nos sinais de tens\u00e3o, foi instalado um ?ltro passa-baixo\ncom uma frequ\u00eancia de corte de 50Hz, calculada a partir da equa\u00e7\u00e3o 4.5.\n\nfc =\n1\n\n2.?.R6.C1\n(4.5)\n\nForam ainda utilizados dois dispositivos, ICL7660A e TL7660, para converter tens\u00e3o po-\nsitiva para negativa, 12V e 5V respetivamente.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 31\n\n3\n\n2\n6\n\n4\n7\n\n1 5\n8\n\nU1\n\nAD623\n\nR1\n10k\n\nR2\n10k R3 10k\n\nR4\n10k\n\n5V\n\nR5\n10k\n\nC1\n\n10uF\n\nC2\n10uF\n\n5V\n\nEXT-25 (AN2)\n\nCAP+2\n\nCAP-4\n\nGND 3\n\nV+ 8\n\nVOUT 5LV6\nOSC7\n\nU4\n\nICL7660A\n\nCAP+2\n\nCAP-4\n\nGND 3\n\nV+ 8\n\nVOUT 5LV6\nOSC7\n\nU2\n\nTL7660\n\nC3\n1uF\n\n12V\n\nR6\n10k\n\nC4\n1uF\n\n+HT4\n\n-HT5 - 2\nOut 3\n\n+ 1\n\n12V\n\nLV25-P\n\nR7\n27k\n\nRM\n100 C5\n\n0.33uF\n\nFigura 4.10: Circuito representativo do tratamento dos sinais da corrente\n\n4.3.3 Microcontrolador\n\nO microcontrolador que se encontra na placa PIC-GSM \u00e9 o Pic18F97J60 , que tem as\nespeci?ca\u00e7\u00f5es necess\u00e1rias ao projeto,uma vez que \u00e9 um componente bastante completo, tendo\ncomo principais caracter\u00edsticas[Technology, 2006]:\n\n\u2022 16 Canais conversores Anal\u00f3gico-Digitais (A/D);\n\n\u2022 Dois m\u00f3dulos UART (RS232);\n\n\u2022 5 M\u00f3dulos Timer (Timer 0 a Timer4);\n\n\u2022 Duas portas com capacidade de suportar SPI e I2C com modo Master e Slave.\n\nNo entanto, como o microcontrolador j\u00e1 se encontra montado na placa, apenas se pode\nutilizar os pinos dispon\u00edveis para o efeito desejado. Segundo o documento de apoio ao PIC\nGSM [OLIMEX, 2008], o m\u00f3dulo GSM encontra-se conectado na segunda UART do micro-\ncontrolador, sendo esta a utilizada para a comunica\u00e7\u00e3o. E para fazer as leituras da medi\u00e7\u00e3o\nda energia, s\u00e3o assim utilizadas as entradas anal\u00f3gicas dispon\u00edveis na placa para o microcon-\ntrolador.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n32 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\nFigura 4.11: Esquema geral do microcontrolador\n\nComo foi abordado anteriormente, as entradas utilizadas para o efeito foram representadas\nnos esquemas el\u00e9tricos.Ou seja, a leitura da tens\u00e3o e da corrente s\u00e3o efetuadas atrav\u00e9s das\nentradas anal\u00f3gicas do microcontrolador (ADC). A tens\u00e3o pela AN2 (Ext1-25) e a corrente\npela AN6 (Ext2-10).\n\nAp\u00f3s a elabora\u00e7\u00e3o dos circuitos para a rece\u00e7\u00e3o de dados da corrente e da tens\u00e3o, \u00e9 necess\u00e1-\nrio tratar os dados recebidos, convert\u00ea-los para valores reais e calcular as grandezas necess\u00e1rias.\nPara isso, de seguida \u00e9 feita uma ligeira abordagem sobre as grandezas envolvidas, bem como\n\u00e9 feito o tratamento dos dados.\n\nGrandezas associadas\n\nA pot\u00eancia de um sinal, qualquer que ele seja, \u00e9 uma grandeza que determina a quantidade\nde energia transferida por uma fonte por unidade de tempo. No caso da pot\u00eancia el\u00e9trica ins-\ntant\u00e2nea (Pinst), o seu valor \u00e9 calculado com base no produto das duas grandezas envolvidas:\ntens\u00e3o el\u00e9trica(v(t)) e corrente el\u00e9trica(i(t)). No caso particular do sistema el\u00e9trico de energia,\nos dispositivos s\u00e3o alimentados por uma corrente alternada. Assim, a corrente e tens\u00e3o de\nalimenta\u00e7\u00e3o possuem uma forma de onda sinusoidal com uma frequ\u00eancia de 50 Hz. A pot\u00ean-\ncia el\u00e9trica instant\u00e2nea de um equipamento alimentado atrav\u00e9s da rede el\u00e9trica \u00e9 tamb\u00e9m um\nsinal com uma forma sinusoidal mas com o dobro da frequ\u00eancia.\n\nPinst(t) = v(t) ? i(t) (4.6)\n\nA energia de um sinal pode ser de?nida como o somat\u00f3rio do valor da pot\u00eancia instant\u00e2nea\ndo sinal.\n\nE =\n\n? ?\n?\n\nP(t) dt (4.7)\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 33\n\nQuando a imped\u00e2ncia associada aos dispositivos \u00e9 puramente resistiva, ent\u00e3o toda a ener-\ngia consumida corresponde \u00e0 energia transformada, por exemplo em luz, calor, etc.\n\nPor vezes a imped\u00e2ncia da carga cont\u00e9m uma componente reativa, que pode ser indutiva\nou capacitiva. Este facto conduz a um desfasamento entre os sinais de corrente e tens\u00e3o, que\nser\u00e1 tanto maior quanto maior for a raz\u00e3o da componente reativa pela resistiva. O desfasa-\nmento introduzido entre a tens\u00e3o e corrente leva a que em determinados momentos o sentido\nde circula\u00e7\u00e3o da corrente seja contr\u00e1rio \u00e0 queda de tens\u00e3o nos terminais da carga, nesses ins-\ntantes a carga devolve energia \u00e0 rede. Assim, a exist\u00eancia das componentes reativas levam ao\naparecimento de uma energia que oscila na rede entre a carga e o gerador. Este facto tem\ncomo consequ\u00eancia o aparecimento de tr\u00eas tipos de pot\u00eancia associadas, s\u00e3o elas, pot\u00eancia\naparente, pot\u00eancia ativa e pot\u00eancia reativa (Figura 4.12).\n\nFigura 4.12: Pot\u00eancias.\n\nDerivado ao facto da exist\u00eancia destes tr\u00eas tipos de pot\u00eancia pode-se de?nir o conceito\nde fator de pot\u00eancia. O fator de pot\u00eancia \u00e9 raz\u00e3o da pot\u00eancia ativa pela pot\u00eancia aparente,\ntratando-se por isso, de um n\u00famero adimensional entre 0 e 1. Este fator \u00e9 de?nido pelo tipo\nde carga, podendo esta ser resistiva, indutiva ou capacitiva e designa-se por cos(?).\n\nA pot\u00eancia aparente (S) \u00e9 aquela que \u00e9 efetivamente disponibilizada pela rede, sendo as\nsuas unidades o VA (Volt-Ampere). Assim o m\u00f3dulo da pot\u00eancia aparente no sistema el\u00e9trico\npode ser obtido a partir do produto entre os valores e?cazes de tens\u00e3o el\u00e9trica (Vef ) e a cor-\nrente el\u00e9trica (Ief ).\n\n|S| = Vef ? Ief (4.8)\n\nA pot\u00eancia ativa (Pact) \u00e9 a pot\u00eancia utilizada pelas cargas para realizar o trabalho de\ngerar calor, luz e \u00e9 expressa em W (Watt). Pode-se descrever a pot\u00eancia ativa como o valor\nm\u00e9dio da pot\u00eancia absorvida. Alternativamente a pot\u00eancia ativa pode ainda ser de?nida como\no produto entre a pot\u00eancia aparente e o fator de pot\u00eancia:\n\nP = Vef ? Ief ? cos(?) (4.9)\n\nDesta forma \u00e9 poss\u00edvel efetuar a medi\u00e7\u00e3o da energia, com o valor da tens\u00e3o e corrente\nobtidos atrav\u00e9s das entradas anal\u00f3gicas.\n\nLeitura da ADC\n\nO programa desenvolvido para a medi\u00e7\u00e3o da energia, utiliza uma rotina de servi\u00e7o \u00e0 in-\nterrup\u00e7\u00e3o, que \u00e9 \"chamada\"sempre que existe rece\u00e7\u00e3o de dados pela porta s\u00e9rie pelo modem\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n34 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\nGSM, ou seja, sempre que \u00e9 recebida uma mensagem enviada pelo utilizador(SMS). Quando\nrecebe a SMS, \u00e9 acionada a sa\u00edda corresponde ao triac, para passar a energia para o equi-\npamento. Depois procede-se \u00e0 medi\u00e7\u00e3o da corrente e da tens\u00e3o, atrav\u00e9s de duas entradas\nanal\u00f3gicas. Essa medi\u00e7\u00e3o \u00e9 feita apenas enquanto estiver ligado o equipamento, e o equipa-\nmento apenas est\u00e1 ligado enquanto estiver a contar a energia pedida pelo utilizador atrav\u00e9s\nda mensagem.\n\nUma vez que os valores da corrente e da tens\u00e3o n\u00e3o v\u00eam corrigidos, \u00e9 necess\u00e1rio converter\nos valores de entrada (na gama dos 5V) para valores de aproximadamente 230V (no caso da\ntens\u00e3o) ou para aproximadamente 0,43V (no caso da corrente), uma vez que a calibra\u00e7\u00e3o foi\nrealizada com uma l\u00e2mpada de 100W aproximadamente.\n\nPor isso, foi necess\u00e1rio obter v\u00e1rias amostras de medi\u00e7\u00e3o, tanto para a corrente como para\na tens\u00e3o, para encontrar o fator de convers\u00e3o. Ap\u00f3s se estabelecerem os valores indicados com\num erro bastante reduzido, procedeu-se \u00e0 medi\u00e7\u00e3o.\n\nNo ?uxograma da Figura 4.13, \u00e9 poss\u00edvel observar o ciclo feito para se proceder \u00e0 medi\u00e7\u00e3o.\nInicialmente, memoriza-se a Energia que est\u00e1 escrita na mensagem que o cliente enviou para\no equipamento, depois d\u00e1-se o inicio da contagem do Timer. Quando o c\u00e1lculo da energia\n(Equa\u00e7\u00e3o 4.7) estiver igual ou superior \u00e0 energia enviada pela mensagem, desliga-se o timer\n(contagem do tempo) e desliga-se o Triac (para n\u00e3o passar mais energia para o ve\u00edculo, neste\ncaso a l\u00e2mpada). Se a energia consumida for inferior \u00e9 feito de novo a medi\u00e7\u00e3o para o c\u00e1lculo\nda pot\u00eancia. Ap\u00f3s este processo, os valores de todas as vari\u00e1veis envolvidas s\u00e3o postas a zero,\npara estarem preparadas para uma nova medi\u00e7\u00e3o.\n\nA calibra\u00e7\u00e3o da medi\u00e7\u00e3o das grandezas foi feita utilizando a l\u00e2mpada, como j\u00e1 foi referido\nanteriormente, e um oscilosc\u00f3pio. Fez-se a leitura no microcontrolador em debug, utilizando o\nsoftware MPLAB IDE v8.91, que permite assim fazer diferentes medi\u00e7\u00f5es com a varia\u00e7\u00e3o do\ntempo. Os valores foram corrigidos e calibrados consoante os valores que davam no oscilosc\u00f3-\npio.\n\nO MPLAB \u00e9 um software destinado a desenvolver aplica\u00e7\u00f5es para microcontroladores fa-\nbricados pela Microchip, como neste caso o PIC18F97J60. Este ambiente de desenvolvimento\npermite a edi\u00e7\u00e3o, o debugging e programa\u00e7\u00e3o do microcontrolador. Relativamente ao c\u00f3digo\nfonte, este pode ser escrito em linguagem C ou em assembly, sendo que nesta disserta\u00e7\u00e3o foi\nutilizada a primeira. Uma das principais vantagens do MPLAB \u00e9 a possibilidade de visua-\nliza\u00e7\u00e3o dos registos na mem\u00f3ria do programa utilizando o modo do debug, o que facilita o\ndesenvolvimento do c\u00f3digo fonte, e da calibra\u00e7\u00e3o de grandezas como o caso da tens\u00e3o e da\ncorrente.\n\nResumidamente, ligou-se a l\u00e2mpada e solicitou-se uma aquisi\u00e7\u00e3o de dados ao hardware.\nDepois do microcontrolador converter os dados adquiridos pelos transdutores de corrente e\ntens\u00e3o numa sequ\u00eancia bin\u00e1ria (digital) proporcional aos sinais de entrada (anal\u00f3gicos), foi\nnecess\u00e1rio proceder a uma an\u00e1lise dos resultados obtidos de forma a criar uma rela\u00e7\u00e3o entre\nos mesmos e os valores dados pelo oscilosc\u00f3pio. Ap\u00f3s essa medi\u00e7\u00e3o, procedeu-se \u00e0 calibra\u00e7\u00e3o\ndos dados, para na pr\u00f3xima medi\u00e7\u00e3o se obter valores considerados reais de tens\u00e3o e corrente.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 35\n\nInicio da leitura\n\nMemoriza\u00e7\u00e3o da \nenergia da SMS\n\nMedi\u00e7\u00e3o da \nvoltagem (AN2)\n\nMedi\u00e7\u00e3o da \ncorrente (AN6)\n\nC\u00e1lculo da  Pot\u00eancia \nInstant\u00e2nea\n\nEnergia consumida \n= Energia da SMS?\n\nIn\u00edcio do Timer\n\nN\u00e3o\n\nSIM\nStop\n\n Timer\nDesliga a  Energia \n\n(RB5=0)\n\nFigura 4.13: Ordem de leitura das entradas anal\u00f3gicas.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n36 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\nAtrav\u00e9s disto e depois dos dados adquiridos se encontrarem nas unidades de volts e ampe-\nres, \u00e9 ent\u00e3o poss\u00edvel proceder ao c\u00e1lculo da pot\u00eancia a partir da equa\u00e7\u00e3o 4.9, em que o ? \u00e9 o\n\u00e2ngulo de fase entre a onda da tens\u00e3o e a onda da corrente. Este \u00e9 calculado entre a diferen\u00e7a\ndos \u00edndices correspondentes aos valores m\u00e1ximos de cada onda nos respetivos arrays.\n\n4.4 M\u00f3dulo 3 - Modem GSM/GPRS\n\nPara a intera\u00e7\u00e3o com este m\u00f3dulo, o microcontrolador integrado na placa est\u00e1 conectado\natrav\u00e9s da sua UART, por uma comunica\u00e7\u00e3o por RS232. Para a comunica\u00e7\u00e3o funcionar sem\nproblemas, precisa de ter umas caracter\u00edsticas especi?cas:\n\n\u2022 Baudrate de 115200bps;\n\n\u2022 Possui um cristal de 25Mhz;\n\nDe seguida \u00e9 feita a divis\u00e3o entre as duas comunica\u00e7\u00f5es realizadas pela mesma UART:\nComunica\u00e7\u00e3o RS232 para a comunica\u00e7\u00e3o para o envio e rece\u00e7\u00e3o de SMS, e a comunica\u00e7\u00e3o\nTCP/IP para o envio de dados para a base de dados.\n\nComo foi referido anteriormente, para a comunica\u00e7\u00e3o ser efetuada, colocou-se uma inter-\nrup\u00e7\u00e3o para que se espere por uma SMS no terminal, para que depois de todas as condi\u00e7\u00f5es\nestarem satisfeitas, possa atrav\u00e9s de uma das suas sa\u00eddas ligar o Triac para proceder ao car-\nregamento do ve\u00edculo el\u00e9trico.\n\n4.4.1 Comunica\u00e7\u00e3o RS232\n\nComo foi referido anteriormente, a medi\u00e7\u00e3o da energia \u00e9 desencadeada por uma SMS\nenviada pelo utilizador. Para que seja poss\u00edvel a intera\u00e7\u00e3o do microcontrolador com o modem\nGSM, tem de haver comunica\u00e7\u00e3o com comandos AT pela porta s\u00e9rie.\n\nNeste equipamento foram utilizados os comandos AT dispon\u00edveis na Tabela 4.3. Para exis-\ntir uma boa comunica\u00e7\u00e3o entre o microcontrolador e o modem GSM/GPRS, foi necess\u00e1rio\nefetuar uma m\u00e1quina de estados em que, apenas se transita para o estado seguinte quando\nexiste a con?rma\u00e7\u00e3o do envio do comando respetivo, continuando a ler os restantes estados.\n\nTabela 4.3: Comandos AT para envio e rece\u00e7\u00e3o de SMS.\n\nComandos AT Designa\u00e7\u00e3o\n\nAT Veri?ca\u00e7\u00e3o de conex\u00e3o com o modem GSM\n\nAT+CMGF=1\nCon?gura o m\u00f3dulo GSM/GPRS para que\nas mensagens sejam apresentadas em for-\nmato de texto.\n\nAT+CMGS=\"numero?mensagem>\nPermite o envio de mensagens de texto\npara o n\u00famero de telem\u00f3vel indicado.\n\nAT+CMGL=\"ALL\" Mensagens recebidas\n\nAT+CMGR=1\nPermite ler a mensagem recebida, que se\nencontra na posi\u00e7\u00e3o 1.\n\nAT+CMGD=1 Apaga a mensagem que esta na posi\u00e7\u00e3o 1.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 37\n\nNo diagrama da Figura 4.14, \u00e9 poss\u00edvel visualizar uma comunica\u00e7\u00e3o entre o microcon-\ntrolador e o modem GSM/GPRS, no caso de um cliente enviar uma SMS para o posto de\nabastecimento e a SMS estar bem escrita, ou seja, proceder ao carregamento.\n\nMicrocontroladorMicrocontrolador M\u00f3dulo GSM\n\n AT&lt;CR>\n\nOK\n\nATE0&lt;CR>\n\nOK\n\nAT+CMGF=1&lt;CR>\n\nOK\n\nAT+CMGR=1&lt;CR>\n\nOK\n\n+CMGR: \"REC UNREAD\"/\"+351*********\"//\"yy/mm/dd/hh:mm:ss+ss\"..MMMM....OK.\n\nAT+CMGS=\"+351*********\"<CR><CR>\"O carregamento de:MMMM kwh vai ser efetuado. Obrigado.&lt;CR>&lt;0x1A>\n\nOK\n\nAT+CMGS=\"+351*********\"<CR><CR>\"O carregamento foi efetuado com sucesso. Obrigado.&lt;CR><0x1A>\n\nOK\n\nAT+CMGDA=\"del all\"&lt;CR>\n\nOK\n\nciclo\n\nFigura 4.14: Diagrama de envio/rece\u00e7\u00e3o de SMS com carregamento.\n\nComo foi referido no ?uxograma da Figura 3.2, a mensagem a ser enviada aquando do in\u00ed-\ncio e do ?m de carregamento, \u00e9 apenas quando se inicia ou termina a medi\u00e7\u00e3o. Essa instru\u00e7\u00e3o\n\u00e9 dada pelo microcontrolador.\n\nNo caso de o cliente enviar uma mensagem para o posto de abastecimento com a ordem de\nescrita errada, a ordem dos comandos altera-se ligeiramente. O diagrama pode ser observado\nna sec\u00e7\u00e3o do Ap\u00eandice A (Figura A.2). No entanto, se ningu\u00e9m enviar mensagem para o\nposto de abastecimento, este vai ter a mesma ordem de comandos sempre que se inicia o\nequipamento, que se pode tamb\u00e9m analisar no Ap\u00eandice A (Figura A.1).\n\n4.4.2 Comunica\u00e7\u00e3o TCP/IP\n\nEsta comunica\u00e7\u00e3o \u00e9 realizada para enviar os consumos para a base de dados. Para isso, o\ncart\u00e3o SIM presente no m\u00f3dulo tem de ter um tarif\u00e1rio associado que permita n\u00e3o s\u00f3 o envio\nde SMS, como tamb\u00e9m o acesso \u00e0 Internet.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n38 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\nNeste processo, a comunica\u00e7\u00e3o com o microcontrolador continua a ser por RS232, usando\na mesma UART que as comunica\u00e7\u00f5es anteriores. No entanto, os comandos AT usados para\nesta comunica\u00e7\u00e3o TCP/IP s\u00e3o diferentes. Na tabela 4.4 pode-se veri?car os comandos AT\nutilizados para esta comunica\u00e7\u00e3o.\n\nTabela 4.4: Comandos AT para a comunica\u00e7\u00e3o TCP/IP\n\nComandos AT Designa\u00e7\u00e3o\n\nAT+CIPSTATUS Veri?ca\u00e7\u00e3o de Estado de liga\u00e7\u00e3o TCP/IP\nAT+CIPSPRT=1 Indica\u00e7\u00e3o de envio de dados\nAT+CDNSORIP=0 Veri?ca\u00e7\u00e3o do modo de comunica\u00e7\u00e3o\nAT+CIPSRIP=1 Indica\u00e7\u00e3o de visualiza\u00e7\u00e3o de IP e porta do\n\nenvio aquando da rece\u00e7\u00e3o\nAT+CIPHEAD=1 Adicionar um IP head aquando da rece\u00e7\u00e3o\n\nde dados\nAT+CGDCONT=1,\"IP\",\"site da rede\" Adiciona os par\u00e2metros do tipo PDP\n\nAT+CSTT=\"APN\",\"utilizador\",\"palavra\npasse\"\n\nFazer a liga\u00e7\u00e3o ao APN indicado, introdu-\nzindo o utilizador e palavra passe necess\u00e1-\nrio para o registo.\n\nAT+CIICR Fazer a liga\u00e7\u00e3o de dados GPRS.\n\nAT+CIFSR\nPede \u00e0 rede que atribua ao m\u00f3dulo\nGSM/GPRS um IP local\n\nAT+CIPSTART=\"TCP\",\"IP\",\"PORTA\"\n\nLiga\u00e7\u00e3o de dados com o protocolo\nTCP/IP, ao computador com o endere\u00e7o\nIP indicado e porta pela qual ser\u00e1 feita a\nliga\u00e7\u00e3o.\n\nAT+CIPSEND&lt;mensagem> Enviar a mensagem para onde se pretende\nAT+CIPSHUT Desligar a liga\u00e7\u00e3o GPRS em curso\n\nA ordem de envio dos comandos AT para o modem GSM pode ser analisado na Figura\n4.15. Tal como no envio da SMS, neste caso tamb\u00e9m \u00e9 necess\u00e1rio ter uma m\u00e1quina de estados\npara o envio de cada comando, para que seja poss\u00edvel um correto envio de dados.\n\nEste envio de dados para a base de dados \u00e9 feita atrav\u00e9s do IP da p\u00e1gina Web com c\u00f3digo\nphp associado. Desta forma, s\u00e3o inseridos no url o valor da energia consumida e o telem\u00f3vel\nassociado. Ou seja, IP/teste.php?ener=...&amp;ph=..., em que \"ener\"e \"ph\"s\u00e3o os dados que se\npretende inserir na base de dados, energia e telefone respetivamente.\n\nComo se pode analisar no ?uxograma, a resposta do envio de diversos comandos AT \u00e9\n\"OK\". Se esta resposta n\u00e3o for satisfeita, o microcontrolador volta a enviar o comando at\u00e9\nque seja essa a resposta. Uma vez que, se a ordem de envio e rece\u00e7\u00e3o de comandos n\u00e3o for a\nrepresentada no ?uxograma, esta comunica\u00e7\u00e3o n\u00e3o \u00e9 bem efetuada.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 39\n\nMicrocontroladorMicrocontrolador M\u00f3dulo GSM\n\n AT+CIPSTATUS<CR>\n\nOK<CR>STATE: IP INITIAL\n\nAT+CIPSPRT=1<CR>\n\nOK\n\nAT+CDNSORIP=0<CR>\n\nOK\n\nAT+CIPSRIP=1<CR>\n\nOK\n\nAT+CIPHEAD=1<CR>\n\nOK\n\nAT+CGDCONT=1,\"IP\",\"internet.vodafone.pt\"<CR>\n\nOK\n\nAT+CSTT=\"internet.vodafone.pt\",\"guest\",\"guest\"<CR>\n\nOK\n\nAT+CIICR<CR>\n\nOK\n\nAT+CIPSTATUS&lt;CR>\n\nOK&lt;CR> STATE: IP GPRSACT\n\nAT+CIFSR&lt;CR>\n\n**.**.**\n\nAT+CIPSTATUS&lt;CR>\n\nOK&lt;CR> STATE: IP STATUS\n\nAT+CIPSTART=\"TCP\",\"193.137.172.23\",\"80\"\n\nOK&lt;CR> CONNECT OK\n\nAT+CIPSEND&lt;CR> GET /teste.php?ener=MMMM&amp;ph=*********<CR>Host:193.137.172.23<CR>\n\nSEND OK \n\nAT+CIPSHUT&lt;CR>\n\nSHUT OK\n\nFigura 4.15: Diagrama do envio de dados para a p\u00e1gina web\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n40 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\n4.5 S\u00edntese prot\u00f3tipo\n\nAp\u00f3s a implementa\u00e7\u00e3o de todo o hardware envolvido, e da programa\u00e7\u00e3o do microcon-\ntrolador existente, \u00e9 poss\u00edvel assim elaborar o ?uxograma s\u00edntese do funcionamento deste\nprot\u00f3tipo. Como se pode visualizar na Figura 4.16, para al\u00e9m da mensagem enviada para\no cliente aquando do inicio e do ?m do carregamento, tamb\u00e9m s\u00e3o ativados dois led's: led\nverde quando se inicia o carregamento, e led vermelho quando termina o carregamento. Este\nprot\u00f3tipo permite tamb\u00e9m ao utilizador aceder \u00e0 p\u00e1gina Web, explicada no cap\u00edtulo seguinte.\n\nIn\u00edcio\n\nEspera pelo envio \nda mensagem\npelo utilizador\n\n\u201cCARR ****\u201d ?\n\nInicio do \nCarregamento \n\nPermiss\u00e3o do Triac\n\nSim\n\nEnvio de mensagem ao \ncliente de Inicio de \n\ncarregamento\n\nFim de \ncarregamento. \n\nEnvio de mensagem ao \ncliente de Fim de \n\ncarregamento\n\nAcendeu Led \nVerde\n\nAcendeu Led \nVermelho\n\nEnvio de dados por \nTCP/IP para a base \n\nde dados\n\nFim de processo\n\nElabora\u00e7\u00e3o de \ngr\u00e1ficos na p\u00e1gina \n\nWeb\n\nEnvio de mensagem ao \ncliente de erro na escrita\n\nN\u00e3o\n\nFigura 4.16: Diagrama do processo do carregador\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n4.Implementa\u00e7\u00e3o do Posto de Abastecimento 41\n\nNa Figura 4.17 e na Figura 4.18 \u00e9 poss\u00edvel visualizar o prot\u00f3tipo desenvolvido por fora e\npor dentro, respetivamente. Como se pode observar na primeira ?gura, possui os leds mencio-\nnados anteriormente, a ?cha para o carregamento de um dispositivo (neste caso para a liga\u00e7\u00e3o\nda l\u00e2mpada) e o log\u00f3tipo do equipamento. Este foi inteiramente elaborado pelo autor desta\ndisserta\u00e7\u00e3o, com inspira\u00e7\u00e3o nas formas e cores relacionadas com o meio ambiente e com as\nenergias renov\u00e1veis. O nome do log\u00f3tipo deriva de Electric Charger, da\u00ed o nome \"E.Charger\",\numa vez que consiste num carregador el\u00e9trico.\n\nFigura 4.17: Prototipo - Vista exterior\n\nNa segunda Figura (4.18) \u00e9 ent\u00e3o poss\u00edvel visualizar todos os componentes na caixa. Exem-\npli?cando a placa PIC-GSM da Olimex, com o cart\u00e3o SIM necess\u00e1rio para envio ou rece\u00e7\u00e3o de\nmensagens e troca de dados; o m\u00f3dulo Triac; e duas placas brancas que constituem os outros\ncomponentes mencionados anteriormente.\n\nComo foi referido, trata-se de um prot\u00f3tipo experimental, necessitando de melhorias na\ncaixa e organiza\u00e7\u00e3o de diversos equipamentos.\n\nNa Figura 4.19 \u00e9 poss\u00edvel visualizar dois testes elaborados no prot\u00f3tipo. Do lado esquerdo\n(a) pode ser visualizada a resposta do prot\u00f3tipo a uma mensagem com caracteres distintos e\na respetiva resposta; do lado direito (b) pode ser visualizada o envio de uma mensagem com\na ordem pretendida no prot\u00f3tipo e a respetiva resposta.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n42 4.Implementa\u00e7\u00e3o do Posto de Abastecimento\n\nFigura 4.18: Prototipo - Vista interior\n\n(a) Envio de mensagem errada (b) Envio de mensagem correta\n\nFigura 4.19: Teste de envio de mensagem para o prot\u00f3tipo.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nCap\u00edtulo 5\n\nImplementa\u00e7\u00e3o do Sistema de\n\nMonitoriza\u00e7\u00e3o\n\nNeste cap\u00edtulo \u00e9 desenvolvido o m\u00f3dulo correspondente \u00e0 Monitoriza\u00e7\u00e3o do posto de abas-\ntecimento (Figura 5.1). Este m\u00f3dulo \u00e9 constitu\u00eddo pela base de dados MySQL gerida atrav\u00e9s\ndo phpMyAdmin, bem como a p\u00e1gina web desenvolvida em HTML5.\n\nPara a ativa\u00e7\u00e3o da base de dados e da p\u00e1gina web foi utilizado o Xampp. Este \u00e9 um pacote\nde servidores no qual se encontra o servidor Web Apache, o servidor de base de dados MySQL\ne um interpretador de PHP, entre outros. Esta \u00e9 uma aplica\u00e7\u00e3o bastante \u00fatil no desenvolvi-\nmento de aplica\u00e7\u00f5es Web e n\u00e3o necessita de licen\u00e7a de utiliza\u00e7\u00e3o.\n\nInternet\n\nP\u00e1gina WEB\n\nApache\n\nPHP\n\nHTML5\n\nFigura 5.1: M\u00f3dulo da Monitoriza\u00e7\u00e3o\n\n43\n\n\n\n44 5.Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o\n\n5.1 Base de dados MySQL\n\nO MySQL \u00e9 um sistema de gest\u00e3o de bases de dados, que permite gerir bases de da-\ndos com um elevado n\u00famero de registos de uma forma r\u00e1pida e e?ciente. Para al\u00e9m disso \u00e9\nfacilmente integrado com linguagens de programa\u00e7\u00e3o como \u00e9 o caso do Visual Basic ou o PHP.\n\nNa base de dados foram criadas duas tabelas essenciais: a tabela dos consumos totais do\nposto (Tabela \"Energia\") e a tabela de registo dos clientes do posto (Tabela \"Registo\"). A\nbase de dados criada pode ser observada na Figura 5.3.\n\nA tabela \"Energia\"tem como vari\u00e1veis a \"phoneenergia\"do tipo int(250) e a \"energy\"do\ntipo int(250) que s\u00e3o os dados recebidos por TCP/IP pelo M\u00f3dulo 3. Estes dados s\u00e3o inseridos\nna tabela atrav\u00e9s de c\u00f3digo desenvolvido em PHP (\"teste.php\").\n\nComo foi referido anteriormente, os dados a ser submetidos na base dados s\u00e3o enviados\natrav\u00e9s de um url (teste.php?ph=123456789&amp;ener=100), em que o ?cheiro PHP os vai inserir\nna base de dados atrav\u00e9s do c\u00f3digo abaixo (Figura 5.2).\n\nFigura 5.2: C\u00f3digo PHP para inser\u00e7\u00e3o de valores na base de dados.\n\nDesta forma, os valores do telefone (ph - phoneenergia) e os da energia (ener - energy) s\u00e3o\nintroduzidos na tabela \"Energia\".\n\nEnergia\n\nphoneenergi a (int(250))\n\nenergy (int(250))\n\ndate (timestamp)\n\nRegisto\n\nname (varchar(250))\n\nmail (varchar(250))\n\nphone (varchar(250))\n\ndate (varchar(250))\n\npass (varchar(250))\n\nFigura 5.3: Estrutura da base de dados.\n\nA vari\u00e1vel \"date\"que \u00e9 do tipo timestamp, \u00e9 automaticamente inserida aquando da entrada\ndos valores na tabela. Esta vari\u00e1vel indica a data e a hora do carregamento efetuado.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n5.Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o 45\n\nA tabela \"Registo\"consiste numa base de dados dos clientes que se queiram registar na\np\u00e1gina Web para ter acesso aos seus consumos. Ent\u00e3o, a tabela cont\u00e9m como vari\u00e1veis o\nnome (\"name\"), e-mail (\"mail\"), n\u00famero de telefone (\"phone\") que deve ser o mesmo que foi\nutilizado no carregamento, a data de nascimento (\"date\") pois apenas permite a utilizadores\ncom idade acima dos 18 anos, e a palavra pass (\"pass\") que permite depois ao cliente aceder\n\u00e0 sua p\u00e1gina de consumos com con?dencialidade. Nesta tabela foi logo inserido o per?l de\nadministrador(nome:admin, mail:admin@ua.pt) para posteriormente ser permitido o acesso \u00e0\np\u00e1gina Web.\n\nDe seguida, vai-se veri?car que na elabora\u00e7\u00e3o da p\u00e1gina Web foi tido em conta algumas\nrestri\u00e7\u00f5es, como n\u00e3o ser permitido o registo de dois ou mais clientes com o mesmo n\u00famero de\ntelem\u00f3vel ou com o mesmo e-mail.\n\n5.2 P\u00e1gina WEB\n\nComo foi referido anteriormente, para o aux\u00edlio deste produto, torna-se vantajoso conter\numa p\u00e1gina WEB que permita ao utilizador consultar os consumos e os seus abastecimentos\nnos postos associados. Esta p\u00e1gina foi desenvolvida utilizando a linguagem HTML5.\n\nO HTML5 \u00e9 a quinta vers\u00e3o da linguagem HTML. Esta vers\u00e3o traz consigo importantes\nmudan\u00e7as quanto ao papel do HTML no mundo da Web, atrav\u00e9s de novas funcionalidades\ncomo sem\u00e2ntica e acessibilidade [HTML5] e com novos recursos, antes s\u00f3 poss\u00edveis com re-\ncurso a outras tecnologias. Esta linguagem permite que a p\u00e1gina possa ter acesso atrav\u00e9s de\ncomputadores comuns, bem como por dispositivos m\u00f3veis.\n\nDesta forma, foi criada uma p\u00e1gina bastante intuitiva, que permite a qualquer utiliza-\ndor consultar onde se situam os respetivos postos de abastecimento,como tamb\u00e9m permite\no registo de cliente, para que seja poss\u00edvel a an\u00e1lise dos consumos associados ao n\u00famero de\ntelem\u00f3vel. Nesta p\u00e1gina foram criadas 5 sec\u00e7\u00f5es/separadores (Home, Login, Registar, Sobre\ne Contacto) que se pode visualizar na Figura 5.5. Estes separadores podem ser visualizados\nem toda a p\u00e1gina do E.Charger, para que seja poss\u00edvel navegar com facilidade. Foi elaborado\ntamb\u00e9m um \u00edcone da marca deste prot\u00f3tipo, para que valorize esta pagina web esteticamente,\nque pode ser visualizada no separador do browser em que se est\u00e1 a navegar (Figura 5.4).\n\nFigura 5.4: \u00cdcone da p\u00e1gina.\n\nA p\u00e1gina \"Home\"\u00e9 a p\u00e1gina principal deste posto de abastecimento. Na Figura 5.5 pode\nser observada essa p\u00e1gina, onde os quadrados sombreados a vermelho signi?cam as partes ?-\nxas de toda a p\u00e1gina Web, e o quadrado verde o que muda \u00e0 medida que se muda de separador.\n\nNeste separador, \u00e9 permitido ao utilizador consultar atrav\u00e9s de um mapa interativo, os\npostos de abastecimento existentes. Este mapa \u00e9 obtido atrav\u00e9s de uma API da Google Maps\nJavaScript. \u00c9 utilizada a vers\u00e3o 3 da API que foi desenvolvida especialmente para ser mais\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n46 5.Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o\n\nFigura 5.5: P\u00e1gina principal E.Charger.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n5.Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o 47\n\nr\u00e1pida e apresentar mais compatibilidade com dispositivos m\u00f3veis e tamb\u00e9m com aplica\u00e7\u00f5es\nWeb tradicionais em computadores.\n\nA Google Maps JavaScript API V3 \u00e9 um servi\u00e7o gratuito, dispon\u00edvel para qualquer site\nque o p\u00fablico possa usar gratuitamente. [Developers] A utiliza\u00e7\u00e3o desta API permite ent\u00e3o,\napresentar aos utilizadores a localiza\u00e7\u00e3o dos postos de abastecimento existentes.\n\nNa p\u00e1gina \"Registo\", permite a um utilizador novo o registo no site. Como se pode visu-\nalizar na Figura 5.6, esta sec\u00e7\u00e3o pede os seguintes dados:\n\n\u2022 Nome;\n\n\u2022 N\u00famero de Telefone - apenas permite a inser\u00e7\u00e3o de nove d\u00edgitos, n\u00e3o permitindo letras;\n\n\u2022 Data de nascimento - personalizada para apenas inserir datas v\u00e1lidas a partir de 18 anos;\n\n\u2022 E-mail - apenas permite inserir e-mails com um caracter @ e um ponto (.);\n\n\u2022 Password - permite ao utilizador gravar os dados ocultos.\n\nAp\u00f3s as caixas de texto, esta p\u00e1gina cont\u00e9m dois bot\u00f5es: o bot\u00e3o Apagar permite limpar\ntodas as caixas de texto at\u00e9 a\u00ed preenchidas; o bot\u00e3o Enviar envia todos os dados at\u00e9 a\u00ed pre-\nenchidos para a base de dados criada para o efeito. Antes de serem enviados os dados para\na base de dados, \u00e9 veri?cado se j\u00e1 existe algum cliente registado com o mesmo n\u00famero de\ntelefone ou com o mesmo e-mail.\n\nNo ?nal, se o registo foi bem efetuado, mostra ao utilizador uma caixa de aviso (Figura\n5.7) que informa o utilizador que o registo foi bem efetuado, e que ap\u00f3s o clique no bot\u00e3o OK,\no encaminha para a p\u00e1gina Home. Se o registo n\u00e3o for bem sucedido (no caso de j\u00e1 existir o\nmesmo n\u00famero de telefone ou o mesmo mail), aparece ao utilizador uma caixa id\u00eantica \u00e0 da\nFigura 5.7, mas a informar que n\u00e3o foi bem efetuado, e encaminha de novo para a p\u00e1gina de\nRegisto.\n\nNa p\u00e1gina do Login, existe o formul\u00e1rio de entrada para a p\u00e1gina dos consumos. Se o\nLogin for efetuado pelo cliente que efetuou registo previamente, ao inserir o seu e-mail e a sua\npassword, ter\u00e1 acesso aos consumos efetuados pelo n\u00famero de telem\u00f3vel que est\u00e1 associado a\neste registo. Se o Login for efetuado pelo administrador da p\u00e1gina, ao inserir as credenciais de\nadministrador (admin), este encaminha para a p\u00e1gina que demonstra os consumos efetuados\nno posto E.Charger, bem como os consumos dos clientes.\n\nComo se pode visualizar na Figura 5.9, \u00e9 pedido o E-mail e a password. Antes de ser feito\no Login, s\u00e3o veri?cadas duas restri\u00e7\u00f5es: primeiro se existe um Login com o email inserido,\ne segundo se o email e a password est\u00e3o corretas, atrav\u00e9s da base de dados. Se ambas n\u00e3o\nestiverem corretas, ao fazer Login aparece uma caixa de aviso, como a da Figura 5.7, mas a\nmencionar que o Login n\u00e3o foi efetuado.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n48 5.Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o\n\nFigura 5.6: Pagina para fazer registo.\n\nFigura 5.7: Caixa de aviso de registo efetuado.\n\nNa P\u00e1gina \"Cliente\", aparece, como j\u00e1 foi referido, um gr\u00e1?co com os consumos efetuados\nno posto E.Charger, associado ao Login efetuado. Para uma melhor visualiza\u00e7\u00e3o, \u00e9 colocado\no n\u00famero associado aos consumos do cliente.\n\nO gr\u00e1?co que se pode visualizar na Figura 5.8 \u00e9 elaborado atrav\u00e9s de uma API da Google.\nComo foi referido anteriormente, essa API disponibiliza gratuitamente gr\u00e1?cos base poss\u00edveis\nde manipular. Neste caso, foi criado um gr\u00e1?co de barras com valores provenientes da base de\ndados, que permite saber ao certo o valor do consumo do cliente em Ws, com a data em que\nfez o consumo. Os valores est\u00e3o em Ws (watts segundo), uma vez que os testes elaborados\ncom a l\u00e2mpada, tinham dura\u00e7\u00e3o curta, n\u00e3o chegando a obter consumos de unidades de kwh\n(quilo watt hora). Tem ainda a possibilidade de con?rmar o valor referentes a cada barra,\npassando o ponteiro por cima, uma vez que salienta o valor ali estimado. Este tipo de gr\u00e1?cos\npermite alterar o estilo (barras, linhas, circular) e as cores (por exemplo).\n\nNesta p\u00e1gina, pode-se tamb\u00e9m observar um bot\u00e3o de LogOut que permite ao utilizador\nterminar sess\u00e3o, voltando para a p\u00e1gina Home, bem como permite ao utilizador ver o n\u00famero\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n5.Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o 49\n\nde telefone associado aos consumos do gr\u00e1?co.\n\nFigura 5.8: Pagina do cliente\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n50 5.Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o\n\nFigura 5.9: Pagina para fazer Login.\n\nNa p\u00e1gina de Administrador, pode-se visualizar, como j\u00e1 foi referido, os consumos existen-\ntes no Posto E.Charger de todos os clientes, atrav\u00e9s de um gr\u00e1?co (Figura 5.10). Neste caso\no gr\u00e1?co tamb\u00e9m utiliza a API da Google, no entanto \u00e9 modi?cado para um gr\u00e1?co de linhas.\n\nAqui \u00e9 poss\u00edvel ao administrador visualizar os registos efetuados na p\u00e1gina, bem como\nconsultar individualmente os consumos de cada cliente. Para isso basta na caixa de texto\npresente, inserir o n\u00famero de telefone associado ao cliente em quest\u00e3o e clicar no bot\u00e3o Search\n(Figura 5.11), e a\u00ed s\u00e3o disponibilizados todos os consumos efetuados pelo n\u00famero de telefone\npesquisado. Nas ?guras apresentadas alguns n\u00fameros de telefone est\u00e3o rasurados para priva-\ncidade das pessoas que testaram o produto.\n\nNa p\u00e1gina \"Sobre\"(Figura 5.12) e na p\u00e1gina \"Contacto\"(Figura 5.13) apenas s\u00e3o explica-\ndos alguns pormenores do projeto, bem como quem o elaborou e a orienta\u00e7\u00e3o, tanto como o\ncontacto da pessoa que o desenvolveu respetivamente.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n5.Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o 51\n\nFigura 5.10: Pagina de administrador.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n52 5.Implementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o\n\nFigura 5.11: Pesquisa por cliente.\n\nFigura 5.12: Pagina Sobre o projeto criado.\n\nFigura 5.13: Pagina com o Contacto do projeto.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nCap\u00edtulo 6\n\nConclus\u00f5es e Trabalho futuro\n\n6.1 Conclus\u00f5es\n\nO projeto e constru\u00e7\u00e3o do posto de abastecimento para ve\u00edculos el\u00e9tricos, objeto desta\ndisserta\u00e7\u00e3o, foi conclu\u00eddo com sucesso. Os objetivos iniciais foram plenamente alcan\u00e7ados\ndestacando-se as seguintes funcionalidades: envio e rece\u00e7\u00e3o de SMS pelo posto, medi\u00e7\u00e3o do\nconsumo el\u00e9trico, envio de dados para uma base de dados e cria\u00e7\u00e3o de uma p\u00e1gina web para\nvisualizar esses consumos.\n\nO estudo dos diversos postos de abastecimento apresentados no cap\u00edtulo 2, resultou numa\nvis\u00e3o integrada das tecnologias e funcionalidades necess\u00e1rias ao desenvolvimento do sistema\nproposto nesta disserta\u00e7\u00e3o. Uma vez que s\u00f3 assim foi poss\u00edvel desenvolver uma solu\u00e7\u00e3o me-\nlhorada do que j\u00e1 existe no mercado, de forma a ser um produto competitivo.\n\nAo longo da implementa\u00e7\u00e3o e constru\u00e7\u00e3o do sistema surgiram diversos contratempos que\nobrigaram \u00e0 reformula\u00e7\u00e3o de alguns processos. Salientam-se as di?culdades na calibra\u00e7\u00e3o dos\ndados pelo microcontrolador, na programa\u00e7\u00e3o das interrup\u00e7\u00f5es do microcontrolador e na co-\nmunica\u00e7\u00e3o deste com o modem GSM, especialmente na de?ni\u00e7\u00e3o dos tempos de espera, das\ncon?rma\u00e7\u00f5es dos pedidos feitos ao modem.\n\nAp\u00f3s o desenvolvimento deste prot\u00f3tipo, conclui-se que se devia ter optado por um me-\ndidor de corrente mais preciso, uma vez que se obteve alguns pequenos erros de medi\u00e7\u00e3o nos\ntestes efetuados. Tamb\u00e9m neste prot\u00f3tipo ser\u00e1 necess\u00e1rio alterar alguns equipamentos, para\nque seja poss\u00edvel carregar um veiculo el\u00e9trico com uma corrente cerca de 16A a 32A, que neste\ncaso assegura apenas 4A no triac.\n\nNeste produto tamb\u00e9m ser\u00e1 necess\u00e1rio implementar prote\u00e7\u00f5es na caixa do produto, bem\ncomo desenvolver uma caixa exterior num material resistente a diferen\u00e7as de temperatura\nelevadas (p.ex. -25oC a mais de 50oC) com isolamento \u00e0 prova de \u00e1gua(\u00cdndice de prote\u00e7\u00e3o de\n67). Por esse motivo, prop\u00f5e-se uma caixa desenvolvida em material Polipropileno(PP), que \u00e9\nde baixo custo mas tem alta resist\u00eancia ao impacto e boa estabilidade t\u00e9rmica. Este material\ntamb\u00e9m permite fazer um posto de abastecimento apelativo com forma invulgar, uma vez que\no PP \u00e9 de f\u00e1cil moldagem e colora\u00e7\u00e3o. A n\u00edvel de interior, ser\u00e1 necess\u00e1rio fazer um estudo\nsobre os protocolos de carga, de forma a implementar prote\u00e7\u00f5es de sobrecarga de corrente,\n\n53\n\n\n\n54 6.Conclus\u00f5es e Trabalho futuro\n\npara que se mantenha a seguran\u00e7a do utilizador.\n\nA este prot\u00f3tipo ainda \u00e9 preciso ser adicionada a cobran\u00e7a da energia fornecida a partir\ndo cart\u00e3o SIM, uma vez que houve contacto com operadoras , mas n\u00e3o foi poss\u00edvel estabelecer\num contrato que o permitisse, para o teste do equipamento a esse n\u00edvel.\n\nO desenvolvimento deste projeto permitiu ainda adquirir conhecimentos de diferentes\n\u00e1reas, nomeadamente de eletrotecnia, eletr\u00f3nica, sistemas digitais, instrumenta\u00e7\u00e3o e comuni-\nca\u00e7\u00f5es m\u00f3veis, tendo sido assim um trabalho deveras enriquecedor, uma vez que no mestrado\nem quest\u00e3o essas \u00e1reas n\u00e3o s\u00e3o muito desenvolvidas.\n\nA Internet mostrou-se um recurso essencial no desenvolvimento deste projeto, tendo sido\nfundamental na an\u00e1lise do estado da arte, no contacto com os fabricantes e os fornecedores\ndo material e na pesquisa de solu\u00e7\u00f5es para alguns dos problemas encontrados.\n\n6.2 Trabalho Futuro\n\nPerante as conclus\u00f5es obtidas do trabalho desenvolvido para esta disserta\u00e7\u00e3o, torna-se\nvi\u00e1vel a sugest\u00e3o de futuras implementa\u00e7\u00f5es com base neste. Prop\u00f5e-se:\n\n\u2022 Adicionar um novo sensor de corrente a ?m de melhorar a aquisi\u00e7\u00e3o de dados, no sentido\nde ter mais precis\u00e3o;\n\n\u2022 Cria\u00e7\u00e3o de aplica\u00e7\u00e3o Android ou Windows Mobile, para que seja mais f\u00e1cil a consulta\ndos consumos;\n\n\u2022 Projeto com micro gera\u00e7\u00e3o de energia, com aplica\u00e7\u00e3o de pain\u00e9is fotovoltaicos, para que\na empresa administradora do produto possa fazer pre\u00e7os mais econ\u00f3micos;\n\n\u2022 Cria\u00e7\u00e3o de contrato com uma empresa operadora de redes GSM para que seja poss\u00edvel\na venda de energia ao cliente e a cobran\u00e7a monet\u00e1ria, com adi\u00e7\u00e3o de fatura de gastos\ndiferenciados por telecomunica\u00e7\u00f5es e energia.\n\n\u2022 Cria\u00e7\u00e3o da caixa para o produto num material resistente a varia\u00e7\u00e3o de temperatura e\nao impacto, com implementa\u00e7\u00e3o de tomadas com prote\u00e7\u00e3o de sobrecarga de corrente.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nBibliogra?a\n\n[Analog, 2014] Analog (2014). Ad623. Available from: http://www.analog.com/static/\nimported-files/data_sheets/AD623.pdf.\n\n[Arif et al., 2013] Arif, A., Ai-hussain, M., Ai-mutairi, N., and Ai-ammar, E. (2013). Experi-\nmental study and design of smart energy meter for the smart grid. pages 1?6.\n\n[Automotive] Automotive. Electric vehicle sales uk on the rise marketing in automotive;\nconsultado em: 27/05/2014. Available from: http://www.marketinginautomotive.com/\nelectric_vehicle_sales_uk/.\n\n[Balsa, 2013] Balsa, J. (2013). Avalia\u00e7\u00e3o do impacto da introdu\u00e7\u00e3o de ve\u00edculos el\u00e9tricos na\nprocura de combustiveis em portugal; consultado em:27/05/2014. Available from: https:\n//estudogeral.sib.uc.pt/bitstream/10316/24945/1/Tese_vf.pdf.\n\n[Barbosa, 2012a] Barbosa, A. (2012a). Redes de abastecimento para ve\u00edculos eletricos; con-\nsultado em:27/05/2014. Available from: http://ave.dee.isep.ipp.pt/~mjf/act_lect/\nSIAUT/Trabalhos2011-12/SIAUT_2011-12_ProjetoRenaultNissan.pdf.\n\n[Barbosa, 2012b] Barbosa, A. V. (2012b). Redes de abastecimento para ve\u00edculos el\u00e9tricos.\npages 1?8.\n\n[BC974] BC974, N. Bc874/bc547 series datasheet; consultado em:20/08/2014. Available from:\nhttp://www.nxp.com/documents/data_sheet/BC847_BC547_SER.pdf.\n\n[Benysek and Jarnut, 2012] Benysek, G. and Jarnut, M. (2012). Electric vehicle charging in-\nfrastructure in poland. Renewable and Sustainable Energy Reviews, 16(1):320?328. Available\nfrom: http://linkinghub.elsevier.com/retrieve/pii/S1364032111004059.\n\n[Description et al., 2001] Description, G., Data, Q. R., Con?guration, P. I. N., and Values,\nL. (2001). Triacs bt136 series general description quick reference data triacs bt136 series.\n(June):1?6.\n\n[Developers] Developers, G. Google maps; consultado em: 27/05/2014. Available from:\nhttps://developers.google.com/maps/.\n\n[EFACEC] EFACEC. Efacec. Available from: http://www.efacec.pt/presentationLayer/\nefacec_empresa_00.aspx?idioma=1&amp;area=8&amp;local=303&amp;empresa=147.\n\n[Electrique] Electrique, F. M. Voiture et vehicule electrique - france mobilite electrique; con-\nsultado em 22/09/2014. Available from: http://www.france-mobilite-electrique.org/\n?lang=fr.\n\n55\n\nhttp://www.analog.com/static/imported-files/data_sheets/AD623.pdf\nhttp://www.analog.com/static/imported-files/data_sheets/AD623.pdf\nhttp://www.marketinginautomotive.com/electric_vehicle_sales_uk/\nhttp://www.marketinginautomotive.com/electric_vehicle_sales_uk/\nhttps://estudogeral.sib.uc.pt/bitstream/10316/24945/1/Tese_vf.pdf\nhttps://estudogeral.sib.uc.pt/bitstream/10316/24945/1/Tese_vf.pdf\nhttp://ave.dee.isep.ipp.pt/~mjf/act_lect/SIAUT/Trabalhos 2011-12/SIAUT_2011-12_ProjetoRenaultNissan.pdf\nhttp://ave.dee.isep.ipp.pt/~mjf/act_lect/SIAUT/Trabalhos 2011-12/SIAUT_2011-12_ProjetoRenaultNissan.pdf\nhttp://www.nxp.com/documents/data_sheet/BC847_BC547_SER.pdf\nhttp://linkinghub.elsevier.com/retrieve/pii/S1364032111004059\nhttps://developers.google.com/maps/\nhttp://www.efacec.pt/presentationLayer/efacec_empresa_00.aspx?idioma=1&amp;area=8&amp;local=303&amp;empresa=147\nhttp://www.efacec.pt/presentationLayer/efacec_empresa_00.aspx?idioma=1&amp;area=8&amp;local=303&amp;empresa=147\nhttp://www.france-mobilite-electrique.org/?lang=fr\nhttp://www.france-mobilite-electrique.org/?lang=fr\n\n\n56 BIBLIOGRAFIA\n\n[Electronics, 2014] Electronics, P. (2014). Efeito de hall; consultado em: 12/06/2014. Avai-\nlable from: http://powerelectronics.com/site-files/powerelectronics.com/files/\narchive/powerelectronics.com/electromechanical_devices/sensors_transducers/\n\nhall-effect-sensing_fig3.jpg.\n\n[Escola] Escola. Carta na escola; consultado em: 27/08/2014. Available from: http://www.\ncartanaescola.com.br/single/show/91.\n\n[Farinha, 2009] Farinha, D. (2009). Sistemas de telecontagem e gest\u00e3o de energia em ambientes\nresidenciais.\n\n[FATEK] FATEK. Plc fatek fbs 24mc; consultado em:20/10/2014. Available from: http:\n//file.siam2web.com/saesales/product/2011526_53135.jpg.\n\n[Ferreira, 2011] Ferreira, N. (2011). Sistema de contagem de energia el\u00e9trica baseado em tec-\nnologia gsm; consultado em: 12/06/2014. Available from: http://repositorio-aberto.\nup.pt/bitstream/10216/61507/1/000148272.pdf.\n\n[GreenCar] GreenCar. Green car congress: Pike forecasts more than 4.7m electric vehicle\ncharge points to be installed worldwide by 2015; china to represent more than 1/3 of global\nmarket; consultado em:27/05/2014. Available from: http://www.greencarcongress.com/\n2010/05/pike-20100525.html.\n\n[Honeywell, 2014] Honeywell (2014). Csla1cd honeywell. Available from: http://media.\ndigikey.com/Photos/Honeywell%20Photos/CSLA1CE.JPG.\n\n[HTML5] HTML5. Html5; consultado em: 27/05/2014. Available from: http://pt.\nwikipedia.org/wiki/HTML5.\n\n[Instruments, 2014] Instruments, T. (2014). Tl7660 cmos voltage converter; consultado em:\n12/06/2014. Available from: http://www.ti.com/lit/ds/symlink/tl7660.pdf.\n\n[Intersil, 2014] Intersil (2014). Cmos voltage converters; consultado em: 12/06/2014. Availa-\nble from: http://www.intersil.com/content/dam/Intersil/documents/icl7/icl7660.\npdf.\n\n[IXYS] IXYS. Application note : An-145 advantages of solid-state relays over electro-\nmechanical relays application note : An-145.\n\n[Kisense] Kisense. Kisense; consultado em:20/08/2014. Available from: http://www.\nisasensing.com/pt/pagina/98.\n\n[LEM, 2014a] LEM (2014a). Lts15np lem; consultado em: 12/06/2014. Available from: http:\n//media.digikey.com/photos/LEM%20Photos/LTS%2015-NP,LTS%2025-NP.jpg.\n\n[LEM, 2014b] LEM (2014b). Voltage transducer lv 25-p; consultado em: 12/06/2014. Avai-\nlable from: http://www.lem.com/docs/products/lv%2025-p.pdf.\n\n[Malhotra and Seethalakshmi, 2013] Malhotra, P. R. and Seethalakshmi, R. (2013). Automa-\ntic meter reading and theft control system by using gsm. 5(2):1?5.\n\n[Marktest] Marktest. Posse de telem\u00f3vel nos 92Available from: http://www.marktest.com/\nwap/a/n/id~18f8.aspx.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\nhttp://powerelectronics.com/site-files/powerelectronics.com/files/archive/powerelectronics.com/electromechanical_devices/sensors_transducers/hall-effect-sensing_fig3.jpg\nhttp://powerelectronics.com/site-files/powerelectronics.com/files/archive/powerelectronics.com/electromechanical_devices/sensors_transducers/hall-effect-sensing_fig3.jpg\nhttp://powerelectronics.com/site-files/powerelectronics.com/files/archive/powerelectronics.com/electromechanical_devices/sensors_transducers/hall-effect-sensing_fig3.jpg\nhttp://www.cartanaescola.com.br/single/show/91\nhttp://www.cartanaescola.com.br/single/show/91\nhttp://file.siam2web.com/saesales/product/2011526_53135.jpg\nhttp://file.siam2web.com/saesales/product/2011526_53135.jpg\nhttp://repositorio-aberto.up.pt/bitstream/10216/61507/1/000148272.pdf\nhttp://repositorio-aberto.up.pt/bitstream/10216/61507/1/000148272.pdf\nhttp://www.greencarcongress.com/2010/05/pike-20100525.html\nhttp://www.greencarcongress.com/2010/05/pike-20100525.html\nhttp://media.digikey.com/Photos/Honeywell%20Photos/CSLA1CE.JPG\nhttp://media.digikey.com/Photos/Honeywell%20Photos/CSLA1CE.JPG\nhttp://pt.wikipedia.org/wiki/HTML5\nhttp://pt.wikipedia.org/wiki/HTML5\nhttp://www.ti.com/lit/ds/symlink/tl7660.pdf\nhttp://www.intersil.com/content/dam/Intersil/documents/icl7/icl7660.pdf\nhttp://www.intersil.com/content/dam/Intersil/documents/icl7/icl7660.pdf\nhttp://www.isasensing.com/pt/pagina/98\nhttp://www.isasensing.com/pt/pagina/98\nhttp://media.digikey.com/photos/LEM%20Photos/LTS%2015-NP,LTS%2025-NP.jpg\nhttp://media.digikey.com/photos/LEM%20Photos/LTS%2015-NP,LTS%2025-NP.jpg\nhttp://www.lem.com/docs/products/lv%2025-p.pdf\nhttp://www.marktest.com/wap/a/n/id~18f8.aspx\nhttp://www.marktest.com/wap/a/n/id~18f8.aspx\n\n\nBIBLIOGRAFIA 57\n\n[Microchip] Microchip. Microcontrolador da microchip; consultado em:20/10/2014. Avai-\nlable from: http://en.wikipedia.org/wiki/PIC_microcontroller#mediaviewer/File:\nPIC_microcontrollers.jpg.\n\n[Microincasso] Microincasso. Microincasso; consultado em:20/08/2014. Available from: www.\nmicroincasso.nl.\n\n[Miguel and Miranda, 2011] Miguel, L. and Miranda, F. (2011). Ve\u00edculo el\u00e9trico com interface\npara a rede el\u00e9trica. (June).\n\n[Motorola] Motorola. Moc3020 semiconductor technical data; consultado em:22/05/2014.\nAvailable from: http://pdf.datasheetcatalog.com/datasheet/motorola/MOC3021.pdf.\n\n[NXP] NXP, B. Bt136-600 data sheet; consultado em:22/05/2014. Available from: http:\n//www.nxp.com/documents/data_sheet/BT136-600.pdf.\n\n[OLIMEX, 2008] OLIMEX (2008). Pic-gsm development board users manual. (June).\n\n[OLIMEX, 2013] OLIMEX (2013). Mod-gsm development board user's manual.\n\n[Omron] Omron. Relay omron; consultado em:20/10/2014. Available from: http://www.\nomron.com/ecb/products/pdf/en-g5le.pdf.\n\n[Point] Point, C. Charge point mobile app; consultado em: 06/10/2014. Available from:\nhttp://www.chargepoint.com/mobile.\n\n[Portugal, 2014] Portugal, G. (2014). Compromisso para o crescimento verde. page 6.\n\n[Rashdi et al., 2012] Rashdi, A., Malik, R., Rashid, S., Ajmal, A., and Sadiq, S. (2012). Re-\nmote energy monitoring, pro?ling and control through GSM network. 2012 International\nConference on Innovations in Information Technology (IIT), pages 184?188. Available from:\nhttp://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=6207728.\n\n[Reis, 2010] Reis, L. (2010). Modelo e sistema de carregamento para ve\u00edculos el\u00e9ctricos em\nportugal.\n\n[Research] Research, P. PIKE RESEARCH: SALES OF ELECTRIC CARS TO HIT 358,000\nBY 2017, CALIFORNIA LEADS THE WAY, EV CHARGING STATIONS TO LAG\nBEHIND - PBT; Consultado em: 20/08/2014. Available from: http://tommytoy.typepad.\ncom.\n\n[Sbordone et al., 2014] Sbordone, D., Bertini, I., Di Pietra, B., Falvo, M., Genovese, a., and\nMartirano, L. (2014). Ev fast charging stations and energy storage technologies: A real im-\nplementation in the smart micro grid paradigm. Electric Power Systems Research. Available\nfrom: http://linkinghub.elsevier.com/retrieve/pii/S0378779614002880.\n\n[Scholar, 2013] Scholar, P. G. (2013). Gsm based automatic energy meter reading system with\ninstant billing. pages 65?72.\n\n[Semiconductors et al.] Semiconductors, V., Data, M., and Table, P. Small signal transistors\n( npn ). (85113):1?9.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\nhttp://en.wikipedia.org/wiki/PIC_microcontroller#mediaviewer/File:PIC_microcontrollers.jpg\nhttp://en.wikipedia.org/wiki/PIC_microcontroller#mediaviewer/File:PIC_microcontrollers.jpg\nwww.microincasso.nl\nwww.microincasso.nl\nhttp://pdf.datasheetcatalog.com/datasheet/motorola/MOC3021.pdf\nhttp://www.nxp.com/documents/data_sheet/BT136-600.pdf\nhttp://www.nxp.com/documents/data_sheet/BT136-600.pdf\nhttp://www.omron.com/ecb/products/pdf/en-g5le.pdf\nhttp://www.omron.com/ecb/products/pdf/en-g5le.pdf\nhttp://www.chargepoint.com/mobile\nhttp://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=6207728\nhttp://tommytoy.typepad.com\nhttp://tommytoy.typepad.com\nhttp://linkinghub.elsevier.com/retrieve/pii/S0378779614002880\n\n\n58 BIBLIOGRAFIA\n\n[Solutions] Solutions, E. Av home ev chargers ? aerovironment, inc. online store. Available\nfrom: http://store.evsolutions.com/av-home-ev-chargers-c13.aspx.\n\n[Source and Driver, 1995] Source, G.-a.-d. I. and Driver, O.-c. S. T. (1995). Moc3020 thru\nmoc3023 optocouplers/optoisolators. (October 1986).\n\n[Speci?cation] Speci?cation, S. Sim300d at command set software.\n\n[Stations] Stations, C. C. Ct4000 family. pages 1?4.\n\n[Technology, 2006] Technology, M. (2006). Pic18f97j60 family 1 mbit ?ash microcontrollers\nwith ethernet.\n\n[Wattstation] Wattstation. Wattstation; consultado em:20/08/2014. Available from: https:\n//www.gewattstation.com/connect/.\n\n[Yuan et al., 2012] Yuan, Z., Xu, H., Han, H., and Zhao, Y. (2012). Research of smart charging\nmanagement system for electric vehicles based on wireless communication networks. 2012\nIEEE 6th International Conference on Information and Automation for Sustainability, pages\n242?247. Available from: http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?\narnumber=6419910.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\nhttp://store.evsolutions.com/av-home-ev-chargers-c13.aspx\nhttps://www.gewattstation.com/connect/\nhttps://www.gewattstation.com/connect/\nhttp://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=6419910\nhttp://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=6419910\n\n\nAp\u00eandice A\n\nDiagramas\n\n59\n\n\n\n60 A.Diagramas\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nA.Diagramas 61\n\nMicrocontroladorMicrocontrolador M\u00f3dulo GSM\n\n AT&lt;CR>\n\nOK\n\nATE0&lt;CR>\n\nOK\n\nAT+CMGF=1&lt;CR>\n\nOK\n\nAT+CMGR=1&lt;CR>\n\nOK\n\nciclo\n\nFigura A.1: Diagrama de comandos em ciclo normal.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n62 A.Diagramas\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nA.Diagramas 63\n\nMicrocontroladorMicrocontrolador M\u00f3dulo GSM\n\n AT&lt;CR>\n\nOK\n\nATE0&lt;CR>\n\nOK\n\nAT+CMGF=1&lt;CR>\n\nOK\n\nAT+CMGR=1&lt;CR>\n\n+CMGR: \"REC UNREAD\"/\"+351*********\"//\"yy/mm/dd/hh:mm:ss+ss\"..MMMM....OK.\n\nAT+CMGS=\"+351*********\"<CR><CR>\"A sua SMS possui erros. Por favor volte a tentar. Obrigado.&lt;CR>&lt;0x1A>\n\nOK\n\nAT+CMGDA=\"del all\"&lt;CR>\n\nOK\n\nciclo\n\nFigura A.2: Diagrama de envio/recep\u00e7\u00e3o de SMS quando h\u00e1 erros.\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n64 A.Diagramas\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nA.Diagramas 65\n\nVetor de \nInterrup\u00e7\u00e3o\n\nRC1IF ==1 ?\n\nN\u00e3o\n\nTMR1IF==1 ?\n\nSim\nRece\u00e7\u00e3o de \n\ncaracteres da porta \ns\u00e9rie \n\nrx[rxi]=RCREG\n\nSim TMR1IF=0\n\nN\u00e3o\n\nFim\n\nFigura A.3: Vetor Interrup\u00e7\u00e3o do Pic 18f97J60\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n66 A.Diagramas\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nA.Diagramas 67\n\nInicio\nInstru\u00e7\u00e3o de Escrita \n\nM\u00f3dulo GSM\nAT+CMGF=1\n\nLeitura da 1\u00aa \nMensagem\n\nAT+CMGD=1\n\nTem \nMensagem?\n\nSim\n\nLeu \u201cCARR xxxx\u201d\n\nN\u00e3o\n\nN\u00e3o\nEnvia mensagem de \n\nResposta \n\nSim\n\nMemoriza\u00e7\u00e3o dos 4 \ndigitos. \n\n\u201cA sua SMS possui \nerros. Por favor \nvolte a tentar. \n\nObrigado.\n\nInicio da Contagem \nda energia\n\nRB4=1 \n\nEnvio de mensagem \npara o cliente. \u201cO \n\ncarregamento de (4 \ndigitos) ws vai ser \n\nefetuado. Obrigado\n\nEnvia uma SMS ao \ncliente. \u201cO \n\ncarregamento \nterminou. Obrigado.\u201d\n\nFim\n\nElimina\u00e7\u00e3o da \nmensagem. \n\nAT+CMGA=\u201ddell all\u201d\n\nSim\n\nContagem \nterminou?\n\nN\u00e3o\n\nFigura A.4: Diagrama geral do Pic 18f97J60\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n68 A.Diagramas\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nAp\u00eandice B\n\nEsquemas El\u00e9tricos\n\n69\n\n\n\n70 B.Esquemas El\u00e9tricos\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nB.Esquemas El\u00e9tricos 71\n\nFigura B.1: Esquema representativo de montagem m\u00f3dulo Triac\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n72 B.Esquemas El\u00e9tricos\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nB.Esquemas El\u00e9tricos 73\n\n3\n\n2\n6\n\n4\n7\n\n1 5\n8\n\nU1\n\nAD623\n\nR1\n10k\n\nR2\n10k R3 10k\n\nR4\n10k\n\n5V\n\nR5\n10k\n\nC1\n\n10uF\n\nC2\n10uF\n\n5V\n\nEXT-25 (AN2)\n\nCAP+2\n\nCAP-4\n\nGND 3\n\nV+ 8\n\nVOUT 5LV6\nOSC7\n\nU4\n\nICL7660A\n\nCAP+2\n\nCAP-4\n\nGND 3\n\nV+ 8\n\nVOUT 5LV6\nOSC7\n\nU2\n\nTL7660C3\n1uF\n\n12V\n\nR6\n10k\n\nC4\n1uF\n\n+HT4\n\n-HT5 - 2\nOut 3\n\n+ 1\n\n12V\n\nLV25-P\n\nR7\n27k\n\nRM\n100\n\nFigura B.2: Esquema representativo de montagem do transdutor de tensao\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n74 B.Esquemas El\u00e9tricos\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\nB.Esquemas El\u00e9tricos 75\n\nIP+4\n\nIP-5\nVIOUT 3\n\nVCC 1\n\nGND 2\n\nU1\n\nCSLA1CD\n\n3\n\n2\n6\n\n4\n7\n\n1 5\n8\n\nU2\n\nAD623\n\nR1\n10k\n\nR2\n10k\n\nR3\n10k\n\n5V\n\n5V\n\nR4\n10k\n\nR5\n10k\n\nL\n\nL\n\nR6\n4.7k\n\nC1\n0.68uF\n\nEXT2-10 (AN6)\n\nFigura B.3: Esquema representativo de montagem do transdutor de corrente\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\n76 B.Esquemas El\u00e9tricos\n\nLu\u00edsa Manuel de Sousa Pereira Azeredo Disserta\u00e7\u00e3o de Mestrado\n\n\n\tConte\u00fado\n\tLista de Figuras\n\tLista de Tabelas\n\tAcr\u00f3nimos\n\tIntrodu\u00e7\u00e3o\n\tContexto\n\tProblema a resolver\n\tObjetivos\n\tOrganiza\u00e7\u00e3o\n\n\tEstado de Arte\n\tVe\u00edculo El\u00e9trico\n\tLegisla\u00e7\u00e3o associada \u00e0 implementa\u00e7\u00e3o do posto de abastecimento\n\tTecnologias de abastecimento\n\tEFACEC\n\tEV Solutions\n\tCharge Point\n\n\tEmpresas de Monitoriza\u00e7\u00e3o Gest\u00e3o de postos p\u00fablicos\n\tMOBI.E Mobilidade El\u00e9trica\n\tEssent\n\tWattstation\n\n\tProjetos Relacionados\n\t\"Electric vehicle charging infrastructure in Poland\" Poland\n\n\n\tSolu\u00e7\u00e3o Proposta\n\tPerspetiva Geral\n\tFuncionalidades do sistema\n\tRestri\u00e7\u00f5es\n\tApresenta\u00e7\u00e3o da solu\u00e7\u00e3o\n\n\tImplementa\u00e7\u00e3o do Posto de Abastecimento\n\tArquitetura do Sistema\n\tM\u00f3dulo 1\n\tM\u00f3dulo 2\n\tM\u00f3dulo 3\n\tConclus\u00e3o\n\n\tM\u00f3dulo 1- Controlo da passagem da corrente el\u00e9trica\n\tM\u00f3dulo 2 - Medi\u00e7\u00e3o da Energia\n\tMedi\u00e7\u00e3o da Corrente\n\tMedi\u00e7\u00e3o da Tens\u00e3o\n\tMicrocontrolador\n\n\tM\u00f3dulo 3 - Modem GSM/GPRS\n\tComunica\u00e7\u00e3o RS232\n\tComunica\u00e7\u00e3o TCP/IP\n\n\tS\u00edntese prot\u00f3tipo\n\n\tImplementa\u00e7\u00e3o do Sistema de Monitoriza\u00e7\u00e3o\n\tBase de dados MySQL\n\tP\u00e1gina WEB\n\n\tConclus\u00f5es e Trabalho futuro\n\tConclus\u00f5es\n\tTrabalho Futuro\n\n\tBibliografia\n\tDiagramas\n\tEsquemas El\u00e9tricos"}]}}}