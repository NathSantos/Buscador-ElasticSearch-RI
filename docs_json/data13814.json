{"add": {"doc": {"field": [{"@name": "docid", "#text": "BR-TU.17821"}, {"@name": "filename", "#text": "24626_000589374.pdf"}, {"@name": "filetype", "#text": "PDF"}, {"@name": "text", "#text": "UNIVERSIDADE FEDERAL DO RIO GRANDE DO SUL\nINSTITUTO DE INFORM\u00c1TICA\n\nPROGRAMA DE P\u00d3S-GRADUA\u00c7\u00c3O EM COMPUTA\u00c7\u00c3O\n\nCLAUDIO SCHEPKE\n\nDistribui\u00e7\u00e3o de Dados para\nImplementa\u00e7\u00f5es Paralelas do\nM\u00e9todo de Lattice Boltzmann\n\nDisserta\u00e7\u00e3o apresentada como requisito parcial\npara a obten\u00e7\u00e3o do grau de\nMestre em Ci\u00eancia da Computa\u00e7\u00e3o\n\nProf. Dr. Tiaraj\u00fa Asmuz Diverio\nOrientador\n\nProf. Dr. Nicolas Bruno Maillard\nCo-orientador\n\nPorto Alegre, mar\u00e7o de 2007\n\n\n\nCIP \u2013 CATALOGA\u00c7\u00c3O NA PUBLICA\u00c7\u00c3O\n\nSchepke, Claudio\n\nDistribui\u00e7\u00e3o de Dados para Implementa\u00e7\u00f5es Paralelas do M\u00e9-\ntodo de Lattice Boltzmann / Claudio Schepke. \u2013 Porto Alegre:\nPPGC da UFRGS, 2007.\n\n91 f.: il.\n\nDisserta\u00e7\u00e3o (mestrado) \u2013 Universidade Federal do Rio Grande\ndo Sul. Programa de P\u00f3s-Gradua\u00e7\u00e3o em Computa\u00e7\u00e3o, Porto Ale-\ngre, BR\u2013RS, 2007. Orientador: Tiaraj\u00fa Asmuz Diverio; Co-\norientador: Nicolas Bruno Maillard.\n\n1. Lattice Boltzmann. 2. Particionamento de Dados em Bloco.\n3. Processamento Paralelo. 4. Din\u00e2mica de Fluidos Computacio-\nnal. 5. Aplica\u00e7\u00f5es de Alto Desempenho. 6. Simula\u00e7\u00e3o Num\u00e9rica.\n7. Computa\u00e7\u00e3o Cient\u00edfica. I. Diverio, Tiaraj\u00fa Asmuz. II. Mail-\nlard, Nicolas Bruno. III. T\u00edtulo.\n\nUNIVERSIDADE FEDERAL DO RIO GRANDE DO SUL\nReitor: Prof. Jos\u00e9 Carlos Ferraz Hennemann\nPr\u00f3-Reitor de Coordena\u00e7\u00e3o Acad\u00eamica: Prof. Pedro Cezar Dutra Fonseca\nPr\u00f3-Reitora de P\u00f3s-Gradua\u00e7\u00e3o: Profa. Valqu\u00edria Linck Bassani\nDiretor do Instituto de Inform\u00e1tica: Prof. Fl\u00e1vio Rech Wagner\nCoordenadora do PPGC: Profa. Luciana Porcher Nedel\nBibliotec\u00e1ria-chefe do Instituto de Inform\u00e1tica: Beatriz Regina Bastos Haro\n\n\n\n\"As pessoas podem fazer seus planos,\npor\u00e9m \u00e9 o SENHOR Deus quem d\u00e1 a \u00faltima palavra,\n\nO cora\u00e7\u00e3o do homem pode fazer planos,\nmas a resposta dos l\u00e1bios vem do Senhor\"\n\n\u2014 PV 16.1 RA\n\n\n\nAGRADECIMENTOS\n\nReconhe\u00e7o a participa\u00e7\u00e3o de Deus em toda a minha vida. \u00c9 Ele quem dirige todos os\nmeus passos. Sem Ele eu n\u00e3o teria conseguido superar mais essa etapa da minha vida.\nN\u00e3o um deus qualquer, mas um Deus que me ama e que est\u00e1 pr\u00f3ximo de mim atrav\u00e9s da\nf\u00e9 implantada por Ele em meu cora\u00e7\u00e3o. Uma f\u00e9 que aceita o perd\u00e3o que Jesus Cristo me\noferece, a qual garante uma vida eterna no c\u00e9u.\n\nAgrade\u00e7o tamb\u00e9m:\nAos meus pais por sempre estarem preocupados comigo e com o andamento dos meus\n\ntrabalhos. Por eles terem me proporcionado condi\u00e7\u00f5es de chegar at\u00e9 aqui.\nA Diana, minha namorada, que me acompanha desde o in\u00edcio de produ\u00e7\u00e3o desta Dis-\n\nserta\u00e7\u00e3o. Por todo seu amor, carinho e compreens\u00e3o.\nAos meus amigos espalhados pelo Estado, Brasil e Mundo! Durante estes \u00faltimos\n\ndois anos eu pude fazer muitos amigos fora da minha vida acad\u00eamica, enquanto outros\ntiveram seus la\u00e7os de amizade refor\u00e7ados. Tais pessoas tem sido importantes nas decis\u00f5es\nde minha vida.\n\nAo professor Tiaraj\u00fa, pela sua amizade, orienta\u00e7\u00e3o e acolhimento. Um pessoa muito\nespecial que sempre indicou os melhores caminhos, bem como resolveu eficientemente\nquest\u00f5es administrativas, tornando minha vida de estudante mais f\u00e1cil. \u00d3timo compa-\nnheiro de viagem, sendo tamb\u00e9m bastante compreensivo em rela\u00e7\u00e3o a todas as quest\u00f5es\nda vida.\n\nAo professor Nicolas por ter norteado a etapa final do meu trabalho.\nAos colegas em seus mais diversos n\u00edveis de forma\u00e7\u00e3o, os quais, em sua maioria, s\u00e3o\n\nmeus companheiros de pesquisa oriundos do Laborat\u00f3rio de Sistemas de Computa\u00e7\u00e3o\n(LSC) da Universidade Federal de Santa Maria (UFSM). Tamb\u00e9m aos demais estudantes,\nvindo de diferentes universidades, que compuseram e comp\u00f5em o Grupo de Processa-\nmento Paralelo e Distribu\u00eddo (GPPD).\n\nAo Conselho Nacional de Desenvolvimento Cient\u00edfico e Tecnol\u00f3gico (CNPq) pelo\napoio financeiro.\n\nAh, sem esquecer, a todos os administradores de clusters por manterem a infraestru-\ntura das m\u00e1quinas funcionando para os testes...\n\nObrigado!\n\n\n\nSUM\u00c1RIO\n\nLISTA DE ABREVIATURAS E SIGLAS . . . . . . . . . . . . . . . . . . . . 7\n\nLISTA DE S\u00edMBOLOS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8\n\nLISTA DE FIGURAS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10\n\nLISTA DE TABELAS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13\n\nRESUMO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n\nABSTRACT . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n\n1 INTRODU\u00c7\u00c3O . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n1.1 Din\u00e2mica de Fluidos Computacional . . . . . . . . . . . . . . . . . . . . 16\n1.2 C\u00e1lculo Paralelo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18\n1.3 Objetivos e Contribui\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . 18\n1.4 Estrutura do Texto . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19\n1.5 Siglas, Nota\u00e7\u00e3o e Terminologia . . . . . . . . . . . . . . . . . . . . . . . 19\n\n2 DIN\u00c2MICA DE FLUIDOS . . . . . . . . . . . . . . . . . . . . . . . . . . 20\n2.1 Equa\u00e7\u00f5es de Euler . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n2.2 Equa\u00e7\u00f5es de Navier-Stokes . . . . . . . . . . . . . . . . . . . . . . . . . 22\n2.3 Equa\u00e7\u00e3o de Boltzmann . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23\n\n3 M\u00c9TODO DE LATTICE BOLTZMANN . . . . . . . . . . . . . . . . . . 25\n3.1 Lattice Gas Automata . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25\n3.2 Modelos de Reticulado . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26\n3.3 Equa\u00e7\u00f5es de Lattice Gas Automata e Algoritmo . . . . . . . . . . . . . . 29\n3.4 Descri\u00e7\u00e3o Informal do M\u00e9todo de Lattice Boltzmann . . . . . . . . . . . 31\n3.5 Equa\u00e7\u00e3o de Lattice Boltzmann . . . . . . . . . . . . . . . . . . . . . . . 32\n3.6 Condi\u00e7\u00f5es de Contorno . . . . . . . . . . . . . . . . . . . . . . . . . . . 34\n3.7 Rela\u00e7\u00e3o entre a Equa\u00e7\u00e3o de Lattice Boltzmann e a Equa\u00e7\u00e3o Cin\u00e9tica de\n\nNavier-Stokes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\n3.8 Algoritmo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36\n3.9 \u00c1reas de Aplica\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37\n3.10 Paraleliza\u00e7\u00e3o do M\u00e9todo de Lattice Boltzmann . . . . . . . . . . . . . . 38\n\n\n\n4 ESTADO DA ARTE EM T\u00c9CNICAS DE PARALELIZA\u00c7\u00c3O . . . . . . . 39\n4.1 Message Passing Interface . . . . . . . . . . . . . . . . . . . . . . . . . . 39\n4.2 Particionamento em Blocos . . . . . . . . . . . . . . . . . . . . . . . . . 40\n4.3 Implementa\u00e7\u00f5es Paralelas do M\u00e9todo de Lattice Boltzmann . . . . . . . 42\n4.4 Conclus\u00e3o: Posicionamento de Contribui\u00e7\u00e3o . . . . . . . . . . . . . . . . 44\n\n5 IMPLEMENTA\u00c7\u00c3O PARALELA DO M\u00c9TODO DE LATTICE BOLTZ-\nMANN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45\n\n5.1 Implementa\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45\n5.2 Paraleliza\u00e7\u00e3o . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46\n5.3 Fun\u00e7\u00f5es de MPI Utilizadas na Implementa\u00e7\u00e3o . . . . . . . . . . . . . . . 48\n5.4 An\u00e1lise Te\u00f3rica do Custo de Comunica\u00e7\u00e3o . . . . . . . . . . . . . . . . . 48\n5.4.1 An\u00e1lise da Implementa\u00e7\u00e3o Bidimensional . . . . . . . . . . . . . . . . . 49\n5.4.2 An\u00e1lise da Implementa\u00e7\u00e3o Tridimensional . . . . . . . . . . . . . . . . . 51\n5.4.3 Exemplos de C\u00e1lculo de Custos dos Particionamentos . . . . . . . . . . . 52\n\n6 RESULTADOS EXPERIMENTAIS: PARTICIONAMENTO LINEAR . . . 55\n6.1 Descri\u00e7\u00e3o do Programa de Testes . . . . . . . . . . . . . . . . . . . . . . 55\n6.2 Descri\u00e7\u00e3o dos Estudos de Caso . . . . . . . . . . . . . . . . . . . . . . . 57\n6.3 Ambiente de Execu\u00e7\u00e3o e Crit\u00e9rios para a Obten\u00e7\u00e3o dos Resultados . . . 58\n6.4 Resultados Obtidos para o Modelo Bidimensional . . . . . . . . . . . . . 59\n6.4.1 Resultados F\u00edsicos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59\n6.4.2 Resultados Computacionais do Particionamento Unidimensional . . . . . 61\n6.4.3 An\u00e1lise dos Resultados Computacionais . . . . . . . . . . . . . . . . . . 61\n6.5 Resultados Obtidos para o Modelo Tridimensional . . . . . . . . . . . . 63\n6.5.1 Resultados F\u00edsicos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63\n6.5.2 Resultados Computacionais do Particionamento Unidimensional . . . . . 63\n6.5.3 An\u00e1lise dos Resultados Computacionais . . . . . . . . . . . . . . . . . . 67\n\n7 RESULTADOS EXPERIMENTAIS: PARTICIONAMENTO EM BLOCOS 69\n7.1 Resultados Obtidos para o Modelo Bidimensional . . . . . . . . . . . . . 69\n7.1.1 Resultados Computacionais do Particionamento Multidimensional . . . . 69\n7.1.2 An\u00e1lise dos Resultados Computacionais . . . . . . . . . . . . . . . . . . 70\n7.2 Resultados Obtidos para o Modelo Tridimensional . . . . . . . . . . . . 71\n7.2.1 Resultados Computacionais do Particionamento Multidimensional . . . . 71\n7.2.2 An\u00e1lise dos Resultados Computacionais . . . . . . . . . . . . . . . . . . 76\n\n8 CONCLUS\u00c3O . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78\n8.1 Revis\u00e3o do Trabalho Desenvolvido . . . . . . . . . . . . . . . . . . . . . 78\n8.2 Contribui\u00e7\u00f5es . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79\n8.3 Trabalhos Futuros . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80\n\nREFER\u00caNCIAS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82\n\nGLOSS\u00c1RIO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88\n\nANEXO ARTIGOS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91\n\n\n\nLISTA DE ABREVIATURAS E SIGLAS\n\n2D Bidimensional\n\n3D Tridimensional\n\nBGK Bhatnagar, Gross e Krook\n\nRDD Regular Domain Decomposition\n\nDF Din\u00e2mica de Fluidos\n\nDFC Din\u00e2mica de Fluidos Computacional\n\nEB Equa\u00e7\u00e3o de Boltzmann\n\nEDP Equa\u00e7\u00e3o Diferencial Parcial\n\nEE Equa\u00e7\u00e3o de Euler\n\nELB Equa\u00e7\u00e3o Lattice Boltzmann\n\nENS Equa\u00e7\u00f5es de Navier-Stokes\n\nFHP Frisch, Hasslacher e Pomeau\n\nGPPD Grupo de Processamento Paralelo e Distribu\u00eddo\n\nHPP Hardy, Pazzis e Pomeau\n\nII Instituto de Inform\u00e1tica\n\nLGA Lattice Gas Automata\n\nLogP Latency, overhead, gap and Processors\n\nMLB M\u00e9todo de Lattice Boltzmann\n\nMPI Message Passing Interface\n\nORB Orthogonal Recursive Bisection\n\nSPMD Single Program Multiple Data\n\nUFRGS Universidade Federal do Rio Grande do Sul\n\n\n\nLISTA DE S\u00cdMBOLOS\n\n???? [-] Derivada parcial em rela\u00e7\u00e3o a um termo ?\n? [ ? ] Energia interna\n? [-] N\u00famero de Knudsen?\n\n[-] Tempo de relaxa\u00e7\u00e3o adimensional\n? [ \t?\n\n??? ] Viscosidade cin\u00e9tica\n? [ ??????\t?? ] Densidade\n? [ ? ] Tempo de relaxa\u00e7\u00e3o?\n\n[-] Operador de colis\u00e3o/relaxa\u00e7\u00e3o?????\n[-] Tensor de fluxo de momento?\n[-] Gradiente: soma dos vetores de derivadas parciais? \n [-] Operador Laplaciano\n\n? [ \t ????\n ] Acelera\u00e7\u00e3o\n! [ \t ??? ] Velocidade do som\n!\n\" [ \t ?#? ] Velocidade do som no MLB, equivalente a ! ?%$ &amp;'\n\n[-] N\u00famero de dire\u00e7\u00f5es poss\u00edveis de uma part\u00edcula em um reticulado\n(*) [ \t ??? ] Vetor de velocidade no reticulado+\n\n[\n?\n\n] Energia total,\n[ ??????\t ? ] Fun\u00e7\u00e3o de distribui\u00e7\u00e3o das micro-part\u00edculas,\n[ ??????\t?? ] Fun\u00e7\u00e3o de distribui\u00e7\u00e3o de equil\u00edbrio de Maxwell-Boltzmann-\n[ ????\t ??? ] For\u00e7a externa\n\n? [s] Intervalo m\u00ednimo entre o envio/recebimento de mensagens\n.\n\n[-] \u00cdndice do n\u00famero de dire\u00e7\u00f5es de deslocamento\n/\n\n[-] \u00cdndice de elementos do reticulado\n\n?10 [ ? ??? ] Constante de Boltzmann2\n[ ? ] Lat\u00eancia de Rede\n\n\t [ ??? ] Massa\n\n\n\n??? ??????? [-] Distribui\u00e7\u00e3o das part\u00edculas no reticulado em LGA\n\t\n\n[-] N\u00famero de part\u00edculas\n\n [ ??????\t ? \n ] Press\u00e3o\n?\n\n[\n? ??? ] Transfer\u00eancia de calor\n\n? [ ? ?\n? ] Entropia\n? [ ? ] Tempo\n? ? [s] Varia\u00e7\u00e3o de tempo\n?\n\n[ ? ] Temperatura\n? [ \t ??? ] Velocidade\n??????? [ ? . ? ??? ] Vaz\u00e3o\n? ) [-] Fator usado na fun\u00e7\u00e3o de equil\u00edbrio\n? [ \t ] Posi\u00e7\u00e3o espacial\n? ? [ \t ] Varia\u00e7\u00e3o de espa\u00e7o\n\n\n\nLISTA DE FIGURAS\n\nFigura 2.1: Descri\u00e7\u00e3o f\u00edsica de um fluido . . . . . . . . . . . . . . . . . . . . . . 21\nFigura 2.2: Rela\u00e7\u00e3o entre as abordagens microsc\u00f3picas, mesosc\u00f3picas e macros-\n\nc\u00f3picas . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n\nFigura 3.1: Passagem de um modelo microdin\u00e2mico para um modelo computaci-\nonal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25\n\nFigura 3.2: Esquema de um aut\u00f4mato celular . . . . . . . . . . . . . . . . . . . 26\nFigura 3.3: Modelo HPP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27\nFigura 3.4: Regras de colis\u00e3o do modelo HPP . . . . . . . . . . . . . . . . . . . 27\nFigura 3.5: Modelo FHP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27\nFigura 3.6: Regras de colis\u00e3o do modelo FHP . . . . . . . . . . . . . . . . . . . 28\nFigura 3.7: Modelo D2Q9 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28\nFigura 3.8: Sub-reticulado ??? . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28\nFigura 3.9: Sub-reticulado ??? . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28\nFigura 3.10: Sub-reticulado ? \n . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29\nFigura 3.11: Sub-reticulado ? ? . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29\nFigura 3.12: Ilustra\u00e7\u00e3o do modelo de propaga\u00e7\u00e3o e colis\u00e3o em LGA . . . . . . . . 30\nFigura 3.13: Exemplo de funcionamento do mecanismo de Bounce Back . . . . . 34\nFigura 3.14: Estrutura do algoritmo do MLB . . . . . . . . . . . . . . . . . . . . 37\n\nFigura 4.1: Exemplos de particionamento de dados: forma proporcional e forma\nc\u00edclica . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41\n\nFigura 4.2: Exemplos de particionamento dos dados para o modelo bidimensional 41\nFigura 4.3: Exemplos de particionamento dos dados para o modelo tridimensional 41\n\nFigura 5.1: Bordas de armazenamento de valores tempor\u00e1rios para sub-reticulados\ndo modelo bidimensional . . . . . . . . . . . . . . . . . . . . . . . . 47\n\nFigura 5.2: Fluxo de comunica\u00e7\u00e3o entre processos para a implementa\u00e7\u00e3o bidi-\nmensional e tridimensional . . . . . . . . . . . . . . . . . . . . . . . 47\n\nFigura 5.3: Esquema de funcionamento do modelo LogP (CULLER et al., 1996) 49\nFigura 5.4: Exemplo de comunica\u00e7\u00e3o dos pontos das faces na implementa\u00e7\u00e3o bi-\n\ndimensional . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\nFigura 5.5: Exemplo de comunica\u00e7\u00e3o dos pontos diagonais na implementa\u00e7\u00e3o\n\nbidimensional . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\nFigura 5.6: Exemplo de comunica\u00e7\u00e3o dos pontos das faces na implementa\u00e7\u00e3o tri-\n\ndimensional . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51\nFigura 5.7: Exemplo de comunica\u00e7\u00e3o dos pontos diagonais na implementa\u00e7\u00e3o\n\ntridimensional . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\n\n\n\nFigura 6.1: Uso dos pontos centrais do eixo ? para o c\u00e1lculo da velocidade m\u00e9dia 56\nFigura 6.2: Disposi\u00e7\u00e3o das barreiras no reticulado bidimensional . . . . . . . . . 57\nFigura 6.3: Disposi\u00e7\u00e3o da barreira no reticulado tridimensional . . . . . . . . . . 58\nFigura 6.4: Evolu\u00e7\u00e3o da velocidade m\u00e9dia do fluxo durante a execu\u00e7\u00e3o das itera\u00e7\u00f5es 59\nFigura 6.5: Visualiza\u00e7\u00e3o da velocidade em rela\u00e7\u00e3o ao eixo ? do fluxo ap\u00f3s 90.000,\n\n120.000 e 150.000 itera\u00e7\u00f5es . . . . . . . . . . . . . . . . . . . . . . 60\nFigura 6.6: Visualiza\u00e7\u00e3o da press\u00e3o do fluxo ap\u00f3s 150.000 itera\u00e7\u00f5es . . . . . . . 61\nFigura 6.7: Tempo total de execu\u00e7\u00e3o usando o particionamento unidimensional\n\nno modelo bidimensional . . . . . . . . . . . . . . . . . . . . . . . . 62\nFigura 6.8: Ganho de desempenho usando o particionamento unidimensional no\n\nmodelo bidimensional . . . . . . . . . . . . . . . . . . . . . . . . . 62\nFigura 6.9: Velocidade do fluxo nas regi\u00f5es formadas pelos pontos 32, 64 e 96\n\ndo eixo ? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64\nFigura 6.10: Distribui\u00e7\u00e3o da press\u00e3o do fluxo nas regi\u00f5es formadas pelos pontos\n\n32, 64 e 96 do eixo ? . . . . . . . . . . . . . . . . . . . . . . . . . . 65\nFigura 6.11: Velocidade do fluxo nas regi\u00f5es formadas pelos pontos 42, 43 e 44\n\ndo eixo ? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66\nFigura 6.12: Tempo total de execu\u00e7\u00e3o usando o particionamento unidimensional\n\nno modelo tridimensional . . . . . . . . . . . . . . . . . . . . . . . 67\nFigura 6.13: Ganho de desempenho usando o particionamento unidimensional no\n\nmodelo tridimensional . . . . . . . . . . . . . . . . . . . . . . . . . 67\n\nFigura 7.1: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento do modelo bidimensional . . . 69\n\nFigura 7.2: Tempo de execu\u00e7\u00e3o obtido utilizando 36 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento do modelo bidimensional . . . 70\n\nFigura 7.3: Tempo de execu\u00e7\u00e3o obtido utilizando 40 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento do modelo bidimensional . . . 70\n\nFigura 7.4: Tempo de execu\u00e7\u00e3o obtido utilizando 27 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento do modelo tridimensional . . . 71\n\nFigura 7.5: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento em 2 dimens\u00f5es do modelo tri-\ndimensional . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\n\nFigura 7.6: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento em 3 dimens\u00f5es do modelo tri-\ndimensional . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\n\nFigura 7.7: Tempo de execu\u00e7\u00e3o obtido utilizando 40 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento em 2 dimens\u00f5es do modelo tri-\ndimensional . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\n\nFigura 7.8: Tempo de execu\u00e7\u00e3o obtido utilizando 40 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento em 3 dimens\u00f5es do modelo tri-\ndimensional . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\n\nFigura 7.9: Ganho de desempenho utilizando os menores tempos paralelos de\nexecu\u00e7\u00e3o obtidos pelas diferentes configura\u00e7\u00f5es de particionamento\ndo modelo tridimensional . . . . . . . . . . . . . . . . . . . . . . . 74\n\nFigura 7.10: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento em 2 dimens\u00f5es do modelo tri-\ndimensional para um reticulado de 256 X 256 X 256 pontos . . . . . 74\n\n\n\nFigura 7.11: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento em 3 dimens\u00f5es do modelo tri-\ndimensional para um reticulado de 256 X 256 X 256 pontos . . . . . 75\n\nFigura 7.12: Tempo de execu\u00e7\u00e3o obtido utilizando 64 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento em 2 dimens\u00f5es do modelo tri-\ndimensional para um reticulado de 256 X 256 X 256 pontos . . . . . 75\n\nFigura 7.13: Tempo de execu\u00e7\u00e3o obtido utilizando 64 processadores para diferen-\ntes configura\u00e7\u00f5es de particionamento em 3 dimens\u00f5es do modelo tri-\ndimensional para um reticulado de 256 X 256 X 256 pontos . . . . . 76\n\n\n\nLISTA DE TABELAS\n\nTabela 3.1: Diferen\u00e7as entre o modelo real e LGA . . . . . . . . . . . . . . . . . 26\nTabela 3.2: Velocidade relativa das part\u00edculas para cada uma das dire\u00e7\u00f5es do re-\n\nticulado . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29\nTabela 3.3: Valores de algumas propriedades para diversos modelos de reticulado 29\nTabela 3.4: Vantagens e desvantagens de LGA . . . . . . . . . . . . . . . . . . . 31\nTabela 3.5: Peso dos fatores ? ) para os vetores de velocidades discretas ( ) de\n\ndiferentes modelos de reticulado . . . . . . . . . . . . . . . . . . . . 33\nTabela 3.6: Principais diferen\u00e7as entre a resolu\u00e7\u00e3o utilizando as ENS e o MLB . . 36\n\nTabela 7.1: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 32, 36 e 40\nprocessadores para as divis\u00f5es em 1 e 2 dimens\u00f5es . . . . . . . . . . 70\n\nTabela 7.2: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 27 processa-\ndores para as divis\u00f5es em 1, 2 e 3 dimens\u00f5es . . . . . . . . . . . . . 72\n\nTabela 7.3: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 32 processa-\ndores para as divis\u00f5es em 1, 2 e 3 dimens\u00f5es . . . . . . . . . . . . . 72\n\nTabela 7.4: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 40 processa-\ndores para as divis\u00f5es em 1, 2 e 3 dimens\u00f5es . . . . . . . . . . . . . 73\n\nTabela 7.5: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 32 processa-\ndores para as divis\u00f5es em 1, 2 e 3 dimens\u00f5es para um reticulado de\n256 X 256 X 256 pontos . . . . . . . . . . . . . . . . . . . . . . . . 75\n\nTabela 7.6: Rela\u00e7\u00e3o entre os melhores e piores tempos de execu\u00e7\u00e3o usando 32 e\n64 processadores para as divis\u00f5es em 2 e 3 dimens\u00f5es de um reticu-\nlado de 256 X 256 X 256 pontos . . . . . . . . . . . . . . . . . . . . 75\n\n\n\nRESUMO\n\nA Din\u00e2mica de Fluidos Computacional \u00e9 uma importante \u00e1rea de pesquisa no contexto\nda Computa\u00e7\u00e3o Cient\u00edfica. Atrav\u00e9s da modelagem e simula\u00e7\u00e3o das propriedades de l\u00edqui-\ndos e gases \u00e9 poss\u00edvel obter resultados num\u00e9ricos para diferentes estruturas e fen\u00f4menos\nf\u00edsicos cotidianos e de grande import\u00e2ncia econ\u00f4mica. A evolu\u00e7\u00e3o dos sistemas compu-\ntacionais possibilitou a essa \u00e1rea o surgimento de novas t\u00e9cnicas e abordagens de simu-\nla\u00e7\u00e3o. Uma das t\u00e9cnicas computacionais atualmente empregadas \u00e9 o M\u00e9todo de Lattice\nBoltzmann, um m\u00e9todo num\u00e9rico iterativo para a modelagem e simula\u00e7\u00e3o mesosc\u00f3pica\nda din\u00e2mica de fluxos de fluidos. Diferentes tipos de sistemas f\u00edsicos podem ser trata-\ndos atrav\u00e9s dessa t\u00e9cnica, como \u00e9 o caso de fluxos em meios porosos ou de subst\u00e2ncias\nimisc\u00edveis. No entanto, por causa da dimens\u00e3o dos sistemas f\u00edsicos, \u00e9 necess\u00e1rio adotar\nestrat\u00e9gias que permitam a obten\u00e7\u00e3o de resultados precisos ou em tempos computacionais\naceit\u00e1veis. Assim, paralelizar as opera\u00e7\u00f5es \u00e9 a solu\u00e7\u00e3o mais indicada para aumentar o de-\nsempenho do m\u00e9todo. Uma maneira eficiente de paralelizar um m\u00e9todo num\u00e9rico \u00e9 fazer\nuso de t\u00e9cnicas de distribui\u00e7\u00e3o de dados refinadas, como \u00e9 o caso do particionamento em\nblocos. Tais abordagens de paraleliza\u00e7\u00e3o foram adotadas neste trabalho em implemen-\nta\u00e7\u00f5es bi- e tridimensionais do M\u00e9todo de Lattice Boltzmann, com o intuito de avaliar\no ganho de desempenho oferecido atrav\u00e9s dessa t\u00e9cnica. Al\u00e9m disso, foram definidos\nos fatores que influenciam as melhores configura\u00e7\u00f5es de particionamento. Os resultados\nobtidos demonstraram que o particionamento em blocos prove um aumento consider\u00e1vel\ndo desempenho das aplica\u00e7\u00f5es paralelas, especialmente para a vers\u00e3o tridimensional do\nm\u00e9todo. Para algumas configura\u00e7\u00f5es dos estudos de caso os tempos de execu\u00e7\u00e3o diminu\u00ed-\nram em at\u00e9 30% em rela\u00e7\u00e3o aos tempos obtidos com o particionamento unidimensional.\nJ\u00e1 as melhores configura\u00e7\u00f5es para a distribui\u00e7\u00e3o dos dados em blocos foram aquelas em\nque a disposi\u00e7\u00e3o dos dados manteve-se mais quadrada ou c\u00fabica em rela\u00e7\u00e3o a cada uma\ndas dimens\u00f5es coordenadas.\n\nPalavras-chave: Lattice Boltzmann, Particionamento de Dados em Bloco, Processa-\nmento Paralelo, Din\u00e2mica de Fluidos Computacional, Aplica\u00e7\u00f5es de Alto Desempenho,\nSimula\u00e7\u00e3o Num\u00e9rica, Computa\u00e7\u00e3o Cient\u00edfica.\n\n\n\nABSTRACT\n\nData Distribution for Parallel Implementations of the Lattice Boltzmann Method\n\nComputational Fluid Dynamics is an important research area in the Scientific Com-\nputing context. Through the modeling and simulation of liquids and gases properties it\nis possible to get numerical results for different physical structures and daily phenomena\nthat have great economic importance. The evolution of the computational systems made\nit possible to develop new techniques and approaches of simulation in this area. One of\nthese techniques currently used is the Lattice Boltzmann Method. This method is an itera-\ntive numerical strategy for modeling and simulating mesoscopic dynamics of fluid flows.\nDifferent types of physical systems can be simulated through this technique, like immis-\ncible substances and flows in porous media. However, since the dimension of the physical\nsystems is usually large, it is necessary to adopt strategies that allow to get accurate results\nor results in an acceptable computational time. Thus, the parallelization of the operations\nis the best alternative to increase the performance of the method. An efficient way to\nparallelize a numerical method is to make use of refined data distribution techniques, like\ndata partitioning in blocks. Such parallelization approach had been adopted in this work\nfor bi- and three-dimensional implementations of the Lattice Boltzmann Method. The\nobjective of the work was to evaluate the performance enhancement offered through the\nparallelization. Moreover, another objective is to define the elements that influence the\nbest partitioning configurations. The results shown that data partitioning in blocks pro-\nvide a considerable performance increase for parallel implementations, especially for the\nthree-dimensional version of the method. For some configurations adopted in the case\nstudies, the execution time was reduced of up to 30% in relation to the one-dimensional\npartitioning strategy. The best configurations for data distribution in blocks were that\nwhere the data disposal are more square or cubical shaped in relation to each one of the\ncoordinate dimensions.\n\nKeywords: Lattice-Boltzmann, Block Data Partitioning, Parallel Processing, Computa-\ntional Fluid Dynamics, High Performance Application, Numerical Simulation, Scientific\nComputing.\n\n\n\n16\n\n1 INTRODU\u00c7\u00c3O\n\nO uso de arquiteturas paralelas (ANDREWS, 2001) tem sido recorrente na resolu-\n\u00e7\u00e3o de Aplica\u00e7\u00f5es Cient\u00edficas (LUCQUIN; PIRONNEAU, 1998) e, em especial, na \u00e1rea\nda Din\u00e2mica de Fluidos Computacional. Esse fato pode ser observado na descri\u00e7\u00e3o das\nprincipais \u00e1reas de pesquisa feitas utilizando as 500 m\u00e1quinas de maior capacidade de\nprocessamento existentes no mundo, as quais se encontram relacionadas na lista TOP500\n(http://www.top500.org). Al\u00e9m dessas pesquisas, existem ainda, em n\u00edvel local, diversos\ntrabalhos desenvolvidos pelo Grupo de Processamento Paralelo e Distribu\u00eddo (GPPD) do\nInstituto de Inform\u00e1tica (II) da Universidade Federal do Rio Grande do Sul (UFRGS) que\nexploram o paralelismo como forma de aumentar o desempenho de aplica\u00e7\u00f5es da Din\u00e2-\nmica de Fluidos Computacional (RIZZI, 2002; DORNELES, 2003; GALANTE, 2006).\n\n1.1 Din\u00e2mica de Fluidos Computacional\n\nA Din\u00e2mica de Fluidos (DF) \u00e9 uma \u00e1rea de pesquisa de grande relev\u00e2ncia tecnol\u00f3gica.\nAtrav\u00e9s do estudo de fen\u00f4menos que ocorrem com l\u00edquidos e gases a DF busca relacionar\ndiferentes propriedades f\u00edsicas, tais como: velocidade, press\u00e3o, temperatura e densidade\nem fun\u00e7\u00e3o do tempo e do espa\u00e7o (BATCHELOR, 1987). Os trabalhos desenvolvidos\nnessa \u00e1rea possibilitam a simula\u00e7\u00e3o de diversos sistemas f\u00edsicos associados a fen\u00f4me-\nnos cotidianos e de grande relev\u00e2ncia, incluindo o efeito de maremotos, a simula\u00e7\u00e3o de\nfurac\u00f5es, a previs\u00e3o de secas ou inunda\u00e7\u00f5es e a distribui\u00e7\u00e3o de part\u00edculas poluentes na\natmosfera ou em reservat\u00f3rios naturais de \u00e1gua.\n\nA evolu\u00e7\u00e3o dos sistemas computacionais disponibilizou \u00e0 DF novos rumos as pes-\nquisas e, conseq\u00fcentemente, o avan\u00e7o da Ci\u00eancia. Com isso, foi poss\u00edvel melhorar os\nm\u00e9todos de resolu\u00e7\u00e3o baseados em simula\u00e7\u00f5es num\u00e9ricas, modelar diversos fen\u00f4menos e\nestruturas, visualizar sistemas f\u00edsicos atrav\u00e9s de modelos espec\u00edficos (SIMS et al., 2000),\nbem como explorar o paralelismo com a finalidade de obter resultados de forma mais efi-\nciente. Essa \u00e1rea \u00e9 conhecida como Din\u00e2mica de Fluidos Computacional (DFC), sendo\nbastante abrangente no contexto da Computa\u00e7\u00e3o Cient\u00edfica (ANDERSON, 1995; VERS-\nTEEG; MALALASEKRA, 1995).\n\nNa DFC, fluidos s\u00e3o normalmente descritos atrav\u00e9s das Equa\u00e7\u00f5es de Euler (EE) ou de\nNavier-Stokes (ENS) (LANDAU; LIFSHITZ, 1982). Tais equa\u00e7\u00f5es relacionam as dife-\nrentes propriedades f\u00edsicas e as for\u00e7as que governam um determinado fluxo macrosc\u00f3pico.\nUma vez que a solu\u00e7\u00e3o alg\u00e9brica n\u00e3o \u00e9 vi\u00e1vel, resolver computacionalmente o sistema de\nequa\u00e7\u00f5es passa a ser uma das melhores alternativas encontradas. Para que isso seja pos-\ns\u00edvel, \u00e9 necess\u00e1rio, primeiramente, que o sistema de equa\u00e7\u00f5es seja discretizado. A partir\nda representa\u00e7\u00e3o discreta e das defini\u00e7\u00f5es das condi\u00e7\u00f5es de contorno, pode-se obter a\nsolu\u00e7\u00e3o apropriada para as equa\u00e7\u00f5es atrav\u00e9s de algum m\u00e9todo num\u00e9rico espec\u00edfico.\n\n\n\n17\n\nEmbora a simula\u00e7\u00e3o em n\u00edvel macrosc\u00f3pico seja perfeitamente vi\u00e1vel, apenas em\numa pequena parcela das simula\u00e7\u00f5es \u00e9 poss\u00edvel gerar resultados suficientemente preci-\nsos (BUICK, 1997). Isso porque abordagens macrosc\u00f3picas s\u00e3o geralmente insens\u00edveis\n\u00e0 din\u00e2mica microsc\u00f3pica envolvida, de modo que as quantidades f\u00edsicas que deveriam\nser modificadas dinamicamente durante a simula\u00e7\u00e3o acabam permanecendo constantes\n(WOLF; SANTOS; PHILIPPI, 2006). Conseq\u00fcentemente, as solu\u00e7\u00f5es de todas as equa-\n\u00e7\u00f5es que descrevem um fluxo somente podem ser feitas de forma aproximada.\n\nUma outra abordagem poss\u00edvel para a simula\u00e7\u00e3o de fluidos \u00e9 a utiliza\u00e7\u00e3o de um mo-\ndelo molecular (HOCKNEY; EASTWOOD, 1988). Nesse caso, a simula\u00e7\u00e3o ocorre em\nn\u00edvel de intera\u00e7\u00e3o entre mol\u00e9culas, as quais s\u00e3o regidas pelas leis de movimento de New-\nton, que determinam a posi\u00e7\u00e3o e a velocidade de cada mol\u00e9cula (BHATNAGAR; GROSS;\nKROOK, 1954). J\u00e1 as propriedades f\u00edsicas s\u00e3o obtidas atrav\u00e9s de resultados estat\u00edsticos\ndo comportamento coletivo das mol\u00e9culas. Do ponto de vista computacional, essa abor-\ndagem ainda possui limita\u00e7\u00f5es, visto que as escalas de espa\u00e7o e tempo poss\u00edveis de serem\nsimuladas est\u00e3o longe do tamanho real de muitas aplica\u00e7\u00f5es (WOLF; SANTOS; PHI-\nLIPPI, 2006).\n\nObservando a import\u00e2ncia da din\u00e2mica microsc\u00f3pica e ao mesmo tempo superando as\nlimita\u00e7\u00f5es do modelo molecular, foram introduzidos modelos mesosc\u00f3picos de sistemas\nde part\u00edculas (HARDY; POMEAU; PAZZIS, 1973). Um dos primeiros modelos desen-\nvolvidos foi a t\u00e9cnica de Lattice Gas Automata (LGA) (FRISCH et al., 1987). Em LGA,\nas part\u00edculas representam um conjunto de mol\u00e9culas cuja quantidade \u00e9 inferior a menor\nescala usada na simula\u00e7\u00e3o, o que reduz o n\u00famero de pontos a ser simulado. A simula\u00e7\u00e3o\nocorre em tempo, espa\u00e7o e velocidades discretas, tornando simples sua implementa\u00e7\u00e3o.\nAl\u00e9m disso, a intera\u00e7\u00e3o entre as part\u00edculas ocorre apenas entre os elementos vizinhos\natrav\u00e9s de opera\u00e7\u00f5es l\u00f3gicas.\n\nApesar da praticidade do modelo LGA, existem algumas limita\u00e7\u00f5es na modelagem\ndas propriedades f\u00edsicas dos fluidos, especialmente na forma de represent\u00e1-las. As mo-\ndifica\u00e7\u00f5es realizadas em LGA deram origem ao M\u00e9todo de Lattice Boltzmann (MLB)\n(CHEN; DOOLEN, 1998; SUCCI, 2001). Diferente de LGA, o MLB n\u00e3o considera o\nmovimento individual das part\u00edculas, mas usa valores reais, ao inv\u00e9s de l\u00f3gicos, para a\npropaga\u00e7\u00e3o das informa\u00e7\u00f5es pelo reticulado. Al\u00e9m de ser entendido como uma evolu\u00e7\u00e3o\nde LGA, o MLB pode ser visto tamb\u00e9m como uma representa\u00e7\u00e3o discreta da Equa\u00e7\u00e3o de\nBoltzmann (EB), base da teoria cin\u00e9tica dos gases (CHEN; DOOLEN, 1998; HE; LUO,\n1997a; MCNAMARA; ZANETTI, 1988). O m\u00e9todo satisfaz, ainda, as ENS para din\u00e2-\nmica de fluidos em regime incompress\u00edvel (HE; LUO, 1997b).\n\nAs aplica\u00e7\u00f5es pr\u00e1ticas do MLB possibilitam a modelagem computacional de uma am-\npla variedade de problemas, incluindo a simula\u00e7\u00e3o de escoamentos de fluidos em estrutu-\nras complexas e escoamentos de fluidos imisc\u00edveis. A literatura apresenta muitas aplica-\n\u00e7\u00f5es que utilizam implementa\u00e7\u00f5es do MLB. Isso pode ser visto em trabalhos relacionados\n\u00e0 hemodin\u00e2mica (FANG et al., 2002), fen\u00f4menos gasosos (WEI et al., 2004), pol\u00edmeros\nl\u00edquidos (ONISHI; CHEN; OHASHI, 2005), nanofluidos (XUAN; YU; LI, 2005) e trans-\nporte de subst\u00e2ncias (MASSELOT, 2000). Tamb\u00e9m existem alguns trabalhos envolvendo\na simula\u00e7\u00e3o de fluxos em geometrias complexas, especialmente em meios porosos como\nrochas, concreto e solo (WU et al., 2005; GUOI; ZHAO, 2005).\n\nEm termos de simula\u00e7\u00e3o computacional, o MLB t\u00eam uma necessidade maior de re-\ncursos do que os exigidos por outros m\u00e9todos num\u00e9ricos, como \u00e9 o caso das t\u00e9cnicas dis-\ncretas de resolu\u00e7\u00e3o das ENS (SUCCI, 2001). Devido \u00e0 relev\u00e2ncia do MLB e da dimens\u00e3o\ndos problemas que podem ser explorados atrav\u00e9s dessa t\u00e9cnica, os quais atingem tempos\n\n\n\n18\n\ncomputacionais elevados ou inaceit\u00e1veis, \u00e9 importante que o m\u00e9todo apresente bons n\u00ed-\nveis de desempenho. Como as intera\u00e7\u00f5es s\u00e3o essencialmente locais, envolvendo apenas as\npart\u00edculas vizinhas, paralelizar as opera\u00e7\u00f5es apresenta-se como uma \u00f3tima possibilidade\npara agregar efici\u00eancia ao m\u00e9todo (K\u00d6RNER et al., 2005; DUPUIS, 2002). Al\u00e9m disso,\na paraleliza\u00e7\u00e3o torna vi\u00e1vel a solu\u00e7\u00e3o de casos onde a quantidade de mem\u00f3ria necess\u00e1ria\npara o armazenamento das informa\u00e7\u00f5es do reticulado \u00e9 maior do que o dispon\u00edvel em um\nsistema monoprocessado. Para tanto, existem diversas alternativas dispon\u00edveis, tanto em\ntermos de arquiteturas paralelas, quanto em termos de recursos de programa\u00e7\u00e3o paralela.\n\n1.2 C\u00e1lculo Paralelo\n\nPara o desenvolvimento de aplica\u00e7\u00f5es paralelas existem basicamente duas aborda-\ngens, a saber: o Paralelismo de Tarefas e o Paralelismo de Dados (FOSTER, 1995). No\nParalelismo de Tarefas ou Decomposi\u00e7\u00e3o Funcional a aplica\u00e7\u00e3o \u00e9 particionada em v\u00e1rias\ntarefas colaborativas. Assim, \u00e9 poss\u00edvel executar diferentes trechos de c\u00f3digo simultanea-\nmente. J\u00e1 no Paralelismo de Dados ou Decomposi\u00e7\u00e3o de Dom\u00ednios os dados s\u00e3o divididos\ne atribu\u00eddos aos processadores, de maneira que cada processador atue somente sobre o seu\nconjunto de dados. Para tanto, \u00e9 necess\u00e1rio apenas um \u00fanico fluxo de instru\u00e7\u00e3o.\n\nNo caso de aplica\u00e7\u00f5es num\u00e9ricas, tais como as desenvolvidas a partir do MLB, as\nimplementa\u00e7\u00f5es paralelas s\u00e3o geralmente elaboradas utilizando o Paralelismo de Dados.\nUm aspecto importante nessa abordagem \u00e9 a forma de particionar os dados. Uma boa\ndistribui\u00e7\u00e3o para arquiteturas homog\u00eaneas ocorre quando todos os processadores t\u00eam a\nmesma carga de trabalho. No caso de todas as opera\u00e7\u00f5es aplicadas sobre os elementos do\nconjunto de dados serem as mesmas e considerando que a capacidade de processamento\ndos processadores \u00e9 semelhante entre si, a melhor forma de distribuir os dados \u00e9 partici-\nonar o problema pelo n\u00famero total de processadores dispon\u00edvel. No entanto, a maneira\ncomo isso ocorre pode influenciar no desempenho das aplica\u00e7\u00f5es devido a uma s\u00e9rie de\nfatores tais como: distribui\u00e7\u00e3o e acesso aos dados em mem\u00f3ria, taxa de acerto de cache,\ndepend\u00eancia de dados e equil\u00edbrio de carga.\n\nUma maneira de aumentar o desempenho das aplica\u00e7\u00f5es paralelas \u00e9 utilizar uma estra-\nt\u00e9gia de particionamento de dados em bloco. Isso \u00e9 feito dividindo-se os dados dispostos\nem estruturas multidimensionais coordenadas em duas ou mais dimens\u00f5es. O uso de\nalgoritmos paralelos com particionamento em bloco tem como objetivo reduzir a movi-\nmenta\u00e7\u00e3o de dados entre os diversos n\u00edveis de hierarquia da mem\u00f3ria. Assim, \u00e9 poss\u00edvel\nacessar um maior n\u00famero de regi\u00f5es de mem\u00f3ria cont\u00ednuas, bem como evitar falhas de\nacesso a cache. Em sistemas de mem\u00f3ria distribu\u00edda, onde existe depend\u00eancia de dados,\n\u00e9 poss\u00edvel diminuir ainda os custos das comunica\u00e7\u00f5es interprocessos.\n\n1.3 Objetivos e Contribui\u00e7\u00e3o\n\nSob o contexto apresentado anteriormente, o objetivo desse trabalho consiste em ana-\nlisar o desempenho paralelo do MLB usando diferentes estrat\u00e9gias de distribui\u00e7\u00e3o de\ndados. Para tanto foram feitas implementa\u00e7\u00f5es paralelas do m\u00e9todo, tanto de um mo-\ndelo bidimensional, quanto de um modelo tridimensional. Os testes foram feitos em uma\narquitetura de cluster (WILKINSON; ALLEN, 1998), sendo testadas diferentes configu-\nra\u00e7\u00f5es de mapeamento de dados aos processadores usando o particionamento em blocos.\nCom isso, foram determinadas as abordagens de particionamento mais eficientes e os\nfatores que interagem para a defini\u00e7\u00e3o dessas melhores formas.\n\n\n\n19\n\nApesar de existirem avalia\u00e7\u00f5es de desempenho para o MLB em diversas arquiteturas,\numa lacuna encontrada nos trabalhos relacionados \u00e0 paraleliza\u00e7\u00e3o do m\u00e9todo est\u00e1 na falta\nde uma an\u00e1lise cr\u00edtica entre as estrat\u00e9gias de particionamento de dados que podem ser\nadotadas. Avalia\u00e7\u00f5es desse tipo s\u00e3o importantes pois ajudam a definir as estrat\u00e9gias que\npermitem explorar ao m\u00e1ximo o potencial paralelo de uma arquitetura. Assim, \u00e9 poss\u00edvel\natingir \u00edndices mais elevados de desempenho, especialmente em arquiteturas onde isso\nn\u00e3o ocorre atrav\u00e9s de esquemas de particionamento mais simples. Neste contexto, a prin-\ncipal contribui\u00e7\u00e3o desta disserta\u00e7\u00e3o \u00e9 a resolu\u00e7\u00e3o paralela de modelos bidimensionais e\ntridimensionais do MLB, utilizando estrat\u00e9gias otimizadas de particionamento de dados\npara ambientes de mem\u00f3ria distribu\u00edda.\n\n1.4 Estrutura do Texto\n\nA fim de contextualizar o leitor, o Cap\u00edtulo 2 e o Cap\u00edtulo 3 apresentam o embasa-\nmento cient\u00edfico deste trabalho, tratando das principais equa\u00e7\u00f5es da Din\u00e2mica de Fluidos\ne da fundamenta\u00e7\u00e3o te\u00f3rica do MLB, enquanto que o Cap\u00edtulo 4 relaciona a revis\u00e3o bi-\nbliogr\u00e1fica sobre o tema proposto. Inicialmente, no Cap\u00edtulo 2 s\u00e3o mostradas as EE e as\nENS, que regem as propriedades macrosc\u00f3picas dos fluidos, e a Equa\u00e7\u00e3o de Boltzmann,\nque relaciona a din\u00e2mica microsc\u00f3pica dos fluidos com a din\u00e2mica macrosc\u00f3pica. O Ca-\np\u00edtulo 3 descreve o MLB, relatando o desenvolvimento do m\u00e9todo a partir de LGA, suas\nequa\u00e7\u00f5es, os modelos de reticulado, as condi\u00e7\u00f5es de contorno, o esbo\u00e7o do algoritmo e as\n\u00e1reas de aplica\u00e7\u00e3o do m\u00e9todo. J\u00e1 no Cap\u00edtulo 4 \u00e9 apresentado o estado da arte das t\u00e9cnicas\nde paraleliza\u00e7\u00e3o, destacando as implementa\u00e7\u00f5es paralelas desenvolvidas para o m\u00e9todo\nem trabalhos anteriores.\n\nOs demais cap\u00edtulos relacionam o desenvolvimento do trabalho propriamente dito. No\nCap\u00edtulo 5 s\u00e3o descritas as implementa\u00e7\u00f5es paralelas feitas para o MLB, bem como uma\nan\u00e1lise te\u00f3rica dos custos de comunica\u00e7\u00e3o dos modelos implementados. O Cap\u00edtulo 6\napresenta os estudos de caso e os resultados obtidos usando o particionamento linear dos\ndados, al\u00e9m de alguns resultados f\u00edsicos. J\u00e1 no Cap\u00edtulo 7 s\u00e3o destacados e analisados\nos valores num\u00e9ricos obtidos atrav\u00e9s do particionamento em bloco, os quais s\u00e3o com-\nparados com os resultados alcan\u00e7ados com o particionamento linear. Por fim, algumas\nconsidera\u00e7\u00f5es s\u00e3o apresentadas no Cap\u00edtulo 8 como conclus\u00e3o do trabalho.\n\n1.5 Siglas, Nota\u00e7\u00e3o e Terminologia\n\nComo forma de auxiliar o melhor entendimento do texto foram disponibilizados di-\nversos recursos de leitura:\n\n? Os valores por extenso das abreviaturas e siglas utilizadas na disserta\u00e7\u00e3o podem ser\nobtidos na se\u00e7\u00e3o LISTA DE ABREVIATURAS E SIGLAS, localizada na P\u00e1gina 7;\n\n? A sem\u00e2ntica dos termos (s\u00edmbolos e letras) usados nas f\u00f3rmulas \u00e9 encontrada a\npartir da P\u00e1gina 8 na se\u00e7\u00e3o LISTA DE S\u00cdMBOLOS. Para cada caso \u00e9 relacionado\nainda entre colchetes a unidade de medida que delimita a sua grandeza f\u00edsica. Nos\ncasos onde n\u00e3o existe uma m\u00e9trica \u00e9 utilizado um tra\u00e7o como indicador;\n\n? Para a compreens\u00e3o do significado dos termos t\u00e9cnicos \u00e9 poss\u00edvel consultar um\ngloss\u00e1rio registrado a partir da P\u00e1gina 88.\n\n\n\n20\n\n2 DIN\u00c2MICA DE FLUIDOS\n\nA descri\u00e7\u00e3o f\u00edsica de um fluido \u00e9 geralmente feita de forma macrosc\u00f3pica atrav\u00e9s da\nMec\u00e2nica Cont\u00ednua, que trata das propriedades f\u00edsicas de materiais cont\u00ednuos (s\u00f3lidos e\nfluidos), sem se importar com a microestrutura de seus componentes. Nessa abordagem\ns\u00e3o utilizadas equa\u00e7\u00f5es diferenciais tanto para expressar as leis fundamentais da f\u00edsica\n(conserva\u00e7\u00e3o de massa e momento, por exemplo) quanto para as caracter\u00edsticas espec\u00ed-\nficas do material analisado. As principais equa\u00e7\u00f5es adotadas para essa abordagem s\u00e3o\na Equa\u00e7\u00e3o de Euler (EE) e a Equa\u00e7\u00e3o de Navier-Stokes (ENS) (LANDAU; LIFSHITZ,\n1982).\n\nUma forma alternativa para a descri\u00e7\u00e3o de um fluido pode ser definido atrav\u00e9s de um\nmodelo microsc\u00f3pico, usando-se a F\u00edsica Estat\u00edstica (REIF, 1965). Uma abordagem es-\ntat\u00edstica apresenta-se adequada para sistemas onde o n\u00famero de vari\u00e1veis \u00e9 muito grande,\nao ponto da solu\u00e7\u00e3o determin\u00edstica ser imposs\u00edvel de ser encontrada ou irrelevante, ou\nem din\u00e2micas n\u00e3o lineares, como \u00e9 o caso da din\u00e2mica de fluidos. Nesse contexto, os\nproblemas s\u00e3o solucionados atrav\u00e9s de aproxima\u00e7\u00f5es e expans\u00f5es anal\u00edticas, ou atrav\u00e9s\nde simula\u00e7\u00f5es e solu\u00e7\u00f5es aproximadas via processamento computacional.\n\nAtrav\u00e9s da Teoria Cin\u00e9tica dos Gases, desenvolvida por Ludwig Boltzmann no final\ndo s\u00e9culo XIX, foram dados os primeiros passos para determinar o comportamento ma-\ncrosc\u00f3pico de um fluido a partir de um modelo microsc\u00f3pico. No modelo microsc\u00f3pico,\no movimento das part\u00edculas \u00e9 descrito atrav\u00e9s das Leis de Newton, o que possibilitou\nrelacionar as propriedades microsc\u00f3picas e macrosc\u00f3picas atrav\u00e9s de uma fun\u00e7\u00e3o conhe-\ncida por Equa\u00e7\u00e3o de Boltzmann (EB) (CERCIGNANI, 1994; BARDOS; UKAI, 1991).\nA Figura 2.1 ilustra as duas abordagens discutidas anteriormente, relacionando entre si os\nmodelos e as propriedades f\u00edsicas.\n\nAl\u00e9m das abordagens microsc\u00f3pica e macrosc\u00f3pica, \u00e9 poss\u00edvel representar um fluido,\nainda, atrav\u00e9s de uma abordagem mesosc\u00f3pica. Tal abordagem est\u00e1 baseada em uma es-\ncala onde \u00e9 poss\u00edvel analisar as propriedades do material ou fen\u00f4meno, sem se importar\ncom a estrutura individual das part\u00edculas. Neste caso, as grandezas m\u00e9dias s\u00e3o suficientes\npara caracterizar os efeitos observados nos sistemas ali considerados, sem exigir o co-\nnhecimento das distribui\u00e7\u00f5es das grandezas microsc\u00f3picas. Modelos de Lattice Gas e de\nLattice Boltzmann s\u00e3o exemplos t\u00edpicos para a representa\u00e7\u00e3o de fluidos utilizando abor-\ndagens mesosc\u00f3picas. Uma rela\u00e7\u00e3o entre esses modelos e as abordagens microsc\u00f3picas\n\u00e9 apresentada na Figura 2.2, onde \u00e0 medida que a hierarquia se dirige ao topo, diminui a\ndepend\u00eancia dos detalhes microsc\u00f3picos.\n\nSob o contexto discutido anteriormente, este cap\u00edtulo descreve as equa\u00e7\u00f5es relacio-\nnadas ao processo de desenvolvimento do M\u00e9todo de Lattice Boltzmann. Para tanto, s\u00e3o\napresentadas inicialmente as equa\u00e7\u00f5es de Euler e Navier-Stokes, utilizadas na descri\u00e7\u00e3o\nde fluxos sob o ponto de vista macrosc\u00f3pico. Na seq\u00fc\u00eancia, a Equa\u00e7\u00e3o de Boltzmann\n\n\n\n21\n\n?, ? ?m, v, \n\nSimula\u00e7\u00e3o\nNum\u00e9rica\n\np, v, \n\nModelo Microsc\u00f3pico\n\nLeis de NewtonEqua\u00e7\u00f5es de Navier?Stokes\n\nEqua\u00e7\u00e3o de Boltzmann\n\nModelo Macrosc\u00f3pico\n\nFigura 2.1: Descri\u00e7\u00e3o f\u00edsica de um fluido\n\nLattice Boltzmann\n\nMacro\n\nMicro\n\nMeso\n\nNavier?Stokes\n\nBoltzmann\n\nNewton Din\u00e2mica Molecular\n\nLattice Gas\n\nFigura 2.2: Rela\u00e7\u00e3o entre as abordagens microsc\u00f3picas, mesosc\u00f3picas e macrosc\u00f3picas\n\n\u00e9 apresentada, sendo esta a base do desenvolvimento do MLB, o qual ser\u00e1 demonstrado\nposteriormente.\n\n2.1 Equa\u00e7\u00f5es de Euler\n\nNa Din\u00e2mica de Fluidos, as Equa\u00e7\u00f5es de Euler (EE) governam fluxos onde a viscosi-\ndade e a condu\u00e7\u00e3o do calor n\u00e3o \u00e9 levada em considera\u00e7\u00e3o (LANDAU; LIFSHITZ, 1982).\nBaseadas na Segunda Lei de Newton, as EE s\u00e3o equivalentes \u00e0s ENS com viscosidade\nnula. Sendo ? a densidade, ? o tempo, ? a velocidade, \n \u00e9 a press\u00e3o e + a energia total\ndada por unidade de volume (energia cin\u00e9tica e interna), na forma diferencial, as equa\u00e7\u00f5es\nde conserva\u00e7\u00e3o de massa, momento e energia s\u00e3o apresentadas como:? ?? ? ? ??? ? ? ? ????? (2.1)\n\n? ? ?? ? ? ??? ? ? ? ? ? ? ? \n ??? (2.2)? +? ? ? ??? ? ? ? + ? \n ?????\t? ? (2.3)\nNessas equa\u00e7\u00f5es, o operador\n\n?\nrepresenta o vetor espacial de derivadas parciais\n\n\n ???? ? ???? ? ???\n?? .\n\n\n\n22\n\n2.2 Equa\u00e7\u00f5es de Navier-Stokes\n\nHistoricamente, as Equa\u00e7\u00f5es de Navier-Stokes (ENS) s\u00e3o modifica\u00e7\u00f5es feitas a partir\ndas EE com o objetivo de inserir as for\u00e7as de viscosidade ( ? ) e condu\u00e7\u00e3o de calor (en-\ntropia ? ) oriundas de intera\u00e7\u00f5es moleculares (LANDAU; LIFSHITZ, 1982). As ENS s\u00e3o\num conjunto de Equa\u00e7\u00f5es Diferenciais Parciais (EDP) n\u00e3o lineares utilizadas para descre-\nver praticamente qualquer fluxo de fluido no qual existe algum interesse de estudo. Tais\nequa\u00e7\u00f5es s\u00e3o usadas para representar uma vasta gama de fen\u00f4menos, tais como: fluxos\nde \u00e1gua em canais, correntes oce\u00e2nicas e movimentos de massas de ar na atmosfera. As\nsolu\u00e7\u00f5es das ENS dependem somente das propriedades dos fluidos e das condi\u00e7\u00f5es de\ncontorno das propriedades f\u00edsicas analisadas. No entanto, a solu\u00e7\u00e3o num\u00e9rica das equa-\n\u00e7\u00f5es, considerando todos os fatores que interagem na forma\u00e7\u00e3o das mesmas, \u00e9 bastante\ndif\u00edcil, sendo freq\u00fcentemente simplificadas de sua defini\u00e7\u00e3o original.\n\nDevido \u00e0s limita\u00e7\u00f5es impostas pelo modelo, a solu\u00e7\u00e3o exata das equa\u00e7\u00f5es completas\nsomente \u00e9 poss\u00edvel para os casos em que o fluxo \u00e9 laminar. Assim, para amostras em\npequenas escalas ou sob condi\u00e7\u00f5es extremas, para fluidos reais baseados em misturas de\npart\u00edculas discretas ou de outros materiais, tais como part\u00edculas suspensas e gases dissol-\nvidos, os resultados gerados ser\u00e3o diferentes dos apresentados pela modelagem cont\u00ednua\ne homog\u00eanea (simula\u00e7\u00e3o real). Nesses casos, as ENS descrevem os fluxos apenas aproxi-\nmadamente.\n\nUma das premissas para que seja poss\u00edvel descrever um fluxo atrav\u00e9s das ENS \u00e9 de\nque as propriedades do fluxo sejam diferenci\u00e1veis e cont\u00ednuas. Considerando ? a visco-\nsidade do fluido,\n\n-\numa for\u00e7a externa que atua atrav\u00e9s da massa do fluido, ? a entropia\n\npor unidade de massa,\n?\n\na transfer\u00eancia de calor e\n?\n\na temperatura, as condi\u00e7\u00f5es de con-\nserva\u00e7\u00e3o de massa, momento e energia podem ser satisfeitas pelas ENS, sendo definidas,\nrespectivamente pelas equa\u00e7\u00f5es 2.1, 2.4 e 2.5:? ?? ? ??? ? ? ? ? ? ? ?\n\n?\n\n? ? \n ? ? ? \n ? ?\n-\n? (2.4)\n\n? ?? ? ??? ? ? ? ? ?\n?\n? (2.5)\n\nA equa\u00e7\u00e3o de conserva\u00e7\u00e3o de massa em Navier-Stokes \u00e9 a mesma que \u00e9 utilizada em\nEuler. Na Equa\u00e7\u00e3o 2.4 \u00e9 definida a conserva\u00e7\u00e3o de momento linear atrav\u00e9s dos vetores\ndas equa\u00e7\u00f5es irrotacionais de Navier-Stokes, as quais relacionam massa, press\u00e3o, visco-\nsidade e for\u00e7a externa (gravidade, in\u00e9rcia, ...) de acordo com a lei de Newton para fluidos\n(LANDAU; LIFSHITZ, 1982). J\u00e1 a varia\u00e7\u00e3o da quantidade de energia de um sistema \u00e9\ndefinida atrav\u00e9s da Equa\u00e7\u00e3o 2.5, onde s\u00e3o consideradas a taxa de transfer\u00eancia de calor e a\ntemperatura do fluido. As equa\u00e7\u00f5es podem ser simplificadas para determinados casos em\nque algumas condi\u00e7\u00f5es s\u00e3o constantes, como \u00e9 o caso de for\u00e7as externas nulas, aus\u00eancia\nde press\u00e3o ou viscosidade baixa e, assim, simplificar a resolu\u00e7\u00e3o das mesmas.\n\nAs ENS s\u00e3o equa\u00e7\u00f5es parciais de segunda ordem que n\u00e3o possuem uma solu\u00e7\u00e3o anal\u00ed-\ntica conhecida, exceto para um pequeno n\u00famero de casos especiais. A Din\u00e2mica de Flui-\ndos Computacional busca apresentar t\u00e9cnicas num\u00e9ricas para solucionar a n\u00e3o linearidade\ndos termos das ENS ou de equa\u00e7\u00f5es derivadas destas atrav\u00e9s de diferentes m\u00e9todos (FER-\nZIGER; PERIC, 2002). O uso de modelos lineares e microsc\u00f3picos para a simula\u00e7\u00e3o de\nfluidos \u00e9 uma alternativa para a solu\u00e7\u00e3o direta das equa\u00e7\u00f5es macrosc\u00f3picas. Todavia, es-\nsas t\u00e9cnicas precisam ser condizentes com as ENS apresentadas anteriormente (FRISCH;\nHASSLACHER; POMEAU, 1986; CHEN; CHEN; MATTHAEUS, 1992).\n\n\n\n23\n\n2.3 Equa\u00e7\u00e3o de Boltzmann\n\nA Equa\u00e7\u00e3o de Boltzmann (EB) \u00e9 uma das principais equa\u00e7\u00e3o da Teoria Cin\u00e9tica, uma\n\u00e1rea da F\u00edsica Estat\u00edstica que trata da din\u00e2mica de processos em desequil\u00edbrio e sua con-\nverg\u00eancia para o equil\u00edbrio termodin\u00e2mico (CERCIGNANI, 1994). A equa\u00e7\u00e3o foi origi-\nnalmente desenvolvida para um sistema de expans\u00e3o de gases. Atualmente, ela pode ser\nutilizada tamb\u00e9m para uma s\u00e9rie de outras \u00e1reas da F\u00edsica Estat\u00edstica, tais como as que\nenvolvem a dispers\u00e3o e transporte de part\u00edculas em l\u00edquidos, o deslocamento de el\u00e9trons\nem semicondutores e as pesquisas com l\u00edquidos qu\u00e2nticos. \u00c9 importante ressaltar que\na deriva\u00e7\u00e3o da equa\u00e7\u00e3o cl\u00e1ssica de Boltzmann satisfaz as equa\u00e7\u00f5es de conserva\u00e7\u00e3o dos\nfluidos, sendo poss\u00edvel obter a ENS a partir daquela (BARDOS; UKAI, 1991).\n\nA equa\u00e7\u00e3o cl\u00e1ssica de Boltzmann descreve uma fun\u00e7\u00e3o de distribui\u00e7\u00e3o em termos\nde intera\u00e7\u00e3o microdin\u00e2mica. O desenvolvimento da equa\u00e7\u00e3o baseia-se no fato de que um\nsistema pode ser descrito estatisticamente atrav\u00e9s de uma fun\u00e7\u00e3o de distribui\u00e7\u00e3o\n\n, ? ??? ( ????? ,\nonde ? e ( representam, respectivamente, os vetores de posi\u00e7\u00e3o espacial e de velocidade\ndas part\u00edculas em um instante de tempo ? . Para um determinado instante ? o n\u00famero de\nmol\u00e9culas existentes em um espa\u00e7o\n\n' ? com velocidade ' ( \u00e9 definido por , ? ??? ( ????? ' ? ' ( .\nConsiderando que n\u00e3o existem colis\u00f5es entre as part\u00edculas, ent\u00e3o em um instante de tempo\n? ? ' ? cada uma das part\u00edculas ter\u00e1 se movido de ? para ? ? ( ' ? e a sua velocidade ter\u00e1\nmudado de ( para ( ? ? ' ? , sendo ? a acelera\u00e7\u00e3o das part\u00edculas devido \u00e0 a\u00e7\u00e3o de uma for\u00e7a\nexterna. Como o n\u00famero de mol\u00e9culas se mant\u00e9m constante, ent\u00e3o:\n\n, ? ? ? ( ' ??? ( ? ? ' ????? ? ' ??? ? ? ? ( ? , ? ??? ( ????? ? ? ? ( ??? (2.6)\nEntretanto, caso ocorram colis\u00f5es entre as part\u00edculas, o n\u00famero de part\u00edculas colididas\n\nser\u00e1 definido como a diferen\u00e7a entre\n, ? ? ? ( ' ??? ( ? ? ' ????? ? ' ??? ? ? ? ( e , ? ??? ( ????? ? ? ? ( .\n\nEssa diferen\u00e7a pode ser definida como\n? ? , ? ??? ( ??????? ' ? ' ( ' ? , onde ? ? , ? ??? ( ??????? \u00e9 um\n\noperador de colis\u00e3o. Dessa forma,\n\n, ? ? ? ( ' ??? ( ? ? ' ????? ? ' ??? ? ? ? ( ? , ? ??? ( ????? ? ? ? ( ? ? ? , ? ??? ( ??????? ? ? ? ( ? ? (2.7)\nDividindo-se a equa\u00e7\u00e3o por\n\n? ? ? ? ? ( e considerando que o limite de ? ??? ? , obt\u00e9m-\nse a Equa\u00e7\u00e3o Cl\u00e1ssica de Boltzmann (BUICK, 1997):? ?? ? ( ?\n\n?? ( ? ?\n?? ??? , ? ??? ( ????? ? ? ? , ? ??? ( ??????? (2.8)\n\nA densidade ? , a velocidade ? e a energia interna ? s\u00e3o obtidas, respectivamente, atra-\nv\u00e9s da fun\u00e7\u00e3o de distribui\u00e7\u00e3o\n\n, ? ??? ( ????? , sendo \t a massa molecular, conforme expressam\nas equa\u00e7\u00f5es:\n\n? ? ??????????? \t , ? ??? ( ????? ' ( (2.9)\n? ? ??????? ? ? ??????? ??? \t ( , ? ??? ( ????? ' ( (2.10)\n\n? ? ??????? ? ? ??????? ? ?? ? \t ? ( ?\n\t ? \n , ? ??? ( ????? ' ( (2.11)\nPara a solu\u00e7\u00e3o da equa\u00e7\u00e3o de Boltzmann \u00e9 preciso encontrar um operador de colis\u00e3o\n\nadequado e que obede\u00e7a \u00e0s regras de conserva\u00e7\u00e3o de massa, momento e energia, definidas\n\n\n\n24\n\nnas Equa\u00e7\u00f5es 2.9, 2.10 e 2.11. Um operador de colis\u00e3o simples pode ser obtido retendo\napenas as propriedades qualitativas e a m\u00e9dia das propriedades do operador de colis\u00e3o\nreal. A id\u00e9ia baseia-se em um tempo de relaxa\u00e7\u00e3o constante, conforme expressa o modelo\nBGK (Bhatnagar, Gross, Krook) (FLEKK\u00f8Y, 1993):\n\n? ??? , ? ??? ( ????? ? , ? ??? ( ?????? (2.12)\nNessa equa\u00e7\u00e3o, ? \u00e9 o tempo de relaxa\u00e7\u00e3o (grandeza de tempo entre duas colis\u00f5es) e, ? ??? ( ????? \u00e9 a fun\u00e7\u00e3o distribui\u00e7\u00e3o de probabilidade de equil\u00edbrio local de Maxwell-Boltzmann\n(Teorema H) definido normalmente por:\n\n, ? ?\t\n? \t??? ?10 ? ?\n\n? ?\n( ? \n\n\n?\n??\t ? ( ? ? ? \n? ? 0 ? ? (2.13)\n\nSendo ? 0 a constante de Boltzmann, com o valor aproximado de ? ??&amp; ? ?????\n\t ? ????\n ?\nJ/K, onde \n????? ?\n\n, ? ? ? ' ? ? ? .\nUma vez definido o contexto da \u00e1rea, as equa\u00e7\u00f5es macrosc\u00f3picas que descrevem flu-\n\nxos de fluidos e a base para o desenvolvimento do MLB, o pr\u00f3ximo passo \u00e9 apresentar\no funcionamento do m\u00e9todo. Para tanto, o Cap\u00edtulo 3 exp\u00f5e, de forma aprofundada, as\nequa\u00e7\u00f5es, o modelo e o algoritmo do MLB proposto.\n\n\n\n25\n\n3 M\u00c9TODO DE LATTICE BOLTZMANN\n\nO M\u00e9todo de Lattice Boltzmann (MLB) tem sido freq\u00fcentemente utilizado como um\nmodelo alternativo para a simula\u00e7\u00e3o computacional da Din\u00e2mica de Fluidos definidas\npelas equa\u00e7\u00f5es de Navier-Stokes (SUCCI, 2001). Desenvolvido a partir da equa\u00e7\u00e3o de\ntransporte de Boltzmann, base da teoria cin\u00e9tica dos fluidos, ou atrav\u00e9s do m\u00e9todo de\nLGA, o MLB \u00e9 empregado em uma ampla variedade de pesquisas devido ao seu grande\npotencial para simula\u00e7\u00e3o de fluxos turbulentos, fluxos em m\u00faltiplas fases e fluxos com\ncondi\u00e7\u00f5es de contorno irregulares.\n\nEste Cap\u00edtulo descreve o MLB, apresentando as id\u00e9ias de modelos para a representa-\n\u00e7\u00e3o de fluidos, as equa\u00e7\u00f5es relacionadas e um algoritmo para o m\u00e9todo. S\u00e3o ressaltadas\nainda as diferen\u00e7as do m\u00e9todo em rela\u00e7\u00e3o a outras abordagens, especialmente em rela\u00e7\u00e3o\na m\u00e9todos de resolu\u00e7\u00e3o diretos das equa\u00e7\u00f5es de Navier-Stokes, como tamb\u00e9m o desen-\nvolvimento do m\u00e9todo em seus diversos aspectos. Para tanto, s\u00e3o discutidas inicialmente\nas caracter\u00edsticas de Lattice Gas Automata e as modifica\u00e7\u00f5es impostas a essa t\u00e9cnica que\nderam origem ao MLB.\n\n3.1 Lattice Gas Automata\n\nAs ENS apresentadas no cap\u00edtulo anterior, e que est\u00e3o relacionadas com a abordagem\nmicrosc\u00f3pica atrav\u00e9s da EB, podem ser simuladas numericamente atrav\u00e9s do m\u00e9todo de\nLattice Gas Automata (LGA) (FRISCH et al., 1987). Esse m\u00e9todo de simula\u00e7\u00e3o \u00e9 obtido\natrav\u00e9s da simplifica\u00e7\u00e3o e da discretiza\u00e7\u00e3o da microdin\u00e2mica de um fluido, conforme ilus-\ntra a Figura 3.1. Desta forma, a distribui\u00e7\u00e3o das part\u00edculas passa a ocorrer sob um modelo\nregular e restrito, o que simplifica a simula\u00e7\u00e3o das part\u00edculas. As principais diferen\u00e7as\nentre o modelo real e o LGA est\u00e3o sumarizadas na Tabela 3.1.\n\nGas Real\n\nr, v, t\n\nm, v, ?\n\nFigura 3.1: Passagem de um modelo microdin\u00e2mico para um modelo computacional\n\n\n\n26\n\nTabela 3.1: Diferen\u00e7as entre o modelo real e LGA\nCaracter\u00edstica Modelo Real LGA\n\nMassa das part\u00edculas Diferentes Iguais\nDeslocamento Aleat\u00f3rio e Itera\u00e7\u00f5es de propaga\u00e7\u00e3o\ndas part\u00edculas interativo e de colis\u00f5es simples\n\nMomento Cont\u00ednuo Discreto\n\nLGA pode ser entendido como uma classe de aut\u00f4mato celular aplicado a microdi-\nn\u00e2mica de fluidos, sendo, por isso, conhecido tamb\u00e9m como Lattice Gas Cellular Auto-\nmata. Um aut\u00f4mato celular \u00e9 um modelo discreto que consiste de um conjunto infinito\ne regular de c\u00e9lulas distribu\u00eddas em uma malha, no qual cada uma das c\u00e9lulas possui um\nn\u00famero finito de estados, sendo a malha formada por um n\u00famero qualquer de dimens\u00f5es\nfinitas, conforme ilustra a Figura 3.2. As regras de propaga\u00e7\u00e3o das c\u00e9lulas s\u00e3o definidas\nem fun\u00e7\u00e3o do estado das c\u00e9lulas vizinhas, sendo as mesmas v\u00e1lidas para todas as c\u00e9lulas.\nA atualiza\u00e7\u00e3o das c\u00e9lulas ocorre simultaneamente em intervalos de tempo discretos.\n\nFigura 3.2: Esquema de um aut\u00f4mato celular\n\nNo caso dos fluidos, cada um dos estados das c\u00e9lulas representa uma caracter\u00edstica\nf\u00edsica, como a dire\u00e7\u00e3o da velocidade, que vai sendo alterada, conforme as defini\u00e7\u00f5es do\naut\u00f4mato. O uso de um aut\u00f4mato celular para a modelagem da estrutura microsc\u00f3pica de\num fluido tem a vantagem de poder ser facilmente implementado computacionalmente,\numa vez que o computador \u00e9 uma m\u00e1quina de estados e, portanto, capaz de processar de\numa maneira simples o fluxo (troca de estados) de um fluido. Todas as c\u00e9lulas obedecem\nas mesmas regras, sendo atualizadas simultaneamente em tempos discretos. Em LGA e\nno MLB, os aut\u00f4matos celulares utilizados para descrever um fluido s\u00e3o representados\npor estruturas conhecidas por reticulado.\n\n3.2 Modelos de Reticulado\n\nNa literatura existem diversos modelos de reticulado (QIAN; D\u2019HUMI\u00c8RES; LAL-\nLEMAND, 1992; WOLF-GLADROW, 2000). O primeiro modelo proposto \u00e9 um reticu-\nlado quadrado bidimensional conhecido como HPP (Hardy, Pazzis e Pomeau) (HARDY;\nPOMEAU; PAZZIS, 1973). Um reticulado quadrado possui somente quatro dire\u00e7\u00f5es de\ndeslocamento poss\u00edveis para cada part\u00edcula, conforme pode ser visto na Figura 3.3. Tanto\na velocidade como a massa das part\u00edculas s\u00e3o definidos como valores unit\u00e1rios. Caso haja\num choque entre as part\u00edculas, estas devem imediatamente ocupar os dois outros n\u00f3s n\u00e3o\nocupados anteriormente, conforme ilustra a Figura 3.4.\n\nUma defici\u00eancia desse modelo \u00e9 de que a estrutura dos gases n\u00e3o \u00e9 isotr\u00f3pica, j\u00e1 que\no modelo n\u00e3o garante invari\u00e2ncia rotacional, o que impossibilita a obten\u00e7\u00e3o de resultados\nreais precisos (WEI et al., 2004).\n\n\n\n27\n\nFigura 3.3: Modelo HPP\n\n???\n???\n???\n???\n\n?\n?\n?\n?\n?\n?\n\n???\n???\n???\n???\n???\n???\n\n???\n???\n???\n???\n\nFigura 3.4: Regras de colis\u00e3o do modelo HPP\n\nOutro modelo conhecido como FHP (Frisch, Hasslacher e Pomeau), mas que garante\na isotropia, baseia-se em um reticulado hexagonal bidimensional, conforme ilustra a Fi-\ngura 3.5. Nele, cada part\u00edcula pode percorrer seis dire\u00e7\u00f5es e, conseq\u00fcentemente, ter seis\ndire\u00e7\u00f5es de velocidade diferentes (FRISCH et al., 1987). As diferentes regras de colis\u00e3o\npara o modelo FHP s\u00e3o apresentadas na Figura 3.6.\n\nFigura 3.5: Modelo FHP\n\nPara cada colis\u00e3o de part\u00edculas em sentidos opostos, ocorre um desvio de ? ? ? , man-\ntendo, desta forma, o momento no estado seguinte \u00e0 colis\u00e3o igual a zero. Quando m\u00fal-\ntiplas possibilidades existirem, \u00e9 feita uma escolha aleat\u00f3ria para a defini\u00e7\u00e3o do novo\nestado.\n\nUm modelo de reticulado geralmente recebe uma nomenclatura de acordo com a sua\nestrutura geom\u00e9trica e o seu modelo de propaga\u00e7\u00e3o de part\u00edculas. Assim, o modelo HPP\nvisto anteriormente \u00e9 conhecido tamb\u00e9m por D2Q5, uma vez que o mesmo \u00e9 representado\nbidimensionalmente e possui 4 dire\u00e7\u00f5es de deslocamento al\u00e9m de uma posi\u00e7\u00e3o est\u00e1tica.\nJ\u00e1 o modelo FHP pode ser denominado de D2Q7, considerando o fato do mesmo ser\nbidimensional e com 6 dire\u00e7\u00f5es de deslocamento mais uma posi\u00e7\u00e3o est\u00e1tica.\n\nOutros modelos bidimensionais podem apresentar um n\u00famero maior de dire\u00e7\u00f5es de\ndeslocamento. A Figura 3.7 apresenta um modelo com 8 dire\u00e7\u00f5es poss\u00edveis, sendo que as\nvelocidades nas dire\u00e7\u00f5es horizontais ?\n\t ? ??? ? e verticais ? ? ? \t ? ? s\u00e3o unit\u00e1rias e a veloci-\ndade das diagonais ??\t ? ? \t ? ? s\u00e3o de $ ? .\n\nModelos mais avan\u00e7ados de reticulados podem ser obtidos em estruturas tridimensi-\n\n\n\n28\n\n?\n??\n?\n\n???\n???\n???\n???\n???\n???\n\n?\n??\n?\n\n?\n??\n?\n\n\t\n\t\n\n\n\n\n?\n??\n?\n\n\n\n?\n?\n\n?\n??\n?\n\n?\n??\n?\n\n?\n?\n?\n?\n?\n?\n\nFigura 3.6: Regras de colis\u00e3o do modelo FHP\n\nFigura 3.7: Modelo D2Q9\n\nonais, com a defini\u00e7\u00e3o de diferentes regras de colis\u00e3o ou de velocidades de propaga\u00e7\u00e3o\npara cada uma das dire\u00e7\u00f5es. Cada um dos modelos apresenta as mesmas caracter\u00edsticas\nb\u00e1sicas de funcionamento, conforme visto anteriormente nos modelos bidimensionais.\nEm um modelo tridimensional tamb\u00e9m \u00e9 necess\u00e1rio que a geometria seja sim\u00e9trica para\nsatisfazer a isotropia requerida. Uma id\u00e9ia simples para se alcan\u00e7ar isso \u00e9 considerar que\nexistem quatro tipo de sub-reticulados, os quais possibilitam um conjunto de 26 dire\u00e7\u00f5es\nvizinhas. As Figuras 3.8, 3.9, 3.10 e 3.11 ilustram cada um dos sub-reticulados poss\u00edveis,\nrecebendo a nomenclatura de ??? , ? ? , ? \n e ? ? .\n\n??\n\nFigura 3.8: Sub-reticulado ??? Figura 3.9: Sub-reticulado ???\n\nA combina\u00e7\u00e3o de cada um deles pode gerar diferentes modelos que s\u00e3o identificados\natrav\u00e9s do n\u00famero de dimens\u00f5es (2D, 3D) e pelo n\u00famero de possibilidades de desloca-\nmento poss\u00edveis (Q15, Q19, Q27). Por exemplo, as combina\u00e7\u00f5es do sub-reticulados ? ? ,\n? ? , ? ? originam o modelo D3Q15. J\u00e1 a combina\u00e7\u00e3o de todos eles gera o modelo D3Q27.\nUm dos modelos mais utilizados \u00e9 o D3Q19, resultado da combina\u00e7\u00e3o de sub-reticulados\n? ? , ? ? e ? ? . Cada um dos sub-reticulados tamb\u00e9m possui velocidades diferentes, conforme\napresentado na Tabela 3.2.\n\nMaiores informa\u00e7\u00f5es referentes aos modelos de reticulado est\u00e3o descritos na Tabela 3.3.\n\n\n\n29\n\nFigura 3.10: Sub-reticulado ? \n Figura 3.11: Sub-reticulado ? ?\nTabela 3.2: Velocidade relativa das part\u00edculas para cada uma das dire\u00e7\u00f5es do reticulado\n\nSub-reticulado Velocidade\n? ? ?\n? ?\n\n?\n\n? \n $\n?\n\n? ? $ &amp;\n\nNessa tabela est\u00e3o relacionados os valores para a velocidade do som, energia e peso das\narestas (quanto cada aresta interfere na densidade do ponto), respectivamente, para dife-\nrentes alguns modelos de reticulado uni- bi- e tridimensionais.\n\nTabela 3.3: Valores de algumas propriedades para diversos modelos de reticulado\nGeometria ! \n \" Energia Peso\n\nD1Q3 1/3 0 4/6\n1/2 1/6\n\nD1Q5 1 0 6/12\n1/2 2/12\n2 1/12\n\nD2Q9 1/3 0 16/36\n1/2 4/36\n2 1/36\n\nD3Q15 1/3 0 16/72\n1/2 8/72\n2 1/72\n\nD3Q19 1/3 0 12/36\n1/2 2/36\n2 1/36\n\n3.3 Equa\u00e7\u00f5es de Lattice Gas Automata e Algoritmo\n\nLGA apresenta-se como uma din\u00e2mica molecular em que espa\u00e7o, tempo e velocidade\ndas part\u00edculas s\u00e3o discretos. Um estado ? de uma c\u00e9lula representando uma part\u00edcula\nconsiste de regras que levam em considera\u00e7\u00e3o o estado ? ? ? da mesma, bem como o\nconjunto de c\u00e9lulas vizinhas. A representa\u00e7\u00e3o de uma part\u00edcula \u00e9 feita atrav\u00e9s de um\nconjunto de vari\u00e1veis bin\u00e1rias ? ) ? ??????? ? . ? ? ? ? ? ? ? ' ? , em que cada ? ) ? ??????? representa uma\ndas\n'\n\ndire\u00e7\u00f5es de deslocamento poss\u00edveis (posi\u00e7\u00f5es vizinhas) no reticulado. Cada ? ) ? ???????\n\n\n\n30\n\nassume o valor unit\u00e1rio 1, caso exista deslocamento para a dire\u00e7\u00e3o a qual ele representa,\nou 0, caso n\u00e3o exista deslocamento.\n\nA evolu\u00e7\u00e3o da express\u00e3o \u00e9 dada por:\n\n? ) ? ? ? (*) ??? ? ? ??? ? ) ? ??????? ? ? ) ? ? ? ????????? ? ? . ?\t? ? ? ? ? ? ? ? ' ? (3.1)\nOnde (*) representa cada um dos deslocamentos poss\u00edveis de uma part\u00edcula. Cada (?) possui\num valor unit\u00e1rio associado \u00e0 dire\u00e7\u00e3o de deslocamento e um valor nulo para os demais\ncasos onde n\u00e3o h\u00e1 deslocamento. J\u00e1 o operador\n\n?\ndefine as regras de colis\u00e3o das part\u00edcu-\n\nlas.\nEm cada passo do m\u00e9todo ocorrem dois tipos de opera\u00e7\u00f5es:\n\n? A opera\u00e7\u00e3o de propaga\u00e7\u00e3o (deslocamento), onde as part\u00edculas deslocam-se para\numa nova posi\u00e7\u00e3o, conforme a dire\u00e7\u00e3o definida por ( . As part\u00edculas movem-se\natrav\u00e9s das arestas do reticulado, sendo que somente uma part\u00edcula pode estar em\num determinado lugar em um determinado instante.\n\n? A opera\u00e7\u00e3o de colis\u00e3o, onde s\u00e3o estabelecidos os crit\u00e9rios de deslocamento, caso\nmais de uma part\u00edcula atinja um mesmo ponto. O operador de colis\u00e3o define as\nmudan\u00e7as que precisam ocorrer nos vetores de velocidade das part\u00edculas, de acordo\ncom regras de dispers\u00e3o pr\u00e9-definidas.\n\nNa Figura 3.12 s\u00e3o ilustradas as opera\u00e7\u00f5es de deslocamento e colis\u00e3o em um reticu-\nlado. Para tanto foi adotado um reticulado quadrado (quatro dire\u00e7\u00f5es de deslocamento),\nmostrando o evolu\u00e7\u00e3o das part\u00edculas de um fluido para tr\u00eas instantes de tempo conse-\ncutivos. No instante de tempo ? ocorre uma colis\u00e3o entre duas part\u00edculas no centro do\nreticulado. Uma vez que duas part\u00edculas n\u00e3o podem ocupar o mesmo lugar no espa\u00e7o, a\ncolis\u00e3o \u00e9 tratada atrav\u00e9s da disposi\u00e7\u00e3o das part\u00edculas em posi\u00e7\u00f5es subseq\u00fcentes ao ponto\nde colis\u00e3o, os quais se encontram livres.\n\nt t + 1t  ? 1\n\nFigura 3.12: Ilustra\u00e7\u00e3o do modelo de propaga\u00e7\u00e3o e colis\u00e3o em LGA\n\nA partir da distribui\u00e7\u00e3o de part\u00edculas \u00e9 poss\u00edvel derivar valores macrosc\u00f3picos para\nalgumas propriedades f\u00edsicas. Por exemplo, o valor da densidade ? pode ser obtido atrav\u00e9s\nda soma dos elementos ( (?? ( \t ) pelo n\u00famero de s\u00edtios (regi\u00f5es onde os elementos podem\nestar) existentes: ? ? ? (?? ( \t ? ? ? . ? .?? ? (3.2)\nE as velocidades m\u00e9dias para um determinado eixo de dire\u00e7\u00e3o coordenado (\n\n' ( ? ? _ ? e' ( ? ? _ ? ? :\n? ? ? ? ' ( ? ? ? ? ? (3.3)\n? ? ? ? ' ( ? ? ? ? ? (3.4)\n\n\n\n31\n\nNo caso da Figura 3.12 para o momento ? , o valor de ? \u00e9 definido como:\n? ??? ??&amp;?? (3.5)\n\nConsiderando positivas as velocidades que partem da esquerda para a direita para o\neixo x e de baixo para cima para o eixo y, as velocidades ? ? e ? ? seriam, respectivamente:\n\n? ? ? ? ? ? ? ? ? ? ? ? ? &amp;?????? (3.6)\n? ? ? ? ? ? ? ? ? &amp;?????? (3.7)\n\nNeste exemplo simples, duas dire\u00e7\u00f5es s\u00e3o usadas. Nos casos reais discutidos na se\u00e7\u00e3o 3.2,\nmuito mais dire\u00e7\u00f5es de deslocamento podem ser usados.\n\nAs condi\u00e7\u00f5es de contorno s\u00e3o definidas atrav\u00e9s de pontos especiais no reticulado atra-\nv\u00e9s da t\u00e9cnica de Marker and Cell. Cada um desses pontos formam os obst\u00e1culos pelos\nquais \u00e9 delimitado a estrutura do fluxo. Diferentes regras de colis\u00e3o podem ser aplica-\ndas para esses pontos atrav\u00e9s de modifica\u00e7\u00f5es no operador de colis\u00e3o. Tais regras ir\u00e3o\ndepender do tipo de fluido e das condi\u00e7\u00f5es de contorno tratadas.\n\nO algoritmo para LGA pode ser definido como um la\u00e7o iterativo em busca de um\nestado de equil\u00edbrio para uma determinada distribui\u00e7\u00e3o de part\u00edculas. Em cada fase \u00e9 feito\no processo de propaga\u00e7\u00e3o e colis\u00e3o, conforme mostrado anteriormente na Figura 3.12,\nmais o tratamento das condi\u00e7\u00f5es de contorno. A partir da distribui\u00e7\u00e3o das part\u00edculas s\u00e3o\ncalculadas as propriedades macrosc\u00f3picas que se tem interesse.\n\nLGA apresenta vantagens e desvantagens de uso e implementa\u00e7\u00e3o. A Tabela 3.4 apre-\nsenta um quadro destacando os principais pontos para cada caso. Um dos aspectos nega-\ntivos \u00e9 a gera\u00e7\u00e3o de erros estat\u00edsticos no c\u00e1lculo das propriedades f\u00edsicas analisadas. Isto\nse deve ao fato de que as part\u00edculas realizam apenas opera\u00e7\u00f5es bin\u00e1rias. Uma maneira de\nsuavizar essas falhas \u00e9 considerar uma m\u00e9dia dos valores de espa\u00e7o e tempo. Assim, por\nexemplo, para um determinado fluxo em um espa\u00e7o bidimensional poderia ser utilizado\num n\u00famero maior de c\u00e9lulas vizinhas (64, 128, 256, 512, ...). No entanto, isso limita o\nespa\u00e7o de resolu\u00e7\u00e3o que pode ser obtido, al\u00e9m de haver a necessidade de uma quantia\nmaior de informa\u00e7\u00f5es para o c\u00e1lculo dos valores de um determinado ponto.\n\nTabela 3.4: Vantagens e desvantagens de LGA\nVantagem Desvantagem\n\nIntegra\u00e7\u00e3o simples e eficiente Erros estat\u00edsticos,\npara qualquer geometria complexa longos tempos para o c\u00e1lculo da m\u00e9dia\nM\u00e9todo local, f\u00e1cil paraleliza\u00e7\u00e3o Efeitos para tamanhos finitos,\n\nnecessidade de reticulados grandes\nAlgoritmo eficiente: representa\u00e7\u00e3o de Dificuldade de controlar\n\npart\u00edculas por bits ou inteiros os par\u00e2metros de fluxo\n\n3.4 Descri\u00e7\u00e3o Informal do M\u00e9todo de Lattice Boltzmann\n\nHistoricamente o MLB surgiu a partir de LGA. A principal diferen\u00e7a do MLB em\nrela\u00e7\u00e3o ao modelo de LGA \u00e9 substituir as vari\u00e1veis booleanas, utilizadas para representar\n\n\n\n32\n\na distribui\u00e7\u00e3o das part\u00edculas, por fun\u00e7\u00f5es de distribui\u00e7\u00e3o reais para todas as part\u00edculas\nindividuais, e ignorar o movimento individual das part\u00edculas e as correla\u00e7\u00f5es entre elas\nnas equa\u00e7\u00f5es cin\u00e9ticas (CHEN; DOOLEN, 1998). Esse procedimento elimina, assim, o\nuso da parte estat\u00edstica. Por outro lado, os modelos de representa\u00e7\u00e3o para os reticulados\ns\u00e3o os mesmos em ambos os m\u00e9todos.\n\nO MLB pode ser definido com um m\u00e9todo num\u00e9rico iterativo para a modelagem e\nsimula\u00e7\u00e3o de propriedades f\u00edsicas em fluidos (SUCCI, 2001; CHEN; DOOLEN, 1998;\nWOLF-GLADROW, 2000). Diferente de outros modelos num\u00e9ricos, baseados na discre-\ntiza\u00e7\u00e3o de equa\u00e7\u00f5es macrosc\u00f3picas cont\u00ednuas, tais como o m\u00e9todo dos Elementos Finitos\nou o m\u00e9todo dos Volumes Finitos, o MLB est\u00e1 fundamentado em modelos microsc\u00f3picos\ne equa\u00e7\u00f5es de velocidade mesosc\u00f3pica.\n\nA principal id\u00e9ia do MLB \u00e9 construir um modelo cin\u00e9tico simplificado, que incorpore\na ess\u00eancia f\u00edsica dos processos microsc\u00f3picos ou mesosc\u00f3picos, a fim de que a m\u00e9dia\ndessas propriedades obede\u00e7a \u00e0 equa\u00e7\u00e3o macrosc\u00f3pica desejada. A din\u00e2mica macrosc\u00f3-\npica de um fluido \u00e9 o resultado da cole\u00e7\u00e3o de estruturas microsc\u00f3picas de um sistema.\nNo entanto, ela n\u00e3o \u00e9 sens\u00edvel aos detalhes existentes na din\u00e2mica microsc\u00f3pica. Esse \u00e9\num dos motivos para o uso de m\u00e9todos simplificados em lugar de fluxos macrosc\u00f3picos.\nAtrav\u00e9s do desenvolvimento de uma vers\u00e3o simplificada da equa\u00e7\u00e3o cin\u00e9tica, busca-se\nevitar a resolu\u00e7\u00e3o de equa\u00e7\u00f5es complicadas, como a equa\u00e7\u00e3o completa de Boltzmann, ou\nconsiderar cada part\u00edcula como uma simula\u00e7\u00e3o molecular.\n\nEmbora o MLB seja baseado em um representa\u00e7\u00e3o de part\u00edculas, seu principal foco\n\u00e9 a obten\u00e7\u00e3o da m\u00e9dia da estrutura macrosc\u00f3pica. A equa\u00e7\u00e3o cin\u00e9tica do m\u00e9todo prove\nmuitas das vantagens da din\u00e2mica molecular, incluindo uma clara representa\u00e7\u00e3o f\u00edsica,\nsimplicidade de implementa\u00e7\u00e3o das condi\u00e7\u00f5es de contorno e algoritmos completamente\nparalelos, j\u00e1 que as opera\u00e7\u00f5es s\u00e3o estritamente locais.\n\nSegundo Chen (CHEN; DOOLEN, 1998), a natureza cin\u00e9tica do MLB introduz tr\u00eas\nimportantes caracter\u00edsticas que o distinguem de outros m\u00e9todos num\u00e9ricos. O primeiro\nponto consiste no fato de que as opera\u00e7\u00f5es de convec\u00e7\u00e3o (deslocamento das part\u00edculas) s\u00e3o\nbaseadas em opera\u00e7\u00f5es lineares, o que diverge do proposto por modelos macrosc\u00f3picos.\nUma segundo ponto diz respeito \u00e0 conserva\u00e7\u00e3o do momento linear, que pode ser obtida\npelo MLB atrav\u00e9s de uma equa\u00e7\u00e3o de estados, sendo esse valor igual ao obtido pela\nresolu\u00e7\u00e3o das ENS. O terceiro ponto trata das dire\u00e7\u00f5es de velocidade do MLB, que s\u00e3o\ndefinidas por um conjunto limitado de dire\u00e7\u00f5es, diferente do que ocorre na EB.\n\n3.5 Equa\u00e7\u00e3o de Lattice Boltzmann\n\nA Equa\u00e7\u00e3o de Lattice Boltzmann (ELB) pode ser obtida de diferentes maneiras. Ela\npode ser vista tanto como um modelo de velocidade discreto a partir da evolu\u00e7\u00e3o de\nLGA, como tamb\u00e9m uma deriva\u00e7\u00e3o do modelo f\u00edsico atrav\u00e9s da Equa\u00e7\u00e3o Cin\u00e9tica de\nBoltzmann (WOLF-GLADROW, 2000). Na seq\u00fc\u00eancia s\u00e3o apresentados alguns passos\npara a obten\u00e7\u00e3o da ELB a partir da EB.\n\nNegligenciando for\u00e7as externas, a fun\u00e7\u00e3o de propaga\u00e7\u00e3o\n, ? ??? ( ????? pode ser expressa\n\npela Equa\u00e7\u00e3o de Boltzmann como: ? ,? ? ? (\n? ,? ? ? ? ? , ? (3.8)\n\nO termo de relaxa\u00e7\u00e3o\n? ? , ? \u00e9 quadr\u00e1tico em , , consistindo originalmente de uma\n\nexpress\u00e3o integral-diferencial complexa. Uma simplifica\u00e7\u00e3o apropriada da integral de co-\nlis\u00e3o para o estado de quase-equil\u00edbrio em hidrodin\u00e2micas com baixo n\u00famero de Mach \u00e9 a\n\n\n\n33\n\naproxima\u00e7\u00e3o via tempo de relaxa\u00e7\u00e3o simples, conhecida como modelo BGK (Bhatnagar-\nGross-Krook) (BHATNAGAR; GROSS; KROOK, 1954):\n\n? ? , ? ? ? ???? , ? ,?? (3.9)\nOnde\n\n,\n\u00e9 a fun\u00e7\u00e3o de distribui\u00e7\u00e3o de equil\u00edbrio de Maxwell-Boltzmann e\n\n?\n\u00e9 um\n\ntempo de relaxa\u00e7\u00e3o que controla a taxa de aproxima\u00e7\u00e3o do equil\u00edbrio, ou seja, a viscosi-\ndade do fluido. A relaxa\u00e7\u00e3o BGK cumpre ainda o teorema H de Boltzmann e a conserva-\n\u00e7\u00e3o local de massa e momento.\n\nPara determinar\n,\n\nnumericamente, primeiramente ela \u00e9 discretizada em rela\u00e7\u00e3o ao\ncampo da velocidade, utilizando um conjunto finito de vetores de velocidade (?) ? . ?? ? ? ? ? ? ' ? , gerando a equa\u00e7\u00e3o de velocidade discreta de Boltzmann:? , )? ? ? (*)\n\n? , )? ? ???\n?\n\n? ? , ) ? , ) ? ? . ? ? ? ? ? ? ? ' ? (3.10)\nonde\n\n, ) ? ??????? \u00e9 equivalente a , ? ??? (?) ????? e , ) \u00e9 a fun\u00e7\u00e3o de distribui\u00e7\u00e3o de equil\u00edbrio dis-\ncreto.\n\nOs modelos de reticulado usados em LGA vistos na Se\u00e7\u00e3o 3.2 s\u00e3o igualmente utiliza-\ndos no MLB. Para a simula\u00e7\u00e3o de fluxos bidimensionais o principal modelo de simula\u00e7\u00e3o\nutilizado \u00e9 o D2Q9. J\u00e1 para a simula\u00e7\u00e3o tridimensional, tanto o modelo D3Q15, como o\nmodelo D3Q19 s\u00e3o amplamente utilizados. Apesar da discretiza\u00e7\u00e3o definir um pequeno\nn\u00famero de dire\u00e7\u00f5es de deslocamento para esses modelos, elas s\u00e3o suficientes para descre-\nver um fluido pr\u00f3ximo do estado de equil\u00edbrio para hidrodin\u00e2micas com baixos valores de\nMach. Para todos esses modelos a fun\u00e7\u00e3o\n\n, ) apropriada para a distribui\u00e7\u00e3o de equil\u00edbrio\npossui a forma:\n\n, ) ? ? ? )?? ? ? &amp;! \n (*) ? \t ? ?? !?? ? (*) ? \t ? \n ? &amp;? ! \n \t ? \t\n\t (3.11)\nCom ! ? ? ? ? ? ? e vetores de velocidade de part\u00edcula discretos ( ) . O peso do fator ? )\ndepende somente do modelo do reticulado e \u00e9 apresentado na Tabela 3.5 para os tr\u00eas\nmodelos 3D mais utilizados. A fun\u00e7\u00e3o de distribui\u00e7\u00e3o de equil\u00edbrio discreta\n\n, ) \u00e9 derivada\nda fun\u00e7\u00e3o de distribui\u00e7\u00e3o\n\n,\nde equil\u00edbrio de Maxwell-Boltzmann de tal maneira que os\n\nmomentos de velocidade at\u00e9 a quarta ordem s\u00e3o id\u00eanticos \u00e0\n,\n\n.\n\nTabela 3.5: Peso dos fatores ? ) para os vetores de velocidades discretas ( ) de diferentes\nmodelos de reticulado\n\nModelo ? (?) ? \n ??? ? (*) ? \n ? ? ? (*) ? \n ? ? ? (*) ? \n ? &amp;\nD2Q9 ? ) = 4/9 ? ) = 1/9 ? ) = 1/36\n\nD3Q15 ? ) = 2/9 ? ) = 1/9 ? ) = 1/72\nD3Q19 ? ) = 1/3 ? ) = 1/18 ? ) = 1/36\n\nOs valores macrosc\u00f3picos da densidade ? , momento ? \t e de tensor de fluxo de mo-\nmento\n\n? ???\n, sendo\n\n\t\no n\u00famero de part\u00edculas e ??\n ? ???) , podem ser desenvolvidos\n\ncomo:\n\n? ? ?? \n?? ? , \n?? ?\n?\n\n?? ? , \n (3.12)\n\n\n\n34\n\n? ? ? ?? \n?? ? ( \n , \n ? ?\n?\n\n?? ? ( \n , \n (3.13)\n\n????? ? ?? \n?? ? ( \n ? ( \n ? , \n (3.14)\nJ\u00e1 a velocidade do som !*\" desses modelos \u00e9 de:\n\n!\n\" ? ! ? $ &amp; (3.15)\nE a press\u00e3o \n \u00e9 definida pela equa\u00e7\u00e3o de estado de um g\u00e1s ideal:\n\n\n ? ? ! \n \" (3.16)\nA discretiza\u00e7\u00e3o do espa\u00e7o e do tempo \u00e9 feita apropriadamente atrav\u00e9s de uma aproxi-\n\nma\u00e7\u00e3o de diferen\u00e7as finitas. A forma explicita das equa\u00e7\u00f5es discretizadas \u00e9 dada por:\n\n, ) ? ? ? (*) ? ????? ? ? ??? ? , ) ? ????????????? ?? ? , ) ? ??????? ? , ) ? ????????? (3.17)\nOnde ? ? ? ? ? ? \u00e9 o tempo de relaxa\u00e7\u00e3o adimensional. Assim, o MLB pode ser consi-\nderado tamb\u00e9m como uma forma especial de aplica\u00e7\u00e3o da t\u00e9cnica das diferen\u00e7as finitas\npara a equa\u00e7\u00e3o cin\u00e9tica, onde a fun\u00e7\u00e3o de distribui\u00e7\u00e3o da velocidade \u00e9 discreta (WOLF-\nGLADROW, 2000).\n\n3.6 Condi\u00e7\u00f5es de Contorno\n\nAs condi\u00e7\u00f5es de contorno do MLB n\u00e3o possuem rela\u00e7\u00e3o com as condi\u00e7\u00f5es de con-\ntorno macrosc\u00f3picas uma vez que no m\u00e9todo as mesmas s\u00e3o cin\u00e9ticas. No entanto,\ndefinindo-se apropriadamente regras microsc\u00f3picas \u00e9 poss\u00edvel alcan\u00e7ar a estrutura ma-\ncrosc\u00f3pica. Uma das solu\u00e7\u00f5es mais simples para a simula\u00e7\u00e3o de bordas r\u00edgidas \u00e9 o uso\ndo mecanismo conhecido como Bounce Back (barreiras reflexivas). A id\u00e9ia consiste em\ninverter a dire\u00e7\u00e3o de velocidade para as part\u00edculas das bordas de maneira que:\n\n, ?????) ? ????????? , ) ?) ? ??????? (3.18)\nAssim, (*) ? ? (*) , ou seja, (*) \u00e9 rotacionado para cada dire\u00e7\u00e3o de velocidade da borda,\ngarantindo o retorno para o fluido na pr\u00f3xima itera\u00e7\u00e3o do la\u00e7o, com o momento contr\u00e1rio.\nA Figura 3.13, ilustra o funcionamento do mecanismo de Bounce Back, aplicado a um\ndeterminado ponto em dois instantes de tempo consecutivos.\n\nt t + 1\n\nFigura 3.13: Exemplo de funcionamento do mecanismo de Bounce Back\n\nIsso garante que o fluxo n\u00e3o ultrapassa as bordas, tendo velocidades nulas nessas\nregi\u00f5es.\n\n\n\n35\n\n3.7 Rela\u00e7\u00e3o entre a Equa\u00e7\u00e3o de Lattice Boltzmann e a Equa\u00e7\u00e3o Ci-\nn\u00e9tica de Navier-Stokes\n\nA partir da ELB \u00e9 poss\u00edvel determinar tamb\u00e9m o comportamento de um fluxo no limite\nmacrosc\u00f3pico de acordo com a defini\u00e7\u00e3o das ENS (HE; LUO, 1997b). As ENS podem ser\nderivadas formalmente a partir da ELB atrav\u00e9s de uma expans\u00e3o multi-escala padr\u00e3o, via\nexpans\u00e3o de Chapman-Enskog, com o tempo e o espa\u00e7o reescalados baseados no n\u00famero\nde Knudsen ? fazendo, respectivamente:\n\n? ??? ? ??? ? \n ? ? \n ??? ? ??? ? ???\n?? ? ? ?\n\n?? ? ? ? ? \n\n?? ? \n ?\n\n?? ? ? ?\n?? ? ? (3.19)\n\nE a fun\u00e7\u00e3o de distribui\u00e7\u00e3o\n, ) expandida como uma equa\u00e7\u00e3o de segunda ordem de precis\u00e3o\n\n(HE; LUO, 1997b; FRISCH et al., 1987):\n\n, ? ,?? ??? ? ? ,?? ??? ? ? \n ,?? \n ? ??? ? ? ? ? (3.20)\nNo limite de um fluxo incompress\u00edvel, onde ? ? ? ? !?\"\t? ? , a lei de conserva\u00e7\u00e3o de massa\n\ne momento \u00e9 de, respectivamente: ? ? )? ? ) ?\t? (3.21)? ?? ? ? ?\n? ?? ? ???\n\n?\n\n?\n? \n? ? ? ? ? \n ? (3.22)\n\nAinda usando o resultado da expans\u00e3o de Chapman-Enskog, \u00e9 poss\u00edvel obter a rela\u00e7\u00e3o\nentre o tempo de relaxa\u00e7\u00e3o ? e a viscosidade cin\u00e9tica ? . A rela\u00e7\u00e3o \u00e9 definida por:\n\n? ? ? ? ? ? ? ? ? ! \n \" ? ? (3.23)\nComo a viscosidade \u00e9 positiva, ? precisa ser maior que ? ? ? em todos os casos. A equa-\n\u00e7\u00e3o 3.23 difere de ? ? ? ! \n \" para corrigir o erro de truncamento da discretiza\u00e7\u00e3o da ELB.\n\nA ELB difere de m\u00e9todos diretamente baseados das ENS em diversos aspectos. Em\nabordagens tradicionais de DFC, a modelagem f\u00edsica da estrutura de um fluido \u00e9 a aproxi-\nma\u00e7\u00e3o num\u00e9rica s\u00e3o dois procedimentos separados, enquanto no MLB, essas duas fases\ns\u00e3o combinadas em conjunto. A principal diferen\u00e7a entre MLB e abordagens num\u00e9ricas\npara a resolu\u00e7\u00e3o da ENS \u00e9 que no MLB as regras de transi\u00e7\u00e3o f\u00edsica s\u00e3o discretas, en-\nquanto nas outras a discretiza\u00e7\u00e3o \u00e9 feita no n\u00edvel macrosc\u00f3pico da ENS. No entanto, em\nambos os casos, as mesmas leis de conserva\u00e7\u00e3o f\u00edsica s\u00e3o satisfeitas.\n\nA seguir s\u00e3o descritos outros pontos, conforme apresentado em (YU et al., 2003), que\ntratam da diferen\u00e7a entre as duas t\u00e9cnicas:\n\n? Enquanto a equa\u00e7\u00e3o cin\u00e9tica de Navier-Sokes \u00e9 uma EDP de segunda ordem, no\nMLB a discretiza\u00e7\u00e3o da EB resulta em um conjunto de EDPs. Isso reflete no uso de\ndiferentes formas de discretiza\u00e7\u00e3o para cada tipo de equa\u00e7\u00e3o.\n\n? M\u00e9todos de resolu\u00e7\u00e3o das ENS inevitavelmente precisam tratar dos termos convec-\ntivos n\u00e3o lineares ? ? ? ? . O MLB evita totalmente a resolu\u00e7\u00e3o desse termo porque a\nconvec\u00e7\u00e3o torna-se uma opera\u00e7\u00e3o vetorial (linear). O termo n\u00e3o linear das ENS \u00e9\nocultado nos termos quadr\u00e1ticos da velocidade da fun\u00e7\u00e3o de distribui\u00e7\u00e3o do equil\u00ed-\nbrio.\n\n\n\n36\n\n? M\u00e9todos para a resolu\u00e7\u00e3o da equa\u00e7\u00e3o cin\u00e9tica incompress\u00edvel de Navier-Stokes pre-\ncisam resolver a equa\u00e7\u00e3o de Poisson para o c\u00e1lculo da press\u00e3o. No MLB a press\u00e3o\n\u00e9 obtida atrav\u00e9s de uma equa\u00e7\u00e3o de estado.\n\n? Condi\u00e7\u00f5es de contorno em geometrias complexas exigem um tratamento cuidadoso\nem ambos modelos de simula\u00e7\u00e3o. Em m\u00e9todos de resolu\u00e7\u00e3o baseados na reso-\nlu\u00e7\u00e3o discreta das ENS os componentes de press\u00e3o normal e paralela requerem a\nmanipula\u00e7\u00e3o apropriada de estimativas geom\u00e9tricas de normais e tangentes e de ex-\ntrapola\u00e7\u00f5es lineares. No caso do MLB o problema das condi\u00e7\u00f5es de contorno surge\nporque o modelo cont\u00ednuo n\u00e3o apresenta um equivalente direto.\n\n? O MLB explora melhor problemas em escala microsc\u00f3pica, uma vez que a incor-\npora\u00e7\u00e3o f\u00edsica das itera\u00e7\u00f5es em n\u00edvel molecular da EB \u00e9 mais simples.\n\n? A discretiza\u00e7\u00e3o do MLB \u00e9 feita pela discretiza\u00e7\u00e3o do dom\u00ednio de velocidade da\npart\u00edcula. A velocidade discretizada e a configura\u00e7\u00e3o do espa\u00e7o leva a uma malha\nregular quadrada. Isso \u00e9 uma limita\u00e7\u00e3o para determinadas aplica\u00e7\u00f5es, mesmo com\no uso de t\u00e9cnicas de refinamento, o que exige uma implementa\u00e7\u00e3o especial para as\nbordas.\n\n? O MLB n\u00e3o \u00e9 eficiente para a solu\u00e7\u00e3o de problemas de estados est\u00e1veis porque a\nvelocidade converg\u00eancia da propaga\u00e7\u00e3o \u00e9 bastante lenta, uma vez que as unidades\nde varia\u00e7\u00e3o de tempo s\u00e3o unit\u00e1rias.\n\nPara efeitos de compara\u00e7\u00e3o, as principais diferen\u00e7as apontadas anteriormente entre as\nENS e o MLB s\u00e3o apresentadas na Tabela 3.6.\n\nTabela 3.6: Principais diferen\u00e7as entre a resolu\u00e7\u00e3o utilizando as ENS e o MLB\nCaracter\u00edstica ENS ELB\n\nEqua\u00e7\u00e3o de velocidade EDP de Conjunto de EDPs\nsegunda ordem de primeira ordem\n\nTermo convectivo \u00c9 tratado Substitu\u00eddo por uma\nn\u00e3o linear ? ? ? ? opera\u00e7\u00e3o vetorial (linear)\n\nC\u00e1lculo da press\u00e3o Resolu\u00e7\u00e3o da Equa\u00e7\u00e3o Equa\u00e7\u00e3o de Estado\nde Poisson\n\nCondi\u00e7\u00f5es de contorno em Estimativas geom\u00e9tricas N\u00e3o apresenta um equivalente\nGeometrias complexas e extrapola\u00e7\u00e3o direto para o modelo cont\u00ednuo\n\nEscala N\u00e3o \u00e9 o objetivo Representa\u00e7\u00e3o mais simples\nMicrosc\u00f3pica do modelo\nDiscretiza\u00e7\u00e3o Das equa\u00e7\u00f5es Da velocidade das part\u00edculas\n\nProblemas com Indiferente Necessidade de\nestados est\u00e1veis muitas itera\u00e7\u00f5es\n\n3.8 Algoritmo\n\nO algoritmo do MLB possui uma estrutura similar ao m\u00e9todo de Jacobi, o qual \u00e9\nutilizado para a solu\u00e7\u00e3o iterativa de sistemas lineares em malhas estruturadas (BARRETT\n\n\n\n37\n\net al., 1994; K\u00d6RNER et al., 2005). Nesse caso, pode-se dizer que o la\u00e7o de repeti\u00e7\u00e3o do\nm\u00e9todo de Jacobi coincide com o la\u00e7o iterativo controlado pelo tempo discreto do MLB.\nO algoritmo para o MLB pode ser descrito como:\n\n1. Determinar as condi\u00e7\u00f5es iniciais para todos os pontos da grade, escolher adequada-\nmente a densidade ? e a velocidade ( das c\u00e9lulas externas (condi\u00e7\u00f5es de contorno\ndo fluido) e definir a escala do tempo de relaxa\u00e7\u00e3o ? .\n\n2. Calcular a densidade ? e velocidade \t das vari\u00e1veis macrosc\u00f3picas para cada c\u00e9lula\nusando as Equa\u00e7\u00f5es 3.12 e 3.13.\n\n3. Calcular os valores da fun\u00e7\u00e3o de equil\u00edbrio usando a Equa\u00e7\u00e3o 3.11 e, a partir disso,\nobter os valores da fun\u00e7\u00e3o de relaxa\u00e7\u00e3o atrav\u00e9s da Equa\u00e7\u00e3o 3.9;\n\n4. Utilizar o valor de equil\u00edbrio para calcular a fun\u00e7\u00e3o de distribui\u00e7\u00e3o para cada ponto,\nsegundo a Equa\u00e7\u00e3o 3.17;\n\n5. Propagar a distribui\u00e7\u00e3o das part\u00edculas para todas as c\u00e9lulas vizinhas;\n\n6. Modificar a distribui\u00e7\u00e3o local dos pontos para satisfazer as condi\u00e7\u00f5es de contorno\natrav\u00e9s da Equa\u00e7\u00e3o 3.18;\n\n7. Retornar ao passo 2 enquanto o tempo de execu\u00e7\u00e3o ou o n\u00famero de itera\u00e7\u00f5es for\nmenor que o m\u00e1ximo estimado.\n\nAs principais opera\u00e7\u00f5es do la\u00e7o de repeti\u00e7\u00e3o do MLB est\u00e3o ilustradas na Figura 3.14.\n\ne distribui\u00e7\u00e3o de equil\u00edbrio\n\nRelaxa\u00e7\u00e3o\n\nPropaga\u00e7\u00e3o\n\nBounce back\n\nValores macrosc\u00f3picos\n\nFigura 3.14: Estrutura do algoritmo do MLB\n\n3.9 \u00c1reas de Aplica\u00e7\u00e3o\n\nAs caracter\u00edsticas mencionadas anteriormente mostram que o MLB \u00e9 indicado para\numa s\u00e9rie de aplica\u00e7\u00f5es com diversos graus de dificuldade. Na literatura existem diversas\n\n\n\n38\n\nimplementa\u00e7\u00f5es de problemas com condi\u00e7\u00f5es de contorno simples (CHEN; DOOLEN,\n1998). Exemplos desse tipo de problemas s\u00e3o encontrados na passagem de fluidos por\naberturas ou na an\u00e1lise do comportamento de fluidos perante a presen\u00e7a de obst\u00e1culos\n(objeto s\u00f3lidos).\n\nUma caracter\u00edstica especial do m\u00e9todo \u00e9 de que condi\u00e7\u00f5es de contorno irregulares\npodem ser representadas de uma maneira simples, al\u00e9m de consumir pouco tempo com-\nputacional para o c\u00e1lculo das bordas. Por causa disso, o MLB \u00e9 indicado para a simula\u00e7\u00e3o\nde fluidos em geometrias complicadas, como ocorre em superf\u00edcies porosas, onde \u00e9 mais\ndif\u00edcil descrever a intera\u00e7\u00e3o entre o fluido e o s\u00f3lido que o cont\u00e9m. Outro fato, \u00e9 de que o\nMLB, diferente de LGA, pode ser usado para fluidos com baixa viscosidade. Desta forma,\n\u00e9 poss\u00edvel realizar a simula\u00e7\u00e3o num\u00e9rica direta de fluidos turbulentos e n\u00e3o homog\u00eaneos.\n\nOutro ponto a ser considerado \u00e9 a simula\u00e7\u00e3o de fluidos com m\u00faltiplas fases e multi-\ncomponentes. Devido \u00e0 dificuldade em modelar o dinamismo e a import\u00e2ncia que esse\ntipo de aplica\u00e7\u00f5es tem para as \u00e1reas da engenharia (superf\u00edcies porosas, din\u00e2mica da ebu-\nli\u00e7\u00e3o, suspens\u00e3o de part\u00edculas em fluidos e fluxos turbulentos), o MLB surge como uma\nalternativa, especialmente para modelos tridimensionais. Outras aplica\u00e7\u00f5es que fazem\nuso do MLB s\u00e3o encontrados na rea\u00e7\u00e3o qu\u00edmica de fluidos, em processos de combust\u00e3o,\nna magnetohidrodin\u00e2mica (estudo das intera\u00e7\u00f5es entre o eletromagnetismo e a hidrodi-\nn\u00e2mica), na transfer\u00eancia de calor em processos de rea\u00e7\u00e3o-difus\u00e3o e em processos de\ncristaliza\u00e7\u00e3o.\n\n3.10 Paraleliza\u00e7\u00e3o do M\u00e9todo de Lattice Boltzmann\n\nO MLB pode ser paralelizado atrav\u00e9s do particionamento do reticulado. Essa carac-\nter\u00edstica \u00e9 muito importante, uma vez que a quantidade de mem\u00f3ria e de processamento\nnecess\u00e1rios para a simula\u00e7\u00e3o de ambientes reais \u00e9 muito alta. Comparando o MLB com\noutras t\u00e9cnicas de simula\u00e7\u00e3o de fluidos, o custo de execu\u00e7\u00e3o do m\u00e9todo \u00e9 relativamente\nmaior (SUCCI, 2001). A exist\u00eancia de arquiteturas paralelas e de diferentes t\u00e9cnicas de\nprograma\u00e7\u00e3o, possibilitam alcan\u00e7ar excelentes n\u00edveis de desempenho para o m\u00e9todo. As-\nsim, no Cap\u00edtulo 4 s\u00e3o aprofundadas as t\u00e9cnicas de paraleliza\u00e7\u00e3o e distribui\u00e7\u00e3o de dados\nempregados na paraleliza\u00e7\u00e3o do MLB, apresentando, ainda, os trabalhos relacionados.\n\n\n\n39\n\n4 ESTADO DA ARTE EM T\u00c9CNICAS DE PARALELIZA-\n\u00c7\u00c3O\n\nO processo de desenvolvimento de aplica\u00e7\u00f5es tem sido simplificado pela exist\u00eancia de\nmecanismos de programa\u00e7\u00e3o paralela padronizados e com uma vasta gama de recursos.\nUm dos recursos amplamente utilizado para tal finalidade \u00e9 a biblioteca de comunica\u00e7\u00e3o\nMessage Passing Interface (MPI) (MPI FORUM, 1994; GROPP et al., 1996). MPI pos-\nsui um grande n\u00famero de fun\u00e7\u00f5es que podem ser utilizadas, tanto em implementa\u00e7\u00f5es\nparalelas, como em implementa\u00e7\u00f5es distribu\u00eddas. Entre os recursos encontram-se meca-\nnismos de comunica\u00e7\u00e3o cartesiana, que possibilitam o endere\u00e7amento de mensagens aos\nprocessos segundo as posi\u00e7\u00f5es atribu\u00eddas aos mesmos, definidas a partir de uma distribui-\n\u00e7\u00e3o cartesiana. Tais recursos s\u00e3o imprescind\u00edveis para a obten\u00e7\u00e3o de uma boa efici\u00eancia\nparalela, tendo sido recorrente a sua utiliza\u00e7\u00e3o. Nesse contexto, este Cap\u00edtulo tem por\nobjetivo apresentar o estado da arte em t\u00e9cnicas de paraleliza\u00e7\u00e3o. Para tanto, \u00e9 feito ini-\ncialmente uma r\u00e1pida descri\u00e7\u00e3o da biblioteca MPI. Na seq\u00fc\u00eancia s\u00e3o tratadas as t\u00e9cnicas\nde particionamento em blocos, como tamb\u00e9m os trabalhos relacionados \u00e0 paraleliza\u00e7\u00e3o\ndo MLB. Por fim, \u00e9 feito um posicionamento, ressaltando o foco deste trabalho.\n\n4.1 Message Passing Interface\n\nMessage Passing Interface (MPI) \u00e9 um padr\u00e3o para comunica\u00e7\u00e3o de dados na compu-\nta\u00e7\u00e3o paralela (GROPP et al., 1996). Seu principal objetivo \u00e9 disponibilizar uma interface\nque seja largamente utilizada no desenvolvimento de programas baseados em troca de\nmensagens. Al\u00e9m de garantir a portabilidade dos programas paralelos, a interface MPI\npossibilita a implementa\u00e7\u00e3o eficiente de sua especifica\u00e7\u00e3o para diversos tipos de m\u00e1quinas\nparalelas existentes.\n\nMPI define apenas o modelo de troca de mensagens tais como nomes de fun\u00e7\u00f5es,\nseq\u00fc\u00eancias de chamadas e resultados de subrotinas, sem se preocupar com a implementa-\n\u00e7\u00e3o em si. Por isso, existem diversas implementa\u00e7\u00f5es do padr\u00e3o MPI, cada qual com suas\ncaracter\u00edsticas e otimiza\u00e7\u00f5es de c\u00f3digo (LAM/MPI PARALLEL COMPUTING, 2006;\nOPEN MPI: Open Source High Performance Computing, 2006; MPICH HOME PAGE,\n2006; MPICH2 HOME PAGE, 2006). Considerado uma evolu\u00e7\u00e3o de Parallel Virtual Ma-\nchine (PVM) (GEIST et al., 1994), a biblioteca pode ser utilizada em programas escritos\nem linguagem FORTRAN, C ou C++.\n\nNo padr\u00e3o MPI, uma aplica\u00e7\u00e3o \u00e9 constitu\u00edda por um ou mais processos que podem ser\nexecutados em m\u00e1quinas distintas, os quais se comunicam atrav\u00e9s de fun\u00e7\u00f5es de envio e\nrecebimento de mensagens via interface de rede. Assim, as implementa\u00e7\u00f5es do padr\u00e3o\noferecem uma infraestrutura para a computa\u00e7\u00e3o paralela na qual \u00e9 poss\u00edvel trocar infor-\n\n\n\n40\n\nma\u00e7\u00f5es entre v\u00e1rios processadores. Tais recursos s\u00e3o ideais para modelos de programa\u00e7\u00e3o\nSingle Program Multiple Data (SPMD) e Multiple Program Multiple Data (MPMD), ou\nmesmo um modelo Mestre-Escravo.\n\nMPI disponibiliza diferentes formas de comunica\u00e7\u00e3o. Os mecanismos de comuni-\nca\u00e7\u00e3o mais simples que podem ser utilizados s\u00e3o a comunica\u00e7\u00e3o ponto a ponto, onde\nocorrem opera\u00e7\u00f5es de troca de mensagens de um determinado processo com outro. Es-\ntruturas mais refinadas de comunica\u00e7\u00e3o s\u00e3o obtidas usando um grupo de processos que\ninvocam opera\u00e7\u00f5es coletivas (collective) de comunica\u00e7\u00e3o para a execu\u00e7\u00e3o de opera\u00e7\u00f5es\nglobais. Al\u00e9m disso, MPI \u00e9 capaz de suportar comunica\u00e7\u00e3o ass\u00edncrona e programa\u00e7\u00e3o\nmodular, atrav\u00e9s de mecanismos de comunicadores (communicator). Os comunicadores\npermitem ao usu\u00e1rio MPI definir m\u00f3dulos que encapsulem estruturas de comunica\u00e7\u00e3o\ninterna (group communications).\n\nO funcionamento b\u00e1sico de um programa com MPI consiste em lan\u00e7ar um conjunto\nde processos, os quais atuam sobre um determinado c\u00f3digo fonte. Cabe ao programador\ndiferenciar atrav\u00e9s de um identificador de processo quem \u00e9 o respons\u00e1vel pela execu\u00e7\u00e3o de\ncada parte do c\u00f3digo. \u00c9 atrav\u00e9s desse mesmo indicador que os demais processos podem\nacessar esse processo espec\u00edfico. Desta forma, \u00e9 poss\u00edvel realizar a troca de mensagens,\ngarantindo a comunica\u00e7\u00e3o entre os processo.\n\nOs recursos encontrados em MPI s\u00e3o muito importantes pois garantem implementa-\n\u00e7\u00f5es paralelas com mecanismos de comunica\u00e7\u00e3o eficientes e uma maior independ\u00eancia\nentre as execu\u00e7\u00f5es dos processos. Al\u00e9m desses, MPI possui ainda mecanismos para a\ncria\u00e7\u00e3o de estruturas cartesianas, bem como as fun\u00e7\u00f5es necess\u00e1rias para o mapeamento e\nacesso aos processos. Analisando-se esses recursos, al\u00e9m dos encontrados anteriormente,\nMPI oferece as condi\u00e7\u00f5es ideais para a programa\u00e7\u00e3o paralela baseada em particionamento\nde dados em blocos.\n\n4.2 Particionamento em Blocos\n\nUm dos grandes desafios da programa\u00e7\u00e3o paralela \u00e9 dividir da melhor forma poss\u00edvel\num programa seq\u00fcencial em partes, a fim de que cada uma delas seja executada em para-\nlelo. Para tanto, \u00e9 necess\u00e1rio conhecer a estrutura do algoritmo, bem como a arquitetura\nna qual o programa paralelo ir\u00e1 ser executado. Dentre as estrat\u00e9gias de decomposi\u00e7\u00e3o de\nprogramas adotadas para tal finalidade, a Decomposi\u00e7\u00e3o de Tarefas e a Decomposi\u00e7\u00e3o de\nDados s\u00e3o freq\u00fcentemente utilizadas em arquiteturas com mem\u00f3ria distribu\u00edda. No en-\ntanto, em termos de aplica\u00e7\u00f5es num\u00e9ricas a Decomposi\u00e7\u00e3o de Dados \u00e9 a mais utilizada.\n\nEm muitas aplica\u00e7\u00f5es paralelas a distribui\u00e7\u00e3o dos dados \u00e9 feita de forma simples para\ntodos os processos. Geralmente isso ocorre dividindo-se o conjunto de dados em fatias\npelo n\u00famero total de processadores existentes. Entretanto, essa estrat\u00e9gia n\u00e3o considera\na depend\u00eancia de dados existente no conjunto dos dados. O mesmo ocorre quando os\ndados s\u00e3o divididos em pequenas partes e, ent\u00e3o, distribu\u00eddos ciclicamente por todos os\nprocessos. A Figura 4.1 ilustra a divis\u00e3o de um conjunto de dados proporcionalmente\npor 6 processos e uma distribui\u00e7\u00e3o c\u00edclica do mesmo conjunto de dados utilizando 4\nprocessos.\n\nUma maneira eficiente para distribuir os dados entre os processadores paralelos \u00e9\nutilizar o particionamento em blocos (LAM; ROTHBERG; WOLF, 1991; JONSSON;\nKA?GSTR\u00d6M, 2002; ELMROTH et al., 2004). O particionamento em blocos \u00e9 definido\ncomo a divis\u00e3o dos dados em mais de uma dimens\u00e3o de estruturas multidimensionais\nde dados. Assim, um conjunto de dados que forma uma estrutura tridimensional, por\n\n\n\n41\n\nP2 P4 P5 P6P1 P3\n\nDADOS\n\nDADOS\n\nP1 P1P2 P3 P4 P2P1P4 P4P3 P3P2\n\nFigura 4.1: Exemplos de particionamento de dados: forma proporcional e forma c\u00edclica\n\nexemplo, pode ser dividido em blocos tanto em duas como em tr\u00eas dimens\u00f5es. As Figu-\nras 4.2 e 4.3 ilustram, respectivamente, a divis\u00e3o dos dados em blocos bi- e tridimensi-\nonais. Atrav\u00e9s dessas figuras \u00e9 poss\u00edvel perceber que a divis\u00e3o em m\u00faltiplas dimens\u00f5es\npode ser obtida como combina\u00e7\u00e3o das estrat\u00e9gias de particionamento unidimensional.\n\n+ =\n\nFigura 4.2: Exemplos de particionamento dos dados para o modelo bidimensional\n\n+ + =\n\nFigura 4.3: Exemplos de particionamento dos dados para o modelo tridimensional\n\nO particionamento dos dados em bloco explora melhor os recursos computacionais\ndispon\u00edveis. Atrav\u00e9s dessa t\u00e9cnica \u00e9 poss\u00edvel melhorar o acesso dos dados em mem\u00f3-\nria e a taxa de acerto da mem\u00f3ria cache por parte das aplica\u00e7\u00f5es (LAM; ROTHBERG;\nWOLF, 1991). O particionamento em blocos diminui tamb\u00e9m a depend\u00eancia de dados\nque normalmente existe entre as regi\u00f5es particionadas de forma unidimensional. Assim,\nos custos de comunica\u00e7\u00e3o e depend\u00eancias de dado em sistemas com mem\u00f3ria distribu\u00edda\nacabam sendo reduzidos.\n\nEstrat\u00e9gias de particionamento de dados em blocos s\u00e3o freq\u00fcentemente adotadas em\nopera\u00e7\u00f5es num\u00e9ricas paralelas como forma de agregar desempenho as opera\u00e7\u00f5es. Por\ncausa disso, muitas propostas podem ser encontradas, especialmente para m\u00e9todos de re-\nsolu\u00e7\u00e3o de sistemas lineares (DONGARRA et al., 2002). As modifica\u00e7\u00f5es feitas sobre\nt\u00e9cnicas de resolu\u00e7\u00e3o tradicionais tornaram poss\u00edvel o surgimento de novos algoritmos,\nos quais s\u00e3o mais indicados para as arquiteturas de computadores atualmente existen-\ntes. Cabe destacar tamb\u00e9m que o algoritmo de resolu\u00e7\u00e3o de sistemas lineares Linpack,\n\n\n\n42\n\nutiliza o particionamento em blocos para explorar ao m\u00e1ximo as arquiteturas paralelas,\nservindo, por isso, como benchmark de avalia\u00e7\u00e3o de desempenho de m\u00e1quinas paralelas\n(DONGARRA, 1988).\n\n4.3 Implementa\u00e7\u00f5es Paralelas do M\u00e9todo de Lattice Boltzmann\n\nO MLB tem sido utilizado em diversas situa\u00e7\u00f5es como t\u00e9cnica de simula\u00e7\u00e3o de fen\u00f4-\nmenos f\u00edsicos, especialmente da din\u00e2mica de fluidos. Exemplos de trabalhos onde o m\u00e9-\ntodo \u00e9 aplicado s\u00e3o encontrados na modelagem de rochas-reservat\u00f3rio de petr\u00f3leo (SAN-\nTOS et al., 2005; PHILIPPI; WOLF; SANTOS, 2005), sistema circulat\u00f3rio sangu\u00edneo\n(FANG et al., 2002; KRAFCZYK et al., 1998), fen\u00f4menos gasosos (WEI et al., 2004), na-\nnofluidos (XUAN; YU; LI, 2005), pol\u00edmeros l\u00edquidos (ONISHI; CHEN; OHASHI, 2005),\nentre outros.\n\nUma das caracter\u00edsticas freq\u00fcentemente ressaltadas na literatura do MLB \u00e9 a possi-\nbilidade de paraleliza\u00e7\u00e3o de suas opera\u00e7\u00f5es (SUCCI, 2001; K\u00d6RNER et al., 2005). Boa\nparte dos autores considera essa abordagem uma das melhores formas de proporcionar de-\nsempenho \u00e0s implementa\u00e7\u00f5es. Assim, existem v\u00e1rios trabalhos relevantes que adotam um\nc\u00f3digo paralelo para a elabora\u00e7\u00e3o de um programa eficiente, conforme pode ser observado\nna bibliografia relacionada sobre o assunto (PAN; PRINS; MILLER, 2004; SLOOT et al.,\n2004; DUPUIS, 2002; DESPLAT; PAGONABARRAGA; BLADON, 2001). Entretanto,\na maior parte deles est\u00e1 voltado \u00e0 solu\u00e7\u00e3o eficiente de problemas espec\u00edficos.\n\nUma exce\u00e7\u00e3o \u00e0 utiliza\u00e7\u00e3o restrita do MLB em trabalhos acad\u00eamicos \u00e9 encontrada no\nsoftware PowerFLOW (Exa Corporation, 2006). PowerFLOW \u00e9 uma aplica\u00e7\u00e3o comer-\ncial para a simula\u00e7\u00e3o de v\u00e1rios tipos de estruturas f\u00edsicas, especialmente aerodin\u00e2micas\n(LOCKARD; LUO; SINGER, 2000). O software apresenta muitos recursos de simula-\n\u00e7\u00e3o, incluindo fases de configura\u00e7\u00e3o, simula\u00e7\u00e3o propriamente dita e opera\u00e7\u00f5es de p\u00f3s-\nprocessamento. Em termos de simula\u00e7\u00e3o PowerFLOW est\u00e1 baseado em implementa\u00e7\u00f5es\nde diferentes modelos do MLB. As implementa\u00e7\u00f5es tamb\u00e9m est\u00e3o dispon\u00edveis em vers\u00f5es\nparalelas, tendo sido paralelizadas com MPI. Por ser uma aplica\u00e7\u00e3o comercial, nenhum\ndetalhe de implementa\u00e7\u00e3o \u00e9 apresentado, sendo apenas mencionado que o desempenho\nparalelo chega a atingir excelentes n\u00edveis.\n\nA maior parte dos resultados publicados envolvendo o MLB est\u00e3o geralmente con-\ncentrados na an\u00e1lise das solu\u00e7\u00f5es f\u00edsicas obtidas pelas aplica\u00e7\u00f5es. No entanto, algumas\nexce\u00e7\u00f5es s\u00e3o encontradas (CARTER; OLIKER, 2006; POHL et al., 2004; K\u00d6RNER et al.,\n2005).\n\nUm exemplo de avalia\u00e7\u00e3o de desempenho paralelo do MLB encontra-se em (CAR-\nTER; OLIKER, 2006). Nesse artigo s\u00e3o apresentadas compara\u00e7\u00f5es de performance ob-\ntidas em algumas arquiteturas vetoriais (Cray X1, NEC SX-6 e NEC SX-8) e superes-\ncalares (IBM Power3, Intel Itanium2 e AMD Opteron) contempor\u00e2neas. O estudo de\ncaso foi desenvolvido a partir de uma implementa\u00e7\u00e3o paralela bidimensional e outra tri-\ndimensional do MLB, as quais s\u00e3o empregadas em um problema de turbul\u00eancia da \u00e1rea\nda hidrodin\u00e2mica de magnetos. Os principais resultados apresentados demonstram um\nn\u00edvel de desempenho paralelo muito superior das arquiteturas vetoriais em rela\u00e7\u00e3o ao de-\nsempenho obtido para as arquiteturas escalares. As arquiteturas vetoriais tiveram uma\nmaior escalabilidade, atingindo maiores n\u00edveis de desempenho quando um n\u00famero maior\nde processadores era utilizado.\n\nOutro trabalho relevante sobre medi\u00e7\u00f5es de desempenho \u00e9 apresentado em (POHL\net al., 2004). Para esse caso foram realizadas avalia\u00e7\u00f5es de desempenho paralelo de uma\n\n\n\n43\n\nimplementa\u00e7\u00e3o tridimensional do MLB em arquiteturas Hitachi SR8000-F1, SGI Altix,\nNEC SX6, AMD Opteron e Intel Xeon. Nos testes, tr\u00eas aplica\u00e7\u00f5es foram desenvolvi-\ndas: uma para problemas de turbul\u00eancia oriundas do c\u00e1lculo da exaust\u00e3o de part\u00edculas\nem ve\u00edculos, outra para o c\u00e1lculo da velocidade em torno de nano-part\u00edculas em apli-\nca\u00e7\u00f5es da Engenharia Qu\u00edmica e a \u00faltima para a simula\u00e7\u00e3o de espumas met\u00e1licas. A\nan\u00e1lise dos resultados obtidos mostra bons \u00edndices de escalabilidade para todas as arqui-\nteturas utilizadas em rela\u00e7\u00e3o ao tamanho dos problemas simulados. J\u00e1 o custo-benef\u00edcio\nde processamento foi bem menor para as arquiteturas superescalares. Al\u00e9m disso, tais\narquiteturas n\u00e3o dependem do fluxo dos dados, nem de previs\u00f5es sobre a forma como o\nc\u00f3digo ser\u00e1 executado, assim como ocorre em arquiteturas vetoriais. Por outro lado, o\nganho de desempenho das arquiteturas superescalares deixa muito a desejar em rela\u00e7\u00e3o\nao ganho obtido usando arquiteturas vetoriais.\n\nAn\u00e1lise mais te\u00f3ricas e completas da paraleliza\u00e7\u00e3o e de otimiza\u00e7\u00f5es do m\u00e9todo tam-\nb\u00e9m foram feitas (K\u00d6RNER et al., 2005). Al\u00e9m de caracterizar a estrutura do m\u00e9todo,\nforam propostas diferentes estrat\u00e9gias de otimiza\u00e7\u00e3o do c\u00f3digo seq\u00fcencial com a fina-\nlidade de aumentar a efici\u00eancia. Uma forma de otimizar as implementa\u00e7\u00f5es do MLB \u00e9\nbuscar uma boa disposi\u00e7\u00e3o das estruturas de dados armazenadas na mem\u00f3ria, as quais\npodem ser previamente definidas para o problema que est\u00e1 sendo tratado. Solu\u00e7\u00f5es desse\ntipo podem ser facilmente aproveitadas em qualquer tipo de implementa\u00e7\u00e3o, inclusive em\nprogramas gen\u00e9ricos, desde que as otimiza\u00e7\u00f5es mais espec\u00edficas sejam deixadas de lado.\nTamb\u00e9m \u00e9 poss\u00edvel fazer o reaproveitamento de vari\u00e1veis tempor\u00e1rias usadas como um\nespa\u00e7o de troca entre os elementos do reticulado em cada intera\u00e7\u00e3o. Nesse caso, por\u00e9m,\na descri\u00e7\u00e3o do c\u00f3digo pode n\u00e3o ser t\u00e3o clara. Em termos de paraleliza\u00e7\u00e3o, o caminho ge-\nralmente apresentado \u00e9 o particionamento dos dados. Nesse caso, s\u00e3o descritos formas de\ncomunica\u00e7\u00e3o e de balanceamento de carga eficientes, que fornecem um bom desempenho\nquando aplicados na pr\u00e1tica.\n\nUm outro fator relacionado ao desempenho do m\u00e9todo refere-se aos aspectos f\u00edsicos\ndos problemas simulados (ARTOLI; HOEKSTRA; SLOOT, 2005). Atrav\u00e9s do estudo das\npropriedades f\u00edsicas \u00e9 poss\u00edvel determinar estrat\u00e9gias de simula\u00e7\u00e3o com par\u00e2metros oti-\nmizados. Com isso, resultados mais eficientes podem ser obtidos para cada caso avaliado,\ndiminuindo simplesmente os c\u00e1lculos que precisam ser feitos ou o n\u00famero de itera\u00e7\u00f5es\na ser utilizado. Trabalhos desse tipo j\u00e1 foram realizados para fluxos com movimenta\u00e7\u00e3o\nvari\u00e1vel, isto \u00e9, o canal por onde o fluxo passa possui uma dimens\u00e3o vari\u00e1vel, como \u00e9 o\ncaso dos vasos sang\u00fc\u00edneos (ARTOLI; HOEKSTRA; SLOOT, 2005).\n\nEm termos de particionamento de dados, diferentes solu\u00e7\u00f5es foram adotadas. Para\numa estrutura reticular irregular foi proposto o m\u00e9todo da Bisse\u00e7\u00e3o Ortogonal Recursiva\n- ORB (Orthogonal Recursive Bisection, em ingl\u00eas) (KANDHAI et al., 1998). A id\u00e9ia\ndessa estrat\u00e9gia est\u00e1 em dividir recursivamente o dom\u00ednio dos dados, de maneira que\ncada processo tenha uma balanceamento de carga homog\u00eaneo. Ao inv\u00e9s de simplesmente\ndistribuir os dados, o m\u00e9todo leva em considera\u00e7\u00e3o o custo das opera\u00e7\u00f5es, que pode ser\nmaior para um determinada regi\u00e3o do reticulado, caso esse tenha uma estrutura irregular.\nTal abordagem foi testada para o MLB, apresentando bons \u00edndices de desempenho (PAN;\nPRINS; MILLER, 2004).\n\nUma outra t\u00e9cnica de particionamento utilizada \u00e9 a Decomposi\u00e7\u00e3o Regular de Do-\nm\u00ednio - RDD (do ingl\u00eas, Regular Domain Decomposition) (DESPLAT; PAGONABAR-\nRAGA; BLADON, 2001). Nessa t\u00e9cnica os dados s\u00e3o distribu\u00eddos de maneira que cada\nprocesso opere sobre um mesmo volume de dados, sem se preocupar com a quantidade de\nopera\u00e7\u00f5es, visto que as opera\u00e7\u00f5es s\u00e3o geralmente as mesmas para cada dado. Essa abor-\n\n\n\n44\n\ndagem \u00e9 perfeita para um sistema regular, visto que a melhor distribui\u00e7\u00e3o \u00e9 obtida atrav\u00e9s\nde um processo de divis\u00e3o simples. Embora a Decomposi\u00e7\u00e3o Regular de Dom\u00ednios j\u00e1\ntenha sido utilizada na paraleliza\u00e7\u00e3o do MLB, n\u00e3o foram feitas maiores avalia\u00e7\u00f5es so-\nbre as diferentes formas de decompor um reticulado (DESPLAT; PAGONABARRAGA;\nBLADON, 2001).\n\n4.4 Conclus\u00e3o: Posicionamento de Contribui\u00e7\u00e3o\n\nConforme visto nas se\u00e7\u00f5es anteriores, embora os recursos de programa\u00e7\u00e3o de MPI\napresentem todos os recursos necess\u00e1rios para o desenvolvimento de programas paralelos\nonde as estruturas de dados sejam particionadas em bloco, nenhum teste espec\u00edfico sobre\nos fatores que interferem na melhor estrat\u00e9gia foram feitas para o MLB. Assim, o principal\nfoco deste trabalho \u00e9 avaliar o uso de diferentes estrat\u00e9gias de particionamento de dados\nem bloco em implementa\u00e7\u00f5es paralelas do MLB. Neste sentido, ser\u00e3o definidos os fatores\nque determinam as melhores formas de distribui\u00e7\u00e3o dos dados em estruturas regulares\nutilizadas para o armazenamento do reticulado.\n\n\n\n45\n\n5 IMPLEMENTA\u00c7\u00c3O PARALELA DO M\u00c9TODO DE LAT-\nTICE BOLTZMANN\n\nAs estrat\u00e9gias de particionamento e distribui\u00e7\u00e3o de dados em blocos discutidas no\ncap\u00edtulo anterior foram adotadas nesse trabalho como forma de diminuir o tempo de exe-\ncu\u00e7\u00e3o das implementa\u00e7\u00f5es paralelas do MLB. O presente cap\u00edtulo descreve os aspectos\nrelacionados \u00e0 ado\u00e7\u00e3o desses tipos de particionamento em implementa\u00e7\u00f5es paralelas de-\nsenvolvidas para o m\u00e9todo. Inicialmente, s\u00e3o apresentadas algumas id\u00e9ias gerais utili-\nzadas na implementa\u00e7\u00e3o, tanto para o modelo bidimensional, quanto para o modelo tri-\ndimensional. Na seq\u00fc\u00eancia, s\u00e3o detalhadas as estrat\u00e9gias de paraleliza\u00e7\u00e3o e os recursos\nde programa\u00e7\u00e3o utilizados. Por fim, s\u00e3o feitas avalia\u00e7\u00f5es te\u00f3ricas do impacto de diferen-\ntes formas de particionar os dados, comparando o tempo de comunica\u00e7\u00e3o consumido por\ncada estrat\u00e9gia em uma itera\u00e7\u00e3o.\n\n5.1 Implementa\u00e7\u00e3o\n\nAs implementa\u00e7\u00f5es do MLB foram feitas para dois modelos de propaga\u00e7\u00e3o de part\u00ed-\nculas. Para o caso bidimensional foi adotado o modelo D2Q9, enquanto que o modelo\nD3Q19 foi o escolhido para o caso tridimensional. A descri\u00e7\u00e3o desses modelos foi feita\nna Se\u00e7\u00e3o 3.2. A implementa\u00e7\u00e3o das fun\u00e7\u00f5es do m\u00e9todo e do programa de testes foram\nescritas usando a linguagem de programa\u00e7\u00e3o C padr\u00e3o ANSI. Para ambos os casos fo-\nram adotadas tr\u00eas estruturas de dados, a fim de armazenar as informa\u00e7\u00f5es utilizadas e\nmanipuladas durante a execu\u00e7\u00e3o do c\u00f3digo. Tais estruturas definem, respectivamente:\n\n1. as propriedades f\u00edsicas;\n\n2. a estrutura do reticulado;\n\n3. par\u00e2metros referentes a execu\u00e7\u00e3o paralela.\n\nA estrutura das propriedades f\u00edsicas cont\u00e9m diversas informa\u00e7\u00f5es. Tais informa\u00e7\u00f5es\nenvolvem valores como: densidade, acelera\u00e7\u00e3o (usado para determinar a velocidade ini-\ncial), escala do tempo de relaxa\u00e7\u00e3o ? e o di\u00e2metro do tubo real simulado usado para o\nc\u00e1lculo do n\u00famero de Reynolds. Esses valores s\u00e3o utilizados para iniciar algumas va-\nri\u00e1veis do reticulado, bem como para obter alguns valores macrosc\u00f3picos dependentes\ndessas constantes ap\u00f3s a simula\u00e7\u00e3o.\n\nPara a estrutura de dados do reticulado s\u00e3o definidos:\n\n? a dimens\u00e3o do problema (2D ou 3D);\n\n? o n\u00famero de dire\u00e7\u00f5es poss\u00edveis de deslocamento de cada ponto do reticulado;\n\n\n\n46\n\n? o n\u00famero de pontos em cada uma das dimens\u00f5es do reticulado completo e dos sub-\nreticulados a serem processados pelos n\u00f3s;\n\n? o posicionamento do sub-reticulado em rela\u00e7\u00e3o ao reticulado completo inicial;\n\n? uma matriz de posi\u00e7\u00f5es que descreve a posi\u00e7\u00e3o das barreiras e bordas do fluxo;\n\n? uma regi\u00e3o de mem\u00f3ria alocada onde s\u00e3o armazenadas as informa\u00e7\u00f5es f\u00edsicas de\ncada um dos pontos do reticulado. O tamanho dessa regi\u00e3o depende do n\u00famero de\ndire\u00e7\u00f5es de deslocamento e da dimens\u00e3o do sub-reticulado.\n\nOs par\u00e2metros referentes \u00e0 execu\u00e7\u00e3o paralela englobam informa\u00e7\u00f5es utilizadas no\nparticionamento dos dados do reticulado. Tais par\u00e2metros definem o n\u00famero de divis\u00f5es\nrealizadas em cada dimens\u00e3o do reticulado para a forma\u00e7\u00e3o dos sub-reticulados, quais as\nsub-regi\u00f5es que cada um dos processos ir\u00e3o operar e um identificador exclusivo para cada\nprocesso, o qual \u00e9 utilizado nas comunica\u00e7\u00f5es cartesianas.\n\n5.2 Paraleliza\u00e7\u00e3o\n\nA paraleliza\u00e7\u00e3o do MLB est\u00e1 baseada em um modelo de programa\u00e7\u00e3o Single Pro-\ngram Multiple Data (SPMD) (WILKINSON; ALLEN, 1998). Isso significa que existe\num \u00fanico c\u00f3digo de programa que executa em cada processador, o qual atua sobre uma\nparcela distinta de dados em cada caso. Como a manipula\u00e7\u00e3o dos dados possui uma\ncerta independ\u00eancia e isolamento entre diferentes subconjuntos de valores, tal forma de\nprograma\u00e7\u00e3o apresenta-se como uma das alternativas mais indicadas.\n\nUma vez escolhido o paralelismo de dados, \u00e9 necess\u00e1rio aplic\u00e1-lo \u00e0s implementa\u00e7\u00f5es.\nO particionamento dos dados feito neste trabalho consiste em distribuir a estrutura do\nreticulado entre diversos processadores, com o intuito de realizar os c\u00e1lculos indepen-\ndentemente sobre cada sub-regi\u00e3o controlada por um processo. Diferente de abordagens\nque procuram dividir o problema apenas em uma dimens\u00e3o, a implementa\u00e7\u00e3o paralela\nproposta possibilita a divis\u00e3o e distribui\u00e7\u00e3o dos sub-reticulados de v\u00e1rias formas. Assim,\n\u00e9 poss\u00edvel dividir os dados em todas as dimens\u00f5es coordenadas (2D ou 3D) pelos quais\nos modelos implementados s\u00e3o definidos, facilitando, assim, a escolha da estrat\u00e9gia mais\neficiente para cada caso.\n\nUma das preocupa\u00e7\u00f5es existentes na divis\u00e3o dos dados \u00e9 o balanceamento de carga.\nComo nas implementa\u00e7\u00f5es paralelas do m\u00e9todo a divis\u00e3o dos dados \u00e9 feita pelo n\u00famero\nde processadores usados, \u00e9 evidente que existir\u00e1 um excedente quando a divis\u00e3o for feita\npor um n\u00famero de processadores n\u00e3o m\u00faltiplo do tamanho dos dados. Esse excedente\nprecisar\u00e1 ser distribu\u00eddo entre os processos j\u00e1 existentes. Para evitar que o excedente fi-\nque a cargo de um \u00fanico processador ou que exista um processador com uma significativa\nquantidade de dados a menos a calcular em rela\u00e7\u00e3o aos demais, optou-se por distribuir o\nexcedente entre diversos processadores, de maneira que a diferen\u00e7a de carga entre cada\nprocessador seja de no m\u00e1ximo uma unidade em cada dimens\u00e3o coordenada. Como exem-\nplo, utilizando 6 processadores que dividem um reticulado em apenas uma determinada\ndimens\u00e3o coordenada formada por 21 pontos, a distribui\u00e7\u00e3o do tamanho do sub-reticulado\npara cada processador teria, respectivamente, a seguinte ordem:\n\n&amp; ? &amp; ? &amp; ? ? ? ? ( ?\nIsso garante uma distribui\u00e7\u00e3o de dados mais igualit\u00e1ria entre os processadores. A di-\nferen\u00e7a unit\u00e1ria \u00e9 muito importante, uma vez que, considerando que haja uma divis\u00e3o\n\n\n\n47\n\nirregular para um particionamento tridimensional, a diferen\u00e7a entre o melhor e pior casos\nser\u00e1 de apenas: ' . , ? ? ? ? ? ??? ? ? ? ? ??? ??? ? ? ? ? ??? ??? ? (5.1)\nOnde\n\n' . ,\n\u00e9 a diferen\u00e7a total de pontos, considerando as dimens\u00f5es x, y e z do sub-\n\nreticulado.\nEm virtude da propaga\u00e7\u00e3o das informa\u00e7\u00f5es dos pontos do fluido, existe uma depen-\n\nd\u00eancia de dados entre as fronteiras dos sub-reticulados. Em cada itera\u00e7\u00e3o s\u00e3o realizados\nc\u00e1lculos cujas informa\u00e7\u00f5es precisam ser armazenadas e repassadas para outros processos.\nAssim, cada sub-reticulado possui um conjunto de pontos (borda) a mais, onde os valores\na serem propagados s\u00e3o armazenados, conforme ilustrado para apenas o sub-reticulado 5\nde um modelo bidimensional hipot\u00e9tico na Figura 5.1.\n\n1 3\n\n4\n\n8 9\n\n2\n\n5 6\n\n7\n\nFigura 5.1: Bordas de armazenamento de valores tempor\u00e1rios para sub-reticulados do\nmodelo bidimensional\n\nEm um segundo momento, ap\u00f3s o armazenamento tempor\u00e1rio dos resultados dos c\u00e1l-\nculos nas bordas, \u00e9 feita a comunica\u00e7\u00e3o dos valores armazenados para os respectivos\nprocessos vizinhos de cada coordenada cartesiana. Dessa forma, os dados operados fi-\ncam constantes em todos os processos. Essa comunica\u00e7\u00e3o precisa ser feita tanto para os\nelementos vizinhos ortogonais, como para os diagonais, o que gera um n\u00famero bastante\ngrande de comunica\u00e7\u00f5es. Na Figura 5.2 s\u00e3o ilustrados, respectivamente, as comunica-\n\u00e7\u00f5es necess\u00e1rias para o caso bidimensional e tridimensional, onde as setas mais densas\nilustram as comunica\u00e7\u00f5es ortogonais e as mais finas as comunica\u00e7\u00f5es diagonais.\n\nFigura 5.2: Fluxo de comunica\u00e7\u00e3o entre processos para a implementa\u00e7\u00e3o bidimensional\ne tridimensional\n\nA defini\u00e7\u00e3o dos sub-reticulados e a troca de dados que ocorre entre os processadores\ndurante as comunica\u00e7\u00f5es \u00e9 realizada atrav\u00e9s dos recursos oferecidos pelas fun\u00e7\u00f5es da\nbiblioteca MPI. Os detalhes de programa\u00e7\u00e3o referentes \u00e0 comunica\u00e7\u00e3o s\u00e3o apresentados\nna pr\u00f3xima se\u00e7\u00e3o.\n\n\n\n48\n\n5.3 Fun\u00e7\u00f5es de MPI Utilizadas na Implementa\u00e7\u00e3o\n\nOs recursos de programa\u00e7\u00e3o utilizados de MPI facilitaram o particionamento dos da-\ndos do reticulado e a atualiza\u00e7\u00e3o dos dados pertinentes a cada um dos processos. Para\ntanto, foram utilizadas as seguintes diretivas:\n\n? Mecanismos de mapeamento cartesiano;\n\n? Fun\u00e7\u00f5es de comunica\u00e7\u00e3o ass\u00edncronas;\n\n? Fun\u00e7\u00f5es de comunica\u00e7\u00e3o coletivas e s\u00edncronas.\n\nNa implementa\u00e7\u00e3o paralela do MLB, inicialmente \u00e9 criada uma estrutura de comu-\nnica\u00e7\u00e3o cartesiana atrav\u00e9s da fun\u00e7\u00e3o MPI_Cart_create(), onde s\u00e3o definidos o n\u00fa-\nmero de dimens\u00f5es e o n\u00famero de partes em cada dimens\u00e3o. Em seguida cada processo\nMPI \u00e9 associado ao comunicador cartesiano atrav\u00e9s da fun\u00e7\u00e3o MPI_Comm_rank() e,\na partir disso, mapeado via MPI_Cart_coords(), de maneira que cada processo es-\nteja relacionado a uma \u00fanica posi\u00e7\u00e3o cartesiana. Desta forma, atrav\u00e9s do uso da fun\u00e7\u00e3o\nMPI_Cart_rank() \u00e9 poss\u00edvel descobrir qual \u00e9 o processo vizinho de uma determinada\ncoordenada no momento em que uma comunica\u00e7\u00e3o ir\u00e1 ser efetuada.\n\nDependendo do tamanho do reticulado existe a possibilidade de que seja necess\u00e1ria\na transmiss\u00e3o de uma grande quantidade de dados nas fun\u00e7\u00f5es de atualiza\u00e7\u00e3o dos valo-\nres dos elementos das bordas. Como a diretiva de envio s\u00edncrono disponibilizada em MPI\npela diretiva MPI_Send() pode ficar bloqueada at\u00e9 que uma mensagem tenha sido total-\nmente enviada, gerando esperas ativas, especialmente nos casos onde um grande volume\nde dados \u00e9 manipulado, foi adotado um mecanismo de envio ass\u00edncrono n\u00e3o bloqueante.\nEsse recurso \u00e9 oferecido pela fun\u00e7\u00e3o MPI_Isend(), garantindo a libera\u00e7\u00e3o do processo\nassim que a invoca\u00e7\u00e3o do m\u00e9todo \u00e9 feita, sem a necessidade de espera para o envio dos\ndados. J\u00e1 a recep\u00e7\u00e3o dos dados das bordas \u00e9 feito com MPI_Recv(), uma fun\u00e7\u00e3o de\nrecep\u00e7\u00e3o s\u00edncrona, que bloqueia o processo enquanto os dados n\u00e3o forem recebidos.\n\nO c\u00e1lculo paralelo da velocidade m\u00e9dia do fluxo envolvido no m\u00e9todo utiliza fun\u00e7\u00f5es\nsimples de comunica\u00e7\u00e3o. Visto que este c\u00e1lculo utiliza apenas os valores de uma regi\u00e3o do\nreticulado, nem todos os processos s\u00e3o considerados. Para realizar o c\u00e1lculo da velocidade\nm\u00e9dia todos os processadores que possuem os valores da regi\u00e3o avaliada enviam suas\nm\u00e9dias parciais a um processador coordenador. Assim, foram utilizadas a fun\u00e7\u00e3o de\nenvio bloqueante, MPI_Send(), e recebimento bloqueante, MPI_Recv(). Ap\u00f3s a\nsoma, o processador coordenador envia o valor da velocidade m\u00e9dia a todos os processos\natrav\u00e9s da fun\u00e7\u00e3o de comunica\u00e7\u00e3o coletiva MPI_Bcast(), gerando, assim, um ponto\nde sincroniza\u00e7\u00e3o.\n\n5.4 An\u00e1lise Te\u00f3rica do Custo de Comunica\u00e7\u00e3o\n\nA fim de avaliar o custo das opera\u00e7\u00f5es de comunica\u00e7\u00e3o para as diferentes t\u00e9cnicas de\nparticionamento adotadas foram desenvolvidas algumas an\u00e1lises te\u00f3ricas. Tais an\u00e1lises\nconsistem em mensurar o custo de comunica\u00e7\u00e3o de cada processador em cada itera\u00e7\u00e3o do\nm\u00e9todo. Para tanto, foi adotado o modelo de execu\u00e7\u00e3o paralela conhecido como Modelo\nLogP (CULLER et al., 1993, 1996) em virtude do mesmo ser mais realista e apropriado\npara sistemas de mem\u00f3ria distribu\u00edda do que outras propostas (GIBBONS, 1989; VALI-\nANT, 1990; CORREA et al., 2002);\n\n\n\n49\n\nO Modelo LogP \u00e9 um modelo de m\u00e1quina paralela que leva em conta explicitamente\nas caracter\u00edsticas de desempenho da rede. Atrav\u00e9s dele \u00e9 poss\u00edvel definir a granularidade\ndas tarefas, uma vez que um n\u00famero P finito de processadores \u00e9 utilizado. Al\u00e9m do\nn\u00famero de processadores P, o modelo tem como par\u00e2metros a lat\u00eancia de comunica\u00e7\u00e3o\nL, a sobrecarga de empacotamento e tratamento das mensagens o, que deriva do termo\nem ingl\u00eas overhead, e o intervalo m\u00ednimo entre o envio/recebimento das mensagens g, do\ningl\u00eas gap. Esse \u00faltimo par\u00e2metro tamb\u00e9m \u00e9 conhecido como conten\u00e7\u00e3o de rede, sendo\nequivalente ao inverso da vaz\u00e3o (\n\n? ? ? ????? ), sendo ? ????? a vaz\u00e3o da rede. A Figura 5.3 ilustra\na rela\u00e7\u00e3o entre os componentes do modelo para um esquema de rede hipot\u00e9tico.\n\n???? ??\n\ng ? (gap)\n\nP PM M M\n\nlat\u00eancia\n\nrede de interconex\u00e3o\n\no (overhead) o\n\nprocessadores\n\nP\n\nFigura 5.3: Esquema de funcionamento do modelo LogP (CULLER et al., 1996)\n\nPara a simplifica\u00e7\u00e3o das avalia\u00e7\u00f5es do custo de comunica\u00e7\u00e3o individual de cada pro-\ncesso realizadas neste trabalho foram considerados apenas a lat\u00eancia e a conten\u00e7\u00e3o da\nrede. Assim, o tempo de envio de uma mensagem de tamanho N pode ser sistematizado\nem:\n\n? ( \t \n ? ? 2 ? \t ? ? 2 ? \t ? ? ????? (5.2)\n5.4.1 An\u00e1lise da Implementa\u00e7\u00e3o Bidimensional\n\nNo modelo D2Q9, al\u00e9m da posi\u00e7\u00e3o est\u00e1tica, existem 8 dire\u00e7\u00f5es diferentes de deslo-\ncamento, sendo 4 ortogonais e 4 diagonais. Essas dire\u00e7\u00f5es podem ser combinadas entre\nsi de maneira que sejam definidos 4 faces ortogonais, a fim de simplificar o processo de\ncomunica\u00e7\u00e3o dos dados que se encontram nas bordas dos sub-reticulados. Cada uma des-\nsas 4 faces \u00e9 composta de 3 dire\u00e7\u00f5es de deslocamento: 1 dire\u00e7\u00e3o ortogonal e 2 dire\u00e7\u00f5es\ndiagonais, conforme pode ser visto na Figura 5.4.\n\nProcessador 2\n\nProcessador 1\n\nProcessador 4\n\nProcessador 3\n\nFigura 5.4: Exemplo de comunica\u00e7\u00e3o dos pontos das faces na implementa\u00e7\u00e3o bidimensi-\nonal\n\nNo exemplo acima, cada sub-reticulado \u00e9 composto por 4 pontos. Para a simplifica\u00e7\u00e3o\n\n\n\n50\n\nda ilustra\u00e7\u00e3o s\u00e3o mostrados apenas as dire\u00e7\u00f5es pertinentes a uma das faces. J\u00e1 as linhas\npontilhadas destacam as dire\u00e7\u00f5es agrupadas que s\u00e3o comunicadas aos processos vizinhos.\nConsiderando ? ? \t ? e ? ? \t ? a dimens\u00e3o do reticulado em rela\u00e7\u00e3o ao eixo x e y, respecti-\nvamente, e \n?? ? ! ? e \n?? ? ! ? o n\u00famero de divis\u00f5es feitas sobre o eixo x e y, respectivamente,\nent\u00e3o o tamanho das bordas dos sub-reticulados para as dimens\u00f5es do eixo x e do eixo y,\npode ser calculado por:\n\n? ? ' ? ? ? ? ? \t ? ? \n?? ? ! ? (5.3)\n? ? ' ? ? ? ? ? \t ? ? \n?? ? ! ? (5.4)\n\nComo s\u00e3o 4 as bordas dos sub-reticulados, 2 em rela\u00e7\u00e3o ao eixo x e 2 em rela\u00e7\u00e3o ao\neixo y, ent\u00e3o o custo de comunica\u00e7\u00e3o ser\u00e1 de:\n\n! \t ? ? ? ? ? ? ? ? ? ? ? ? ? ? 2 ? ? ? ? ? ? ? ? ? ? ? &amp; ? ? ? ' ? ? ? ? ? ' ? ? ??? (5.5)\nCaso uma das dimens\u00f5es n\u00e3o tenha sido particionada, ent\u00e3o tal dimens\u00e3o n\u00e3o precisar\u00e1\n\ncomunicar seus dados.\nApesar da Figura 5.4 ilustrar a troca de dados entre apenas dois processos vizinhos\n\npara todas as dire\u00e7\u00f5es de velocidade de uma determinada face do sub-reticulado, os valo-\nres das dire\u00e7\u00f5es diagonais dos pontos extremos do sub-reticulado n\u00e3o devem ser conside-\nrados. Devido \u00e0 dire\u00e7\u00e3o de propaga\u00e7\u00e3o da velocidade, tais valores precisam ser enviados\naos processos diagonais vizinhos, conforme apresenta a Figura 5.5.\n\nProcessador 1\n\nProcessador 4Processador 2\n\nProcessador 3\n\nFigura 5.5: Exemplo de comunica\u00e7\u00e3o dos pontos diagonais na implementa\u00e7\u00e3o bidimensi-\nonal\n\nNesse caso, o Processador 1 envia as informa\u00e7\u00f5es da dire\u00e7\u00e3o diagonal do ponto mais\nextremo para seu vizinho diagonal, Processador 4. Para a simplifica\u00e7\u00e3o foi mostrado ape-\nnas a comunica\u00e7\u00e3o entre esses dois processos. Todavia, o mesmo se repete entre as outras\ntr\u00eas diagonais. Por esse motivo, cada processo necessitar\u00e1 efetuar mais 4 comunica\u00e7\u00f5es\nde apenas um valor em cada caso, al\u00e9m das estimadas anteriormente:\n\n! \t ? ? ? ' . ? ? ? ? ? ? ??? ? 2 ? ? ? ? ??????? ??? (5.6)\nAssim, o custo total da comunica\u00e7\u00e3o que um processo realiza ser\u00e1 a soma das comunica-\n\u00e7\u00f5es ortogonais com as comunica\u00e7\u00f5es diagonais, que no caso de um particionamento em\nduas dimens\u00f5es ser\u00e1 de:\n\n! \t ? ? ? ? ? ? ? ? ? ? 2 ? ? ? ? ? ? ????? ? ? &amp; ? ? ? \t ? ? \n?? ? ! ? ? ? ? \t ? ? \n?? ? ! ? ? ? ? ? (5.7)\n\n\n\n51\n\n5.4.2 An\u00e1lise da Implementa\u00e7\u00e3o Tridimensional\n\nO c\u00e1lculo de custo de comunica\u00e7\u00e3o do modelo tridimensional \u00e9 semelhante ao modelo\nbidimensional. No modelo D3Q19 existem 18 dire\u00e7\u00f5es diferentes de deslocamento al\u00e9m\nda posi\u00e7\u00e3o est\u00e1tica. Essas 18 dire\u00e7\u00f5es podem ser agrupadas entre si de maneira que sejam\nformadas 6 faces ortogonais. Cada uma delas \u00e9 composta por 5 dire\u00e7\u00f5es de deslocamento\ndiferentes: uma dire\u00e7\u00e3o ortogonal e 4 diagonais, conforme ilustra a Figura 5.6. Nessa\nfigura foram exibidas apenas as dire\u00e7\u00f5es de uma determinada face de dois sub-reticulados\nvizinhos.\n\n?? ??\n????\n\n?\t\n\n??\n ????\n\n?? ??????\n?? ???? !\"#\n\n$%&amp;'\n()\n\n*+,-\n./\n\n01 23 456789\n:;&lt;=>?@ABCDEFG HI\n\nJK LM\n\nNO\n\nProcessador 1\n\nProcessador 2\n\nFigura 5.6: Exemplo de comunica\u00e7\u00e3o dos pontos das faces na implementa\u00e7\u00e3o tridimensi-\nonal\n\nO n\u00famero de pontos das faces denominadas de\n, ??!\n( ? , , ? !\n( ? , , ? !\n( \n , ir\u00e1 depender do\n\ntamanho das demais dimens\u00f5es do sub-reticulado:\n\n, ? ! ( ? ? ? ? ' ? ? ? ? ? ' ? \n (5.8), ? ! ( ? ? ? ? ' ? ? ? ? ? ' ? \n (5.9), ? ! ( \n ? ? ? ' ? ? ? ? ? ' ? ? (5.10)\nOnde o valor de ? ? ' ? ? , ? ? ' ? ? e ? ? ' ? \n ir\u00e1 depender da dimens\u00e3o do reticulado e do\n\nn\u00famero de divis\u00f5es feitas sobre cada um dos eixos x, y e z, sendo calculados atrav\u00e9s de:\n\n? ? ' ? ? ? ? ? \t ? ? \n?? ? ! ? (5.11)\n? ? ' ? ? ? ? ? \t ? ? \n?? ? ! ? (5.12)\n? ? ' ? \n ? ? ? \t \n ? \n?? ? ! \n (5.13)\n\nCaso os lados de uma determinada face n\u00e3o tenham sido particionados, ent\u00e3o tal face\nn\u00e3o precis\u00e1 realizar a comunica\u00e7\u00e3o dos dados e conseq\u00fcentemente haver\u00e1 um n\u00famero\nmenor de mensagens. Supondo, no entanto, que todas as faces tenham sido particionadas,\nent\u00e3o o custo de comunica\u00e7\u00e3o ser\u00e1 de:\n\n! \t ? ? ? ? ? ? ? ? ? ? ? ? ? ? 2 ? ? ? ? ? ??????? ? ? ? ? , ? !\n( ? ? , ? !\n( ? ? , ??!\n( \n ??? (5.14)\nAl\u00e9m da comunica\u00e7\u00e3o entre as faces, existe ainda a comunica\u00e7\u00e3o entre processos\n\norganizados na forma diagonal. Um exemplo de comunica\u00e7\u00e3o diagonal \u00e9 mostrado na\nFigura 5.7. Novamente s\u00e3o utilizados dois processos de exemplo, exibindo a troca de\ndados em apenas uma das diagonais de propaga\u00e7\u00e3o.\n\n\n\n52\n\n?? ?? ?? ??\n\n?\t \n?\n??? \n???\n\nProcessador 1\n\nProcessador 4\n\nFigura 5.7: Exemplo de comunica\u00e7\u00e3o dos pontos diagonais na implementa\u00e7\u00e3o tridimen-\nsional\n\nNo entanto, cada uma das 12 dire\u00e7\u00f5es diagonais dos pontos que se encontram em uma\ndas extremidades do sub-reticulado devem ser enviados aos seus respectivos processos\ndiagonais vizinhos. Caso apenas uma das tr\u00eas dimens\u00f5es tenha sido particionada, ent\u00e3o\nhaver\u00e1 necessidade de comunica\u00e7\u00e3o de apenas 8 diagonais, perfazendo um custo de:\n\n! \t ? ? ? ' . ? ? ? ? ? ? ? ? 2 ? ? ? ? ? ? ? ? ? ? ? ? ? ' ? ? ? ? ? ' ? \n ? (5.15)\nSendo ? ? ' ? ? e ? ? ' ? \n o tamanho dos lados das dimens\u00f5es que n\u00e3o foram particionadas.\nEntretanto, se o reticulado for particionado em duas ou tr\u00eas dimens\u00f5es, ent\u00e3o todas as\n12 diagonais dever\u00e3o ser enviadas. Para este caso, o custo de transmiss\u00e3o dos elementos\ndiagonais ser\u00e1 de:\n\n! \t ? ? ? ' . ? ? ? ? ? ? ? ? ? 2 ? ? ? ? ? ? ????? ? ? ? ? ' ? ? ? ? ? ' ? ? ? ? ? ' ? \n ? (5.16)\nonde, ? ? \t ? , ? ? \t ? e ? ? \t \n definem o n\u00famero de elementos do sub-reticulado para a di-\nmens\u00e3o indicada e \n?? ? ! ? , \n?? ? ! ? e \n?? ? ! \n especificam o n\u00famero de divis\u00f5es feitas para a\ndimens\u00e3o do \u00edndice subscrito. Da mesma forma que para a implementa\u00e7\u00e3o bidimensional,\no custo total de comunica\u00e7\u00e3o do caso tridimensional ser\u00e1 obtido pela soma das comunica-\n\u00e7\u00f5es das faces mais a soma dos custos de comunica\u00e7\u00e3o das diagonais, sendo este definido\npor:\n\n! \t ? ? ? ? ? ? ? ? ? ? ? 2 ? ? ? ? ??????? ? ? ? ? ? , ??!\n( ? ? , ??!\n( ? ? , ? ! ( \n ? ? ? ? ? ? ' ? ? ? ? ? ' ? ? ? ? ? ' ? \n ???\n(5.17)\n\n5.4.3 Exemplos de C\u00e1lculo de Custos dos Particionamentos\n\nAs express\u00f5es desenvolvidas anteriormente foram utilizadas para avaliar o custo de\ncomunica\u00e7\u00e3o de algumas configura\u00e7\u00f5es de particionamento. Os valores para a lat\u00eancia e\nvaz\u00e3o utilizados foram de, respectivamente, 42 ? s (microssegundos) e 61,39 MB/s (Me-\ngabytes por segundo). A vaz\u00e3o foi obtida para um conjunto de dados transmitido de\n128 KB (Kilobytes). Esses valores foram medidos no ambiente de testes descrito na Se-\n\u00e7\u00e3o 6.3. O tipo de dados utilizado nas mensagens \u00e9 de ponto flutuante e dupla precis\u00e3o\n(tipo double em linguagem C), cujo tamanho \u00e9 igual a 64 bits. A representa\u00e7\u00e3o do partici-\nonamento e da distribui\u00e7\u00e3o dos dados dos sub-reticulados \u00e9 feita atrav\u00e9s de uma nota\u00e7\u00e3o\n\"a X b\" ou \"a X b X c\", onde a, b e c indicam, respectivamente, o n\u00famero de partes ou\ndados particionados em rela\u00e7\u00e3o aos eixos x, y e z.\n\n\n\n53\n\n5.4.3.1 Um Exemplo para a Divis\u00e3o Bidimensional\n\nPara avaliar algumas configura\u00e7\u00f5es de particionamento do modelo bidimensional foi\nadotado um reticulado de 512 X 512 pontos. Este foi particionado entre 32 processos.\n\nDividindo-se o reticulado linearmente, 32 X 1 ou 1 X 32, o custo total de comunica\u00e7\u00e3o\ndos dados transmitidos por processo ser\u00e1 em milissegundos (ms) equivalente a:\n\n! \t ? ? ??? ? ? 2 ? ? ? ? ? ? ????? ? ? &amp; \t ? ? ? \t ? ? ? ? \t ? ? ? ? &amp; ? ? ? ms (5.18)\nJ\u00e1 para uma divis\u00e3o em duas dimens\u00f5es usando uma configura\u00e7\u00e3o 8 X 4, por exemplo,\ntem-se:\n\n! \t ? ? ? 0 ? ? 2 ? ? ? ? ? ? ? ? ? ? ? &amp; ? ? ? ? \t ? ? ??? ? ? ? ? \t ? ? ? ? ? ? ? \t ? ? ? ? ? ? ? ? ms (5.19)\nComparando-se os exemplos de c\u00e1lculo de custo, ! \t ? ? ??? e ! \t ? ? ? 0 , a diferen\u00e7a no\n\ntempo de comunica\u00e7\u00e3o do primeiro em rela\u00e7\u00e3o ao segundo cai em mais da metade, o que\nvalida o uso de particionamentos cartesianos para este caso. Uma vez que na divis\u00e3o uni-\ndimensional o custo de comunica\u00e7\u00e3o \u00e9 o mesmo para cada processador, independente do\nn\u00famero de processadores utilizado, \u00e9 poss\u00edvel obter sempre melhores resultados com o\nparticionamento em blocos. Na teoria, isso significa que quanto maior o n\u00famero partici-\nonamentos realizados em cada uma das duas dimens\u00f5es, menor ser\u00e1 o tempo necess\u00e1rio\npara a comunica\u00e7\u00e3o dos dados e maior ser\u00e1 a diferen\u00e7a de tempo em rela\u00e7\u00e3o ao partici-\nonamento linear. No entanto, na pr\u00e1tica verifica-se um certo limite, que ir\u00e1 depender da\nlat\u00eancia da rede e da sobrecarga de particionamento.\n\n5.4.3.2 Um Exemplo para a Divis\u00e3o Tridimensional\n\nPara a divis\u00e3o tridimensional foi considerado um reticulado de dimens\u00e3o 128 X 128 X\n128, o qual \u00e9 dividido e distribu\u00eddo entre 32 processos, gerando diferentes configura\u00e7\u00f5es\nde particionamento.\n\nNo caso do particionamento linear, como por exemplo 32 X 1 X 1, o custo de comu-\nnica\u00e7\u00e3o dos dados em cada itera\u00e7\u00e3o ser\u00e1 de:\n\n! \t ? ? ??? ? ? ? 2 ? ? ? ? ? ? ? ? ? ? ? \t ? \t ??? \t ? ? ? \t ? ? ? ? ? \t ? ? ? ? ??? ? ? ??? ??? ? ? ? ? ? ? ? ms (5.20)\nConsiderando agora uma divis\u00e3o bidimensional, como 1 X 4 X 8 partes, t\u00eam-se um tempo\npara a transmiss\u00e3o dos dados de:\n\n! \t ? ? ??? ? ? ? 2 ? ? ? ? ? ? ? ? ? ? ? ? \t ? ? \t ? ??? ? ? ??? ??? ? ? ??? ? ? ? ??? ? ? ? ? ? ? ? ms (5.21)\n? ??? \t ? ? ? ? ??? ? ? ??? ??? ? ? ??? ? ? ? (5.22)\n\nJ\u00e1 para uma divis\u00e3o tridimensional, tal como 2 X 4 X 4 partes, o custo das mensagens por\nitera\u00e7\u00e3o para realizar a comunica\u00e7\u00e3o ser\u00e1 de:\n\n! \t ? ? ?\n\t ? ? ? 2 ? ? ? ? ??????? ? ? ? \t ? \t ? ? \t + ? ? \t ? ? \t ? \t + + ? ? ? ? ? ? ? ms (5.23)+ ? ? ? ??? ? ? ? ? ? ??? ??? ? ? ? ? ??? ??? ? ? ? ??? ??? ? ? ? ? ??? ??? ? ? ? ??? ? ? ? (5.24)+ + ? ? ??? ? ? ? ? ??? ??? ? ? ??? ??? (5.25)\nConsiderando o primeiro ( ! \t ? ? ??? ) e o segundo ( ! \t ? ? ??? ) casos de configura\u00e7\u00e3o de\n\nparticionamento, pode-se observar uma redu\u00e7\u00e3o em mais da metade do tempo necess\u00e1rio\npara a transmiss\u00e3o dos dados. J\u00e1 entre o primeiro ( ! \t ? ? ??? ) e o terceiro ( ! \t ? ? ??\t ) custo\n\n\n\n54\n\nde configura\u00e7\u00e3o de particionamento percebe-se que a \u00faltima alternativa diminui o tempo\nem mais de\n\n? ? &amp; . Considerando que a aplica\u00e7\u00e3o paralela comunica uma grande quantia\nde dados em cada itera\u00e7\u00e3o, utilizar configura\u00e7\u00f5es de particionamento que atenuem tal\nprocedimento \u00e9 um ponto muito importante para melhorar a efici\u00eancia do paralelismo.\n\nApesar dos resultados te\u00f3ricos serem muito bons para o particionamento em duas e\ntr\u00eas dimens\u00f5es, \u00e9 importante lembrar que a comunica\u00e7\u00e3o entre os processos ocorre par-\na-par. Por esse motivo, os resultados pr\u00e1ticos podem n\u00e3o ser t\u00e3o bons em rela\u00e7\u00e3o ao\nparticionamento linear, visto que no particionamento em duas ou tr\u00eas dimens\u00f5es cada\nprocesso depende de mais processos para realizar a sincroniza\u00e7\u00e3o. Com isso aumentam\nas chances de ocorrem atrasos e esperas no recebimento de mensagens.\n\n\n\n55\n\n6 RESULTADOS EXPERIMENTAIS: PARTICIONAMENTO\nLINEAR\n\nAs implementa\u00e7\u00f5es paralelas do MLB descritas no cap\u00edtulo anterior, al\u00e9m de anali-\nsadas teoricamente, tamb\u00e9m foram validadas empiricamente. Atrav\u00e9s da simula\u00e7\u00e3o de\nproblemas reais foi poss\u00edvel observar um n\u00famero maior de fatores que influenciam no\ndesempenho das implementa\u00e7\u00f5es paralelas do m\u00e9todo. Neste sentido, este Cap\u00edtulo apre-\nsenta a valida\u00e7\u00e3o dos prot\u00f3tipos e os resultados paralelos obtidos atrav\u00e9s de algumas si-\nmula\u00e7\u00f5es, onde foram testadas diferentes configura\u00e7\u00f5es de particionamento e distribui\u00e7\u00e3o\nde dados lineares. A primeira parte do cap\u00edtulo descreve o programa de testes utilizando\no MLB. Na seq\u00fc\u00eancia s\u00e3o relacionados os par\u00e2metros e modelos de reticulado utilizados\nnos estudos de caso. O t\u00f3pico seguinte descreve o ambiente de simula\u00e7\u00e3o e os crit\u00e9rios\nutilizados para a obten\u00e7\u00e3o de valores experimentais. Por fim, a maior parte do cap\u00edtulo\napresenta, atrav\u00e9s de gr\u00e1ficos e tabelas, resultados f\u00edsicos e computacionais obtidos atra-\nv\u00e9s do uso de diferentes par\u00e2metros de execu\u00e7\u00e3o aplicados aos estudos de caso.\n\n6.1 Descri\u00e7\u00e3o do Programa de Testes\n\nA implementa\u00e7\u00e3o desenvolvida para validar o c\u00f3digo do MLB pode ser dividida em\ntr\u00eas partes, a saber:\n\n? leitura de arquivos e prepara\u00e7\u00e3o do reticulado;\n\n? execu\u00e7\u00e3o do m\u00e9todo propriamente dito;\n\n? c\u00e1lculo de valores macrosc\u00f3picos e grava\u00e7\u00e3o das informa\u00e7\u00f5es em arquivos.\n\nInicialmente, o programa de testes faz a leitura de dois arquivos, contendo informa-\n\u00e7\u00f5es de entrada. O primeiro descreve os valores macrosc\u00f3picos utilizados e algumas\ninforma\u00e7\u00f5es de configura\u00e7\u00e3o de execu\u00e7\u00f5es (toler\u00e2ncia, por exemplo). O segundo arquivo\napresenta a estrutura do reticulado e a matriz de obst\u00e1culos. Nesse arquivo, a primeira li-\nnha cont\u00e9m o n\u00famero de dimens\u00f5es, o n\u00famero de dire\u00e7\u00f5es de deslocamento do reticulado,\no n\u00famero de elementos em cada dimens\u00e3o e o n\u00famero de pontos que formam os obst\u00e1-\nculos. Baseado nessas informa\u00e7\u00f5es iniciais \u00e9 poss\u00edvel alocar a mem\u00f3ria necess\u00e1ria para\no armazenamento das estruturas. Na seq\u00fc\u00eancia, a partir da segunda linha do arquivo, s\u00e3o\nobtidas as coordenadas dos pontos que definem os obst\u00e1culos e as paredes do tubo. Cada\nlinha fornece a coordenada de um \u00fanico obst\u00e1culo. Assim, ser\u00e1 preciso ler tantas linhas,\nquantas o n\u00famero de pontos de obst\u00e1culos indicar, a fim de obter a estrutura completa de\nbordas e barreiras. O prot\u00f3tipo de uma estrutura bidimensional desse tipo de arquivo \u00e9\napresentado a seguir.\n\n\n\n56\n\n<dim>&lt;dir>&lt;lin>&lt;col>&lt;obs>\n<x_1>&lt;y_1>\n<x_2>&lt;y_2>\n.\n.\n.\n<x_obs>&lt;y_obs>\n\nPara os casos paralelos, cada processo l\u00ea do arquivo de descri\u00e7\u00e3o dos obst\u00e1culos apenas\nas coordenadas que est\u00e3o contidas no seu subdom\u00ednio (sub-reticulado). Tal subdom\u00ednio\n\u00e9 definido pelo tamanho do reticulado e pela configura\u00e7\u00e3o do particionamento, o qual \u00e9\npassado como argumento de entrada para a fun\u00e7\u00e3o de testes. Nessa parte da execu\u00e7\u00e3o\ns\u00e3o inicializados, ainda, algumas constantes e a densidade individual de cada ponto do\nreticulado.\n\nA execu\u00e7\u00e3o do m\u00e9todo propriamente dito ocorre conforme as opera\u00e7\u00f5es definidas no\nalgoritmo apresentado da Se\u00e7\u00e3o 3.8. Quando o programa \u00e9 executado concorrentemente\nsobre os dados (uso de mais de um processador), \u00e9 necess\u00e1ria a inser\u00e7\u00e3o de uma fun\u00e7\u00e3o\nrespons\u00e1vel pela troca de dados (comunica\u00e7\u00e3o) logo ap\u00f3s a fun\u00e7\u00e3o de propaga\u00e7\u00e3o, a fim\nde que todos os processos operem sobre o conjunto de valores corretos. J\u00e1 o crit\u00e9rio de\nparada do la\u00e7o principal \u00e9 feito atrav\u00e9s da diferen\u00e7a entre as velocidades da itera\u00e7\u00e3o cor-\nrente com a itera\u00e7\u00e3o anterior, usando a m\u00e9dia das velocidades dos pontos centrais do eixo\n? , conforme indicado na Figura 6.1. Desta forma, s\u00e3o utilizados todos os pontos que se\nconcentram sobre a regi\u00e3o indicada. Caso esses pontos se concentrem em processadores\ndiferentes, a opera\u00e7\u00e3o \u00e9 realizada paralelamente. Uma alternativa, tamb\u00e9m utilizada nesse\ntrabalho, \u00e9 adotar um n\u00famero fixo de itera\u00e7\u00f5es. Essa abordagem elimina o c\u00e1lculo de ve-\nlocidade e, conseq\u00fcentemente, a comunica\u00e7\u00e3o entre processos, caso esse fosse necess\u00e1rio\npara o c\u00e1lculo paralelo da velocidade.\n\ny\n\nx x\n\nz\n\ny\n\nFigura 6.1: Uso dos pontos centrais do eixo ? para o c\u00e1lculo da velocidade m\u00e9dia\nPara avaliar se o programa executa corretamente \u00e9 feita a soma da densidade de todos\n\nos pontos, que deve permanecer constante durante a execu\u00e7\u00e3o. Ap\u00f3s as execu\u00e7\u00f5es do\nm\u00e9todo s\u00e3o realizados o c\u00e1lculo da velocidade m\u00e9dia do fluxo e do n\u00famero de Reynolds,\nos quais s\u00e3o gravados em um arquivo de sa\u00edda, juntamente com o n\u00famero de divis\u00f5es\nrealizados em cada dire\u00e7\u00e3o coordenada, o n\u00famero de itera\u00e7\u00f5es, a viscosidade e o tempo de\nexecu\u00e7\u00e3o. Em um outro arquivo s\u00e3o armazenados as coordenadas de todos os pontos, as\nvelocidades m\u00e9dias das part\u00edculas para cada dire\u00e7\u00e3o coordenada, a press\u00e3o e um marcador\nque indica se o ponto \u00e9 um obst\u00e1culo ou n\u00e3o, tendo o arquivo o seguinte formato para o\nmodelo tridimensional:\n\nVARIABLES = X, Y, Z, VX, VY, VZ, PRESS, OBST\nZONE I=max_x, J=max_y, k=max_z F=POINT\n\n\n\n57\n\nx_1 y_1 z_1 vel_x_1 vel_y_1 vel_z_1 press_1 obst_1\nx_2 y_2 z_2 vel_x_2 vel_y_2 vel_z_2 press_2 obst_2\n.\n.\n.\nx_n y_n z_n vel_x_n vel_y_n vel_z_n press_n obst_n\n\nEssas informa\u00e7\u00f5es podem ser utilizadas em um programa de visualiza\u00e7\u00e3o, tais como\nGrace, Gnuplot e TecPlot, a fim de avaliar graficamente o estado do fluxo ap\u00f3s a si-\nmula\u00e7\u00e3o (TECPLOT, 2006).\n\n6.2 Descri\u00e7\u00e3o dos Estudos de Caso\n\nComo estudos de caso foram simulados a passagem de tr\u00eas fluxos de fluido atrav\u00e9s\nde canais com obst\u00e1culos. O objetivo dessas simula\u00e7\u00f5es foi avaliar o comportamento dos\nfluxos perante ambientes onde s\u00e3o encontradas barreiras r\u00edgidas, que exigem mudan\u00e7as\nde dire\u00e7\u00e3o no escoamento. Tais problemas foram criados artificialmente atrav\u00e9s de um\nprograma gerador de obst\u00e1culos, que faz parte do programa de testes. Em todos os casos\ndesenvolvidos, a propaga\u00e7\u00e3o da for\u00e7a de entrada ocorre na dire\u00e7\u00e3o formada pelo eixo ? .\nA fim de facilitar a an\u00e1lise das influ\u00eancias das t\u00e9cnicas de paraleliza\u00e7\u00e3o adotadas foram\nescolhidos apenas formatos quadr\u00e1ticos ou c\u00fabicos de reticulado.\n\nO primeiro problema consiste de um fluxo bidimensional com tamanho de reticulado\nigual a 512 X 512 elementos. A distribui\u00e7\u00e3o dos obst\u00e1culos \u00e9 composta de 5 barreiras\ndispostas ciclicamente ao longo do eixo ? , conforme indicado na Figura 6.2. O tamanho\nde cada barreira \u00e9 igual a metade do n\u00famero de pontos que comp\u00f5em os elementos da\ndimens\u00e3o y. J\u00e1 a dist\u00e2ncia entre cada uma das barreiras tamb\u00e9m \u00e9 fixa, tendo-se utilizado\npara isso o valor de\n\n? ? ? do tamanho total de pontos da dimens\u00e3o x.\n\nx\n\ny\n\nFigura 6.2: Disposi\u00e7\u00e3o das barreiras no reticulado bidimensional\n\nO segundo problema define um fluxo que cruza um canal tridimensional, cujo tamanho\ndo reticulado \u00e9 de 128 X 128 X 128 elementos. Para esse caso, existe uma \u00fanica regi\u00e3o\nretangular com obst\u00e1culos, a qual est\u00e1 disposta na parte anterior do eixo ? , na posi\u00e7\u00e3o\ndefinida por\n\n? ? &amp; do tamanho total da dimens\u00e3o x. Essa regi\u00e3o engloba todos os pontos do\neixo ? que se encontram na parte mais central em rela\u00e7\u00e3o ao eixo ? . A largura dessa parte\ncentral em torno do eixo ? possui uma extens\u00e3o de\n\n? ? &amp; do tamanho total de elementos\nque comp\u00f5em essa dimens\u00e3o. Graficamente o problema pode ser limitado conforme \u00e9\nexibido na Figura 6.3. Nessa figura, al\u00e9m dos obst\u00e1culos, s\u00e3o destacadas (listras) as faces\nque definem o canal, ficando duas faces abertas para a circula\u00e7\u00e3o do fluxo.\n\nO terceiro estudo de caso \u00e9 semelhante ao anterior em termos de formato e disposi-\n\u00e7\u00e3o dos obst\u00e1culos. A \u00fanica diferen\u00e7a est\u00e1 no tamanho do reticulado, que possui uma\ndimens\u00e3o de 256 X 256 X 256 pontos.\n\n\n\n58\n\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n???????????????????????????????\n\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n?????????????????????????????????\n\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n?????????????????????????????????????????\n\ny\n\nx\n\nz\n\nFigura 6.3: Disposi\u00e7\u00e3o da barreira no reticulado tridimensional\n\nPara todos os casos apresentados anteriormente, o valor das propriedades f\u00edsicas inici-\nais do fluido simulado s\u00e3o os mesmos. As caracter\u00edsticas do fluido adotado s\u00e3o: densidade\nde 0,1 ? ? ! \t?? , acelera\u00e7\u00e3o macrosc\u00f3pica ?\n\t ? ? ? ? ! \t \n ??? , fator ? de 1,85 e coeficiente linear\nde Reynolds igual a\n\n? ? ! \t .\n6.3 Ambiente de Execu\u00e7\u00e3o e Crit\u00e9rios para a Obten\u00e7\u00e3o dos Resulta-\n\ndos\n\nO desempenho das implementa\u00e7\u00f5es paralelas dos m\u00e9todos foi medido nos clusters\nlabtec e corisco do Instituto de Inform\u00e1tica da UFRGS. O cluster labtec \u00e9 composto por\n20 m\u00e1quinas duais Pentium III de 1.133 GHz e 512 KB de cache por processador, 1\nGB de mem\u00f3ria RAM por m\u00e1quina e conex\u00e3o de rede Fast Ethernet. O cluster corisco\npossui configura\u00e7\u00e3o semelhante, tendo 16 n\u00f3s duais de capacidade de processamento de\n1266 MHz e 512 KB de cache por processador, 512 MB de mem\u00f3ria RAM por n\u00f3 e\nduas op\u00e7\u00f5es de rede: Fast Ethernet e Myrinet. Quanto a parte de software, o sistema\noperacional adotado nos n\u00f3s dos clusters \u00e9 o sistema Linux, vers\u00e3o 2.6.8-3-686-smp,\na vers\u00e3o do compilador GCC \u00e9 a 3.3.5 e a distribui\u00e7\u00e3o do sistema operacional Linux\ninstalado \u00e9 Debian (vers\u00e3o 1:3.3.5-13). Nos testes dos c\u00f3digos paralelos foi utilizado\nainda a implementa\u00e7\u00e3o MPICH vers\u00e3o 1.2.7 do padr\u00e3o MPI.\n\nOs resultados foram obtidos atrav\u00e9s da m\u00e9dia de 10 execu\u00e7\u00f5es, sendo que a melhor e\na pior execu\u00e7\u00e3o foram exclu\u00eddas. Desta forma, o desvio padr\u00e3o para os valores que com-\np\u00f5em as m\u00e9dias ficaram abaixo dos 2% em rela\u00e7\u00e3o \u00e0 m\u00e9dia total. A op\u00e7\u00e3o por 10 exe-\ncu\u00e7\u00f5es para cada caso testado se deve ao fato do desvio padr\u00e3o ter ficado bastante baixo\ne tamb\u00e9m pelo fato das limita\u00e7\u00f5es existentes em termos de tempo de uso dos clusters.\nUma vez que cada um dos casos testados consumia um tempo consider\u00e1vel de execu\u00e7\u00e3o,\no n\u00famero de execu\u00e7\u00f5es precisou ser limitado.\n\nPara testar as diferentes configura\u00e7\u00f5es de particionamento foram utilizados at\u00e9 40 pro-\ncessadores (20 n\u00f3s) do cluster labtec. A \u00fanica exce\u00e7\u00e3o foi o teste com 64 processadores,\nem que foram adotados 32 processadores (16 n\u00f3s) de cada cluster. Neste caso, \u00e9 pre-\nciso observar que os valores de tempo obtidos precisam ser relativisados, uma vez que o\nconjunto de m\u00e1quinas de cada cluster possui uma configura\u00e7\u00e3o diferente.\n\nA captura dos tempos foi feita atrav\u00e9s da fun\u00e7\u00e3o MPI_Wtime da biblioteca MPI, que\nretorna em segundos o tempo transcorrido a partir de um determinado momento do pas-\nsado. O tempo de execu\u00e7\u00e3o foi obtido atrav\u00e9s da diferen\u00e7a do valor resultante da chamada\nde MPI_Wtime no in\u00edcio e no fim do la\u00e7o principal do programa.\n\nO crit\u00e9rio de parada adotado para o modelo bidimensional foi um n\u00famero predeter-\nminado de itera\u00e7\u00f5es. Os testes feitos nesse modelo realizaram 15.000 itera\u00e7\u00f5es do la\u00e7o\n\n\n\n59\n\nprincipal. J\u00e1 para o modelo tridimensional, o crit\u00e9rio de parada escolhido foi a varia\u00e7\u00e3o\nde velocidade entre a itera\u00e7\u00e3o corrente e a itera\u00e7\u00e3o anterior da superf\u00edcie central que se\nencontra no eixo ? . Nos testes tridimensionais a diferen\u00e7a de velocidade escolhida foi de\n? ? ? ? ! \t ??? .\n6.4 Resultados Obtidos para o Modelo Bidimensional\n\nOs testes para o modelo bidimensional do MLB foram realizados usando como estudo\nde caso o reticulado de 512 X 512 pontos descrito na Se\u00e7\u00e3o 6.2.\n\n6.4.1 Resultados F\u00edsicos\n\nAp\u00f3s 150.000 itera\u00e7\u00f5es do la\u00e7o principal do m\u00e9todo, a velocidade m\u00e9dia do fluido na\ncoluna central do eixo ? foi de 1,35 \t ? ? ??\n ??? ? ! \t \t ? ? , a viscosidade foi de 1,54 \t ? ? ? ? ! \t ? ? e\no n\u00famero de Reynolds obtido foi de 1,14. Para avaliar o processo de estabiliza\u00e7\u00e3o do fluxo\ndurante a simula\u00e7\u00e3o, foram registrados ainda, a varia\u00e7\u00e3o da velocidade m\u00e9dia, conforme\nexibido na Figura 6.4. Atrav\u00e9s dessa figura, pode-se perceber que houve uma grande\noscila\u00e7\u00e3o da velocidade m\u00e9dia durante o transcorrer das itera\u00e7\u00f5es, at\u00e9 o fluxo atingir uma\nvelocidade constante.\n\n 0\n\n 0.0005\n\n 0.001\n\n 0.0015\n\n 0.002\n\n 0.0025\n\n 0.003\n\n 0.0035\n\n 0.004\n\n 0  20000  40000  60000  80000  100000  120000  140000  160000\n\nV\ne\n\nlo\nci\n\nd\na\n\nd\ne\n\n d\ne\n\n x\n\nIteracoes\n\nFigura 6.4: Evolu\u00e7\u00e3o da velocidade m\u00e9dia do fluxo durante a execu\u00e7\u00e3o das itera\u00e7\u00f5es\n\nAl\u00e9m da velocidade m\u00e9dia no parte central do reticulado, foram extra\u00eddas, de algumas\nitera\u00e7\u00f5es, a distribui\u00e7\u00e3o de velocidade e press\u00e3o de todos os pontos do reticulado. Na\nFigura 6.5 s\u00e3o exibidos, respectivamente, a varia\u00e7\u00e3o da velocidade em rela\u00e7\u00e3o ao eixo\n? em tr\u00eas momentos distintos: 90.000, 120.000 e 150.000 itera\u00e7\u00f5es, respectivamente de\ncima para baixo. J\u00e1 na Figura 6.6 s\u00e3o apresentados os valores de press\u00e3o obtidos ap\u00f3s\n150.000 itera\u00e7\u00f5es do m\u00e9todo. Todas as visualiza\u00e7\u00f5es foram geradas atrav\u00e9s do sofware\nTecplot.\n\nOs resultados f\u00edsicos obtidos possibilitam avaliar os efeitos decorrentes do uso de uma\nestrutura irregular sobre a circula\u00e7\u00e3o de um fluxo de fluido. Os resultados referentes \u00e0 m\u00e9-\ndia de velocidade dos pontos (Figura 6.5) mostram que \u00e0 medida que um n\u00famero maior\nde itera\u00e7\u00f5es foi utilizado, mais coerente tornou-se o comportamento do fluxo perante a\nestrutura de distribui\u00e7\u00e3o dos obst\u00e1culos. A estrutura das barreiras fez com que a maior\nvaz\u00e3o do fluxo ocorresse na parte central do reticulado, atrav\u00e9s de um movimento se-\nn\u00f3ide. J\u00e1 nas laterais, entre as barreiras, existiram movimentos nulos ou zonas de refluxo.\nAtrav\u00e9s da Figura 6.6, pode-se perceber que existe uma maior press\u00e3o no fluido na parte\nanterior do fluxo, devido \u00e0 a\u00e7\u00e3o das barreiras de conten\u00e7\u00e3o serem maiores no lado em que\n\n\n\n60\n\nFigura 6.5: Visualiza\u00e7\u00e3o da velocidade em rela\u00e7\u00e3o ao eixo ? do fluxo ap\u00f3s 90.000,\n120.000 e 150.000 itera\u00e7\u00f5es\n\n\n\n61\n\nFigura 6.6: Visualiza\u00e7\u00e3o da press\u00e3o do fluxo ap\u00f3s 150.000 itera\u00e7\u00f5es\n\na for\u00e7a de entrada \u00e9 aplicada. Todavia, \u00e0 medida que o fluxo dirigi-se para a parte pos-\nterior (sa\u00edda), a press\u00e3o diminui entre as diferentes regi\u00f5es do reticulado formadas pelos\nobst\u00e1culos.\n\n6.4.2 Resultados Computacionais do Particionamento Unidimensional\n\nPara avaliar a divis\u00e3o unidimensional do modelo bidimensional do m\u00e9todo foram fei-\ntas execu\u00e7\u00f5es utilizando at\u00e9 40 processadores. Os tempos de execu\u00e7\u00e3o obtidos est\u00e3o\napresentados na Figura 6.7, sendo que o tempo indicado \u00e9 medido em segundos. Nessa\nfigura o reticulado foi dividido em apenas uma das dimens\u00f5es: divis\u00e3o em linha (divis\u00e3o\nparalela \u00e0 dimens\u00e3o x) ou divis\u00e3o em coluna (divis\u00e3o paralela \u00e0 dimens\u00e3o y), conforme\nindicado no gr\u00e1fico. Para simplificar a visualiza\u00e7\u00e3o s\u00e3o mostrados apenas o tempo de\nexecu\u00e7\u00e3o seq\u00fcencial e os testes obtidos utilizando n\u00fameros pares de processadores.\n\nOs ganhos de desempenho obtidos por ambas as formas de particionar linearmente\no problema analisado s\u00e3o exibidos na Figura 6.8, sendo esses valores comparados com\no desempenho linear ideal esperado (reta). Nesta disserta\u00e7\u00e3o utilizou-se o termo \"ganho\nde desempenho\" para o que tamb\u00e9m costuma ser chamado na literatura de \"speedup\" ou\n\"fator de acelera\u00e7\u00e3o\".\n\n6.4.3 An\u00e1lise dos Resultados Computacionais\n\nAs execu\u00e7\u00f5es paralelas do MLB apresentaram bons \u00edndices de desempenho. Indepen-\ndente da estrat\u00e9gia de particionamento adotada, as vers\u00f5es paralelas conseguiram reduzir\nsignificativamente os tempos de execu\u00e7\u00e3o. Em rela\u00e7\u00e3o ao particionamento linear pode-se\nobservar um ganho de desempenho cont\u00ednuo, tendo uma pequena oscila\u00e7\u00e3o a partir do\nmomento em que a granularidade dos dados operados por cada processo se torna muito\npequena. Assim, utilizando 40 processadores o ganho de desempenho do melhor caso foi\nde 27 vezes a execu\u00e7\u00e3o seq\u00fcencial.\n\n\n\n62\n\n 0\n\n 10000\n\n 20000\n\n 30000\n\n 40000\n\n 50000\n\n 60000\n\n 70000\n\n 80000\n\n 90000\n\n 0  4  8  12  16  20  24  28  32  36  40\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nProcessadores\n\nlinha\ncoluna\n\nFigura 6.7: Tempo total de execu\u00e7\u00e3o usando o particionamento unidimensional no modelo\nbidimensional\n\n 0\n\n 5\n\n 10\n\n 15\n\n 20\n\n 25\n\n 30\n\n 35\n\n 40\n\n 0  5  10  15  20  25  30  35  40\n\nG\na\n\nn\nh\n\no\n d\n\ne\n d\n\ne\nse\n\nm\np\n\ne\nn\n\nh\no\n\nProcessadores\n\nlinha\ncoluna\n\nideal\n\nFigura 6.8: Ganho de desempenho usando o particionamento unidimensional no modelo\nbidimensional\n\nNos resultados apresentados, a melhor forma de particionamento para um determi-\nnado n\u00famero de processadores acabou dependendo da maneira em que os dados foram\nacessados pelos processos. Assim, o particionamento em linhas (particionamento da di-\nre\u00e7\u00e3o do fluxo) obteve tempos menores para a maioria dos casos, uma vez que, atrav\u00e9s\ndessa estrat\u00e9gia, o acesso aos dados em mem\u00f3ria e cache \u00e9 feito de forma mais cont\u00ednua,\ngerando menos falhas de acesso a cache e n\u00famero de acessos a mem\u00f3ria principal.\n\nO tempo utilizando 2 processadores em rela\u00e7\u00e3o as execu\u00e7\u00f5es seq\u00fcenciais diminuiu\nem torno de 60%. Esse valor n\u00e3o foi mais significativo devido ao sobrecusto gerado com\no particionamento do problema e devido \u00e0 conten\u00e7\u00e3o de mem\u00f3ria existente pelo uso das\ncapacidades m\u00e1ximas dos processadores de uma mesma m\u00e1quina. Assim, o desempenho\nreal n\u00e3o chega a ser t\u00e3o alto como o desempenho linear esperado.\n\n\n\n63\n\n6.5 Resultados Obtidos para o Modelo Tridimensional\n\nPara o modelo tridimensional foi utilizado os estudo de caso formado pelo reticulado\nde 128 X 128 X 128 elementos, conforme descrito na Se\u00e7\u00e3o 6.2.\n\n6.5.1 Resultados F\u00edsicos\n\nPara que os fluxos atingissem a estabilidade m\u00ednima esperada foram necess\u00e1rias, res-\npectivamente, 447 e 495 itera\u00e7\u00f5es do la\u00e7o principal do MLB para os reticulados de di-\nmens\u00e3o 128 X 128 X 128 e 256 X 256 X 256. Em ambos os casos o valor da viscosidade\nfoi o mesmo, 1,35 \t\n\n? ? ??\n ??? ? ! \t \t?? ? , uma vez que esse valor \u00e9 determinado apenas pe-\nlas condi\u00e7\u00f5es de entrada. Para o reticulado de 128 X 128 X 128 elementos a velocidade\nm\u00e9dia do fluxo na regi\u00e3o central do eixo ? ap\u00f3s 447 itera\u00e7\u00f5es foi de 6,12 \t ? ? ??\n ! \t ???\ne o n\u00famero de Reynolds foi igual a 45,26. J\u00e1 para o reticulado de 256 X 256 X 256 a\nvelocidade m\u00e9dia foi igual a 7,04 \t\n\n? ? ??\n ! \t ??? e o n\u00famero de Reynolds foi de 52,07.\nPara os resultados obtidos pelo reticulado de dimens\u00e3o 128 X 128 X 128 foram ge-\n\nradas algumas imagens referentes \u00e0s propriedades f\u00edsicas do fluxo. Na Figura 6.9 e Fi-\ngura 6.10 s\u00e3o apresentadas respectivamente a velocidade e a press\u00e3o do fluxo para as\nregi\u00f5es formadas pelos pontos 32, 64 e 96 do eixo ? . A escolha dessas regi\u00f5es tem como\nobjetivo oferecer uma vis\u00e3o geral sobre a distribui\u00e7\u00e3o das propriedades f\u00edsicas em todo o\nfluido. Cada uma dessas regi\u00f5es representa, portanto, uma fatia do reticulado sob o ponto\nx indicado.\n\nAnalisando-se as ilustra\u00e7\u00f5es da Figura 6.9 pode-se observar o efeito da disposi\u00e7\u00e3o\nda placa sob o fluxo do fluido. Na parte mais central e anterior do reticulado o fluxo\npermanece est\u00e1tico em fun\u00e7\u00e3o da a\u00e7\u00e3o da barreira. J\u00e1 para os pontos dispostos ap\u00f3s a\nbarreira, segundo \u00e0 dire\u00e7\u00e3o do fluxo, o efeito dos obst\u00e1culos sobre \u00e0 propaga\u00e7\u00e3o do fluxo\ncome\u00e7a a diminuir \u00e0 medida que os pontos se afastam do mesmo. O mesmo ocorre com a\ndistribui\u00e7\u00e3o da press\u00e3o, conforme a Figura 6.10, a qual \u00e9 maior na regi\u00e3o central anterior\ndo fluxo. Ap\u00f3s o fluxo passar pela barreira, ele lentamente vai estabilizando a distribui\u00e7\u00e3o\nda press\u00e3o.\n\nDe forma semelhante \u00e0 Figura 6.9, a Figura 6.11 apresenta a velocidade sob os pontos\n42, 43 e 44 do eixo ? . A escolha dessa regi\u00e3o serve para avaliar o comportamento do\nfluxo em torno do obst\u00e1culo, visto que a barreira est\u00e1 disposta sob o ponto 43 do eixo ?\ndo reticulado. A distribui\u00e7\u00e3o das velocidades para essa parte do reticulado, mostra que\nexiste um refluxo na parte central do fluxo, enquanto que nas laterais abertas ocorre a pas-\nsagem do fluxo em uma maior velocidade, principalmente na regi\u00e3o anterior do obst\u00e1culo\n(primeira ilustra\u00e7\u00e3o). As velocidades nulas na parte central da segunda ilustra\u00e7\u00e3o, n\u00e3o s\u00e3o\na velocidade em si, mas uma representa\u00e7\u00e3o da barreira.\n\n6.5.2 Resultados Computacionais do Particionamento Unidimensional\n\nA Figura 6.12 apresenta os tempos de execu\u00e7\u00e3o obtidos utilizando at\u00e9 40 processado-\nres. Com exce\u00e7\u00e3o da execu\u00e7\u00e3o seq\u00fcencial, apenas os resultados obtidos com n\u00fameros de\nprocessadores pares foram ilustrados. Nesse teste, o reticulado foi dividido nas dimens\u00f5es\nx, y ou z, conforme indicado respectivamente no gr\u00e1fico.\n\nO ganho de desempenho das execu\u00e7\u00f5es paralelas para o caso analisado \u00e9 exibido na\nFigura 6.13. Para simplificar a avalia\u00e7\u00e3o foram usadas somente os resultados dos parti-\ncionamentos feitos sob o eixo ? , sendo esses valores comparados com um desempenho\nlinear ideal.\n\n\n\n64\n\nFigura 6.9: Velocidade do fluxo nas regi\u00f5es formadas pelos pontos 32, 64 e 96 do eixo ?\n\n\n\n65\n\nFigura 6.10: Distribui\u00e7\u00e3o da press\u00e3o do fluxo nas regi\u00f5es formadas pelos pontos 32, 64 e\n96 do eixo ?\n\n\n\n66\n\nFigura 6.11: Velocidade do fluxo nas regi\u00f5es formadas pelos pontos 42, 43 e 44 do eixo ?\n\n\n\n67\n\n 0\n\n 1000\n\n 2000\n\n 3000\n\n 4000\n\n 5000\n\n 0  4  8  12  16  20  24  28  32  36  40\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nProcessadores\n\nx\ny\nz\n\nFigura 6.12: Tempo total de execu\u00e7\u00e3o usando o particionamento unidimensional no mo-\ndelo tridimensional\n\n 0\n\n 5\n\n 10\n\n 15\n\n 20\n\n 25\n\n 30\n\n 35\n\n 40\n\n 0  5  10  15  20  25  30  35  40\n\nG\na\n\nn\nh\n\no\n d\n\ne\n d\n\ne\nse\n\nm\np\n\ne\nn\n\nh\no\n\nProcessadores\n\nobtido\nideal\n\nFigura 6.13: Ganho de desempenho usando o particionamento unidimensional no modelo\ntridimensional\n\n6.5.3 An\u00e1lise dos Resultados Computacionais\n\nOs resultados obtidos na divis\u00e3o unidimensional da implementa\u00e7\u00e3o do modelo 3D do\nMLB, semelhantemente aos encontrados no modelo 2D, apresentaram sucessivos aumen-\ntos de desempenho \u00e0 medida que um n\u00famero maior de processadores foi utilizado. Devido\nao pequeno tamanho do problema o ganho de desempenho m\u00e1ximo obtido usando 40 pro-\ncessadores para o melhor caso foi de algo em torno de 18 vezes a execu\u00e7\u00e3o seq\u00fcencial, o\nque n\u00e3o chega a ser um valor expressivo de ganho de desempenho.\n\nEm rela\u00e7\u00e3o \u00e0s formas de particionamento, a divis\u00e3o do eixo ? n\u00e3o apresentou desem-\npenhos t\u00e3o bons, uma vez que tal estrat\u00e9gia possui um sobrecusto oriundo do c\u00e1lculo da\nvelocidade m\u00e9dia em cada itera\u00e7\u00e3o em paralelo. Como esse c\u00e1lculo \u00e9 feito sobre a regi\u00e3o\ncentral do eixo ? , quando o reticulado estiver particionado nesse sentido, haver\u00e1 a neces-\nsidade de comunica\u00e7\u00e3o para obter o valor da m\u00e9dia. Uma exce\u00e7\u00e3o ao pior desempenho\nparticionando o reticulado no eixo ? ocorre quando dois processadores s\u00e3o utilizados.\nNesse caso, devido \u00e0 quest\u00f5es de distribui\u00e7\u00e3o de dados e conten\u00e7\u00e3o de mem\u00f3ria, o pior\n\n\n\n68\n\ntempo de execu\u00e7\u00e3o ficou com o particionamento do eixo ? .\n\n\n\n69\n\n7 RESULTADOS EXPERIMENTAIS: PARTICIONAMENTO\nEM BLOCOS\n\nNo cap\u00edtulo anterior foram apresentados os resultados obtidos utilizando estrat\u00e9gias de\nparticionamento lineares. Embora seja uma abordagem simples, para a maioria dos casos\nhouve uma significativa redu\u00e7\u00e3o dos tempos de execu\u00e7\u00e3o \u00e0 medida que um n\u00famero maior\nde processadores era utilizado. No entanto, isso n\u00e3o limita a capacidade de aumentar\no desempenho das implementa\u00e7\u00f5es paralelas. Nesse sentido, este cap\u00edtulo apresenta os\nresultados obtidos utilizando estrat\u00e9gias de particionamento em blocos. Como estudo\nde caso foram utilizados os mesmos reticulados utilizados para validar o particionamento\nlinear. A divis\u00e3o do cap\u00edtulo consiste essencialmente dos resultados obtidos para o modelo\n2D e do modelo 3D do m\u00e9todo. Em cada caso, s\u00e3o apresentadas ainda, algumas an\u00e1lises\nreferentes aos valores obtidos.\n\n7.1 Resultados Obtidos para o Modelo Bidimensional\n\n7.1.1 Resultados Computacionais do Particionamento Multidimensional\n\nA divis\u00e3o em m\u00faltiplas dimens\u00f5es foi realizada particionando o reticulado de 512\nX 512 pontos em diferentes configura\u00e7\u00f5es poss\u00edveis, usando 32, 36 e 40 processadores.\nOs tempos de execu\u00e7\u00e3o obtidos para esses casos s\u00e3o apresentados, respectivamente na\nFigura 7.1, Figura 7.2 e Figura 7.3. Uma an\u00e1lise quantitativa \u00e9 feita na Tabela 7.1, onde\ns\u00e3o apresentados os ganhos de desempenho reais entre o particionamento em uma e duas\ndimens\u00f5es dos melhores casos.\n\n 0\n\n 500\n\n 1000\n\n 1500\n\n 2000\n\n 2500\n\n 3000\n\n 3500\n\n 4000\n\n 4500\n\n8X44X816X22X1632X11X32\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.1: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferentes confi-\ngura\u00e7\u00f5es de particionamento do modelo bidimensional\n\n\n\n70\n\n 0\n\n 500\n\n 1000\n\n 1500\n\n 2000\n\n 2500\n\n 3000\n\n 3500\n\n 4000\n\n 4500\n\n6X69X44X912X33X1218X22X1836X11X36\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.2: Tempo de execu\u00e7\u00e3o obtido utilizando 36 processadores para diferentes confi-\ngura\u00e7\u00f5es de particionamento do modelo bidimensional\n\n 0\n\n 500\n\n 1000\n\n 1500\n\n 2000\n\n 2500\n\n 3000\n\n 3500\n\n 4000\n\n8X55X810X44X1020X22X2040X11X40\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.3: Tempo de execu\u00e7\u00e3o obtido utilizando 40 processadores para diferentes confi-\ngura\u00e7\u00f5es de particionamento do modelo bidimensional\n\nTabela 7.1: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 32, 36 e 40 processa-\ndores para as divis\u00f5es em 1 e 2 dimens\u00f5es\n\nDistribui\u00e7\u00e3o Tempo % de ganho em rela\u00e7\u00e3o\na divis\u00e3o unidimensional\n\n32X1 4037,49 -\n4X8 3808,57 5,67%\n\n36X1 3738.54 -\n9X4 3430,8 8,23%\n\n40X1 3418,07 -\n5X8 3152,42 7,77%\n\n7.1.2 An\u00e1lise dos Resultados Computacionais\n\nA divis\u00e3o em m\u00faltiplas dimens\u00f5es apresentou um comportamento semelhante entre os\nresultados obtidos usando 32, 36 e 40 processadores. Atrav\u00e9s desses resultados pode-se\nobservar uma diminui\u00e7\u00e3o do tempo total de execu\u00e7\u00e3o do particionamento em blocos em\nrela\u00e7\u00e3o ao particionamento linear, tanto na divis\u00e3o em linha como na divis\u00e3o em coluna.\nEsses resultados apresentaram-se melhores para os particionamentos cujo tamanho dos\nsub-reticulados s\u00e3o mais quadrados. As compara\u00e7\u00f5es entre os melhores tempos de exe-\n\n\n\n71\n\ncu\u00e7\u00e3o paralela usando a divis\u00e3o em blocos apresentaram redu\u00e7\u00f5es de at\u00e9 8% em rela\u00e7\u00e3o\nao melhor tempo obtido na divis\u00e3o linear. Tais valores s\u00e3o expressivos, uma vez o tempo\nde processamento do m\u00e9todo \u00e9 significativamente maior que o tempo de comunica\u00e7\u00e3o.\n\nApesar do particionamento em bloco teoricamente diminuir o custo de comunica\u00e7\u00e3o,\nexistem alguns casos onde o tempo de execu\u00e7\u00e3o usando o particionamento em blocos foi\num pouco pior que o particionamento linear. Isso aconteceu sempre que o reticulado foi\ndividido em duas colunas, independente do n\u00famero de linhas adotado no particionamento.\nA raz\u00e3o para isso ocorrer est\u00e1 ligada ao mecanismo de comunica\u00e7\u00e3o. No processo de\ncomunica\u00e7\u00e3o s\u00e3o realizadas primeiramente a troca de dados entre os lados divididos em\ncolunas (eixo x) e, posteriormente, entre os divididos em linhas (eixo y). Como no caso\nanalisado os processos s\u00e3o mais dependentes dos vizinhos do eixo y, poss\u00edveis atrasos na\nrealiza\u00e7\u00e3o da transmiss\u00e3o de dados no eixo x s\u00e3o respons\u00e1veis por aumentar o tempo de\nespera no processo de sincroniza\u00e7\u00e3o do eixo y. No caso do reticulado ser dividido em\nduas linhas e em um n\u00famero qualquer de colunas, n\u00e3o ocorre esse problema de retardo,\nvisto que as comunica\u00e7\u00f5es entre as colunas \u00e9 feita primeiro.\n\n7.2 Resultados Obtidos para o Modelo Tridimensional\n\n7.2.1 Resultados Computacionais do Particionamento Multidimensional\n\nA divis\u00e3o em m\u00faltiplas dimens\u00f5es para um reticulado de 128 X 128 X 128 pontos foi\nfeita com diferentes combina\u00e7\u00f5es de particionamento usando 27, 32 e 40 processadores.\n\nPara o primeiro caso foi escolhido um n\u00famero de processadores que permitisse a di-\nvis\u00e3o das tr\u00eas dimens\u00f5es por um mesmo denominador comum. Por isso, foram utilizados\n27 processadores. Os tempos de execu\u00e7\u00e3o, tanto do particionamento linear, como o reali-\nzado em duas ou tr\u00eas dimens\u00f5es, s\u00e3o ilustrados na Figura 7.4, enquanto que na Tabela 7.2\ns\u00e3o comparados quantitativamente os melhores tempos de execu\u00e7\u00e3o de cada forma de\nparticionamento.\n\n 0\n\n 50\n\n 100\n\n 150\n\n 200\n\n 250\n\n 300\n\n 350\n\n 400\n\n 450\n\n3X3X31X3X91X9X33X1X93X9X19X1X39X3X11X1X271X27X127X1X1\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.4: Tempo de execu\u00e7\u00e3o obtido utilizando 27 processadores para diferentes confi-\ngura\u00e7\u00f5es de particionamento do modelo tridimensional\n\nNo segundo caso, os resultados foram obtidos dividindo-se o reticulado entre 32 pro-\ncessadores, conforme apresentados nas Figura 7.5 e Figura 7.6, onde s\u00e3o mostrados res-\npectivamente os tempos de execu\u00e7\u00e3o para o particionamento do reticulado em duas e em\ntr\u00eas dimens\u00f5es. J\u00e1 a Tabela 7.3 faz uma compara\u00e7\u00e3o entre os tempos obtidos para os\nmelhores casos da divis\u00e3o em uma, duas e tr\u00eas dimens\u00f5es.\n\nO terceiro caso escolhido, no qual s\u00e3o utilizados 40 processadores, segue a estra-\n\n\n\n72\n\nTabela 7.2: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 27 processadores para\nas divis\u00f5es em 1, 2 e 3 dimens\u00f5es\n\nDistribui\u00e7\u00e3o Tempo % de ganho em rela\u00e7\u00e3o\na divis\u00e3o unidimensional\n\n1X27X1 387,13 -\n1X3X9 329,26 14,95%\n3X3X3 332,8 14,04%\n\n 0\n\n 50\n\n 100\n\n 150\n\n 200\n\n 250\n\n 300\n\n 350\n\n1X4X81X8X44X1X84X8X18X1X48X4X11X2X161X16X22X1X162X16X116X1X216X2X1\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.5: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferentes confi-\ngura\u00e7\u00f5es de particionamento em 2 dimens\u00f5es do modelo tridimensional\n\n 0\n\n 50\n\n 100\n\n 150\n\n 200\n\n 250\n\n 300\n\n 350\n\n2X4X44X2X44X4X22X2X82X8X28X2X2\n\nT\ne\nm\n\np\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.6: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferentes confi-\ngura\u00e7\u00f5es de particionamento em 3 dimens\u00f5es do modelo tridimensional\n\nTabela 7.3: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 32 processadores para\nas divis\u00f5es em 1, 2 e 3 dimens\u00f5es\n\nDistribui\u00e7\u00e3o Tempo % de ganho em rela\u00e7\u00e3o\na divis\u00e3o unidimensional\n\n1X1X32 329,99 -\n1X4X8 274,18 15,44%\n2X4X4 270,52 18,02%\n\n\n\n73\n\nt\u00e9gia de an\u00e1lise adotada anteriormente, comparando na Figura 7.7, na Figura 7.8 e na\nTabela 7.4, respectivamente, os tempos obtidos para as execu\u00e7\u00f5es com particionamento\nem duas dimens\u00f5es, tr\u00eas dimens\u00f5es e os valores obtidos para os melhores tempos para\ncada tipo de particionamento.\n\n 0\n\n 50\n\n 100\n\n 150\n\n 200\n\n 250\n\n 300\n\n 350\n\n20X2X1 20X1X2 2X20X1 2X1X20 1X20X2 1X2X20 10X4X1 10X1X4 4X10X1 4X1X10 1X10X4 1X4X10 8X5X1 8X1X5 5X8X1 5X1X8 1X8X5 1X5X8\n\nT\ne\nm\n\np\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.7: Tempo de execu\u00e7\u00e3o obtido utilizando 40 processadores para diferentes confi-\ngura\u00e7\u00f5es de particionamento em 2 dimens\u00f5es do modelo tridimensional\n\n 0\n\n 50\n\n 100\n\n 150\n\n 200\n\n 250\n\n 300\n\n 350\n\n10X2X2 2X10X2 2X2X10 5X4X2 5X2X4 4X5X2 4X2X5 2X5X4 2X4X5\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.8: Tempo de execu\u00e7\u00e3o obtido utilizando 40 processadores para diferentes confi-\ngura\u00e7\u00f5es de particionamento em 3 dimens\u00f5es do modelo tridimensional\n\nTabela 7.4: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 40 processadores para\nas divis\u00f5es em 1, 2 e 3 dimens\u00f5es\n\nDistribui\u00e7\u00e3o Tempo % de ganho em rela\u00e7\u00e3o\na divis\u00e3o unidimensional\n\n1X40X1 318,56 -\n1X5X8 219,07 31,23%\n2X5X4 218,63 31,37%\n\nEscolhendo-se os menores tempos de execu\u00e7\u00e3o obtidos pelas diferentes configura-\n\u00e7\u00f5es de particionamento para cada n\u00famero de processadores usado, tanto a partir dos\ncasos apresentados anteriormente, como os valores obtidos para os demais casos, \u00e9 pos-\ns\u00edvel obter uma nova rela\u00e7\u00e3o de ganho de desempenho. A Figura 7.9 apresenta o ganho\n\n\n\n74\n\nde desempenho considerando somente os menores tempos obtidos para cada configura-\n\u00e7\u00e3o de particionamento de um determinado n\u00famero de processadores. Tais valores s\u00e3o\ncomparados com o ganho de desempenho ideal esperado, o qual \u00e9 exibido atrav\u00e9s da reta\ncrescente.\n\n 0\n\n 5\n\n 10\n\n 15\n\n 20\n\n 25\n\n 30\n\n 35\n\n 40\n\n 0  5  10  15  20  25  30  35  40\n\nG\na\n\nn\nh\n\no\n d\n\ne\n d\n\ne\nse\n\nm\np\n\ne\nn\n\nh\no\n\nProcessadores\n\nobtido\nideal\n\nFigura 7.9: Ganho de desempenho utilizando os menores tempos paralelos de execu\u00e7\u00e3o\nobtidos pelas diferentes configura\u00e7\u00f5es de particionamento do modelo tridimensional\n\nAl\u00e9m do problema testado anteriormente foi utilizado tamb\u00e9m um reticulado de 256\nX 256 X 256 pontos, a fim de avaliar o desempenho paralelo em problemas maiores. Para\neste caso, o reticulado foi particionado em diferentes configura\u00e7\u00f5es utilizando 32 e 64\nprocessadores. As Figuras 7.10 e 7.11 apresentam, respectivamente, os tempos de execu-\n\u00e7\u00e3o particionando o reticulado entre 32 processos em 2 e 3 dimens\u00f5es. J\u00e1 na Tabela 7.5\ns\u00e3o relacionados os melhores ganhos de desempenho para o particionamento em m\u00falti-\nplas dimens\u00f5es em rela\u00e7\u00e3o ao melhor tempo de execu\u00e7\u00e3o utilizando o particionamento\nunidimensional. Os tempos de execu\u00e7\u00e3o para o particionamento em 2 e 3 dimens\u00f5es en-\ntre 64 processos s\u00e3o mostrados nas Figuras 7.12 e 7.13. Uma compara\u00e7\u00e3o entre os piores\ne melhores tempos de execu\u00e7\u00e3o usando 32 e 64 processadores \u00e9 feita na Tabela 7.6 para\navaliar a escalabilidade da implementa\u00e7\u00e3o tridimensional.\n\n 0\n\n 500\n\n 1000\n\n 1500\n\n 2000\n\n 2500\n\n 3000\n\n1X4X81X8X44X1X84X8X18X1X48X4X11X2X161X16X22X1X162X16X116X1X216X2X1\n\nT\ne\nm\n\np\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.10: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferentes con-\nfigura\u00e7\u00f5es de particionamento em 2 dimens\u00f5es do modelo tridimensional para um reticu-\nlado de 256 X 256 X 256 pontos\n\n\n\n75\n\n 0\n\n 500\n\n 1000\n\n 1500\n\n 2000\n\n 2500\n\n 3000\n\n2X4X44X2X44X4X22X2X82X8X28X2X2\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.11: Tempo de execu\u00e7\u00e3o obtido utilizando 32 processadores para diferentes con-\nfigura\u00e7\u00f5es de particionamento em 3 dimens\u00f5es do modelo tridimensional para um reticu-\nlado de 256 X 256 X 256 pontos\n\nTabela 7.5: Rela\u00e7\u00e3o entre os melhores tempos de execu\u00e7\u00e3o usando 32 processadores para\nas divis\u00f5es em 1, 2 e 3 dimens\u00f5es para um reticulado de 256 X 256 X 256 pontos\n\nDistribui\u00e7\u00e3o Tempo % de ganho em rela\u00e7\u00e3o\na divis\u00e3o unidimensional\n\n1X1X32 2645,24 -\n1X4X8 2473,78 6,48%\n2X4X4 2527,33 4,46%\n\n 0\n\n 500\n\n 1000\n\n 1500\n\n 2000\n\n1X8X88X1X88X8X11X4X161X16X44X1X164X16X116X1X416X4X11X2X321X32X22X1X322X32X132X1X232X2X1\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.12: Tempo de execu\u00e7\u00e3o obtido utilizando 64 processadores para diferentes con-\nfigura\u00e7\u00f5es de particionamento em 2 dimens\u00f5es do modelo tridimensional para um reticu-\nlado de 256 X 256 X 256 pontos\n\nTabela 7.6: Rela\u00e7\u00e3o entre os melhores e piores tempos de execu\u00e7\u00e3o usando 32 e 64 pro-\ncessadores para as divis\u00f5es em 2 e 3 dimens\u00f5es de um reticulado de 256 X 256 X 256\npontos\n\n32 processadores 64 processadores\nCaso Distrib. Tempo Distrib. Tempo Redu\u00e7\u00e3o\nPior 2 dimens\u00f5es 16X1X2 2709.57 32X1X2 1768.39 34,74%\nMelhor 2 dimens\u00f5es 1X4X8 2473.78 1X8X8 1379.25 44,25%\n\nPior 3 dimens\u00f5es 4X8X2 2611.71 8X2X2 1583.28 39,38%\nMelhor 3 dimens\u00f5es 2X4X4 2527.33 8X2X4 1496.97 40,77%\n\n\n\n76\n\n 0\n\n 500\n\n 1000\n\n 1500\n\n 2000\n\n2X4X82X8X44X2X84X4X44X8X28X2X48X4X22X2X162X16X216X2X2\n\nT\ne\n\nm\np\n\no\n (\n\ns)\n\nParticionamento\n\nFigura 7.13: Tempo de execu\u00e7\u00e3o obtido utilizando 64 processadores para diferentes con-\nfigura\u00e7\u00f5es de particionamento em 3 dimens\u00f5es do modelo tridimensional para um reticu-\nlado de 256 X 256 X 256 pontos\n\n7.2.2 An\u00e1lise dos Resultados Computacionais\n\nAs divis\u00f5es por blocos e cubos apresentaram significativas diminui\u00e7\u00f5es do tempo total\nde execu\u00e7\u00e3o do modelo 3D para o reticulado de 128 X 128 X 128 elementos. Conforme\napresentado nas Tabela 7.2, Tabela 7.3 e Tabela 7.4, \u00e0 medida que um n\u00famero maior de\nprocessadores era utilizado, aumentava a diferen\u00e7a entre o ganho de desempenho usando\no particionamento em blocos em rela\u00e7\u00e3o ao particionamento linear. Com isso, nas simu-\nla\u00e7\u00f5es com 40 processadores o ganho de desempenho apresentado pelos melhores casos\nchegou a ser at\u00e9 31% superior em rela\u00e7\u00e3o ao particionamento linear.\n\nAl\u00e9m de reduzir os tempos de execu\u00e7\u00e3o, as implementa\u00e7\u00f5es em bloco mostraram-se\ntamb\u00e9m mais escalares em rela\u00e7\u00e3o ao particionamento linear. Comparando-se os valores\napresentados na Figura 6.13 e Figura 7.9 pode-se observar que o ganho de desempenho,\nque era de apenas 18 utilizando 40 processadores no particionamento linear, passou a ser\nde 25 para o particionamento em blocos.\n\nEm termos de estrat\u00e9gias de particionamento, um fator de forte impacto nos resul-\ntados \u00e9 de que, da mesma forma que no particionamento linear, o tempo de execu\u00e7\u00e3o \u00e9\npior para os casos em que o particionamento do eixo x \u00e9 maior. Conforme ressaltado\nanteriormente, nesse caso haver\u00e1 um sobrecarga oriunda da sincroniza\u00e7\u00e3o do c\u00e1lculo da\nvelocidade m\u00e9dia em paralelo. Por essa raz\u00e3o, particionamentos em 3 dimens\u00f5es, com os\npontos dos sub-reticulados dispostos de uma forma mais c\u00fabica, nem sempre apresentam\nresultados melhores em rela\u00e7\u00e3o ao particionamento em 2 dimens\u00f5es.\n\nOs resultados obtidos a partir do estudo de caso utilizando um reticulado de 256 X\n256 X 256 elementos avaliaram o comportamento do m\u00e9todo em problemas de grandes\ndimens\u00f5es. Atrav\u00e9s das execu\u00e7\u00f5es foi poss\u00edvel observar que o uso de 64 processadores\npossibilitou uma redu\u00e7\u00e3o dos tempos de execu\u00e7\u00e3o em quase pela metade quando compa-\nrados com os testes utilizando 32 processadores, o que indica uma boa escalabilidade para\na implementa\u00e7\u00e3o, embora \u00e9 preciso novamente observar que entre esses 64 processadores,\nhaviam dois grupos com pequenas diferen\u00e7as em termos de capacidade de processamento.\nDiferente dos resultados apresentados para o reticulado de 128 X 128 X 128 elementos,\na redu\u00e7\u00e3o dos tempos de execu\u00e7\u00e3o do particionamento em duas e tr\u00eas dimens\u00f5es para o\nproblema em quest\u00e3o n\u00e3o foi t\u00e3o elevada em rela\u00e7\u00e3o ao particionamento unidimensio-\nnal utilizando 32 processadores. No entanto, utilizando tanto 32 como 64 processadores\npode-se observar que os menores tempos de execu\u00e7\u00e3o ficaram com as configura\u00e7\u00f5es de\n\n\n\n77\n\nparticionamento onde os dados estavam dispostos em uma geometria mais quadr\u00e1tica ou\nc\u00fabica.\n\n\n\n78\n\n8 CONCLUS\u00c3O\n\nEsta disserta\u00e7\u00e3o tratou do desenvolvimento de implementa\u00e7\u00f5es paralelas do M\u00e9todo\nde Lattice Boltzmann (MLB) utilizando estrat\u00e9gias de particionamento de dados eficien-\ntes para reticulados com estruturas de regulares. As implementa\u00e7\u00f5es propostas englobam\nos principais modelos bidimensional e tridimensional do m\u00e9todo encontrados na litera-\ntura. Tais modelos possibilitam a modelagem de diversos fen\u00f4menos f\u00edsicos de grande\nimport\u00e2ncia para a pesquisa em Din\u00e2mica de Fluidos Computacional (DFC). Os resulta-\ndos obtidos atrav\u00e9s da simula\u00e7\u00e3o dos estudos de caso permitiram constatar que o particio-\nnamento em blocos pode oferecer tanto um significativo aumento de desempenho quanto\numa maior escalabilidade para as implementa\u00e7\u00f5es paralelas do m\u00e9todo. Esses resultados\ncoincidem com as expectativas oriundas das an\u00e1lises te\u00f3ricas previamente feitas, compro-\nvando a efici\u00eancia das t\u00e9cnicas de paraleliza\u00e7\u00e3o em blocos como forma de incrementar o\ndesempenho do m\u00e9todo em ambientes com mem\u00f3ria distribu\u00edda.\n\n8.1 Revis\u00e3o do Trabalho Desenvolvido\n\nInicialmente, no Cap\u00edtulo 1, foi feita a introdu\u00e7\u00e3o do trabalho. Para tanto foram apre-\nsentados o contexto de desenvolvimento do MLB em rela\u00e7\u00e3o \u00e0 outras t\u00e9cnicas de repre-\nsenta\u00e7\u00e3o e simula\u00e7\u00e3o computacional de fluxos de fluido, bem como as abordagens de\nparaleliza\u00e7\u00e3o geralmente aplicadas no c\u00e1lculo num\u00e9rico. Foram definidos ainda os obje-\ntivos e a contribui\u00e7\u00e3o da disserta\u00e7\u00e3o.\n\nOs Cap\u00edtulos 2 e 3 trataram do contexto cient\u00edfico do trabalho. No Cap\u00edtulo 2 foram\ndefinidas as equa\u00e7\u00f5es de Euler, de Navier-Stokes e de Boltzmann. Tais equa\u00e7\u00f5es foram\nrelacionadas \u00e0s propriedades microsc\u00f3picas dos fluidos atrav\u00e9s da Equa\u00e7\u00e3o de Boltzmann.\nAtrav\u00e9s dessa equa\u00e7\u00e3o, \u00e9 poss\u00edvel afirmar que simula\u00e7\u00f5es microsc\u00f3picas ou mesosc\u00f3pi-\ncas tendem a gerar os mesmos resultados f\u00edsicos que a resolu\u00e7\u00e3o num\u00e9rica das equa\u00e7\u00f5es\nmacrosc\u00f3picas.\n\nO Capitulo 3 apresentou o M\u00e9todo de Lattice Boltzmann, discutindo suas caracter\u00eds-\nticas. Na primeira parte do cap\u00edtulo foi descrita a t\u00e9cnica de Lattice Gas Automata. Na\nevolu\u00e7\u00e3o das t\u00e9cnicas de simula\u00e7\u00e3o mesosc\u00f3pica, o MLB manteve o modelo reticular e\nas regras de propaga\u00e7\u00e3o das part\u00edculas utilizadas por Lattice Gas Automata. Por outro\nlado, a utiliza\u00e7\u00e3o de valores reais, ao inv\u00e9s de l\u00f3gicos, para as opera\u00e7\u00f5es de propaga-\n\u00e7\u00e3o e colis\u00e3o tornaram o m\u00e9todo similar a equa\u00e7\u00e3o discreta de Boltzmann. A partir do\ndesenvolvimento das equa\u00e7\u00f5es apresentadas para o m\u00e9todo pode-se obter um algoritmo\nrelativamente simples, composto essencialmente de opera\u00e7\u00f5es de propaga\u00e7\u00e3o, colis\u00e3o,\nmecanismo de controle das condi\u00e7\u00f5es de contorno e c\u00e1lculo de valores macrosc\u00f3picos.\nApesar da simplicidade do algoritmo, o m\u00e9todo pode ser utilizado em diferentes contex-\ntos, obtendo valores similares aos apresentados pelos modelos macrosc\u00f3picos, conforme\n\n\n\n79\n\na discuss\u00e3o sobre a rela\u00e7\u00e3o do MLB com as Equa\u00e7\u00f5es de Navier-Stokes.\nUma vez definido o contexto cient\u00edfico, fez-se a revis\u00e3o bibliogr\u00e1fica do trabalho no\n\nCap\u00edtulo 4. Como estado da arte em termos de programa\u00e7\u00e3o paralela foi mencionada a bi-\nblioteca de comunica\u00e7\u00e3o MPI. Os recursos de programa\u00e7\u00e3o apresentados pela biblioteca\nabrangem muitos recursos de comunica\u00e7\u00e3o eficientes, sendo estes ideais para o desen-\nvolvimento de aplica\u00e7\u00f5es paralelas com alto grau de desempenho. Particularmente, os\nrecursos de comunica\u00e7\u00e3o cartesiana permitem implementar o particionamento dos dados\nem blocos. Apesar dessa t\u00e9cnica de particionamento j\u00e1 ter sido utilizada em implementa-\n\u00e7\u00f5es paralelas do MLB, conforme apresentado em algumas refer\u00eancias, nenhuma an\u00e1lise\nde desempenho ainda havia sido feita em rela\u00e7\u00e3o as diferentes formas de particionar o\nreticulado.\n\nNo Cap\u00edtulo 5 foram descritas as implementa\u00e7\u00f5es paralelas do MLB, utilizando o par-\nticionamento de dados em bloco. Uma vez definido os detalhes t\u00e9cnicos, foram feitas\navalia\u00e7\u00f5es te\u00f3ricas sobre o modelo de comunica\u00e7\u00e3o adotado para cada uma das imple-\nmenta\u00e7\u00f5es realizadas. Para tantoi, adotou-se o modelo de m\u00e1quina paralela LogP. Esse\nmodelo leva em considera\u00e7\u00e3o os custos de comunica\u00e7\u00e3o, sendo por isso, ideal para sis-\ntemas de mem\u00f3ria distribu\u00edda. Atrav\u00e9s dos exemplos desenvolvidos pode-se perceber\nque o particionamento em blocos consegue diminuir o custo de comunica\u00e7\u00e3o em mais da\nmetade se comparado ao particionamento monodimensional.\n\nUma vez definidas as implementa\u00e7\u00f5es, o Cap\u00edtulo 6 apresentou o contexto das ava-\nlia\u00e7\u00f5es, a descri\u00e7\u00e3o dos estudos de caso, os resultados f\u00edsicos e os resultados computa-\ncionais obtidos utilizando o particionamento linear. Os testes foram feitos utilizando 3\nestudos de caso elaborados artificialmente. Os resultados f\u00edsicos foram condizentes com\nas condi\u00e7\u00f5es f\u00edsicas pr\u00e9-determinadas. J\u00e1 os resultados computacionais obtidos atrav\u00e9s da\nsimula\u00e7\u00e3o dos estudos de caso mostraram que a paraleliza\u00e7\u00e3o consegue diminuir o tempo\ntotal de execu\u00e7\u00e3o do m\u00e9todo. No entanto, o ganho de desempenho apresentou-se bastante\nlimitado.\n\nComo forma de superar o limite de desempenho do particionamento unidimensio-\nnal, foram utilizadas estrat\u00e9gias de particionamento em blocos, cujos resultados foram\nmostrados no Cap\u00edtulo 7. Al\u00e9m de comprovar as an\u00e1lises te\u00f3ricas, as quais previam a\ndiminui\u00e7\u00e3o do tempo de comunica\u00e7\u00e3o entre os processos, os resultados computacionais\nsuperaram os limites de ganho de desempenho que existiam no particionamento mono-\ndimensional. Dessa forma, o particionamento em blocos aumentou a escalabilidade das\nimplementa\u00e7\u00f5es paralelas do m\u00e9todo.\n\n8.2 Contribui\u00e7\u00f5es\n\nO objetivo deste trabalho foi avaliar algumas estrat\u00e9gias de particionamento e distri-\nbui\u00e7\u00e3o de dados que tornam as execu\u00e7\u00f5es paralelas do MLB mais eficientes. A principal\ncontribui\u00e7\u00e3o apresentada foi comprovar que t\u00e9cnicas de distribui\u00e7\u00e3o de dados n\u00e3o trivi-\nais, como \u00e9 o caso do particionamento em blocos, quando testadas de forma pr\u00e1tica em\numa aplica\u00e7\u00e3o real, comprovam a efici\u00eancia apresentada nos modelos te\u00f3ricos. Outras\ncontribui\u00e7\u00f5es obtidas a partir de seu desenvolvimento desta disserta\u00e7\u00e3o foram:\n\n? Disponibilizar implementa\u00e7\u00f5es dos modelos de propaga\u00e7\u00e3o de velocidade mais uti-\nlizados do MLB, tanto dos modelos bidimensionais como dos modelos tridimensi-\nonais;\n\n? Paralelizar os modelos D2Q9 e D3Q19 do MLB atrav\u00e9s da t\u00e9cnica de particiona-\n\n\n\n80\n\nmento de dados, sendo a distribui\u00e7\u00e3o dos elementos do reticulado feita de forma\nbalanceada;\n\n? Refinar as implementa\u00e7\u00f5es paralelas utilizando o particionamento dos dados em\nblocos;\n\n? Realizar avalia\u00e7\u00f5es te\u00f3ricas do custo de comunica\u00e7\u00e3o entre processos;\n\n? Analisar os resultados obtidos utilizando o particionamento em blocos, cobrindo\numa lacuna encontrada na literatura;\n\n? Solucionar alguns estudos de caso relacionados ao escoamentos de fluxos de fluido\natrav\u00e9s de canais com obst\u00e1culos utilizando as implementa\u00e7\u00f5es do m\u00e9todo;\n\n? Disponibilizar ao grupo de pesquisa, uma nova t\u00e9cnica de simula\u00e7\u00e3o de fluidos,\nincorporada \u00e0s solu\u00e7\u00f5es j\u00e1 utilizadas.\n\nDurante o desenvolvimento do trabalho foram escritos alguns artigos e resumos, os\nquais foram submetidos em eventos regionais, nacionais e internacionais. Essas publica-\n\u00e7\u00f5es relacionam algumas contribui\u00e7\u00f5es parciais obtidas em diversas etapas do andamento\ndo trabalho. Os trabalhos podem ser encontrados no Anexo B. Para eventos internacionais\nda \u00e1rea foram submetidos artigos ao PARA06 (Umea, Su\u00e9cia), SBAC 2006 (Ouro Preto,\nBrasil) e CCGrid 2007 (Rio de Janeiro, Brasil), tendo sido o primeiro aprovado. Em 2006\nfoi feita tamb\u00e9m uma submiss\u00e3o ao WPerformance, um evento nacional da \u00e1rea de avalia-\n\u00e7\u00e3o de desempenho em sistemas computacionais. Al\u00e9m desses eventos, foram publicados\nainda resumos nos eventos regionais ERAD 2006, Semana Acad\u00eamica 2006/1, WSPPD\n2006 e ERAD 2007.\n\n8.3 Trabalhos Futuros\n\nOs trabalhos futuros prev\u00eaem a continuidade do desenvolvimento, utiliza\u00e7\u00e3o e avali-\na\u00e7\u00e3o paralela do MLB. Nesse sentido, espera-se avaliar as implementa\u00e7\u00f5es apresentadas\nneste trabalho em ambientes paralelos que disponham de um n\u00famero maior de proces-\nsadores, usando, para isso, tanto arquiteturas de clusters como grids. Conseq\u00fcentemente\nser\u00e1 poss\u00edvel aumentar o tamanho dos reticulados que ser\u00e3o utilizados como estudo de\ncaso. Al\u00e9m dos ambientes de cluster e grid, arquiteturas dedicadas de alto desempenho,\ntais como arquiteturas com mem\u00f3ria compartilhada, poder\u00e3o ser adotadas, a fim de com-\nparar o ganho de efici\u00eancia entre diferentes ambientes de execu\u00e7\u00e3o.\n\nDentro dos trabalhos desenvolvidos pelo GPPD relacionados a Din\u00e2mica de Fluidos,\no estudo e utiliza\u00e7\u00e3o do MLB surge como uma t\u00e9cnica alternativa de simula\u00e7\u00e3o. Para\no desenvolvimento de novas aplica\u00e7\u00f5es f\u00edsicas pretende-se utilizar o m\u00e9todo para agre-\ngar efici\u00eancia e precis\u00e3o \u00e0s solu\u00e7\u00f5es buscadas. Assim, pesquisas relacionadas com a\nmodelagem de sistemas circulat\u00f3rios sangu\u00edneos, propaga\u00e7\u00e3o dos ventos e simula\u00e7\u00e3o de\nrochas-reservat\u00f3rio poder\u00e3o ser desenvolvidas de forma mais simples. Al\u00e9m disso, como\ntrabalhos futuros \u00e9 poss\u00edvel, ainda, avaliar o m\u00e9todo realizando compara\u00e7\u00f5es com as de-\nmais t\u00e9cnicas j\u00e1 adotadas no passado pelo grupo.\n\nOs prot\u00f3tipos e problemas desenvolvidos neste trabalho pretendem ser utilizados para\nvalidar o ambiente Integrated Cluster Environment (ICE), desenvolvido pelo GPPD. ICE\n\u00e9 um ambiente integrado para a computa\u00e7\u00e3o de alto desempenho via interface web (MAR-\nQUEZAN et al., 2006). Ele foi desenvolvido utilizando Web Services e possibilita o lan-\n\u00e7amento de aplica\u00e7\u00f5es paralelas em cluster atrav\u00e9s de uma interface espec\u00edfica e simples.\n\n\n\n81\n\nA id\u00e9ia \u00e9 usar as implementa\u00e7\u00f5es do MLB feitas at\u00e9 o momento para avaliar criteriosa-\nmente a qualidade de ICE no que tange os par\u00e2metros de entrada, lan\u00e7amento, execu\u00e7\u00e3o\ne obten\u00e7\u00e3o de resultados p\u00f3s processamento.\n\n\n\n82\n\nREFER\u00caNCIAS\n\nANDERSON, J. D. Computational Fluid Dynamics. New York: McGraw-Hill, 1995.\n547p.\n\nANDREWS, G. R. Foundations of Multithreaded, Parallel, and Distributed Pro-\ngramming. USA: Addison-Wesley, 2001.\n\nARTOLI, A.; HOEKSTRA, A.; SLOOT, P. Optimizing Lattice Boltzmann Simulations\nfor Unsteady Flows. Computers &amp; Fluids, [S.l.], v.35, n.2, p.227\u2013240, 2005.\n\nBARDOS, C.; UKAI, S. The Classical Incompressible Navier-Stokes Limit of the Boltz-\nmann Equations. Math. Models Meth. Appl. Sci., [S.l.], v.2, p.235\u2013257, 1991.\n\nBARRETT, R. et al. Templates for the Solution of Linear Systems: Building Blocks\nfor Iterative Methods. Philadelphia, PA: SIAM, 1994.\n\nBATCHELOR, G. K. An Introduction to Fluid Dynamics. [S.l.]: Cambridge University\nPress, 1987.\n\nBHATNAGAR, P.; GROSS, E. P.; KROOK, M. K. A Model for Collision Processes in\nGases. I. Small Amplitude Processes in Charged and Neutral One-Component Systems.\nPhys. Rev., [S.l.], v.94, n.3, p.511 \u2013 525, 1954.\n\nBUICK, J. M. Lattice Boltzmann Methods in Interfacial Wave Modelling. 1997. PhD\nDissertation \u2014 University of Edinburgh, Fluid Dynamics Group.\n\nCARTER, J.; OLIKER, L. Performance Evaluation of Lattice-Boltzmann Magne-\ntohydrodynamics Simulations on Modern Parallel Vector Systems. In: TERAFLOP\nWORKSHOP, 2., 2006, Stuttgart. Proceedings. . . [S.l.]: Springer, 2006.\n\nCERCIGNANI, C. The Boltzmann Equation and Its Applications. Berlin: Springer,\n1994. (Applied Mathematical Sciences, v.67).\n\nCHEN, H.; CHEN, S.; MATTHAEUS, W. Recovery of Navier\u2013Stokes equations using a\nlattice-gas Boltzmann method. Phys. Rev. A, [S.l.], v.45, p.R5339\u201342, 1992.\n\nCHEN, S.; DOOLEN, G. D. Lattice Boltzmann Method for Fluid Flows. Annual Review\nof Fluid Mechanics, [S.l.], v.30, p.329\u2013364, 1998.\n\nCORREA, R. et al. Models for Parallel and Distributed Computation: Theory, Algo-\nrithmic Techniques and Applications. [S.l.]: Springer Verlag, 2002. 340p.\n\n\n\n83\n\nCULLER, D. E. et al. LogP: Towards a Realistic Model of Parallel Computation. In:\nACM SIGPLAN SYMPOSIUM ON PRINCIPLES AND PRACTICE OF PARALLEL\nPROGRAMMING - PPOPP, 1993, New York, NY, USA. Proceedings. . . [S.l.]: ACM\nPress, 1993. p.1\u201312.\n\nCULLER, D. E. et al. LogP: a practical model of parallel computation. Communications\nof the ACM, New York, NY, USA, v.39, n.11, p.78\u201385, 1996.\n\nDESPLAT, J.-C.; PAGONABARRAGA, I.; BLADON, P. Ludwig: A parallel Lattice-\nBoltzmann code for complex fluids. Computer Physics Communications, [S.l.], v.134,\nn.3, p.273\u2013290, 2001.\n\nDONGARRA, J. The LINPACK Benchmark: an explanation. In: INTERNATIONAL\nCONFERENCE ON SUPERCOMPUTING, 1., 1988, London, UK. Proceedings. . .\n[S.l.]: Springer-Verlag, 1988. p.456\u2013474.\n\nDONGARRA, J. et al. (Ed.). The Sourcebook of Parallel Computing. [S.l.]: Elsevier,\n2002.\n\nDORNELES, R. V. Particionamento de Dom\u00ednio e Balanceamento de Carga no Mo-\ndelo HIDRA. 2003. Tese (Doutorado em Ci\u00eancia da Computa\u00e7\u00e3o) \u2014 Instituto de Infor-\nm\u00e1tica, UFRGS, Porto Alegre - RS.\n\nDUPUIS, A. From a lattice Boltzmann model to a parallel and reusable implementa-\ntion of a virtual river. 2002. PhD Dissertation \u2014 University of Geneva, CUI - Computer\nScience Departement - University of Geneva.\n\nELMROTH, E. et al. Recursive Blocked Algorithms and Hybrid Data Structures for Dense\nMatrix Library Software. SIAM Rev., [S.l.], v.46, n.1, p.3\u201345, Mar. 2004.\n\nExa Corporation. PowerFLOW for CFD - Driving Fluid Flow Si-\nmulation Technology Into the next Century. Dispon\u00edvel em:\n<http://www.exa.com/newsite/frames/powerflowmaster.html>. Acesso em jun. 2006.\n\nFANG, H. et al. Lattice Boltzmann method for simulating the viscous flow in large dis-\ntensible blood vessels. Physical Review E, [S.l.], v.65, n.5, p.1\u201311, May 2002.\n\nFERZIGER, J. H.; PERIC, M. Computational Methods for Fluid Dynamics. London,\nEngland: Springer Verlag, 2002.\n\nFLEKK\u00f8Y, E. G. Lattice Bhatnagar-Gross-Krook models for miscible fluids. Physical\nReview E, New York, USA, v.47, n.6, p.4247\u20134257, 1993.\n\nFOSTER, I. Designing and Building Parallel Programs: Concepts and tools for Parallel\nSoftware Engineering. Reading, MA: Addison Wesley, 1995.\n\nFRISCH, U. et al. Lattice Gas Hydrodynamics in two and Three Dimension. Complex\nSystems, [S.l.], v.1, p.649\u2013707, 1987.\n\nFRISCH, U.; HASSLACHER, B.; POMEAU, Y. Lattice-Gas Automata for the Navier-\nStokes Equation. Phys. Rev. Lett., [S.l.], v.56, p.1505, 1986.\n\n\n\n84\n\nGALANTE, G. M\u00e9todos Multigrid Paralelos em Malhas Nao Estruturadas Aplicados\n\u00e0 Simula\u00e7\u00e3o de Problemas de Din\u00e2mica de Fluidos Computacional e Transferencia\nde Calor. 2006. 130p. Disserta\u00e7\u00e3o (Mestrado em Ci\u00eancia da Computa\u00e7\u00e3o) \u2014 Instituto de\nInform\u00e1tica, UFRGS, Porto Alegre.\n\nGEIST, A. et al. PVM: Parallel Virtual Machine: A Users\u2019 Guide and Tutorial for Networ-\nked Parallel Computing. Cambridge, MA, USA: MIT Press, 1994.\n\nGIBBONS, P. B. A more practical PRAM model. In: ACM SYMPOSIUM ON PARAL-\nLEL ALGORITHMS AND ARCHITECTURES - SPAA, 1989, Santa Fe, New Mexico,\nUnited States. Proceedings. . . New York: ACM Press, 1989. p.158\u2013168.\n\nGROPP, W. et al. High-performance, portable implementation of the MPI Message Pas-\nsing Interface Standard. Parallel Computing, [S.l.], v.22, n.6, p.789\u2013828, 1996.\n\nGUOI, Z.; ZHAO, T. S. Lattice Boltzmann simulation of natural convection with\ntemperature-dependent viscosity in a porous cavity. Progress in Computational Fluid\nDynamics, [S.l.], v.5, n.1/2, p.110 \u2013 117, 2005.\n\nHARDY, J.; POMEAU, Y.; PAZZIS, O. de. Time evolution of a two-dimensional model\nsystem. I. Invariant states and time correlation functions. J. Math. Phys., [S.l.], v.14,\np.1746, 1973.\n\nHE, X.; LUO, L.-S. Theory of the lattice Boltzmann equation: from Boltzmann equation\nto lattice Boltzmann equation. Phys Rev E, [S.l.], v.56, p.6811\u20136817, 1997.\n\nHE, X.; LUO, L.-S. Lattice Boltzmann model for the incompressible Navier-Stokes equa-\ntion. J. Stat. Phys., [S.l.], v.88, p.927\u2013944, 1997.\n\nHOCKNEY, R. W.; EASTWOOD, J. W. Computer simulation using particles. Bristol,\nPA, USA: Taylor &amp; Francis, Inc., 1988.\n\nJONSSON, I.; KA?GSTR\u00d6M, B. Recursive blocked algorithms for solving triangular sys-\ntems - Part I: one-sided and coupled Sylvester-type matrix equations. ACM Trans. Math.\nSoftw., New York, NY, USA, v.28, n.4, p.392\u2013415, 2002.\n\nKANDHAI, D. et al. Lattice-Boltzmann hydrodynamics on parallel systems. Computer\nPhysics Communications, [S.l.], v.111, p.14\u201326, 1998.\n\nK\u00d6RNER, C. et al. Parallel Lattice Boltzmann Methods for CFD Applications. In: BRU-\nASET, A.; TVEITO, A. (Ed.). Numerical Solution of Partial Differential Equations\non Parallel Computers. [S.l.]: Springer Verlag, 2005. p.439\u2013465. (Lecture Notes for\nComputational Science and Engineering, v.51).\n\nKRAFCZYK, M. et al. Analysis of 3D transient blood flow passing through an artificial\naortic valve by Lattice-Boltzmann methods. Journal of Biomechanics, [S.l.], v.31, n.5,\np.453\u2013462, May 1998.\n\nLAM, M. D.; ROTHBERG, E. E.; WOLF, M. E. The cache performance and optimizati-\nons of blocked algorithms. In: INTERNATIONAL CONFERENCE ON ARCHITECTU-\nRAL SUPPORT FOR PROGRAMMING LANGUAGES AND OPERATING SYSTEMS\n- ASPLOS, 4., 1991, Santa Clara, California, United States. Proceedings. . . New York:\nACM Press, 1991. p.63\u201374.\n\n\n\n85\n\nLAM/MPI Parallel Computing. Disponivel em:&lt;http://www.lam-mpi.org>. Acesso em:\nout. 2006.\n\nLANDAU, L. D.; LIFSHITZ, E. M. Fluid Mechanics. 2nd ed. Oxford, United Kingdom:\nPergamon Press, 1982.\n\nLOCKARD, D. P.; LUO, L.-S.; SINGER, B. A. Evaluation of the Lattice-\nBoltzmann Equation Solver PowerFLOW for Aerodynamic Applications. Dispon\u00ed-\nvel em:&lt;http://www.engr.uky.edu/vac/public_html/CTEMPpowerflow.pdf>. Acesso em:\nout. 2006.\n\nLUCQUIN, B.; PIRONNEAU, O. Introduction to Scientific Computing. New York,\nUSA: J. Wiley &amp; Sons, 1998. 380p.\n\nMARQUEZAN, C.; RIGHI, R.; SCHNORR, L. M.; CAR\u00edSSIMI, A.; MAILLARD, N.;\nNAVAUX, P. O. A. ICE: A service oriented approach to uniform the access and manage-\nment of cluster environments. In: INTERNATIONAL WORKSHOP ON GRID TEST-\nBEDS; INTERNATIONAL SYMPOSIUM ON CLUSTER COMPUTING AND THE\nGRID, 6., 2006, Washington, DC, USA. Proceedings. . . New York: IEEE Computer\nSociety, 2006.\n\nMASSELOT, A. Lattice Gas Model for snow transport. 2000. PhD Dissertation \u2014\nUniversity of Geneva, CUI - Computer Science Departement - University of Geneva.\n\nMCNAMARA, G.; ZANETTI, G. Use of the Boltzmann Equation to Simulate Lattice-\nGas Automata. Phys. Rev. Lett., [S.l.], v.61, p.2332\u20132335, 1988.\n\nMPI FORUM. MPI: A Message-Passing Interface Standard. Journal of Supercomputing\nApplications, [S.l.], v.8, n.3-4, p.165\u2013414, 1994.\n\nMPICH home page. Disponivel em:&lt;http://www-unix.mcs.anl.gov/mpi/mpich1>.\nAcesso em: out. 2006.\n\nMPICH2 Home Page. Disponivel em:&lt;http://www.mcs.anl.gov/mpi/mpich>. Acesso em:\nout. 2006.\n\nONISHI, J.; CHEN, Y.; OHASHI, H. A Lattice Boltzmann model for polymeric liquids.\nProgress in Computational Fluid Dynamics, [S.l.], v.5, n.1/2, p.75 \u2013 84, 2005.\n\nOPEN MPI: Open Source High Performance Computing. Disponivel em:\n<http://www.open-mpi.org>. Acesso em: out. 2006.\n\nPAN, C.; PRINS, J. F.; MILLER, C. T. A high-performance lattice Boltzmann implemen-\ntation to model flow in porous media. Computer Physics Communications, [S.l.], v.158,\nn.2, p.89\u2013105, 2004.\n\nPHILIPPI, P. C. et al. Fluid interfaces in phase transition problems: Lattice-Boltzmann\nmethod. In: COBEM, 18., 2005, Ouro Preto - MG, Brazil. Book of abstracts. . . Rio de\nJaneiro: ABCM, 2005.\n\nPOHL, T. et al. Performance Evaluation of Parallel Large-Scale Lattice Boltzmann Ap-\nplications on Three Supercomputing Architectures. In: ACM/IEEE CONFERENCE ON\nSUPERCOMPUTING - SC, 2004, Washington, DC, USA. Proceedings. . . [S.l.]: IEEE\nComputer Society, 2004. p.21.\n\n\n\n86\n\nQIAN, Y. H.; D\u2019HUMI\u00c8RES, D.; LALLEMAND, P. Lattice BGK Models for Navier-\nStokes Equation. Europhysics Letters, [S.l.], v.17, p.479\u2013484, Feb. 1992.\n\nREIF, F. Fundamentals of statistical and thermal physics. [S.l.]: McGraw\u2013Hill, 1965.\n\nRIZZI, R. L. Modelo Computacional Paralelo para a Hidrodin\u00e2mica e para o Trans-\nporte de Massa Bidimensional e Tridimensional. 2002. Tese (Doutorado em Ci\u00eancia\nda Computa\u00e7\u00e3o) \u2014 Instituto de Inform\u00e1tica, UFRGS, Porto Alegre - RS.\n\nSANTOS, L. O. E. dos et al. Prediction of Intrinsic Permeabilities with Lattice Boltzmann\nMethod. In: COBEM, 18., 2005, Ouro Preto - MG, Brazil. Book of abstracts. . . Rio de\nJaneiro: ABCM, 2005.\n\nSIMS, J. S. et al. Accelerating Scientific Discovery Through Computation and Visuali-\nzation. Journal of Research of the National Institute of Standards and Technology,\n[S.l.], v.105, n.6, p.875\u2013894, Nov.-Dec. 2000.\n\nSLOOT, P. et al. An Interactive Grid Environment for Non-Invasive Vascular Reconstruc-\ntion. In: IEEE/ACM INTERNATIONAL SYMPOSIUM ON CLUSTER COMPUTING\nAND THE GRID - CCGRID, 4., 2004, Chicago, Illinois, USA. Proceedings. . . New\nYork: IEEE, 2004. p.309\u2013319.\n\nSUCCI, S. The Lattice Boltzmann Equation for Fluid Dynamics and Beyond. New\nYork, USA: Oxford University Press, 2001.\n\nTECPLOT. Dispon\u00edvel em:&lt;http://www.tecplot.com>. Acesso em: out. 2006.\n\nVALIANT, L. G. A bridging model for parallel computation. Communications of the\nACM, New York, NY, USA, v.33, n.8, p.103\u2013111, 1990.\n\nVERSTEEG, H.; MALALASEKRA, W. An Introduction to Computational Fluid Dy-\nnamics: The Finite Volume Method Approach. London, England: Springer Verlag, 1995.\n\nWEI, X. et al. The Lattice Boltzmann Method for Gaseous Phenomena. IEEE Tran-\nsactions on Visualization and Computer Graphics, [S.l.], v.10, n.2, p.164\u2013176, Mar.-\nApr. 2004.\n\nWILKINSON, B.; ALLEN, M. Parallel Programming: Using Networked Workstations\nand Parallel Computers. USA: Prentice Hall, 1998.\n\nWOLF, F. G.; SANTOS, L. O. E. dos; PHILIPPI, P. C. Forma\u00e7\u00e3o e din\u00e2mica da interface\nl\u00edquido-vapor simulada pelo m\u00e9todo Lattice-Boltzmann. Revista Brasileira de Ensino\nde F\u00edsica, [S.l.], v.28, n.2, p.167 \u2013 175, 2006.\n\nWOLF-GLADROW, D. A. Lattice-Gas Cellular Automata and Lattice Boltzmann\nModels: An Introduction. Berlin: Springer, 2000. 308p.\n\nWU, H. R. et al. Lattice Boltzmann simulation of flow in porous media on non-uniform\ngrids. Progress in Computational Fluid Dynamics, [S.l.], v.5, n.1/2, p.97 \u2013 103, 2005.\n\nXUAN, Y.; YU, K.; LI, Q. Investigation on flow and heat transfer of nanofluids by the\nthermal Lattice Boltzmann model. Progress in Computational Fluid Dynamics, [S.l.],\nv.5, n.1/2, p.13 \u2013 19, 2005.\n\n\n\n87\n\nYU, D. et al. Viscous flow computations with the method of lattice boltzmann equation.\nProgress in Aerospace Sciences, [S.l.], v.39, n.5, p.329\u2013367, July 2003.\n\n\n\n88\n\nGLOSS\u00c1RIO\n\nAut\u00f4mato Celular - S\u00e3o modelos matem\u00e1ticos simplificados de itera\u00e7\u00f5es espaciais, em\nque cada ponto ou c\u00e9lula do espa\u00e7o possui um estado pr\u00f3prio. A cada passo este estado \u00e9\nalterado segundo regras espec\u00edficas condicionadas aos estados dos pontos vizinhos.\n\nConvec\u00e7\u00e3o - Opera\u00e7\u00e3o de deslocamento.\n\nDin\u00e2mica de Fluidos Computacional (DFC) - \u00c9 a ci\u00eancia que trata da obten\u00e7\u00e3o de\nsolu\u00e7\u00f5es num\u00e9ricas das equa\u00e7\u00f5es que governam um fluxo de fluidos atrav\u00e9s da simula\u00e7\u00e3o\ncomputacional. Desta forma, \u00e9 poss\u00edvel calcular o valor das propriedades f\u00edsicas atrav\u00e9s\nda simula\u00e7\u00e3o da varia\u00e7\u00e3o de tempo e espa\u00e7o.\n\nDensidade - \u00c9 a raz\u00e3o da massa pelo volume de uma determinada mat\u00e9ria.\n\nDifus\u00e3o - Expans\u00e3o das mol\u00e9culas (distribui\u00e7\u00e3o).\n\nEnergia Interna - \u00c9 o total da energia de um sistema provocado pelo movimenta\u00e7\u00e3o das\npart\u00edculas.\n\nFluido - Um fluido \u00e9 um subconjunto de estados da mat\u00e9ria descritos como incapazes de\nresistir a uma deforma\u00e7\u00e3o e capazes de escoar pelo espa\u00e7o. Fluidos s\u00e3o representados por\nfun\u00e7\u00f5es que descrevem suas propriedades f\u00edsicas.\n\nFluido Ideal - \u00c9 um fluido incompress\u00edvel, com viscosidade nula, n\u00e3o turbulento . Muitos\nmodelos baseiam-se em Fluidos Ideais devido a simplifica\u00e7\u00e3o das opera\u00e7\u00f5es.\n\nFluido Real - S\u00e3o os fluidos encontrados na natureza, geralmente dif\u00edceis de serem repre-\nsentados numericamente. Ao contr\u00e1rio dos Fluidos Ideais, os Fluidos Reais apresentam-se\ncompress\u00edveis e com viscosidade.\n\nGanho de desempenho - Utilizado como sin\u00d4nimo para speedup ou fator de acelera\u00e7\u00e3o.\n\nGrade - Uma malha disposta de forma ordenada.\n\nGradiente - Soma do vetor espacial de derivadas parciais para um espa\u00e7o Euclidiano de? dimens\u00f5es.\nHemodin\u00e2mica - Estudo da circula\u00e7\u00e3o sangu\u00ednea e de seus componentes.\n\nHomog\u00eaneo - Composto por uma s\u00f3 subst\u00e2ncia com as mesmas propriedades f\u00edsicas.\n\nImisc\u00edveis - Subst\u00e2ncias que n\u00e3o podem ser misturadas umas com as outras. Exemplo:\n\u00e1gua e \u00f3leo.\n\n\n\n89\n\nIncompress\u00edvel - Um fluido \u00e9 incompress\u00edvel quando possui densidade constante, ou seja,\napesar de todo o fluido poder ser compress\u00edvel sob determinadas condi\u00e7\u00f5es, ele n\u00e3o muda\ncom o passar do tempo em um determinado dom\u00ednio.\n\nIsotropia/Isotr\u00f3pica - Possuir as mesmas propriedades f\u00edsicas em toda a composi\u00e7\u00e3o do\nfluido.\n\nIrrotacional - Um campo vetorial onde para um vetor ? tem-se ??? ? ??? .\nLaminar - Relativo a fluxos n\u00e3o turbulentos, ou seja, fluxos com baixo n\u00famero de Rey-\nnolds.\n\nLaplaciano - O operador de Laplace \u00e9 um operador diferencial de segunda ordem em um\nespa\u00e7o Euclidiano de ? dimens\u00f5es definido como a diverg\u00eancia do gradiente. O Laplaci-\nano \u00e9 a soma de todas as derivadas parciais de segunda ordem.\n\nMagnetohidrodin\u00e2mica - Estudo das intera\u00e7\u00f5es entre eletromagnetismo e hidrodin\u00e2-\nmica. As intera\u00e7\u00f5es ocorrem geralmente em um fluido condutor de eletricidade, quando\neste se encontra envolvido por um campo magn\u00e9tico. Todo estudo te\u00f3rico e fenome-\nnol\u00f3gico da magnetohidrodin\u00e2mica pode ser feito atrav\u00e9s da utiliza\u00e7\u00e3o das equa\u00e7\u00f5es de\nMaxwell, que governam o eletromagnetismo e as equa\u00e7\u00f5es de Navier-Stokes. \u00c9 conhe-\ncido tamb\u00e9m como magnetofluidodin\u00e2mica, magnetodin\u00e2mica ou hidromagnetismo.\n\nMisc\u00edveis - Propriedade qu\u00edmica de duas ou mais subst\u00e2ncias que podem ser misturadas\nentre si (sol\u00faveis uma na outra). Exemplo: \u00e1gua e etanol.\n\nModelo Molecular - Simula\u00e7\u00e3o que considera cada uma das mol\u00e9culas de um fluido.\n\nMomento - A massa multiplicado pela velocidade.\n\nN\u00famero de Knudsen - N\u00famero adimensional definido como a raz\u00e3o entre o comprimento\nm\u00e9dio do trajeto livre das mol\u00e9culas de um fluido em rela\u00e7\u00e3o a um comprimento caracte-\nr\u00edstico. \u00c9 utilizado para descrever o fluxo de um fluido de baixa densidade.\n\nN\u00famero de Mach - \u00c9 o valor obtido entre a raz\u00e3o da velocidade de um objeto ou fluido\npela velocidade do som.\n\nReticulado - Tamb\u00e9m conhecido com Lattice. \u00c9 uma estrutura geom\u00e9trica de ? dimen-\ns\u00f5es formada por diversos pontos dispostos de forma estruturada. Os pontos s\u00e3o orga-\nnizados em um padr\u00e3o regular peri\u00f3dico, tanto em duas como em tr\u00eas dimens\u00f5es, sendo\nconectados por arestas.\n\nMacrosc\u00f3pico - S\u00e3o as propriedades consideradas de um fluido em rela\u00e7\u00e3o a sua compo-\nsi\u00e7\u00e3o elementar total, tais como temperatura, press\u00e3o e densidade.\n\nMesosc\u00f3pico - S\u00e3o as propriedades intermedi\u00e1rias de um fluido. Neste caso, ao in-\nv\u00e9s de considerar o fluido como um todo ou cada uma das mol\u00e9culas individualmente,\nrepresenta-se o mesmo como um conjunto de \"pontos\", de forma que cada um desses\n\"pontos\"seja composto por uma determinada quantidade de mol\u00e9culas, o suficiente para\ndeterminar as propriedades f\u00edsicas da subst\u00e2ncia.\n\nMicrosc\u00f3pico - Relativo as propriedades microsc\u00f3picas, ou seja as propriedades e as\nintera\u00e7\u00f5es moleculares do fluido.\n\n\n\n90\n\nMomento - Produto entre a massa e a velocidade.\n\nN\u00famero de Reynolds - \u00c9 a rela\u00e7\u00e3o entre as propriedades de um fluido que definem ca-\nracter\u00edsticas de comportamento do mesmo. \u00c9 definido como\n\n? ( ? ? ? ' ??? ? ? ' ? ? . Para\nRe > 30 um fluido se torna turbulento.\n\nPart\u00edcula - \u00c9 um conjunto de mol\u00e9culas cujas propriedades s\u00e3o representadas por um\n\u00fanico ponto.\n\nSubreticulado - \u00c9 parte de um reticulado. Ou seja, \u00e9 uma das unidades que comp\u00f5e o\nreticulado que foi particionado.\n\nViscosidade - Medida de resist\u00eancia de um l\u00edquido em rela\u00e7\u00e3o a um fluxo. \u00c9 a quantidade\nde movimento que ocorre para o transporte microsc\u00f3pico por difus\u00e3o molecular. Quanto\nmaior a viscosidade, menor \u00e9 a velocidade que um fluido se movimenta.\n\n\n\n91\n\nANEXO ARTIGOS\n\nNeste anexo encontram-se relacionadas todas as publica\u00e7\u00f5es feitas durante o per\u00edodo\nde desenvolvimento desta disserta\u00e7\u00e3o.\n\nPublica\u00e7\u00f5es Aceitas\n? \"Uso do M\u00e9todo de Lattice Boltzmann em Aplica\u00e7\u00f5es da Hidrodin\u00e2mica\". ERAD\n\n2006, Iju\u00ed - RS.\n\n? \"Parallel Implementation of the Lattice Boltzmann Method for Clusters\". PARA\u201906,\nUmea, Su\u00e9cia.\n\n? \"Implementa\u00e7\u00e3o Paralela de uma Vers\u00e3o Bidimensional do M\u00e9todo de Lattice Boltz-\nmann para Fluxos de Fluidos em Estruturas com Obst\u00e1culos\". WSGPPD 2005,\nPorto Alegre - RS.\n\n? \"Paraleliza\u00e7\u00e3o do Modelo Bidimensional do M\u00e9todo de Lattice Boltzmann\". ERAD\n2007, Porto Alegre - RS.\n\nPublica\u00e7\u00f5es Submetidas\n? \"Uso de Aplica\u00e7\u00f5es Cient\u00edficas para a Avalia\u00e7\u00e3o de Arquiteturas Paralelas\". WPer-\n\nformance 2006, Campo Grande - MS.\n\n? \"Simulating Fluid Flows in Complex Geometries Using a Parallel Lattice Boltz-\nmann Implementation\". SBAC-PAD 2006, Ouro Preto - MG.\n\n? \"Performance Improvement of the Parallel Lattice Boltzmann Method Through\nBlocked Data Distributions\". CCGrid 2007, Rio de Janeiro - RJ (em avalia\u00e7\u00e3o)."}]}}}